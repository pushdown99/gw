cscope 15 /var/www/html/debian/gateway               0001715615
	@/var/www/html/debian/gateway/build/CMakeFiles/3.5.1/CompilerIdC/CMakeCCompilerId.c

1 #ifde‡
__˝lu•lus


5 #i‡
deföed
(
__18CXX
)

6 
	#ID_VOID_MAIN


	)

13 #i‡
deföed
(
__INTEL_COMPILER
Ë|| deföed(
__ICC
)

14 
	#COMPILER_ID
 "I¡ñ"

	)

15 #i‡
deföed
(
_MSC_VER
)

16 
	#SIMULATE_ID
 "MSVC"

	)

19 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__INTEL_COMPILER
/100)

	)

20 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__INTEL_COMPILER
/10 % 10)

	)

21 #i‡
deföed
(
__INTEL_COMPILER_UPDATE
)

22 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__INTEL_COMPILER_UPDATE
)

	)

24 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__INTEL_COMPILER
 % 10)

	)

26 #i‡
deföed
(
__INTEL_COMPILER_BUILD_DATE
)

28 
	#COMPILER_VERSION_TWEAK
 
	`DEC
(
__INTEL_COMPILER_BUILD_DATE
)

	)

30 #i‡
deföed
(
_MSC_VER
)

32 
	#SIMULATE_VERSION_MAJOR
 
	`DEC
(
_MSC_VER
 / 100)

	)

33 
	#SIMULATE_VERSION_MINOR
 
	`DEC
(
_MSC_VER
 % 100)

	)

36 #ñi‡
deföed
(
__PATHCC__
)

37 
	#COMPILER_ID
 "P©hSˇÀ"

	)

38 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__PATHCC__
)

	)

39 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__PATHCC_MINOR__
)

	)

40 #i‡
deföed
(
__PATHCC_PATCHLEVEL__
)

41 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__PATHCC_PATCHLEVEL__
)

	)

44 #ñi‡
deföed
(
__BORLANDC__
Ë&& deföed(
__CODEGEARC_VERSION__
)

45 
	#COMPILER_ID
 "Emb¨ˇdîo"

	)

46 
	#COMPILER_VERSION_MAJOR
 
	`HEX
(
__CODEGEARC_VERSION__
>>24 & 0x00FF)

	)

47 
	#COMPILER_VERSION_MINOR
 
	`HEX
(
__CODEGEARC_VERSION__
>>16 & 0x00FF)

	)

48 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__CODEGEARC_VERSION__
 & 0xFFFF)

	)

50 #ñi‡
deföed
(
__BORLANDC__
)

51 
	#COMPILER_ID
 "B‹œnd"

	)

53 
	#COMPILER_VERSION_MAJOR
 
	`HEX
(
__BORLANDC__
>>8)

	)

54 
	#COMPILER_VERSION_MINOR
 
	`HEX
(
__BORLANDC__
 & 0xFF)

	)

56 #ñi‡
deföed
(
__WATCOMC__
) && __WATCOMC__ < 1200

57 
	#COMPILER_ID
 "W©com"

	)

59 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__WATCOMC__
 / 100)

	)

60 
	#COMPILER_VERSION_MINOR
 
	`DEC
((
__WATCOMC__
 / 10Ë% 10)

	)

61 #i‡(
__WATCOMC__
 % 10) > 0

62 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__WATCOMC__
 % 10)

	)

65 #ñi‡
deföed
(
__WATCOMC__
)

66 
	#COMPILER_ID
 "O≥nW©com"

	)

68 
	#COMPILER_VERSION_MAJOR
 
	`DEC
((
__WATCOMC__
 - 1100Ë/ 100)

	)

69 
	#COMPILER_VERSION_MINOR
 
	`DEC
((
__WATCOMC__
 / 10Ë% 10)

	)

70 #i‡(
__WATCOMC__
 % 10) > 0

71 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__WATCOMC__
 % 10)

	)

74 #ñi‡
deföed
(
__SUNPRO_C
)

75 
	#COMPILER_ID
 "SunPro"

	)

76 #i‡
__SUNPRO_C
 >= 0x5100

78 
	#COMPILER_VERSION_MAJOR
 
	`HEX
(
__SUNPRO_C
>>12)

	)

79 
	#COMPILER_VERSION_MINOR
 
	`HEX
(
__SUNPRO_C
>>4 & 0xFF)

	)

80 
	#COMPILER_VERSION_PATCH
 
	`HEX
(
__SUNPRO_C
 & 0xF)

	)

83 
	#COMPILER_VERSION_MAJOR
 
	`HEX
(
__SUNPRO_C
>>8)

	)

84 
	#COMPILER_VERSION_MINOR
 
	`HEX
(
__SUNPRO_C
>>4 & 0xF)

	)

85 
	#COMPILER_VERSION_PATCH
 
	`HEX
(
__SUNPRO_C
 & 0xF)

	)

88 #ñi‡
deföed
(
__HP_cc
)

89 
	#COMPILER_ID
 "HP"

	)

91 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__HP_cc
/10000)

	)

92 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__HP_cc
/100 % 100)

	)

93 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__HP_cc
 % 100)

	)

95 #ñi‡
deföed
(
__DECC
)

96 
	#COMPILER_ID
 "Com∑q"

	)

98 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__DECC_VER
/10000000)

	)

99 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__DECC_VER
/100000 % 100)

	)

100 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__DECC_VER
 % 10000)

	)

102 #ñi‡
deföed
(
__IBMC__
Ë&& deföed(
__COMPILER_VER__
)

103 
	#COMPILER_ID
 "zOS"

	)

105 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__IBMC__
/100)

	)

106 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__IBMC__
/10 % 10)

	)

107 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__IBMC__
 % 10)

	)

109 #ñi‡
deföed
(
__IBMC__
Ë&& !deföed(
__COMPILER_VER__
) && __IBMC__ >= 800

110 
	#COMPILER_ID
 "XL"

	)

112 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__IBMC__
/100)

	)

113 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__IBMC__
/10 % 10)

	)

114 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__IBMC__
 % 10)

	)

116 #ñi‡
deföed
(
__IBMC__
Ë&& !deföed(
__COMPILER_VER__
) && __IBMC__ < 800

117 
	#COMPILER_ID
 "VisuÆAge"

	)

119 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__IBMC__
/100)

	)

120 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__IBMC__
/10 % 10)

	)

121 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__IBMC__
 % 10)

	)

123 #ñi‡
deföed
(
__PGI
)

124 
	#COMPILER_ID
 "PGI"

	)

125 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__PGIC__
)

	)

126 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__PGIC_MINOR__
)

	)

127 #i‡
deföed
(
__PGIC_PATCHLEVEL__
)

128 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__PGIC_PATCHLEVEL__
)

	)

131 #ñi‡
deföed
(
_CRAYC
)

132 
	#COMPILER_ID
 "Cøy"

	)

133 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
_RELEASE_MAJOR
)

	)

134 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
_RELEASE_MINOR
)

	)

136 #ñi‡
deföed
(
__TI_COMPILER_VERSION__
)

137 
	#COMPILER_ID
 "TI"

	)

139 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__TI_COMPILER_VERSION__
/1000000)

	)

140 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__TI_COMPILER_VERSION__
/1000 % 1000)

	)

141 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__TI_COMPILER_VERSION__
 % 1000)

	)

143 #ñi‡
deföed
(
__FUJITSU
Ë|| deföed(
__FCC_VERSION
Ë|| deföed(
__fcc_vîsi⁄
)

144 
	#COMPILER_ID
 "Fujôsu"

	)

146 #ñi‡
deföed
(
__TINYC__
)

147 
	#COMPILER_ID
 "TöyCC"

	)

149 #ñi‡
deföed
(
__SCO_VERSION__
)

150 
	#COMPILER_ID
 "SCO"

	)

152 #ñi‡
deföed
(
__˛™g__
Ë&& deföed(
__≠∂e_buûd_vîsi⁄__
)

153 
	#COMPILER_ID
 "AµÀCœng"

	)

154 #i‡
deföed
(
_MSC_VER
)

155 
	#SIMULATE_ID
 "MSVC"

	)

157 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__˛™g_maj‹__
)

	)

158 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__˛™g_mö‹__
)

	)

159 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__˛™g_∑tchÀvñ__
)

	)

160 #i‡
deföed
(
_MSC_VER
)

162 
	#SIMULATE_VERSION_MAJOR
 
	`DEC
(
_MSC_VER
 / 100)

	)

163 
	#SIMULATE_VERSION_MINOR
 
	`DEC
(
_MSC_VER
 % 100)

	)

165 
	#COMPILER_VERSION_TWEAK
 
	`DEC
(
__≠∂e_buûd_vîsi⁄__
)

	)

167 #ñi‡
deföed
(
__˛™g__
)

168 
	#COMPILER_ID
 "Cœng"

	)

169 #i‡
deföed
(
_MSC_VER
)

170 
	#SIMULATE_ID
 "MSVC"

	)

172 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__˛™g_maj‹__
)

	)

173 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__˛™g_mö‹__
)

	)

174 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__˛™g_∑tchÀvñ__
)

	)

175 #i‡
deföed
(
_MSC_VER
)

177 
	#SIMULATE_VERSION_MAJOR
 
	`DEC
(
_MSC_VER
 / 100)

	)

178 
	#SIMULATE_VERSION_MINOR
 
	`DEC
(
_MSC_VER
 % 100)

	)

181 #ñi‡
deföed
(
__GNUC__
)

182 
	#COMPILER_ID
 "GNU"

	)

183 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__GNUC__
)

	)

184 #i‡
deföed
(
__GNUC_MINOR__
)

185 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__GNUC_MINOR__
)

	)

187 #i‡
deföed
(
__GNUC_PATCHLEVEL__
)

188 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__GNUC_PATCHLEVEL__
)

	)

191 #ñi‡
deföed
(
_MSC_VER
)

192 
	#COMPILER_ID
 "MSVC"

	)

194 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
_MSC_VER
 / 100)

	)

195 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
_MSC_VER
 % 100)

	)

196 #i‡
deföed
(
_MSC_FULL_VER
)

197 #i‡
_MSC_VER
 >= 1400

199 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
_MSC_FULL_VER
 % 100000)

	)

202 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
_MSC_FULL_VER
 % 10000)

	)

205 #i‡
deföed
(
_MSC_BUILD
)

206 
	#COMPILER_VERSION_TWEAK
 
	`DEC
(
_MSC_BUILD
)

	)

209 #ñi‡
deföed
(
__VISUALDSPVERSION__
Ë|| deföed(
__ADSPBLACKFIN__
Ë|| deföed(
__ADSPTS__
Ë|| deföed(
__ADSP21000__
)

210 
	#COMPILER_ID
 "ADSP"

	)

211 #i‡
deföed
(
__VISUALDSPVERSION__
)

213 
	#COMPILER_VERSION_MAJOR
 
	`HEX
(
__VISUALDSPVERSION__
>>24)

	)

214 
	#COMPILER_VERSION_MINOR
 
	`HEX
(
__VISUALDSPVERSION__
>>16 & 0xFF)

	)

215 
	#COMPILER_VERSION_PATCH
 
	`HEX
(
__VISUALDSPVERSION__
>>8 & 0xFF)

	)

218 #ñi‡
deföed
(
__IAR_SYSTEMS_ICC__
 ) || deföed(
__IAR_SYSTEMS_ICC
)

219 
	#COMPILER_ID
 "IAR"

	)

221 #ñi‡
deföed
(
__ARMCC_VERSION
)

222 
	#COMPILER_ID
 "ARMCC"

	)

223 #i‡
__ARMCC_VERSION
 >= 1000000

225 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__ARMCC_VERSION
/1000000)

	)

226 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__ARMCC_VERSION
/10000 % 100)

	)

227 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__ARMCC_VERSION
 % 10000)

	)

230 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__ARMCC_VERSION
/100000)

	)

231 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__ARMCC_VERSION
/10000 % 10)

	)

232 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__ARMCC_VERSION
 % 10000)

	)

236 #ñi‡
deföed
(
SDCC
)

237 
	#COMPILER_ID
 "SDCC"

	)

239 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
SDCC
/100)

	)

240 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
SDCC
/10 % 10)

	)

241 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
SDCC
 % 10)

	)

243 #ñi‡
deföed
(
_SGI_COMPILER_VERSION
Ë|| deföed(
_COMPILER_VERSION
)

244 
	#COMPILER_ID
 "MIPS¥o"

	)

245 #i‡
deföed
(
_SGI_COMPILER_VERSION
)

247 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
_SGI_COMPILER_VERSION
/100)

	)

248 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
_SGI_COMPILER_VERSION
/10 % 10)

	)

249 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
_SGI_COMPILER_VERSION
 % 10)

	)

252 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
_COMPILER_VERSION
/100)

	)

253 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
_COMPILER_VERSION
/10 % 10)

	)

254 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
_COMPILER_VERSION
 % 10)

	)

261 #ñi‡
deföed
(
__sgi
)

262 
	#COMPILER_ID
 "MIPS¥o"

	)

264 #ñi‡
deföed
(
__hpux
Ë|| deföed(
__hpua
)

265 
	#COMPILER_ID
 "HP"

	)

268 
	#COMPILER_ID
 ""

	)

275 c⁄°* 
	göfo_compûî
 = "INFO" ":" "compûî[" 
COMPILER_ID
 "]";

276 #ifde‡
SIMULATE_ID


277 c⁄°* 
	göfo_simuœã
 = "INFO" ":" "simuœã[" 
SIMULATE_ID
 "]";

280 #ifde‡
__QNXNTO__


281 c⁄°* 
	gqnx¡o
 = "INFO" ":" "qnxnto[]";

284 #i‡
deföed
(
__CRAYXE
Ë|| deföed(
__CRAYXC
)

285 c⁄° *
	göfo_¸ay
 = "INFO" ":" "compiler_wrapper[CrayPrgEnv]";

288 
	#STRINGIFY_HELPER
(
X
Ë#X

	)

289 
	#STRINGIFY
(
X
Ë
	`STRINGIFY_HELPER
(X)

	)

292 #i‡
deföed
(
__löux
Ë|| deföed(
__löux__
Ë|| deföed(
löux
)

293 
	#PLATFORM_ID
 "Löux"

	)

295 #ñi‡
deföed
(
__CYGWIN__
)

296 
	#PLATFORM_ID
 "Cygwö"

	)

298 #ñi‡
deföed
(
__MINGW32__
)

299 
	#PLATFORM_ID
 "MöGW"

	)

301 #ñi‡
deföed
(
__APPLE__
)

302 
	#PLATFORM_ID
 "D¨wö"

	)

304 #ñi‡
deföed
(
_WIN32
Ë|| deföed(
__WIN32__
Ë|| deföed(
WIN32
)

305 
	#PLATFORM_ID
 "Wödows"

	)

307 #ñi‡
deföed
(
__FªeBSD__
Ë|| deföed(
__FªeBSD
)

308 
	#PLATFORM_ID
 "FªeBSD"

	)

310 #ñi‡
deföed
(
__NëBSD__
Ë|| deföed(
__NëBSD
)

311 
	#PLATFORM_ID
 "NëBSD"

	)

313 #ñi‡
deföed
(
__O≥nBSD__
Ë|| deföed(
__OPENBSD
)

314 
	#PLATFORM_ID
 "O≥nBSD"

	)

316 #ñi‡
deföed
(
__sun
Ë|| deföed(
sun
)

317 
	#PLATFORM_ID
 "SunOS"

	)

319 #ñi‡
deföed
(
_AIX
Ë|| deföed(
__AIX
Ë|| deföed(
__AIX__
Ë|| deföed(
__aix
Ë|| deföed(
__aix__
)

320 
	#PLATFORM_ID
 "AIX"

	)

322 #ñi‡
deföed
(
__sgi
Ë|| deföed(
__sgi__
Ë|| deföed(
_SGI
)

323 
	#PLATFORM_ID
 "IRIX"

	)

325 #ñi‡
deföed
(
__hpux
Ë|| deföed(
__hpux__
)

326 
	#PLATFORM_ID
 "HP-UX"

	)

328 #ñi‡
deföed
(
__HAIKU__
)

329 
	#PLATFORM_ID
 "Haiku"

	)

331 #ñi‡
deföed
(
__BeOS
Ë|| deföed(
__BEOS__
Ë|| deföed(
_BEOS
)

332 
	#PLATFORM_ID
 "BeOS"

	)

334 #ñi‡
deföed
(
__QNX__
Ë|| deföed(
__QNXNTO__
)

335 
	#PLATFORM_ID
 "QNX"

	)

337 #ñi‡
deföed
(
__åu64
Ë|| deföed(
_åu64
Ë|| deföed(
__TRU64__
)

338 
	#PLATFORM_ID
 "Tru64"

	)

340 #ñi‡
deföed
(
__riscos
Ë|| deföed(
__riscos__
)

341 
	#PLATFORM_ID
 "RISCos"

	)

343 #ñi‡
deföed
(
__söix
Ë|| deföed(
__söix__
Ë|| deföed(
__SINIX__
)

344 
	#PLATFORM_ID
 "SINIX"

	)

346 #ñi‡
deföed
(
__UNIX_SV__
)

347 
	#PLATFORM_ID
 "UNIX_SV"

	)

349 #ñi‡
deföed
(
__bsdos__
)

350 
	#PLATFORM_ID
 "BSDOS"

	)

352 #ñi‡
deföed
(
_MPRAS
Ë|| deföed(
MPRAS
)

353 
	#PLATFORM_ID
 "MP-RAS"

	)

355 #ñi‡
deföed
(
__osf
Ë|| deföed(
__osf__
)

356 
	#PLATFORM_ID
 "OSF1"

	)

358 #ñi‡
deföed
(
_SCO_SV
Ë|| deföed(
SCO_SV
Ë|| deföed(
sco_sv
)

359 
	#PLATFORM_ID
 "SCO_SV"

	)

361 #ñi‡
deföed
(
__u…rix
Ë|| deföed(
__u…rix__
Ë|| deföed(
_ULTRIX
)

362 
	#PLATFORM_ID
 "ULTRIX"

	)

364 #ñi‡
deföed
(
__XENIX__
Ë|| deföed(
_XENIX
Ë|| deföed(
XENIX
)

365 
	#PLATFORM_ID
 "Xíix"

	)

367 #ñi‡
deföed
(
__WATCOMC__
)

368 #i‡
deföed
(
__LINUX__
)

369 
	#PLATFORM_ID
 "Löux"

	)

371 #ñi‡
deföed
(
__DOS__
)

372 
	#PLATFORM_ID
 "DOS"

	)

374 #ñi‡
deföed
(
__OS2__
)

375 
	#PLATFORM_ID
 "OS2"

	)

377 #ñi‡
deföed
(
__WINDOWS__
)

378 
	#PLATFORM_ID
 "Wödows3x"

	)

381 
	#PLATFORM_ID
 ""

	)

385 
	#PLATFORM_ID
 ""

	)

394 #i‡
deföed
(
_WIN32
Ë&& deföed(
_MSC_VER
)

395 #i‡
deföed
(
_M_IA64
)

396 
	#ARCHITECTURE_ID
 "IA64"

	)

398 #ñi‡
deföed
(
_M_X64
Ë|| deföed(
_M_AMD64
)

399 
	#ARCHITECTURE_ID
 "x64"

	)

401 #ñi‡
deföed
(
_M_IX86
)

402 
	#ARCHITECTURE_ID
 "X86"

	)

404 #ñi‡
deföed
(
_M_ARM
)

405 #i‡
_M_ARM
 == 4

406 
	#ARCHITECTURE_ID
 "ARMV4I"

	)

407 #ñi‡
_M_ARM
 == 5

408 
	#ARCHITECTURE_ID
 "ARMV5I"

	)

410 
	#ARCHITECTURE_ID
 "ARMV" 
	`STRINGIFY
(
_M_ARM
)

	)

413 #ñi‡
deföed
(
_M_MIPS
)

414 
	#ARCHITECTURE_ID
 "MIPS"

	)

416 #ñi‡
deföed
(
_M_SH
)

417 
	#ARCHITECTURE_ID
 "SHx"

	)

420 
	#ARCHITECTURE_ID
 ""

	)

423 #ñi‡
deföed
(
__WATCOMC__
)

424 #i‡
deföed
(
_M_I86
)

425 
	#ARCHITECTURE_ID
 "I86"

	)

427 #ñi‡
deföed
(
_M_IX86
)

428 
	#ARCHITECTURE_ID
 "X86"

	)

431 
	#ARCHITECTURE_ID
 ""

	)

435 
	#ARCHITECTURE_ID
 ""

	)

439 
	#DEC
(
n
) \

440 ('0' + (((
n
) / 10000000)%10)), \

441 ('0' + (((
n
) / 1000000)%10)), \

442 ('0' + (((
n
) / 100000)%10)), \

443 ('0' + (((
n
) / 10000)%10)), \

444 ('0' + (((
n
) / 1000)%10)), \

445 ('0' + (((
n
) / 100)%10)), \

446 ('0' + (((
n
) / 10)%10)), \

447 ('0' + ((
n
Ë% 10))

	)

450 
	#HEX
(
n
) \

451 ('0' + ((
n
)>>28 & 0xF)), \

452 ('0' + ((
n
)>>24 & 0xF)), \

453 ('0' + ((
n
)>>20 & 0xF)), \

454 ('0' + ((
n
)>>16 & 0xF)), \

455 ('0' + ((
n
)>>12 & 0xF)), \

456 ('0' + ((
n
)>>8 & 0xF)), \

457 ('0' + ((
n
)>>4 & 0xF)), \

458 ('0' + ((
n
Ë& 0xF))

	)

461 #ifde‡
COMPILER_VERSION_MAJOR


462 c⁄° 
	göfo_vîsi⁄
[] = {

465 
COMPILER_VERSION_MAJOR
,

466 #ifde‡
COMPILER_VERSION_MINOR


467 '.', 
COMPILER_VERSION_MINOR
,

468 #ifde‡
COMPILER_VERSION_PATCH


469 '.', 
COMPILER_VERSION_PATCH
,

470 #ifde‡
COMPILER_VERSION_TWEAK


471 '.', 
COMPILER_VERSION_TWEAK
,

479 #ifde‡
SIMULATE_VERSION_MAJOR


480 c⁄° 
	göfo_simuœã_vîsi⁄
[] = {

483 
SIMULATE_VERSION_MAJOR
,

484 #ifde‡
SIMULATE_VERSION_MINOR


485 '.', 
SIMULATE_VERSION_MINOR
,

486 #ifde‡
SIMULATE_VERSION_PATCH


487 '.', 
SIMULATE_VERSION_PATCH
,

488 #ifde‡
SIMULATE_VERSION_TWEAK


489 '.', 
SIMULATE_VERSION_TWEAK
,

500 c⁄°* 
	göfo_∂©f‹m
 = "INFO" ":" "∂©f‹m[" 
PLATFORM_ID
 "]";

501 c⁄°* 
	göfo_¨ch
 = "INFO" ":" "¨ch[" 
ARCHITECTURE_ID
 "]";

506 c⁄° * 
	göfo_œnguage_düÀ˘_deÁu…
 = "INFO" ":" "dialect_default["

507 #i‡!
deföed
(
__STDC_VERSION__
)

509 #ñi‡
__STDC_VERSION__
 >= 201000L

511 #ñi‡
__STDC_VERSION__
 >= 199901L

519 #ifde‡
ID_VOID_MAIN


520 
	$maö
(Ë{
	}
}

522 
	$maö
(
¨gc
, * 
¨gv
[])

524 
ªquúe
 = 0;

525 
ªquúe
 +
öfo_compûî
[
¨gc
];

526 
ªquúe
 +
öfo_∂©f‹m
[
¨gc
];

527 
ªquúe
 +
öfo_¨ch
[
¨gc
];

528 #ifde‡
COMPILER_VERSION_MAJOR


529 
ªquúe
 +
öfo_vîsi⁄
[
¨gc
];

531 #ifde‡
SIMULATE_ID


532 
ªquúe
 +
öfo_simuœã
[
¨gc
];

534 #ifde‡
SIMULATE_VERSION_MAJOR


535 
ªquúe
 +
öfo_simuœã_vîsi⁄
[
¨gc
];

537 #i‡
	`deföed
(
__CRAYXE
Ë|| deföed(
__CRAYXC
)

538 
ªquúe
 +
öfo_¸ay
[
¨gc
];

540 
ªquúe
 +
öfo_œnguage_düÀ˘_deÁu…
[
¨gc
];

541 ()
¨gv
;

542  
ªquúe
;

543 
	}
}

	@/var/www/html/debian/gateway/build/CMakeFiles/feature_tests.c

2 c⁄° 
	g„©uªs
[] = {"\n"

4 #i‡(
__GNUC__
 * 100 + 
__GNUC_MINOR__
) >= 404

11 #i‡(
__GNUC__
 * 100 + 
__GNUC_MINOR__
Ë>404 && 
deföed
(
__STDC_VERSION__
) && __STDC_VERSION__ >= 199901L

18 #i‡(
__GNUC__
 * 100 + 
__GNUC_MINOR__
Ë>406 && 
deföed
(
__STDC_VERSION__
) && __STDC_VERSION__ >= 201000L

25 #i‡(
__GNUC__
 * 100 + 
__GNUC_MINOR__
Ë>404 && 
deföed
(
__STDC_VERSION__
) && __STDC_VERSION__ >= 199901L

34 
	$maö
(
¨gc
, ** 
¨gv
Ë{ (Ôrgv;  
„©uªs
[¨gc]; 
	}
}

	@/var/www/html/debian/gateway/build/kaa/kaa_keys/CMakeFiles/3.5.1/CompilerIdC/CMakeCCompilerId.c

1 #ifde‡
__˝lu•lus


5 #i‡
deföed
(
__18CXX
)

6 
	#ID_VOID_MAIN


	)

13 #i‡
deföed
(
__INTEL_COMPILER
Ë|| deföed(
__ICC
)

14 
	#COMPILER_ID
 "I¡ñ"

	)

15 #i‡
deföed
(
_MSC_VER
)

16 
	#SIMULATE_ID
 "MSVC"

	)

19 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__INTEL_COMPILER
/100)

	)

20 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__INTEL_COMPILER
/10 % 10)

	)

21 #i‡
deföed
(
__INTEL_COMPILER_UPDATE
)

22 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__INTEL_COMPILER_UPDATE
)

	)

24 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__INTEL_COMPILER
 % 10)

	)

26 #i‡
deföed
(
__INTEL_COMPILER_BUILD_DATE
)

28 
	#COMPILER_VERSION_TWEAK
 
	`DEC
(
__INTEL_COMPILER_BUILD_DATE
)

	)

30 #i‡
deföed
(
_MSC_VER
)

32 
	#SIMULATE_VERSION_MAJOR
 
	`DEC
(
_MSC_VER
 / 100)

	)

33 
	#SIMULATE_VERSION_MINOR
 
	`DEC
(
_MSC_VER
 % 100)

	)

36 #ñi‡
deföed
(
__PATHCC__
)

37 
	#COMPILER_ID
 "P©hSˇÀ"

	)

38 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__PATHCC__
)

	)

39 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__PATHCC_MINOR__
)

	)

40 #i‡
deföed
(
__PATHCC_PATCHLEVEL__
)

41 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__PATHCC_PATCHLEVEL__
)

	)

44 #ñi‡
deföed
(
__BORLANDC__
Ë&& deföed(
__CODEGEARC_VERSION__
)

45 
	#COMPILER_ID
 "Emb¨ˇdîo"

	)

46 
	#COMPILER_VERSION_MAJOR
 
	`HEX
(
__CODEGEARC_VERSION__
>>24 & 0x00FF)

	)

47 
	#COMPILER_VERSION_MINOR
 
	`HEX
(
__CODEGEARC_VERSION__
>>16 & 0x00FF)

	)

48 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__CODEGEARC_VERSION__
 & 0xFFFF)

	)

50 #ñi‡
deföed
(
__BORLANDC__
)

51 
	#COMPILER_ID
 "B‹œnd"

	)

53 
	#COMPILER_VERSION_MAJOR
 
	`HEX
(
__BORLANDC__
>>8)

	)

54 
	#COMPILER_VERSION_MINOR
 
	`HEX
(
__BORLANDC__
 & 0xFF)

	)

56 #ñi‡
deföed
(
__WATCOMC__
) && __WATCOMC__ < 1200

57 
	#COMPILER_ID
 "W©com"

	)

59 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__WATCOMC__
 / 100)

	)

60 
	#COMPILER_VERSION_MINOR
 
	`DEC
((
__WATCOMC__
 / 10Ë% 10)

	)

61 #i‡(
__WATCOMC__
 % 10) > 0

62 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__WATCOMC__
 % 10)

	)

65 #ñi‡
deföed
(
__WATCOMC__
)

66 
	#COMPILER_ID
 "O≥nW©com"

	)

68 
	#COMPILER_VERSION_MAJOR
 
	`DEC
((
__WATCOMC__
 - 1100Ë/ 100)

	)

69 
	#COMPILER_VERSION_MINOR
 
	`DEC
((
__WATCOMC__
 / 10Ë% 10)

	)

70 #i‡(
__WATCOMC__
 % 10) > 0

71 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__WATCOMC__
 % 10)

	)

74 #ñi‡
deföed
(
__SUNPRO_C
)

75 
	#COMPILER_ID
 "SunPro"

	)

76 #i‡
__SUNPRO_C
 >= 0x5100

78 
	#COMPILER_VERSION_MAJOR
 
	`HEX
(
__SUNPRO_C
>>12)

	)

79 
	#COMPILER_VERSION_MINOR
 
	`HEX
(
__SUNPRO_C
>>4 & 0xFF)

	)

80 
	#COMPILER_VERSION_PATCH
 
	`HEX
(
__SUNPRO_C
 & 0xF)

	)

83 
	#COMPILER_VERSION_MAJOR
 
	`HEX
(
__SUNPRO_C
>>8)

	)

84 
	#COMPILER_VERSION_MINOR
 
	`HEX
(
__SUNPRO_C
>>4 & 0xF)

	)

85 
	#COMPILER_VERSION_PATCH
 
	`HEX
(
__SUNPRO_C
 & 0xF)

	)

88 #ñi‡
deföed
(
__HP_cc
)

89 
	#COMPILER_ID
 "HP"

	)

91 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__HP_cc
/10000)

	)

92 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__HP_cc
/100 % 100)

	)

93 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__HP_cc
 % 100)

	)

95 #ñi‡
deföed
(
__DECC
)

96 
	#COMPILER_ID
 "Com∑q"

	)

98 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__DECC_VER
/10000000)

	)

99 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__DECC_VER
/100000 % 100)

	)

100 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__DECC_VER
 % 10000)

	)

102 #ñi‡
deföed
(
__IBMC__
Ë&& deföed(
__COMPILER_VER__
)

103 
	#COMPILER_ID
 "zOS"

	)

105 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__IBMC__
/100)

	)

106 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__IBMC__
/10 % 10)

	)

107 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__IBMC__
 % 10)

	)

109 #ñi‡
deföed
(
__IBMC__
Ë&& !deföed(
__COMPILER_VER__
) && __IBMC__ >= 800

110 
	#COMPILER_ID
 "XL"

	)

112 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__IBMC__
/100)

	)

113 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__IBMC__
/10 % 10)

	)

114 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__IBMC__
 % 10)

	)

116 #ñi‡
deföed
(
__IBMC__
Ë&& !deföed(
__COMPILER_VER__
) && __IBMC__ < 800

117 
	#COMPILER_ID
 "VisuÆAge"

	)

119 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__IBMC__
/100)

	)

120 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__IBMC__
/10 % 10)

	)

121 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__IBMC__
 % 10)

	)

123 #ñi‡
deföed
(
__PGI
)

124 
	#COMPILER_ID
 "PGI"

	)

125 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__PGIC__
)

	)

126 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__PGIC_MINOR__
)

	)

127 #i‡
deföed
(
__PGIC_PATCHLEVEL__
)

128 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__PGIC_PATCHLEVEL__
)

	)

131 #ñi‡
deföed
(
_CRAYC
)

132 
	#COMPILER_ID
 "Cøy"

	)

133 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
_RELEASE_MAJOR
)

	)

134 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
_RELEASE_MINOR
)

	)

136 #ñi‡
deföed
(
__TI_COMPILER_VERSION__
)

137 
	#COMPILER_ID
 "TI"

	)

139 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__TI_COMPILER_VERSION__
/1000000)

	)

140 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__TI_COMPILER_VERSION__
/1000 % 1000)

	)

141 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__TI_COMPILER_VERSION__
 % 1000)

	)

143 #ñi‡
deföed
(
__FUJITSU
Ë|| deföed(
__FCC_VERSION
Ë|| deföed(
__fcc_vîsi⁄
)

144 
	#COMPILER_ID
 "Fujôsu"

	)

146 #ñi‡
deföed
(
__TINYC__
)

147 
	#COMPILER_ID
 "TöyCC"

	)

149 #ñi‡
deföed
(
__SCO_VERSION__
)

150 
	#COMPILER_ID
 "SCO"

	)

152 #ñi‡
deföed
(
__˛™g__
Ë&& deföed(
__≠∂e_buûd_vîsi⁄__
)

153 
	#COMPILER_ID
 "AµÀCœng"

	)

154 #i‡
deföed
(
_MSC_VER
)

155 
	#SIMULATE_ID
 "MSVC"

	)

157 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__˛™g_maj‹__
)

	)

158 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__˛™g_mö‹__
)

	)

159 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__˛™g_∑tchÀvñ__
)

	)

160 #i‡
deföed
(
_MSC_VER
)

162 
	#SIMULATE_VERSION_MAJOR
 
	`DEC
(
_MSC_VER
 / 100)

	)

163 
	#SIMULATE_VERSION_MINOR
 
	`DEC
(
_MSC_VER
 % 100)

	)

165 
	#COMPILER_VERSION_TWEAK
 
	`DEC
(
__≠∂e_buûd_vîsi⁄__
)

	)

167 #ñi‡
deföed
(
__˛™g__
)

168 
	#COMPILER_ID
 "Cœng"

	)

169 #i‡
deföed
(
_MSC_VER
)

170 
	#SIMULATE_ID
 "MSVC"

	)

172 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__˛™g_maj‹__
)

	)

173 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__˛™g_mö‹__
)

	)

174 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__˛™g_∑tchÀvñ__
)

	)

175 #i‡
deföed
(
_MSC_VER
)

177 
	#SIMULATE_VERSION_MAJOR
 
	`DEC
(
_MSC_VER
 / 100)

	)

178 
	#SIMULATE_VERSION_MINOR
 
	`DEC
(
_MSC_VER
 % 100)

	)

181 #ñi‡
deföed
(
__GNUC__
)

182 
	#COMPILER_ID
 "GNU"

	)

183 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__GNUC__
)

	)

184 #i‡
deföed
(
__GNUC_MINOR__
)

185 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__GNUC_MINOR__
)

	)

187 #i‡
deföed
(
__GNUC_PATCHLEVEL__
)

188 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__GNUC_PATCHLEVEL__
)

	)

191 #ñi‡
deföed
(
_MSC_VER
)

192 
	#COMPILER_ID
 "MSVC"

	)

194 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
_MSC_VER
 / 100)

	)

195 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
_MSC_VER
 % 100)

	)

196 #i‡
deföed
(
_MSC_FULL_VER
)

197 #i‡
_MSC_VER
 >= 1400

199 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
_MSC_FULL_VER
 % 100000)

	)

202 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
_MSC_FULL_VER
 % 10000)

	)

205 #i‡
deföed
(
_MSC_BUILD
)

206 
	#COMPILER_VERSION_TWEAK
 
	`DEC
(
_MSC_BUILD
)

	)

209 #ñi‡
deföed
(
__VISUALDSPVERSION__
Ë|| deföed(
__ADSPBLACKFIN__
Ë|| deföed(
__ADSPTS__
Ë|| deföed(
__ADSP21000__
)

210 
	#COMPILER_ID
 "ADSP"

	)

211 #i‡
deföed
(
__VISUALDSPVERSION__
)

213 
	#COMPILER_VERSION_MAJOR
 
	`HEX
(
__VISUALDSPVERSION__
>>24)

	)

214 
	#COMPILER_VERSION_MINOR
 
	`HEX
(
__VISUALDSPVERSION__
>>16 & 0xFF)

	)

215 
	#COMPILER_VERSION_PATCH
 
	`HEX
(
__VISUALDSPVERSION__
>>8 & 0xFF)

	)

218 #ñi‡
deföed
(
__IAR_SYSTEMS_ICC__
 ) || deföed(
__IAR_SYSTEMS_ICC
)

219 
	#COMPILER_ID
 "IAR"

	)

221 #ñi‡
deföed
(
__ARMCC_VERSION
)

222 
	#COMPILER_ID
 "ARMCC"

	)

223 #i‡
__ARMCC_VERSION
 >= 1000000

225 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__ARMCC_VERSION
/1000000)

	)

226 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__ARMCC_VERSION
/10000 % 100)

	)

227 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__ARMCC_VERSION
 % 10000)

	)

230 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__ARMCC_VERSION
/100000)

	)

231 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__ARMCC_VERSION
/10000 % 10)

	)

232 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__ARMCC_VERSION
 % 10000)

	)

236 #ñi‡
deföed
(
SDCC
)

237 
	#COMPILER_ID
 "SDCC"

	)

239 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
SDCC
/100)

	)

240 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
SDCC
/10 % 10)

	)

241 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
SDCC
 % 10)

	)

243 #ñi‡
deföed
(
_SGI_COMPILER_VERSION
Ë|| deföed(
_COMPILER_VERSION
)

244 
	#COMPILER_ID
 "MIPS¥o"

	)

245 #i‡
deföed
(
_SGI_COMPILER_VERSION
)

247 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
_SGI_COMPILER_VERSION
/100)

	)

248 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
_SGI_COMPILER_VERSION
/10 % 10)

	)

249 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
_SGI_COMPILER_VERSION
 % 10)

	)

252 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
_COMPILER_VERSION
/100)

	)

253 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
_COMPILER_VERSION
/10 % 10)

	)

254 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
_COMPILER_VERSION
 % 10)

	)

261 #ñi‡
deföed
(
__sgi
)

262 
	#COMPILER_ID
 "MIPS¥o"

	)

264 #ñi‡
deföed
(
__hpux
Ë|| deföed(
__hpua
)

265 
	#COMPILER_ID
 "HP"

	)

268 
	#COMPILER_ID
 ""

	)

275 c⁄°* 
	göfo_compûî
 = "INFO" ":" "compûî[" 
COMPILER_ID
 "]";

276 #ifde‡
SIMULATE_ID


277 c⁄°* 
	göfo_simuœã
 = "INFO" ":" "simuœã[" 
SIMULATE_ID
 "]";

280 #ifde‡
__QNXNTO__


281 c⁄°* 
	gqnx¡o
 = "INFO" ":" "qnxnto[]";

284 #i‡
deföed
(
__CRAYXE
Ë|| deföed(
__CRAYXC
)

285 c⁄° *
	göfo_¸ay
 = "INFO" ":" "compiler_wrapper[CrayPrgEnv]";

288 
	#STRINGIFY_HELPER
(
X
Ë#X

	)

289 
	#STRINGIFY
(
X
Ë
	`STRINGIFY_HELPER
(X)

	)

292 #i‡
deföed
(
__löux
Ë|| deföed(
__löux__
Ë|| deföed(
löux
)

293 
	#PLATFORM_ID
 "Löux"

	)

295 #ñi‡
deföed
(
__CYGWIN__
)

296 
	#PLATFORM_ID
 "Cygwö"

	)

298 #ñi‡
deföed
(
__MINGW32__
)

299 
	#PLATFORM_ID
 "MöGW"

	)

301 #ñi‡
deföed
(
__APPLE__
)

302 
	#PLATFORM_ID
 "D¨wö"

	)

304 #ñi‡
deföed
(
_WIN32
Ë|| deföed(
__WIN32__
Ë|| deföed(
WIN32
)

305 
	#PLATFORM_ID
 "Wödows"

	)

307 #ñi‡
deföed
(
__FªeBSD__
Ë|| deföed(
__FªeBSD
)

308 
	#PLATFORM_ID
 "FªeBSD"

	)

310 #ñi‡
deföed
(
__NëBSD__
Ë|| deföed(
__NëBSD
)

311 
	#PLATFORM_ID
 "NëBSD"

	)

313 #ñi‡
deföed
(
__O≥nBSD__
Ë|| deföed(
__OPENBSD
)

314 
	#PLATFORM_ID
 "O≥nBSD"

	)

316 #ñi‡
deföed
(
__sun
Ë|| deföed(
sun
)

317 
	#PLATFORM_ID
 "SunOS"

	)

319 #ñi‡
deföed
(
_AIX
Ë|| deföed(
__AIX
Ë|| deföed(
__AIX__
Ë|| deföed(
__aix
Ë|| deföed(
__aix__
)

320 
	#PLATFORM_ID
 "AIX"

	)

322 #ñi‡
deföed
(
__sgi
Ë|| deföed(
__sgi__
Ë|| deföed(
_SGI
)

323 
	#PLATFORM_ID
 "IRIX"

	)

325 #ñi‡
deföed
(
__hpux
Ë|| deföed(
__hpux__
)

326 
	#PLATFORM_ID
 "HP-UX"

	)

328 #ñi‡
deföed
(
__HAIKU__
)

329 
	#PLATFORM_ID
 "Haiku"

	)

331 #ñi‡
deföed
(
__BeOS
Ë|| deföed(
__BEOS__
Ë|| deföed(
_BEOS
)

332 
	#PLATFORM_ID
 "BeOS"

	)

334 #ñi‡
deföed
(
__QNX__
Ë|| deföed(
__QNXNTO__
)

335 
	#PLATFORM_ID
 "QNX"

	)

337 #ñi‡
deföed
(
__åu64
Ë|| deföed(
_åu64
Ë|| deföed(
__TRU64__
)

338 
	#PLATFORM_ID
 "Tru64"

	)

340 #ñi‡
deföed
(
__riscos
Ë|| deföed(
__riscos__
)

341 
	#PLATFORM_ID
 "RISCos"

	)

343 #ñi‡
deföed
(
__söix
Ë|| deföed(
__söix__
Ë|| deföed(
__SINIX__
)

344 
	#PLATFORM_ID
 "SINIX"

	)

346 #ñi‡
deföed
(
__UNIX_SV__
)

347 
	#PLATFORM_ID
 "UNIX_SV"

	)

349 #ñi‡
deföed
(
__bsdos__
)

350 
	#PLATFORM_ID
 "BSDOS"

	)

352 #ñi‡
deföed
(
_MPRAS
Ë|| deföed(
MPRAS
)

353 
	#PLATFORM_ID
 "MP-RAS"

	)

355 #ñi‡
deföed
(
__osf
Ë|| deföed(
__osf__
)

356 
	#PLATFORM_ID
 "OSF1"

	)

358 #ñi‡
deföed
(
_SCO_SV
Ë|| deföed(
SCO_SV
Ë|| deföed(
sco_sv
)

359 
	#PLATFORM_ID
 "SCO_SV"

	)

361 #ñi‡
deföed
(
__u…rix
Ë|| deföed(
__u…rix__
Ë|| deföed(
_ULTRIX
)

362 
	#PLATFORM_ID
 "ULTRIX"

	)

364 #ñi‡
deföed
(
__XENIX__
Ë|| deföed(
_XENIX
Ë|| deföed(
XENIX
)

365 
	#PLATFORM_ID
 "Xíix"

	)

367 #ñi‡
deföed
(
__WATCOMC__
)

368 #i‡
deföed
(
__LINUX__
)

369 
	#PLATFORM_ID
 "Löux"

	)

371 #ñi‡
deföed
(
__DOS__
)

372 
	#PLATFORM_ID
 "DOS"

	)

374 #ñi‡
deföed
(
__OS2__
)

375 
	#PLATFORM_ID
 "OS2"

	)

377 #ñi‡
deföed
(
__WINDOWS__
)

378 
	#PLATFORM_ID
 "Wödows3x"

	)

381 
	#PLATFORM_ID
 ""

	)

385 
	#PLATFORM_ID
 ""

	)

394 #i‡
deföed
(
_WIN32
Ë&& deföed(
_MSC_VER
)

395 #i‡
deföed
(
_M_IA64
)

396 
	#ARCHITECTURE_ID
 "IA64"

	)

398 #ñi‡
deföed
(
_M_X64
Ë|| deföed(
_M_AMD64
)

399 
	#ARCHITECTURE_ID
 "x64"

	)

401 #ñi‡
deföed
(
_M_IX86
)

402 
	#ARCHITECTURE_ID
 "X86"

	)

404 #ñi‡
deföed
(
_M_ARM
)

405 #i‡
_M_ARM
 == 4

406 
	#ARCHITECTURE_ID
 "ARMV4I"

	)

407 #ñi‡
_M_ARM
 == 5

408 
	#ARCHITECTURE_ID
 "ARMV5I"

	)

410 
	#ARCHITECTURE_ID
 "ARMV" 
	`STRINGIFY
(
_M_ARM
)

	)

413 #ñi‡
deföed
(
_M_MIPS
)

414 
	#ARCHITECTURE_ID
 "MIPS"

	)

416 #ñi‡
deföed
(
_M_SH
)

417 
	#ARCHITECTURE_ID
 "SHx"

	)

420 
	#ARCHITECTURE_ID
 ""

	)

423 #ñi‡
deföed
(
__WATCOMC__
)

424 #i‡
deföed
(
_M_I86
)

425 
	#ARCHITECTURE_ID
 "I86"

	)

427 #ñi‡
deföed
(
_M_IX86
)

428 
	#ARCHITECTURE_ID
 "X86"

	)

431 
	#ARCHITECTURE_ID
 ""

	)

435 
	#ARCHITECTURE_ID
 ""

	)

439 
	#DEC
(
n
) \

440 ('0' + (((
n
) / 10000000)%10)), \

441 ('0' + (((
n
) / 1000000)%10)), \

442 ('0' + (((
n
) / 100000)%10)), \

443 ('0' + (((
n
) / 10000)%10)), \

444 ('0' + (((
n
) / 1000)%10)), \

445 ('0' + (((
n
) / 100)%10)), \

446 ('0' + (((
n
) / 10)%10)), \

447 ('0' + ((
n
Ë% 10))

	)

450 
	#HEX
(
n
) \

451 ('0' + ((
n
)>>28 & 0xF)), \

452 ('0' + ((
n
)>>24 & 0xF)), \

453 ('0' + ((
n
)>>20 & 0xF)), \

454 ('0' + ((
n
)>>16 & 0xF)), \

455 ('0' + ((
n
)>>12 & 0xF)), \

456 ('0' + ((
n
)>>8 & 0xF)), \

457 ('0' + ((
n
)>>4 & 0xF)), \

458 ('0' + ((
n
Ë& 0xF))

	)

461 #ifde‡
COMPILER_VERSION_MAJOR


462 c⁄° 
	göfo_vîsi⁄
[] = {

465 
COMPILER_VERSION_MAJOR
,

466 #ifde‡
COMPILER_VERSION_MINOR


467 '.', 
COMPILER_VERSION_MINOR
,

468 #ifde‡
COMPILER_VERSION_PATCH


469 '.', 
COMPILER_VERSION_PATCH
,

470 #ifde‡
COMPILER_VERSION_TWEAK


471 '.', 
COMPILER_VERSION_TWEAK
,

479 #ifde‡
SIMULATE_VERSION_MAJOR


480 c⁄° 
	göfo_simuœã_vîsi⁄
[] = {

483 
SIMULATE_VERSION_MAJOR
,

484 #ifde‡
SIMULATE_VERSION_MINOR


485 '.', 
SIMULATE_VERSION_MINOR
,

486 #ifde‡
SIMULATE_VERSION_PATCH


487 '.', 
SIMULATE_VERSION_PATCH
,

488 #ifde‡
SIMULATE_VERSION_TWEAK


489 '.', 
SIMULATE_VERSION_TWEAK
,

500 c⁄°* 
	göfo_∂©f‹m
 = "INFO" ":" "∂©f‹m[" 
PLATFORM_ID
 "]";

501 c⁄°* 
	göfo_¨ch
 = "INFO" ":" "¨ch[" 
ARCHITECTURE_ID
 "]";

506 c⁄° * 
	göfo_œnguage_düÀ˘_deÁu…
 = "INFO" ":" "dialect_default["

507 #i‡!
deföed
(
__STDC_VERSION__
)

509 #ñi‡
__STDC_VERSION__
 >= 201000L

511 #ñi‡
__STDC_VERSION__
 >= 199901L

519 #ifde‡
ID_VOID_MAIN


520 
	$maö
(Ë{
	}
}

522 
	$maö
(
¨gc
, * 
¨gv
[])

524 
ªquúe
 = 0;

525 
ªquúe
 +
öfo_compûî
[
¨gc
];

526 
ªquúe
 +
öfo_∂©f‹m
[
¨gc
];

527 
ªquúe
 +
öfo_¨ch
[
¨gc
];

528 #ifde‡
COMPILER_VERSION_MAJOR


529 
ªquúe
 +
öfo_vîsi⁄
[
¨gc
];

531 #ifde‡
SIMULATE_ID


532 
ªquúe
 +
öfo_simuœã
[
¨gc
];

534 #ifde‡
SIMULATE_VERSION_MAJOR


535 
ªquúe
 +
öfo_simuœã_vîsi⁄
[
¨gc
];

537 #i‡
	`deföed
(
__CRAYXE
Ë|| deföed(
__CRAYXC
)

538 
ªquúe
 +
öfo_¸ay
[
¨gc
];

540 
ªquúe
 +
öfo_œnguage_düÀ˘_deÁu…
[
¨gc
];

541 ()
¨gv
;

542  
ªquúe
;

543 
	}
}

	@/var/www/html/debian/gateway/build/kaa/kaa_keys/CMakeFiles/feature_tests.c

2 c⁄° 
	g„©uªs
[] = {"\n"

4 #i‡(
__GNUC__
 * 100 + 
__GNUC_MINOR__
) >= 404

11 #i‡(
__GNUC__
 * 100 + 
__GNUC_MINOR__
Ë>404 && 
deföed
(
__STDC_VERSION__
) && __STDC_VERSION__ >= 199901L

18 #i‡(
__GNUC__
 * 100 + 
__GNUC_MINOR__
Ë>406 && 
deföed
(
__STDC_VERSION__
) && __STDC_VERSION__ >= 201000L

25 #i‡(
__GNUC__
 * 100 + 
__GNUC_MINOR__
Ë>404 && 
deföed
(
__STDC_VERSION__
) && __STDC_VERSION__ >= 199901L

34 
	$maö
(
¨gc
, ** 
¨gv
Ë{ (Ôrgv;  
„©uªs
[¨gc]; 
	}
}

	@/var/www/html/debian/gateway/build/kaa/kaa_keys/kaa_keys_gen.h

1 #i‚de‡
KAA_RSA_KEYS_H_


2 
	#KAA_RSA_KEYS_H_


	)

5 
	#KAA_RSA_PUBLIC_KEY_LENGTH
 294

	)

6 
	#KAA_RSA_PRIVATE_KEY_LENGTH
 1192

	)

9 
uöt8_t
 
	gKAA_RSA_PUBLIC_KEY
[] = { 0x30, 0x82, 0x01, 0x22, 0x30, 0x0D, 0x06, 0x09, 0x2A, 0x86, 0x48, 0x86, 0xF7, 0x0D, 0x01, 0x01, 0x01, 0x05, 0x00, 0x03, 0x82, 0x01, 0x0F, 0x00, 0x30, 0x82, 0x01, 0x0A, 0x02, 0x82, 0x01, 0x01, 0x00, 0x80, 0xFF, 0x5B, 0x7D, 0xA5, 0x42, 0x01, 0x09, 0x52, 0x31, 0xB1, 0xAF, 0xAB, 0x5C, 0x23, 0xEC, 0xF8, 0xFB, 0x06, 0xC8, 0x86, 0x8D, 0x51, 0xC5, 0x8F, 0x5D, 0x6E, 0x62, 0x5F, 0x66, 0x2E, 0x2C, 0x04, 0x1B, 0x83, 0x89, 0x0E, 0x48, 0xC4, 0x9F, 0x0C, 0xEB, 0xAE, 0xA2, 0xDA, 0xB0, 0x25, 0x1D, 0x18, 0x64, 0xCF, 0x76, 0x99, 0x44, 0x5D, 0xCA, 0xA1, 0x8E, 0x23, 0xD3, 0xBD, 0xE5, 0x35, 0x1F, 0xA8, 0x5F, 0x3F, 0xE1, 0xC3, 0x1D, 0xB2, 0x74, 0xED, 0x31, 0xED, 0x58, 0x26, 0x53, 0xF3, 0x63, 0x84, 0xED, 0x42, 0x55, 0x43, 0xAA, 0x27, 0x72, 0x76, 0x38, 0xBA, 0x0B, 0x74, 0x71, 0x6E, 0x26, 0x8A, 0x4E, 0x60, 0x00, 0xD1, 0xBC, 0xDB, 0x4B, 0xD4, 0xD0, 0xD6, 0x2A, 0x65, 0x23, 0x88, 0xB6, 0x68, 0x84, 0x21, 0xB9, 0x9F, 0xB4, 0x03, 0x17, 0xC4, 0x16, 0xDC, 0xF0, 0x68, 0x92, 0x78, 0xD3, 0x04, 0x77, 0xD4, 0xB9, 0x7E, 0x01, 0x2F, 0x24, 0x10, 0x5C, 0x84, 0x96, 0x0E, 0xEB, 0x74, 0x6D, 0x14, 0xFA, 0x98, 0x7F, 0xB4, 0x96, 0x89, 0xEC, 0x82, 0xD7, 0xC8, 0x9A, 0x4E, 0xDF, 0x80, 0xDE, 0x8B, 0xC3, 0xD3, 0x64, 0x6B, 0x0D, 0x7A, 0xE2, 0x73, 0x81, 0xCD, 0x7C, 0x40, 0x10, 0xB6, 0x46, 0xEC, 0xAC, 0x6A, 0xA5, 0x3D, 0x9D, 0x40, 0xDE, 0xBD, 0x01, 0x3D, 0x4C, 0x6C, 0x65, 0x5A, 0x61, 0x0A, 0xCB, 0xDB, 0x29, 0x8F, 0x39, 0x08, 0xB3, 0x82, 0x45, 0xF8, 0x99, 0x98, 0x7F, 0xE0, 0xE0, 0x50, 0x9B, 0xB1, 0xFA, 0x75, 0x13, 0xE4, 0xE5, 0xAE, 0xA9, 0xD3, 0x09, 0x79, 0xF0, 0x75, 0x18, 0xE5, 0xB6, 0x25, 0xF1, 0x74, 0x0A, 0xB8, 0x05, 0x89, 0x1F, 0x0C, 0x7A, 0x80, 0x34, 0x87, 0x1F, 0xD2, 0x5F, 0xDD, 0xAE, 0xD2, 0xE0, 0x46, 0x14, 0x80, 0xD7, 0x73, 0x3C, 0x71, 0x91, 0xFD, 0xFF, 0x02, 0x03, 0x01, 0x00, 0x01, };

11 
uöt8_t
 
	gKAA_RSA_PRIVATE_KEY
[] = { 0x30, 0x82, 0x04, 0xA4, 0x02, 0x01, 0x00, 0x02, 0x82, 0x01, 0x01, 0x00, 0x80, 0xFF, 0x5B, 0x7D, 0xA5, 0x42, 0x01, 0x09, 0x52, 0x31, 0xB1, 0xAF, 0xAB, 0x5C, 0x23, 0xEC, 0xF8, 0xFB, 0x06, 0xC8, 0x86, 0x8D, 0x51, 0xC5, 0x8F, 0x5D, 0x6E, 0x62, 0x5F, 0x66, 0x2E, 0x2C, 0x04, 0x1B, 0x83, 0x89, 0x0E, 0x48, 0xC4, 0x9F, 0x0C, 0xEB, 0xAE, 0xA2, 0xDA, 0xB0, 0x25, 0x1D, 0x18, 0x64, 0xCF, 0x76, 0x99, 0x44, 0x5D, 0xCA, 0xA1, 0x8E, 0x23, 0xD3, 0xBD, 0xE5, 0x35, 0x1F, 0xA8, 0x5F, 0x3F, 0xE1, 0xC3, 0x1D, 0xB2, 0x74, 0xED, 0x31, 0xED, 0x58, 0x26, 0x53, 0xF3, 0x63, 0x84, 0xED, 0x42, 0x55, 0x43, 0xAA, 0x27, 0x72, 0x76, 0x38, 0xBA, 0x0B, 0x74, 0x71, 0x6E, 0x26, 0x8A, 0x4E, 0x60, 0x00, 0xD1, 0xBC, 0xDB, 0x4B, 0xD4, 0xD0, 0xD6, 0x2A, 0x65, 0x23, 0x88, 0xB6, 0x68, 0x84, 0x21, 0xB9, 0x9F, 0xB4, 0x03, 0x17, 0xC4, 0x16, 0xDC, 0xF0, 0x68, 0x92, 0x78, 0xD3, 0x04, 0x77, 0xD4, 0xB9, 0x7E, 0x01, 0x2F, 0x24, 0x10, 0x5C, 0x84, 0x96, 0x0E, 0xEB, 0x74, 0x6D, 0x14, 0xFA, 0x98, 0x7F, 0xB4, 0x96, 0x89, 0xEC, 0x82, 0xD7, 0xC8, 0x9A, 0x4E, 0xDF, 0x80, 0xDE, 0x8B, 0xC3, 0xD3, 0x64, 0x6B, 0x0D, 0x7A, 0xE2, 0x73, 0x81, 0xCD, 0x7C, 0x40, 0x10, 0xB6, 0x46, 0xEC, 0xAC, 0x6A, 0xA5, 0x3D, 0x9D, 0x40, 0xDE, 0xBD, 0x01, 0x3D, 0x4C, 0x6C, 0x65, 0x5A, 0x61, 0x0A, 0xCB, 0xDB, 0x29, 0x8F, 0x39, 0x08, 0xB3, 0x82, 0x45, 0xF8, 0x99, 0x98, 0x7F, 0xE0, 0xE0, 0x50, 0x9B, 0xB1, 0xFA, 0x75, 0x13, 0xE4, 0xE5, 0xAE, 0xA9, 0xD3, 0x09, 0x79, 0xF0, 0x75, 0x18, 0xE5, 0xB6, 0x25, 0xF1, 0x74, 0x0A, 0xB8, 0x05, 0x89, 0x1F, 0x0C, 0x7A, 0x80, 0x34, 0x87, 0x1F, 0xD2, 0x5F, 0xDD, 0xAE, 0xD2, 0xE0, 0x46, 0x14, 0x80, 0xD7, 0x73, 0x3C, 0x71, 0x91, 0xFD, 0xFF, 0x02, 0x03, 0x01, 0x00, 0x01, 0x02, 0x82, 0x01, 0x00, 0x4A, 0xF2, 0x11, 0x79, 0xC2, 0x55, 0xC2, 0xBC, 0x63, 0xA0, 0xB3, 0x97, 0x58, 0x7B, 0xC3, 0xF3, 0x9E, 0x04, 0x5A, 0x40, 0x8E, 0xCB, 0xF4, 0x42, 0x4F, 0xB4, 0xFC, 0xB8, 0xF2, 0xAC, 0x2F, 0x0F, 0x2B, 0xA3, 0xC0, 0x9C, 0x14, 0x4C, 0x7A, 0xCF, 0xDD, 0x75, 0xE0, 0x94, 0x85, 0x71, 0xE9, 0x5E, 0x2A, 0x1A, 0x07, 0xDE, 0xE3, 0xD5, 0x30, 0x98, 0xD5, 0x9B, 0xFB, 0x7C, 0xBD, 0xCB, 0x39, 0x3E, 0x17, 0x58, 0x9F, 0x88, 0xCF, 0x0F, 0xA5, 0xEB, 0x01, 0x14, 0x0C, 0xCD, 0x36, 0x17, 0x78, 0x44, 0xCD, 0xA9, 0xFA, 0xEC, 0x06, 0xD0, 0x08, 0xF3, 0x1B, 0x74, 0x81, 0xC2, 0xBD, 0xF8, 0x59, 0x02, 0xD3, 0x40, 0x0D, 0xCE, 0xEC, 0x0C, 0x49, 0x6C, 0x99, 0x4C, 0x6B, 0xE1, 0x5D, 0xB9, 0x73, 0x68, 0x66, 0xF8, 0xBD, 0x8F, 0x57, 0x16, 0x02, 0xE5, 0xFF, 0xEB, 0x38, 0x9A, 0x04, 0x67, 0x75, 0x02, 0x67, 0xBA, 0x83, 0x8A, 0xCE, 0x6C, 0xB4, 0xDC, 0xAD, 0x8C, 0x14, 0xAC, 0x2B, 0xB2, 0xAA, 0xDF, 0x9E, 0x01, 0x15, 0xF4, 0x39, 0xD6, 0x7A, 0x45, 0xFA, 0xC4, 0x1C, 0xB7, 0xB3, 0x40, 0x7B, 0x77, 0x02, 0xFA, 0x0D, 0x9D, 0x77, 0xCD, 0xF5, 0x89, 0x9F, 0x5F, 0x44, 0xEF, 0xDC, 0x69, 0xA3, 0xF9, 0x85, 0x4D, 0xED, 0x29, 0xAF, 0x51, 0x6E, 0xDC, 0x3F, 0x86, 0x41, 0x8E, 0xD4, 0x33, 0x7B, 0xE5, 0x72, 0x22, 0x87, 0xD7, 0x92, 0x49, 0xFD, 0xEC, 0x78, 0xCC, 0xC1, 0x89, 0x0B, 0xA2, 0xD3, 0x73, 0xDB, 0xA2, 0x24, 0xB4, 0x99, 0x74, 0xCF, 0x67, 0x3A, 0x18, 0x39, 0xD7, 0x96, 0x7F, 0x00, 0x4F, 0xA5, 0x21, 0x83, 0xD2, 0xD8, 0xC0, 0x41, 0x4E, 0x56, 0x55, 0xB8, 0x55, 0x99, 0xDD, 0x45, 0x7E, 0x62, 0x04, 0x9D, 0x05, 0x5E, 0x5E, 0x9F, 0x68, 0x79, 0xC3, 0x62, 0xAD, 0xC8, 0x3B, 0x60, 0x41, 0x02, 0x81, 0x81, 0x00, 0xF5, 0x98, 0x52, 0xA1, 0x69, 0x6C, 0xB2, 0xB7, 0x5C, 0x41, 0x11, 0xEF, 0x22, 0x63, 0x5B, 0xBB, 0x4C, 0xB2, 0x70, 0xEC, 0x11, 0x89, 0xA4, 0x14, 0xCF, 0x41, 0x80, 0xA0, 0xF4, 0xB8, 0x03, 0x06, 0x2C, 0x4A, 0x9C, 0xCE, 0xB2, 0xAB, 0x35, 0x15, 0xE6, 0x53, 0xDD, 0x34, 0xBC, 0x20, 0x44, 0x9E, 0xB9, 0xD0, 0xD6, 0x17, 0xDE, 0x03, 0x9F, 0x16, 0xE6, 0xF7, 0x1D, 0x87, 0x78, 0xD9, 0xAF, 0x18, 0xCB, 0xAC, 0x9E, 0xBE, 0x45, 0xD8, 0x8F, 0x03, 0x3D, 0x93, 0x74, 0xE4, 0x68, 0x64, 0x6B, 0x41, 0x9C, 0x41, 0x0D, 0xED, 0x54, 0x6E, 0xCF, 0xAE, 0x85, 0xEC, 0x84, 0x8E, 0x61, 0x40, 0xC8, 0xBE, 0xAF, 0x78, 0xD1, 0xFB, 0x36, 0x7B, 0xC7, 0xDD, 0xBB, 0x19, 0x07, 0xAA, 0x73, 0x20, 0x27, 0x51, 0x1D, 0x4E, 0xB3, 0xE3, 0x7A, 0x48, 0xD6, 0x38, 0x90, 0x55, 0x8B, 0xEB, 0x0A, 0x2A, 0xDF, 0xA9, 0x02, 0x81, 0x81, 0x00, 0x86, 0x76, 0x70, 0x9A, 0xB7, 0x57, 0xDF, 0x69, 0x1C, 0x49, 0xB0, 0x9C, 0xF8, 0x88, 0xB2, 0x9E, 0x32, 0xAB, 0x0A, 0xE6, 0x3A, 0x7F, 0x31, 0xDE, 0x1F, 0x41, 0x3F, 0x43, 0x03, 0x8E, 0x42, 0xB5, 0xA9, 0xEF, 0x45, 0xA6, 0x02, 0x1A, 0x60, 0x88, 0xB8, 0x41, 0xC8, 0xB2, 0xA6, 0x7C, 0xC5, 0xA6, 0xBC, 0xE1, 0x1A, 0x90, 0xC9, 0x22, 0xEF, 0x99, 0x6D, 0xBA, 0xBA, 0x1A, 0xB4, 0x01, 0xE4, 0x81, 0x68, 0x9E, 0x74, 0xCD, 0x00, 0xEA, 0x3F, 0xEE, 0x74, 0x73, 0xBA, 0xAA, 0x87, 0xBA, 0x37, 0xE8, 0x73, 0xEE, 0x34, 0x20, 0xEE, 0xFD, 0x65, 0x47, 0x04, 0x2A, 0xFA, 0xA0, 0xBE, 0xC3, 0x79, 0x96, 0x1E, 0xFE, 0xE6, 0xCC, 0x63, 0xE3, 0x43, 0x36, 0x5B, 0x4B, 0x8C, 0x33, 0x15, 0xDA, 0xBE, 0xE0, 0xEA, 0xE3, 0x4A, 0x0D, 0xA4, 0x90, 0xE3, 0xCD, 0xAD, 0x91, 0xFB, 0xA4, 0x45, 0x36, 0x99, 0x67, 0x02, 0x81, 0x81, 0x00, 0xA1, 0x3B, 0xA4, 0x1B, 0xC5, 0xCB, 0x8F, 0xB4, 0xA3, 0x03, 0x31, 0x13, 0xEE, 0x5E, 0x8E, 0x6D, 0x73, 0x57, 0xBE, 0x9C, 0xAC, 0x92, 0xD1, 0x3E, 0xBC, 0x26, 0x03, 0x9D, 0x27, 0xAB, 0xDA, 0x88, 0x65, 0xF1, 0x81, 0xEA, 0x8D, 0x0F, 0xAB, 0x25, 0x3A, 0x76, 0x1A, 0x46, 0x31, 0xAF, 0x79, 0x7D, 0x3E, 0xFE, 0x24, 0x5F, 0xBC, 0xE8, 0x61, 0xBC, 0x36, 0x5B, 0x4B, 0x6E, 0x91, 0xDF, 0x4F, 0x7D, 0x96, 0xD1, 0x37, 0xD2, 0x30, 0xA6, 0x90, 0x95, 0x0F, 0x0A, 0xCC, 0x75, 0xDB, 0x36, 0xF9, 0xD7, 0x34, 0x0E, 0xDD, 0x66, 0xCE, 0xC4, 0x84, 0xE1, 0xCD, 0x98, 0x4E, 0x19, 0xEF, 0x2D, 0x09, 0xDD, 0x6D, 0xF3, 0x82, 0xDF, 0x4A, 0x90, 0x8E, 0xD1, 0x39, 0xB0, 0xA0, 0x00, 0xBD, 0xDE, 0x01, 0x11, 0xD6, 0x8C, 0xC1, 0xBA, 0x78, 0xA0, 0x72, 0xCA, 0xE5, 0xAE, 0xD3, 0xD1, 0xB5, 0x76, 0x1A, 0x29, 0x02, 0x81, 0x80, 0x6F, 0x2B, 0xF3, 0xD3, 0xE7, 0x6C, 0x8E, 0xB9, 0x8F, 0xFA, 0xD9, 0x3C, 0x1F, 0x3C, 0x9E, 0x39, 0xAF, 0xF8, 0xBC, 0xED, 0x37, 0x46, 0x3C, 0xCB, 0xC2, 0x99, 0xA6, 0x9D, 0x58, 0x8E, 0x41, 0x57, 0x83, 0xA5, 0xE1, 0xB6, 0xEC, 0x9C, 0x34, 0x5E, 0x35, 0xC1, 0xA6, 0x17, 0x17, 0x11, 0xA8, 0x35, 0x40, 0x8A, 0xF8, 0xF4, 0xE6, 0x67, 0xAD, 0x23, 0xF4, 0x96, 0x63, 0x12, 0x7A, 0xEB, 0xE9, 0xAA, 0x98, 0xFE, 0x11, 0xE2, 0x01, 0x34, 0xAC, 0x21, 0x12, 0x45, 0x30, 0xFB, 0x97, 0x76, 0x7E, 0x8D, 0x01, 0x74, 0xDB, 0xC2, 0xB2, 0xF5, 0xEC, 0xCB, 0x77, 0x85, 0xB5, 0x6C, 0x3B, 0xEC, 0xD0, 0x55, 0x2F, 0x51, 0x5F, 0x2F, 0x74, 0x12, 0xCD, 0x5A, 0x5E, 0xC7, 0x2A, 0xA6, 0x7E, 0x16, 0x3A, 0xA5, 0x29, 0x6F, 0x3C, 0xA5, 0xE4, 0xFF, 0x2A, 0x69, 0xBE, 0x6D, 0x29, 0x5A, 0x5B, 0x23, 0x56, 0x57, 0x02, 0x81, 0x81, 0x00, 0x8E, 0x5D, 0x9A, 0x73, 0x0B, 0xED, 0x86, 0x58, 0x77, 0x75, 0x83, 0xE8, 0xFE, 0x17, 0x48, 0xBE, 0x65, 0x14, 0xC9, 0xB6, 0x11, 0xA3, 0xAE, 0xC8, 0x69, 0xCB, 0x9E, 0x2C, 0xAF, 0x6E, 0xCB, 0x53, 0x2D, 0x67, 0xE9, 0x78, 0x60, 0x7D, 0x49, 0x49, 0x15, 0x1B, 0xBB, 0x9D, 0x4C, 0xBA, 0x1F, 0xFA, 0xCA, 0x7E, 0x18, 0x2C, 0xB7, 0x81, 0x9E, 0xEA, 0xD0, 0x73, 0x9C, 0x43, 0x28, 0xFF, 0x8B, 0x3F, 0x45, 0x03, 0xE2, 0x1D, 0x09, 0x65, 0xD6, 0x6D, 0x20, 0xD3, 0x29, 0xDF, 0x88, 0x5A, 0x23, 0xB8, 0xD4, 0xDE, 0x97, 0xCD, 0x40, 0x71, 0xD5, 0x78, 0xC9, 0xD0, 0x5C, 0x51, 0x3E, 0x28, 0x53, 0xE1, 0x1B, 0x7C, 0xE3, 0x58, 0xE2, 0x46, 0x07, 0x12, 0x37, 0x27, 0xC7, 0x18, 0x54, 0xE2, 0x16, 0xC5, 0xB2, 0x59, 0x01, 0x00, 0x8C, 0xCD, 0x8A, 0x50, 0x5E, 0xA1, 0xF5, 0xEE, 0x47, 0x4F, 0xED, 0x9C, };

13 
	#KAA_SHA1_PUB_LEN
 20

	)

14 
	#KAA_SHA1_PUB_BASE64_LEN
 28

	)

17 
uöt8_t
 
	gKAA_SHA1_PUB
[] = { 0x46, 0xF2, 0xE1, 0x18, 0xC3, 0x31, 0xD3, 0x47, 0x49, 0x0E, 0x14, 0xFD, 0xAD, 0x06, 0x3D, 0xC7, 0x1D, 0x46, 0xB0, 0x18, };

19 
uöt8_t
 
	gKAA_SHA1_PUB_BASE64
[] = { 0x52, 0x76, 0x4C, 0x68, 0x47, 0x4D, 0x4D, 0x78, 0x30, 0x30, 0x64, 0x4A, 0x44, 0x68, 0x54, 0x39, 0x72, 0x51, 0x59, 0x39, 0x78, 0x78, 0x31, 0x47, 0x73, 0x42, 0x67, 0x3D, };

	@/var/www/html/debian/gateway/include/MQTTAsync.h

88 #i‡!
deföed
(
MQTTASYNC_H
)

89 
	#MQTTASYNC_H


	)

91 #i‡
deföed
(
__˝lu•lus
)

95 #i‡
deföed
(
WIN32
Ë|| deföed(
WIN64
)

96 
	#DLLImp‹t
 
	`__de˛•ec
(
dŒimp‹t
)

	)

97 
	#DLLExp‹t
 
	`__de˛•ec
(
dŒexp‹t
)

	)

99 
	#DLLImp‹t
 

	)

100 
	#DLLExp‹t
 
	`__©åibuã__
 ((
	`visibûôy
 ("deÁu…")))

	)

103 
	~<°dio.h
>

108 
	~"MQTTPr›îtõs.h
"

109 
	~"MQTTRós⁄Codes.h
"

110 
	~"MQTTSubs¸ibeO±s.h
"

111 #i‡!
deföed
(
NO_PERSISTENCE
)

112 
	~"MQTTClõ¡Pîsi°í˚.h
"

119 
	#MQTTASYNC_SUCCESS
 0

	)

124 
	#MQTTASYNC_FAILURE
 -1

	)

128 
	#MQTTASYNC_PERSISTENCE_ERROR
 -2

	)

133 
	#MQTTASYNC_DISCONNECTED
 -3

	)

138 
	#MQTTASYNC_MAX_MESSAGES_INFLIGHT
 -4

	)

142 
	#MQTTASYNC_BAD_UTF8_STRING
 -5

	)

146 
	#MQTTASYNC_NULL_PARAMETER
 -6

	)

152 
	#MQTTASYNC_TOPICNAME_TRUNCATED
 -7

	)

157 
	#MQTTASYNC_BAD_STRUCTURE
 -8

	)

161 
	#MQTTASYNC_BAD_QOS
 -9

	)

165 
	#MQTTASYNC_NO_MORE_MSGIDS
 -10

	)

169 
	#MQTTASYNC_OPERATION_INCOMPLETE
 -11

	)

173 
	#MQTTASYNC_MAX_BUFFERED_MESSAGES
 -12

	)

177 
	#MQTTASYNC_SSL_NOT_SUPPORTED
 -13

	)

183 
	#MQTTASYNC_BAD_PROTOCOL
 -14

	)

187 
	#MQTTASYNC_BAD_MQTT_OPTION
 -15

	)

191 
	#MQTTASYNC_WRONG_MQTT_VERSION
 -16

	)

197 
	#MQTTVERSION_DEFAULT
 0

	)

201 
	#MQTTVERSION_3_1
 3

	)

205 
	#MQTTVERSION_3_1_1
 4

	)

209 
	#MQTTVERSION_5
 5

	)

213 
	#MQTT_BAD_SUBSCRIBE
 0x80

	)

222 
°ru˘_id
[4];

224 
°ru˘_vîsi⁄
;

226 
do_›ís¶_öô
;

227 } 
	tMQTTAsync_öô_›ti⁄s
;

229 
	#MQTTAsync_öô_›ti⁄s_öôülizî
 { {'M', 'Q', 'T', 'G'}, 0, 0 }

	)

235 
DLLExp‹t
 
MQTTAsync_globÆ_öô
(
MQTTAsync_öô_›ti⁄s
* 
öôs
);

241 * 
	tMQTTAsync
;

251 
	tMQTTAsync_tokí
;

262 
°ru˘_id
[4];

265 
°ru˘_vîsi⁄
;

267 
∑ylﬂdÀn
;

269 * 
∑ylﬂd
;

283 
qos
;

302 
ªèöed
;

309 
dup
;

313 
msgid
;

317 
MQTTPr›îtõs
 
¥›îtõs
;

318 } 
	tMQTTAsync_mesßge
;

320 
	#MQTTAsync_mesßge_öôülizî
 { {'M', 'Q', 'T', 'M'}, 1, 0, 
NULL
, 0, 0, 0, 0, 
MQTTPr›îtõs_öôülizî
 }

	)

351 
	tMQTTAsync_mesßgeAºived
(* 
	tc⁄ãxt
, * 
	tt›icName
, 
	tt›icLí
, 
	tMQTTAsync_mesßge
* 
	tmesßge
);

374 
	tMQTTAsync_dñivîyCom∂ëe
(* 
	tc⁄ãxt
, 
	tMQTTAsync_tokí
 
	ttokí
);

394 
	tMQTTAsync_c⁄√˘i⁄Lo°
(* 
	tc⁄ãxt
, * 
	tˇu£
);

412 
	tMQTTAsync_c⁄√˘ed
(* 
	tc⁄ãxt
, * 
	tˇu£
);

426 
	tMQTTAsync_disc⁄√˘ed
(* 
	tc⁄ãxt
, 
	tMQTTPr›îtõs
* 
	t¥›îtõs
,

427 
	tMQTTRós⁄Codes
 
	tªas⁄Code
);

444 
DLLExp‹t
 
MQTTAsync_£tDisc⁄√˘ed
(
MQTTAsync
 
h™dÀ
, * 
c⁄ãxt
, 
MQTTAsync_disc⁄√˘ed
* 
co
);

451 
MQTTAsync_tokí
 
tokí
;

453 
code
;

455 c⁄° *
mesßge
;

456 } 
	tMQTTAsync_ÁûuªD©a
;

463 
°ru˘_id
[4];

465 
°ru˘_vîsi⁄
;

467 
MQTTAsync_tokí
 
tokí
;

469 
MQTTRós⁄Codes
 
ªas⁄Code
;

471 
MQTTPr›îtõs
 
¥›îtõs
;

473 
code
;

475 c⁄° *
mesßge
;

477 
∑ckë_ty≥
;

478 } 
	tMQTTAsync_ÁûuªD©a5
;

480 
	#MQTTAsync_ÁûuªD©a5_öôülizî
 {{'M', 'Q', 'F', 'D'}, 0, 0, 
MQTTREASONCODE_SUCCESS
, 
MQTTPr›îtõs_öôülizî
, 0, 
NULL
}

	)

486 
MQTTAsync_tokí
 
tokí
;

491 
qos
;

493 * 
qosLi°
;

497 
MQTTAsync_mesßge
 
mesßge
;

498 * 
de°ö©i⁄Name
;

499 } 
pub
;

503 * 
£rvîURI
;

504 
MQTTVîsi⁄
;

505 
£ssi⁄Pª£¡
;

506 } 
c⁄√˘
;

507 } 
Æt
;

508 } 
	tMQTTAsync_suc˚ssD©a
;

514 
°ru˘_id
[4];

515 
°ru˘_vîsi⁄
;

517 
MQTTAsync_tokí
 
tokí
;

518 
MQTTRós⁄Codes
 
ªas⁄Code
;

519 
MQTTPr›îtõs
 
¥›îtõs
;

526 
ªas⁄CodeCou¡
;

527 
MQTTRós⁄Codes
* 
ªas⁄Codes
;

528 } 
sub
;

532 
MQTTAsync_mesßge
 
mesßge
;

533 * 
de°ö©i⁄Name
;

534 } 
pub
;

538 * 
£rvîURI
;

539 
MQTTVîsi⁄
;

540 
£ssi⁄Pª£¡
;

541 } 
c⁄√˘
;

545 
ªas⁄CodeCou¡
;

546 
MQTTRós⁄Codes
* 
ªas⁄Codes
;

547 } 
unsub
;

548 } 
Æt
;

549 } 
	tMQTTAsync_suc˚ssD©a5
;

551 
	#MQTTAsync_suc˚ssD©a5_öôülizî
 {{'M', 'Q', 'S', 'D'}, 0, 0, 
MQTTREASONCODE_SUCCESS
, 
MQTTPr›îtõs_öôülizî
}

	)

566 
	tMQTTAsync_⁄Suc˚ss
(* 
	tc⁄ãxt
, 
	tMQTTAsync_suc˚ssD©a
* 
	tª•⁄£
);

582 
	tMQTTAsync_⁄Suc˚ss5
(* 
	tc⁄ãxt
, 
	tMQTTAsync_suc˚ssD©a5
* 
	tª•⁄£
);

597 
	tMQTTAsync_⁄Faûuª
(* 
	tc⁄ãxt
, 
	tMQTTAsync_ÁûuªD©a
* 
	tª•⁄£
);

612 
	tMQTTAsync_⁄Faûuª5
(* 
	tc⁄ãxt
, 
	tMQTTAsync_ÁûuªD©a5
* 
	tª•⁄£
);

614 
	sMQTTAsync_ª•⁄£O±i⁄s


617 
°ru˘_id
[4];

620 
°ru˘_vîsi⁄
;

626 
MQTTAsync_⁄Suc˚ss
* 
⁄Suc˚ss
;

632 
MQTTAsync_⁄Faûuª
* 
⁄Faûuª
;

638 * 
c⁄ãxt
;

644 
MQTTAsync_tokí
 
tokí
;

650 
MQTTAsync_⁄Suc˚ss5
* 
⁄Suc˚ss5
;

656 
MQTTAsync_⁄Faûuª5
* 
⁄Faûuª5
;

660 
MQTTPr›îtõs
 
¥›îtõs
;

664 
MQTTSubs¸ibe_›ti⁄s
 
subs¸ibeO±i⁄s
;

669 
subs¸ibeO±i⁄sCou¡
;

673 
MQTTSubs¸ibe_›ti⁄s
* 
subs¸ibeO±i⁄sLi°
;

674 } 
	tMQTTAsync_ª•⁄£O±i⁄s
;

676 
	#MQTTAsync_ª•⁄£O±i⁄s_öôülizî
 { {'M', 'Q', 'T', 'R'}, 1, 
NULL
, NULL, 0, 0, NULL, NULL, 
MQTTPr›îtõs_öôülizî
, 
MQTTSubs¸ibe_›ti⁄s_öôülizî
, 0, NULL}

	)

678 
MQTTAsync_ª•⁄£O±i⁄s
 
	tMQTTAsync_ˇŒO±i⁄s
;

679 
	#MQTTAsync_ˇŒO±i⁄s_öôülizî
 
MQTTAsync_ª•⁄£O±i⁄s_öôülizî


	)

709 
DLLExp‹t
 
MQTTAsync_£tCÆlbacks
(
MQTTAsync
 
h™dÀ
, * 
c⁄ãxt
, 
MQTTAsync_c⁄√˘i⁄Lo°
* 
˛
,

710 
MQTTAsync_mesßgeAºived
* 
ma
, 
MQTTAsync_dñivîyCom∂ëe
* 
dc
);

732 
DLLExp‹t
 
MQTTAsync_£tC⁄√˘i⁄Lo°CÆlback
(
MQTTAsync
 
h™dÀ
, * 
c⁄ãxt
,

733 
MQTTAsync_c⁄√˘i⁄Lo°
* 
˛
);

756 
DLLExp‹t
 
MQTTAsync_£tMesßgeAºivedCÆlback
(
MQTTAsync
 
h™dÀ
, * 
c⁄ãxt
,

757 
MQTTAsync_mesßgeAºived
* 
ma
);

778 
DLLExp‹t
 
MQTTAsync_£tDñivîyCom∂ëeCÆlback
(
MQTTAsync
 
h™dÀ
, * 
c⁄ãxt
,

779 
MQTTAsync_dñivîyCom∂ëe
* 
dc
);

793 
DLLExp‹t
 
MQTTAsync_£tC⁄√˘ed
(
MQTTAsync
 
h™dÀ
, * 
c⁄ãxt
, 
MQTTAsync_c⁄√˘ed
* 
co
);

804 
DLLExp‹t
 
MQTTAsync_ªc⁄√˘
(
MQTTAsync
 
h™dÀ
);

848 
DLLExp‹t
 
MQTTAsync_¸óã
(
MQTTAsync
* 
h™dÀ
, c⁄° * 
£rvîURI
, c⁄° * 
˛õ¡Id
,

849 
≥rsi°í˚_ty≥
, * 
≥rsi°í˚_c⁄ãxt
);

854 
°ru˘_id
[4];

858 
°ru˘_vîsi⁄
;

860 
£ndWhûeDisc⁄√˘ed
;

862 
maxBuf„ªdMesßges
;

868 
MQTTVîsi⁄
;

869 } 
	tMQTTAsync_¸óãO±i⁄s
;

871 
	#MQTTAsync_¸óãO±i⁄s_öôülizî
 { {'M', 'Q', 'C', 'O'}, 1, 0, 100, 
MQTTVERSION_DEFAULT
 }

	)

873 
	#MQTTAsync_¸óãO±i⁄s_öôülizî5
 { {'M', 'Q', 'C', 'O'}, 1, 0, 100, 
MQTTVERSION_5
 }

	)

876 
DLLExp‹t
 
MQTTAsync_¸óãWôhO±i⁄s
(
MQTTAsync
* 
h™dÀ
, c⁄° * 
£rvîURI
, c⁄° * 
˛õ¡Id
,

877 
≥rsi°í˚_ty≥
, * 
≥rsi°í˚_c⁄ãxt
, 
MQTTAsync_¸óãO±i⁄s
* 
›ti⁄s
);

894 
°ru˘_id
[4];

898 
°ru˘_vîsi⁄
;

900 c⁄° * 
t›icName
;

902 c⁄° * 
mesßge
;

906 
ªèöed
;

911 
qos
;

915 
Àn
;

916 c⁄° * 
d©a
;

917 } 
∑ylﬂd
;

918 } 
	tMQTTAsync_wûlO±i⁄s
;

920 
	#MQTTAsync_wûlO±i⁄s_öôülizî
 { {'M', 'Q', 'T', 'W'}, 1, 
NULL
, NULL, 0, 0, { 0, NULL } }

	)

922 
	#MQTT_SSL_VERSION_DEFAULT
 0

	)

923 
	#MQTT_SSL_VERSION_TLS_1_0
 1

	)

924 
	#MQTT_SSL_VERSION_TLS_1_1
 2

	)

925 
	#MQTT_SSL_VERSION_TLS_1_2
 3

	)

942 
°ru˘_id
[4];

944 
°ru˘_vîsi⁄
;

947 c⁄° * 
åu°St‹e
;

952 c⁄° * 
keySt‹e
;

957 c⁄° * 
¥iv©eKey
;

959 c⁄° * 
¥iv©eKeyPassw‹d
;

969 c⁄° * 
íabÀdCùhîSuôes
;

972 
íabÀSîvîCîtAuth
;

978 
s¶Vîsi⁄
;

985 
vîify
;

992 c⁄° * 
CA∑th
;

998 (*
s¶_îr‹_cb
Ë(c⁄° *
°r
, 
size_t
 
Àn
, *
u
);

1004 * 
s¶_îr‹_c⁄ãxt
;

1011 (*
s¶_psk_cb
Ë(c⁄° *
höt
, *
idítôy
, 
max_idítôy_Àn
, *
psk
, 
max_psk_Àn
, *
u
);

1017 * 
s¶_psk_c⁄ãxt
;

1024 
dißbÀDeÁu…Tru°St‹e
;

1026 } 
	tMQTTAsync_SSLO±i⁄s
;

1028 
	#MQTTAsync_SSLO±i⁄s_öôülizî
 { {'M', 'Q', 'T', 'S'}, 4, 
NULL
, NULL, NULL, NULL, NULL, 1, 
MQTT_SSL_VERSION_DEFAULT
, 0, NULL, NULL, NULL, NULL, NULL, 0}

	)

1038 
°ru˘_id
[4];

1047 
°ru˘_vîsi⁄
;

1058 
kìpAliveI¡îvÆ
;

1080 
˛ón£ssi⁄
;

1084 
maxInÊight
;

1090 
MQTTAsync_wûlO±i⁄s
* 
wûl
;

1096 c⁄° * 
u£∫ame
;

1102 c⁄° * 
∑ssw‹d
;

1106 
c⁄√˘Timeout
;

1114 
ªåyI¡îvÆ
;

1119 
MQTTAsync_SSLO±i⁄s
* 
s¶
;

1125 
MQTTAsync_⁄Suc˚ss
* 
⁄Suc˚ss
;

1131 
MQTTAsync_⁄Faûuª
* 
⁄Faûuª
;

1137 * 
c⁄ãxt
;

1141 
£rvîURIcou¡
;

1150 * c⁄°* 
£rvîURIs
;

1157 
MQTTVîsi⁄
;

1161 
autom©icRec⁄√˘
;

1165 
möRëryI¡îvÆ
;

1169 
maxRëryI¡îvÆ
;

1174 
Àn
;

1175 c⁄° * 
d©a
;

1176 } 
bö¨ypwd
;

1180 
˛ón°¨t
;

1184 
MQTTPr›îtõs
 *
c⁄√˘Pr›îtõs
;

1188 
MQTTPr›îtõs
 *
wûlPr›îtõs
;

1194 
MQTTAsync_⁄Suc˚ss5
* 
⁄Suc˚ss5
;

1200 
MQTTAsync_⁄Faûuª5
* 
⁄Faûuª5
;

1201 } 
	tMQTTAsync_c⁄√˘O±i⁄s
;

1204 
	#MQTTAsync_c⁄√˘O±i⁄s_öôülizî
 { {'M', 'Q', 'T', 'C'}, 6, 60, 1, 65535, 
NULL
, NULL, NULL, 30, 0,\

1205 
NULL
, NULL, NULL, NULL, 0, NULL, 
MQTTVERSION_DEFAULT
, 0, 1, 60, {0, NULL}, 0, NULL, NULL, NULL, NULL}

	)

1207 
	#MQTTAsync_c⁄√˘O±i⁄s_öôülizî5
 { {'M', 'Q', 'T', 'C'}, 6, 60, 0, 65535, 
NULL
, NULL, NULL, 30, 0,\

1208 
NULL
, NULL, NULL, NULL, 0, NULL, 
MQTTVERSION_5
, 0, 1, 60, {0, NULL}, 1, NULL, NULL, NULL, NULL}

	)

1231 
DLLExp‹t
 
MQTTAsync_c⁄√˘
(
MQTTAsync
 
h™dÀ
, c⁄° 
MQTTAsync_c⁄√˘O±i⁄s
* 
›ti⁄s
);

1237 
°ru˘_id
[4];

1239 
°ru˘_vîsi⁄
;

1244 
timeout
;

1250 
MQTTAsync_⁄Suc˚ss
* 
⁄Suc˚ss
;

1256 
MQTTAsync_⁄Faûuª
* 
⁄Faûuª
;

1262 * 
c⁄ãxt
;

1266 
MQTTPr›îtõs
 
¥›îtõs
;

1270 
MQTTRós⁄Codes
 
ªas⁄Code
;

1276 
MQTTAsync_⁄Suc˚ss5
* 
⁄Suc˚ss5
;

1282 
MQTTAsync_⁄Faûuª5
* 
⁄Faûuª5
;

1283 } 
	tMQTTAsync_disc⁄√˘O±i⁄s
;

1285 
	#MQTTAsync_disc⁄√˘O±i⁄s_öôülizî
 { {'M', 'Q', 'T', 'D'}, 0, 0, 
NULL
, NULL, NULL,\

1286 
MQTTPr›îtõs_öôülizî
, 
MQTTREASONCODE_SUCCESS
 }

	)

1288 
	#MQTTAsync_disc⁄√˘O±i⁄s_öôülizî5
 { {'M', 'Q', 'T', 'D'}, 1, 0, 
NULL
, NULL, NULL,\

1289 
MQTTPr›îtõs_öôülizî
, 
MQTTREASONCODE_SUCCESS
, 
NULL
, NULL }

	)

1309 
DLLExp‹t
 
MQTTAsync_disc⁄√˘
(
MQTTAsync
 
h™dÀ
, c⁄° 
MQTTAsync_disc⁄√˘O±i⁄s
* 
›ti⁄s
);

1319 
DLLExp‹t
 
MQTTAsync_isC⁄√˘ed
(
MQTTAsync
 
h™dÀ
);

1336 
DLLExp‹t
 
MQTTAsync_subs¸ibe
(
MQTTAsync
 
h™dÀ
, c⁄° * 
t›ic
, 
qos
, 
MQTTAsync_ª•⁄£O±i⁄s
* 
ª•⁄£
);

1356 
DLLExp‹t
 
MQTTAsync_subs¸ibeM™y
(
MQTTAsync
 
h™dÀ
, 
cou¡
, * c⁄°* 
t›ic
, * 
qos
, 
MQTTAsync_ª•⁄£O±i⁄s
* 
ª•⁄£
);

1370 
DLLExp‹t
 
MQTTAsync_unsubs¸ibe
(
MQTTAsync
 
h™dÀ
, c⁄° * 
t›ic
, 
MQTTAsync_ª•⁄£O±i⁄s
* 
ª•⁄£
);

1384 
DLLExp‹t
 
MQTTAsync_unsubs¸ibeM™y
(
MQTTAsync
 
h™dÀ
, 
cou¡
, * c⁄°* 
t›ic
, 
MQTTAsync_ª•⁄£O±i⁄s
* 
ª•⁄£
);

1405 
DLLExp‹t
 
MQTTAsync_£nd
(
MQTTAsync
 
h™dÀ
, c⁄° * 
de°ö©i⁄Name
, 
∑ylﬂdÀn
, c⁄° * 
∑ylﬂd
, 
qos
,

1406 
ªèöed
, 
MQTTAsync_ª•⁄£O±i⁄s
* 
ª•⁄£
);

1424 
DLLExp‹t
 
MQTTAsync_£ndMesßge
(
MQTTAsync
 
h™dÀ
, c⁄° * 
de°ö©i⁄Name
, c⁄° 
MQTTAsync_mesßge
* 
msg
, 
MQTTAsync_ª•⁄£O±i⁄s
* 
ª•⁄£
);

1445 
DLLExp‹t
 
MQTTAsync_gëPídögTokís
(
MQTTAsync
 
h™dÀ
, 
MQTTAsync_tokí
 **
tokís
);

1455 
	#MQTTASYNC_TRUE
 1

	)

1456 
DLLExp‹t
 
MQTTAsync_isCom∂ëe
(
MQTTAsync
 
h™dÀ
, 
MQTTAsync_tokí
 
tokí
);

1469 
DLLExp‹t
 
MQTTAsync_waôF‹Com∂ëi⁄
(
MQTTAsync
 
h™dÀ
, 
MQTTAsync_tokí
 
tokí
, 
timeout
);

1482 
DLLExp‹t
 
MQTTAsync_‰ìMesßge
(
MQTTAsync_mesßge
** 
msg
);

1492 
DLLExp‹t
 
MQTTAsync_‰ì
(* 
±r
);

1501 
DLLExp‹t
 
MQTTAsync_de°roy
(
MQTTAsync
* 
h™dÀ
);

1505 
	eMQTTASYNC_TRACE_LEVELS


1507 
MQTTASYNC_TRACE_MAXIMUM
 = 1,

1508 
MQTTASYNC_TRACE_MEDIUM
,

1509 
MQTTASYNC_TRACE_MINIMUM
,

1510 
MQTTASYNC_TRACE_PROTOCOL
,

1511 
MQTTASYNC_TRACE_ERROR
,

1512 
MQTTASYNC_TRACE_SEVERE
,

1513 
MQTTASYNC_TRACE_FATAL
,

1522 
DLLExp‹t
 
MQTTAsync_£tTø˚Levñ
(
MQTTASYNC_TRACE_LEVELS
 
Àvñ
);

1533 
	tMQTTAsync_åa˚CÆlback
(
	tMQTTASYNC_TRACE_LEVELS
 
	tÀvñ
, * 
	tmesßge
);

1541 
DLLExp‹t
 
MQTTAsync_£tTø˚CÆlback
(
MQTTAsync_åa˚CÆlback
* 
ˇŒback
);

1546 c⁄° * 
«me
;

1547 c⁄° * 
vÆue
;

1548 } 
	tMQTTAsync_«meVÆue
;

1556 
DLLExp‹t
 
MQTTAsync_«meVÆue
* 
MQTTAsync_gëVîsi⁄Info
();

1564 
DLLExp‹t
 c⁄° * 
MQTTAsync_°ªº‹
(
code
);

2122 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/include/MQTTClient.h

106 #i‡!
deföed
(
MQTTCLIENT_H
)

107 
	#MQTTCLIENT_H


	)

109 #i‡
deföed
(
__˝lu•lus
)

113 #i‡
deföed
(
WIN32
Ë|| deföed(
WIN64
)

114 
	#DLLImp‹t
 
	`__de˛•ec
(
dŒimp‹t
)

	)

115 
	#DLLExp‹t
 
	`__de˛•ec
(
dŒexp‹t
)

	)

117 
	#DLLImp‹t
 

	)

118 
	#DLLExp‹t
 
	`__©åibuã__
 ((
	`visibûôy
 ("deÁu…")))

	)

121 
	~<°dio.h
>

126 
	~"MQTTPr›îtõs.h
"

127 
	~"MQTTRós⁄Codes.h
"

128 
	~"MQTTSubs¸ibeO±s.h
"

129 #i‡!
deföed
(
NO_PERSISTENCE
)

130 
	~"MQTTClõ¡Pîsi°í˚.h
"

137 
	#MQTTCLIENT_SUCCESS
 0

	)

142 
	#MQTTCLIENT_FAILURE
 -1

	)

149 
	#MQTTCLIENT_DISCONNECTED
 -3

	)

154 
	#MQTTCLIENT_MAX_MESSAGES_INFLIGHT
 -4

	)

158 
	#MQTTCLIENT_BAD_UTF8_STRING
 -5

	)

162 
	#MQTTCLIENT_NULL_PARAMETER
 -6

	)

168 
	#MQTTCLIENT_TOPICNAME_TRUNCATED
 -7

	)

173 
	#MQTTCLIENT_BAD_STRUCTURE
 -8

	)

177 
	#MQTTCLIENT_BAD_QOS
 -9

	)

181 
	#MQTTCLIENT_SSL_NOT_SUPPORTED
 -10

	)

185 
	#MQTTCLIENT_BAD_MQTT_VERSION
 -11

	)

191 
	#MQTTCLIENT_BAD_PROTOCOL
 -14

	)

195 
	#MQTTCLIENT_BAD_MQTT_OPTION
 -15

	)

199 
	#MQTTCLIENT_WRONG_MQTT_VERSION
 -16

	)

205 
	#MQTTVERSION_DEFAULT
 0

	)

209 
	#MQTTVERSION_3_1
 3

	)

213 
	#MQTTVERSION_3_1_1
 4

	)

217 
	#MQTTVERSION_5
 5

	)

221 
	#MQTT_BAD_SUBSCRIBE
 0x80

	)

229 
°ru˘_id
[4];

231 
°ru˘_vîsi⁄
;

233 
do_›ís¶_öô
;

234 } 
	tMQTTClõ¡_öô_›ti⁄s
;

236 
	#MQTTClõ¡_öô_›ti⁄s_öôülizî
 { {'M', 'Q', 'T', 'G'}, 0, 0 }

	)

242 
DLLExp‹t
 
MQTTClõ¡_globÆ_öô
(
MQTTClõ¡_öô_›ti⁄s
* 
öôs
);

248 * 
	tMQTTClõ¡
;

259 
	tMQTTClõ¡_dñivîyTokí
;

260 
	tMQTTClõ¡_tokí
;

271 
°ru˘_id
[4];

274 
°ru˘_vîsi⁄
;

276 
∑ylﬂdÀn
;

278 * 
∑ylﬂd
;

292 
qos
;

311 
ªèöed
;

318 
dup
;

322 
msgid
;

326 
MQTTPr›îtõs
 
¥›îtõs
;

327 } 
	tMQTTClõ¡_mesßge
;

329 
	#MQTTClõ¡_mesßge_öôülizî
 { {'M', 'Q', 'T', 'M'}, 1, 0, 
NULL
, 0, 0, 0, 0, 
MQTTPr›îtõs_öôülizî
 }

	)

357 
	tMQTTClõ¡_mesßgeAºived
(* 
	tc⁄ãxt
, * 
	tt›icName
, 
	tt›icLí
, 
	tMQTTClõ¡_mesßge
* 
	tmesßge
);

379 
	tMQTTClõ¡_dñivîyCom∂ëe
(* 
	tc⁄ãxt
, 
	tMQTTClõ¡_dñivîyTokí
 
	tdt
);

396 
	tMQTTClõ¡_c⁄√˘i⁄Lo°
(* 
	tc⁄ãxt
, * 
	tˇu£
);

425 
DLLExp‹t
 
MQTTClõ¡_£tCÆlbacks
(
MQTTClõ¡
 
h™dÀ
, * 
c⁄ãxt
, 
MQTTClõ¡_c⁄√˘i⁄Lo°
* 
˛
,

426 
MQTTClõ¡_mesßgeAºived
* 
ma
, 
MQTTClõ¡_dñivîyCom∂ëe
* 
dc
);

438 
	tMQTTClõ¡_disc⁄√˘ed
(* 
	tc⁄ãxt
, 
	tMQTTPr›îtõs
* 
	t¥›îtõs
,

439 
	tMQTTRós⁄Codes
 
	tªas⁄Code
);

454 
DLLExp‹t
 
MQTTClõ¡_£tDisc⁄√˘ed
(
MQTTClõ¡
 
h™dÀ
, * 
c⁄ãxt
, 
MQTTClõ¡_disc⁄√˘ed
* 
co
);

479 
	tMQTTClõ¡_published
(* 
	tc⁄ãxt
, 
	tdt
, 
	t∑ckë_ty≥
, 
	tMQTTPr›îtõs
* 
	t¥›îtõs
,

480 
	tMQTTRós⁄Codes
 
	tªas⁄Code
);

482 
DLLExp‹t
 
MQTTClõ¡_£tPublished
(
MQTTClõ¡
 
h™dÀ
, * 
c⁄ãxt
, 
MQTTClõ¡_published
* 
co
);

526 
DLLExp‹t
 
MQTTClõ¡_¸óã
(
MQTTClõ¡
* 
h™dÀ
, c⁄° * 
£rvîURI
, c⁄° * 
˛õ¡Id
,

527 
≥rsi°í˚_ty≥
, * 
≥rsi°í˚_c⁄ãxt
);

532 
°ru˘_id
[4];

534 
°ru˘_vîsi⁄
;

540 
MQTTVîsi⁄
;

541 } 
	tMQTTClõ¡_¸óãO±i⁄s
;

543 
	#MQTTClõ¡_¸óãO±i⁄s_öôülizî
 { {'M', 'Q', 'C', 'O'}, 0, 
MQTTVERSION_DEFAULT
 }

	)

589 
DLLExp‹t
 
MQTTClõ¡_¸óãWôhO±i⁄s
(
MQTTClõ¡
* 
h™dÀ
, c⁄° * 
£rvîURI
, c⁄° * 
˛õ¡Id
,

590 
≥rsi°í˚_ty≥
, * 
≥rsi°í˚_c⁄ãxt
, 
MQTTClõ¡_¸óãO±i⁄s
* 
›ti⁄s
);

607 
°ru˘_id
[4];

611 
°ru˘_vîsi⁄
;

613 c⁄° * 
t›icName
;

615 c⁄° * 
mesßge
;

619 
ªèöed
;

624 
qos
;

628 
Àn
;

629 c⁄° * 
d©a
;

630 } 
∑ylﬂd
;

631 } 
	tMQTTClõ¡_wûlO±i⁄s
;

633 
	#MQTTClõ¡_wûlO±i⁄s_öôülizî
 { {'M', 'Q', 'T', 'W'}, 1, 
NULL
, NULL, 0, 0, {0, NULL} }

	)

635 
	#MQTT_SSL_VERSION_DEFAULT
 0

	)

636 
	#MQTT_SSL_VERSION_TLS_1_0
 1

	)

637 
	#MQTT_SSL_VERSION_TLS_1_1
 2

	)

638 
	#MQTT_SSL_VERSION_TLS_1_2
 3

	)

655 
°ru˘_id
[4];

657 
°ru˘_vîsi⁄
;

660 c⁄° * 
åu°St‹e
;

665 c⁄° * 
keySt‹e
;

670 c⁄° * 
¥iv©eKey
;

672 c⁄° * 
¥iv©eKeyPassw‹d
;

682 c⁄° * 
íabÀdCùhîSuôes
;

685 
íabÀSîvîCîtAuth
;

691 
s¶Vîsi⁄
;

698 
vîify
;

705 c⁄° * 
CA∑th
;

711 (*
s¶_îr‹_cb
Ë(c⁄° *
°r
, 
size_t
 
Àn
, *
u
);

717 * 
s¶_îr‹_c⁄ãxt
;

724 (*
s¶_psk_cb
Ë(c⁄° *
höt
, *
idítôy
, 
max_idítôy_Àn
, *
psk
, 
max_psk_Àn
, *
u
);

730 * 
s¶_psk_c⁄ãxt
;

737 
dißbÀDeÁu…Tru°St‹e
;

739 } 
	tMQTTClõ¡_SSLO±i⁄s
;

741 
	#MQTTClõ¡_SSLO±i⁄s_öôülizî
 { {'M', 'Q', 'T', 'S'}, 4, 
NULL
, NULL, NULL, NULL, NULL, 1, 
MQTT_SSL_VERSION_DEFAULT
, 0, NULL, NULL, NULL, NULL, NULL, 0 }

	)

760 
°ru˘_id
[4];

769 
°ru˘_vîsi⁄
;

779 
kìpAliveI¡îvÆ
;

801 
˛ón£ssi⁄
;

811 
ªlübÀ
;

817 
MQTTClõ¡_wûlO±i⁄s
* 
wûl
;

823 c⁄° * 
u£∫ame
;

829 c⁄° * 
∑ssw‹d
;

833 
c⁄√˘Timeout
;

841 
ªåyI¡îvÆ
;

846 
MQTTClõ¡_SSLO±i⁄s
* 
s¶
;

850 
£rvîURIcou¡
;

861 * c⁄°* 
£rvîURIs
;

869 
MQTTVîsi⁄
;

875 c⁄° * 
£rvîURI
;

876 
MQTTVîsi⁄
;

877 
£ssi⁄Pª£¡
;

878 } 
ªtu∫ed
;

884 
Àn
;

885 c⁄° * 
d©a
;

886 } 
bö¨ypwd
;

890 
maxInÊightMesßges
;

894 
˛ón°¨t
;

895 } 
	tMQTTClõ¡_c⁄√˘O±i⁄s
;

897 
	#MQTTClõ¡_c⁄√˘O±i⁄s_öôülizî
 { {'M', 'Q', 'T', 'C'}, 6, 60, 1, 1, 
NULL
, NULL, NULL, 30, 0, NULL, 0, NULL, 
MQTTVERSION_DEFAULT
, {NULL, 0, 0}, {0, NULL}, -1, 0}

	)

899 
	#MQTTClõ¡_c⁄√˘O±i⁄s_öôülizî5
 { {'M', 'Q', 'T', 'C'}, 6, 60, 0, 1, 
NULL
, NULL, NULL, 30, 0, NULL, 0, NULL, 
MQTTVERSION_5
, {NULL, 0, 0}, {0, NULL}, -1, 1}

	)

910 c⁄° * 
«me
;

911 c⁄° * 
vÆue
;

912 } 
	tMQTTClõ¡_«meVÆue
;

919 
DLLExp‹t
 
MQTTClõ¡_«meVÆue
* 
MQTTClõ¡_gëVîsi⁄Info
();

941 
DLLExp‹t
 
MQTTClõ¡_c⁄√˘
(
MQTTClõ¡
 
h™dÀ
, 
MQTTClõ¡_c⁄√˘O±i⁄s
* 
›ti⁄s
);

944 
	sMQTTRe•⁄£


946 
vîsi⁄
;

947 
MQTTRós⁄Codes
 
ªas⁄Code
;

948 
ªas⁄CodeCou¡
;

949 
MQTTRós⁄Codes
* 
ªas⁄Codes
;

950 
MQTTPr›îtõs
* 
¥›îtõs
;

951 } 
	tMQTTRe•⁄£
;

953 
	#MQTTRe•⁄£_öôülizî
 {1, 
MQTTREASONCODE_SUCCESS
, 0, 
NULL
, NULL}

	)

955 
DLLExp‹t
 
MQTTRe•⁄£_‰ì
(
MQTTRe•⁄£
 
ª•⁄£
);

957 
DLLExp‹t
 
MQTTRe•⁄£
 
MQTTClõ¡_c⁄√˘5
(
MQTTClõ¡
 
h™dÀ
, 
MQTTClõ¡_c⁄√˘O±i⁄s
* 
›ti⁄s
,

958 
MQTTPr›îtõs
* 
c⁄√˘Pr›îtõs
, MQTTPr›îtõs* 
wûlPr›îtõs
);

978 
DLLExp‹t
 
MQTTClõ¡_disc⁄√˘
(
MQTTClõ¡
 
h™dÀ
, 
timeout
);

980 
DLLExp‹t
 
MQTTClõ¡_disc⁄√˘5
(
MQTTClõ¡
 
h™dÀ
, 
timeout
, 
MQTTRós⁄Codes
 
ªas⁄
, 
MQTTPr›îtõs
* 
¥›s
);

989 
DLLExp‹t
 
MQTTClõ¡_isC⁄√˘ed
(
MQTTClõ¡
 
h™dÀ
);

1008 
DLLExp‹t
 
MQTTClõ¡_subs¸ibe
(
MQTTClõ¡
 
h™dÀ
, c⁄° * 
t›ic
, 
qos
);

1011 
DLLExp‹t
 
MQTTRe•⁄£
 
MQTTClõ¡_subs¸ibe5
(
MQTTClõ¡
 
h™dÀ
, c⁄° * 
t›ic
, 
qos
,

1012 
MQTTSubs¸ibe_›ti⁄s
* 
›ts
, 
MQTTPr›îtõs
* 
¥›s
);

1030 
DLLExp‹t
 
MQTTClõ¡_subs¸ibeM™y
(
MQTTClõ¡
 
h™dÀ
, 
cou¡
, * c⁄°* 
t›ic
, * 
qos
);

1032 
DLLExp‹t
 
MQTTRe•⁄£
 
MQTTClõ¡_subs¸ibeM™y5
(
MQTTClõ¡
 
h™dÀ
, 
cou¡
, * c⁄°* 
t›ic
,

1033 * 
qos
, 
MQTTSubs¸ibe_›ti⁄s
* 
›ts
, 
MQTTPr›îtõs
* 
¥›s
);

1046 
DLLExp‹t
 
MQTTClõ¡_unsubs¸ibe
(
MQTTClõ¡
 
h™dÀ
, c⁄° * 
t›ic
);

1048 
DLLExp‹t
 
MQTTRe•⁄£
 
MQTTClõ¡_unsubs¸ibe5
(
MQTTClõ¡
 
h™dÀ
, c⁄° * 
t›ic
, 
MQTTPr›îtõs
* 
¥›s
);

1061 
DLLExp‹t
 
MQTTClõ¡_unsubs¸ibeM™y
(
MQTTClõ¡
 
h™dÀ
, 
cou¡
, * c⁄°* 
t›ic
);

1063 
DLLExp‹t
 
MQTTRe•⁄£
 
MQTTClõ¡_unsubs¸ibeM™y5
(
MQTTClõ¡
 
h™dÀ
, 
cou¡
, * c⁄°* 
t›ic
, 
MQTTPr›îtõs
* 
¥›s
);

1086 
DLLExp‹t
 
MQTTClõ¡_publish
(
MQTTClõ¡
 
h™dÀ
, c⁄° * 
t›icName
, 
∑ylﬂdÀn
, c⁄° * 
∑ylﬂd
, 
qos
, 
ªèöed
,

1087 
MQTTClõ¡_dñivîyTokí
* 
dt
);

1089 
DLLExp‹t
 
MQTTRe•⁄£
 
MQTTClõ¡_publish5
(
MQTTClõ¡
 
h™dÀ
, c⁄° * 
t›icName
, 
∑ylﬂdÀn
, c⁄° * 
∑ylﬂd
,

1090 
qos
, 
ªèöed
, 
MQTTPr›îtõs
* 
¥›îtõs
, 
MQTTClõ¡_dñivîyTokí
* 
dt
);

1110 
DLLExp‹t
 
MQTTClõ¡_publishMesßge
(
MQTTClõ¡
 
h™dÀ
, c⁄° * 
t›icName
, 
MQTTClõ¡_mesßge
* 
msg
, 
MQTTClõ¡_dñivîyTokí
* 
dt
);

1113 
DLLExp‹t
 
MQTTRe•⁄£
 
MQTTClõ¡_publishMesßge5
(
MQTTClõ¡
 
h™dÀ
, c⁄° * 
t›icName
, 
MQTTClõ¡_mesßge
* 
msg
,

1114 
MQTTClõ¡_dñivîyTokí
* 
dt
);

1131 
DLLExp‹t
 
MQTTClõ¡_waôF‹Com∂ëi⁄
(
MQTTClõ¡
 
h™dÀ
, 
MQTTClõ¡_dñivîyTokí
 
dt
, 
timeout
);

1152 
DLLExp‹t
 
MQTTClõ¡_gëPídögDñivîyTokís
(
MQTTClõ¡
 
h™dÀ
, 
MQTTClõ¡_dñivîyTokí
 **
tokís
);

1160 
DLLExp‹t
 
MQTTClõ¡_yõld
();

1193 
DLLExp‹t
 
MQTTClõ¡_ª˚ive
(
MQTTClõ¡
 
h™dÀ
, ** 
t›icName
, * 
t›icLí
, 
MQTTClõ¡_mesßge
** 
mesßge
,

1194 
timeout
);

1206 
DLLExp‹t
 
MQTTClõ¡_‰ìMesßge
(
MQTTClõ¡_mesßge
** 
msg
);

1216 
DLLExp‹t
 
MQTTClõ¡_‰ì
(* 
±r
);

1225 
DLLExp‹t
 
MQTTClõ¡_de°roy
(
MQTTClõ¡
* 
h™dÀ
);

1228 
	eMQTTCLIENT_TRACE_LEVELS


1230 
MQTTCLIENT_TRACE_MAXIMUM
 = 1,

1231 
MQTTCLIENT_TRACE_MEDIUM
,

1232 
MQTTCLIENT_TRACE_MINIMUM
,

1233 
MQTTCLIENT_TRACE_PROTOCOL
,

1234 
MQTTCLIENT_TRACE_ERROR
,

1235 
MQTTCLIENT_TRACE_SEVERE
,

1236 
MQTTCLIENT_TRACE_FATAL
,

1245 
DLLExp‹t
 
MQTTClõ¡_£tTø˚Levñ
(
MQTTCLIENT_TRACE_LEVELS
 
Àvñ
);

1256 
	tMQTTClõ¡_åa˚CÆlback
(
	tMQTTCLIENT_TRACE_LEVELS
 
	tÀvñ
, * 
	tmesßge
);

1264 
DLLExp‹t
 
MQTTClõ¡_£tTø˚CÆlback
(
MQTTClõ¡_åa˚CÆlback
* 
ˇŒback
);

1271 
DLLExp‹t
 c⁄° * 
MQTTClõ¡_°ªº‹
(
code
);

1273 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/include/MQTTClientPersistence.h

59 #i‡!
deföed
(
MQTTCLIENTPERSISTENCE_H
)

60 
	#MQTTCLIENTPERSISTENCE_H


	)

69 
	#MQTTCLIENT_PERSISTENCE_DEFAULT
 0

	)

74 
	#MQTTCLIENT_PERSISTENCE_NONE
 1

	)

79 
	#MQTTCLIENT_PERSISTENCE_USER
 2

	)

85 
	#MQTTCLIENT_PERSISTENCE_ERROR
 -2

	)

113 (*
	tPîsi°í˚_›í
)(** 
	th™dÀ
, c⁄° * 
	t˛õ¡ID
, c⁄° * 
	t£rvîURI
, * 
	tc⁄ãxt
);

123 (*
	tPîsi°í˚_˛o£
)(* 
	th™dÀ
);

140 (*
	tPîsi°í˚_put
)(* 
	th™dÀ
, * 
	tkey
, 
	tbufcou¡
, * 
	tbuf„rs
[], 
	tbuÊís
[]);

156 (*
	tPîsi°í˚_gë
)(* 
	th™dÀ
, * 
	tkey
, ** 
	tbuf„r
, * 
	tbuÊí
);

169 (*
	tPîsi°í˚_ªmove
)(* 
	th™dÀ
, * 
	tkey
);

186 (*
	tPîsi°í˚_keys
)(* 
	th™dÀ
, *** 
	tkeys
, * 
	tnkeys
);

197 (*
	tPîsi°í˚_˛ór
)(* 
	th™dÀ
);

208 (*
	tPîsi°í˚_c⁄èöskey
)(* 
	th™dÀ
, * 
	tkey
);

219 * 
c⁄ãxt
;

223 
Pîsi°í˚_›í
 
p›í
;

227 
Pîsi°í˚_˛o£
 
p˛o£
;

231 
Pîsi°í˚_put
 
µut
;

235 
Pîsi°í˚_gë
 
pgë
;

239 
Pîsi°í˚_ªmove
 
¥emove
;

243 
Pîsi°í˚_keys
 
pkeys
;

247 
Pîsi°í˚_˛ór
 
p˛ór
;

251 
Pîsi°í˚_c⁄èöskey
 
pc⁄èöskey
;

252 } 
	tMQTTClõ¡_≥rsi°í˚
;

	@/var/www/html/debian/gateway/include/MQTTProperties.h

17 #i‡!
deföed
(
MQTTPROPERTIES_H
)

18 
	#MQTTPROPERTIES_H


	)

20 
	#MQTT_INVALID_PROPERTY_ID
 -2

	)

23 
	eMQTTPr›îtyCodes
 {

24 
	mMQTTPROPERTY_CODE_PAYLOAD_FORMAT_INDICATOR
 = 1,

25 
	mMQTTPROPERTY_CODE_MESSAGE_EXPIRY_INTERVAL
 = 2,

26 
	mMQTTPROPERTY_CODE_CONTENT_TYPE
 = 3,

27 
	mMQTTPROPERTY_CODE_RESPONSE_TOPIC
 = 8,

28 
	mMQTTPROPERTY_CODE_CORRELATION_DATA
 = 9,

29 
	mMQTTPROPERTY_CODE_SUBSCRIPTION_IDENTIFIER
 = 11,

30 
	mMQTTPROPERTY_CODE_SESSION_EXPIRY_INTERVAL
 = 17,

31 
	mMQTTPROPERTY_CODE_ASSIGNED_CLIENT_IDENTIFER
 = 18,

32 
	mMQTTPROPERTY_CODE_SERVER_KEEP_ALIVE
 = 19,

33 
	mMQTTPROPERTY_CODE_AUTHENTICATION_METHOD
 = 21,

34 
	mMQTTPROPERTY_CODE_AUTHENTICATION_DATA
 = 22,

35 
	mMQTTPROPERTY_CODE_REQUEST_PROBLEM_INFORMATION
 = 23,

36 
	mMQTTPROPERTY_CODE_WILL_DELAY_INTERVAL
 = 24,

37 
	mMQTTPROPERTY_CODE_REQUEST_RESPONSE_INFORMATION
 = 25,

38 
	mMQTTPROPERTY_CODE_RESPONSE_INFORMATION
 = 26,

39 
	mMQTTPROPERTY_CODE_SERVER_REFERENCE
 = 28,

40 
	mMQTTPROPERTY_CODE_REASON_STRING
 = 31,

41 
	mMQTTPROPERTY_CODE_RECEIVE_MAXIMUM
 = 33,

42 
	mMQTTPROPERTY_CODE_TOPIC_ALIAS_MAXIMUM
 = 34,

43 
	mMQTTPROPERTY_CODE_TOPIC_ALIAS
 = 35,

44 
	mMQTTPROPERTY_CODE_MAXIMUM_QOS
 = 36,

45 
	mMQTTPROPERTY_CODE_RETAIN_AVAILABLE
 = 37,

46 
	mMQTTPROPERTY_CODE_USER_PROPERTY
 = 38,

47 
	mMQTTPROPERTY_CODE_MAXIMUM_PACKET_SIZE
 = 39,

48 
	mMQTTPROPERTY_CODE_WILDCARD_SUBSCRIPTION_AVAILABLE
 = 40,

49 
	mMQTTPROPERTY_CODE_SUBSCRIPTION_IDENTIFIERS_AVAILABLE
 = 41,

50 
	mMQTTPROPERTY_CODE_SHARED_SUBSCRIPTION_AVAILABLE
 = 42

53 #i‡
deföed
(
WIN32
Ë|| deföed(
WIN64
)

54 
	#DLLImp‹t
 
	`__de˛•ec
(
dŒimp‹t
)

	)

55 
	#DLLExp‹t
 
	`__de˛•ec
(
dŒexp‹t
)

	)

57 
	#DLLImp‹t
 

	)

58 
	#DLLExp‹t
 
	`__©åibuã__
 ((
	`visibûôy
 ("deÁu…")))

	)

67 
DLLExp‹t
 c⁄° * 
MQTTPr›îtyName
(
MQTTPr›îtyCodes
 
vÆue
);

70 
	eMQTTPr›îtyTy≥s
 {

71 
	mMQTTPROPERTY_TYPE_BYTE
,

72 
	mMQTTPROPERTY_TYPE_TWO_BYTE_INTEGER
,

73 
	mMQTTPROPERTY_TYPE_FOUR_BYTE_INTEGER
,

74 
	mMQTTPROPERTY_TYPE_VARIABLE_BYTE_INTEGER
,

75 
	mMQTTPROPERTY_TYPE_BINARY_DATA
,

76 
	mMQTTPROPERTY_TYPE_UTF_8_ENCODED_STRING
,

77 
	mMQTTPROPERTY_TYPE_UTF_8_STRING_PAIR


85 
DLLExp‹t
 
MQTTPr›îty_gëTy≥
(
MQTTPr›îtyCodes
 
vÆue
);

92 
	mÀn
;

93 * 
	md©a
;

94 } 
	tMQTTLíSåög
;

102 
MQTTPr›îtyCodes
 
	midítifõr
;

105 
	mbyã
;

106 
	möãgî2
;

107 
	möãgî4
;

109 
MQTTLíSåög
 
	md©a
;

110 
MQTTLíSåög
 
	mvÆue
;

112 } 
	mvÆue
;

113 } 
	tMQTTPr›îty
;

118 
	sMQTTPr›îtõs


120 
	mcou¡
;

121 
	mmax_cou¡
;

122 
	mÀngth
;

123 
MQTTPr›îty
 *
	m¨øy
;

124 } 
	tMQTTPr›îtõs
;

126 
	#MQTTPr›îtõs_öôülizî
 {0, 0, 0, 
NULL
}

	)

133 
MQTTPr›îtõs_Àn
(
MQTTPr›îtõs
* 
¥›s
);

141 
DLLExp‹t
 
MQTTPr›îtõs_add
(
MQTTPr›îtõs
* 
¥›s
, c⁄° 
MQTTPr›îty
* 
¥›
);

149 
MQTTPr›îtõs_wrôe
(** 
µå
, c⁄° 
MQTTPr›îtõs
* 
¥›îtõs
);

158 
MQTTPr›îtõs_ªad
(
MQTTPr›îtõs
* 
¥›îtõs
, ** 
µå
, * 
ídd©a
);

164 
DLLExp‹t
 
MQTTPr›îtõs_‰ì
(
MQTTPr›îtõs
* 
¥›îtõs
);

171 
DLLExp‹t
 
MQTTPr›îtõs
 
MQTTPr›îtõs_c›y
(c⁄° MQTTPr›îtõs* 
¥›s
);

179 
DLLExp‹t
 
MQTTPr›îtõs_hasPr›îty
(
MQTTPr›îtõs
 *
¥›s
, 
MQTTPr›îtyCodes
 
¥›id
);

188 
DLLExp‹t
 
MQTTPr›îtõs_¥›îtyCou¡
(
MQTTPr›îtõs
 *
¥›s
, 
MQTTPr›îtyCodes
 
¥›id
);

196 
DLLExp‹t
 
MQTTPr›îtõs_gëNumîicVÆue
(
MQTTPr›îtõs
 *
¥›s
, 
MQTTPr›îtyCodes
 
¥›id
);

206 
DLLExp‹t
 
MQTTPr›îtõs_gëNumîicVÆueAt
(
MQTTPr›îtõs
 *
¥›s
, 
MQTTPr›îtyCodes
 
¥›id
, 
ödex
);

214 
DLLExp‹t
 
MQTTPr›îty
* 
MQTTPr›îtõs_gëPr›îty
(
MQTTPr›îtõs
 *
¥›s
, 
MQTTPr›îtyCodes
 
¥›id
);

223 
DLLExp‹t
 
MQTTPr›îty
* 
MQTTPr›îtõs_gëPr›îtyAt
(
MQTTPr›îtõs
 *
¥›s
, 
MQTTPr›îtyCodes
 
¥›id
, 
ödex
);

	@/var/www/html/debian/gateway/include/MQTTReasonCodes.h

17 #i‡!
deföed
(
MQTTREASONCODES_H
)

18 
	#MQTTREASONCODES_H


	)

21 
	eMQTTRós⁄Codes
 {

22 
	mMQTTREASONCODE_SUCCESS
 = 0,

23 
	mMQTTREASONCODE_NORMAL_DISCONNECTION
 = 0,

24 
	mMQTTREASONCODE_GRANTED_QOS_0
 = 0,

25 
	mMQTTREASONCODE_GRANTED_QOS_1
 = 1,

26 
	mMQTTREASONCODE_GRANTED_QOS_2
 = 2,

27 
	mMQTTREASONCODE_DISCONNECT_WITH_WILL_MESSAGE
 = 4,

28 
	mMQTTREASONCODE_NO_MATCHING_SUBSCRIBERS
 = 16,

29 
	mMQTTREASONCODE_NO_SUBSCRIPTION_FOUND
 = 17,

30 
	mMQTTREASONCODE_CONTINUE_AUTHENTICATION
 = 24,

31 
	mMQTTREASONCODE_RE_AUTHENTICATE
 = 25,

32 
	mMQTTREASONCODE_UNSPECIFIED_ERROR
 = 128,

33 
	mMQTTREASONCODE_MALFORMED_PACKET
 = 129,

34 
	mMQTTREASONCODE_PROTOCOL_ERROR
 = 130,

35 
	mMQTTREASONCODE_IMPLEMENTATION_SPECIFIC_ERROR
 = 131,

36 
	mMQTTREASONCODE_UNSUPPORTED_PROTOCOL_VERSION
 = 132,

37 
	mMQTTREASONCODE_CLIENT_IDENTIFIER_NOT_VALID
 = 133,

38 
	mMQTTREASONCODE_BAD_USER_NAME_OR_PASSWORD
 = 134,

39 
	mMQTTREASONCODE_NOT_AUTHORIZED
 = 135,

40 
	mMQTTREASONCODE_SERVER_UNAVAILABLE
 = 136,

41 
	mMQTTREASONCODE_SERVER_BUSY
 = 137,

42 
	mMQTTREASONCODE_BANNED
 = 138,

43 
	mMQTTREASONCODE_SERVER_SHUTTING_DOWN
 = 139,

44 
	mMQTTREASONCODE_BAD_AUTHENTICATION_METHOD
 = 140,

45 
	mMQTTREASONCODE_KEEP_ALIVE_TIMEOUT
 = 141,

46 
	mMQTTREASONCODE_SESSION_TAKEN_OVER
 = 142,

47 
	mMQTTREASONCODE_TOPIC_FILTER_INVALID
 = 143,

48 
	mMQTTREASONCODE_TOPIC_NAME_INVALID
 = 144,

49 
	mMQTTREASONCODE_PACKET_IDENTIFIER_IN_USE
 = 145,

50 
	mMQTTREASONCODE_PACKET_IDENTIFIER_NOT_FOUND
 = 146,

51 
	mMQTTREASONCODE_RECEIVE_MAXIMUM_EXCEEDED
 = 147,

52 
	mMQTTREASONCODE_TOPIC_ALIAS_INVALID
 = 148,

53 
	mMQTTREASONCODE_PACKET_TOO_LARGE
 = 149,

54 
	mMQTTREASONCODE_MESSAGE_RATE_TOO_HIGH
 = 150,

55 
	mMQTTREASONCODE_QUOTA_EXCEEDED
 = 151,

56 
	mMQTTREASONCODE_ADMINISTRATIVE_ACTION
 = 152,

57 
	mMQTTREASONCODE_PAYLOAD_FORMAT_INVALID
 = 153,

58 
	mMQTTREASONCODE_RETAIN_NOT_SUPPORTED
 = 154,

59 
	mMQTTREASONCODE_QOS_NOT_SUPPORTED
 = 155,

60 
	mMQTTREASONCODE_USE_ANOTHER_SERVER
 = 156,

61 
	mMQTTREASONCODE_SERVER_MOVED
 = 157,

62 
	mMQTTREASONCODE_SHARED_SUBSCRIPTIONS_NOT_SUPPORTED
 = 158,

63 
	mMQTTREASONCODE_CONNECTION_RATE_EXCEEDED
 = 159,

64 
	mMQTTREASONCODE_MAXIMUM_CONNECT_TIME
 = 160,

65 
	mMQTTREASONCODE_SUBSCRIPTION_IDENTIFIERS_NOT_SUPPORTED
 = 161,

66 
	mMQTTREASONCODE_WILDCARD_SUBSCRIPTIONS_NOT_SUPPORTED
 = 162

69 #i‡
deföed
(
WIN32
Ë|| deföed(
WIN64
)

70 
	#DLLImp‹t
 
	`__de˛•ec
(
dŒimp‹t
)

	)

71 
	#DLLExp‹t
 
	`__de˛•ec
(
dŒexp‹t
)

	)

73 
	#DLLImp‹t
 

	)

74 
	#DLLExp‹t
 
	`__©åibuã__
 ((
	`visibûôy
 ("deÁu…")))

	)

83 
DLLExp‹t
 c⁄° * 
MQTTRós⁄Code_toSåög
(
MQTTRós⁄Codes
 
vÆue
);

	@/var/www/html/debian/gateway/include/MQTTSubscribeOpts.h

17 #i‡!
deföed
(
SUBOPTS_H
)

18 
	#SUBOPTS_H


	)

21 
	sMQTTSubs¸ibe_›ti⁄s


24 
	m°ru˘_id
[4];

27 
	m°ru˘_vîsi⁄
;

31 
	mnoLoˇl
;

36 
	mªèöAsPublished
;

41 
	mªèöH™dlög
;

42 } 
	tMQTTSubs¸ibe_›ti⁄s
;

44 
	#MQTTSubs¸ibe_›ti⁄s_öôülizî
 { {'M', 'Q', 'S', 'O'}, 0, 0, 0, 0 }

	)

	@/var/www/html/debian/gateway/include/curl/curl.h

1 #i‚de‡
__CURL_CURL_H


2 
	#__CURL_CURL_H


	)

33 
	~"cuævî.h
"

34 
	~"cuæbuûd.h
"

35 
	~"cuæruÀs.h
"

41 #i‡(
deföed
(
_WIN32
Ë|| deföed(
__WIN32__
)) && \

42 !
deföed
(
WIN32
Ë&& !
	$deföed
(
__SYMBIAN32__
)

43 
	#WIN32


	)

46 
	~<°dio.h
>

47 
	~<limôs.h
>

49 #i‡
	`deföed
(
__FªeBSD__
) && (__FreeBSD__ >= 2)

51 
	~<o§ñd©e.h
>

55 
	~<sys/ty≥s.h
>

56 
	~<time.h
>

58 #i‡
	`deföed
(
WIN32
Ë&& !deföed(
_WIN32_WCE
Ë&& !deföed(
__CYGWIN__
)

59 #i‡!(
	`deföed
(
_WINSOCKAPI_
Ë|| deföed(
_WINSOCK_H
) || \

60 
	`deföed
(
__LWIP_OPT_H__
Ë|| 
	$deföed
(
LWIP_HDR_OPT_H
))

63 
	~<wösock2.h
>

64 
	~<ws2t˝ù.h
>

71 #i‡
	`deföed
(
_AIX
Ë|| deföed(
__NOVELL_LIBC__
Ë|| deföed(
__NëBSD__
) || \

72 
	`deföed
(
__möix
Ë|| deföed(
__SYMBIAN32__
Ë|| deföed(
__INTEGRITY
) || \

73 
	`deföed
(
ANDROID
Ë|| deföed(
__ANDROID__
Ë|| deföed(
__O≥nBSD__
) || \

74 (
	`deföed
(
__FªeBSD_vîsi⁄
) && (__FreeBSD_version < 800000))

75 
	~<sys/£À˘.h
>

78 #i‡!
	`deföed
(
WIN32
Ë&& !deföed(
_WIN32_WCE
)

79 
	~<sys/sockë.h
>

82 #i‡!
	`deföed
(
WIN32
Ë&& !deföed(
__WATCOMC__
Ë&& !deföed(
__VXWORKS__
)

83 
	~<sys/time.h
>

86 #ifde‡
__BEOS__


87 
	~<suµ‹t/Suµ‹tDefs.h
>

90 #ifde‡ 
__˝lu•lus


94 
	tCURL
;

100 #ifde‡
CURL_STATICLIB


101 
	#CURL_EXTERN


	)

102 #ñi‡
	`deföed
(
WIN32
Ë|| deföed(
_WIN32
Ë|| deföed(
__SYMBIAN32__
)

103 #i‡
	`deföed
(
BUILDING_LIBCURL
)

104 
	#CURL_EXTERN
 
	`__de˛•ec
(
dŒexp‹t
)

	)

106 
	#CURL_EXTERN
 
	`__de˛•ec
(
dŒimp‹t
)

	)

108 #ñi‡
	`deföed
(
BUILDING_LIBCURL
Ë&& deföed(
CURL_HIDDEN_SYMBOLS
)

109 
	#CURL_EXTERN
 
CURL_EXTERN_SYMBOL


	)

111 
	#CURL_EXTERN


	)

114 #i‚de‡
cuæ_sockë_ty≥def


116 #i‡
	`deföed
(
WIN32
Ë&& !deföed(
__LWIP_OPT_H__
Ë&& !deföed(
LWIP_HDR_OPT_H
)

117 
SOCKET
 
	tcuæ_sockë_t
;

118 
	#CURL_SOCKET_BAD
 
INVALID_SOCKET


	)

120 
	tcuæ_sockë_t
;

121 
	#CURL_SOCKET_BAD
 -1

	)

123 
	#cuæ_sockë_ty≥def


	)

126 
	scuæ_hâµo°
 {

127 
cuæ_hâµo°
 *
√xt
;

128 *
«me
;

129 
«mñígth
;

130 *
c⁄ã¡s
;

131 
c⁄ã¡¶ígth
;

133 *
buf„r
;

134 
buf„æígth
;

135 *
c⁄ã¡ty≥
;

136 
cuæ_¶i°
* 
c⁄ã¡hódî
;

137 
cuæ_hâµo°
 *
m‹e
;

140 
Êags
;

143 
	#CURL_HTTPPOST_FILENAME
 (1<<0)

	)

145 
	#CURL_HTTPPOST_READFILE
 (1<<1)

	)

147 
	#CURL_HTTPPOST_PTRNAME
 (1<<2)

	)

149 
	#CURL_HTTPPOST_PTRCONTENTS
 (1<<3)

	)

151 
	#CURL_HTTPPOST_BUFFER
 (1<<4)

	)

153 
	#CURL_HTTPPOST_PTRBUFFER
 (1<<5)

	)

156 
	#CURL_HTTPPOST_CALLBACK
 (1<<6)

	)

158 
	#CURL_HTTPPOST_LARGE
 (1<<7)

	)

160 *
showfûíame
;

163 *
u£Ω
;

165 
cuæ_off_t
 
c⁄ã¡Àn
;

172 (*
	tcuæ_¥ogªss_ˇŒback
)(*
	t˛õ¡p
,

173 
	td…ŸÆ
,

174 
	td ow
,

175 
	tu…ŸÆ
,

176 
	tu ow
);

180 (*
	tcuæ_x„röfo_ˇŒback
)(*
	t˛õ¡p
,

181 
	tcuæ_off_t
 
	td…ŸÆ
,

182 
	tcuæ_off_t
 
	td ow
,

183 
	tcuæ_off_t
 
	tu…ŸÆ
,

184 
	tcuæ_off_t
 
	tu ow
);

186 #i‚de‡
CURL_MAX_WRITE_SIZE


193 
	#CURL_MAX_WRITE_SIZE
 16384

	)

196 #i‚de‡
CURL_MAX_HTTP_HEADER


200 
	#CURL_MAX_HTTP_HEADER
 (100*1024)

	)

205 
	#CURL_WRITEFUNC_PAUSE
 0x10000001

	)

207 
	`size_t
 (*
	tcuæ_wrôe_ˇŒback
)(*
	tbuf„r
,

208 
	tsize_t
 
	tsize
,

209 
	tsize_t
 
	tnôems
,

210 *
	tout°ªam
);

216 
CURLFILETYPE_FILE
 = 0,

217 
CURLFILETYPE_DIRECTORY
,

218 
CURLFILETYPE_SYMLINK
,

219 
CURLFILETYPE_DEVICE_BLOCK
,

220 
CURLFILETYPE_DEVICE_CHAR
,

221 
CURLFILETYPE_NAMEDPIPE
,

222 
CURLFILETYPE_SOCKET
,

223 
CURLFILETYPE_DOOR
,

225 
CURLFILETYPE_UNKNOWN


226 } 
	tcuæfûëy≥
;

228 
	#CURLFINFOFLAG_KNOWN_FILENAME
 (1<<0)

	)

229 
	#CURLFINFOFLAG_KNOWN_FILETYPE
 (1<<1)

	)

230 
	#CURLFINFOFLAG_KNOWN_TIME
 (1<<2)

	)

231 
	#CURLFINFOFLAG_KNOWN_PERM
 (1<<3)

	)

232 
	#CURLFINFOFLAG_KNOWN_UID
 (1<<4)

	)

233 
	#CURLFINFOFLAG_KNOWN_GID
 (1<<5)

	)

234 
	#CURLFINFOFLAG_KNOWN_SIZE
 (1<<6)

	)

235 
	#CURLFINFOFLAG_KNOWN_HLINKCOUNT
 (1<<7)

	)

241 
	scuæ_fûeöfo
 {

242 *
fûíame
;

243 
cuæfûëy≥
 
fûëy≥
;

244 
time_t
 
time
;

245 
≥rm
;

246 
uid
;

247 
gid
;

248 
cuæ_off_t
 
size
;

249 
h¨dlöks
;

253 *
time
;

254 *
≥rm
;

255 *
u£r
;

256 *
group
;

257 *
èrgë
;

258 } 
°rögs
;

260 
Êags
;

263 * 
b_d©a
;

264 
size_t
 
b_size
;

265 
size_t
 
b_u£d
;

269 
	#CURL_CHUNK_BGN_FUNC_OK
 0

	)

270 
	#CURL_CHUNK_BGN_FUNC_FAIL
 1

	)

271 
	#CURL_CHUNK_BGN_FUNC_SKIP
 2

	)

276 (*
	tcuæ_chunk_bgn_ˇŒback
)(c⁄° *
	tå™s„r_öfo
,

277 *
	t±r
,

278 
	tªmaös
);

281 
	#CURL_CHUNK_END_FUNC_OK
 0

	)

282 
	#CURL_CHUNK_END_FUNC_FAIL
 1

	)

290 (*
	tcuæ_chunk_íd_ˇŒback
)(*
	t±r
);

293 
	#CURL_FNMATCHFUNC_MATCH
 0

	)

294 
	#CURL_FNMATCHFUNC_NOMATCH
 1

	)

295 
	#CURL_FNMATCHFUNC_FAIL
 2

	)

299 (*
	tcuæ_‚m©ch_ˇŒback
)(*
	t±r
,

300 c⁄° *
	t∑âîn
,

301 c⁄° *
	t°rög
);

304 
	#CURL_SEEKFUNC_OK
 0

	)

305 
	#CURL_SEEKFUNC_FAIL
 1

	)

306 
	#CURL_SEEKFUNC_CANTSEEK
 2

	)

308 (*
	tcuæ_£ek_ˇŒback
)(*
	tö°ªam
,

309 
	tcuæ_off_t
 
	toff£t
,

310 
	t‹igö
);

314 
	#CURL_READFUNC_ABORT
 0x10000000

	)

317 
	#CURL_READFUNC_PAUSE
 0x10000001

	)

319 
	`size_t
 (*
	tcuæ_ªad_ˇŒback
)(*
	tbuf„r
,

320 
	tsize_t
 
	tsize
,

321 
	tsize_t
 
	tnôems
,

322 *
	tö°ªam
);

325 
CURLSOCKTYPE_IPCXN
,

326 
CURLSOCKTYPE_ACCEPT
,

327 
CURLSOCKTYPE_LAST


328 } 
	tcuæsockty≥
;

332 
	#CURL_SOCKOPT_OK
 0

	)

333 
	#CURL_SOCKOPT_ERROR
 1

	)

335 
	#CURL_SOCKOPT_ALREADY_CONNECTED
 2

	)

337 (*
	tcuæ_sock›t_ˇŒback
)(*
	t˛õ¡p
,

338 
	tcuæ_sockë_t
 
	tcuæfd
,

339 
	tcuæsockty≥
 
	tpuΩo£
);

341 
	scuæ_sockaddr
 {

342 
Ámûy
;

343 
sockty≥
;

344 
¥Ÿocﬁ
;

345 
addæí
;

348 
sockaddr
 
addr
;

351 
cuæ_sockë_t


352 (*
	tcuæ_›ísockë_ˇŒback
)(*
	t˛õ¡p
,

353 
	tcuæsockty≥
 
	tpuΩo£
,

354 
	tcuæ_sockaddr
 *
	taddªss
);

357 (*
	tcuæ_˛o£sockë_ˇŒback
)(*
	t˛õ¡p
, 
	tcuæ_sockë_t
 
	tôem
);

360 
CURLIOE_OK
,

361 
CURLIOE_UNKNOWNCMD
,

362 
CURLIOE_FAILRESTART
,

363 
CURLIOE_LAST


364 } 
	tcuæi€º
;

367 
CURLIOCMD_NOP
,

368 
CURLIOCMD_RESTARTREAD
,

369 
CURLIOCMD_LAST


370 } 
	tcuæiocmd
;

372 
	`cuæi€º
 (*
	tcuæ_io˘l_ˇŒback
)(
	tCURL
 *
	th™dÀ
,

373 
	tcmd
,

374 *
	t˛õ¡p
);

382 *(*
	tcuæ_mÆloc_ˇŒback
)(
	tsize_t
 
	tsize
);

383 (*
	tcuæ_‰ì_ˇŒback
)(*
	t±r
);

384 *(*
	tcuæ_ªÆloc_ˇŒback
)(*
	t±r
, 
	tsize_t
 
	tsize
);

385 *(*
	tcuæ_°rdup_ˇŒback
)(c⁄° *
	t°r
);

386 *(*
	tcuæ_ˇŒoc_ˇŒback
)(
	tsize_t
 
	tnmemb
, size_à
	tsize
);

390 
CURLINFO_TEXT
 = 0,

391 
CURLINFO_HEADER_IN
,

392 
CURLINFO_HEADER_OUT
,

393 
CURLINFO_DATA_IN
,

394 
CURLINFO_DATA_OUT
,

395 
CURLINFO_SSL_DATA_IN
,

396 
CURLINFO_SSL_DATA_OUT
,

397 
CURLINFO_END


398 } 
	tcuæ_öfŸy≥
;

400 (*
	tcuæ_debug_ˇŒback
)

401 (
	tCURL
 *
	th™dÀ
,

402 
	tcuæ_öfŸy≥
 
	tty≥
,

403 *
	td©a
,

404 
	tsize_t
 
	tsize
,

405 *
	tu£Ωå
);

415 
CURLE_OK
 = 0,

416 
CURLE_UNSUPPORTED_PROTOCOL
,

417 
CURLE_FAILED_INIT
,

418 
CURLE_URL_MALFORMAT
,

419 
CURLE_NOT_BUILT_IN
,

421 
CURLE_COULDNT_RESOLVE_PROXY
,

422 
CURLE_COULDNT_RESOLVE_HOST
,

423 
CURLE_COULDNT_CONNECT
,

424 
CURLE_FTP_WEIRD_SERVER_REPLY
,

425 
CURLE_REMOTE_ACCESS_DENIED
,

428 
CURLE_FTP_ACCEPT_FAILED
,

430 
CURLE_FTP_WEIRD_PASS_REPLY
,

431 
CURLE_FTP_ACCEPT_TIMEOUT
,

434 
CURLE_FTP_WEIRD_PASV_REPLY
,

435 
CURLE_FTP_WEIRD_227_FORMAT
,

436 
CURLE_FTP_CANT_GET_HOST
,

437 
CURLE_HTTP2
,

440 
CURLE_FTP_COULDNT_SET_TYPE
,

441 
CURLE_PARTIAL_FILE
,

442 
CURLE_FTP_COULDNT_RETR_FILE
,

443 
CURLE_OBSOLETE20
,

444 
CURLE_QUOTE_ERROR
,

445 
CURLE_HTTP_RETURNED_ERROR
,

446 
CURLE_WRITE_ERROR
,

447 
CURLE_OBSOLETE24
,

448 
CURLE_UPLOAD_FAILED
,

449 
CURLE_READ_ERROR
,

450 
CURLE_OUT_OF_MEMORY
,

455 
CURLE_OPERATION_TIMEDOUT
,

456 
CURLE_OBSOLETE29
,

457 
CURLE_FTP_PORT_FAILED
,

458 
CURLE_FTP_COULDNT_USE_REST
,

459 
CURLE_OBSOLETE32
,

460 
CURLE_RANGE_ERROR
,

461 
CURLE_HTTP_POST_ERROR
,

462 
CURLE_SSL_CONNECT_ERROR
,

463 
CURLE_BAD_DOWNLOAD_RESUME
,

464 
CURLE_FILE_COULDNT_READ_FILE
,

465 
CURLE_LDAP_CANNOT_BIND
,

466 
CURLE_LDAP_SEARCH_FAILED
,

467 
CURLE_OBSOLETE40
,

468 
CURLE_FUNCTION_NOT_FOUND
,

469 
CURLE_ABORTED_BY_CALLBACK
,

470 
CURLE_BAD_FUNCTION_ARGUMENT
,

471 
CURLE_OBSOLETE44
,

472 
CURLE_INTERFACE_FAILED
,

473 
CURLE_OBSOLETE46
,

474 
CURLE_TOO_MANY_REDIRECTS
 ,

475 
CURLE_UNKNOWN_OPTION
,

476 
CURLE_TELNET_OPTION_SYNTAX
 ,

477 
CURLE_OBSOLETE50
,

478 
CURLE_PEER_FAILED_VERIFICATION
,

480 
CURLE_GOT_NOTHING
,

481 
CURLE_SSL_ENGINE_NOTFOUND
,

482 
CURLE_SSL_ENGINE_SETFAILED
,

484 
CURLE_SEND_ERROR
,

485 
CURLE_RECV_ERROR
,

486 
CURLE_OBSOLETE57
,

487 
CURLE_SSL_CERTPROBLEM
,

488 
CURLE_SSL_CIPHER
,

489 
CURLE_SSL_CACERT
,

490 
CURLE_BAD_CONTENT_ENCODING
,

491 
CURLE_LDAP_INVALID_URL
,

492 
CURLE_FILESIZE_EXCEEDED
,

493 
CURLE_USE_SSL_FAILED
,

494 
CURLE_SEND_FAIL_REWIND
,

496 
CURLE_SSL_ENGINE_INITFAILED
,

497 
CURLE_LOGIN_DENIED
,

499 
CURLE_TFTP_NOTFOUND
,

500 
CURLE_TFTP_PERM
,

501 
CURLE_REMOTE_DISK_FULL
,

502 
CURLE_TFTP_ILLEGAL
,

503 
CURLE_TFTP_UNKNOWNID
,

504 
CURLE_REMOTE_FILE_EXISTS
,

505 
CURLE_TFTP_NOSUCHUSER
,

506 
CURLE_CONV_FAILED
,

507 
CURLE_CONV_REQD
,

512 
CURLE_SSL_CACERT_BADFILE
,

514 
CURLE_REMOTE_FILE_NOT_FOUND
,

515 
CURLE_SSH
,

519 
CURLE_SSL_SHUTDOWN_FAILED
,

521 
CURLE_AGAIN
,

524 
CURLE_SSL_CRL_BADFILE
,

526 
CURLE_SSL_ISSUER_ERROR
,

528 
CURLE_FTP_PRET_FAILED
,

529 
CURLE_RTSP_CSEQ_ERROR
,

530 
CURLE_RTSP_SESSION_ERROR
,

531 
CURLE_FTP_BAD_FILE_LIST
,

532 
CURLE_CHUNK_FAILED
,

533 
CURLE_NO_CONNECTION_AVAILABLE
,

535 
CURLE_SSL_PINNEDPUBKEYNOTMATCH
,

537 
CURLE_SSL_INVALIDCERTSTATUS
,

538 
CURL_LAST


539 } 
	tCURLcode
;

541 #i‚de‡
CURL_NO_OLDIES


545 
	#CURLE_OBSOLETE16
 
CURLE_HTTP2


	)

548 
	#CURLE_OBSOLETE10
 
CURLE_FTP_ACCEPT_FAILED


	)

549 
	#CURLE_OBSOLETE12
 
CURLE_FTP_ACCEPT_TIMEOUT


	)

552 
	#CURLOPT_ENCODING
 
CURLOPT_ACCEPT_ENCODING


	)

555 
	#CURLE_UNKNOWN_TELNET_OPTION
 
CURLE_UNKNOWN_OPTION


	)

559 
	#CURLE_SSL_PEER_CERTIFICATE
 
CURLE_PEER_FAILED_VERIFICATION


	)

563 
	#CURLE_OBSOLETE
 
CURLE_OBSOLETE50


	)

564 
	#CURLE_BAD_PASSWORD_ENTERED
 
CURLE_OBSOLETE46


	)

565 
	#CURLE_BAD_CALLING_ORDER
 
CURLE_OBSOLETE44


	)

566 
	#CURLE_FTP_USER_PASSWORD_INCORRECT
 
CURLE_OBSOLETE10


	)

567 
	#CURLE_FTP_CANT_RECONNECT
 
CURLE_OBSOLETE16


	)

568 
	#CURLE_FTP_COULDNT_GET_SIZE
 
CURLE_OBSOLETE32


	)

569 
	#CURLE_FTP_COULDNT_SET_ASCII
 
CURLE_OBSOLETE29


	)

570 
	#CURLE_FTP_WEIRD_USER_REPLY
 
CURLE_OBSOLETE12


	)

571 
	#CURLE_FTP_WRITE_ERROR
 
CURLE_OBSOLETE20


	)

572 
	#CURLE_LIBRARY_NOT_FOUND
 
CURLE_OBSOLETE40


	)

573 
	#CURLE_MALFORMAT_USER
 
CURLE_OBSOLETE24


	)

574 
	#CURLE_SHARE_IN_USE
 
CURLE_OBSOLETE57


	)

575 
	#CURLE_URL_MALFORMAT_USER
 
CURLE_NOT_BUILT_IN


	)

577 
	#CURLE_FTP_ACCESS_DENIED
 
CURLE_REMOTE_ACCESS_DENIED


	)

578 
	#CURLE_FTP_COULDNT_SET_BINARY
 
CURLE_FTP_COULDNT_SET_TYPE


	)

579 
	#CURLE_FTP_QUOTE_ERROR
 
CURLE_QUOTE_ERROR


	)

580 
	#CURLE_TFTP_DISKFULL
 
CURLE_REMOTE_DISK_FULL


	)

581 
	#CURLE_TFTP_EXISTS
 
CURLE_REMOTE_FILE_EXISTS


	)

582 
	#CURLE_HTTP_RANGE_ERROR
 
CURLE_RANGE_ERROR


	)

583 
	#CURLE_FTP_SSL_FAILED
 
CURLE_USE_SSL_FAILED


	)

587 
	#CURLE_OPERATION_TIMEOUTED
 
CURLE_OPERATION_TIMEDOUT


	)

589 
	#CURLE_HTTP_NOT_FOUND
 
CURLE_HTTP_RETURNED_ERROR


	)

590 
	#CURLE_HTTP_PORT_FAILED
 
CURLE_INTERFACE_FAILED


	)

591 
	#CURLE_FTP_COULDNT_STOR_FILE
 
CURLE_UPLOAD_FAILED


	)

593 
	#CURLE_FTP_PARTIAL_FILE
 
CURLE_PARTIAL_FILE


	)

594 
	#CURLE_FTP_BAD_DOWNLOAD_RESUME
 
CURLE_BAD_DOWNLOAD_RESUME


	)

599 
	#CURLE_ALREADY_COMPLETE
 99999

	)

602 
	#CURLOPT_FILE
 
CURLOPT_WRITEDATA


	)

603 
	#CURLOPT_INFILE
 
CURLOPT_READDATA


	)

604 
	#CURLOPT_WRITEHEADER
 
CURLOPT_HEADERDATA


	)

608 
	#CURLOPT_WRITEINFO
 
CURLOPT_OBSOLETE40


	)

609 
	#CURLOPT_CLOSEPOLICY
 
CURLOPT_OBSOLETE72


	)

614 
	`CURLcode
 (*
	tcuæ_c⁄v_ˇŒback
)(*
	tbuf„r
, 
	tsize_t
 
	tÀngth
);

616 
	`CURLcode
 (*
	tcuæ_s¶_˘x_ˇŒback
)(
	tCURL
 *
	tcuæ
,

617 *
	ts¶_˘x
,

619 *
	tu£Ωå
);

622 
CURLPROXY_HTTP
 = 0,

624 
CURLPROXY_HTTP_1_0
 = 1,

626 
CURLPROXY_SOCKS4
 = 4,

628 
CURLPROXY_SOCKS5
 = 5,

629 
CURLPROXY_SOCKS4A
 = 6,

630 
CURLPROXY_SOCKS5_HOSTNAME
 = 7

633 } 
	tcuæ_¥oxyty≥
;

652 
	#CURLAUTH_NONE
 (()0)

	)

653 
	#CURLAUTH_BASIC
 ((()1)<<0)

	)

654 
	#CURLAUTH_DIGEST
 ((()1)<<1)

	)

655 
	#CURLAUTH_NEGOTIATE
 ((()1)<<2)

	)

657 
	#CURLAUTH_GSSNEGOTIATE
 
CURLAUTH_NEGOTIATE


	)

658 
	#CURLAUTH_NTLM
 ((()1)<<3)

	)

659 
	#CURLAUTH_DIGEST_IE
 ((()1)<<4)

	)

660 
	#CURLAUTH_NTLM_WB
 ((()1)<<5)

	)

661 
	#CURLAUTH_ONLY
 ((()1)<<31)

	)

662 
	#CURLAUTH_ANY
 (~
CURLAUTH_DIGEST_IE
)

	)

663 
	#CURLAUTH_ANYSAFE
 (~(
CURLAUTH_BASIC
|
CURLAUTH_DIGEST_IE
))

	)

665 
	#CURLSSH_AUTH_ANY
 ~0

	)

666 
	#CURLSSH_AUTH_NONE
 0

	)

667 
	#CURLSSH_AUTH_PUBLICKEY
 (1<<0Ë

	)

668 
	#CURLSSH_AUTH_PASSWORD
 (1<<1Ë

	)

669 
	#CURLSSH_AUTH_HOST
 (1<<2Ë

	)

670 
	#CURLSSH_AUTH_KEYBOARD
 (1<<3Ë

	)

671 
	#CURLSSH_AUTH_AGENT
 (1<<4Ë

	)

672 
	#CURLSSH_AUTH_DEFAULT
 
CURLSSH_AUTH_ANY


	)

674 
	#CURLGSSAPI_DELEGATION_NONE
 0

	)

675 
	#CURLGSSAPI_DELEGATION_POLICY_FLAG
 (1<<0Ë

	)

676 
	#CURLGSSAPI_DELEGATION_FLAG
 (1<<1Ë

	)

678 
	#CURL_ERROR_SIZE
 256

	)

680 
	ecuæ_khty≥
 {

681 
CURLKHTYPE_UNKNOWN
,

682 
CURLKHTYPE_RSA1
,

683 
CURLKHTYPE_RSA
,

684 
CURLKHTYPE_DSS


687 
	scuæ_khkey
 {

688 c⁄° *
key
;

690 
size_t
 
Àn
;

691 
cuæ_khty≥
 
keyty≥
;

696 
	ecuæ_kh°©
 {

697 
CURLKHSTAT_FINE_ADD_TO_FILE
,

698 
CURLKHSTAT_FINE
,

699 
CURLKHSTAT_REJECT
,

700 
CURLKHSTAT_DEFER
,

703 
CURLKHSTAT_LAST


707 
	ecuæ_khm©ch
 {

708 
CURLKHMATCH_OK
,

709 
CURLKHMATCH_MISMATCH
,

710 
CURLKHMATCH_MISSING
,

711 
CURLKHMATCH_LAST


715 (*
	tcuæ_sshkeyˇŒback
Ë(
	tCURL
 *
	tósy
,

716 c⁄° 
	tcuæ_khkey
 *
	tknownkey
,

717 c⁄° 
	tcuæ_khkey
 *
	tfoundkey
,

718 
	tcuæ_khm©ch
,

719 *
	t˛õ¡p
);

723 
CURLUSESSL_NONE
,

724 
CURLUSESSL_TRY
,

725 
CURLUSESSL_CONTROL
,

726 
CURLUSESSL_ALL
,

727 
CURLUSESSL_LAST


728 } 
	tcuæ_u£s¶
;

737 
	#CURLSSLOPT_ALLOW_BEAST
 (1<<0)

	)

741 
	#CURLSSLOPT_NO_REVOKE
 (1<<1)

	)

743 #i‚de‡
CURL_NO_OLDIES


749 
	#CURLFTPSSL_NONE
 
CURLUSESSL_NONE


	)

750 
	#CURLFTPSSL_TRY
 
CURLUSESSL_TRY


	)

751 
	#CURLFTPSSL_CONTROL
 
CURLUSESSL_CONTROL


	)

752 
	#CURLFTPSSL_ALL
 
CURLUSESSL_ALL


	)

753 
	#CURLFTPSSL_LAST
 
CURLUSESSL_LAST


	)

754 
	#cuæ_·ps¶
 
cuæ_u£s¶


	)

759 
CURLFTPSSL_CCC_NONE
,

760 
CURLFTPSSL_CCC_PASSIVE
,

761 
CURLFTPSSL_CCC_ACTIVE
,

762 
CURLFTPSSL_CCC_LAST


763 } 
	tcuæ_·pccc
;

767 
CURLFTPAUTH_DEFAULT
,

768 
CURLFTPAUTH_SSL
,

769 
CURLFTPAUTH_TLS
,

770 
CURLFTPAUTH_LAST


771 } 
	tcuæ_·∑uth
;

775 
CURLFTP_CREATE_DIR_NONE
,

776 
CURLFTP_CREATE_DIR
,

779 
CURLFTP_CREATE_DIR_RETRY
,

781 
CURLFTP_CREATE_DIR_LAST


782 } 
	tcuæ_·p¸óãdú
;

786 
CURLFTPMETHOD_DEFAULT
,

787 
CURLFTPMETHOD_MULTICWD
,

788 
CURLFTPMETHOD_NOCWD
,

789 
CURLFTPMETHOD_SINGLECWD
,

790 
CURLFTPMETHOD_LAST


791 } 
	tcuæ_·pmëhod
;

794 
	#CURLHEADER_UNIFIED
 0

	)

795 
	#CURLHEADER_SEPARATE
 (1<<0)

	)

798 
	#CURLPROTO_HTTP
 (1<<0)

	)

799 
	#CURLPROTO_HTTPS
 (1<<1)

	)

800 
	#CURLPROTO_FTP
 (1<<2)

	)

801 
	#CURLPROTO_FTPS
 (1<<3)

	)

802 
	#CURLPROTO_SCP
 (1<<4)

	)

803 
	#CURLPROTO_SFTP
 (1<<5)

	)

804 
	#CURLPROTO_TELNET
 (1<<6)

	)

805 
	#CURLPROTO_LDAP
 (1<<7)

	)

806 
	#CURLPROTO_LDAPS
 (1<<8)

	)

807 
	#CURLPROTO_DICT
 (1<<9)

	)

808 
	#CURLPROTO_FILE
 (1<<10)

	)

809 
	#CURLPROTO_TFTP
 (1<<11)

	)

810 
	#CURLPROTO_IMAP
 (1<<12)

	)

811 
	#CURLPROTO_IMAPS
 (1<<13)

	)

812 
	#CURLPROTO_POP3
 (1<<14)

	)

813 
	#CURLPROTO_POP3S
 (1<<15)

	)

814 
	#CURLPROTO_SMTP
 (1<<16)

	)

815 
	#CURLPROTO_SMTPS
 (1<<17)

	)

816 
	#CURLPROTO_RTSP
 (1<<18)

	)

817 
	#CURLPROTO_RTMP
 (1<<19)

	)

818 
	#CURLPROTO_RTMPT
 (1<<20)

	)

819 
	#CURLPROTO_RTMPE
 (1<<21)

	)

820 
	#CURLPROTO_RTMPTE
 (1<<22)

	)

821 
	#CURLPROTO_RTMPS
 (1<<23)

	)

822 
	#CURLPROTO_RTMPTS
 (1<<24)

	)

823 
	#CURLPROTO_GOPHER
 (1<<25)

	)

824 
	#CURLPROTO_SMB
 (1<<26)

	)

825 
	#CURLPROTO_SMBS
 (1<<27)

	)

826 
	#CURLPROTO_ALL
 (~0Ë

	)

830 
	#CURLOPTTYPE_LONG
 0

	)

831 
	#CURLOPTTYPE_OBJECTPOINT
 10000

	)

832 
	#CURLOPTTYPE_STRINGPOINT
 10000

	)

833 
	#CURLOPTTYPE_FUNCTIONPOINT
 20000

	)

834 
	#CURLOPTTYPE_OFF_T
 30000

	)

842 #ifde‡
CINIT


843 #unde‡
CINIT


846 #ifde‡
CURL_ISOCPP


847 
	#CINIT
(
«
,
t
,
nu
Ë
CURLOPT_
 ##Ç®
CURLOPTTYPE_
 ##Å + 
	)
nu

850 
	#LONG
 
CURLOPTTYPE_LONG


	)

851 
	#OBJECTPOINT
 
CURLOPTTYPE_OBJECTPOINT


	)

852 
	#STRINGPOINT
 
CURLOPTTYPE_OBJECTPOINT


	)

853 
	#FUNCTIONPOINT
 
CURLOPTTYPE_FUNCTIONPOINT


	)

854 
	#OFF_T
 
CURLOPTTYPE_OFF_T


	)

855 
	#CINIT
(
«me
,
ty≥
,
numbî
Ë
CURLOPT_
Çamêty≥ + 
	)
number

866 
	`CINIT
(
WRITEDATA
, 
OBJECTPOINT
, 1),

869 
	`CINIT
(
URL
, 
STRINGPOINT
, 2),

872 
	`CINIT
(
PORT
, 
LONG
, 3),

875 
	`CINIT
(
PROXY
, 
STRINGPOINT
, 4),

878 
	`CINIT
(
USERPWD
, 
STRINGPOINT
, 5),

881 
	`CINIT
(
PROXYUSERPWD
, 
STRINGPOINT
, 6),

884 
	`CINIT
(
RANGE
, 
STRINGPOINT
, 7),

889 
	`CINIT
(
READDATA
, 
OBJECTPOINT
, 9),

893 
	`CINIT
(
ERRORBUFFER
, 
OBJECTPOINT
, 10),

897 
	`CINIT
(
WRITEFUNCTION
, 
FUNCTIONPOINT
, 11),

901 
	`CINIT
(
READFUNCTION
, 
FUNCTIONPOINT
, 12),

904 
	`CINIT
(
TIMEOUT
, 
LONG
, 13),

915 
	`CINIT
(
INFILESIZE
, 
LONG
, 14),

918 
	`CINIT
(
POSTFIELDS
, 
OBJECTPOINT
, 15),

921 
	`CINIT
(
REFERER
, 
STRINGPOINT
, 16),

925 
	`CINIT
(
FTPPORT
, 
STRINGPOINT
, 17),

928 
	`CINIT
(
USERAGENT
, 
STRINGPOINT
, 18),

937 
	`CINIT
(
LOW_SPEED_LIMIT
, 
LONG
, 19),

940 
	`CINIT
(
LOW_SPEED_TIME
, 
LONG
, 20),

948 
	`CINIT
(
RESUME_FROM
, 
LONG
, 21),

951 
	`CINIT
(
COOKIE
, 
STRINGPOINT
, 22),

955 
	`CINIT
(
HTTPHEADER
, 
OBJECTPOINT
, 23),

958 
	`CINIT
(
HTTPPOST
, 
OBJECTPOINT
, 24),

961 
	`CINIT
(
SSLCERT
, 
STRINGPOINT
, 25),

964 
	`CINIT
(
KEYPASSWD
, 
STRINGPOINT
, 26),

967 
	`CINIT
(
CRLF
, 
LONG
, 27),

970 
	`CINIT
(
QUOTE
, 
OBJECTPOINT
, 28),

974 
	`CINIT
(
HEADERDATA
, 
OBJECTPOINT
, 29),

978 
	`CINIT
(
COOKIEFILE
, 
STRINGPOINT
, 31),

982 
	`CINIT
(
SSLVERSION
, 
LONG
, 32),

985 
	`CINIT
(
TIMECONDITION
, 
LONG
, 33),

989 
	`CINIT
(
TIMEVALUE
, 
LONG
, 34),

997 
	`CINIT
(
CUSTOMREQUEST
, 
STRINGPOINT
, 36),

1000 
	`CINIT
(
STDERR
, 
OBJECTPOINT
, 37),

1005 
	`CINIT
(
POSTQUOTE
, 
OBJECTPOINT
, 39),

1007 
	`CINIT
(
OBSOLETE40
, 
OBJECTPOINT
, 40),

1009 
	`CINIT
(
VERBOSE
, 
LONG
, 41),

1010 
	`CINIT
(
HEADER
, 
LONG
, 42),

1011 
	`CINIT
(
NOPROGRESS
, 
LONG
, 43),

1012 
	`CINIT
(
NOBODY
, 
LONG
, 44),

1013 
	`CINIT
(
FAILONERROR
, 
LONG
, 45),

1014 
	`CINIT
(
UPLOAD
, 
LONG
, 46),

1015 
	`CINIT
(
POST
, 
LONG
, 47),

1016 
	`CINIT
(
DIRLISTONLY
, 
LONG
, 48),

1018 
	`CINIT
(
APPEND
, 
LONG
, 50),

1022 
	`CINIT
(
NETRC
, 
LONG
, 51),

1024 
	`CINIT
(
FOLLOWLOCATION
, 
LONG
, 52),

1026 
	`CINIT
(
TRANSFERTEXT
, 
LONG
, 53),

1027 
	`CINIT
(
PUT
, 
LONG
, 54),

1035 
	`CINIT
(
PROGRESSFUNCTION
, 
FUNCTIONPOINT
, 56),

1039 
	`CINIT
(
PROGRESSDATA
, 
OBJECTPOINT
, 57),

1040 
	#CURLOPT_XFERINFODATA
 
CURLOPT_PROGRESSDATA


	)

1043 
	`CINIT
(
AUTOREFERER
, 
LONG
, 58),

1047 
	`CINIT
(
PROXYPORT
, 
LONG
, 59),

1050 
	`CINIT
(
POSTFIELDSIZE
, 
LONG
, 60),

1053 
	`CINIT
(
HTTPPROXYTUNNEL
, 
LONG
, 61),

1056 
	`CINIT
(
INTERFACE
, 
STRINGPOINT
, 62),

1061 
	`CINIT
(
KRBLEVEL
, 
STRINGPOINT
, 63),

1064 
	`CINIT
(
SSL_VERIFYPEER
, 
LONG
, 64),

1068 
	`CINIT
(
CAINFO
, 
STRINGPOINT
, 65),

1074 
	`CINIT
(
MAXREDIRS
, 
LONG
, 68),

1078 
	`CINIT
(
FILETIME
, 
LONG
, 69),

1081 
	`CINIT
(
TELNETOPTIONS
, 
OBJECTPOINT
, 70),

1084 
	`CINIT
(
MAXCONNECTS
, 
LONG
, 71),

1086 
	`CINIT
(
OBSOLETE72
, 
LONG
, 72),

1093 
	`CINIT
(
FRESH_CONNECT
, 
LONG
, 74),

1098 
	`CINIT
(
FORBID_REUSE
, 
LONG
, 75),

1102 
	`CINIT
(
RANDOM_FILE
, 
STRINGPOINT
, 76),

1105 
	`CINIT
(
EGDSOCKET
, 
STRINGPOINT
, 77),

1109 
	`CINIT
(
CONNECTTIMEOUT
, 
LONG
, 78),

1113 
	`CINIT
(
HEADERFUNCTION
, 
FUNCTIONPOINT
, 79),

1118 
	`CINIT
(
HTTPGET
, 
LONG
, 80),

1123 
	`CINIT
(
SSL_VERIFYHOST
, 
LONG
, 81),

1127 
	`CINIT
(
COOKIEJAR
, 
STRINGPOINT
, 82),

1130 
	`CINIT
(
SSL_CIPHER_LIST
, 
STRINGPOINT
, 83),

1134 
	`CINIT
(
HTTP_VERSION
, 
LONG
, 84),

1139 
	`CINIT
(
FTP_USE_EPSV
, 
LONG
, 85),

1142 
	`CINIT
(
SSLCERTTYPE
, 
STRINGPOINT
, 86),

1145 
	`CINIT
(
SSLKEY
, 
STRINGPOINT
, 87),

1148 
	`CINIT
(
SSLKEYTYPE
, 
STRINGPOINT
, 88),

1151 
	`CINIT
(
SSLENGINE
, 
STRINGPOINT
, 89),

1156 
	`CINIT
(
SSLENGINE_DEFAULT
, 
LONG
, 90),

1159 
	`CINIT
(
DNS_USE_GLOBAL_CACHE
, 
LONG
, 91),

1162 
	`CINIT
(
DNS_CACHE_TIMEOUT
, 
LONG
, 92),

1165 
	`CINIT
(
PREQUOTE
, 
OBJECTPOINT
, 93),

1168 
	`CINIT
(
DEBUGFUNCTION
, 
FUNCTIONPOINT
, 94),

1171 
	`CINIT
(
DEBUGDATA
, 
OBJECTPOINT
, 95),

1174 
	`CINIT
(
COOKIESESSION
, 
LONG
, 96),

1178 
	`CINIT
(
CAPATH
, 
STRINGPOINT
, 97),

1181 
	`CINIT
(
BUFFERSIZE
, 
LONG
, 98),

1186 
	`CINIT
(
NOSIGNAL
, 
LONG
, 99),

1189 
	`CINIT
(
SHARE
, 
OBJECTPOINT
, 100),

1193 
	`CINIT
(
PROXYTYPE
, 
LONG
, 101),

1198 
	`CINIT
(
ACCEPT_ENCODING
, 
STRINGPOINT
, 102),

1201 
	`CINIT
(
PRIVATE
, 
OBJECTPOINT
, 103),

1204 
	`CINIT
(
HTTP200ALIASES
, 
OBJECTPOINT
, 104),

1209 
	`CINIT
(
UNRESTRICTED_AUTH
, 
LONG
, 105),

1214 
	`CINIT
(
FTP_USE_EPRT
, 
LONG
, 106),

1219 
	`CINIT
(
HTTPAUTH
, 
LONG
, 107),

1224 
	`CINIT
(
SSL_CTX_FUNCTION
, 
FUNCTIONPOINT
, 108),

1228 
	`CINIT
(
SSL_CTX_DATA
, 
OBJECTPOINT
, 109),

1234 
	`CINIT
(
FTP_CREATE_MISSING_DIRS
, 
LONG
, 110),

1239 
	`CINIT
(
PROXYAUTH
, 
LONG
, 111),

1245 
	`CINIT
(
FTP_RESPONSE_TIMEOUT
, 
LONG
, 112),

1246 
	#CURLOPT_SERVER_RESPONSE_TIMEOUT
 
CURLOPT_FTP_RESPONSE_TIMEOUT


	)

1251 
	`CINIT
(
IPRESOLVE
, 
LONG
, 113),

1258 
	`CINIT
(
MAXFILESIZE
, 
LONG
, 114),

1263 
	`CINIT
(
INFILESIZE_LARGE
, 
OFF_T
, 115),

1268 
	`CINIT
(
RESUME_FROM_LARGE
, 
OFF_T
, 116),

1273 
	`CINIT
(
MAXFILESIZE_LARGE
, 
OFF_T
, 117),

1279 
	`CINIT
(
NETRC_FILE
, 
STRINGPOINT
, 118),

1286 
	`CINIT
(
USE_SSL
, 
LONG
, 119),

1289 
	`CINIT
(
POSTFIELDSIZE_LARGE
, 
OFF_T
, 120),

1292 
	`CINIT
(
TCP_NODELAY
, 
LONG
, 121),

1312 
	`CINIT
(
FTPSSLAUTH
, 
LONG
, 129),

1314 
	`CINIT
(
IOCTLFUNCTION
, 
FUNCTIONPOINT
, 130),

1315 
	`CINIT
(
IOCTLDATA
, 
OBJECTPOINT
, 131),

1322 
	`CINIT
(
FTP_ACCOUNT
, 
STRINGPOINT
, 134),

1325 
	`CINIT
(
COOKIELIST
, 
STRINGPOINT
, 135),

1328 
	`CINIT
(
IGNORE_CONTENT_LENGTH
, 
LONG
, 136),

1334 
	`CINIT
(
FTP_SKIP_PASV_IP
, 
LONG
, 137),

1338 
	`CINIT
(
FTP_FILEMETHOD
, 
LONG
, 138),

1341 
	`CINIT
(
LOCALPORT
, 
LONG
, 139),

1346 
	`CINIT
(
LOCALPORTRANGE
, 
LONG
, 140),

1350 
	`CINIT
(
CONNECT_ONLY
, 
LONG
, 141),

1354 
	`CINIT
(
CONV_FROM_NETWORK_FUNCTION
, 
FUNCTIONPOINT
, 142),

1358 
	`CINIT
(
CONV_TO_NETWORK_FUNCTION
, 
FUNCTIONPOINT
, 143),

1363 
	`CINIT
(
CONV_FROM_UTF8_FUNCTION
, 
FUNCTIONPOINT
, 144),

1367 
	`CINIT
(
MAX_SEND_SPEED_LARGE
, 
OFF_T
, 145),

1368 
	`CINIT
(
MAX_RECV_SPEED_LARGE
, 
OFF_T
, 146),

1371 
	`CINIT
(
FTP_ALTERNATIVE_TO_USER
, 
STRINGPOINT
, 147),

1374 
	`CINIT
(
SOCKOPTFUNCTION
, 
FUNCTIONPOINT
, 148),

1375 
	`CINIT
(
SOCKOPTDATA
, 
OBJECTPOINT
, 149),

1379 
	`CINIT
(
SSL_SESSIONID_CACHE
, 
LONG
, 150),

1382 
	`CINIT
(
SSH_AUTH_TYPES
, 
LONG
, 151),

1385 
	`CINIT
(
SSH_PUBLIC_KEYFILE
, 
STRINGPOINT
, 152),

1386 
	`CINIT
(
SSH_PRIVATE_KEYFILE
, 
STRINGPOINT
, 153),

1389 
	`CINIT
(
FTP_SSL_CCC
, 
LONG
, 154),

1392 
	`CINIT
(
TIMEOUT_MS
, 
LONG
, 155),

1393 
	`CINIT
(
CONNECTTIMEOUT_MS
, 
LONG
, 156),

1397 
	`CINIT
(
HTTP_TRANSFER_DECODING
, 
LONG
, 157),

1398 
	`CINIT
(
HTTP_CONTENT_DECODING
, 
LONG
, 158),

1402 
	`CINIT
(
NEW_FILE_PERMS
, 
LONG
, 159),

1403 
	`CINIT
(
NEW_DIRECTORY_PERMS
, 
LONG
, 160),

1407 
	`CINIT
(
POSTREDIR
, 
LONG
, 161),

1410 
	`CINIT
(
SSH_HOST_PUBLIC_KEY_MD5
, 
STRINGPOINT
, 162),

1416 
	`CINIT
(
OPENSOCKETFUNCTION
, 
FUNCTIONPOINT
, 163),

1417 
	`CINIT
(
OPENSOCKETDATA
, 
OBJECTPOINT
, 164),

1420 
	`CINIT
(
COPYPOSTFIELDS
, 
OBJECTPOINT
, 165),

1423 
	`CINIT
(
PROXY_TRANSFER_MODE
, 
LONG
, 166),

1426 
	`CINIT
(
SEEKFUNCTION
, 
FUNCTIONPOINT
, 167),

1427 
	`CINIT
(
SEEKDATA
, 
OBJECTPOINT
, 168),

1430 
	`CINIT
(
CRLFILE
, 
STRINGPOINT
, 169),

1433 
	`CINIT
(
ISSUERCERT
, 
STRINGPOINT
, 170),

1436 
	`CINIT
(
ADDRESS_SCOPE
, 
LONG
, 171),

1440 
	`CINIT
(
CERTINFO
, 
LONG
, 172),

1443 
	`CINIT
(
USERNAME
, 
STRINGPOINT
, 173),

1444 
	`CINIT
(
PASSWORD
, 
STRINGPOINT
, 174),

1447 
	`CINIT
(
PROXYUSERNAME
, 
STRINGPOINT
, 175),

1448 
	`CINIT
(
PROXYPASSWORD
, 
STRINGPOINT
, 176),

1457 
	`CINIT
(
NOPROXY
, 
STRINGPOINT
, 177),

1460 
	`CINIT
(
TFTP_BLKSIZE
, 
LONG
, 178),

1463 
	`CINIT
(
SOCKS5_GSSAPI_SERVICE
, 
STRINGPOINT
, 179),

1466 
	`CINIT
(
SOCKS5_GSSAPI_NEC
, 
LONG
, 180),

1472 
	`CINIT
(
PROTOCOLS
, 
LONG
, 181),

1478 
	`CINIT
(
REDIR_PROTOCOLS
, 
LONG
, 182),

1481 
	`CINIT
(
SSH_KNOWNHOSTS
, 
STRINGPOINT
, 183),

1485 
	`CINIT
(
SSH_KEYFUNCTION
, 
FUNCTIONPOINT
, 184),

1488 
	`CINIT
(
SSH_KEYDATA
, 
OBJECTPOINT
, 185),

1491 
	`CINIT
(
MAIL_FROM
, 
STRINGPOINT
, 186),

1494 
	`CINIT
(
MAIL_RCPT
, 
OBJECTPOINT
, 187),

1497 
	`CINIT
(
FTP_USE_PRET
, 
LONG
, 188),

1500 
	`CINIT
(
RTSP_REQUEST
, 
LONG
, 189),

1503 
	`CINIT
(
RTSP_SESSION_ID
, 
STRINGPOINT
, 190),

1506 
	`CINIT
(
RTSP_STREAM_URI
, 
STRINGPOINT
, 191),

1509 
	`CINIT
(
RTSP_TRANSPORT
, 
STRINGPOINT
, 192),

1512 
	`CINIT
(
RTSP_CLIENT_CSEQ
, 
LONG
, 193),

1515 
	`CINIT
(
RTSP_SERVER_CSEQ
, 
LONG
, 194),

1518 
	`CINIT
(
INTERLEAVEDATA
, 
OBJECTPOINT
, 195),

1521 
	`CINIT
(
INTERLEAVEFUNCTION
, 
FUNCTIONPOINT
, 196),

1524 
	`CINIT
(
WILDCARDMATCH
, 
LONG
, 197),

1528 
	`CINIT
(
CHUNK_BGN_FUNCTION
, 
FUNCTIONPOINT
, 198),

1532 
	`CINIT
(
CHUNK_END_FUNCTION
, 
FUNCTIONPOINT
, 199),

1535 
	`CINIT
(
FNMATCH_FUNCTION
, 
FUNCTIONPOINT
, 200),

1538 
	`CINIT
(
CHUNK_DATA
, 
OBJECTPOINT
, 201),

1541 
	`CINIT
(
FNMATCH_DATA
, 
OBJECTPOINT
, 202),

1544 
	`CINIT
(
RESOLVE
, 
OBJECTPOINT
, 203),

1547 
	`CINIT
(
TLSAUTH_USERNAME
, 
STRINGPOINT
, 204),

1550 
	`CINIT
(
TLSAUTH_PASSWORD
, 
STRINGPOINT
, 205),

1553 
	`CINIT
(
TLSAUTH_TYPE
, 
STRINGPOINT
, 206),

1565 
	`CINIT
(
TRANSFER_ENCODING
, 
LONG
, 207),

1569 
	`CINIT
(
CLOSESOCKETFUNCTION
, 
FUNCTIONPOINT
, 208),

1570 
	`CINIT
(
CLOSESOCKETDATA
, 
OBJECTPOINT
, 209),

1573 
	`CINIT
(
GSSAPI_DELEGATION
, 
LONG
, 210),

1576 
	`CINIT
(
DNS_SERVERS
, 
STRINGPOINT
, 211),

1580 
	`CINIT
(
ACCEPTTIMEOUT_MS
, 
LONG
, 212),

1583 
	`CINIT
(
TCP_KEEPALIVE
, 
LONG
, 213),

1586 
	`CINIT
(
TCP_KEEPIDLE
, 
LONG
, 214),

1587 
	`CINIT
(
TCP_KEEPINTVL
, 
LONG
, 215),

1590 
	`CINIT
(
SSL_OPTIONS
, 
LONG
, 216),

1593 
	`CINIT
(
MAIL_AUTH
, 
STRINGPOINT
, 217),

1596 
	`CINIT
(
SASL_IR
, 
LONG
, 218),

1601 
	`CINIT
(
XFERINFOFUNCTION
, 
FUNCTIONPOINT
, 219),

1604 
	`CINIT
(
XOAUTH2_BEARER
, 
STRINGPOINT
, 220),

1609 
	`CINIT
(
DNS_INTERFACE
, 
STRINGPOINT
, 221),

1613 
	`CINIT
(
DNS_LOCAL_IP4
, 
STRINGPOINT
, 222),

1617 
	`CINIT
(
DNS_LOCAL_IP6
, 
STRINGPOINT
, 223),

1620 
	`CINIT
(
LOGIN_OPTIONS
, 
STRINGPOINT
, 224),

1623 
	`CINIT
(
SSL_ENABLE_NPN
, 
LONG
, 225),

1626 
	`CINIT
(
SSL_ENABLE_ALPN
, 
LONG
, 226),

1630 
	`CINIT
(
EXPECT_100_TIMEOUT_MS
, 
LONG
, 227),

1634 
	`CINIT
(
PROXYHEADER
, 
OBJECTPOINT
, 228),

1637 
	`CINIT
(
HEADEROPT
, 
LONG
, 229),

1641 
	`CINIT
(
PINNEDPUBLICKEY
, 
STRINGPOINT
, 230),

1644 
	`CINIT
(
UNIX_SOCKET_PATH
, 
STRINGPOINT
, 231),

1647 
	`CINIT
(
SSL_VERIFYSTATUS
, 
LONG
, 232),

1650 
	`CINIT
(
SSL_FALSESTART
, 
LONG
, 233),

1653 
	`CINIT
(
PATH_AS_IS
, 
LONG
, 234),

1656 
	`CINIT
(
PROXY_SERVICE_NAME
, 
STRINGPOINT
, 235),

1659 
	`CINIT
(
SERVICE_NAME
, 
STRINGPOINT
, 236),

1662 
	`CINIT
(
PIPEWAIT
, 
LONG
, 237),

1665 
	`CINIT
(
DEFAULT_PROTOCOL
, 
STRINGPOINT
, 238),

1668 
	`CINIT
(
STREAM_WEIGHT
, 
LONG
, 239),

1671 
	`CINIT
(
STREAM_DEPENDS
, 
OBJECTPOINT
, 240),

1674 
	`CINIT
(
STREAM_DEPENDS_E
, 
OBJECTPOINT
, 241),

1676 
CURLOPT_LASTENTRY


1677 } 
	tCURL›ti⁄
;

1679 #i‚de‡
CURL_NO_OLDIES


1686 
	#CURLOPT_POST301
 
CURLOPT_POSTREDIR


	)

1691 
	#CURLOPT_SSLKEYPASSWD
 
CURLOPT_KEYPASSWD


	)

1692 
	#CURLOPT_FTPAPPEND
 
CURLOPT_APPEND


	)

1693 
	#CURLOPT_FTPLISTONLY
 
CURLOPT_DIRLISTONLY


	)

1694 
	#CURLOPT_FTP_SSL
 
CURLOPT_USE_SSL


	)

1698 
	#CURLOPT_SSLCERTPASSWD
 
CURLOPT_KEYPASSWD


	)

1699 
	#CURLOPT_KRB4LEVEL
 
CURLOPT_KRBLEVEL


	)

1703 #unde‡
CURLOPT_DNS_USE_GLOBAL_CACHE


1710 
	#CURL_IPRESOLVE_WHATEVER
 0

	)

1712 
	#CURL_IPRESOLVE_V4
 1

	)

1713 
	#CURL_IPRESOLVE_V6
 2

	)

1716 
	#CURLOPT_RTSPHEADER
 
CURLOPT_HTTPHEADER


	)

1720 
CURL_HTTP_VERSION_NONE
,

1723 
CURL_HTTP_VERSION_1_0
,

1724 
CURL_HTTP_VERSION_1_1
,

1725 
CURL_HTTP_VERSION_2_0
,

1726 
CURL_HTTP_VERSION_2TLS
,

1728 
CURL_HTTP_VERSION_LAST


1734 
	#CURL_HTTP_VERSION_2
 
CURL_HTTP_VERSION_2_0


	)

1740 
CURL_RTSPREQ_NONE
,

1741 
CURL_RTSPREQ_OPTIONS
,

1742 
CURL_RTSPREQ_DESCRIBE
,

1743 
CURL_RTSPREQ_ANNOUNCE
,

1744 
CURL_RTSPREQ_SETUP
,

1745 
CURL_RTSPREQ_PLAY
,

1746 
CURL_RTSPREQ_PAUSE
,

1747 
CURL_RTSPREQ_TEARDOWN
,

1748 
CURL_RTSPREQ_GET_PARAMETER
,

1749 
CURL_RTSPREQ_SET_PARAMETER
,

1750 
CURL_RTSPREQ_RECORD
,

1751 
CURL_RTSPREQ_RECEIVE
,

1752 
CURL_RTSPREQ_LAST


1756 
	eCURL_NETRC_OPTION
 {

1757 
CURL_NETRC_IGNORED
,

1759 
CURL_NETRC_OPTIONAL
,

1761 
CURL_NETRC_REQUIRED
,

1764 
CURL_NETRC_LAST


1768 
CURL_SSLVERSION_DEFAULT
,

1769 
CURL_SSLVERSION_TLSv1
,

1770 
CURL_SSLVERSION_SSLv2
,

1771 
CURL_SSLVERSION_SSLv3
,

1772 
CURL_SSLVERSION_TLSv1_0
,

1773 
CURL_SSLVERSION_TLSv1_1
,

1774 
CURL_SSLVERSION_TLSv1_2
,

1776 
CURL_SSLVERSION_LAST


1779 
	eCURL_TLSAUTH
 {

1780 
CURL_TLSAUTH_NONE
,

1781 
CURL_TLSAUTH_SRP
,

1782 
CURL_TLSAUTH_LAST


1790 
	#CURL_REDIR_GET_ALL
 0

	)

1791 
	#CURL_REDIR_POST_301
 1

	)

1792 
	#CURL_REDIR_POST_302
 2

	)

1793 
	#CURL_REDIR_POST_303
 4

	)

1794 
	#CURL_REDIR_POST_ALL
 \

1795 (
CURL_REDIR_POST_301
|
CURL_REDIR_POST_302
|
CURL_REDIR_POST_303
)

	)

1798 
CURL_TIMECOND_NONE
,

1800 
CURL_TIMECOND_IFMODSINCE
,

1801 
CURL_TIMECOND_IFUNMODSINCE
,

1802 
CURL_TIMECOND_LASTMOD
,

1804 
CURL_TIMECOND_LAST


1805 } 
	tcuæ_TimeC⁄d
;

1810 
CURL_EXTERN
 (
cuæ_°ªquÆ
)(c⁄° *
s1
, c⁄° *
s2
);

1811 
CURL_EXTERN
 (
cuæ_°∫equÆ
)(c⁄° *
s1
, c⁄° *
s2
, 
size_t
 
n
);

1814 #ifde‡
CFINIT


1815 #unde‡
CFINIT


1818 #ifde‡
CURL_ISOCPP


1819 
	#CFINIT
(
«me
Ë
CURLFORM_
 ## 
	)
name

1822 
	#CFINIT
(
«me
Ë
CURLFORM_
 
	)
name

1826 
	`CFINIT
(
NOTHING
),

1829 
	`CFINIT
(
COPYNAME
),

1830 
	`CFINIT
(
PTRNAME
),

1831 
	`CFINIT
(
NAMELENGTH
),

1832 
	`CFINIT
(
COPYCONTENTS
),

1833 
	`CFINIT
(
PTRCONTENTS
),

1834 
	`CFINIT
(
CONTENTSLENGTH
),

1835 
	`CFINIT
(
FILECONTENT
),

1836 
	`CFINIT
(
ARRAY
),

1837 
	`CFINIT
(
OBSOLETE
),

1838 
	`CFINIT
(
FILE
),

1840 
	`CFINIT
(
BUFFER
),

1841 
	`CFINIT
(
BUFFERPTR
),

1842 
	`CFINIT
(
BUFFERLENGTH
),

1844 
	`CFINIT
(
CONTENTTYPE
),

1845 
	`CFINIT
(
CONTENTHEADER
),

1846 
	`CFINIT
(
FILENAME
),

1847 
	`CFINIT
(
END
),

1848 
	`CFINIT
(
OBSOLETE2
),

1850 
	`CFINIT
(
STREAM
),

1851 
	`CFINIT
(
CONTENTLEN
),

1853 
CURLFORM_LASTENTRY


1854 } 
	tCURLf‹m›ti⁄
;

1856 #unde‡
CFINIT


1859 
	scuæ_f‹ms
 {

1860 
CURLf‹m›ti⁄
 
›ti⁄
;

1861 c⁄° *
vÆue
;

1881 
CURL_FORMADD_OK
,

1883 
CURL_FORMADD_MEMORY
,

1884 
CURL_FORMADD_OPTION_TWICE
,

1885 
CURL_FORMADD_NULL
,

1886 
CURL_FORMADD_UNKNOWN_OPTION
,

1887 
CURL_FORMADD_INCOMPLETE
,

1888 
CURL_FORMADD_ILLEGAL_ARRAY
,

1889 
CURL_FORMADD_DISABLED
,

1891 
CURL_FORMADD_LAST


1892 } 
	tCURLFORMcode
;

1903 
CURL_EXTERN
 
CURLFORMcode
 
	`cuæ_f‹madd
(
cuæ_hâµo°
 **
hâµo°
,

1904 
cuæ_hâµo°
 **
œ°_po°
,

1915 
	`size_t
 (*
	tcuæ_f‹mgë_ˇŒback
)(*
	t¨g
, c⁄° *
	tbuf
,

1916 
	tsize_t
 
	tÀn
);

1928 
CURL_EXTERN
 
	`cuæ_f‹mgë
(
cuæ_hâµo°
 *
f‹m
, *
¨g
,

1929 
cuæ_f‹mgë_ˇŒback
 
≠≥nd
);

1937 
CURL_EXTERN
 
	`cuæ_f‹m‰ì
(
cuæ_hâµo°
 *
f‹m
);

1947 
CURL_EXTERN
 *
	`cuæ_gëív
(c⁄° *
v¨übÀ
);

1956 
CURL_EXTERN
 *
	`cuæ_vîsi⁄
();

1967 
CURL_EXTERN
 *
	`cuæ_ósy_esˇ≥
(
CURL
 *
h™dÀ
,

1968 c⁄° *
°rög
,

1969 
Àngth
);

1972 
CURL_EXTERN
 *
	`cuæ_esˇ≥
(c⁄° *
°rög
,

1973 
Àngth
);

1987 
CURL_EXTERN
 *
	`cuæ_ósy_u√sˇ≥
(
CURL
 *
h™dÀ
,

1988 c⁄° *
°rög
,

1989 
Àngth
,

1990 *
ouéígth
);

1993 
CURL_EXTERN
 *
	`cuæ_u√sˇ≥
(c⁄° *
°rög
,

1994 
Àngth
);

2004 
CURL_EXTERN
 
	`cuæ_‰ì
(*
p
);

2016 
CURL_EXTERN
 
CURLcode
 
	`cuæ_globÆ_öô
(
Êags
);

2031 
CURL_EXTERN
 
CURLcode
 
	`cuæ_globÆ_öô_mem
(
Êags
,

2032 
cuæ_mÆloc_ˇŒback
 
m
,

2033 
cuæ_‰ì_ˇŒback
 
f
,

2034 
cuæ_ªÆloc_ˇŒback
 
r
,

2035 
cuæ_°rdup_ˇŒback
 
s
,

2036 
cuæ_ˇŒoc_ˇŒback
 
c
);

2046 
CURL_EXTERN
 
	`cuæ_globÆ_˛ónup
();

2049 
	scuæ_¶i°
 {

2050 *
d©a
;

2051 
cuæ_¶i°
 *
√xt
;

2062 
CURL_EXTERN
 
cuæ_¶i°
 *
	`cuæ_¶i°_≠≥nd
(curl_slist *,

2072 
CURL_EXTERN
 
	`cuæ_¶i°_‰ì_Æl
(
cuæ_¶i°
 *);

2083 
CURL_EXTERN
 
time_t
 
	`cuæ_gëd©e
(c⁄° *
p
, c⁄°Åime_à*
unu£d
);

2087 
	scuæ_˚πöfo
 {

2088 
num_of_˚πs
;

2089 
cuæ_¶i°
 **
˚πöfo
;

2096 
CURLSSLBACKEND_NONE
 = 0,

2097 
CURLSSLBACKEND_OPENSSL
 = 1,

2098 
CURLSSLBACKEND_GNUTLS
 = 2,

2099 
CURLSSLBACKEND_NSS
 = 3,

2100 
CURLSSLBACKEND_OBSOLETE4
 = 4,

2101 
CURLSSLBACKEND_GSKIT
 = 5,

2102 
CURLSSLBACKEND_POLARSSL
 = 6,

2103 
CURLSSLBACKEND_CYASSL
 = 7,

2104 
CURLSSLBACKEND_SCHANNEL
 = 8,

2105 
CURLSSLBACKEND_DARWINSSL
 = 9,

2106 
CURLSSLBACKEND_AXTLS
 = 10,

2107 
CURLSSLBACKEND_MBEDTLS
 = 11

2108 } 
	tcuæ_s¶backíd
;

2113 
	scuæ_és£ssi⁄öfo
 {

2114 
cuæ_s¶backíd
 
backíd
;

2115 *
öã∫Æs
;

2118 
	#CURLINFO_STRING
 0x100000

	)

2119 
	#CURLINFO_LONG
 0x200000

	)

2120 
	#CURLINFO_DOUBLE
 0x300000

	)

2121 
	#CURLINFO_SLIST
 0x400000

	)

2122 
	#CURLINFO_SOCKET
 0x500000

	)

2123 
	#CURLINFO_MASK
 0x0fffff

	)

2124 
	#CURLINFO_TYPEMASK
 0xf00000

	)

2127 
CURLINFO_NONE
,

2128 
CURLINFO_EFFECTIVE_URL
 = 
CURLINFO_STRING
 + 1,

2129 
CURLINFO_RESPONSE_CODE
 = 
CURLINFO_LONG
 + 2,

2130 
CURLINFO_TOTAL_TIME
 = 
CURLINFO_DOUBLE
 + 3,

2131 
CURLINFO_NAMELOOKUP_TIME
 = 
CURLINFO_DOUBLE
 + 4,

2132 
CURLINFO_CONNECT_TIME
 = 
CURLINFO_DOUBLE
 + 5,

2133 
CURLINFO_PRETRANSFER_TIME
 = 
CURLINFO_DOUBLE
 + 6,

2134 
CURLINFO_SIZE_UPLOAD
 = 
CURLINFO_DOUBLE
 + 7,

2135 
CURLINFO_SIZE_DOWNLOAD
 = 
CURLINFO_DOUBLE
 + 8,

2136 
CURLINFO_SPEED_DOWNLOAD
 = 
CURLINFO_DOUBLE
 + 9,

2137 
CURLINFO_SPEED_UPLOAD
 = 
CURLINFO_DOUBLE
 + 10,

2138 
CURLINFO_HEADER_SIZE
 = 
CURLINFO_LONG
 + 11,

2139 
CURLINFO_REQUEST_SIZE
 = 
CURLINFO_LONG
 + 12,

2140 
CURLINFO_SSL_VERIFYRESULT
 = 
CURLINFO_LONG
 + 13,

2141 
CURLINFO_FILETIME
 = 
CURLINFO_LONG
 + 14,

2142 
CURLINFO_CONTENT_LENGTH_DOWNLOAD
 = 
CURLINFO_DOUBLE
 + 15,

2143 
CURLINFO_CONTENT_LENGTH_UPLOAD
 = 
CURLINFO_DOUBLE
 + 16,

2144 
CURLINFO_STARTTRANSFER_TIME
 = 
CURLINFO_DOUBLE
 + 17,

2145 
CURLINFO_CONTENT_TYPE
 = 
CURLINFO_STRING
 + 18,

2146 
CURLINFO_REDIRECT_TIME
 = 
CURLINFO_DOUBLE
 + 19,

2147 
CURLINFO_REDIRECT_COUNT
 = 
CURLINFO_LONG
 + 20,

2148 
CURLINFO_PRIVATE
 = 
CURLINFO_STRING
 + 21,

2149 
CURLINFO_HTTP_CONNECTCODE
 = 
CURLINFO_LONG
 + 22,

2150 
CURLINFO_HTTPAUTH_AVAIL
 = 
CURLINFO_LONG
 + 23,

2151 
CURLINFO_PROXYAUTH_AVAIL
 = 
CURLINFO_LONG
 + 24,

2152 
CURLINFO_OS_ERRNO
 = 
CURLINFO_LONG
 + 25,

2153 
CURLINFO_NUM_CONNECTS
 = 
CURLINFO_LONG
 + 26,

2154 
CURLINFO_SSL_ENGINES
 = 
CURLINFO_SLIST
 + 27,

2155 
CURLINFO_COOKIELIST
 = 
CURLINFO_SLIST
 + 28,

2156 
CURLINFO_LASTSOCKET
 = 
CURLINFO_LONG
 + 29,

2157 
CURLINFO_FTP_ENTRY_PATH
 = 
CURLINFO_STRING
 + 30,

2158 
CURLINFO_REDIRECT_URL
 = 
CURLINFO_STRING
 + 31,

2159 
CURLINFO_PRIMARY_IP
 = 
CURLINFO_STRING
 + 32,

2160 
CURLINFO_APPCONNECT_TIME
 = 
CURLINFO_DOUBLE
 + 33,

2161 
CURLINFO_CERTINFO
 = 
CURLINFO_SLIST
 + 34,

2162 
CURLINFO_CONDITION_UNMET
 = 
CURLINFO_LONG
 + 35,

2163 
CURLINFO_RTSP_SESSION_ID
 = 
CURLINFO_STRING
 + 36,

2164 
CURLINFO_RTSP_CLIENT_CSEQ
 = 
CURLINFO_LONG
 + 37,

2165 
CURLINFO_RTSP_SERVER_CSEQ
 = 
CURLINFO_LONG
 + 38,

2166 
CURLINFO_RTSP_CSEQ_RECV
 = 
CURLINFO_LONG
 + 39,

2167 
CURLINFO_PRIMARY_PORT
 = 
CURLINFO_LONG
 + 40,

2168 
CURLINFO_LOCAL_IP
 = 
CURLINFO_STRING
 + 41,

2169 
CURLINFO_LOCAL_PORT
 = 
CURLINFO_LONG
 + 42,

2170 
CURLINFO_TLS_SESSION
 = 
CURLINFO_SLIST
 + 43,

2171 
CURLINFO_ACTIVESOCKET
 = 
CURLINFO_SOCKET
 + 44,

2174 
CURLINFO_LASTONE
 = 44

2175 } 
	tCURLINFO
;

2179 
	#CURLINFO_HTTP_CODE
 
CURLINFO_RESPONSE_CODE


	)

2182 
CURLCLOSEPOLICY_NONE
,

2184 
CURLCLOSEPOLICY_OLDEST
,

2185 
CURLCLOSEPOLICY_LEAST_RECENTLY_USED
,

2186 
CURLCLOSEPOLICY_LEAST_TRAFFIC
,

2187 
CURLCLOSEPOLICY_SLOWEST
,

2188 
CURLCLOSEPOLICY_CALLBACK
,

2190 
CURLCLOSEPOLICY_LAST


2191 } 
	tcuæ_˛o£pﬁicy
;

2193 
	#CURL_GLOBAL_SSL
 (1<<0)

	)

2194 
	#CURL_GLOBAL_WIN32
 (1<<1)

	)

2195 
	#CURL_GLOBAL_ALL
 (
CURL_GLOBAL_SSL
|
CURL_GLOBAL_WIN32
)

	)

2196 
	#CURL_GLOBAL_NOTHING
 0

	)

2197 
	#CURL_GLOBAL_DEFAULT
 
CURL_GLOBAL_ALL


	)

2198 
	#CURL_GLOBAL_ACK_EINTR
 (1<<2)

	)

2207 
CURL_LOCK_DATA_NONE
 = 0,

2212 
CURL_LOCK_DATA_SHARE
,

2213 
CURL_LOCK_DATA_COOKIE
,

2214 
CURL_LOCK_DATA_DNS
,

2215 
CURL_LOCK_DATA_SSL_SESSION
,

2216 
CURL_LOCK_DATA_CONNECT
,

2217 
CURL_LOCK_DATA_LAST


2218 } 
	tcuæ_lock_d©a
;

2222 
CURL_LOCK_ACCESS_NONE
 = 0,

2223 
CURL_LOCK_ACCESS_SHARED
 = 1,

2224 
CURL_LOCK_ACCESS_SINGLE
 = 2,

2225 
CURL_LOCK_ACCESS_LAST


2226 } 
	tcuæ_lock_ac˚ss
;

2228 (*
	tcuæ_lock_fun˘i⁄
)(
	tCURL
 *
	th™dÀ
,

2229 
	tcuæ_lock_d©a
 
	td©a
,

2230 
	tcuæ_lock_ac˚ss
 
	tlockty≥
,

2231 *
	tu£Ωå
);

2232 (*
	tcuæ_u∆ock_fun˘i⁄
)(
	tCURL
 *
	th™dÀ
,

2233 
	tcuæ_lock_d©a
 
	td©a
,

2234 *
	tu£Ωå
);

2236 
	tCURLSH
;

2239 
CURLSHE_OK
,

2240 
CURLSHE_BAD_OPTION
,

2241 
CURLSHE_IN_USE
,

2242 
CURLSHE_INVALID
,

2243 
CURLSHE_NOMEM
,

2244 
CURLSHE_NOT_BUILT_IN
,

2245 
CURLSHE_LAST


2246 } 
	tCURLSHcode
;

2249 
CURLSHOPT_NONE
,

2250 
CURLSHOPT_SHARE
,

2251 
CURLSHOPT_UNSHARE
,

2252 
CURLSHOPT_LOCKFUNC
,

2253 
CURLSHOPT_UNLOCKFUNC
,

2254 
CURLSHOPT_USERDATA
,

2256 
CURLSHOPT_LAST


2257 } 
	tCURLSH›ti⁄
;

2259 
CURL_EXTERN
 
CURLSH
 *
	`cuæ_sh¨e_öô
();

2260 
CURL_EXTERN
 
CURLSHcode
 
	`cuæ_sh¨e_£t›t
(
CURLSH
 *, 
CURLSH›ti⁄
 
›ti⁄
, ...);

2261 
CURL_EXTERN
 
CURLSHcode
 
	`cuæ_sh¨e_˛ónup
(
CURLSH
 *);

2268 
CURLVERSION_FIRST
,

2269 
CURLVERSION_SECOND
,

2270 
CURLVERSION_THIRD
,

2271 
CURLVERSION_FOURTH
,

2272 
CURLVERSION_LAST


2273 } 
	tCURLvîsi⁄
;

2280 
	#CURLVERSION_NOW
 
CURLVERSION_FOURTH


	)

2283 
CURLvîsi⁄
 
age
;

2284 c⁄° *
vîsi⁄
;

2285 
vîsi⁄_num
;

2286 c⁄° *
ho°
;

2287 
„©uªs
;

2288 c⁄° *
s¶_vîsi⁄
;

2289 
s¶_vîsi⁄_num
;

2290 c⁄° *
libz_vîsi⁄
;

2292 c⁄° * c⁄° *
¥Ÿocﬁs
;

2295 c⁄° *
¨es
;

2296 
¨es_num
;

2299 c⁄° *
libidn
;

2304 
ic⁄v_vî_num
;

2306 c⁄° *
libssh_vîsi⁄
;

2308 } 
	tcuæ_vîsi⁄_öfo_d©a
;

2310 
	#CURL_VERSION_IPV6
 (1<<0Ë

	)

2311 
	#CURL_VERSION_KERBEROS4
 (1<<1Ë

	)

2313 
	#CURL_VERSION_SSL
 (1<<2Ë

	)

2314 
	#CURL_VERSION_LIBZ
 (1<<3Ë

	)

2315 
	#CURL_VERSION_NTLM
 (1<<4Ë

	)

2316 
	#CURL_VERSION_GSSNEGOTIATE
 (1<<5Ë

	)

2318 
	#CURL_VERSION_DEBUG
 (1<<6Ë

	)

2319 
	#CURL_VERSION_ASYNCHDNS
 (1<<7Ë

	)

2320 
	#CURL_VERSION_SPNEGO
 (1<<8Ë

	)

2321 
	#CURL_VERSION_LARGEFILE
 (1<<9Ë

	)

2322 
	#CURL_VERSION_IDN
 (1<<10Ë

	)

2324 
	#CURL_VERSION_SSPI
 (1<<11Ë

	)

2325 
	#CURL_VERSION_CONV
 (1<<12Ë

	)

2326 
	#CURL_VERSION_CURLDEBUG
 (1<<13Ë

	)

2327 
	#CURL_VERSION_TLSAUTH_SRP
 (1<<14Ë

	)

2328 
	#CURL_VERSION_NTLM_WB
 (1<<15Ë

	)

2330 
	#CURL_VERSION_HTTP2
 (1<<16Ë

	)

2331 
	#CURL_VERSION_GSSAPI
 (1<<17Ë

	)

2332 
	#CURL_VERSION_KERBEROS5
 (1<<18Ë

	)

2333 
	#CURL_VERSION_UNIX_SOCKETS
 (1<<19Ë

	)

2334 
	#CURL_VERSION_PSL
 (1<<20Ë

	)

2345 
CURL_EXTERN
 
cuæ_vîsi⁄_öfo_d©a
 *
	`cuæ_vîsi⁄_öfo
(
CURLvîsi⁄
);

2356 
CURL_EXTERN
 c⁄° *
	`cuæ_ósy_°ªº‹
(
CURLcode
);

2367 
CURL_EXTERN
 c⁄° *
	`cuæ_sh¨e_°ªº‹
(
CURLSHcode
);

2378 
CURL_EXTERN
 
CURLcode
 
	`cuæ_ósy_∑u£
(
CURL
 *
h™dÀ
, 
bômask
);

2380 
	#CURLPAUSE_RECV
 (1<<0)

	)

2381 
	#CURLPAUSE_RECV_CONT
 (0)

	)

2383 
	#CURLPAUSE_SEND
 (1<<2)

	)

2384 
	#CURLPAUSE_SEND_CONT
 (0)

	)

2386 
	#CURLPAUSE_ALL
 (
CURLPAUSE_RECV
|
CURLPAUSE_SEND
)

	)

2387 
	#CURLPAUSE_CONT
 (
CURLPAUSE_RECV_CONT
|
CURLPAUSE_SEND_CONT
)

	)

2389 #ifde‡ 
__˝lu•lus


2390 
	}
}

2395 
	~"ósy.h
"

2396 
	~"mu…i.h
"

2399 #i‡
deföed
(
__GNUC__
Ë&& deföed(
__GNUC_MINOR__
) && \

2400 ((
__GNUC__
 > 4Ë|| (__GNUC__ =4 && 
__GNUC_MINOR__
 >= 3)) && \

2401 !
deföed
(
__˝lu•lus
Ë&& !
	$deföed
(
CURL_DISABLE_TYPECHECK
)

2402 
	~"ty≥check-gcc.h
"

2404 #i‡
	`deföed
(
__STDC__
) && (__STDC__ >= 1)

2408 
	#cuæ_ósy_£t›t
(
h™dÀ
,
›t
,
∑øm
Ë
	`cuæ_ósy_£t›t
(h™dÀ,›t,∑øm)

	)

2409 
	#cuæ_ósy_gëöfo
(
h™dÀ
,
öfo
,
¨g
Ë
	`cuæ_ósy_gëöfo
(h™dÀ,öfo,¨g)

	)

2410 
	#cuæ_sh¨e_£t›t
(
sh¨e
,
›t
,
∑øm
Ë
	`cuæ_sh¨e_£t›t
(sh¨e,›t,∑øm)

	)

2411 
	#cuæ_mu…i_£t›t
(
h™dÀ
,
›t
,
∑øm
Ë
	`cuæ_mu…i_£t›t
(h™dÀ,›t,∑øm)

	)

	@/var/www/html/debian/gateway/include/curl/curlbuild.h

2 #i‚de‡
__CURL_CURLBUILD_H


3 
	#__CURL_CURLBUILD_H


	)

61 #ifde‡
CURL_SIZEOF_LONG


63 
Eº‹
 
	gCompû©i⁄_ab‹ãd_CURL_SIZEOF_LONG_Æªady_deföed


66 #ifde‡
CURL_TYPEOF_CURL_SOCKLEN_T


68 
Eº‹
 
	gCompû©i⁄_ab‹ãd_CURL_TYPEOF_CURL_SOCKLEN_T_Æªady_deföed


71 #ifde‡
CURL_SIZEOF_CURL_SOCKLEN_T


73 
Eº‹
 
	gCompû©i⁄_ab‹ãd_CURL_SIZEOF_CURL_SOCKLEN_T_Æªady_deföed


76 #ifde‡
CURL_TYPEOF_CURL_OFF_T


78 
Eº‹
 
	gCompû©i⁄_ab‹ãd_CURL_TYPEOF_CURL_OFF_T_Æªady_deföed


81 #ifde‡
CURL_FORMAT_CURL_OFF_T


83 
Eº‹
 
	gCompû©i⁄_ab‹ãd_CURL_FORMAT_CURL_OFF_T_Æªady_deföed


86 #ifde‡
CURL_FORMAT_CURL_OFF_TU


88 
Eº‹
 
	gCompû©i⁄_ab‹ãd_CURL_FORMAT_CURL_OFF_TU_Æªady_deföed


91 #ifde‡
CURL_FORMAT_OFF_T


93 
Eº‹
 
	gCompû©i⁄_ab‹ãd_CURL_FORMAT_OFF_T_Æªady_deföed


96 #ifde‡
CURL_SIZEOF_CURL_OFF_T


98 
Eº‹
 
	gCompû©i⁄_ab‹ãd_CURL_SIZEOF_CURL_OFF_T_Æªady_deföed


101 #ifde‡
CURL_SUFFIX_CURL_OFF_T


103 
Eº‹
 
	gCompû©i⁄_ab‹ãd_CURL_SUFFIX_CURL_OFF_T_Æªady_deföed


106 #ifde‡
CURL_SUFFIX_CURL_OFF_TU


108 
Eº‹
 
	gCompû©i⁄_ab‹ãd_CURL_SUFFIX_CURL_OFF_TU_Æªady_deföed


118 #ifde‡
CURL_PULL_WS2TCPIP_H


119 #i‚de‡
WIN32_LEAN_AND_MEAN


120 
	#WIN32_LEAN_AND_MEAN


	)

122 
	~<wödows.h
>

123 
	~<wösock2.h
>

124 
	~<ws2t˝ù.h
>

129 
	#CURL_PULL_SYS_TYPES_H
 1

	)

130 #ifde‡
CURL_PULL_SYS_TYPES_H


131 
	~<sys/ty≥s.h
>

137 #ifde‡
CURL_PULL_STDINT_H


138 
	~<°döt.h
>

144 #ifde‡
CURL_PULL_INTTYPES_H


145 
	~<öây≥s.h
>

150 
	#CURL_PULL_SYS_SOCKET_H
 1

	)

151 #ifde‡
CURL_PULL_SYS_SOCKET_H


152 
	~<sys/sockë.h
>

158 #ifde‡
CURL_PULL_SYS_POLL_H


159 
	~<sys/pﬁl.h
>

163 
	#CURL_SIZEOF_LONG
 8

	)

166 
	#CURL_TYPEOF_CURL_SOCKLEN_T
 
sockÀn_t


	)

169 
	#CURL_SIZEOF_CURL_SOCKLEN_T
 4

	)

172 
CURL_TYPEOF_CURL_SOCKLEN_T
 
	tcuæ_sockÀn_t
;

175 
	#CURL_TYPEOF_CURL_OFF_T
 

	)

178 
CURL_TYPEOF_CURL_OFF_T
 
	tcuæ_off_t
;

181 
	#CURL_FORMAT_CURL_OFF_T
 "ld"

	)

184 
	#CURL_FORMAT_CURL_OFF_TU
 "lu"

	)

187 
	#CURL_FORMAT_OFF_T
 "%ld"

	)

190 
	#CURL_SIZEOF_CURL_OFF_T
 8

	)

193 
	#CURL_SUFFIX_CURL_OFF_T
 
L


	)

196 
	#CURL_SUFFIX_CURL_OFF_TU
 
UL


	)

	@/var/www/html/debian/gateway/include/curl/curlrules.h

1 #i‚de‡
__CURL_CURLRULES_H


2 
	#__CURL_CURLRULES_H


	)

78 #i‚de‡
CURL_SIZEOF_LONG


80 
Eº‹
 
	gCompû©i⁄_ab‹ãd_CURL_SIZEOF_LONG_is_missög


83 #i‚de‡
CURL_TYPEOF_CURL_SOCKLEN_T


85 
Eº‹
 
	gCompû©i⁄_ab‹ãd_CURL_TYPEOF_CURL_SOCKLEN_T_is_missög


88 #i‚de‡
CURL_SIZEOF_CURL_SOCKLEN_T


90 
Eº‹
 
	gCompû©i⁄_ab‹ãd_CURL_SIZEOF_CURL_SOCKLEN_T_is_missög


93 #i‚de‡
CURL_TYPEOF_CURL_OFF_T


95 
Eº‹
 
	gCompû©i⁄_ab‹ãd_CURL_TYPEOF_CURL_OFF_T_is_missög


98 #i‚de‡
CURL_FORMAT_CURL_OFF_T


100 
Eº‹
 
	gCompû©i⁄_ab‹ãd_CURL_FORMAT_CURL_OFF_T_is_missög


103 #i‚de‡
CURL_FORMAT_CURL_OFF_TU


105 
Eº‹
 
	gCompû©i⁄_ab‹ãd_CURL_FORMAT_CURL_OFF_TU_is_missög


108 #i‚de‡
CURL_FORMAT_OFF_T


110 
Eº‹
 
	gCompû©i⁄_ab‹ãd_CURL_FORMAT_OFF_T_is_missög


113 #i‚de‡
CURL_SIZEOF_CURL_OFF_T


115 
Eº‹
 
	gCompû©i⁄_ab‹ãd_CURL_SIZEOF_CURL_OFF_T_is_missög


118 #i‚de‡
CURL_SUFFIX_CURL_OFF_T


120 
Eº‹
 
	gCompû©i⁄_ab‹ãd_CURL_SUFFIX_CURL_OFF_T_is_missög


123 #i‚de‡
CURL_SUFFIX_CURL_OFF_TU


125 
Eº‹
 
	gCompû©i⁄_ab‹ãd_CURL_SUFFIX_CURL_OFF_TU_is_missög


132 
	#CuæchkszEQ
(
t
, 
s
Ë—Ë=†? 1 : -1

	)

134 
	#CuæchkszGE
(
t1
, 
t2
Ë—1Ë>—2Ë? 1 : -1

	)

142 
	t__cuæ_ruÀ_01__


143 [
CuæchkszEQ
(, 
CURL_SIZEOF_LONG
)];

152 
	t__cuæ_ruÀ_02__


153 [
CuæchkszEQ
(
cuæ_off_t
, 
CURL_SIZEOF_CURL_OFF_T
)];

162 
	t__cuæ_ruÀ_03__


163 [
CuæchkszGE
(
cuæ_off_t
, )];

172 
	t__cuæ_ruÀ_04__


173 [
CuæchkszEQ
(
cuæ_sockÀn_t
, 
CURL_SIZEOF_CURL_SOCKLEN_T
)];

182 
	t__cuæ_ruÀ_05__


183 [
CuæchkszGE
(
cuæ_sockÀn_t
, )];

204 #i‡
deföed
(
__STDC__
Ë|| deföed(
_MSC_VER
Ë|| deföed(
__˝lu•lus
) || \

205 
deföed
(
__HP_aCC
Ë|| deföed(
__BORLANDC__
Ë|| deföed(
__LCC__
) || \

206 
deföed
(
__POCC__
Ë|| deföed(
__SALFORDC__
Ë|| deföed(
__HIGHC__
) || \

207 
	$deföed
(
__ILEC400__
)

209 
	#CURL_ISOCPP


	)

212 #unde‡
CURL_ISOCPP


219 #i‡
	`deföed
(
__BORLANDC__
) && (__BORLANDC__ == 0x0551)

220 
	#__CURL_OFF_T_C_HLPR2
(
x
Ë
	)
x

221 
	#__CURL_OFF_T_C_HLPR1
(
x
Ë
	`__CURL_OFF_T_C_HLPR2
(x)

	)

222 
	#CURL_OFF_T_C
(
VÆ
Ë
	`__CURL_OFF_T_C_HLPR1
(Val) ## \

223 
	`__CURL_OFF_T_C_HLPR1
(
CURL_SUFFIX_CURL_OFF_T
)

	)

224 
	#CURL_OFF_TU_C
(
VÆ
Ë
	`__CURL_OFF_T_C_HLPR1
(Val) ## \

225 
	`__CURL_OFF_T_C_HLPR1
(
CURL_SUFFIX_CURL_OFF_TU
)

	)

227 #ifde‡
CURL_ISOCPP


228 
	#__CURL_OFF_T_C_HLPR2
(
VÆ
,
Suffix
ËVÆ ## 
	)
Suffix

230 
	#__CURL_OFF_T_C_HLPR2
(
VÆ
,
Suffix
ËVÆ 
	)
Suffix

232 
	#__CURL_OFF_T_C_HLPR1
(
VÆ
,
Suffix
Ë
	`__CURL_OFF_T_C_HLPR2
(VÆ,Suffix)

	)

233 
	#CURL_OFF_T_C
(
VÆ
Ë
	`__CURL_OFF_T_C_HLPR1
(VÆ,
CURL_SUFFIX_CURL_OFF_T
)

	)

234 
	#CURL_OFF_TU_C
(
VÆ
Ë
	`__CURL_OFF_T_C_HLPR1
(VÆ,
CURL_SUFFIX_CURL_OFF_TU
)

	)

241 #unde‡
CuæchkszEQ


242 #unde‡
CuæchkszGE


248 #unde‡
CURL_PULL_WS2TCPIP_H


249 #unde‡
CURL_PULL_SYS_TYPES_H


250 #unde‡
CURL_PULL_SYS_SOCKET_H


251 #unde‡
CURL_PULL_SYS_POLL_H


252 #unde‡
CURL_PULL_STDINT_H


253 #unde‡
CURL_PULL_INTTYPES_H


255 #unde‡
CURL_TYPEOF_CURL_SOCKLEN_T


256 #unde‡
CURL_TYPEOF_CURL_OFF_T


258 #ifde‡
CURL_NO_OLDIES


259 #unde‡
CURL_FORMAT_OFF_T


	@/var/www/html/debian/gateway/include/curl/curlver.h

1 #i‚de‡
__CURL_CURLVER_H


2 
	#__CURL_CURLVER_H


	)

29 
	#LIBCURL_COPYRIGHT
 "1996 - 2015 D™õ»Sãnbîg, <d™õl@haxx.£>."

	)

33 
	#LIBCURL_VERSION
 "7.47.0"

	)

37 
	#LIBCURL_VERSION_MAJOR
 7

	)

38 
	#LIBCURL_VERSION_MINOR
 47

	)

39 
	#LIBCURL_VERSION_PATCH
 0

	)

60 
	#LIBCURL_VERSION_NUM
 0x072f00

	)

71 
	#LIBCURL_TIMESTAMP
 "Wed J™ 27 07:32:44 UTC 2016"

	)

73 
	#CURL_VERSION_BITS
(
x
,
y
,
z
Ë((x)<<16|(y)<<8|z)

	)

74 
	#CURL_AT_LEAST_VERSION
(
x
,
y
,
z
) \

75 (
LIBCURL_VERSION_NUM
 >
	`CURL_VERSION_BITS
(
x
, 
y
, 
z
))

	)

	@/var/www/html/debian/gateway/include/curl/easy.h

1 #i‚de‡
__CURL_EASY_H


2 
	#__CURL_EASY_H


	)

24 #ifde‡ 
__˝lu•lus


28 
CURL_EXTERN
 
CURL
 *
cuæ_ósy_öô
();

29 
CURL_EXTERN
 
CURLcode
 
cuæ_ósy_£t›t
(
CURL
 *
cuæ
, 
CURL›ti⁄
 
›ti⁄
, ...);

30 
CURL_EXTERN
 
CURLcode
 
cuæ_ósy_≥rf‹m
(
CURL
 *
cuæ
);

31 
CURL_EXTERN
 
cuæ_ósy_˛ónup
(
CURL
 *
cuæ
);

46 
CURL_EXTERN
 
CURLcode
 
cuæ_ósy_gëöfo
(
CURL
 *
cuæ
, 
CURLINFO
 
öfo
, ...);

61 
CURL_EXTERN
 
CURL
* 
cuæ_ósy_duph™dÀ
(CURL *
cuæ
);

74 
CURL_EXTERN
 
cuæ_ósy_ª£t
(
CURL
 *
cuæ
);

84 
CURL_EXTERN
 
CURLcode
 
cuæ_ósy_ªcv
(
CURL
 *
cuæ
, *
buf„r
, 
size_t
 
buÊí
,

85 
size_t
 *
n
);

95 
CURL_EXTERN
 
CURLcode
 
cuæ_ósy_£nd
(
CURL
 *
cuæ
, c⁄° *
buf„r
,

96 
size_t
 
buÊí
, size_à*
n
);

98 #ifde‡ 
__˝lu•lus


	@/var/www/html/debian/gateway/include/curl/mprintf.h

1 #i‚de‡
__CURL_MPRINTF_H


2 
	#__CURL_MPRINTF_H


	)

25 
	~<°d¨g.h
>

26 
	~<°dio.h
>

28 
	~"cuæ.h
"

30 #ifde‡ 
__˝lu•lus


34 
CURL_EXTERN
 
cuæ_m¥ötf
(c⁄° *
f‹m©
, ...);

35 
CURL_EXTERN
 
cuæ_mÂrötf
(
FILE
 *
fd
, c⁄° *
f‹m©
, ...);

36 
CURL_EXTERN
 
cuæ_m•rötf
(*
buf„r
, c⁄° *
f‹m©
, ...);

37 
CURL_EXTERN
 
cuæ_m¢¥ötf
(*
buf„r
, 
size_t
 
maxÀngth
,

38 c⁄° *
f‹m©
, ...);

39 
CURL_EXTERN
 
cuæ_mv¥ötf
(c⁄° *
f‹m©
, 
va_li°
 
¨gs
);

40 
CURL_EXTERN
 
cuæ_mvÂrötf
(
FILE
 *
fd
, c⁄° *
f‹m©
, 
va_li°
 
¨gs
);

41 
CURL_EXTERN
 
cuæ_mv•rötf
(*
buf„r
, c⁄° *
f‹m©
, 
va_li°
 
¨gs
);

42 
CURL_EXTERN
 
cuæ_mv¢¥ötf
(*
buf„r
, 
size_t
 
maxÀngth
,

43 c⁄° *
f‹m©
, 
va_li°
 
¨gs
);

44 
CURL_EXTERN
 *
cuæ_m≠rötf
(c⁄° *
f‹m©
, ...);

45 
CURL_EXTERN
 *
cuæ_mv≠rötf
(c⁄° *
f‹m©
, 
va_li°
 
¨gs
);

47 #ifde‡
_MPRINTF_REPLACE


48 #unde‡
¥ötf


49 #unde‡
Ârötf


50 #unde‡
•rötf


51 #unde‡
v•rötf


52 #unde‡
¢¥ötf


53 #unde‡
v¥ötf


54 #unde‡
vÂrötf


55 #unde‡
v¢¥ötf


56 #unde‡
≠rötf


57 #unde‡
v≠rötf


58 
	#¥ötf
 
cuæ_m¥ötf


	)

59 
	#Ârötf
 
cuæ_mÂrötf


	)

60 
	#•rötf
 
cuæ_m•rötf


	)

61 
	#v•rötf
 
cuæ_mv•rötf


	)

62 
	#¢¥ötf
 
cuæ_m¢¥ötf


	)

63 
	#v¥ötf
 
cuæ_mv¥ötf


	)

64 
	#vÂrötf
 
cuæ_mvÂrötf


	)

65 
	#v¢¥ötf
 
cuæ_mv¢¥ötf


	)

66 
	#≠rötf
 
cuæ_m≠rötf


	)

67 
	#v≠rötf
 
cuæ_mv≠rötf


	)

70 #ifde‡ 
__˝lu•lus


	@/var/www/html/debian/gateway/include/curl/multi.h

1 #i‚de‡
__CURL_MULTI_H


2 
	#__CURL_MULTI_H


	)

49 
	~"cuæ.h
"

51 #ifde‡ 
__˝lu•lus


55 
	tCURLM
;

58 
CURLM_CALL_MULTI_PERFORM
 = -1,

60 
CURLM_OK
,

61 
CURLM_BAD_HANDLE
,

62 
CURLM_BAD_EASY_HANDLE
,

63 
CURLM_OUT_OF_MEMORY
,

64 
CURLM_INTERNAL_ERROR
,

65 
CURLM_BAD_SOCKET
,

66 
CURLM_UNKNOWN_OPTION
,

67 
CURLM_ADDED_ALREADY
,

69 
CURLM_LAST


70 } 
	tCURLMcode
;

75 
	#CURLM_CALL_MULTI_SOCKET
 
CURLM_CALL_MULTI_PERFORM


	)

78 
	#CURLPIPE_NOTHING
 0L

	)

79 
	#CURLPIPE_HTTP1
 1L

	)

80 
	#CURLPIPE_MULTIPLEX
 2L

	)

83 
CURLMSG_NONE
,

84 
CURLMSG_DONE
,

86 
CURLMSG_LAST


87 } 
	tCURLMSG
;

89 
	sCURLMsg
 {

90 
CURLMSG
 
msg
;

91 
CURL
 *
ósy_h™dÀ
;

93 *
wh©evî
;

94 
CURLcode
 
ªsu…
;

95 } 
d©a
;

97 
CURLMsg
 
	tCURLMsg
;

102 
	#CURL_WAIT_POLLIN
 0x0001

	)

103 
	#CURL_WAIT_POLLPRI
 0x0002

	)

104 
	#CURL_WAIT_POLLOUT
 0x0004

	)

106 
	scuæ_waôfd
 {

107 
cuæ_sockë_t
 
fd
;

108 
evíts
;

109 
ªvíts
;

119 
CURL_EXTERN
 
CURLM
 *
cuæ_mu…i_öô
();

128 
CURL_EXTERN
 
CURLMcode
 
cuæ_mu…i_add_h™dÀ
(
CURLM
 *
mu…i_h™dÀ
,

129 
CURL
 *
cuæ_h™dÀ
);

138 
CURL_EXTERN
 
CURLMcode
 
cuæ_mu…i_ªmove_h™dÀ
(
CURLM
 *
mu…i_h™dÀ
,

139 
CURL
 *
cuæ_h™dÀ
);

150 
CURL_EXTERN
 
CURLMcode
 
cuæ_mu…i_fd£t
(
CURLM
 *
mu…i_h™dÀ
,

151 
fd_£t
 *
ªad_fd_£t
,

152 
fd_£t
 *
wrôe_fd_£t
,

153 
fd_£t
 *
exc_fd_£t
,

154 *
max_fd
);

164 
CURL_EXTERN
 
CURLMcode
 
cuæ_mu…i_waô
(
CURLM
 *
mu…i_h™dÀ
,

165 
cuæ_waôfd
 
exåa_fds
[],

166 
exåa_nfds
,

167 
timeout_ms
,

168 *
ªt
);

186 
CURL_EXTERN
 
CURLMcode
 
cuæ_mu…i_≥rf‹m
(
CURLM
 *
mu…i_h™dÀ
,

187 *
ru¬ög_h™dÀs
);

199 
CURL_EXTERN
 
CURLMcode
 
cuæ_mu…i_˛ónup
(
CURLM
 *
mu…i_h™dÀ
);

229 
CURL_EXTERN
 
CURLMsg
 *
cuæ_mu…i_öfo_ªad
(
CURLM
 *
mu…i_h™dÀ
,

230 *
msgs_ö_queue
);

241 
CURL_EXTERN
 c⁄° *
cuæ_mu…i_°ªº‹
(
CURLMcode
);

252 
	#CURL_POLL_NONE
 0

	)

253 
	#CURL_POLL_IN
 1

	)

254 
	#CURL_POLL_OUT
 2

	)

255 
	#CURL_POLL_INOUT
 3

	)

256 
	#CURL_POLL_REMOVE
 4

	)

258 
	#CURL_SOCKET_TIMEOUT
 
CURL_SOCKET_BAD


	)

260 
	#CURL_CSELECT_IN
 0x01

	)

261 
	#CURL_CSELECT_OUT
 0x02

	)

262 
	#CURL_CSELECT_ERR
 0x04

	)

264 (*
cuæ_sockë_ˇŒback
)(
	tCURL
 *
	tósy
,

265 
	tcuæ_sockë_t
 
	ts
,

266 
	twh©
,

267 *
	tu£Ω
,

269 *
	tsockëp
);

281 (*
cuæ_mu…i_timî_ˇŒback
)(
	tCURLM
 *
	tmu…i
,

282 
	ttimeout_ms
,

283 *
	tu£Ω
);

286 
CURL_EXTERN
 
CURLMcode
 
cuæ_mu…i_sockë
(
CURLM
 *
mu…i_h™dÀ
, 
cuæ_sockë_t
 
s
,

287 *
ru¬ög_h™dÀs
);

289 
CURL_EXTERN
 
CURLMcode
 
cuæ_mu…i_sockë_a˘i⁄
(
CURLM
 *
mu…i_h™dÀ
,

290 
cuæ_sockë_t
 
s
,

291 
ev_bômask
,

292 *
ru¬ög_h™dÀs
);

294 
CURL_EXTERN
 
CURLMcode
 
cuæ_mu…i_sockë_Æl
(
CURLM
 *
mu…i_h™dÀ
,

295 *
ru¬ög_h™dÀs
);

297 #i‚de‡
CURL_ALLOW_OLD_MULTI_SOCKET


301 
	#cuæ_mu…i_sockë
(
x
,
y
,
z
Ë
	`cuæ_mu…i_sockë_a˘i⁄
(x,y,0,z)

	)

313 
CURL_EXTERN
 
CURLMcode
 
cuæ_mu…i_timeout
(
CURLM
 *
mu…i_h™dÀ
,

314 *
mûli£c⁄ds
);

316 #unde‡
CINIT


318 #ifde‡
CURL_ISOCPP


319 
	#CINIT
(
«me
,
ty≥
,
num
Ë
CURLMOPT_
 ##Çamê
CURLOPTTYPE_
 ##Åy≥ + 
	)
num

322 
	#LONG
 
CURLOPTTYPE_LONG


	)

323 
	#OBJECTPOINT
 
CURLOPTTYPE_OBJECTPOINT


	)

324 
	#FUNCTIONPOINT
 
CURLOPTTYPE_FUNCTIONPOINT


	)

325 
	#OFF_T
 
CURLOPTTYPE_OFF_T


	)

326 
	#CINIT
(
«me
,
ty≥
,
numbî
Ë
CURLMOPT_
Çamêty≥ + 
	)
number

331 
CINIT
(
SOCKETFUNCTION
, 
FUNCTIONPOINT
, 1),

334 
CINIT
(
SOCKETDATA
, 
OBJECTPOINT
, 2),

337 
CINIT
(
PIPELINING
, 
LONG
, 3),

340 
CINIT
(
TIMERFUNCTION
, 
FUNCTIONPOINT
, 4),

343 
CINIT
(
TIMERDATA
, 
OBJECTPOINT
, 5),

346 
CINIT
(
MAXCONNECTS
, 
LONG
, 6),

349 
CINIT
(
MAX_HOST_CONNECTIONS
, 
LONG
, 7),

352 
CINIT
(
MAX_PIPELINE_LENGTH
, 
LONG
, 8),

356 
CINIT
(
CONTENT_LENGTH_PENALTY_SIZE
, 
OFF_T
, 9),

360 
CINIT
(
CHUNK_LENGTH_PENALTY_SIZE
, 
OFF_T
, 10),

364 
CINIT
(
PIPELINING_SITE_BL
, 
OBJECTPOINT
, 11),

368 
CINIT
(
PIPELINING_SERVER_BL
, 
OBJECTPOINT
, 12),

371 
CINIT
(
MAX_TOTAL_CONNECTIONS
, 
LONG
, 13),

374 
CINIT
(
PUSHFUNCTION
, 
FUNCTIONPOINT
, 14),

377 
CINIT
(
PUSHDATA
, 
OBJECTPOINT
, 15),

379 
CURLMOPT_LASTENTRY


380 } 
	tCURLM›ti⁄
;

390 
CURL_EXTERN
 
CURLMcode
 
cuæ_mu…i_£t›t
(
CURLM
 *
mu…i_h™dÀ
,

391 
CURLM›ti⁄
 
›ti⁄
, ...);

403 
CURL_EXTERN
 
CURLMcode
 
cuæ_mu…i_assign
(
CURLM
 *
mu…i_h™dÀ
,

404 
cuæ_sockë_t
 
sockfd
, *
sockp
);

415 
	#CURL_PUSH_OK
 0

	)

416 
	#CURL_PUSH_DENY
 1

	)

418 
cuæ_pushhódîs
;

420 
CURL_EXTERN
 *
cuæ_pushhódî_bynum
(
cuæ_pushhódîs
 *
h
,

421 
size_t
 
num
);

422 
CURL_EXTERN
 *
cuæ_pushhódî_by«me
(
cuæ_pushhódîs
 *
h
,

423 c⁄° *
«me
);

425 (*
cuæ_push_ˇŒback
)(
	tCURL
 *
	t∑ª¡
,

426 
	tCURL
 *
	tósy
,

427 
	tsize_t
 
	tnum_hódîs
,

428 
	tcuæ_pushhódîs
 *
	thódîs
,

429 *
	tu£Ω
);

431 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/include/curl/stdcheaders.h

1 #i‚de‡
__STDC_HEADERS_H


2 
	#__STDC_HEADERS_H


	)

25 
	~<sys/ty≥s.h
>

27 
size_t
 
‰ód
 (*, size_t, size_t, 
FILE
 *);

28 
size_t
 
fwrôe
 (c⁄° *, size_t, size_t, 
FILE
 *);

30 
°rˇ£cmp
(const *, const *);

31 
°∫ˇ£cmp
(c⁄° *, c⁄° *, 
size_t
);

	@/var/www/html/debian/gateway/include/curl/typecheck-gcc.h

1 #i‚de‡
__CURL_TYPECHECK_GCC_H


2 
	#__CURL_TYPECHECK_GCC_H


	)

41 
	#cuæ_ósy_£t›t
(
h™dÀ
, 
›ti⁄
, 
vÆue
) \

42 
	`__exãnsi⁄__
 ({ \

43 
	`__ty≥of__
 (
›ti⁄
Ë
_cuæ_›t
 = option; \

44 if(
	`__buûtö_c⁄°™t_p
(
_cuæ_›t
)) { \

45 if(
	`_cuæ_is_l⁄g_›ti⁄
(
_cuæ_›t
)) \

46 if(!
	`_cuæ_is_l⁄g
(
vÆue
)) \

47 
	`_cuæ_ósy_£t›t_îr_l⁄g
(); \

48 if(
	`_cuæ_is_off_t_›ti⁄
(
_cuæ_›t
)) \

49 if(!
	`_cuæ_is_off_t
(
vÆue
)) \

50 
	`_cuæ_ósy_£t›t_îr_cuæ_off_t
(); \

51 if(
	`_cuæ_is_°rög_›ti⁄
(
_cuæ_›t
)) \

52 if(!
	`_cuæ_is_°rög
(
vÆue
)) \

53 
	`_cuæ_ósy_£t›t_îr_°rög
(); \

54 if(
	`_cuæ_is_wrôe_cb_›ti⁄
(
_cuæ_›t
)) \

55 if(!
	`_cuæ_is_wrôe_cb
(
vÆue
)) \

56 
	`_cuæ_ósy_£t›t_îr_wrôe_ˇŒback
(); \

57 if((
_cuæ_›t
Ë=
CURLOPT_READFUNCTION
) \

58 if(!
	`_cuæ_is_ªad_cb
(
vÆue
)) \

59 
	`_cuæ_ósy_£t›t_îr_ªad_cb
(); \

60 if((
_cuæ_›t
Ë=
CURLOPT_IOCTLFUNCTION
) \

61 if(!
	`_cuæ_is_io˘l_cb
(
vÆue
)) \

62 
	`_cuæ_ósy_£t›t_îr_io˘l_cb
(); \

63 if((
_cuæ_›t
Ë=
CURLOPT_SOCKOPTFUNCTION
) \

64 if(!
	`_cuæ_is_sock›t_cb
(
vÆue
)) \

65 
	`_cuæ_ósy_£t›t_îr_sock›t_cb
(); \

66 if((
_cuæ_›t
Ë=
CURLOPT_OPENSOCKETFUNCTION
) \

67 if(!
	`_cuæ_is_›ísockë_cb
(
vÆue
)) \

68 
	`_cuæ_ósy_£t›t_îr_›ísockë_cb
(); \

69 if((
_cuæ_›t
Ë=
CURLOPT_PROGRESSFUNCTION
) \

70 if(!
	`_cuæ_is_¥ogªss_cb
(
vÆue
)) \

71 
	`_cuæ_ósy_£t›t_îr_¥ogªss_cb
(); \

72 if((
_cuæ_›t
Ë=
CURLOPT_DEBUGFUNCTION
) \

73 if(!
	`_cuæ_is_debug_cb
(
vÆue
)) \

74 
	`_cuæ_ósy_£t›t_îr_debug_cb
(); \

75 if((
_cuæ_›t
Ë=
CURLOPT_SSL_CTX_FUNCTION
) \

76 if(!
	`_cuæ_is_s¶_˘x_cb
(
vÆue
)) \

77 
	`_cuæ_ósy_£t›t_îr_s¶_˘x_cb
(); \

78 if(
	`_cuæ_is_c⁄v_cb_›ti⁄
(
_cuæ_›t
)) \

79 if(!
	`_cuæ_is_c⁄v_cb
(
vÆue
)) \

80 
	`_cuæ_ósy_£t›t_îr_c⁄v_cb
(); \

81 if((
_cuæ_›t
Ë=
CURLOPT_SEEKFUNCTION
) \

82 if(!
	`_cuæ_is_£ek_cb
(
vÆue
)) \

83 
	`_cuæ_ósy_£t›t_îr_£ek_cb
(); \

84 if(
	`_cuæ_is_cb_d©a_›ti⁄
(
_cuæ_›t
)) \

85 if(!
	`_cuæ_is_cb_d©a
(
vÆue
)) \

86 
	`_cuæ_ósy_£t›t_îr_cb_d©a
(); \

87 if((
_cuæ_›t
Ë=
CURLOPT_ERRORBUFFER
) \

88 if(!
	`_cuæ_is_îr‹_buf„r
(
vÆue
)) \

89 
	`_cuæ_ósy_£t›t_îr_îr‹_buf„r
(); \

90 if((
_cuæ_›t
Ë=
CURLOPT_STDERR
) \

91 if(!
	`_cuæ_is_FILE
(
vÆue
)) \

92 
	`_cuæ_ósy_£t›t_îr_FILE
(); \

93 if(
	`_cuæ_is_po°fõlds_›ti⁄
(
_cuæ_›t
)) \

94 if(!
	`_cuæ_is_po°fõlds
(
vÆue
)) \

95 
	`_cuæ_ósy_£t›t_îr_po°fõlds
(); \

96 if((
_cuæ_›t
Ë=
CURLOPT_HTTPPOST
) \

97 if(!
	`_cuæ_is_¨r
((
vÆue
), 
cuæ_hâµo°
)) \

98 
	`_cuæ_ósy_£t›t_îr_cuæ_hâpo°
(); \

99 if(
	`_cuæ_is_¶i°_›ti⁄
(
_cuæ_›t
)) \

100 if(!
	`_cuæ_is_¨r
((
vÆue
), 
cuæ_¶i°
)) \

101 
	`_cuæ_ósy_£t›t_îr_cuæ_¶i°
(); \

102 if((
_cuæ_›t
Ë=
CURLOPT_SHARE
) \

103 if(!
	`_cuæ_is_±r
((
vÆue
), 
CURLSH
)) \

104 
	`_cuæ_ósy_£t›t_îr_CURLSH
(); \

106 
	`cuæ_ósy_£t›t
(
h™dÀ
, 
_cuæ_›t
, 
vÆue
); \

107 })

	)

111 
	#cuæ_ósy_gëöfo
(
h™dÀ
, 
öfo
, 
¨g
) \

112 
	`__exãnsi⁄__
 ({ \

113 
	`__ty≥of__
 (
öfo
Ë
_cuæ_öfo
 = info; \

114 if(
	`__buûtö_c⁄°™t_p
(
_cuæ_öfo
)) { \

115 if(
	`_cuæ_is_°rög_öfo
(
_cuæ_öfo
)) \

116 if(!
	`_cuæ_is_¨r
((
¨g
), *)) \

117 
	`_cuæ_ósy_gëöfo_îr_°rög
(); \

118 if(
	`_cuæ_is_l⁄g_öfo
(
_cuæ_öfo
)) \

119 if(!
	`_cuæ_is_¨r
((
¨g
), )) \

120 
	`_cuæ_ósy_gëöfo_îr_l⁄g
(); \

121 if(
	`_cuæ_is_doubÀ_öfo
(
_cuæ_öfo
)) \

122 if(!
	`_cuæ_is_¨r
((
¨g
), )) \

123 
	`_cuæ_ósy_gëöfo_îr_doubÀ
(); \

124 if(
	`_cuæ_is_¶i°_öfo
(
_cuæ_öfo
)) \

125 if(!
	`_cuæ_is_¨r
((
¨g
), 
cuæ_¶i°
 *)) \

126 
	`_cuæ_ósy_gëöfo_îr_cuæ_¶i°
(); \

128 
	`cuæ_ósy_gëöfo
(
h™dÀ
, 
_cuæ_öfo
, 
¨g
); \

129 })

	)

135 
	#cuæ_sh¨e_£t›t
(
sh¨e
,
›t
,
∑øm
Ë
	`cuæ_sh¨e_£t›t
(sh¨e,›t,∑øm)

	)

136 
	#cuæ_mu…i_£t›t
(
h™dÀ
,
›t
,
∑øm
Ë
	`cuæ_mu…i_£t›t
(h™dÀ,›t,∑øm)

	)

143 
	#_CURL_WARNING
(
id
, 
mesßge
) \

144 
	`__©åibuã__
((
	`__w¨nög__
(
mesßge
))) \

145 
	`__©åibuã__
((
__unu£d__
)Ë__©åibuã__((
__noölöe__
)) \

146 
	`id
(Ë{ 
	`__asm__
(""); }

	)

148 
_CURL_WARNING
(
_cuæ_ósy_£t›t_îr_l⁄g
,

150 
_CURL_WARNING
(
_cuæ_ósy_£t›t_îr_cuæ_off_t
,

152 
_CURL_WARNING
(
_cuæ_ósy_£t›t_îr_°rög
,

156 
_CURL_WARNING
(
_cuæ_ósy_£t›t_îr_wrôe_ˇŒback
,

158 
_CURL_WARNING
(
_cuæ_ósy_£t›t_îr_ªad_cb
,

160 
_CURL_WARNING
(
_cuæ_ósy_£t›t_îr_io˘l_cb
,

162 
_CURL_WARNING
(
_cuæ_ósy_£t›t_îr_sock›t_cb
,

164 
_CURL_WARNING
(
_cuæ_ósy_£t›t_îr_›ísockë_cb
,

168 
_CURL_WARNING
(
_cuæ_ósy_£t›t_îr_¥ogªss_cb
,

170 
_CURL_WARNING
(
_cuæ_ósy_£t›t_îr_debug_cb
,

172 
_CURL_WARNING
(
_cuæ_ósy_£t›t_îr_s¶_˘x_cb
,

174 
_CURL_WARNING
(
_cuæ_ósy_£t›t_îr_c⁄v_cb
,

176 
_CURL_WARNING
(
_cuæ_ósy_£t›t_îr_£ek_cb
,

178 
_CURL_WARNING
(
_cuæ_ósy_£t›t_îr_cb_d©a
,

181 
_CURL_WARNING
(
_cuæ_ósy_£t›t_îr_îr‹_buf„r
,

184 
_CURL_WARNING
(
_cuæ_ósy_£t›t_îr_FILE
,

186 
_CURL_WARNING
(
_cuæ_ósy_£t›t_îr_po°fõlds
,

188 
_CURL_WARNING
(
_cuæ_ósy_£t›t_îr_cuæ_hâpo°
,

190 
_CURL_WARNING
(
_cuæ_ósy_£t›t_îr_cuæ_¶i°
,

192 
_CURL_WARNING
(
_cuæ_ósy_£t›t_îr_CURLSH
,

195 
_CURL_WARNING
(
_cuæ_ósy_gëöfo_îr_°rög
,

197 
_CURL_WARNING
(
_cuæ_ósy_gëöfo_îr_l⁄g
,

199 
_CURL_WARNING
(
_cuæ_ósy_gëöfo_îr_doubÀ
,

201 
_CURL_WARNING
(
_cuæ_ósy_gëöfo_îr_cuæ_¶i°
,

213 
	#_cuæ_is_l⁄g_›ti⁄
(
›ti⁄
) \

214 (0 < (
›ti⁄
Ë&& (›ti⁄Ë< 
CURLOPTTYPE_OBJECTPOINT
)

	)

216 
	#_cuæ_is_off_t_›ti⁄
(
›ti⁄
) \

217 ((
›ti⁄
Ë> 
CURLOPTTYPE_OFF_T
)

	)

220 
	#_cuæ_is_°rög_›ti⁄
(
›ti⁄
) \

221 ((
›ti⁄
Ë=
CURLOPT_ACCEPT_ENCODING
 || \

222 (
›ti⁄
Ë=
CURLOPT_CAINFO
 || \

223 (
›ti⁄
Ë=
CURLOPT_CAPATH
 || \

224 (
›ti⁄
Ë=
CURLOPT_COOKIE
 || \

225 (
›ti⁄
Ë=
CURLOPT_COOKIEFILE
 || \

226 (
›ti⁄
Ë=
CURLOPT_COOKIEJAR
 || \

227 (
›ti⁄
Ë=
CURLOPT_COOKIELIST
 || \

228 (
›ti⁄
Ë=
CURLOPT_CRLFILE
 || \

229 (
›ti⁄
Ë=
CURLOPT_CUSTOMREQUEST
 || \

230 (
›ti⁄
Ë=
CURLOPT_DEFAULT_PROTOCOL
 || \

231 (
›ti⁄
Ë=
CURLOPT_DNS_INTERFACE
 || \

232 (
›ti⁄
Ë=
CURLOPT_DNS_LOCAL_IP4
 || \

233 (
›ti⁄
Ë=
CURLOPT_DNS_LOCAL_IP6
 || \

234 (
›ti⁄
Ë=
CURLOPT_DNS_SERVERS
 || \

235 (
›ti⁄
Ë=
CURLOPT_EGDSOCKET
 || \

236 (
›ti⁄
Ë=
CURLOPT_FTPPORT
 || \

237 (
›ti⁄
Ë=
CURLOPT_FTP_ACCOUNT
 || \

238 (
›ti⁄
Ë=
CURLOPT_FTP_ALTERNATIVE_TO_USER
 || \

239 (
›ti⁄
Ë=
CURLOPT_INTERFACE
 || \

240 (
›ti⁄
Ë=
CURLOPT_ISSUERCERT
 || \

241 (
›ti⁄
Ë=
CURLOPT_KEYPASSWD
 || \

242 (
›ti⁄
Ë=
CURLOPT_KRBLEVEL
 || \

243 (
›ti⁄
Ë=
CURLOPT_LOGIN_OPTIONS
 || \

244 (
›ti⁄
Ë=
CURLOPT_MAIL_AUTH
 || \

245 (
›ti⁄
Ë=
CURLOPT_MAIL_FROM
 || \

246 (
›ti⁄
Ë=
CURLOPT_NETRC_FILE
 || \

247 (
›ti⁄
Ë=
CURLOPT_NOPROXY
 || \

248 (
›ti⁄
Ë=
CURLOPT_PASSWORD
 || \

249 (
›ti⁄
Ë=
CURLOPT_PINNEDPUBLICKEY
 || \

250 (
›ti⁄
Ë=
CURLOPT_PROXY
 || \

251 (
›ti⁄
Ë=
CURLOPT_PROXYPASSWORD
 || \

252 (
›ti⁄
Ë=
CURLOPT_PROXYUSERNAME
 || \

253 (
›ti⁄
Ë=
CURLOPT_PROXYUSERPWD
 || \

254 (
›ti⁄
Ë=
CURLOPT_PROXY_SERVICE_NAME
 || \

255 (
›ti⁄
Ë=
CURLOPT_RANDOM_FILE
 || \

256 (
›ti⁄
Ë=
CURLOPT_RANGE
 || \

257 (
›ti⁄
Ë=
CURLOPT_REFERER
 || \

258 (
›ti⁄
Ë=
CURLOPT_RTSP_SESSION_ID
 || \

259 (
›ti⁄
Ë=
CURLOPT_RTSP_STREAM_URI
 || \

260 (
›ti⁄
Ë=
CURLOPT_RTSP_TRANSPORT
 || \

261 (
›ti⁄
Ë=
CURLOPT_SERVICE_NAME
 || \

262 (
›ti⁄
Ë=
CURLOPT_SOCKS5_GSSAPI_SERVICE
 || \

263 (
›ti⁄
Ë=
CURLOPT_SSH_HOST_PUBLIC_KEY_MD5
 || \

264 (
›ti⁄
Ë=
CURLOPT_SSH_KNOWNHOSTS
 || \

265 (
›ti⁄
Ë=
CURLOPT_SSH_PRIVATE_KEYFILE
 || \

266 (
›ti⁄
Ë=
CURLOPT_SSH_PUBLIC_KEYFILE
 || \

267 (
›ti⁄
Ë=
CURLOPT_SSLCERT
 || \

268 (
›ti⁄
Ë=
CURLOPT_SSLCERTTYPE
 || \

269 (
›ti⁄
Ë=
CURLOPT_SSLENGINE
 || \

270 (
›ti⁄
Ë=
CURLOPT_SSLKEY
 || \

271 (
›ti⁄
Ë=
CURLOPT_SSLKEYTYPE
 || \

272 (
›ti⁄
Ë=
CURLOPT_SSL_CIPHER_LIST
 || \

273 (
›ti⁄
Ë=
CURLOPT_TLSAUTH_PASSWORD
 || \

274 (
›ti⁄
Ë=
CURLOPT_TLSAUTH_TYPE
 || \

275 (
›ti⁄
Ë=
CURLOPT_TLSAUTH_USERNAME
 || \

276 (
›ti⁄
Ë=
CURLOPT_UNIX_SOCKET_PATH
 || \

277 (
›ti⁄
Ë=
CURLOPT_URL
 || \

278 (
›ti⁄
Ë=
CURLOPT_USERAGENT
 || \

279 (
›ti⁄
Ë=
CURLOPT_USERNAME
 || \

280 (
›ti⁄
Ë=
CURLOPT_USERPWD
 || \

281 (
›ti⁄
Ë=
CURLOPT_XOAUTH2_BEARER
 || \

282 0)

	)

285 
	#_cuæ_is_wrôe_cb_›ti⁄
(
›ti⁄
) \

286 ((
›ti⁄
Ë=
CURLOPT_HEADERFUNCTION
 || \

287 (
›ti⁄
Ë=
CURLOPT_WRITEFUNCTION
)

	)

290 
	#_cuæ_is_c⁄v_cb_›ti⁄
(
›ti⁄
) \

291 ((
›ti⁄
Ë=
CURLOPT_CONV_TO_NETWORK_FUNCTION
 || \

292 (
›ti⁄
Ë=
CURLOPT_CONV_FROM_NETWORK_FUNCTION
 || \

293 (
›ti⁄
Ë=
CURLOPT_CONV_FROM_UTF8_FUNCTION
)

	)

296 
	#_cuæ_is_cb_d©a_›ti⁄
(
›ti⁄
) \

297 ((
›ti⁄
Ë=
CURLOPT_CHUNK_DATA
 || \

298 (
›ti⁄
Ë=
CURLOPT_CLOSESOCKETDATA
 || \

299 (
›ti⁄
Ë=
CURLOPT_DEBUGDATA
 || \

300 (
›ti⁄
Ë=
CURLOPT_FNMATCH_DATA
 || \

301 (
›ti⁄
Ë=
CURLOPT_HEADERDATA
 || \

302 (
›ti⁄
Ë=
CURLOPT_INTERLEAVEDATA
 || \

303 (
›ti⁄
Ë=
CURLOPT_IOCTLDATA
 || \

304 (
›ti⁄
Ë=
CURLOPT_OPENSOCKETDATA
 || \

305 (
›ti⁄
Ë=
CURLOPT_PRIVATE
 || \

306 (
›ti⁄
Ë=
CURLOPT_PROGRESSDATA
 || \

307 (
›ti⁄
Ë=
CURLOPT_READDATA
 || \

308 (
›ti⁄
Ë=
CURLOPT_SEEKDATA
 || \

309 (
›ti⁄
Ë=
CURLOPT_SOCKOPTDATA
 || \

310 (
›ti⁄
Ë=
CURLOPT_SSH_KEYDATA
 || \

311 (
›ti⁄
Ë=
CURLOPT_SSL_CTX_DATA
 || \

312 (
›ti⁄
Ë=
CURLOPT_WRITEDATA
 || \

313 0)

	)

316 
	#_cuæ_is_po°fõlds_›ti⁄
(
›ti⁄
) \

317 ((
›ti⁄
Ë=
CURLOPT_POSTFIELDS
 || \

318 (
›ti⁄
Ë=
CURLOPT_COPYPOSTFIELDS
 || \

319 0)

	)

322 
	#_cuæ_is_¶i°_›ti⁄
(
›ti⁄
) \

323 ((
›ti⁄
Ë=
CURLOPT_HTTP200ALIASES
 || \

324 (
›ti⁄
Ë=
CURLOPT_HTTPHEADER
 || \

325 (
›ti⁄
Ë=
CURLOPT_MAIL_RCPT
 || \

326 (
›ti⁄
Ë=
CURLOPT_POSTQUOTE
 || \

327 (
›ti⁄
Ë=
CURLOPT_PREQUOTE
 || \

328 (
›ti⁄
Ë=
CURLOPT_PROXYHEADER
 || \

329 (
›ti⁄
Ë=
CURLOPT_QUOTE
 || \

330 (
›ti⁄
Ë=
CURLOPT_RESOLVE
 || \

331 (
›ti⁄
Ë=
CURLOPT_TELNETOPTIONS
 || \

332 0)

	)

337 
	#_cuæ_is_°rög_öfo
(
öfo
) \

338 (
CURLINFO_STRING
 < (
öfo
Ë&& (öfoË< 
CURLINFO_LONG
)

	)

341 
	#_cuæ_is_l⁄g_öfo
(
öfo
) \

342 (
CURLINFO_LONG
 < (
öfo
Ë&& (öfoË< 
CURLINFO_DOUBLE
)

	)

345 
	#_cuæ_is_doubÀ_öfo
(
öfo
) \

346 (
CURLINFO_DOUBLE
 < (
öfo
Ë&& (öfoË< 
CURLINFO_SLIST
)

	)

349 
	#_cuæ_is_¶i°_öfo
(
öfo
) \

350 (
CURLINFO_SLIST
 < (
öfo
))

	)

365 
	#_cuæ_is_™y_±r
(
ex¥
) \

366 ((
ex¥
Ë=(*))

	)

370 
	#_cuæ_is_NULL
(
ex¥
) \

371 (
	`__buûtö_ty≥s_com∑tibÀ_p
(
	`__ty≥of__
(
ex¥
), __ty≥of__(
NULL
)))

	)

374 
	#_cuæ_is_±r
(
ex¥
, 
ty≥
) \

375 (
	`_cuæ_is_NULL
(
ex¥
) || \

376 
	`__buûtö_ty≥s_com∑tibÀ_p
(
	`__ty≥of__
(
ex¥
), 
ty≥
 *) || \

377 
	`__buûtö_ty≥s_com∑tibÀ_p
(
	`__ty≥of__
(
ex¥
), c⁄° 
ty≥
 *))

	)

380 
	#_cuæ_is_¨r
(
ex¥
, 
ty≥
) \

381 (
	`_cuæ_is_±r
((
ex¥
), 
ty≥
) || \

382 
	`__buûtö_ty≥s_com∑tibÀ_p
(
	`__ty≥of__
(
ex¥
), 
ty≥
 []))

	)

385 
	#_cuæ_is_°rög
(
ex¥
) \

386 (
	`_cuæ_is_¨r
((
ex¥
), ) || \

387 
	`_cuæ_is_¨r
((
ex¥
), signed ) || \

388 
	`_cuæ_is_¨r
((
ex¥
), ))

	)

393 
	#_cuæ_is_l⁄g
(
ex¥
) \

394 (
	`__buûtö_ty≥s_com∑tibÀ_p
(
	`__ty≥of__
(
ex¥
), ) || \

395 
	`__buûtö_ty≥s_com∑tibÀ_p
(
	`__ty≥of__
(
ex¥
), signed ) || \

396 
	`__buûtö_ty≥s_com∑tibÀ_p
(
	`__ty≥of__
(
ex¥
), ) || \

397 
	`__buûtö_ty≥s_com∑tibÀ_p
(
	`__ty≥of__
(
ex¥
), ) || \

398 
	`__buûtö_ty≥s_com∑tibÀ_p
(
	`__ty≥of__
(
ex¥
), signed ) || \

399 
	`__buûtö_ty≥s_com∑tibÀ_p
(
	`__ty≥of__
(
ex¥
), ) || \

400 
	`__buûtö_ty≥s_com∑tibÀ_p
(
	`__ty≥of__
(
ex¥
), ) || \

401 
	`__buûtö_ty≥s_com∑tibÀ_p
(
	`__ty≥of__
(
ex¥
), signed ) || \

402 
	`__buûtö_ty≥s_com∑tibÀ_p
(
	`__ty≥of__
(
ex¥
), ) || \

403 
	`__buûtö_ty≥s_com∑tibÀ_p
(
	`__ty≥of__
(
ex¥
), ) || \

404 
	`__buûtö_ty≥s_com∑tibÀ_p
(
	`__ty≥of__
(
ex¥
), signed ) || \

405 
	`__buûtö_ty≥s_com∑tibÀ_p
(
	`__ty≥of__
(
ex¥
), ))

	)

408 
	#_cuæ_is_off_t
(
ex¥
) \

409 (
	`__buûtö_ty≥s_com∑tibÀ_p
(
	`__ty≥of__
(
ex¥
), 
cuæ_off_t
))

	)

413 
	#_cuæ_is_îr‹_buf„r
(
ex¥
) \

414 (
	`_cuæ_is_NULL
(
ex¥
) || \

415 
	`__buûtö_ty≥s_com∑tibÀ_p
(
	`__ty≥of__
(
ex¥
), *) || \

416 
	`__buûtö_ty≥s_com∑tibÀ_p
(
	`__ty≥of__
(
ex¥
), []))

	)

420 
	#_cuæ_is_cb_d©a
(
ex¥
) \

421 (
	`_cuæ_is_±r
((
ex¥
), ) || \

422 
	`_cuæ_is_±r
((
ex¥
), 
FILE
))

	)

424 
	#_cuæ_is_cb_d©a
(
ex¥
) \

425 
	`_cuæ_is_™y_±r
(
ex¥
)

	)

429 
	#_cuæ_is_FILE
(
ex¥
) \

430 (
	`__buûtö_ty≥s_com∑tibÀ_p
(
	`__ty≥of__
(
ex¥
), 
FILE
 *))

	)

433 
	#_cuæ_is_po°fõlds
(
ex¥
) \

434 (
	`_cuæ_is_±r
((
ex¥
), ) || \

435 
	`_cuæ_is_¨r
((
ex¥
), ))

	)

443 
	#_cuæ_ˇŒback_com∑tibÀ
(
func
, 
ty≥
) \

444 (
	`__buûtö_ty≥s_com∑tibÀ_p
(
	`__ty≥of__
(
func
), 
ty≥
) || \

445 
	`__buûtö_ty≥s_com∑tibÀ_p
(
	`__ty≥of__
(
func
), 
ty≥
*))

	)

448 
	#_cuæ_is_ªad_cb
(
ex¥
) \

449 (
	`_cuæ_is_NULL
(
ex¥
) || \

450 
	`__buûtö_ty≥s_com∑tibÀ_p
(
	`__ty≥of__
(
ex¥
), __ty≥of__(
‰ód
)) || \

451 
	`__buûtö_ty≥s_com∑tibÀ_p
(
	`__ty≥of__
(
ex¥
), 
cuæ_ªad_ˇŒback
) || \

452 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_ªad_ˇŒback1
) || \

453 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_ªad_ˇŒback2
) || \

454 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_ªad_ˇŒback3
) || \

455 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_ªad_ˇŒback4
) || \

456 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_ªad_ˇŒback5
) || \

457 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_ªad_ˇŒback6
))

	)

458 
	$size_t
 (
	t_cuæ_ªad_ˇŒback1
)(*, 
	tsize_t
, size_t, *);

459 
	$size_t
 (
	t_cuæ_ªad_ˇŒback2
)(*, 
	tsize_t
, size_t, const *);

460 
	$size_t
 (
	t_cuæ_ªad_ˇŒback3
)(*, 
	tsize_t
, size_t, 
	tFILE
*);

461 
	$size_t
 (
	t_cuæ_ªad_ˇŒback4
)(*, 
	tsize_t
, size_t, *);

462 
	$size_t
 (
	t_cuæ_ªad_ˇŒback5
)(*, 
	tsize_t
, size_t, const *);

463 
	$size_t
 (
	t_cuæ_ªad_ˇŒback6
)(*, 
	tsize_t
, size_t, 
	tFILE
*);

466 
	#_cuæ_is_wrôe_cb
(
ex¥
) \

467 (
	`_cuæ_is_ªad_cb
(
ex¥
) || \

468 
	`__buûtö_ty≥s_com∑tibÀ_p
(
	`__ty≥of__
(
ex¥
), __ty≥of__(
fwrôe
)) || \

469 
	`__buûtö_ty≥s_com∑tibÀ_p
(
	`__ty≥of__
(
ex¥
), 
cuæ_wrôe_ˇŒback
) || \

470 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_wrôe_ˇŒback1
) || \

471 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_wrôe_ˇŒback2
) || \

472 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_wrôe_ˇŒback3
) || \

473 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_wrôe_ˇŒback4
) || \

474 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_wrôe_ˇŒback5
) || \

475 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_wrôe_ˇŒback6
))

	)

476 
	$size_t
 (
	t_cuæ_wrôe_ˇŒback1
)(c⁄° *, 
	tsize_t
, size_t, *);

477 
	$size_t
 (
	t_cuæ_wrôe_ˇŒback2
)(c⁄° *, 
	tsize_t
, size_t,

479 
	$size_t
 (
	t_cuæ_wrôe_ˇŒback3
)(c⁄° *, 
	tsize_t
, size_t, 
	tFILE
*);

480 
	$size_t
 (
	t_cuæ_wrôe_ˇŒback4
)(c⁄° *, 
	tsize_t
, size_t, *);

481 
	$size_t
 (
	t_cuæ_wrôe_ˇŒback5
)(c⁄° *, 
	tsize_t
, size_t,

483 
	$size_t
 (
	t_cuæ_wrôe_ˇŒback6
)(c⁄° *, 
	tsize_t
, size_t, 
	tFILE
*);

486 
	#_cuæ_is_io˘l_cb
(
ex¥
) \

487 (
	`_cuæ_is_NULL
(
ex¥
) || \

488 
	`__buûtö_ty≥s_com∑tibÀ_p
(
	`__ty≥of__
(
ex¥
), 
cuæ_io˘l_ˇŒback
) || \

489 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_io˘l_ˇŒback1
) || \

490 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_io˘l_ˇŒback2
) || \

491 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_io˘l_ˇŒback3
) || \

492 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_io˘l_ˇŒback4
))

	)

493 
	$cuæi€º
 (
	t_cuæ_io˘l_ˇŒback1
)(
	tCURL
 *, , *);

494 
	$cuæi€º
 (
	t_cuæ_io˘l_ˇŒback2
)(
	tCURL
 *, , const *);

495 
	$cuæi€º
 (
	t_cuæ_io˘l_ˇŒback3
)(
	tCURL
 *, 
	tcuæiocmd
, *);

496 
	$cuæi€º
 (
	t_cuæ_io˘l_ˇŒback4
)(
	tCURL
 *, 
	tcuæiocmd
, const *);

499 
	#_cuæ_is_sock›t_cb
(
ex¥
) \

500 (
	`_cuæ_is_NULL
(
ex¥
) || \

501 
	`__buûtö_ty≥s_com∑tibÀ_p
(
	`__ty≥of__
(
ex¥
), 
cuæ_sock›t_ˇŒback
) || \

502 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_sock›t_ˇŒback1
) || \

503 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_sock›t_ˇŒback2
))

	)

504 (
	t_cuæ_sock›t_ˇŒback1
)(*, 
	tcuæ_sockë_t
, 
	tcuæsockty≥
);

505 (
	t_cuæ_sock›t_ˇŒback2
)(c⁄° *, 
	tcuæ_sockë_t
,

506 
	tcuæsockty≥
);

510 
	#_cuæ_is_›ísockë_cb
(
ex¥
) \

511 (
	`_cuæ_is_NULL
(
ex¥
) || \

512 
	`__buûtö_ty≥s_com∑tibÀ_p
(
	`__ty≥of__
(
ex¥
), 
cuæ_›ísockë_ˇŒback
) ||\

513 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_›ísockë_ˇŒback1
) || \

514 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_›ísockë_ˇŒback2
) || \

515 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_›ísockë_ˇŒback3
) || \

516 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_›ísockë_ˇŒback4
))

	)

517 
	$cuæ_sockë_t
 (
	t_cuæ_›ísockë_ˇŒback1
)

518 (*, 
	tcuæsockty≥
, 
	tcuæ_sockaddr
 *);

519 
	$cuæ_sockë_t
 (
	t_cuæ_›ísockë_ˇŒback2
)

520 (*, 
	tcuæsockty≥
, c⁄° 
	tcuæ_sockaddr
 *);

521 
	$cuæ_sockë_t
 (
	t_cuæ_›ísockë_ˇŒback3
)

522 (c⁄° *, 
	tcuæsockty≥
, 
	tcuæ_sockaddr
 *);

523 
	$cuæ_sockë_t
 (
	t_cuæ_›ísockë_ˇŒback4
)

524 (c⁄° *, 
	tcuæsockty≥
, c⁄° 
	tcuæ_sockaddr
 *);

527 
	#_cuæ_is_¥ogªss_cb
(
ex¥
) \

528 (
	`_cuæ_is_NULL
(
ex¥
) || \

529 
	`__buûtö_ty≥s_com∑tibÀ_p
(
	`__ty≥of__
(
ex¥
), 
cuæ_¥ogªss_ˇŒback
) || \

530 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_¥ogªss_ˇŒback1
) || \

531 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_¥ogªss_ˇŒback2
))

	)

532 (
	t_cuæ_¥ogªss_ˇŒback1
)(*,

534 (
	t_cuæ_¥ogªss_ˇŒback2
)(const *,

538 
	#_cuæ_is_debug_cb
(
ex¥
) \

539 (
	`_cuæ_is_NULL
(
ex¥
) || \

540 
	`__buûtö_ty≥s_com∑tibÀ_p
(
	`__ty≥of__
(
ex¥
), 
cuæ_debug_ˇŒback
) || \

541 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_debug_ˇŒback1
) || \

542 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_debug_ˇŒback2
) || \

543 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_debug_ˇŒback3
) || \

544 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_debug_ˇŒback4
) || \

545 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_debug_ˇŒback5
) || \

546 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_debug_ˇŒback6
) || \

547 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_debug_ˇŒback7
) || \

548 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_debug_ˇŒback8
))

	)

549 (
	t_cuæ_debug_ˇŒback1
Ë(
	tCURL
 *,

550 
	tcuæ_öfŸy≥
, *, 
	tsize_t
, *);

551 (
	t_cuæ_debug_ˇŒback2
Ë(
	tCURL
 *,

552 
	tcuæ_öfŸy≥
, *, 
	tsize_t
, const *);

553 (
	t_cuæ_debug_ˇŒback3
Ë(
	tCURL
 *,

554 
	tcuæ_öfŸy≥
, c⁄° *, 
	tsize_t
, *);

555 (
	t_cuæ_debug_ˇŒback4
Ë(
	tCURL
 *,

556 
	tcuæ_öfŸy≥
, c⁄° *, 
	tsize_t
, const *);

557 (
	t_cuæ_debug_ˇŒback5
Ë(
	tCURL
 *,

558 
	tcuæ_öfŸy≥
, *, 
	tsize_t
, *);

559 (
	t_cuæ_debug_ˇŒback6
Ë(
	tCURL
 *,

560 
	tcuæ_öfŸy≥
, *, 
	tsize_t
, const *);

561 (
	t_cuæ_debug_ˇŒback7
Ë(
	tCURL
 *,

562 
	tcuæ_öfŸy≥
, c⁄° *, 
	tsize_t
, *);

563 (
	t_cuæ_debug_ˇŒback8
Ë(
	tCURL
 *,

564 
	tcuæ_öfŸy≥
, c⁄° *, 
	tsize_t
, const *);

568 
	#_cuæ_is_s¶_˘x_cb
(
ex¥
) \

569 (
	`_cuæ_is_NULL
(
ex¥
) || \

570 
	`__buûtö_ty≥s_com∑tibÀ_p
(
	`__ty≥of__
(
ex¥
), 
cuæ_s¶_˘x_ˇŒback
) || \

571 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_s¶_˘x_ˇŒback1
) || \

572 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_s¶_˘x_ˇŒback2
) || \

573 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_s¶_˘x_ˇŒback3
) || \

574 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_s¶_˘x_ˇŒback4
) || \

575 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_s¶_˘x_ˇŒback5
) || \

576 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_s¶_˘x_ˇŒback6
) || \

577 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_s¶_˘x_ˇŒback7
) || \

578 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_s¶_˘x_ˇŒback8
))

	)

579 
	$CURLcode
 (
	t_cuæ_s¶_˘x_ˇŒback1
)(
	tCURL
 *, *, *);

580 
	$CURLcode
 (
	t_cuæ_s¶_˘x_ˇŒback2
)(
	tCURL
 *, *, const *);

581 
	$CURLcode
 (
	t_cuæ_s¶_˘x_ˇŒback3
)(
	tCURL
 *, const *, *);

582 
	$CURLcode
 (
	t_cuæ_s¶_˘x_ˇŒback4
)(
	tCURL
 *, const *, const *);

583 #ifde‡
HEADER_SSL_H


587 
	$CURLcode
 (
	t_cuæ_s¶_˘x_ˇŒback5
)(
	tCURL
 *, 
	tSSL_CTX
, *);

588 
	$CURLcode
 (
	t_cuæ_s¶_˘x_ˇŒback6
)(
	tCURL
 *, 
	tSSL_CTX
, const *);

589 
	$CURLcode
 (
	t_cuæ_s¶_˘x_ˇŒback7
)(
	tCURL
 *, c⁄° 
	tSSL_CTX
, *);

590 
	$CURLcode
 (
	t_cuæ_s¶_˘x_ˇŒback8
)(
	tCURL
 *, c⁄° 
	tSSL_CTX
,

593 
_cuæ_s¶_˘x_ˇŒback1
 
	t_cuæ_s¶_˘x_ˇŒback5
;

594 
_cuæ_s¶_˘x_ˇŒback1
 
	t_cuæ_s¶_˘x_ˇŒback6
;

595 
_cuæ_s¶_˘x_ˇŒback1
 
	t_cuæ_s¶_˘x_ˇŒback7
;

596 
_cuæ_s¶_˘x_ˇŒback1
 
	t_cuæ_s¶_˘x_ˇŒback8
;

600 
	#_cuæ_is_c⁄v_cb
(
ex¥
) \

601 (
	`_cuæ_is_NULL
(
ex¥
) || \

602 
	`__buûtö_ty≥s_com∑tibÀ_p
(
	`__ty≥of__
(
ex¥
), 
cuæ_c⁄v_ˇŒback
) || \

603 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_c⁄v_ˇŒback1
) || \

604 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_c⁄v_ˇŒback2
) || \

605 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_c⁄v_ˇŒback3
) || \

606 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_c⁄v_ˇŒback4
))

	)

607 
	$CURLcode
 (*
	t_cuæ_c⁄v_ˇŒback1
)(*, 
	tsize_t
 
	tÀngth
);

608 
	$CURLcode
 (*
	t_cuæ_c⁄v_ˇŒback2
)(c⁄° *, 
	tsize_t
 
	tÀngth
);

609 
	$CURLcode
 (*
	t_cuæ_c⁄v_ˇŒback3
)(*, 
	tsize_t
 
	tÀngth
);

610 
	$CURLcode
 (*
	t_cuæ_c⁄v_ˇŒback4
)(c⁄° *, 
	tsize_t
 
	tÀngth
);

613 
	#_cuæ_is_£ek_cb
(
ex¥
) \

614 (
	`_cuæ_is_NULL
(
ex¥
) || \

615 
	`__buûtö_ty≥s_com∑tibÀ_p
(
	`__ty≥of__
(
ex¥
), 
cuæ_£ek_ˇŒback
) || \

616 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_£ek_ˇŒback1
) || \

617 
	`_cuæ_ˇŒback_com∑tibÀ
((
ex¥
), 
_cuæ_£ek_ˇŒback2
))

	)

618 
	$CURLcode
 (*
	t_cuæ_£ek_ˇŒback1
)(*, 
	tcuæ_off_t
, );

619 
	$CURLcode
 (*
	t_cuæ_£ek_ˇŒback2
)(c⁄° *, 
	tcuæ_off_t
, );

	@/var/www/html/debian/gateway/include/json-c/arraylist.h

18 #i‚de‡
_¨øyli°_h_


19 
	#_¨øyli°_h_


	)

21 #ifde‡
__˝lu•lus


25 
	#ARRAY_LIST_DEFAULT_SIZE
 32

	)

27 (
¨øy_li°_‰ì_‚
Ë(*
	td©a
);

29 
	s¨øy_li°


31 **
¨øy
;

32 
size_t
 
Àngth
;

33 
size_t
 
size
;

34 
¨øy_li°_‰ì_‚
 *
‰ì_‚
;

36 
¨øy_li°
 
	t¨øy_li°
;

38 
¨øy_li°
*

39 
¨øy_li°_√w
(
¨øy_li°_‰ì_‚
 *
‰ì_‚
);

42 
¨øy_li°_‰ì
(
¨øy_li°
 *
Æ
);

45 
¨øy_li°_gë_idx
(
¨øy_li°
 *
Æ
, 
size_t
 
i
);

48 
¨øy_li°_put_idx
(
¨øy_li°
 *
Æ
, 
size_t
 
i
, *
d©a
);

51 
¨øy_li°_add
(
¨øy_li°
 *
Æ
, *
d©a
);

53 
size_t


54 
¨øy_li°_Àngth
(
¨øy_li°
 *
Æ
);

57 
¨øy_li°_s‹t
(
¨øy_li°
 *
¨r
, (*
com∑r
)(const *, const *));

60 
¨øy_li°_b£¨ch
(c⁄° **
key
, 
¨øy_li°
 *
¨r
,

61 (*
com∑r
)(const *, const *));

64 
¨øy_li°_dñ_idx
(
¨øy_li°
 *
¨r
, 
size_t
 
idx
, size_à
cou¡
);

66 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/include/json-c/debug.h

17 #i‚de‡
_DEBUG_H_


18 
	#_DEBUG_H_


	)

20 
	~<°dlib.h
>

22 #ifde‡
__˝lu•lus


26 #i‚de‡
JSON_EXPORT


27 #i‡
deföed
(
_MSC_VER
)

28 
	#JSON_EXPORT
 
	`__de˛•ec
(
dŒexp‹t
)

	)

30 
	#JSON_EXPORT
 

	)

34 
JSON_EXPORT
 
mc_£t_debug
(
debug
);

35 
JSON_EXPORT
 
mc_gë_debug
();

37 
JSON_EXPORT
 
mc_£t_sy¶og
(
sy¶og
);

39 
JSON_EXPORT
 
mc_debug
(c⁄° *
msg
, ...);

40 
JSON_EXPORT
 
mc_îr‹
(c⁄° *
msg
, ...);

41 
JSON_EXPORT
 
mc_öfo
(c⁄° *
msg
, ...);

43 #i‚de‡
__STRING


44 
	#__STRING
(
x
Ë#x

	)

47 #i‚de‡
PARSER_BROKEN_FIXED


49 
	#JASSERT
(
c⁄d
Ëdÿ{} 0)

	)

53 
	#JASSERT
(
c⁄d
) do { \

54 i‡(!(
c⁄d
)) { \

55 
	`mc_îr‹
("cjs⁄ás£π faûuª %s:%d : c⁄d \"" 
	`__STRING
(
c⁄d
Ë"Áûed\n", 
__FILE__
, 
__LINE__
); \

57 
	`ab‹t
(); \

59 } 0)

	)

63 
	#MC_ERROR
(
x
, ...Ë
	`mc_îr‹
(x, ##
__VA_ARGS__
)

	)

65 #ifde‡
MC_MAINTAINER_MODE


66 
	#MC_SET_DEBUG
(
x
Ë
	`mc_£t_debug
(x)

	)

67 
	#MC_GET_DEBUG
(Ë
	`mc_gë_debug
()

	)

68 
	#MC_SET_SYSLOG
(
x
Ë
	`mc_£t_sy¶og
(x)

	)

69 
	#MC_DEBUG
(
x
, ...Ë
	`mc_debug
(x, ##
__VA_ARGS__
)

	)

70 
	#MC_INFO
(
x
, ...Ë
	`mc_öfo
(x, ##
__VA_ARGS__
)

	)

72 
	#MC_SET_DEBUG
(
x
Ëi‡(0Ë
	`mc_£t_debug
(x)

	)

73 
	#MC_GET_DEBUG
(Ë(0)

	)

74 
	#MC_SET_SYSLOG
(
x
Ëi‡(0Ë
	`mc_£t_sy¶og
(x)

	)

75 
	#MC_DEBUG
(
x
, ...Ëi‡(0Ë
	`mc_debug
(x, ##
__VA_ARGS__
)

	)

76 
	#MC_INFO
(
x
, ...Ëi‡(0Ë
	`mc_öfo
(x, ##
__VA_ARGS__
)

	)

79 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/include/json-c/json.h

17 #i‚de‡
_js⁄_h_


18 
	#_js⁄_h_


	)

20 #ifde‡
__˝lu•lus


24 
	~"debug.h
"

25 
	~"lökhash.h
"

26 
	~"¨øyli°.h
"

27 
	~"js⁄_utû.h
"

28 
	~"js⁄_obje˘.h
"

29 
	~"js⁄_poöãr.h
"

30 
	~"js⁄_tokíî.h
"

31 
	~"js⁄_obje˘_ôî©‹.h
"

32 
	~"js⁄_c_vîsi⁄.h
"

34 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/include/json-c/json_c_version.h

12 #i‚de‡
_js⁄_c_vîsi⁄_h_


13 
	#_js⁄_c_vîsi⁄_h_


	)

15 
	#JSON_C_MAJOR_VERSION
 0

	)

16 
	#JSON_C_MINOR_VERSION
 13

	)

17 
	#JSON_C_MICRO_VERSION
 99

	)

18 
	#JSON_C_VERSION_NUM
 ((
JSON_C_MAJOR_VERSION
 << 16) | \

19 (
JSON_C_MINOR_VERSION
 << 8) | \

20 
JSON_C_MICRO_VERSION
)

	)

21 
	#JSON_C_VERSION
 "0.13.99"

	)

23 #i‚de‡
JSON_EXPORT


24 #i‡
deföed
(
_MSC_VER
)

25 
	#JSON_EXPORT
 
	`__de˛•ec
(
dŒexp‹t
)

	)

27 
	#JSON_EXPORT
 

	)

35 
JSON_EXPORT
 c⁄° *
js⁄_c_vîsi⁄
();

46 
JSON_EXPORT
 
js⁄_c_vîsi⁄_num
();

	@/var/www/html/debian/gateway/include/json-c/json_config.h

4 
	#JSON_C_HAVE_INTTYPES_H
 1

	)

	@/var/www/html/debian/gateway/include/json-c/json_inttypes.h

6 #i‚de‡
_js⁄_öây≥s_h_


7 
	#_js⁄_öây≥s_h_


	)

9 
	~"js⁄_c⁄fig.h
"

11 #ifde‡
JSON_C_HAVE_INTTYPES_H


13 
	~<öây≥s.h
>

16 
	~<°döt.h
>

18 
	#PRId64
 "I64d"

	)

19 
	#SCNd64
 "I64d"

	)

	@/var/www/html/debian/gateway/include/json-c/json_object.h

17 #i‚de‡
_js⁄_obje˘_h_


18 
	#_js⁄_obje˘_h_


	)

20 #ifde‡
__GNUC__


21 
	#THIS_FUNCTION_IS_DEPRECATED
(
func
Ëfun¯
	`__©åibuã__
 ((
dïªˇãd
))

	)

22 #ñi‡
deföed
(
_MSC_VER
)

23 
	#THIS_FUNCTION_IS_DEPRECATED
(
func
Ë
	`__de˛•ec
(
dïªˇãd
Ë
	)
func

24 #ñi‡
deföed
(
__˛™g__
)

25 
	#THIS_FUNCTION_IS_DEPRECATED
(
func
Ëfun¯
__dïªˇãd


	)

27 
	#THIS_FUNCTION_IS_DEPRECATED
(
func
Ë
	)
func

30 #ifde‡
__GNUC__


31 
	#JSON_C_CONST_FUNCTION
(
func
Ëfun¯
	`__©åibuã__
((c⁄°))

	)

33 
	#JSON_C_CONST_FUNCTION
(
func
Ë
	)
func

36 #i‚de‡
JSON_EXPORT


37 #i‡
deföed
(
_MSC_VER
)

38 
	#JSON_EXPORT
 
	`__de˛•ec
(
dŒexp‹t
)

	)

40 
	#JSON_EXPORT
 

	)

44 
	~<°ddef.h
>

45 
	~"js⁄_öây≥s.h
"

46 
	~"¥ötbuf.h
"

48 #ifde‡
__˝lu•lus


52 
	#JSON_OBJECT_DEF_HASH_ENTRIES
 16

	)

59 
	#JSON_C_TO_STRING_PLAIN
 0

	)

65 
	#JSON_C_TO_STRING_SPACED
 (1<<0)

	)

74 
	#JSON_C_TO_STRING_PRETTY
 (1<<1)

	)

82 
	#JSON_C_TO_STRING_PRETTY_TAB
 (1<<3)

	)

86 
	#JSON_C_TO_STRING_NOZERO
 (1<<2)

	)

91 
	#JSON_C_TO_STRING_NOSLASHESCAPE
 (1<<4)

	)

103 
	#JSON_C_OBJECT_ADD_KEY_IS_NEW
 (1<<1)

	)

121 
	#JSON_C_OBJECT_KEY_IS_CONSTANT
 (1<<2)

	)

129 
	#JSON_C_OPTION_GLOBAL
 (0)

	)

137 
	#JSON_C_OPTION_THREAD
 (1)

	)

143 
	sjs⁄_obje˘_ôî


145 *
key
;

146 
js⁄_obje˘
 *
vÆ
;

147 
lh_íåy
 *
íåy
;

149 
js⁄_obje˘_ôî
 
	tjs⁄_obje˘_ôî
;

151 
	tjs⁄_boﬁ
;

156 
js⁄_obje˘
 
	tjs⁄_obje˘
;

161 (
js⁄_obje˘_dñëe_‚
)(
	tjs⁄_obje˘
 *
	tjso
, *
	tu£rd©a
);

166 (
js⁄_obje˘_to_js⁄_°rög_‚
)(
	tjs⁄_obje˘
 *
	tjso
,

167 
	t¥ötbuf
 *
	tpb
,

168 
	tÀvñ
,

169 
	tÊags
);

173 
	ejs⁄_ty≥
 {

175 
js⁄_ty≥_nuŒ
,

176 
js⁄_ty≥_boﬁón
,

177 
js⁄_ty≥_doubÀ
,

178 
js⁄_ty≥_öt
,

179 
js⁄_ty≥_obje˘
,

180 
js⁄_ty≥_¨øy
,

181 
js⁄_ty≥_°rög


182 } 
	tjs⁄_ty≥
;

192 
JSON_EXPORT
 
js⁄_obje˘
* 
js⁄_obje˘_gë
(js⁄_obje˘ *
obj
);

203 
JSON_EXPORT
 
js⁄_obje˘_put
(
js⁄_obje˘
 *
obj
);

217 
JSON_EXPORT
 
js⁄_obje˘_is_ty≥
(c⁄° 
js⁄_obje˘
 *
obj
, 
js⁄_ty≥
 
ty≥
);

233 
JSON_EXPORT
 
js⁄_ty≥
 
js⁄_obje˘_gë_ty≥
(c⁄° 
js⁄_obje˘
 *
obj
);

245 
JSON_EXPORT
 c⁄° * 
js⁄_obje˘_to_js⁄_°rög
(
js⁄_obje˘
 *
obj
);

253 
JSON_EXPORT
 c⁄° * 
js⁄_obje˘_to_js⁄_°rög_ext
(
js⁄_obje˘
 *
obj
, 

254 
Êags
);

263 
JSON_EXPORT
 c⁄° * 
js⁄_obje˘_to_js⁄_°rög_Àngth
(
js⁄_obje˘
 *
obj
, 

264 
Êags
, 
size_t
 *
Àngth
);

272 
JSON_EXPORT
 * 
js⁄_obje˘_gë_u£rd©a
(
js⁄_obje˘
 *
jso
);

299 
JSON_EXPORT
 
js⁄_obje˘_£t_u£rd©a
(
js⁄_obje˘
 *
jso
, *
u£rd©a
,

300 
js⁄_obje˘_dñëe_‚
 *
u£r_dñëe
);

332 
JSON_EXPORT
 
js⁄_obje˘_£t_£rülizî
(
js⁄_obje˘
 *
jso
,

333 
js⁄_obje˘_to_js⁄_°rög_‚
 *
to_°rög_func
,

334 *
u£rd©a
,

335 
js⁄_obje˘_dñëe_‚
 *
u£r_dñëe
);

337 #ifde‡
__˛™g__


343 #¥agm®
˛™g
 
dügno°ic
 
push


344 #¥agm®
˛™g
 
dügno°ic
 
ign‹ed
 "-Wdocumentation"

354 
JSON_EXPORT
 
js⁄_obje˘_dñëe_‚
 
js⁄_obje˘_‰ì_u£rd©a
;

365 
JSON_EXPORT
 
js⁄_obje˘_to_js⁄_°rög_‚
 
js⁄_obje˘_u£rd©a_to_js⁄_°rög
;

367 #ifde‡
__˛™g__


369 #¥agm®
˛™g
 
dügno°ic
 
p›


385 
JSON_EXPORT
 
js⁄_obje˘
* 
js⁄_obje˘_√w_obje˘
();

391 
JSON_EXPORT
 
lh_èbÀ
* 
js⁄_obje˘_gë_obje˘
(c⁄° 
js⁄_obje˘
 *
obj
);

396 
JSON_EXPORT
 
js⁄_obje˘_obje˘_Àngth
(c⁄° 
js⁄_obje˘
* 
obj
);

401 
JSON_C_CONST_FUNCTION
(
JSON_EXPORT
 
size_t
 
js⁄_c_obje˘_sizeof
());

422 
JSON_EXPORT
 
js⁄_obje˘_obje˘_add
(
js⁄_obje˘
* 
obj
, c⁄° *
key
,

423 
js⁄_obje˘
 *
vÆ
);

438 
JSON_EXPORT
 
js⁄_obje˘_obje˘_add_ex
(
js⁄_obje˘
* 
obj
,

439 c⁄° *c⁄° 
key
,

440 
js⁄_obje˘
 *c⁄° 
vÆ
,

441 c⁄° 
›ts
);

464 
JSON_EXPORT
 
js⁄_obje˘
* 
js⁄_obje˘_obje˘_gë
(c⁄° js⁄_obje˘* 
obj
,

465 c⁄° *
key
);

485 
JSON_EXPORT
 
js⁄_boﬁ
 
js⁄_obje˘_obje˘_gë_ex
(c⁄° 
js⁄_obje˘
* 
obj
,

486 c⁄° *
key
,

487 
js⁄_obje˘
 **
vÆue
);

498 
JSON_EXPORT
 
js⁄_obje˘_obje˘_dñ
(
js⁄_obje˘
* 
obj
, c⁄° *
key
);

513 #i‡
deföed
(
__GNUC__
Ë&& !deföed(
__STRICT_ANSI__
Ë&& 
__STDC_VERSION__
 >= 199901L

515 
	#js⁄_obje˘_obje˘_f‹óch
(
obj
,
key
,
vÆ
) \

516 *
key
 = 
NULL
; \

517 
js⁄_obje˘
 *
vÆ
 
	`__©åibuã__
((
__unu£d__
)Ë
NULL
; \

518 
lh_íåy
 *
íåy
 ## 
key
 = 
	`js⁄_obje˘_gë_obje˘
(
obj
)->
hód
, *
íåy_√xt
 ## key = 
NULL
; \

519 ({ if(
íåy
 ## 
key
) { \

520 
key
 = (*)
	`lh_íåy_k
(
íåy
 ## key); \

521 
vÆ
 = (
js⁄_obje˘
*)
	`lh_íåy_v
(
íåy
 ## 
key
); \

522 
íåy_√xt
 ## 
key
 = 
íåy
 ## key->
√xt
; \

523 } ; 
íåy
 ## 
key
; }); \

524 
íåy
 ## 
key
 = 
íåy_√xt
 ## key )

	)

528 
	#js⁄_obje˘_obje˘_f‹óch
(
obj
,
key
,
vÆ
) \

529 *
key
 = 
NULL
;\

530 
js⁄_obje˘
 *
vÆ
 = 
NULL
; \

531 
lh_íåy
 *
íåy
 ## 
key
; \

532 
lh_íåy
 *
íåy_√xt
 ## 
key
 = 
NULL
; \

533 
íåy
 ## 
key
 = 
	`js⁄_obje˘_gë_obje˘
(
obj
)->
hód
; \

534 (
íåy
 ## 
key
 ? ( \

535 
key
 = (*)
	`lh_íåy_k
(
íåy
 ## key), \

536 
vÆ
 = (
js⁄_obje˘
*)
	`lh_íåy_v
(
íåy
 ## 
key
), \

537 
íåy_√xt
 ## 
key
 = 
íåy
 ## key->
√xt
, \

538 
íåy
 ## 
key
) : 0); \

539 
íåy
 ## 
key
 = 
íåy_√xt
 ## key)

	)

547 
	#js⁄_obje˘_obje˘_f‹óchC
(
obj
,
ôî
) \

548 
ôî
.
íåy
 = 
	`js⁄_obje˘_gë_obje˘
(
obj
)->
hód
; \

549 (
ôî
.
íåy
 ? (ôî.
key
 = (*)
	`lh_íåy_k
(ôî.íåy), iãr.
vÆ
 = (
js⁄_obje˘
*)
	`lh_íåy_v
(iter.entry), iter.entry) : 0); \

550 
ôî
.
íåy
 = iãr.íåy->
√xt
)

	)

557 
JSON_EXPORT
 
js⁄_obje˘
* 
js⁄_obje˘_√w_¨øy
();

563 
JSON_EXPORT
 
¨øy_li°
* 
js⁄_obje˘_gë_¨øy
(c⁄° 
js⁄_obje˘
 *
obj
);

569 
JSON_EXPORT
 
size_t
 
js⁄_obje˘_¨øy_Àngth
(c⁄° 
js⁄_obje˘
 *
obj
);

579 
JSON_EXPORT
 
js⁄_obje˘_¨øy_s‹t
(
js⁄_obje˘
 *
jso
, (*
s‹t_‚
)(const *, const *));

595 
JSON_EXPORT
 
js⁄_obje˘
* 
js⁄_obje˘_¨øy_b£¨ch
(

596 c⁄° 
js⁄_obje˘
 *
key
,

597 c⁄° 
js⁄_obje˘
 *
jso
,

598 (*
s‹t_‚
)(const *, const *));

609 
JSON_EXPORT
 
js⁄_obje˘_¨øy_add
(
js⁄_obje˘
 *
obj
,

610 
js⁄_obje˘
 *
vÆ
);

627 
JSON_EXPORT
 
js⁄_obje˘_¨øy_put_idx
(
js⁄_obje˘
 *
obj
, 
size_t
 
idx
,

628 
js⁄_obje˘
 *
vÆ
);

635 
JSON_EXPORT
 
js⁄_obje˘
* 
js⁄_obje˘_¨øy_gë_idx
(c⁄° js⁄_obje˘ *
obj
,

636 
size_t
 
idx
);

649 
JSON_EXPORT
 
js⁄_obje˘_¨øy_dñ_idx
(
js⁄_obje˘
 *
obj
, 
size_t
 
idx
, size_à
cou¡
);

657 
JSON_EXPORT
 
js⁄_obje˘
* 
js⁄_obje˘_√w_boﬁón
(
js⁄_boﬁ
 
b
);

670 
JSON_EXPORT
 
js⁄_boﬁ
 
js⁄_obje˘_gë_boﬁón
(c⁄° 
js⁄_obje˘
 *
obj
);

683 
JSON_EXPORT
 
js⁄_obje˘_£t_boﬁón
(
js⁄_obje˘
 *
obj
,
js⁄_boﬁ
 
√w_vÆue
);

694 
JSON_EXPORT
 
js⁄_obje˘
* 
js⁄_obje˘_√w_öt
(
öt32_t
 
i
);

701 
JSON_EXPORT
 
js⁄_obje˘
* 
js⁄_obje˘_√w_öt64
(
öt64_t
 
i
);

718 
JSON_EXPORT
 
öt32_t
 
js⁄_obje˘_gë_öt
(c⁄° 
js⁄_obje˘
 *
obj
);

730 
JSON_EXPORT
 
js⁄_obje˘_£t_öt
(
js⁄_obje˘
 *
obj
,
√w_vÆue
);

746 
JSON_EXPORT
 
js⁄_obje˘_öt_öc
(
js⁄_obje˘
 *
obj
, 
öt64_t
 
vÆ
);

762 
JSON_EXPORT
 
öt64_t
 
js⁄_obje˘_gë_öt64
(c⁄° 
js⁄_obje˘
 *
obj
);

775 
JSON_EXPORT
 
js⁄_obje˘_£t_öt64
(
js⁄_obje˘
 *
obj
,
öt64_t
 
√w_vÆue
);

786 
JSON_EXPORT
 
js⁄_obje˘
* 
js⁄_obje˘_√w_doubÀ
(
d
);

815 
JSON_EXPORT
 
js⁄_obje˘
* 
js⁄_obje˘_√w_doubÀ_s
(
d
, c⁄° *
ds
);

829 
JSON_EXPORT
 
js⁄_c_£t_£rüliz©i⁄_doubÀ_f‹m©
(c⁄° *
doubÀ_f‹m©
, 
globÆ_‹_thªad
);

852 
JSON_EXPORT
 
js⁄_obje˘_doubÀ_to_js⁄_°rög
(
js⁄_obje˘
* 
jso
,

853 
¥ötbuf
 *
pb
,

854 
Àvñ
,

855 
Êags
);

880 
JSON_EXPORT
 
js⁄_obje˘_gë_doubÀ
(c⁄° 
js⁄_obje˘
 *
obj
);

896 
JSON_EXPORT
 
js⁄_obje˘_£t_doubÀ
(
js⁄_obje˘
 *
obj
,
√w_vÆue
);

910 
JSON_EXPORT
 
js⁄_obje˘
* 
js⁄_obje˘_√w_°rög
(c⁄° *
s
);

922 
JSON_EXPORT
 
js⁄_obje˘
* 
js⁄_obje˘_√w_°rög_Àn
(c⁄° *
s
, c⁄° 
Àn
);

940 
JSON_EXPORT
 c⁄° * 
js⁄_obje˘_gë_°rög
(
js⁄_obje˘
 *
obj
);

950 
JSON_EXPORT
 
js⁄_obje˘_gë_°rög_Àn
(c⁄° 
js⁄_obje˘
 *
obj
);

957 
JSON_EXPORT
 
js⁄_obje˘_£t_°rög
(
js⁄_obje˘
* 
obj
, c⁄° * 
√w_vÆue
);

970 
JSON_EXPORT
 
js⁄_obje˘_£t_°rög_Àn
(
js⁄_obje˘
* 
obj
, c⁄° * 
√w_vÆue
, 
Àn
);

976 
JSON_EXPORT
 
js⁄_obje˘
* 
js⁄_obje˘_√w_nuŒ
();

995 
JSON_EXPORT
 
js⁄_obje˘_equÆ
(
js⁄_obje˘
 *
obj1
,

996 
js⁄_obje˘
 *
obj2
);

1012 (
js⁄_c_shÆlow_c›y_‚
)(
	tjs⁄_obje˘
 *
	t§c
, js⁄_obje˘ *
	t∑ª¡
, c⁄° *
	tkey
, 
	tsize_t
 
	tödex
, js⁄_obje˘ **
	td°
);

1026 
JSON_EXPORT
 
js⁄_c_shÆlow_c›y_‚
 
js⁄_c_shÆlow_c›y_deÁu…
;

1047 
JSON_EXPORT
 
js⁄_obje˘_dìp_c›y
(
js⁄_obje˘
 *
§c
, js⁄_obje˘ **
d°
, 
js⁄_c_shÆlow_c›y_‚
 *
shÆlow_c›y
);

1048 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/include/json-c/json_object_iterator.h

24 #i‚de‡
JSON_OBJECT_ITERATOR_H


25 
	#JSON_OBJECT_ITERATOR_H


	)

27 
	~<°ddef.h
>

29 #i‚de‡
JSON_EXPORT


30 #i‡
deföed
(
_MSC_VER
)

31 
	#JSON_EXPORT
 
	`__de˛•ec
(
dŒexp‹t
)

	)

33 
	#JSON_EXPORT
 

	)

37 #ifde‡
__˝lu•lus


44 
js⁄_obje˘_ôî_öfo_
;

50 
	sjs⁄_obje˘_ôî©‹
 {

51 c⁄° * 
›aque_
;

58 
js⁄_obje˘
;

83 
JSON_EXPORT
 
js⁄_obje˘_ôî©‹


84 
js⁄_obje˘_ôî_öô_deÁu…
();

117 
JSON_EXPORT
 
js⁄_obje˘_ôî©‹


118 
js⁄_obje˘_ôî_begö
(
js⁄_obje˘
* 
obj
);

148 
JSON_EXPORT
 
js⁄_obje˘_ôî©‹


149 
js⁄_obje˘_ôî_íd
(c⁄° 
js⁄_obje˘
* 
obj
);

166 
JSON_EXPORT
 

167 
js⁄_obje˘_ôî_√xt
(
js⁄_obje˘_ôî©‹
* 
ôî
);

185 
JSON_EXPORT
 const *

186 
js⁄_obje˘_ôî_≥ek_«me
(c⁄° 
js⁄_obje˘_ôî©‹
* 
ôî
);

208 
JSON_EXPORT
 
js⁄_obje˘
*

209 
js⁄_obje˘_ôî_≥ek_vÆue
(c⁄° 
js⁄_obje˘_ôî©‹
* 
ôî
);

238 
JSON_EXPORT
 
js⁄_boﬁ


239 
js⁄_obje˘_ôî_equÆ
(c⁄° 
js⁄_obje˘_ôî©‹
* 
ôî1
,

240 c⁄° 
js⁄_obje˘_ôî©‹
* 
ôî2
);

243 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/include/json-c/json_pointer.h

14 #i‚de‡
_js⁄_poöãr_h_


15 
	#_js⁄_poöãr_h_


	)

17 
	~"js⁄_obje˘.h
"

19 #ifde‡
__˝lu•lus


47 
JSON_EXPORT
 
js⁄_poöãr_gë
(
js⁄_obje˘
 *
obj
, c⁄° *
∑th
, js⁄_obje˘ **
ªs
);

65 
JSON_EXPORT
 
js⁄_poöãr_gëf
(
js⁄_obje˘
 *
obj
, js⁄_obje˘ **
ªs
, c⁄° *
∑th_fmt
, ...);

96 
JSON_EXPORT
 
js⁄_poöãr_£t
(
js⁄_obje˘
 **
obj
, c⁄° *
∑th
, js⁄_obje˘ *
vÆue
);

113 
JSON_EXPORT
 
js⁄_poöãr_£tf
(
js⁄_obje˘
 **
obj
, js⁄_obje˘ *
vÆue
, c⁄° *
∑th_fmt
, ...);

116 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/include/json-c/json_tokener.h

16 #i‚de‡
_js⁄_tokíî_h_


17 
	#_js⁄_tokíî_h_


	)

19 
	~<°ddef.h
>

20 
	~"js⁄_obje˘.h
"

22 #ifde‡
__˝lu•lus


26 
	ejs⁄_tokíî_îr‹
 {

27 
js⁄_tokíî_suc˚ss
,

28 
js⁄_tokíî_c⁄töue
,

29 
js⁄_tokíî_îr‹_dïth
,

30 
js⁄_tokíî_îr‹_∑r£_eof
,

31 
js⁄_tokíî_îr‹_∑r£_u√x≥˘ed
,

32 
js⁄_tokíî_îr‹_∑r£_nuŒ
,

33 
js⁄_tokíî_îr‹_∑r£_boﬁón
,

34 
js⁄_tokíî_îr‹_∑r£_numbî
,

35 
js⁄_tokíî_îr‹_∑r£_¨øy
,

36 
js⁄_tokíî_îr‹_∑r£_obje˘_key_«me
,

37 
js⁄_tokíî_îr‹_∑r£_obje˘_key_£p
,

38 
js⁄_tokíî_îr‹_∑r£_obje˘_vÆue_£p
,

39 
js⁄_tokíî_îr‹_∑r£_°rög
,

40 
js⁄_tokíî_îr‹_∑r£_commít
,

41 
js⁄_tokíî_îr‹_∑r£_utf8_°rög
,

42 
js⁄_tokíî_îr‹_size


45 
	ejs⁄_tokíî_°©e
 {

46 
js⁄_tokíî_°©e_ótws
,

47 
js⁄_tokíî_°©e_°¨t
,

48 
js⁄_tokíî_°©e_föish
,

49 
js⁄_tokíî_°©e_nuŒ
,

50 
js⁄_tokíî_°©e_commít_°¨t
,

51 
js⁄_tokíî_°©e_commít
,

52 
js⁄_tokíî_°©e_commít_eﬁ
,

53 
js⁄_tokíî_°©e_commít_íd
,

54 
js⁄_tokíî_°©e_°rög
,

55 
js⁄_tokíî_°©e_°rög_esˇ≥
,

56 
js⁄_tokíî_°©e_esˇ≥_unicode
,

57 
js⁄_tokíî_°©e_boﬁón
,

58 
js⁄_tokíî_°©e_numbî
,

59 
js⁄_tokíî_°©e_¨øy
,

60 
js⁄_tokíî_°©e_¨øy_add
,

61 
js⁄_tokíî_°©e_¨øy_£p
,

62 
js⁄_tokíî_°©e_obje˘_fõld_°¨t
,

63 
js⁄_tokíî_°©e_obje˘_fõld
,

64 
js⁄_tokíî_°©e_obje˘_fõld_íd
,

65 
js⁄_tokíî_°©e_obje˘_vÆue
,

66 
js⁄_tokíî_°©e_obje˘_vÆue_add
,

67 
js⁄_tokíî_°©e_obje˘_£p
,

68 
js⁄_tokíî_°©e_¨øy_a·î_£p
,

69 
js⁄_tokíî_°©e_obje˘_fõld_°¨t_a·î_£p
,

70 
js⁄_tokíî_°©e_öf


73 
	sjs⁄_tokíî_§ec


75 
js⁄_tokíî_°©e
 
°©e
, 
ßved_°©e
;

76 
js⁄_obje˘
 *
obj
;

77 
js⁄_obje˘
 *
cuºít
;

78 *
obj_fõld_«me
;

81 
	#JSON_TOKENER_DEFAULT_DEPTH
 32

	)

90 
	sjs⁄_tokíî


92 *
°r
;

93 
¥ötbuf
 *
pb
;

94 
max_dïth
, 
dïth
, 
is_doubÀ
, 
°_pos
;

98 
ch¨_off£t
;

99 
js⁄_tokíî_îr‹
 
îr
;

100 
ucs_ch¨
;

101 
quŸe_ch¨
;

102 
js⁄_tokíî_§ec
 *
°ack
;

103 
Êags
;

120 
JSON_EXPORT
 
size_t
 
js⁄_tokíî_gë_∑r£_íd
(
js⁄_tokíî
 *
tok
);

126 
js⁄_tokíî
 
	tjs⁄_tokíî
;

138 
	#JSON_TOKENER_STRICT
 0x01

	)

149 
	#JSON_TOKENER_VALIDATE_UTF8
 0x10

	)

157 
JSON_EXPORT
 c⁄° *
js⁄_tokíî_îr‹_desc
(
js⁄_tokíî_îr‹
 
jîr
);

168 
JSON_EXPORT
 
js⁄_tokíî_îr‹
 
js⁄_tokíî_gë_îr‹
(
js⁄_tokíî
 *
tok
);

170 
JSON_EXPORT
 
js⁄_tokíî
* 
js⁄_tokíî_√w
();

171 
JSON_EXPORT
 
js⁄_tokíî
* 
js⁄_tokíî_√w_ex
(
dïth
);

172 
JSON_EXPORT
 
js⁄_tokíî_‰ì
(
js⁄_tokíî
 *
tok
);

173 
JSON_EXPORT
 
js⁄_tokíî_ª£t
(
js⁄_tokíî
 *
tok
);

174 
JSON_EXPORT
 
js⁄_obje˘
* 
js⁄_tokíî_∑r£
(c⁄° *
°r
);

175 
JSON_EXPORT
 
js⁄_obje˘
* 
js⁄_tokíî_∑r£_vîbo£
(c⁄° *
°r
, 
js⁄_tokíî_îr‹
 *
îr‹
);

181 
js⁄_boﬁ
 
js⁄_tokíî_vÆid©e_utf8
(c⁄° 
c
, *
nByãs
);

185 
JSON_EXPORT
 
js⁄_tokíî_£t_Êags
(
js⁄_tokíî
 *
tok
, 
Êags
);

256 
JSON_EXPORT
 
js⁄_obje˘
* 
js⁄_tokíî_∑r£_ex
(
js⁄_tokíî
 *
tok
,

257 c⁄° *
°r
, 
Àn
);

259 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/include/json-c/json_util.h

16 #i‚de‡
_js⁄_utû_h_


17 
	#_js⁄_utû_h_


	)

19 
	~"js⁄_obje˘.h
"

21 #i‚de‡
js⁄_mö


22 
	#js⁄_mö
(
a
,
b
Ë(◊Ë< (bË? (aË: (b))

	)

25 #i‚de‡
js⁄_max


26 
	#js⁄_max
(
a
,
b
Ë(◊Ë> (bË? (aË: (b))

	)

30 #ifde‡
__˝lu•lus


34 
	#JSON_FILE_BUF_SIZE
 4096

	)

43 
JSON_EXPORT
 
js⁄_obje˘
* 
js⁄_obje˘_‰om_fûe
(c⁄° *
fûíame
);

59 
JSON_EXPORT
 
js⁄_obje˘
* 
js⁄_obje˘_‰om_fd_ex
(
fd
, 
dïth
);

67 
JSON_EXPORT
 
js⁄_obje˘
* 
js⁄_obje˘_‰om_fd
(
fd
);

75 
JSON_EXPORT
 
js⁄_obje˘_to_fûe
(c⁄° *
fûíame
, 
js⁄_obje˘
 *
obj
);

83 
JSON_EXPORT
 
js⁄_obje˘_to_fûe_ext
(c⁄° *
fûíame
, 
js⁄_obje˘
 *
obj
, 
Êags
);

95 
JSON_EXPORT
 
js⁄_obje˘_to_fd
(
fd
, 
js⁄_obje˘
 *
obj
, 
Êags
);

102 
JSON_EXPORT
 c⁄° *
js⁄_utû_gë_œ°_îr
();

105 
JSON_EXPORT
 
js⁄_∑r£_öt64
(c⁄° *
buf
, 
öt64_t
 *
ªtvÆ
);

106 
JSON_EXPORT
 
js⁄_∑r£_doubÀ
(c⁄° *
buf
, *
ªtvÆ
);

112 
JSON_EXPORT
 c⁄° *
js⁄_ty≥_to_«me
(
js⁄_ty≥
 
o_ty≥
);

114 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/include/json-c/json_visit.h

2 #i‚de‡
_js⁄_c_js⁄_visô_h_


3 
	#_js⁄_c_js⁄_visô_h_


	)

9 
	~"js⁄_obje˘.h
"

11 (
	tjs⁄_c_visô_u£rfunc
)(
	tjs⁄_obje˘
 *
	tjso
, 
	tÊags
,

12 
	tjs⁄_obje˘
 *
	t∑ª¡_jso
, c⁄° *
	tjso_key
,

13 
	tsize_t
 *
	tjso_ödex
, *
	tu£ørg
);

34 
JSON_EXPORT
 
	`js⁄_c_visô
(
js⁄_obje˘
 *
jso
, 
futuª_Êags
,

35 
js⁄_c_visô_u£rfunc
 *
u£rfunc
, *
u£ørg
);

42 
	#JSON_C_VISIT_SECOND
 0x02

	)

48 
	#JSON_C_VISIT_RETURN_CONTINUE
 0

	)

57 
	#JSON_C_VISIT_RETURN_SKIP
 7547

	)

81 
	#JSON_C_VISIT_RETURN_POP
 767

	)

87 
	#JSON_C_VISIT_RETURN_STOP
 7867

	)

93 
	#JSON_C_VISIT_RETURN_ERROR
 -1

	)

	@/var/www/html/debian/gateway/include/json-c/linkhash.h

19 #i‚de‡
_lökhash_h_


20 
	#_lökhash_h_


	)

22 
	~"js⁄_obje˘.h
"

24 #ifde‡
__˝lu•lus


31 
	#LH_PRIME
 0x9e370001UL

	)

38 
	#LH_LOAD_FACTOR
 0.66

	)

43 
	#LH_EMPTY
 (*)-1

	)

48 
	#LH_FREED
 (*)-2

	)

53 
	#JSON_C_STR_HASH_DFLT
 0

	)

58 
	#JSON_C_STR_HASH_PERLLIKE
 1

	)

65 
js⁄_globÆ_£t_°rög_hash
(c⁄° 
h
);

67 
lh_íåy
;

72 (
lh_íåy_‰ì_‚
Ë(
	tlh_íåy
 *
	te
);

76 (
	tlh_hash_‚
Ë(c⁄° *
	tk
);

80 (
lh_equÆ_‚
Ë(c⁄° *
	tk1
, c⁄° *
	tk2
);

85 
	slh_íåy
 {

89 c⁄° *
k
;

94 
k_is_c⁄°™t
;

98 c⁄° *
v
;

102 
lh_íåy
 *
√xt
;

106 
lh_íåy
 *
¥ev
;

113 
	slh_èbÀ
 {

117 
size
;

121 
cou¡
;

126 
lh_íåy
 *
hód
;

131 
lh_íåy
 *
èû
;

133 
lh_íåy
 *
èbÀ
;

138 
lh_íåy_‰ì_‚
 *
‰ì_‚
;

139 
lh_hash_‚
 *
hash_‚
;

140 
lh_equÆ_‚
 *
equÆ_‚
;

142 
lh_èbÀ
 
	tlh_èbÀ
;

148 
	#lh_f‹óch
(
èbÀ
, 
íåy
) \

149 
íåy
 = 
èbÀ
->
hód
;É¡ry;É¡ry =É¡ry->
√xt
)

	)

158 
	#lh_f‹óch_ß„
(
èbÀ
, 
íåy
, 
tmp
) \

159 
íåy
 = 
èbÀ
->
hód
;É¡ry && ((
tmp
 =É¡ry->
√xt
Ë|| 1);É¡ry =Åmp)

	)

181 
lh_èbÀ
* 
lh_èbÀ_√w
(
size
,

182 
lh_íåy_‰ì_‚
 *
‰ì_‚
,

183 
lh_hash_‚
 *
hash_‚
,

184 
lh_equÆ_‚
 *
equÆ_‚
);

194 
lh_èbÀ
* 
lh_kch¨_èbÀ_√w
(
size
,

195 
lh_íåy_‰ì_‚
 *
‰ì_‚
);

206 
lh_èbÀ
* 
lh_k±r_èbÀ_√w
(
size
,

207 
lh_íåy_‰ì_‚
 *
‰ì_‚
);

218 
lh_èbÀ_‰ì
(
lh_èbÀ
 *
t
);

231 
lh_èbÀ_ö£π
(
lh_èbÀ
 *
t
, c⁄° *
k
, c⁄° *
v
);

248 
lh_èbÀ_ö£π_w_hash
(
lh_èbÀ
 *
t
, c⁄° *
k
, c⁄° *
v
, c⁄° 
h
, c⁄° 
›ts
);

258 
lh_íåy
* 
lh_èbÀ_lookup_íåy
(
lh_èbÀ
 *
t
, c⁄° *
k
);

272 
lh_íåy
* 
lh_èbÀ_lookup_íåy_w_hash
(
lh_èbÀ
 *
t
, c⁄° *
k
, c⁄° 
h
);

282 
js⁄_boﬁ
 
lh_èbÀ_lookup_ex
(
lh_èbÀ
 *
t
, c⁄° *
k
, **
v
);

294 
lh_èbÀ_dñëe_íåy
(
lh_èbÀ
 *
t
, 
lh_íåy
 *
e
);

307 
lh_èbÀ_dñëe
(
lh_èbÀ
 *
t
, c⁄° *
k
);

309 
lh_èbÀ_Àngth
(
lh_èbÀ
 *
t
);

320 
lh_èbÀ_ªsize
(
lh_èbÀ
 *
t
, 
√w_size
);

326 #i‡!
deföed
(
_MSC_VER
) || (_MSC_VER > 1800)

328 
	#_LH_INLINE
 
ölöe


	)

330 
	#_LH_INLINE


	)

344 
_LH_INLINE
 
lh_gë_hash
(c⁄° 
lh_èbÀ
 *
t
, c⁄° *
k
)

346  
	gt
->
hash_‚
(
k
);

349 #unde‡
_LH_INLINE


354 #ifde‡
__UNCONST


355 
	#_LH_UNCONST
(
a
Ë
	`__UNCONST
◊)

	)

357 
	#_LH_UNCONST
(
a
Ë((*)(
uöçå_t
)(c⁄° *)◊))

	)

367 
	#lh_íåy_k
(
íåy
Ë
	`_LH_UNCONST
(”¡ry)->
k
)

	)

375 
	#lh_íåy_v
(
íåy
Ë
	`_LH_UNCONST
(”¡ry)->
v
)

	)

377 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/include/json-c/printbuf.h

23 #i‚de‡
_¥ötbuf_h_


24 
	#_¥ötbuf_h_


	)

26 #i‚de‡
JSON_EXPORT


27 #i‡
deföed
(
_MSC_VER
)

28 
	#JSON_EXPORT
 
	`__de˛•ec
(
dŒexp‹t
)

	)

30 
	#JSON_EXPORT
 

	)

34 #ifde‡
__˝lu•lus


38 
	s¥ötbuf
 {

39 *
buf
;

40 
bpos
;

41 
size
;

43 
¥ötbuf
 
	t¥ötbuf
;

45 
JSON_EXPORT
 
¥ötbuf
*

46 
¥ötbuf_√w
();

56 
JSON_EXPORT
 

57 
¥ötbuf_mem≠≥nd
(
¥ötbuf
 *
p
, c⁄° *
buf
, 
size
);

59 
	#¥ötbuf_mem≠≥nd_Á°
(
p
, 
buÂå
, 
bufsize
) \

61 i‡((
p
->
size
 -Ö->
bpos
Ë> 
bufsize
) { \

62 
	`mem˝y
(
p
->
buf
 +Ö->
bpos
, (
buÂå
), 
bufsize
); \

63 
p
->
bpos
 +
bufsize
; \

64 
p
->
buf
[p->
bpos
]= '\0'; \

65 } { 
	`¥ötbuf_mem≠≥nd
(
p
, (
buÂå
), 
bufsize
); } \

66 } 0)

	)

68 
	#¥ötbuf_Àngth
(
p
Ë(’)->
bpos
)

	)

73 
	#_¥ötbuf_check_lôîÆ
(
my°r
Ë("" my°r)

	)

89 
	#¥ötbuf_°øµíd
(
pb
, 
°r
) \

90 
	`¥ötbuf_mem≠≥nd
 ((
pb
), 
	`_¥ötbuf_check_lôîÆ
(
°r
), (°rË- 1)

	)

100 
JSON_EXPORT
 

101 
¥ötbuf_mem£t
(
¥ötbuf
 *
pb
, 
off£t
, 
ch¨vÆue
, 
Àn
);

117 
JSON_EXPORT
 

118 
•rötbuf
(
¥ötbuf
 *
p
, c⁄° *
msg
, ...);

120 
JSON_EXPORT
 

121 
¥ötbuf_ª£t
(
¥ötbuf
 *
p
);

123 
JSON_EXPORT
 

124 
¥ötbuf_‰ì
(
¥ötbuf
 *
p
);

126 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/extensions/bootstrap/kaa_bootstrap_manager.c

17 
	~"kØ_¥iv©e.h
"

19 
	~<°dlib.h
>

20 
	~<°rög.h
>

21 
	~<°dboﬁ.h
>

22 
	~<°döt.h
>

23 
	~<sys/ty≥s.h
>

24 
	~"∂©f‹m/°dio.h
"

25 
	~"∂©f‹m/sock.h
"

26 
	~"kØ_deÁu…s.h
"

27 
	~"kØ_∂©f‹m_comm⁄.h
"

28 
	~"kØ_∂©f‹m_utûs.h
"

29 
	~"cﬁÀ˘i⁄s/kØ_li°.h
"

30 
	~"kØ_boŸ°øp_m™agî.h
"

31 
	~"utûôõs/kØ_mem.h
"

32 
	~"utûôõs/kØ_log.h
"

33 
	~"kØ_ch™√l_m™agî.h
"

34 
	~"∂©f‹m/ext_kØ_Áûovî_°øãgy.h
"

35 
	~"kØ_¥Ÿocﬁs/kØ_t˝/kØt˝_comm⁄.h
"

38 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 
	m¥Ÿocﬁ_id
;

39 
size_t
 
	mödex
;

40 } 
	tkØ_boŸ°øp_ac˚ss_poöts_t
;

43 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 
	m¥Ÿocﬁ_id
;

44 
kØ_li°_t
 *
	mac˚ss_poöts
;

45 
kØ_li°_node_t
 *
	mcuºít_ac˚ss_poöts
;

46 } 
	tkØ_›î©i⁄s_ac˚ss_poöts_t
;

49 
boﬁ
 
	mis_Áûovî
;

50 
kØ_ac˚ss_poöt_t
 *
	ma˚ss_poöt
;

51 
kØ_£rvî_ty≥_t
 
	m£rvî
;

52 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 
	m¥Ÿocﬁ_id
;

53 
kØ_time_t
 
	m√xt_executi⁄_time
;

54 
kØ_Áûovî_ªas⁄
 
	mªas⁄
;

55 } 
	tÁûovî_mëa_öfo
;

57 
	skØ_boŸ°øp_m™agî_t
 {

58 
kØ_ch™√l_m™agî_t
 *
	mch™√l_m™agî
;

59 
kØ_li°_t
 *
	m›î©i⁄s_ac˚ss_poöts
;

60 
kØ_li°_t
 *
	mboŸ°øp_ac˚ss_poöts
;

61 
kØ_c⁄ãxt_t
 *
	mkØ_c⁄ãxt
;

62 
kØ_loggî_t
 *
	mloggî
;

63 
kØ_time_t
 
	m√xt_›î©i⁄s_ªque°_time
;

64 
Áûovî_mëa_öfo
 
	mÁûovî_mëa_öfo
;

67 
kØ_exãnsi⁄_id
 
	gboŸ°øp_sync_£rvi˚s
[1] = { 
KAA_EXTENSION_BOOTSTRAP
 };

69 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_boŸ°øp_öô
(
kØ_c⁄ãxt_t
 *
kØ_c⁄ãxt
, **
c⁄ãxt
)

71 
kØ_îr‹_t
 
ªsu…
 = 
	`kØ_boŸ°øp_m™agî_¸óã
((
kØ_boŸ°øp_m™agî_t
 **)
c⁄ãxt
, 
kØ_c⁄ãxt
);

72 
kØ_c⁄ãxt
->
boŸ°øp_m™agî
 = *
c⁄ãxt
;

73  
ªsu…
;

74 
	}
}

76 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_boŸ°øp_deöô
(*
c⁄ãxt
)

78 
	`kØ_boŸ°øp_m™agî_de°roy
(
c⁄ãxt
);

79  
KAA_ERR_NONE
;

80 
	}
}

82 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_boŸ°øp_ªque°_gë_size
(*
c⁄ãxt
, 
size_t
 *
ex≥˘ed_size
)

84  
	`kØ_ch™√l_m™agî_boŸ°øp_ªque°_gë_size
(

85 ((
kØ_boŸ°øp_m™agî_t
 *)
c⁄ãxt
)->
ch™√l_m™agî
, 
ex≥˘ed_size
);

86 
	}
}

88 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_boŸ°øp_ªque°_£rülize
(*
c⁄ãxt
, 
uöt32_t
 
ªque°_id
,

89 
uöt8_t
 *
buf„r
, 
size_t
 *
size
, 
boﬁ
 *
√ed_ªsync
)

91 ()
ªque°_id
;

94 i‡(!
c⁄ãxt
 || !
size
 || !
√ed_ªsync
) {

95  
KAA_ERR_BADPARAM
;

98 *
√ed_ªsync
 = 
åue
;

100 
size_t
 
size_√eded
;

101 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_ch™√l_m™agî_boŸ°øp_ªque°_gë_size
(

102 ((
kØ_boŸ°øp_m™agî_t
 *)
c⁄ãxt
)->
ch™√l_m™agî
, &
size_√eded
);

103 i‡(
îr‹
) {

104  
îr‹
;

107 i‡(!
buf„r
 || *
size
 < 
size_√eded
) {

108 *
size
 = 
size_√eded
;

109  
KAA_ERR_BUFFER_IS_NOT_ENOUGH
;

112 *
size
 = 
size_√eded
;

114 
kØ_∂©f‹m_mesßge_wrôî_t
 
wrôî
 = 
	`KAA_MESSAGE_WRITER
(
buf„r
, *
size
);

115 
îr‹
 = 
	`kØ_boŸ°øp_m™agî_boŸ°øp_ªque°_£rülize
(
c⁄ãxt
, &
wrôî
);

116 i‡(
îr‹
) {

117  
îr‹
;

120 *
size
 = 
wrôî
.
cuºít
 - 
buf„r
;

121  
KAA_ERR_NONE
;

122 
	}
}

124 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_boŸ°øp_£rvî_sync
(*
c⁄ãxt
, 
uöt32_t
 
ªque°_id
,

125 
uöt16_t
 
exãnsi⁄_›ti⁄s
, c⁄° 
uöt8_t
 *
buf„r
, 
size_t
 
size
)

127 ()
ªque°_id
;

130 i‡(!
c⁄ãxt
 || !
buf„r
) {

131  
KAA_ERR_BADPARAM
;

134 
kØ_∂©f‹m_mesßge_ªadî_t
 
ªadî
 = 
	`KAA_MESSAGE_READER
(
buf„r
, 
size
);

135  
	`kØ_boŸ°øp_m™agî_h™dÀ_£rvî_sync
(
c⁄ãxt
, &
ªadî
, 
exãnsi⁄_›ti⁄s
, 
size
);

136 
	}
}

138 
	$de°roy_ac˚ss_poöt
(*
d©a
)

140 
	`KAA_RETURN_IF_NIL
(
d©a
,);

141 
kØ_ac˚ss_poöt_t
 *
ac˚ss_poöt
 = (kØ_ac˚ss_poöt_à*)
d©a
;

142 i‡(
ac˚ss_poöt
->
c⁄√˘i⁄_d©a
) {

143 
	`KAA_FREE
(
ac˚ss_poöt
->
c⁄√˘i⁄_d©a
);

145 
	`KAA_FREE
(
ac˚ss_poöt
);

146 
	}
}

148 
	$de°roy_›î©i⁄s_ac˚ss_poöts
(*
d©a
)

150 
	`KAA_RETURN_IF_NIL
(
d©a
,);

151 
kØ_›î©i⁄s_ac˚ss_poöts_t
 *
›î©i⁄s_ac˚ss_poöts
 =

152 (
kØ_›î©i⁄s_ac˚ss_poöts_t
 *)
d©a
;

153 
	`kØ_li°_de°roy
(
›î©i⁄s_ac˚ss_poöts
->
ac˚ss_poöts
, 
de°roy_ac˚ss_poöt
);

154 
	`KAA_FREE
(
›î©i⁄s_ac˚ss_poöts
);

155 
	}
}

157 
boﬁ
 
	$föd_›î©i⁄s_ac˚ss_poöts
(*
d©a
, *
c⁄ãxt
)

159 
	`KAA_RETURN_IF_NIL2
(
d©a
, 
c⁄ãxt
, 
Ál£
);

160 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 *
m©chî
 = (kØ_å™•‹t_¥Ÿocﬁ_id_à*Ë
c⁄ãxt
;

161 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 *
sour˚
 = &(((
kØ_›î©i⁄s_ac˚ss_poöts_t
 *)
d©a
)->
¥Ÿocﬁ_id
);

162  
	`kØ_å™•‹t_¥Ÿocﬁ_id_equÆs
(
m©chî
, 
sour˚
);

163 
	}
}

165 
boﬁ
 
	$föd_boŸ°øp_ac˚ss_poöts
(*
d©a
, *
c⁄ãxt
)

167 
	`KAA_RETURN_IF_NIL2
(
d©a
, 
c⁄ãxt
, 
Ál£
);

168 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 *
m©chî
 = (kØ_å™•‹t_¥Ÿocﬁ_id_à*Ë
c⁄ãxt
;

169 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 *
sour˚
 = &(((
kØ_boŸ°øp_ac˚ss_poöts_t
 *)
d©a
)->
¥Ÿocﬁ_id
);

170  
	`kØ_å™•‹t_¥Ÿocﬁ_id_equÆs
(
m©chî
, 
sour˚
);

171 
	}
}

173 
kØ_îr‹_t
 
	$do_sync
(
kØ_boŸ°øp_m™agî_t
 *
£lf
)

175 
	`KAA_RETURN_IF_NIL
(
£lf
, 
KAA_ERR_BADPARAM
);

177 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√l
 =

178 
	`kØ_ch™√l_m™agî_gë_å™•‹t_ch™√l
(

179 
£lf
->
ch™√l_m™agî
, 
KAA_EXTENSION_BOOTSTRAP
);

180 i‡(
ch™√l
) {

181 
ch™√l
->
	`sync_h™dÀr
(ch™√l->
c⁄ãxt
, 
boŸ°øp_sync_£rvi˚s
, 1);

182  
KAA_ERR_NONE
;

185  
KAA_ERR_NOT_FOUND
;

186 
	}
}

188 
kØ_îr‹_t
 
	$kØ_boŸ°øp_m™agî_⁄_£rvî_sync
(
kØ_boŸ°øp_m™agî_t
 *
£lf
)

190 
	`KAA_RETURN_IF_NIL
(
£lf
, 
KAA_ERR_BADPARAM
);

192 
kØ_li°_node_t
 *
ch™√l_ô
 = 
	`kØ_li°_begö
(
£lf
->
›î©i⁄s_ac˚ss_poöts
);

193 
ch™√l_ô
) {

194 
kØ_›î©i⁄s_ac˚ss_poöts_t
 *
›î©i⁄s_ac˚ss_poöts
 = 
	`kØ_li°_gë_d©a
(
ch™√l_ô
);

195 
kØ_ac˚ss_poöt_t
 *
ac˚ss_poöt
 = 
	`kØ_li°_gë_d©a
(

196 
	`kØ_li°_begö
(
›î©i⁄s_ac˚ss_poöts
->
ac˚ss_poöts
));

198 
	`kØ_ch™√l_m™agî_⁄_√w_ac˚ss_poöt
(
£lf
->
ch™√l_m™agî


199 , &
›î©i⁄s_ac˚ss_poöts
->
¥Ÿocﬁ_id


200 , 
KAA_SERVER_OPERATIONS


201 , 
ac˚ss_poöt
);

203 
ch™√l_ô
 = 
	`kØ_li°_√xt
(channel_it);

206  
KAA_ERR_NONE
;

207 
	}
}

209 
kØ_îr‹_t
 
	$add_›î©i⁄s_ac˚ss_poöt
(
kØ_boŸ°øp_m™agî_t
 *
£lf


210 , 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 *
¥Ÿocﬁ_id


211 , 
kØ_ac˚ss_poöt_t
 *
ac˚ss_poöt
)

213 
	`KAA_RETURN_IF_NIL2
(
¥Ÿocﬁ_id
, 
ac˚ss_poöt
, 
KAA_ERR_BADPARAM
);

215 
kØ_li°_node_t
 *
ch™√l_ô
 = 
	`kØ_li°_föd_√xt
(
	`kØ_li°_begö
(
£lf
->
›î©i⁄s_ac˚ss_poöts
)

216 , 
föd_›î©i⁄s_ac˚ss_poöts


217 , 
¥Ÿocﬁ_id
);

219 i‡(
ch™√l_ô
) {

220 
kØ_›î©i⁄s_ac˚ss_poöts_t
 *
›î©i⁄s_ac˚ss_poöts
 = 
	`kØ_li°_gë_d©a
(
ch™√l_ô
);

221 
kØ_li°_node_t
 *
ac˚ss_poöt_ô
 = 
	`kØ_li°_push_‰⁄t
(
›î©i⁄s_ac˚ss_poöts
->
ac˚ss_poöts


222 , 
ac˚ss_poöt
);

223 
	`KAA_RETURN_IF_NIL
(
ac˚ss_poöt_ô
, 
KAA_ERR_NOMEM
);

225 
›î©i⁄s_ac˚ss_poöts
->
cuºít_ac˚ss_poöts
 = 
ac˚ss_poöt_ô
;

227 
kØ_›î©i⁄s_ac˚ss_poöts_t
 *
›î©i⁄s_ac˚ss_poöts
 =

228 (
kØ_›î©i⁄s_ac˚ss_poöts_t
 *)
	`KAA_CALLOC
(1, (kaa_operations_access_points_t));

229 
	`KAA_RETURN_IF_NIL
(
›î©i⁄s_ac˚ss_poöts
, 
KAA_ERR_NOMEM
);

231 
›î©i⁄s_ac˚ss_poöts
->
¥Ÿocﬁ_id
 = *protocol_id;

232 
›î©i⁄s_ac˚ss_poöts
->
ac˚ss_poöts
 = 
	`kØ_li°_¸óã
();

233 
›î©i⁄s_ac˚ss_poöts
->
cuºít_ac˚ss_poöts
 = 
	`kØ_li°_push_‰⁄t
(›î©i⁄s_ac˚ss_poöts->
ac˚ss_poöts


234 , 
ac˚ss_poöt
);

236 i‡(!
›î©i⁄s_ac˚ss_poöts
->
ac˚ss_poöts
 || !›î©i⁄s_ac˚ss_poöts->
cuºít_ac˚ss_poöts
) {

237 
	`de°roy_›î©i⁄s_ac˚ss_poöts
(
›î©i⁄s_ac˚ss_poöts
);

238 
	`KAA_LOG_WARN
(
£lf
->
loggî
, 
KAA_ERR_NOMEM
, "FailedÅoáddÇewáccessÖoint: "

240 , 
ac˚ss_poöt
->
id
, 
¥Ÿocﬁ_id
->id,ÖrŸocﬁ_id->
vîsi⁄
);

241  
KAA_ERR_NOMEM
;

244 
kØ_li°_node_t
 *
›î©i⁄s_ac˚ss_poöts_ô
 = 
	`kØ_li°_push_‰⁄t
(
£lf
->
›î©i⁄s_ac˚ss_poöts
, operations_access_points);

245 i‡(!
›î©i⁄s_ac˚ss_poöts_ô
) {

246 
	`de°roy_›î©i⁄s_ac˚ss_poöts
(
›î©i⁄s_ac˚ss_poöts
);

247 
	`KAA_LOG_WARN
(
£lf
->
loggî
, 
KAA_ERR_NOMEM
, "FailedÅoáddÇewáccessÖoint: "

249 , 
ac˚ss_poöt
->
id
, 
¥Ÿocﬁ_id
->id,ÖrŸocﬁ_id->
vîsi⁄
);

250  
KAA_ERR_NOMEM
;

254  
KAA_ERR_NONE
;

255 
	}
}

258 
kØ_îr‹_t
 
	$kØ_boŸ°øp_m™agî_¸óã
(
kØ_boŸ°øp_m™agî_t
 **
boŸ°øp_m™agî_p
, 
kØ_c⁄ãxt_t
 *
kØ_c⁄ãxt
)

260 
	`KAA_RETURN_IF_NIL2
(
boŸ°øp_m™agî_p
, 
kØ_c⁄ãxt
, 
KAA_ERR_BADPARAM
);

262 *
boŸ°øp_m™agî_p
 = (
kØ_boŸ°øp_m™agî_t
*Ë
	`KAA_CALLOC
(1, (kaa_bootstrap_manager_t));

263 
	`KAA_RETURN_IF_NIL
(*
boŸ°øp_m™agî_p
, 
KAA_ERR_NOMEM
);

265 (*
boŸ°øp_m™agî_p
)->
ch™√l_m™agî
 = 
kØ_c⁄ãxt
->channel_manager;

266 (*
boŸ°øp_m™agî_p
)->
loggî
 = 
kØ_c⁄ãxt
->logger;

267 (*
boŸ°øp_m™agî_p
)->
kØ_c⁄ãxt
 = kaa_context;

269 (*
boŸ°øp_m™agî_p
)->
boŸ°øp_ac˚ss_poöts
 = 
	`kØ_li°_¸óã
();

270 
	`KAA_RETURN_IF_NIL
((*
boŸ°øp_m™agî_p
)->
boŸ°øp_ac˚ss_poöts
, 
KAA_ERR_NOMEM
);

272 (*
boŸ°øp_m™agî_p
)->
›î©i⁄s_ac˚ss_poöts
 = 
	`kØ_li°_¸óã
();

273 
	`KAA_RETURN_IF_NIL
((*
boŸ°øp_m™agî_p
)->
›î©i⁄s_ac˚ss_poöts
, 
KAA_ERR_NOMEM
);

275  
KAA_ERR_NONE
;

276 
	}
}

279 
	$kØ_boŸ°øp_m™agî_de°roy
(
kØ_boŸ°øp_m™agî_t
 *
£lf
)

281 
	`KAA_RETURN_IF_NIL
(
£lf
,);

282 
	`kØ_li°_de°roy
(
£lf
->
boŸ°øp_ac˚ss_poöts
, 
NULL
);

283 
	`kØ_li°_de°roy
(
£lf
->
›î©i⁄s_ac˚ss_poöts
, 
de°roy_›î©i⁄s_ac˚ss_poöts
);

284 
	`KAA_FREE
(
£lf
);

285 
	}
}

288 
kØ_îr‹_t
 
	$kØ_boŸ°øp_m™agî_scheduÀ_Áûovî
(
kØ_boŸ°øp_m™agî_t
 *
£lf
, 
kØ_ac˚ss_poöt_t
* 
cuºít_ac˚ss_poöt
, kØ_ac˚ss_poöt_t* 
√xt_ac˚ss_poöt
,

289 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 *
¥Ÿocﬁ_id
, 
kØ_£rvî_ty≥_t
 
ty≥
, 
kØ_Áûovî_ªas⁄
 
ªas⁄
)

291 
	`KAA_RETURN_IF_NIL
(
£lf
, 
KAA_ERR_BADPARAM
);

292 
kØ_Áûovî_decisi⁄_t
 
decisi⁄
 = 
	`kØ_Áûovî_°øãgy_⁄_Áûovî
(
£lf
->
kØ_c⁄ãxt
->
Áûovî_°øãgy
, 
ªas⁄
);

293 
decisi⁄
.
a˘i⁄
) {

294 
KAA_NOOP
:

295 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "NothingÅo be done...");

296  
KAA_ERR_NONE
;

297 
KAA_RETRY
:

298 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "GoögÅÿªåy i¿%u sec⁄ds...", 
decisi⁄
.
ªåy_≥riod
);

299 
£lf
->
Áûovî_mëa_öfo
.
a˚ss_poöt
 = 
cuºít_ac˚ss_poöt
;

301 
KAA_USE_NEXT_BOOTSTRAP
:

302 
KAA_USE_NEXT_OPERATIONS
:

303 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "GoögÅÿªåy wôhánŸhîác˚s†poöàö %u sec⁄ds...", 
decisi⁄
.
ªåy_≥riod
);

304 
£lf
->
Áûovî_mëa_öfo
.
a˚ss_poöt
 = 
√xt_ac˚ss_poöt
;

306 
KAA_STOP_APP
:

307 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Stopping SDKáccordingÅoÅhe failover strategy...");

308  
KAA_ERR_SDK_STOP
;

310 
£lf
->
Áûovî_mëa_öfo
.
√xt_executi⁄_time
 = 
	`KAA_TIME
(Ë+ 
decisi⁄
.
ªåy_≥riod
;

311 
£lf
->
Áûovî_mëa_öfo
.
£rvî
 = 
ty≥
;

312 i‡(
¥Ÿocﬁ_id
) {

313 
£lf
->
Áûovî_mëa_öfo
.
¥Ÿocﬁ_id
 = *protocol_id;

315 
£lf
->
Áûovî_mëa_öfo
.
ªas⁄
 =Ñeason;

316 
£lf
->
Áûovî_mëa_öfo
.
is_Áûovî
 = 
åue
;

318  
KAA_ERR_NONE
;

319 
	}
}

321 
kØ_ac˚ss_poöt_t
 *
	$kØ_boŸ°øp_m™agî_gë_›î©i⁄s_ac˚ss_poöt
(
kØ_boŸ°øp_m™agî_t
 *
£lf


322 , 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 *
¥Ÿocﬁ_id
)

324 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
¥Ÿocﬁ_id
, 
NULL
);

326 
kØ_li°_node_t
 *
›î©i⁄s_ac˚ss_poöts_ô
 = 
	`kØ_li°_föd_√xt
(
	`kØ_li°_begö
(
£lf
->
›î©i⁄s_ac˚ss_poöts
)

327 , &
föd_›î©i⁄s_ac˚ss_poöts


328 , 
¥Ÿocﬁ_id
);

329 
	`KAA_RETURN_IF_NIL
(
›î©i⁄s_ac˚ss_poöts_ô
, 
NULL
);

331 
kØ_›î©i⁄s_ac˚ss_poöts_t
 *
›î©i⁄s_ac˚ss_poöts
 =

332 (
kØ_›î©i⁄s_ac˚ss_poöts_t
 *)
	`kØ_li°_gë_d©a
(
›î©i⁄s_ac˚ss_poöts_ô
);

333  (
kØ_ac˚ss_poöt_t
 *)
	`kØ_li°_gë_d©a
(
›î©i⁄s_ac˚ss_poöts
->
cuºít_ac˚ss_poöts
);

334 
	}
}

336 
kØ_îr‹_t
 
	$gë_√xt_boŸ°øp_ac˚ss_poöt_ödex
(
kØ_å™•‹t_¥Ÿocﬁ_id_t
 *
¥Ÿocﬁ_id


337 , 
size_t
 
ödex_‰om


338 , 
size_t
 *
√xt_ödex
, 
boﬁ
 *
execuã_Áûovî
)

340 
	`KAA_RETURN_IF_NIL4
(
¥Ÿocﬁ_id
, 
√xt_ödex
, 
execuã_Áûovî
, 
KAA_BOOTSTRAP_ACCESS_POINT_COUNT
, 
KAA_ERR_BADPARAM
);

342 
size_t
 
i
 = 
ödex_‰om
;

343 i‡(
ödex_‰om
 < 
KAA_BOOTSTRAP_ACCESS_POINT_COUNT
) {

344 ; 
i
 < 
KAA_BOOTSTRAP_ACCESS_POINT_COUNT
; ++i) {

345 i‡(
	`kØ_å™•‹t_¥Ÿocﬁ_id_equÆs
(&(
KAA_BOOTSTRAP_ACCESS_POINTS
[
i
].
¥Ÿocﬁ_id
),Örotocol_id)) {

346 *
√xt_ödex
 = 
i
;

347  
KAA_ERR_NONE
;

351 
i
 = 0;

352 ; 
i
 < 
KAA_BOOTSTRAP_ACCESS_POINT_COUNT
; ++i) {

353 i‡(
	`kØ_å™•‹t_¥Ÿocﬁ_id_equÆs
(&(
KAA_BOOTSTRAP_ACCESS_POINTS
[
i
].
¥Ÿocﬁ_id
),Örotocol_id)) {

354 *
√xt_ödex
 = 
i
;

355 *
execuã_Áûovî
 = 
åue
;

356  
KAA_ERR_NONE
;

360  
KAA_ERR_NOT_FOUND
;

361 
	}
}

363 
kØ_îr‹_t
 
	$add_boŸ°øp_ac˚ss_poöt
(
kØ_boŸ°øp_m™agî_t
 *
£lf


364 , 
size_t
 
ödex
)

366 i‡(
ödex
 >
KAA_BOOTSTRAP_ACCESS_POINT_COUNT
)

367  
KAA_ERR_BADDATA
;

369 
kØ_boŸ°øp_ac˚ss_poöts_t
 *
boŸ°øp_ac˚ss_poöt
 =

370 (
kØ_boŸ°øp_ac˚ss_poöts_t
 *)
	`KAA_MALLOC
((kaa_bootstrap_access_points_t));

371 
	`KAA_RETURN_IF_NIL
(
boŸ°øp_ac˚ss_poöt
, 
KAA_ERR_NOMEM
);

373 
boŸ°øp_ac˚ss_poöt
->
¥Ÿocﬁ_id
 = 
KAA_BOOTSTRAP_ACCESS_POINTS
[
ödex
].protocol_id;

374 
boŸ°øp_ac˚ss_poöt
->
ödex
 = index;

376 
kØ_li°_node_t
 *
boŸ°øp_ac˚ss_poöt_ô
 = 
	`kØ_li°_push_‰⁄t
(
£lf
->
boŸ°øp_ac˚ss_poöts
, 
boŸ°øp_ac˚ss_poöt
);

377 i‡(!
boŸ°øp_ac˚ss_poöt_ô
) {

378 
	`KAA_FREE
(
boŸ°øp_ac˚ss_poöt
);

379 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
KAA_ERR_NOMEM
, "FailedÅoállocate memory for BootstrapáccessÖoint info");

380  
KAA_ERR_NOMEM
;

383  
KAA_ERR_NONE
;

384 
	}
}

386 
kØ_ac˚ss_poöt_t
 *
	$kØ_boŸ°øp_m™agî_gë_boŸ°øp_ac˚ss_poöt
(
kØ_boŸ°øp_m™agî_t
 *
£lf


387 , 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 *
¥Ÿocﬁ_id
)

389 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
¥Ÿocﬁ_id
, 
NULL
);

391 
kØ_li°_node_t
 *
boŸ°øp_ac˚ss_poöts_ô
 = 
	`kØ_li°_föd_√xt
(
	`kØ_li°_begö
(
£lf
->
boŸ°øp_ac˚ss_poöts
)

392 , &
föd_boŸ°øp_ac˚ss_poöts


393 , 
¥Ÿocﬁ_id
);

395 
size_t
 
ödex
;

396 
boﬁ
 
execuã_Áûovî
 = 
Ál£
;

398 i‡(
boŸ°øp_ac˚ss_poöts_ô
) {

399 
ödex
 = ((
kØ_boŸ°øp_ac˚ss_poöts_t
 *)
	`kØ_li°_gë_d©a
(
boŸ°øp_ac˚ss_poöts_ô
))->index;

401 
kØ_îr‹_t
 
îr‹_code
 = 
	`gë_√xt_boŸ°øp_ac˚ss_poöt_ödex
(
¥Ÿocﬁ_id
, 0, &
ödex
, &
execuã_Áûovî
);

402 i‡(
îr‹_code
) {

403 
	`KAA_LOG_FATAL
(
£lf
->
loggî
, 
îr‹_code
, "Error: No bootstrap services been found. PleaseÑegenerate SDK.");

404  
NULL
;

407 
îr‹_code
 = 
	`add_boŸ°øp_ac˚ss_poöt
(
£lf
, 
ödex
);

408 i‡(
îr‹_code
) {

409 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹_code
, "FailedÅoádd BootstrapáccessÖoint index"

410 "’rŸocﬁ: id=0x%08X, vîsi⁄=%u)", 
¥Ÿocﬁ_id
->
id
,ÖrŸocﬁ_id->
vîsi⁄
);

411  
NULL
;

415  (
kØ_ac˚ss_poöt_t
 *)&(
KAA_BOOTSTRAP_ACCESS_POINTS
[
ödex
].
ac˚ss_poöt
);

416 
	}
}

418 
kØ_îr‹_t
 
	$kØ_boŸ°øp_m™agî_h™dÀ_£rvî_sync
(
kØ_boŸ°øp_m™agî_t
 *
£lf


419 , 
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî


420 , 
uöt16_t
 
exãnsi⁄_›ti⁄s


421 , 
size_t
 
exãnsi⁄_Àngth
)

424 ()
exãnsi⁄_›ti⁄s
;

425 ()
exãnsi⁄_Àngth
;

427 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
ªadî
, 
KAA_ERR_BADPARAM
);

428 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Re˚ived boŸ°ø∞£rvi˚ sync: o±i⁄†%u,Öaylﬂd sizê%u", 
exãnsi⁄_›ti⁄s
, 
exãnsi⁄_Àngth
);

430 
	`kØ_li°_˛ór
(
£lf
->
›î©i⁄s_ac˚ss_poöts
, 
de°roy_›î©i⁄s_ac˚ss_poöts
);

433 
uöt16_t
 
ªque°_id
;

434 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªad
(
ªadî
, &
ªque°_id
, (
uöt16_t
));

435 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

436 
ªque°_id
 = 
	`KAA_NTOHS
(request_id);

438 
uöt16_t
 
ac˚ss_poöt_cou¡
;

439 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªad
(
ªadî
, &
ac˚ss_poöt_cou¡
, (
uöt16_t
));

440 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

441 
ac˚ss_poöt_cou¡
 = 
	`KAA_NTOHS
(access_point_count);

443 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Received %uáccessÖoints (request_id %u)"

444 , 
ac˚ss_poöt_cou¡
, 
ªque°_id
);

446 i‡(!
ac˚ss_poöt_cou¡
) {

447 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√l
 = 
	`kØ_ch™√l_m™agî_gë_å™•‹t_ch™√l
(
£lf
->
ch™√l_m™agî
, 
KAA_EXTENSION_BOOTSTRAP
);

448 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 
¥Ÿocﬁ_id
 = {0, 0};

449 
îr‹_code
 = 
ch™√l
->
	`gë_¥Ÿocﬁ_id
(ch™√l->
c⁄ãxt
, &
¥Ÿocﬁ_id
);

450 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

451 
kØ_ac˚ss_poöt_t
 *
acc_poöt
 = 
	`kØ_boŸ°øp_m™agî_gë_boŸ°øp_ac˚ss_poöt
(
£lf
, &
¥Ÿocﬁ_id
);

453 i‡(!
acc_poöt
) {

454  
KAA_ERR_SDK_STOP
;

457 
kØ_li°_node_t
 *
boŸ°øp_ac˚ss_poöts_ô
 = 
	`kØ_li°_föd_√xt
(
	`kØ_li°_begö
(
£lf
->
boŸ°øp_ac˚ss_poöts
)

458 , &
föd_boŸ°øp_ac˚ss_poöts


459 , &
¥Ÿocﬁ_id
);

460 
size_t
 
√xt_ödex
 = 0;

461 
boﬁ
 
execuã_Áûovî
 = 
Ál£
;

462 
	`gë_√xt_boŸ°øp_ac˚ss_poöt_ödex
(&
¥Ÿocﬁ_id
, ((
kØ_boŸ°øp_ac˚ss_poöts_t
 *)

463 
	`kØ_li°_gë_d©a
(
boŸ°øp_ac˚ss_poöts_ô
))->
ödex
 + 1, &
√xt_ödex
, &
execuã_Áûovî
);

465 
kØ_ac˚ss_poöt_t
 *
√xt_acc_poöt
 = (kØ_ac˚ss_poöt_à*)&(
KAA_BOOTSTRAP_ACCESS_POINTS
[
√xt_ödex
].
ac˚ss_poöt
);

467 
îr‹_code
 = 
	`kØ_boŸ°øp_m™agî_scheduÀ_Áûovî
(
£lf
->
kØ_c⁄ãxt
->
boŸ°øp_m™agî
, 
acc_poöt
, 
√xt_acc_poöt
, &
¥Ÿocﬁ_id
, 
KAA_SERVER_BOOTSTRAP
, 
KAA_NO_OPERATION_SERVERS_RECEIVED
);

468 i‡(
îr‹_code
) {

469  
îr‹_code
;

472  
KAA_ERR_EVENT_NOT_ATTACHED
;

475 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 
¥Ÿocﬁ_id
;

477 
ac˚ss_poöt_cou¡
--) {

478 
kØ_ac˚ss_poöt_t
 *
√w_ac˚ss_poöt
 = (kØ_ac˚ss_poöt_à*)
	`KAA_MALLOC
((kaa_access_point_t));

479 
	`KAA_RETURN_IF_NIL
(
√w_ac˚ss_poöt
, 
KAA_ERR_NOMEM
);

481 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªad
(
ªadî
, &
√w_ac˚ss_poöt
->
id
, (
uöt32_t
));

482 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

483 
√w_ac˚ss_poöt
->
id
 = 
	`KAA_NTOHL
(new_access_point->id);

485 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªad
(
ªadî
, &
¥Ÿocﬁ_id
.
id
, (
uöt32_t
));

486 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

487 
¥Ÿocﬁ_id
.
id
 = 
	`KAA_NTOHL
(protocol_id.id);

489 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªad
(
ªadî
, &
¥Ÿocﬁ_id
.
vîsi⁄
, (
uöt16_t
));

490 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

491 
¥Ÿocﬁ_id
.
vîsi⁄
 = 
	`KAA_NTOHS
(protocol_id.version);

493 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªad
(
ªadî
, &
√w_ac˚ss_poöt
->
c⁄√˘i⁄_d©a_Àn
, (
uöt16_t
));

494 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

495 
√w_ac˚ss_poöt
->
c⁄√˘i⁄_d©a_Àn
 = 
	`KAA_NTOHS
(new_access_point->connection_data_len);

497 
√w_ac˚ss_poöt
->
c⁄√˘i⁄_d©a
 = (*)
	`KAA_MALLOC
“ew_ac˚ss_poöt->
c⁄√˘i⁄_d©a_Àn
);

499 i‡(!
√w_ac˚ss_poöt
->
c⁄√˘i⁄_d©a
 || !√w_ac˚ss_poöt->
c⁄√˘i⁄_d©a_Àn
) {

500 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
KAA_ERR_NOMEM
, "FailedÅoállocate buffer for connection data, size %u"

501 , 
√w_ac˚ss_poöt
->
c⁄√˘i⁄_d©a_Àn
);

502 
	`de°roy_ac˚ss_poöt
(
√w_ac˚ss_poöt
);

503  
KAA_ERR_NOMEM
;

506 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªad_Æig√d
(
ªadî


507 , 
√w_ac˚ss_poöt
->
c⁄√˘i⁄_d©a


508 , 
√w_ac˚ss_poöt
->
c⁄√˘i⁄_d©a_Àn
);

509 i‡(
îr‹_code
) {

510 
	`de°roy_ac˚ss_poöt
(
√w_ac˚ss_poöt
);

511 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹_code
, "FailedÅoÑead connection data");

512  
îr‹_code
;

515 
îr‹_code
 = 
	`add_›î©i⁄s_ac˚ss_poöt
(
£lf
, &
¥Ÿocﬁ_id
, 
√w_ac˚ss_poöt
);

516 i‡(
îr‹_code
) {

517 
	`de°roy_ac˚ss_poöt
(
√w_ac˚ss_poöt
);

518 
	`KAA_LOG_WARN
(
£lf
->
loggî
, 
îr‹_code
, "FailedÅoáddÇewáccessÖoint "

519 "tÿch™√»’rŸocﬁ: id=0x%08X, vîsi⁄=%u)", 
¥Ÿocﬁ_id
.
id
,ÖrŸocﬁ_id.
vîsi⁄
);

521 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "AddedáccessÖoint:áccessÖoint id '%u',Örotocol id '0x%08X',Örotocol version '%u', connection dataÜength '%u'"

522 , 
√w_ac˚ss_poöt
->
id
, 
¥Ÿocﬁ_id
.id,ÖrŸocﬁ_id.
vîsi⁄
,Çew_ac˚ss_poöt->
c⁄√˘i⁄_d©a_Àn
);

525 
	`kØ_boŸ°øp_m™agî_⁄_£rvî_sync
(
£lf
);

526 
£lf
->
√xt_›î©i⁄s_ªque°_time
 = 0;

528  
îr‹_code
;

529 
	}
}

532 
__©åibuã__
((
wók
))

533 
kØ_îr‹_t
 
	$kØ_boŸ°øp_m™agî_⁄_ac˚ss_poöt_Áûed
(
kØ_boŸ°øp_m™agî_t
 *
£lf
,

534 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 *
¥Ÿocﬁ_id
,

535 
kØ_£rvî_ty≥_t
 
ty≥
,

536 
kØ_Áûovî_ªas⁄
 
ªas⁄_code
)

538 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
¥Ÿocﬁ_id
, 
KAA_ERR_BADPARAM
);

540 
kØ_ac˚ss_poöt_t
 *
ac˚ss_poöt
 = 
NULL
;

541 
kØ_ac˚ss_poöt_t
 *
¥ev_ac˚ss_poöt
 = 
NULL
;

542 
boﬁ
 
execuã_Áûovî
 = 
Ál£
;

544 i‡(
ty≥
 =
KAA_SERVER_BOOTSTRAP
) {

545 
kØ_li°_node_t
 *
boŸ°øp_ac˚ss_poöts_ô
 = 
	`kØ_li°_föd_√xt
(
	`kØ_li°_begö
(
£lf
->
boŸ°øp_ac˚ss_poöts
)

546 , &
föd_boŸ°øp_ac˚ss_poöts


547 , 
¥Ÿocﬁ_id
);

549 
size_t
 
ödex_‰om
 = 0;

550 i‡(
boŸ°øp_ac˚ss_poöts_ô
)

551 
ödex_‰om
 = ((
kØ_boŸ°øp_ac˚ss_poöts_t
 *)
	`kØ_li°_gë_d©a
(
boŸ°øp_ac˚ss_poöts_ô
))->
ödex
 + 1;

553 
¥ev_ac˚ss_poöt
 = (
kØ_ac˚ss_poöt_t
 *)&(
KAA_BOOTSTRAP_ACCESS_POINTS
[
ödex_‰om
].
ac˚ss_poöt
);

554 
size_t
 
√xt_ödex
 = 0;

555 
kØ_îr‹_t
 
îr‹_code
 = 
	`gë_√xt_boŸ°øp_ac˚ss_poöt_ödex
(
¥Ÿocﬁ_id
, 
ödex_‰om
, &
√xt_ödex
, &
execuã_Áûovî
);

557 i‡(
îr‹_code
) {

558 
	`KAA_LOG_FATAL
(
£lf
->
loggî
, 
îr‹_code
, "Error: No bootstrap services been found. PleaseÑegenerate SDK.");

559  
KAA_ERR_SDK_STOP
;

562 
ac˚ss_poöt
 = (
kØ_ac˚ss_poöt_t
 *)&(
KAA_BOOTSTRAP_ACCESS_POINTS
[
√xt_ödex
].access_point);

564 i‡(
boŸ°øp_ac˚ss_poöts_ô
){

565 ((
kØ_boŸ°øp_ac˚ss_poöts_t
 *)
	`kØ_li°_gë_d©a
(
boŸ°øp_ac˚ss_poöts_ô
))->
ödex
 = 
√xt_ödex
;

567 
îr‹_code
 = 
	`add_boŸ°øp_ac˚ss_poöt
(
£lf
, 
√xt_ödex
);

568 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

571 
kØ_li°_node_t
 *
›î©i⁄s_ac˚ss_poöts_ô
 = 
	`kØ_li°_föd_√xt
(
	`kØ_li°_begö
(
£lf
->
›î©i⁄s_ac˚ss_poöts
)

572 , &
föd_›î©i⁄s_ac˚ss_poöts


573 , 
¥Ÿocﬁ_id
);

574 
	`KAA_RETURN_IF_NIL
(
›î©i⁄s_ac˚ss_poöts_ô
, 
KAA_ERR_NOT_FOUND
);

576 
kØ_›î©i⁄s_ac˚ss_poöts_t
 *
›î©i⁄s_ac˚ss_poöts
 =

577 (
kØ_›î©i⁄s_ac˚ss_poöts_t
 *)
	`kØ_li°_gë_d©a
(
›î©i⁄s_ac˚ss_poöts_ô
);

578 i‡(
	`kØ_li°_gë_d©a
(
›î©i⁄s_ac˚ss_poöts
->
cuºít_ac˚ss_poöts
)) {

579 
¥ev_ac˚ss_poöt
 = (
kØ_ac˚ss_poöt_t
 *)
	`kØ_li°_gë_d©a
(
›î©i⁄s_ac˚ss_poöts
->
cuºít_ac˚ss_poöts
);

581 
›î©i⁄s_ac˚ss_poöts
->
cuºít_ac˚ss_poöts
 =

582 
	`kØ_li°_√xt
(
›î©i⁄s_ac˚ss_poöts
->
cuºít_ac˚ss_poöts
);

584 
ac˚ss_poöt
 = (
kØ_ac˚ss_poöt_t
 *)
	`kØ_li°_gë_d©a
(
›î©i⁄s_ac˚ss_poöts
->
cuºít_ac˚ss_poöts
);

586 i‡(!
ac˚ss_poöt
)

587 
execuã_Áûovî
 = 
åue
;

590 i‡(
execuã_Áûovî
) {

591 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_boŸ°øp_m™agî_scheduÀ_Áûovî
(
£lf
, 
¥ev_ac˚ss_poöt
, 
ac˚ss_poöt
, 
¥Ÿocﬁ_id
,

592 
ty≥
, 
ªas⁄_code
);

594 i‡(
îr‹_code
) {

595  
îr‹_code
;

599 i‡(
ac˚ss_poöt
 && !
execuã_Áûovî
) {

600 
	`kØ_ch™√l_m™agî_⁄_√w_ac˚ss_poöt
(
£lf
->
ch™√l_m™agî


601 , 
¥Ÿocﬁ_id


602 , 
ty≥


603 , 
ac˚ss_poöt
);

604  
KAA_ERR_EVENT_NOT_ATTACHED
;

605 } i‡(
ty≥
 =
KAA_SERVER_OPERATIONS
) {

606 
	`KAA_LOG_WARN
(
£lf
->
loggî
, 
KAA_ERR_NOT_FOUND
, "CouldÇot findÇext OperationsáccessÖoint "

608 , 
¥Ÿocﬁ_id
->
id
,ÖrŸocﬁ_id->
vîsi⁄
);

609 } i‡(
ty≥
 =
KAA_SERVER_BOOTSTRAP
) {

610 
	`KAA_LOG_WARN
(
£lf
->
loggî
, 
KAA_ERR_NOT_FOUND
, "CouldÇot findÇext BootstrapáccessÖoint "

612 , 
¥Ÿocﬁ_id
->
id
,ÖrŸocﬁ_id->
vîsi⁄
);

615  
KAA_ERR_NOT_FOUND
;

616 
	}
}

618 
boﬁ
 
	$kØ_boŸ°øp_m™agî_¥o˚ss_Áûovî
(
kØ_boŸ°øp_m™agî_t
 *
£lf
)

620 
	`KAA_RETURN_IF_NIL2
(
£lf
, sñf->
kØ_c⁄ãxt
->
Áûovî_°øãgy
, 
Ál£
);

622 
kØ_Áûovî_decisi⁄_t
 
decisi⁄
 = 
	`kØ_Áûovî_°øãgy_⁄_Áûovî
(
£lf
->
kØ_c⁄ãxt
->
Áûovî_°øãgy
, sñf->
Áûovî_mëa_öfo
.
ªas⁄
);

623 i‡(
decisi⁄
.
a˘i⁄
 =
KAA_NOOP
) {

624  
Ál£
;

626 
kØ_îr‹_t
 
îr‹_code
 = 
KAA_ERR_NONE
;

627 
kØ_time_t
 
cuºít_time
 = 
	`KAA_TIME
();

628 i‡(!
£lf
->
Áûovî_mëa_öfo
.
is_Áûovî
) {

629 i‡(
£lf
->
√xt_›î©i⁄s_ªque°_time
 && 
cuºít_time
 >= self->next_operations_request_time) {

630 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Response bootstrapÅimeÉxpired.");

631 
kØ_boŸ°øp_ac˚ss_poöts_t
 * 
acc_poöt
 = (kØ_boŸ°øp_ac˚ss_poöts_à*Ë
	`kØ_li°_gë_d©a
(
	`kØ_li°_begö
(
£lf
->
boŸ°øp_ac˚ss_poöts
));

632 
îr‹_code
 = 
	`kØ_boŸ°øp_m™agî_⁄_ac˚ss_poöt_Áûed
(
£lf
, &
acc_poöt
->
¥Ÿocﬁ_id
, 
KAA_SERVER_BOOTSTRAP
, 
KAA_BOOTSTRAP_SERVERS_NA
);

633 
£lf
->
√xt_›î©i⁄s_ªque°_time
 = 0;

634 i‡(
îr‹_code
 =
KAA_ERR_EVENT_NOT_ATTACHED
) {

635 
	`do_sync
(
£lf
);

636  
Ál£
;

638  
åue
;

640  
Ál£
;

644 i‡(
cuºít_time
 >
£lf
->
Áûovî_mëa_öfo
.
√xt_executi⁄_time
) {

645 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Executing failover strategy...");

646 
£lf
->
Áûovî_mëa_öfo
.
£rvî
) {

647 
KAA_SERVER_BOOTSTRAP
:

648 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Processing failover of bootstraps");

649 i‡(
decisi⁄
.
a˘i⁄
 =
KAA_RETRY
) {

650 
îr‹_code
 = 
	`do_sync
(
£lf
);

652 
	`kØ_ch™√l_m™agî_⁄_√w_ac˚ss_poöt
(
£lf
->
ch™√l_m™agî
, &£lf->
Áûovî_mëa_öfo
.
¥Ÿocﬁ_id
, sñf->Áûovî_mëa_öfo.
£rvî
, sñf->Áûovî_mëa_öfo.
a˚ss_poöt
);

655 
KAA_SERVER_OPERATIONS
: {

656 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Processing failover of operations");

657 i‡(
decisi⁄
.
a˘i⁄
 =
KAA_RETRY
) {

658 
	`kØ_ch™√l_m™agî_⁄_√w_ac˚ss_poöt
(
£lf
->
ch™√l_m™agî
, &£lf->
Áûovî_mëa_öfo
.
¥Ÿocﬁ_id
, sñf->Áûovî_mëa_öfo.
£rvî
, sñf->Áûovî_mëa_öfo.
a˚ss_poöt
);

660 
îr‹_code
 = 
	`do_sync
(
£lf
);

662 i‡(
îr‹_code
) {

663 
	`KAA_LOG_WARN
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "FailedÅo connectÅo bootstrap");

668 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
KAA_ERR_BADDATA
, "FailedÅoÉxecute failover strategy: unknown serverÅype");

671 
£lf
->
Áûovî_mëa_öfo
.
is_Áûovî
 = 
Ál£
;

674  
åue
;

675 
	}
}

677 
kØ_îr‹_t
 
	$kØ_boŸ°øp_m™agî_boŸ°øp_ªque°_£rülize
(
kØ_boŸ°øp_m™agî_t
 *
£lf
, 
kØ_∂©f‹m_mesßge_wrôî_t
* 
wrôî
)

679 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
wrôî
, 
KAA_ERR_BADPARAM
);

680 
£lf
->
√xt_›î©i⁄s_ªque°_time
 = 
	`KAA_TIME
(Ë+ 
KAA_BOOTSTRAP_RESPONSE_PERIOD
;

681  
	`kØ_ch™√l_m™agî_boŸ°øp_ªque°_£rülize
(
£lf
->
ch™√l_m™agî
, 
wrôî
);

682 
	}
}

	@/var/www/html/debian/gateway/kaa/src/extensions/bootstrap/kaa_bootstrap_manager.h

24 #i‚de‡
KAA_BOOTSTRAP_MANAGER_H_


25 
	#KAA_BOOTSTRAP_MANAGER_H_


	)

27 
	~<°dboﬁ.h
>

28 
	~"kØ_îr‹.h
"

29 
	~"kØ_comm⁄.h
"

30 
	~"∂©f‹m/ext_kØ_Áûovî_°øãgy.h
"

32 #ifde‡
__˝lu•lus


37 #i‚de‡
KAA_BOOTSTRAP_MANAGER_T


38 
	#KAA_BOOTSTRAP_MANAGER_T


	)

39 
kØ_boŸ°øp_m™agî_t
 
	tkØ_boŸ°øp_m™agî_t
;

45 
	gKAA_SERVER_BOOTSTRAP
 = 0,

46 
	gKAA_SERVER_OPERATIONS
 = 1

47 } 
	tkØ_£rvî_ty≥_t
;

62 
kØ_îr‹_t
 
kØ_boŸ°øp_m™agî_⁄_ac˚ss_poöt_Áûed
(
kØ_boŸ°øp_m™agî_t
 *
£lf
,

63 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 *
¥Ÿocﬁ_id
,

64 
kØ_£rvî_ty≥_t
 
ty≥
,

65 
kØ_Áûovî_ªas⁄
 
ªas⁄_code
);

67 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/extensions/bootstrap/test/test_kaa_bootstrap_manager.c

17 
	~<°rög.h
>

18 
	~<°ddef.h
>

19 
	~<°dlib.h
>

20 
	~<time.h
>

21 
	~<°dboﬁ.h
>

22 
	~<°dio.h
>

23 
	~<°döt.h
>

25 
	~"kØ_ã°.h
"

27 
	~"kØ_c⁄ãxt.h
"

28 
	~"kØ_deÁu…s.h
"

29 
	~"kØ_boŸ°øp_m™agî.h
"

30 
	~"kØ_ch™√l_m™agî.h
"

31 
	~"utûôõs/kØ_log.h
"

32 
	~"utûôõs/kØ_mem.h
"

33 
	~"kØ_∂©f‹m_comm⁄.h
"

34 
	~"kØ_∂©f‹m_¥Ÿocﬁ.h
"

35 
	~"kØ_∂©f‹m_utûs.h
"

36 
	~"∂©f‹m/ext_å™•‹t_ch™√l.h
"

37 
	~"∂©f‹m/sock.h
"

39 
	~"kØ_¥iv©e.h
"

42 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 
	m¥Ÿocﬁ_öfo
;

43 
kØ_ac˚ss_poöt_t
 *
	mac˚ss_poöt
;

44 
kØ_exãnsi⁄_id
* 
	m£rvi˚s
;

45 
size_t
 
	m£rvi˚s_cou¡
;

46 
kØ_å™•‹t_c⁄ãxt_t
 
	må™•‹t_c⁄ãxt
;

47 } 
	tã°_ch™√l_c⁄ãxt_t
;

51 
kØ_c⁄ãxt_t
 
	gkØ_c⁄ãxt
;

52 
kØ_loggî_t
 *
	gloggî
 = 
NULL
;

53 
kØ_ch™√l_m™agî_t
 *
	gch™√l_m™agî
 = 
NULL
;

55 
kØ_exãnsi⁄_id
 
	gSUPPORTED_SERVICES
[] = { 
KAA_EXTENSION_PROFILE


56 , 
KAA_EXTENSION_USER


57 , 
KAA_EXTENSION_EVENT


58 , 
KAA_EXTENSION_LOGGING
 };

60 
size_t
 
	gSUPPORTED_SERVICES_COUNT
 = (
SUPPORTED_SERVICES
Ë/ (
kØ_exãnsi⁄_id
);

64 
kØ_îr‹_t
 
	$ã°_öô_ch™√l
(*
ch™√l_c⁄ãxt


65 , 
kØ_å™•‹t_c⁄ãxt_t
 *
å™•‹t_c⁄ãxt
)

67 
	`KAA_RETURN_IF_NIL2
(
ch™√l_c⁄ãxt
, 
å™•‹t_c⁄ãxt
, 
KAA_ERR_BADPARAM
);

69 ((
ã°_ch™√l_c⁄ãxt_t
 *)
ch™√l_c⁄ãxt
)->
å™•‹t_c⁄ãxt
 = *transport_context;

70  
KAA_ERR_NONE
;

71 
	}
}

73 
kØ_îr‹_t
 
	$ã°_£t_ac˚ss_poöt
(*
c⁄ãxt


74 , 
kØ_ac˚ss_poöt_t
 *
ac˚ss_poöt
)

76 
	`KAA_RETURN_IF_NIL2
(
c⁄ãxt
, 
ac˚ss_poöt
, 
KAA_ERR_BADPARAM
);

77 
ã°_ch™√l_c⁄ãxt_t
 *
ch™√l_c⁄ãxt
 = (ã°_ch™√l_c⁄ãxt_à*)
c⁄ãxt
;

78 
ch™√l_c⁄ãxt
->
ac˚ss_poöt
 =áccess_point;

80  
KAA_ERR_NONE
;

81 
	}
}

83 
kØ_îr‹_t
 
	$ã°_gë_¥Ÿocﬁ_öfo
(*
c⁄ãxt
, 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 *
¥Ÿocﬁ_öfo
)

85 
	`KAA_RETURN_IF_NIL2
(
c⁄ãxt
, 
¥Ÿocﬁ_öfo
, 
KAA_ERR_BADPARAM
);

87 
ã°_ch™√l_c⁄ãxt_t
 *
ch™√l_c⁄ãxt
 = (ã°_ch™√l_c⁄ãxt_à*)
c⁄ãxt
;

88 *
¥Ÿocﬁ_öfo
 = 
ch™√l_c⁄ãxt
->protocol_info;

90  
KAA_ERR_NONE
;

91 
	}
}

93 
kØ_îr‹_t
 
	$ã°_gë_suµ‹ãd_£rvi˚s
(*
c⁄ãxt


94 , 
kØ_exãnsi⁄_id
 **
suµ‹ãd_£rvi˚s


95 , 
size_t
 *
£rvi˚_cou¡
)

97 
	`KAA_RETURN_IF_NIL3
(
c⁄ãxt
, 
suµ‹ãd_£rvi˚s
, 
£rvi˚_cou¡
, 
KAA_ERR_BADPARAM
);

99 
ã°_ch™√l_c⁄ãxt_t
 *
ch™√l_c⁄ãxt
 = (ã°_ch™√l_c⁄ãxt_à*)
c⁄ãxt
;

100 *
suµ‹ãd_£rvi˚s
 = 
ch™√l_c⁄ãxt
->
£rvi˚s
;

101 *
£rvi˚_cou¡
 = 
ch™√l_c⁄ãxt
->
£rvi˚s_cou¡
;

103  
KAA_ERR_NONE
;

104 
	}
}

106 
kØ_îr‹_t
 
	$ã°_sync_h™dÀr
(*
c⁄ãxt


107 , c⁄° 
kØ_exãnsi⁄_id
 
£rvi˚s
[]

108 , 
size_t
 
£rvi˚_cou¡
)

110 
	`KAA_RETURN_IF_NIL3
(
c⁄ãxt
, 
£rvi˚s
, 
£rvi˚_cou¡
, 
KAA_ERR_BADPARAM
);

111  
KAA_ERR_NONE
;

112 
	}
}

114 
	$ã°_¸óã_ch™√l_öãrÁ˚
(
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√l


115 , 
ã°_ch™√l_c⁄ãxt_t
 *
c⁄ãxt
)

117 
ch™√l
->
c⁄ãxt
 = context;

118 
ch™√l
->
gë_¥Ÿocﬁ_id
 = &
ã°_gë_¥Ÿocﬁ_öfo
;

119 
ch™√l
->
gë_suµ‹ãd_£rvi˚s
 = &
ã°_gë_suµ‹ãd_£rvi˚s
;

120 
ch™√l
->
sync_h™dÀr
 = &
ã°_sync_h™dÀr
;

121 
ch™√l
->
de°roy
 = 
NULL
;

122 
ch™√l
->
öô
 = &
ã°_öô_ch™√l
;

123 
ch™√l
->
£t_ac˚ss_poöt
 = &
ã°_£t_ac˚ss_poöt
;

124 
	}
}

128 
	$ã°_¸óã_boŸ°øp_m™agî
(**
°©e
)

130 ()
°©e
;

132 
kØ_îr‹_t
 
îr‹_code
;

133 
kØ_boŸ°øp_m™agî_t
* 
m™agî
 = 
NULL
;

135 
îr‹_code
 = 
	`kØ_boŸ°øp_m™agî_¸óã
(
NULL
, &
kØ_c⁄ãxt
);

136 
	`ASSERT_NOT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

138 
îr‹_code
 = 
	`kØ_boŸ°øp_m™agî_¸óã
(&
m™agî
, 
NULL
);

139 
	`ASSERT_NOT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

141 
îr‹_code
 = 
	`kØ_boŸ°øp_m™agî_¸óã
(&
m™agî
, &
kØ_c⁄ãxt
);

142 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

144 
	`kØ_boŸ°øp_m™agî_de°roy
(
m™agî
);

145 
	}
}

147 
kØ_ac˚ss_poöt_t
 *
	$¸óã_ac˚ss_poöt
()

149 c⁄° 
uöt16_t
 
MAX_CONNECTION_DATA_SIZE
 = 16;

151 
kØ_ac˚ss_poöt_t
 *
ac˚ss_poöt
 = (kØ_ac˚ss_poöt_à*)
	`KAA_MALLOC
((kaa_access_point_t));

152 
	`ASSERT_NOT_NULL
(
ac˚ss_poöt
);

154 
ac˚ss_poöt
->
id
 = 
	`ønd
();

155 
ac˚ss_poöt
->
c⁄√˘i⁄_d©a_Àn
 = 1 + 
	`ønd
(Ë% 
MAX_CONNECTION_DATA_SIZE
;

156 
ac˚ss_poöt
->
c⁄√˘i⁄_d©a
 = (*)
	`KAA_MALLOC
◊c˚ss_poöt->
c⁄√˘i⁄_d©a_Àn
);

158 
	`ASSERT_NOT_NULL
(
ac˚ss_poöt
->
c⁄√˘i⁄_d©a
);

160  
ac˚ss_poöt
;

161 
	}
}

163 
	$de°roy_ac˚ss_poöt
(
kØ_ac˚ss_poöt_t
 * 
ac˚ss_poöt
)

165 i‡(
ac˚ss_poöt
) {

166 i‡(
ac˚ss_poöt
->
c⁄√˘i⁄_d©a
) {

167 
	`KAA_FREE
(
ac˚ss_poöt
->
c⁄√˘i⁄_d©a
);

169 
	`KAA_FREE
(
ac˚ss_poöt
);

171 
	}
}

173 
	$ã°_h™dÀ_£rvî_sync
(**
°©e
)

175 ()
°©e
;

177 
kØ_îr‹_t
 
îr‹_code
;

178 
kØ_boŸ°øp_m™agî_t
 *
boŸ°øp_m™agî
 = 
NULL
;

181 
îr‹_code
 = 
	`kØ_boŸ°øp_m™agî_¸óã
(&
boŸ°øp_m™agî
, &
kØ_c⁄ãxt
);

182 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

184 
kØ_c⁄ãxt
.
boŸ°øp_m™agî
 = bootstrap_manager;

188 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 
¥Ÿocﬁ1
 = { 1, 1 };

189 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 
¥Ÿocﬁ2
 = { 2, 1 };

190 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 
¥Ÿocﬁ3
 = { 465, 564 };

192 
ã°_ch™√l_c⁄ãxt_t
 
¥Ÿocﬁ1_ch™√l_c⁄ãxt
 = { 
¥Ÿocﬁ1
, 
NULL
, 
SUPPORTED_SERVICES
,

193 
SUPPORTED_SERVICES_COUNT
, {
NULL
} };

194 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 
¥Ÿocﬁ1_ch™√l
;

195 
	`ã°_¸óã_ch™√l_öãrÁ˚
(&
¥Ÿocﬁ1_ch™√l
, &
¥Ÿocﬁ1_ch™√l_c⁄ãxt
);

197 
ã°_ch™√l_c⁄ãxt_t
 
¥Ÿocﬁ2_ch™√l_c⁄ãxt
 = { 
¥Ÿocﬁ2
, 
NULL
, 
SUPPORTED_SERVICES
,

198 
SUPPORTED_SERVICES_COUNT
, {
NULL
} };

199 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 
¥Ÿocﬁ2_ch™√l
;

200 
	`ã°_¸óã_ch™√l_öãrÁ˚
(&
¥Ÿocﬁ2_ch™√l
, &
¥Ÿocﬁ2_ch™√l_c⁄ãxt
);

202 
ã°_ch™√l_c⁄ãxt_t
 
¥Ÿocﬁ3_ch™√l_c⁄ãxt
 = { 
¥Ÿocﬁ3
, 
NULL
, 
SUPPORTED_SERVICES
,

203 
SUPPORTED_SERVICES_COUNT
, {
NULL
} };

204 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 
¥Ÿocﬁ3_ch™√l
;

205 
	`ã°_¸óã_ch™√l_öãrÁ˚
(&
¥Ÿocﬁ3_ch™√l
, &
¥Ÿocﬁ3_ch™√l_c⁄ãxt
);

207 
uöt32_t
 
¥Ÿocﬁ1_ch™√l_id
;

208 
îr‹_code
 = 
	`kØ_ch™√l_m™agî_add_å™•‹t_ch™√l
(
ch™√l_m™agî


209 , &
¥Ÿocﬁ1_ch™√l


210 , &
¥Ÿocﬁ1_ch™√l_id
);

211 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

213 
uöt32_t
 
¥Ÿocﬁ3_ch™√l_id
;

214 
îr‹_code
 = 
	`kØ_ch™√l_m™agî_add_å™•‹t_ch™√l
(
ch™√l_m™agî


215 , &
¥Ÿocﬁ3_ch™√l


216 , &
¥Ÿocﬁ3_ch™√l_id
);

217 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

219 
uöt16_t
 
£rvî_sync_∑ylﬂd_size
 = 0;

221 
size_t
 
ac˚ss_poöt_cou¡
 = 0;

222 
kØ_ac˚ss_poöt_t
 *
ac˚ss_poöt1_¥Ÿocﬁ1
 = 
	`¸óã_ac˚ss_poöt
();

223 
	`ASSERT_NOT_NULL
(
ac˚ss_poöt1_¥Ÿocﬁ1
);

224 ++
ac˚ss_poöt_cou¡
;

225 
£rvî_sync_∑ylﬂd_size
 +
	`kØ_Æig√d_size_gë
(
ac˚ss_poöt1_¥Ÿocﬁ1
->
c⁄√˘i⁄_d©a_Àn
);

227 
kØ_ac˚ss_poöt_t
 *
ac˚ss_poöt2_¥Ÿocﬁ1
 = 
	`¸óã_ac˚ss_poöt
();

228 
	`ASSERT_NOT_NULL
(
ac˚ss_poöt2_¥Ÿocﬁ1
);

229 ++
ac˚ss_poöt_cou¡
;

230 
£rvî_sync_∑ylﬂd_size
 +
	`kØ_Æig√d_size_gë
(
ac˚ss_poöt2_¥Ÿocﬁ1
->
c⁄√˘i⁄_d©a_Àn
);

232 
kØ_ac˚ss_poöt_t
 *
ac˚ss_poöt1_¥Ÿocﬁ2
 = 
	`¸óã_ac˚ss_poöt
();

233 
	`ASSERT_NOT_NULL
(
ac˚ss_poöt1_¥Ÿocﬁ2
);

234 ++
ac˚ss_poöt_cou¡
;

235 
£rvî_sync_∑ylﬂd_size
 +
	`kØ_Æig√d_size_gë
(
ac˚ss_poöt1_¥Ÿocﬁ2
->
c⁄√˘i⁄_d©a_Àn
);

237 
£rvî_sync_∑ylﬂd_size
 +(
uöt16_t
)

238 + (
uöt16_t
)

239 + 
ac˚ss_poöt_cou¡
 * ((
uöt32_t
)

240 + (
uöt32_t
)

241 + (
uöt16_t
)

242 + (
uöt16_t
));

247 
£rvî_sync_buf„r
[
£rvî_sync_∑ylﬂd_size
];

248 
kØ_∂©f‹m_mesßge_wrôî_t
 *
wrôî
;

249 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôî_¸óã
(&
wrôî
, 
£rvî_sync_buf„r
, 
£rvî_sync_∑ylﬂd_size
);

250 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

252 
uöt16_t
 
√tw‹k_‹dî_16
 = 0xAEF5;

253 
uöt32_t
 
√tw‹k_‹dî_32
 = 0xEAFC5370;

256 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
wrôî
, &
√tw‹k_‹dî_16
, (
uöt16_t
));

257 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

259 
√tw‹k_‹dî_16
 = 
	`KAA_HTONS
(
ac˚ss_poöt_cou¡
);

260 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
wrôî
, &
√tw‹k_‹dî_16
, (
uöt16_t
));

261 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

266 
kØ_ac˚ss_poöt_t
 *
ac˚ss_poöts
[] = { 
ac˚ss_poöt1_¥Ÿocﬁ1


267 , 
ac˚ss_poöt2_¥Ÿocﬁ1


268 , 
ac˚ss_poöt1_¥Ÿocﬁ2
 };

270 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 *
¥Ÿoco_öfos
[] = { &
¥Ÿocﬁ1


271 , &
¥Ÿocﬁ1


272 , &
¥Ÿocﬁ2
 };

274 
uöt16_t
 
i
 = 0; i < 
ac˚ss_poöt_cou¡
; ++i) {

275 
√tw‹k_‹dî_32
 = 
	`KAA_HTONL
(
ac˚ss_poöts
[
i
]->
id
);

276 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
wrôî
, &
√tw‹k_‹dî_32
, (
uöt32_t
));

277 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

279 
√tw‹k_‹dî_32
 = 
	`KAA_HTONL
(
¥Ÿoco_öfos
[
i
]->
id
);

280 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
wrôî
, &
√tw‹k_‹dî_32
, (
uöt32_t
));

281 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

283 
√tw‹k_‹dî_16
 = 
	`KAA_HTONS
(
¥Ÿoco_öfos
[
i
]->
vîsi⁄
);

284 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
wrôî
, &
√tw‹k_‹dî_16
, (
uöt16_t
));

285 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

287 
√tw‹k_‹dî_16
 = 
	`KAA_HTONS
(
ac˚ss_poöts
[
i
]->
c⁄√˘i⁄_d©a_Àn
);

288 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
wrôî
, &
√tw‹k_‹dî_16
, (
uöt16_t
));

289 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

291 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe_Æig√d
(
wrôî


292 , 
ac˚ss_poöts
[
i
]->
c⁄√˘i⁄_d©a


293 , 
ac˚ss_poöts
[
i
]->
c⁄√˘i⁄_d©a_Àn
);

294 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

297 
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî
 = 
NULL
;

298 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªadî_¸óã
(&
ªadî
, 
£rvî_sync_buf„r
, 
£rvî_sync_∑ylﬂd_size
);

299 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

304 
	`ASSERT_NULL
(
¥Ÿocﬁ1_ch™√l_c⁄ãxt
.
ac˚ss_poöt
);

305 
	`ASSERT_NULL
(
¥Ÿocﬁ2_ch™√l_c⁄ãxt
.
ac˚ss_poöt
);

306 
	`ASSERT_NULL
(
¥Ÿocﬁ3_ch™√l_c⁄ãxt
.
ac˚ss_poöt
);

308 
îr‹_code
 = 
	`kØ_boŸ°øp_m™agî_h™dÀ_£rvî_sync
(
boŸ°øp_m™agî
, 
ªadî
, 0, 
£rvî_sync_∑ylﬂd_size
);

309 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

311 
	`ASSERT_NOT_NULL
(
¥Ÿocﬁ1_ch™√l_c⁄ãxt
.
ac˚ss_poöt
);

312 
	`ASSERT_EQUAL
(
¥Ÿocﬁ1_ch™√l_c⁄ãxt
.
ac˚ss_poöt
->
id
, 
ac˚ss_poöt2_¥Ÿocﬁ1
->id);

314 
	`ASSERT_NULL
(
¥Ÿocﬁ3_ch™√l_c⁄ãxt
.
ac˚ss_poöt
);

316 
uöt32_t
 
¥Ÿocﬁ2_ch™√l_id
;

317 
îr‹_code
 = 
	`kØ_ch™√l_m™agî_add_å™•‹t_ch™√l
(
ch™√l_m™agî


318 , &
¥Ÿocﬁ2_ch™√l


319 , &
¥Ÿocﬁ2_ch™√l_id
);

320 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

321 
	`ASSERT_NOT_NULL
(
¥Ÿocﬁ2_ch™√l_c⁄ãxt
.
ac˚ss_poöt
);

322 
	`ASSERT_EQUAL
(
¥Ÿocﬁ2_ch™√l_c⁄ãxt
.
ac˚ss_poöt
->
id
, 
ac˚ss_poöt1_¥Ÿocﬁ2
->id);

324 
	`ASSERT_NOT_NULL
(
¥Ÿocﬁ1_ch™√l_c⁄ãxt
.
å™•‹t_c⁄ãxt
.
kØ_c⁄ãxt
);

325 
	`ASSERT_NOT_NULL
(
¥Ÿocﬁ1_ch™√l_c⁄ãxt
.
å™•‹t_c⁄ãxt
.
kØ_c⁄ãxt
->
boŸ°øp_m™agî
);

326 
îr‹_code
 = 
	`kØ_boŸ°øp_m™agî_⁄_ac˚ss_poöt_Áûed
(
¥Ÿocﬁ1_ch™√l_c⁄ãxt
.
å™•‹t_c⁄ãxt
.
kØ_c⁄ãxt
->
boŸ°øp_m™agî


327 , &
¥Ÿocﬁ1_ch™√l_c⁄ãxt
.
¥Ÿocﬁ_öfo


328 , 
KAA_SERVER_OPERATIONS
);

329 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

330 
	`ASSERT_NOT_NULL
(
¥Ÿocﬁ1_ch™√l_c⁄ãxt
.
ac˚ss_poöt
);

331 
	`ASSERT_EQUAL
(
¥Ÿocﬁ1_ch™√l_c⁄ãxt
.
ac˚ss_poöt
->
id
, 
ac˚ss_poöt1_¥Ÿocﬁ1
->id);

333 
îr‹_code
 = 
	`kØ_boŸ°øp_m™agî_⁄_ac˚ss_poöt_Áûed
(
¥Ÿocﬁ1_ch™√l_c⁄ãxt
.
å™•‹t_c⁄ãxt
.
kØ_c⁄ãxt
->
boŸ°øp_m™agî


334 , &
¥Ÿocﬁ1_ch™√l_c⁄ãxt
.
¥Ÿocﬁ_öfo


335 , 
KAA_SERVER_OPERATIONS
);

336 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NOT_FOUND
);

341 
	`de°roy_ac˚ss_poöt
(
ac˚ss_poöt1_¥Ÿocﬁ1
);

342 
	`de°roy_ac˚ss_poöt
(
ac˚ss_poöt1_¥Ÿocﬁ2
);

343 
	`de°roy_ac˚ss_poöt
(
ac˚ss_poöt2_¥Ÿocﬁ1
);

344 
	`kØ_ch™√l_m™agî_ªmove_å™•‹t_ch™√l
(
ch™√l_m™agî
, 
¥Ÿocﬁ1_ch™√l_id
);

345 
	`kØ_ch™√l_m™agî_ªmove_å™•‹t_ch™√l
(
ch™√l_m™agî
, 
¥Ÿocﬁ2_ch™√l_id
);

346 
	`kØ_ch™√l_m™agî_ªmove_å™•‹t_ch™√l
(
ch™√l_m™agî
, 
¥Ÿocﬁ3_ch™√l_id
);

347 
	`kØ_∂©f‹m_mesßge_ªadî_de°roy
(
ªadî
);

348 
	`kØ_∂©f‹m_mesßge_wrôî_de°roy
(
wrôî
);

349 
	`kØ_boŸ°øp_m™agî_de°roy
(
boŸ°øp_m™agî
);

350 
kØ_c⁄ãxt
.
boŸ°øp_m™agî
 = 
NULL
;

351 
	}
}

355 #i‡
KAA_BOOTSTRAP_ACCESS_POINT_COUNT
 > 0

357 
kØ_îr‹_t
 
	$föd_boŸ°øp_ac˚ss_poöt_ödex
(
kØ_å™•‹t_¥Ÿocﬁ_id_t
 *
id


358 , 
size_t
 
ödex_‰om


359 , 
size_t
 *
ac˚ss_poöt_ödex
)

361 
	`KAA_RETURN_IF_NIL2
(
id
, 
ac˚ss_poöt_ödex
, 
KAA_ERR_BADDATA
);

363 i‡(
ödex_‰om
 < 
KAA_BOOTSTRAP_ACCESS_POINT_COUNT
) {

364 
size_t
 
i
 = 
ödex_‰om
; i < 
KAA_BOOTSTRAP_ACCESS_POINT_COUNT
; ++i) {

365 i‡(0 =
	`memcmp
(
id
, &(
KAA_BOOTSTRAP_ACCESS_POINTS
[
i
].
¥Ÿocﬁ_id
), (
kØ_å™•‹t_¥Ÿocﬁ_id_t
))) {

366 *
ac˚ss_poöt_ödex
 = 
i
;

367  
KAA_ERR_NONE
;

372  
KAA_ERR_NOT_FOUND
;

373 
	}
}

375 
	$ã°_boŸ°øp_ch™√l
(**
°©e
)

377 ()
°©e
;

379 
kØ_îr‹_t
 
îr‹_code
;

380 
kØ_boŸ°øp_m™agî_t
 *
boŸ°øp_m™agî
 = 
NULL
;

383 
îr‹_code
 = 
	`kØ_boŸ°øp_m™agî_¸óã
(&
boŸ°øp_m™agî
, &
kØ_c⁄ãxt
);

384 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

386 
kØ_c⁄ãxt
.
boŸ°øp_m™agî
 = bootstrap_manager;

391 
size_t
 
ödex
 = 
	`ønd
(Ë% 
KAA_BOOTSTRAP_ACCESS_POINT_COUNT
;

392 
kØ_exãnsi⁄_id
 
boŸ°øp_£rvi˚
[] = { 
KAA_EXTENSION_BOOTSTRAP
 };

394 
ã°_ch™√l_c⁄ãxt_t
 
boŸ°øp_ch™√l_c⁄ãxt
 = { 
KAA_BOOTSTRAP_ACCESS_POINTS
[
ödex
].
¥Ÿocﬁ_id


395 , 
NULL


396 , 
boŸ°øp_£rvi˚


398 , {
NULL
} };

399 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 
boŸ°øp_ch™√l
;

400 
	`ã°_¸óã_ch™√l_öãrÁ˚
(&
boŸ°øp_ch™√l
, &
boŸ°øp_ch™√l_c⁄ãxt
);

402 
uöt32_t
 
boŸ°øp_ch™√l_id
;

403 
îr‹_code
 = 
	`kØ_ch™√l_m™agî_add_å™•‹t_ch™√l
(
ch™√l_m™agî


404 , &
boŸ°øp_ch™√l


405 , &
boŸ°øp_ch™√l_id
);

406 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

408 
size_t
 
ex≥˘ed_ödex
;

409 
îr‹_code
 = 
	`föd_boŸ°øp_ac˚ss_poöt_ödex
((
kØ_å™•‹t_¥Ÿocﬁ_id_t
 *)&(
KAA_BOOTSTRAP_ACCESS_POINTS
[
ödex
].
¥Ÿocﬁ_id
)

411 , &
ex≥˘ed_ödex
);

412 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

414 
	`ASSERT_NOT_NULL
(
boŸ°øp_ch™√l_c⁄ãxt
.
ac˚ss_poöt
);

415 
	`ASSERT_EQUAL
(
boŸ°øp_ch™√l_c⁄ãxt
.
ac˚ss_poöt
->
c⁄√˘i⁄_d©a_Àn


416 , 
KAA_BOOTSTRAP_ACCESS_POINTS
[
ex≥˘ed_ödex
].
ac˚ss_poöt
.
c⁄√˘i⁄_d©a_Àn
);

417 
	`ASSERT_EQUAL
(0, 
	`memcmp
(
boŸ°øp_ch™√l_c⁄ãxt
.
ac˚ss_poöt
->
c⁄√˘i⁄_d©a


418 , 
KAA_BOOTSTRAP_ACCESS_POINTS
[
ex≥˘ed_ödex
].
ac˚ss_poöt
.
c⁄√˘i⁄_d©a


419 , 
boŸ°øp_ch™√l_c⁄ãxt
.
ac˚ss_poöt
->
c⁄√˘i⁄_d©a_Àn
));

422 #i‡
KAA_BOOTSTRAP_ACCESS_POINT_COUNT
 > 1

423 
îr‹_code
 = 
	`föd_boŸ°øp_ac˚ss_poöt_ödex
((
kØ_å™•‹t_¥Ÿocﬁ_id_t
 *)&(
KAA_BOOTSTRAP_ACCESS_POINTS
[
ödex
].
¥Ÿocﬁ_id
)

424 , 
ex≥˘ed_ödex
 + 1

425 , &
ex≥˘ed_ödex
);

427 i‡(!
îr‹_code
) {

428 
îr‹_code
 = 
	`kØ_boŸ°øp_m™agî_⁄_ac˚ss_poöt_Áûed
(
boŸ°øp_m™agî


429 , (
kØ_å™•‹t_¥Ÿocﬁ_id_t
 *)&(
KAA_BOOTSTRAP_ACCESS_POINTS
[
ödex
].
¥Ÿocﬁ_id
)

430 , 
KAA_SERVER_BOOTSTRAP
);

431 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

433 
	`ASSERT_NOT_NULL
(
boŸ°øp_ch™√l_c⁄ãxt
.
ac˚ss_poöt
);

434 
	`ASSERT_EQUAL
(
boŸ°øp_ch™√l_c⁄ãxt
.
ac˚ss_poöt
->
c⁄√˘i⁄_d©a_Àn


435 , 
KAA_BOOTSTRAP_ACCESS_POINTS
[
ex≥˘ed_ödex
].
ac˚ss_poöt
.
c⁄√˘i⁄_d©a_Àn
);

436 
	`ASSERT_EQUAL
(0, 
	`memcmp
(
boŸ°øp_ch™√l_c⁄ãxt
.
ac˚ss_poöt
->
c⁄√˘i⁄_d©a


437 , 
KAA_BOOTSTRAP_ACCESS_POINTS
[
ex≥˘ed_ödex
].
ac˚ss_poöt
.
c⁄√˘i⁄_d©a


438 , 
boŸ°øp_ch™√l_c⁄ãxt
.
ac˚ss_poöt
->
c⁄√˘i⁄_d©a_Àn
));

442 
îr‹_code
 = 
	`kØ_boŸ°øp_m™agî_⁄_ac˚ss_poöt_Áûed
(
boŸ°øp_m™agî


443 , (
kØ_å™•‹t_¥Ÿocﬁ_id_t
 *)&(
KAA_BOOTSTRAP_ACCESS_POINTS
[
ödex
].
¥Ÿocﬁ_id
)

444 , 
KAA_SERVER_BOOTSTRAP
);

445 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

447 
	`kØ_boŸ°øp_m™agî_de°roy
(
boŸ°øp_m™agî
);

448 
kØ_c⁄ãxt
.
boŸ°øp_m™agî
 = 
NULL
;

449 
	}
}

452 
	$ã°_öô
()

454 
	`§™d
(
	`time
(
NULL
));

456 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_log_¸óã
(&
loggî
, 
KAA_MAX_LOG_MESSAGE_LENGTH
, 
KAA_MAX_LOG_LEVEL
, 
NULL
);

457 i‡(
îr‹
 || !
loggî
)

458  
îr‹
;

460 
kØ_c⁄ãxt
.
loggî
 =Üogger;

461 
kØ_c⁄ãxt
.
∂©f‹m_¥Ÿocﬁ
 = 
NULL
;

462 
kØ_c⁄ãxt
.
boŸ°øp_m™agî
 = 
NULL
;

464 
îr‹
 = 
	`kØ_ch™√l_m™agî_¸óã
(&
ch™√l_m™agî
, &
kØ_c⁄ãxt
);

465 i‡(
îr‹
 || !
ch™√l_m™agî
)

466  
îr‹
;

469 
	}
}

471 
	$ã°_deöô
()

473 
	`kØ_ch™√l_m™agî_de°roy
(
ch™√l_m™agî
);

474 
	`kØ_log_de°roy
(
loggî
);

477 
	}
}

480 #i‡
KAA_BOOTSTRAP_ACCESS_POINT
 > 0

481 
KAA_SUITE_MAIN
(
BoŸ°øp
, 
ã°_öô
, 
ã°_deöô
,

482 
	$KAA_TEST_CASE
(
¸óã_boŸ°øp_m™agî
, 
ã°_¸óã_boŸ°øp_m™agî
)

483 
	$KAA_TEST_CASE
(
h™dÀ_£rvî_sync
, 
ã°_h™dÀ_£rvî_sync
)

484 
	$KAA_TEST_CASE
(
ã°_boŸ°øp_ch™√l
,Åest_bootstrap_channel)

487 
	`KAA_SUITE_MAIN
(
BoŸ°øp
, 
ã°_öô
, 
ã°_deöô
,

488 
	$KAA_TEST_CASE
(
¸óã_boŸ°øp_m™agî
, 
ã°_¸óã_boŸ°øp_m™agî
)

489 
	$KAA_TEST_CASE
(
h™dÀ_£rvî_sync
, 
ã°_h™dÀ_£rvî_sync
)

	@/var/www/html/debian/gateway/kaa/src/extensions/configuration/kaa_configuration_manager.c

17 
	~"kØ_c⁄figuøti⁄_m™agî_¥iv©e.h
"

18 
	~"kØ_c⁄figuøti⁄_m™agî.h
"

20 
	~"kØ_¥iv©e.h
"

22 
	~<°dboﬁ.h
>

23 
	~<öây≥s.h
>

24 
	~<°döt.h
>

25 
	~<sys/ty≥s.h
>

26 
	~"∂©f‹m/°dio.h
"

27 
	~"∂©f‹m/sock.h
"

29 
	~"∂©f‹m/ext_sha.h
"

30 
	~"∂©f‹m/ext_c⁄figuøti⁄_≥rsi°í˚.h
"

31 
	~"cﬁÀ˘i⁄s/kØ_li°.h
"

32 
	~"kØ_comm⁄.h
"

33 
	~"kØ_°©us.h
"

34 
	~"kØ_deÁu…s.h
"

35 
	~"kØ_∂©f‹m_utûs.h
"

36 
	~"kØ_∂©f‹m_comm⁄.h
"

37 
	~"kØ_ch™√l_m™agî.h
"

38 
	~"utûôõs/kØ_mem.h
"

39 
	~"utûôõs/kØ_log.h
"

40 
	~"avro_§c/avro/io.h
"

42 
	#KAA_CONFIGURATION_RECEIVE_UPDATES_FLAG
 0x01

	)

43 
	#KAA_CONFIGURATION_HASH_FLAG
 0x02

	)

44 
	#KAA_CONFIGURATION_FULL_RESYNC_FLAG
 0x04

	)

45 
	#KAA_CONFIGURATION_ALL_FLAGS
 (
KAA_CONFIGURATION_RECEIVE_UPDATES_FLAG
 | 
KAA_CONFIGURATION_HASH_FLAG
 | 
KAA_CONFIGURATION_FULL_RESYNC_FLAG
)

	)

48 
	#KAA_CONFIGURATION_BODY_PRESENT
 0x02

	)

50 
kØ_exãnsi⁄_id
 
	gc⁄figuøti⁄_sync_£rvi˚s
[1] = { 
KAA_EXTENSION_CONFIGURATION
 };

52 
	skØ_c⁄figuøti⁄_m™agî_t
 {

53 
kØ_dige°
 
	mc⁄figuøti⁄_hash
;

54 
kØ_c⁄figuøti⁄_roŸ_ª˚ivî_t
 
	mroŸ_ª˚ivî
;

55 
kØ_roŸ_c⁄figuøti⁄_t
 *
	mroŸ_ªc‹d
;

56 
kØ_ch™√l_m™agî_t
 *
	mch™√l_m™agî
;

57 
kØ_°©us_t
 *
	m°©us
;

58 
kØ_loggî_t
 *
	mloggî
;

59 
size_t
 
	m∑ylﬂd_size
;

62 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_c⁄figuøti⁄_öô
(
kØ_c⁄ãxt_t
 *
kØ_c⁄ãxt
, **
c⁄ãxt
)

64 
kØ_îr‹_t
 
ªsu…
 = 
	`kØ_c⁄figuøti⁄_m™agî_¸óã
(&
kØ_c⁄ãxt
->
c⁄figuøti⁄_m™agî
,

65 
kØ_c⁄ãxt
->
ch™√l_m™agî
,

66 
kØ_c⁄ãxt
->
°©us
->
°©us_ö°™˚
,

67 
kØ_c⁄ãxt
->
loggî
);

68 *
c⁄ãxt
 = 
kØ_c⁄ãxt
->
c⁄figuøti⁄_m™agî
;

69  
ªsu…
;

70 
	}
}

72 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_c⁄figuøti⁄_deöô
(*
c⁄ãxt
)

74 
	`kØ_c⁄figuøti⁄_m™agî_de°roy
(
c⁄ãxt
);

75  
KAA_ERR_NONE
;

76 
	}
}

78 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_c⁄figuøti⁄_ªque°_gë_size
(*
c⁄ãxt
, 
size_t
 *
ex≥˘ed_size
)

80  
	`kØ_c⁄figuøti⁄_m™agî_gë_size
(
c⁄ãxt
, 
ex≥˘ed_size
);

81 
	}
}

83 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_c⁄figuøti⁄_ªque°_£rülize
(*
c⁄ãxt
, 
uöt32_t
 
ªque°_id
,

84 
uöt8_t
 *
buf„r
, 
size_t
 *
size
, 
boﬁ
 *
√ed_ªsync
)

86 ()
ªque°_id
;

89 i‡(!
c⁄ãxt
 || !
size
 || !
√ed_ªsync
) {

90  
KAA_ERR_BADPARAM
;

93 *
√ed_ªsync
 = 
åue
;

95 
size_t
 
size_√eded
;

96 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_c⁄figuøti⁄_m™agî_gë_size
(
c⁄ãxt
, &
size_√eded
);

97 i‡(
îr‹
) {

98  
îr‹
;

101 i‡(!
buf„r
 || *
size
 < 
size_√eded
) {

102 *
size
 = 
size_√eded
;

103  
KAA_ERR_BUFFER_IS_NOT_ENOUGH
;

106 *
size
 = 
size_√eded
;

108 
kØ_∂©f‹m_mesßge_wrôî_t
 
wrôî
 = 
	`KAA_MESSAGE_WRITER
(
buf„r
, *
size
);

109 
îr‹
 = 
	`kØ_c⁄figuøti⁄_m™agî_ªque°_£rülize
(
c⁄ãxt
, &
wrôî
);

110 i‡(
îr‹
) {

111  
îr‹
;

114 *
size
 = 
wrôî
.
cuºít
 - 
buf„r
;

115  
KAA_ERR_NONE
;

116 
	}
}

118 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_c⁄figuøti⁄_£rvî_sync
(*
c⁄ãxt
, 
uöt32_t
 
ªque°_id
,

119 
uöt16_t
 
exãnsi⁄_›ti⁄s
, c⁄° 
uöt8_t
 *
buf„r
, 
size_t
 
size
)

121 ()
ªque°_id
;

124 i‡(!
c⁄ãxt
 || !
buf„r
) {

125  
KAA_ERR_BADPARAM
;

128 
kØ_∂©f‹m_mesßge_ªadî_t
 
ªadî
 = 
	`KAA_MESSAGE_READER
(
buf„r
, 
size
);

129  
	`kØ_c⁄figuøti⁄_m™agî_h™dÀ_£rvî_sync
(
c⁄ãxt
, &
ªadî
, 
exãnsi⁄_›ti⁄s
, 
size
);

130 
	}
}

132 
kØ_roŸ_c⁄figuøti⁄_t
 *
	$kØ_c⁄figuøti⁄_m™agî_de£rülize
(c⁄° *
buf„r
, 
size_t
 
buf„r_size
)

134 
	`KAA_RETURN_IF_NIL2
(
buf„r
, 
buf„r_size
, 
NULL
);

136 
avro_ªadî_t
 
ªadî
 = 
	`avro_ªadî_mem‹y
(
buf„r
, 
buf„r_size
);

137 
	`KAA_RETURN_IF_NIL
(
ªadî
, 
NULL
);

138 
kØ_roŸ_c⁄figuøti⁄_t
 *
ªsu…
 = 
	`KAA_CONFIGURATION_DESERIALIZE
(
ªadî
);

139 
	`avro_ªadî_‰ì
(
ªadî
);

140  
ªsu…
;

141 
	}
}

145 
kØ_îr‹_t
 
	$kØ_c⁄figuøti⁄_m™agî_¸óã
(
kØ_c⁄figuøti⁄_m™agî_t
 **
c⁄figuøti⁄_m™agî_p
, 
kØ_ch™√l_m™agî_t
 *
ch™√l_m™agî
, 
kØ_°©us_t
 *
°©us
, 
kØ_loggî_t
 *
loggî
)

147 
	`KAA_RETURN_IF_NIL3
(
c⁄figuøti⁄_m™agî_p
, 
°©us
, 
loggî
, 
KAA_ERR_BADPARAM
);

148 
kØ_c⁄figuøti⁄_m™agî_t
 *
m™agî
 = (kØ_c⁄figuøti⁄_m™agî_à*Ë
	`KAA_MALLOC
((kaa_configuration_manager_t));

149 
	`KAA_RETURN_IF_NIL
(
m™agî
, 
KAA_ERR_NOMEM
);

151 
m™agî
->
ch™√l_m™agî
 = channel_manager;

152 
m™agî
->
°©us
 = status;

153 
m™agî
->
loggî
 =Üogger;

154 
m™agî
->
roŸ_ª˚ivî
 = (
kØ_c⁄figuøti⁄_roŸ_ª˚ivî_t
Ë{ 
NULL
, NULL };

156 *
buf„r
 = 
NULL
;

157 
size_t
 
buf„r_size
 = 0;

158 
boﬁ
 
√ed_dóŒoˇti⁄
 = 
Ál£
;

159 i‡(
°©us
->
is_upd©ed
)

160 
	`ext_c⁄figuøti⁄_ªad
(&
buf„r
, &
buf„r_size
, &
√ed_dóŒoˇti⁄
);

162 
	`ext_c⁄figuøti⁄_dñëe
();

163 i‡(!
buf„r
 || !
buf„r_size
) {

164 
√ed_dóŒoˇti⁄
 = 
Ál£
;

165 #i‡
KAA_CONFIGURATION_DATA_LENGTH
 > 0

166 
buf„r
 = (*)
KAA_CONFIGURATION_DATA
;

167 
buf„r_size
 = 
KAA_CONFIGURATION_DATA_LENGTH
;

171 i‡(
buf„r
 && 
buf„r_size
 > 0) {

172 
	`ext_ˇlcuœã_sha_hash
(
buf„r
, 
buf„r_size
, 
m™agî
->
c⁄figuøti⁄_hash
);

173 
m™agî
->
roŸ_ªc‹d
 = 
	`kØ_c⁄figuøti⁄_m™agî_de£rülize
(
buf„r
, 
buf„r_size
);

175 i‡(!
m™agî
->
roŸ_ªc‹d
) {

176 
	`KAA_FREE
(
m™agî
);

177 i‡(
√ed_dóŒoˇti⁄
 && 
buf„r
)

178 
	`KAA_FREE
(
buf„r
);

179  
KAA_ERR_NOMEM
;

182 i‡(
√ed_dóŒoˇti⁄
)

183 
	`KAA_FREE
(
buf„r
);

186 *
c⁄figuøti⁄_m™agî_p
 = 
m™agî
;

187  
KAA_ERR_NONE
;

188 
	}
}

193 
	$kØ_c⁄figuøti⁄_m™agî_de°roy
(
kØ_c⁄figuøti⁄_m™agî_t
 *
£lf
)

195 i‡(
£lf
) {

196 i‡(
£lf
->
roŸ_ªc‹d
)

197 
£lf
->
roŸ_ªc‹d
->
	`de°roy
(self->root_record);

198 
	`KAA_FREE
(
£lf
);

200 
	}
}

204 
kØ_îr‹_t
 
	$kØ_c⁄figuøti⁄_m™agî_gë_size
(
kØ_c⁄figuøti⁄_m™agî_t
 *
£lf
, 
size_t
 *
ex≥˘ed_size
)

206 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
ex≥˘ed_size
, 
KAA_ERR_BADPARAM
);

208 *
ex≥˘ed_size
 = 
KAA_EXTENSION_HEADER_SIZE
 + 
SHA_1_DIGEST_LENGTH
;

209 
£lf
->
∑ylﬂd_size
 = 
SHA_1_DIGEST_LENGTH
;

211  
KAA_ERR_NONE
;

212 
	}
}

216 
kØ_îr‹_t
 
	$kØ_c⁄figuøti⁄_m™agî_ªque°_£rülize
(
kØ_c⁄figuøti⁄_m™agî_t
 *
£lf
, 
kØ_∂©f‹m_mesßge_wrôî_t
 *
wrôî
)

218 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
wrôî
, 
KAA_ERR_BADPARAM
);

220 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "GoingÅo serialize client configuration sync");

222 
kØ_∂©f‹m_mesßge_wrôî_t
 
tmp_wrôî
 = *
wrôî
;

223 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe_exãnsi⁄_hódî
(&
tmp_wrôî
, 
KAA_EXTENSION_CONFIGURATION
, 
KAA_CONFIGURATION_ALL_FLAGS
, 
£lf
->
∑ylﬂd_size
);

224 i‡(
îr‹_code
) {

225 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹_code
, "FailedÅo write configurationÉxtension header");

226  
KAA_ERR_WRITE_FAILED
;

229 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe_Æig√d
(&
tmp_wrôî
, 
£lf
->
c⁄figuøti⁄_hash
, 
SHA_1_DIGEST_LENGTH
);

230 i‡(
îr‹_code
) {

231 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹_code
, "FailedÅo write configuration hash");

232  
KAA_ERR_WRITE_FAILED
;

235 *
wrôî
 = 
tmp_wrôî
;

237  
KAA_ERR_NONE
;

238 
	}
}

242 
kØ_îr‹_t
 
	$kØ_c⁄figuøti⁄_m™agî_h™dÀ_£rvî_sync
(
kØ_c⁄figuøti⁄_m™agî_t
 *
£lf


243 , 
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî


244 , 
uöt16_t
 
exãnsi⁄_›ti⁄s


245 , 
size_t
 
exãnsi⁄_Àngth
)

247 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
ªadî
, 
KAA_ERR_BADPARAM
);

249 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Re˚ived c⁄figuøti⁄ sîvî sync: o±i⁄†%u,Öaylﬂd sizê%u", 
exãnsi⁄_›ti⁄s
, 
exãnsi⁄_Àngth
);

251 i‡(
exãnsi⁄_Àngth
 >(
uöt32_t
)) {

252 i‡(
exãnsi⁄_›ti⁄s
 & 
KAA_CONFIGURATION_BODY_PRESENT
) {

253 
uöt32_t
 
body_size
 = 
	`KAA_NTOHL
(*((uöt32_à*Ë
ªadî
->
cuºít
));

254 
ªadî
->
cuºít
 +(
uöt32_t
);

255 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Re˚ived c⁄figuøti⁄ body, sizê'%u' ", 
body_size
);

256 c⁄° 
uöt8_t
 *
body
 = 
ªadî
->
cuºít
;

257 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_∂©f‹m_mesßge_skù
(
ªadî
, 
	`kØ_Æig√d_size_gë
(
body_size
));

258 i‡(
îr‹
) {

259 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹
, "FaûedÅÿªad c⁄figuøti⁄ body, sizê%u", 
body_size
);

260  
îr‹
;

263 i‡(
£lf
->
roŸ_ªc‹d
)

264 
£lf
->
roŸ_ªc‹d
->
	`de°roy
(self->root_record);

266 
£lf
->
roŸ_ªc‹d
 = 
	`kØ_c⁄figuøti⁄_m™agî_de£rülize
((c⁄° *)
body
, 
body_size
);

267 i‡(!
£lf
->
roŸ_ªc‹d
) {

268 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
KAA_ERR_READ_FAILED
, "FaûedÅÿde£rülizêc⁄figuøti⁄ body, sizê%u", 
body_size
);

269  
KAA_ERR_READ_FAILED
;

272 
kØ_îr‹_t
 
îr
 = 
	`ext_ˇlcuœã_sha_hash
((c⁄° *)
body
, 
body_size
, 
£lf
->
c⁄figuøti⁄_hash
);

273 i‡(
îr
) {

274 
	`KAA_LOG_WARN
(
£lf
->
loggî
, 
îr
, "FailedÅo calculate configuration body hash");

275  
îr
;

277 
	`ext_c⁄figuøti⁄_°‹e
((c⁄° *)
body
, 
body_size
);

279 i‡(
£lf
->
roŸ_ª˚ivî
.
⁄_c⁄figuøti⁄_upd©ed
)

280 
£lf
->
roŸ_ª˚ivî
.
	`⁄_c⁄figuøti⁄_upd©ed
(£lf->roŸ_ª˚ivî.
c⁄ãxt
, sñf->
roŸ_ªc‹d
);

282 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√l
 =

283 
	`kØ_ch™√l_m™agî_gë_å™•‹t_ch™√l
(
£lf
->
ch™√l_m™agî
, 
c⁄figuøti⁄_sync_£rvi˚s
[0]);

284 i‡(
ch™√l
)

285 
ch™√l
->
	`sync_h™dÀr
(ch™√l->
c⁄ãxt
, 
c⁄figuøti⁄_sync_£rvi˚s
, 1);

288  
KAA_ERR_NONE
;

289 
	}
}

293 c⁄° 
kØ_roŸ_c⁄figuøti⁄_t
 *
	$kØ_c⁄figuøti⁄_m™agî_gë_c⁄figuøti⁄
(
kØ_c⁄figuøti⁄_m™agî_t
 *
£lf
)

295  
£lf
 ? sñf->
roŸ_ªc‹d
 : 
NULL
;

296 
	}
}

300 
kØ_îr‹_t
 
	$kØ_c⁄figuøti⁄_m™agî_£t_roŸ_ª˚ivî
(
kØ_c⁄figuøti⁄_m™agî_t
 *
£lf
, c⁄° 
kØ_c⁄figuøti⁄_roŸ_ª˚ivî_t
 *
ª˚ivî
)

302 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
ª˚ivî
, 
KAA_ERR_BADPARAM
);

304 
£lf
->
roŸ_ª˚ivî
 = *
ª˚ivî
;

306  
KAA_ERR_NONE
;

307 
	}
}

	@/var/www/html/debian/gateway/kaa/src/extensions/configuration/kaa_configuration_manager.h

17 #i‚de‡
KAA_CONFIGURATION_MANAGER_H_


18 
	#KAA_CONFIGURATION_MANAGER_H_


	)

20 
	~"gí/kØ_c⁄figuøti⁄_deföôi⁄s.h
"

21 
	~"∂©f‹m/ext_c⁄figuøti⁄_ª˚ivî.h
"

23 #ifde‡
__˝lu•lus


27 
kØ_c⁄figuøti⁄_m™agî_t
;

28 
kØ_c⁄figuøti⁄_m™agî_t
 
	tkØ_c⁄figuøti⁄_m™agî_t
;

38 c⁄° 
kØ_roŸ_c⁄figuøti⁄_t
 *
kØ_c⁄figuøti⁄_m™agî_gë_c⁄figuøti⁄
(
kØ_c⁄figuøti⁄_m™agî_t
 *
£lf
);

48 
kØ_îr‹_t
 
kØ_c⁄figuøti⁄_m™agî_£t_roŸ_ª˚ivî
(
kØ_c⁄figuøti⁄_m™agî_t
 *
£lf
, c⁄° 
kØ_c⁄figuøti⁄_roŸ_ª˚ivî_t
 *
ª˚ivî
);

50 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/extensions/configuration/kaa_configuration_manager_private.h

16 #i‚de‡
KAA_CONFIGURATION_MANAGER_PRIVATE_H


17 
	#KAA_CONFIGURATION_MANAGER_PRIVATE_H


	)

19 
	~<kØ_îr‹.h
>

20 
	~"kØ_c⁄figuøti⁄_m™agî.h
"

21 
	~<kØ_ch™√l_m™agî.h
>

22 
	~<kØ_°©us.h
>

23 
	~<utûôõs/kØ_log.h
>

24 
	~<kØ_∂©f‹m_utûs.h
>

26 
kØ_îr‹_t
 
kØ_c⁄figuøti⁄_m™agî_¸óã
(
kØ_c⁄figuøti⁄_m™agî_t
 **
c⁄figuøti⁄_m™agî_p
,

27 
kØ_ch™√l_m™agî_t
 *
ch™√l_m™agî
, 
kØ_°©us_t
 *
°©us
, 
kØ_loggî_t
 *
loggî
);

28 
kØ_c⁄figuøti⁄_m™agî_de°roy
(
kØ_c⁄figuøti⁄_m™agî_t
 *
£lf
);

29 
kØ_îr‹_t
 
kØ_c⁄figuøti⁄_m™agî_gë_size
(
kØ_c⁄figuøti⁄_m™agî_t
 *
£lf
, 
size_t
 *
ex≥˘ed_size
);

30 
kØ_îr‹_t
 
kØ_c⁄figuøti⁄_m™agî_ªque°_£rülize
(
kØ_c⁄figuøti⁄_m™agî_t
 *
£lf
,

31 
kØ_∂©f‹m_mesßge_wrôî_t
 *
wrôî
);

32 
kØ_îr‹_t
 
kØ_c⁄figuøti⁄_m™agî_h™dÀ_£rvî_sync
(
kØ_c⁄figuøti⁄_m™agî_t
 *
£lf
, 
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî
, 
uöt16_t
 
exãnsi⁄_›ti⁄s
, 
size_t
 
exãnsi⁄_Àngth
);

	@/var/www/html/debian/gateway/kaa/src/extensions/configuration/test/test_kaa_configuration.c

17 
	~<°dio.h
>

18 
	~<°rög.h
>

19 
	~<°döt.h
>

20 
	~"kØ_c⁄figuøti⁄_m™agî.h
"

21 
	~"kØ_c⁄figuøti⁄_m™agî_¥iv©e.h
"

23 
	~"∂©f‹m/sock.h
"

24 
	~"∂©f‹m/ext_sha.h
"

25 
	~"∂©f‹m/ext_c⁄figuøti⁄_≥rsi°í˚.h
"

26 
	~"∂©f‹m/ext_c⁄figuøti⁄_ª˚ivî.h
"

27 
	~"kØ_ã°.h
"

28 
	~"kØ_∂©f‹m_utûs.h
"

29 
	~"kØ_°©us.h
"

30 
	~"kØ_deÁu…s.h
"

31 
	~"kØ_ch™√l_m™agî.h
"

32 
	~"utûôõs/kØ_mem.h
"

33 
	~"utûôõs/kØ_log.h
"

35 
	~"kØ_¥iv©e.h
"

37 
kØ_loggî_t
 *
	gloggî
 = 
NULL
;

38 
kØ_°©us_t
 *
	g°©us
 = 
NULL
;

39 
kØ_c⁄figuøti⁄_m™agî_t
 *
	gc⁄fig_m™agî
 = 
NULL
;

41 
	#CONFIG_START_SEQ_N
 5

	)

42 
	#CONFIG_NEW_SEQ_N
 6

	)

43 
	#CONFIG_RESPONSE_FLAGS
 0x02

	)

44 
	#CONFIG_DATA_FIELD
 "Basi¯c⁄figuøti⁄ schema"

	)

46 c⁄° 
size_t
 
	gCONFIG_UUID_SIZE
 = 16;

47 c⁄° 
	gCONFIG_UUID
[] = { 0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09, 0x0A, 0x0B, 0x0C, 0x0D, 0x0E, 0x0F };

49 
kØ_îr‹_t
 
	$⁄_c⁄figuøti⁄_upd©ed
(*
c⁄ãxt
, c⁄° 
kØ_roŸ_c⁄figuøti⁄_t
 *
c⁄figuøti⁄
)

51 ()
c⁄figuøti⁄
;

52 
boﬁ
 *
ªsu…
 = (boﬁ *Ë
c⁄ãxt
;

53 *
ªsu…
 = 
åue
;

54  
KAA_ERR_NONE
;

55 
	}
}

57 
	$ã°_¸óã_ªque°
(**
°©e
)

59 ()
°©e
;

61 
size_t
 
ex≥˘ed_size
 = 0;

62 
	`ASSERT_EQUAL
(
	`kØ_c⁄figuøti⁄_m™agî_gë_size
(
c⁄fig_m™agî
, &
ex≥˘ed_size
), 
KAA_ERR_NONE
);

63 
	`ASSERT_EQUAL
(
ex≥˘ed_size
, 
KAA_EXTENSION_HEADER_SIZE
 + 
SHA_1_DIGEST_LENGTH
);

65 
uöt8_t
 
ªque°_buf„r
[
ex≥˘ed_size
];

66 
kØ_∂©f‹m_mesßge_wrôî_t
 *
wrôî
 = 
NULL
;

67 
	`ASSERT_EQUAL
(
	`kØ_∂©f‹m_mesßge_wrôî_¸óã
(&
wrôî
, 
ªque°_buf„r
, 
ex≥˘ed_size
), 
KAA_ERR_NONE
);

68 
	`ASSERT_EQUAL
(
	`kØ_c⁄figuøti⁄_m™agî_ªque°_£rülize
(
c⁄fig_m™agî
, 
wrôî
), 
KAA_ERR_NONE
);

70 
uöt8_t
 *
curs‹
 = 
wrôî
->
begö
;

71 
	`ASSERT_EQUAL
(
	`KAA_HTONS
(*((
uöt16_t
 *Ë
curs‹
)), 
KAA_EXTENSION_CONFIGURATION
);

72 
curs‹
 +(
uöt32_t
);

74 
	`ASSERT_EQUAL
(
	`KAA_NTOHL
(*((
uöt32_t
 *Ë
curs‹
)), 
SHA_1_DIGEST_LENGTH
);

75 
curs‹
 +(
uöt32_t
);

77 
kØ_dige°
 
check_hash
;

78 
	`ext_ˇlcuœã_sha_hash
(
KAA_CONFIGURATION_DATA
, 
KAA_CONFIGURATION_DATA_LENGTH
, 
check_hash
);

79 
	`ASSERT_EQUAL
(
	`memcmp
(
curs‹
, 
check_hash
, 
SHA_1_DIGEST_LENGTH
), 0);

80 
curs‹
 +
SHA_1_DIGEST_LENGTH
;

82 
	`ASSERT_EQUAL
(
curs‹
, 
wrôî
->
íd
);

84 
	`kØ_∂©f‹m_mesßge_wrôî_de°roy
(
wrôî
);

85 
	}
}

87 
	$ã°_ª•⁄£
(**
°©e
)

89 ()
°©e
;

90 c⁄° 
size_t
 
ª•⁄£_size
 = 
	`kØ_Æig√d_size_gë
(
KAA_CONFIGURATION_DATA_LENGTH
Ë+ (
uöt32_t
);

91 
uöt8_t
 
ª•⁄£
[
ª•⁄£_size
];

92 
uöt8_t
 *
ª•⁄£_curs‹
 = 
ª•⁄£
;

94 *((
uöt32_t
 *Ë
ª•⁄£_curs‹
Ë
	`KAA_HTONL
(
KAA_CONFIGURATION_DATA_LENGTH
);

95 
ª•⁄£_curs‹
 +(
uöt32_t
);

97 
	`mem˝y
(
ª•⁄£_curs‹
, 
KAA_CONFIGURATION_DATA
, 
KAA_CONFIGURATION_DATA_LENGTH
);

99 
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî
 = 
NULL
;

100 
	`ASSERT_EQUAL
(
	`kØ_∂©f‹m_mesßge_ªadî_¸óã
(&
ªadî
, 
ª•⁄£
, 
ª•⁄£_size
), 
KAA_ERR_NONE
);

102 
boﬁ
 
is_ˇŒback_övoked
 = 
Ál£
;

103 
kØ_c⁄figuøti⁄_roŸ_ª˚ivî_t
 
ª˚ivî
 = { &
is_ˇŒback_övoked
, &
⁄_c⁄figuøti⁄_upd©ed
 };

104 
	`ASSERT_EQUAL
(
	`kØ_c⁄figuøti⁄_m™agî_£t_roŸ_ª˚ivî
(
c⁄fig_m™agî
, &
ª˚ivî
), 
KAA_ERR_NONE
);

106 
	`ASSERT_EQUAL
(
	`kØ_c⁄figuøti⁄_m™agî_h™dÀ_£rvî_sync
(
c⁄fig_m™agî
, 
ªadî
, 
CONFIG_RESPONSE_FLAGS
, 
ª•⁄£_size
), 
KAA_ERR_NONE
);

108 
	`ASSERT_EQUAL
(
is_ˇŒback_övoked
, 
åue
);

110 c⁄° 
kØ_roŸ_c⁄figuøti⁄_t
 *
roŸ_c⁄fig
 = 
	`kØ_c⁄figuøti⁄_m™agî_gë_c⁄figuøti⁄
(
c⁄fig_m™agî
);

111 
	`ASSERT_EQUAL
(
	`°rcmp
(
roŸ_c⁄fig
->
d©a
->d©a, 
CONFIG_DATA_FIELD
), 0);

113 
kØ_byãs_t
 *
uuid
 = (kØ_byãs_à*Ë
roŸ_c⁄fig
->
__uuid
->
d©a
;

114 
	`ASSERT_EQUAL
(
uuid
->
size
, 
CONFIG_UUID_SIZE
);

115 
	`ASSERT_EQUAL
(
	`memcmp
(
uuid
->
buf„r
, 
CONFIG_UUID
, uuid->
size
), 0);

117 
	`kØ_∂©f‹m_mesßge_ªadî_de°roy
(
ªadî
);

118 
	}
}

120 
	$ã°_öô
()

122 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_log_¸óã
(&
loggî
, 
KAA_MAX_LOG_MESSAGE_LENGTH
, 
KAA_MAX_LOG_LEVEL
, 
NULL
);

123 i‡(
îr‹
 || !
loggî
) {

124  
îr‹
;

127 
îr‹
 = 
	`kØ_°©us_¸óã
(&
°©us
);

128 i‡(
îr‹
 || !
°©us
) {

129  
îr‹
;

132 
îr‹
 = 
	`kØ_c⁄figuøti⁄_m™agî_¸óã
(&
c⁄fig_m™agî
, 
NULL
, 
°©us
, 
loggî
);

133 i‡(
îr‹
 || 
c⁄fig_m™agî
) {

134  
îr‹
;

138 
	}
}

140 
	$ã°_deöô
()

142 
	`kØ_°©us_de°roy
(
°©us
);

143 
	`kØ_c⁄figuøti⁄_m™agî_de°roy
(
c⁄fig_m™agî
);

144 
	`kØ_log_de°roy
(
loggî
);

146 
	}
}

148 
KAA_SUITE_MAIN
(
Log
, 
ã°_öô
, 
ã°_deöô
,

149 
	$KAA_TEST_CASE
(
¸óã_ªque°
, 
ã°_¸óã_ªque°
)

150 
	`KAA_TEST_CASE
(
¥o˚ss_ª•⁄£
, 
ã°_ª•⁄£
))

	@/var/www/html/debian/gateway/kaa/src/extensions/event/kaa_event.c

17 
	~"kØ_evít.h
"

18 
	~"kØ_evít_¥iv©e.h
"

20 
	~"kØ_¥iv©e.h
"

22 
	~<°dboﬁ.h
>

23 
	~<°döt.h
>

24 
	~<°rög.h
>

25 
	~<°d¨g.h
>

26 
	~<sys/ty≥s.h
>

27 
	~"∂©f‹m/°dio.h
"

28 
	~"∂©f‹m/sock.h
"

29 
	~"∂©f‹m/ext_sha.h
"

30 
	~"kØ_°©us.h
"

31 
	~"kØ_ch™√l_m™agî.h
"

32 
	~"kØ_∂©f‹m_utûs.h
"

33 
	~"kØ_∂©f‹m_comm⁄.h
"

34 
	~"kØ_comm⁄_schema.h
"

35 
	~"cﬁÀ˘i⁄s/kØ_li°.h
"

36 
	~"utûôõs/kØ_mem.h
"

37 
	~"utûôõs/kØ_log.h
"

38 
	~"∂©f‹m/ext_sy°em_loggî.h
"

39 
	~"gí/kØ_evít_fqn_deföôi⁄s.h
"

41 
	#KAA_EVENT_CLIENT_SYNC_EXTENSION_FLAG_RECEIVE_EVENTS
 0x1

	)

42 
	#KAA_EVENT_CLIENT_SYNC_EXTENSION_FLAG_SEQUENCE_NUMBER_SYNC
 0x2

	)

44 
	#KAA_EVENT_SERVER_SYNC_EXTENSION_FLAG_SEQUENCE_NUMBER_PRESENT
 0x1

	)

46 
	#KAA_EVENT_OPTION_TARGET_ID_PRESENT
 0x1

	)

47 
	#KAA_EVENT_OPTION_EVENT_HAS_DATA
 0x2

	)

50 
	mEVENT_LISTENERS_FIELD
 = 0x00,

51 
	mEVENTS_FIELD
 = 0x01,

52 } 
	tevít_£rvî_sync_fõld_t
;

55 
	mEVENT_LISTENERS_SUCCESS
 = 0x00,

56 
	mEVENT_LISTENERS_FAILURE
 = 0x01

57 } 
	tevít_li°íîs_ªsu…_t
;

60 
öt32_t
 
	m£q_num
;

65 
kØ_byãs_t
* 
	mevít_˛ass_fqn
;

66 
kØ_byãs_t
* 
	mevít_d©a
;

67 
kØ_byãs_t
* 
	mèrgë
;

68 } 
	tkØ_evít_t
;

71 
size_t
 
	mªque°_id
;

72 
kØ_li°_t
 *
	m£¡_evíts
;

73 } 
	t£¡_evíts_tu∂e_t
;

76 *
	mfqn
;

77 
kØ_evít_ˇŒback_t
 
	mcb
;

78 } 
	tevít_ˇŒback_∑ú_t
;

81 
kØ_evít_block_id
 
	mid
;

82 
kØ_li°_t
 *
	mevíts
;

83 } 
	tevít_å™ß˘i⁄_t
;

86 
	mKAA_EVENT_SEQUENCE_NUMBER_UNSYNCHRONIZED
,

87 
	mKAA_EVENT_SEQUENCE_NUMBER_SYNC_IN_PROGRESS
,

88 
	mKAA_EVENT_SEQUENCE_NUMBER_SYNCHRONIZED


89 } 
	tkØ_evít_£quí˚_numbî_°©us_t
;

92 
uöt16_t
 
	mªque°_id
;

93 
boﬁ
 
	mis_£¡
;

94 
kØ_byãs_t
 **
	mfqns
;

95 
size_t
 
	mfqns_cou¡
;

96 
kØ_evít_li°íîs_ˇŒback_t
 
	mˇŒback
;

97 } 
	tkØ_evít_li°íîs_ªque°_t
;

100 
	skØ_evít_m™agî_t
 {

101 
£¡_evíts_tu∂e_t
 
	mevíts_awaôög_ª•⁄£
;

102 
kØ_li°_t
 *
	m≥ndög_evíts
;

103 
kØ_li°_t
 *
	mevít_ˇŒbacks
;

104 
kØ_li°_t
 *
	må™ß˘i⁄s
;

105 
kØ_li°_t
 *
	mevít_li°íîs_ªque°s
;

106 
kØ_evít_block_id
 
	måx_cou¡î
;

107 
kØ_evít_ˇŒback_t
 
	mglobÆ_evít_ˇŒback
;

108 
size_t
 
	mevít_£quí˚_numbî
;

109 
size_t
 
	mexãnsi⁄_∑ylﬂd_size
;

110 
kØ_evít_£quí˚_numbî_°©us_t
 
	m£quí˚_numbî_°©us
;

112 
kØ_°©us_t
 *
	m°©us
;

113 
kØ_ch™√l_m™agî_t
 *
	mch™√l_m™agî
;

114 
kØ_loggî_t
 *
	mloggî
;

116 
uöt16_t
 
	mevít_li°íîs_ªque°_id
;

118 
kØ_ídpoöt_id_p
 
	mevít_sour˚
;

121 
kØ_exãnsi⁄_id
 
	gevít_sync_£rvi˚s
[1] = { 
KAA_EXTENSION_EVENT
 };

123 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_evít_öô
(
kØ_c⁄ãxt_t
 *
kØ_c⁄ãxt
, **
c⁄ãxt
)

125 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_evít_m™agî_¸óã
(&
kØ_c⁄ãxt
->
evít_m™agî
, kØ_c⁄ãxt->
°©us
->
°©us_ö°™˚
,

126 
kØ_c⁄ãxt
->
ch™√l_m™agî
, kØ_c⁄ãxt->
loggî
);

127 *
c⁄ãxt
 = 
kØ_c⁄ãxt
->
evít_m™agî
;

128  
îr‹
;

129 
	}
}

131 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_evít_deöô
(*
c⁄ãxt
)

133 
	`kØ_evít_m™agî_de°roy
(
c⁄ãxt
);

134  
KAA_ERR_NONE
;

135 
	}
}

137 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_evít_ªque°_gë_size
(*
c⁄ãxt
, 
size_t
 *
ex≥˘ed_size
)

139  
	`kØ_evít_ªque°_gë_size
(
c⁄ãxt
, 
ex≥˘ed_size
);

140 
	}
}

142 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_evít_ªque°_£rülize
(*
c⁄ãxt
, 
uöt32_t
 
ªque°_id
,

143 
uöt8_t
 *
buf„r
, 
size_t
 *
size
, 
boﬁ
 *
√ed_ªsync
)

146 i‡(!
c⁄ãxt
 || !
size
 || !
√ed_ªsync
) {

147  
KAA_ERR_BADPARAM
;

150 *
√ed_ªsync
 = 
åue
;

152 
size_t
 
size_√eded
;

153 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_exãnsi⁄_evít_ªque°_gë_size
(
c⁄ãxt
, &
size_√eded
);

154 i‡(
îr‹
) {

155  
îr‹
;

158 i‡(!
buf„r
 || *
size
 < 
size_√eded
) {

159 *
size
 = 
size_√eded
;

160  
KAA_ERR_BUFFER_IS_NOT_ENOUGH
;

163 *
size
 = 
size_√eded
;

165 
kØ_∂©f‹m_mesßge_wrôî_t
 
wrôî
 = 
	`KAA_MESSAGE_WRITER
(
buf„r
, *
size
);

166 
îr‹
 = 
	`kØ_evít_ªque°_£rülize
(
c⁄ãxt
, 
ªque°_id
, &
wrôî
);

167 i‡(
îr‹
) {

168  
îr‹
;

171 *
size
 = 
wrôî
.
cuºít
 - 
buf„r
;

172  
KAA_ERR_NONE
;

173 
	}
}

175 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_evít_£rvî_sync
(*
c⁄ãxt
, 
uöt32_t
 
ªque°_id
,

176 
uöt16_t
 
exãnsi⁄_›ti⁄s
, c⁄° 
uöt8_t
 *
buf„r
, 
size_t
 
size
)

179 i‡(!
c⁄ãxt
 || !
buf„r
) {

180  
KAA_ERR_BADPARAM
;

183 
kØ_∂©f‹m_mesßge_ªadî_t
 
ªadî
 = 
	`KAA_MESSAGE_READER
(
buf„r
, 
size
);

184  
	`kØ_evít_h™dÀ_£rvî_sync
(
c⁄ãxt
, &
ªadî
, 
exãnsi⁄_›ti⁄s
, 
size
, 
ªque°_id
);

185 
	}
}

187 
	$de°roy_evít_li°íî_ªque°
(*
ªque°_p
)

189 
	`KAA_RETURN_IF_NIL
(
ªque°_p
,);

190 
kØ_evít_li°íîs_ªque°_t
 *
subs¸ibî
 = (kØ_evít_li°íîs_ªque°_à*Ë
ªque°_p
;

191 i‡(
subs¸ibî
->
fqns
) {

192 
size_t
 
i
 = 0;

193 ; 
i
 < 
subs¸ibî
->
fqns_cou¡
; ++i) {

194 i‡(
subs¸ibî
->
fqns
[
i
]) {

195 
	`kØ_byãs_de°roy
(
subs¸ibî
->
fqns
[
i
]);

198 
	`KAA_FREE
(
subs¸ibî
->
fqns
);

200 
	`KAA_FREE
(
subs¸ibî
);

201 
	}
}

203 
kØ_evít_li°íîs_ªque°_t
 *
	$¸óã_evít_li°íî_ªque°
(
kØ_evít_m™agî_t
 *
£lf
, c⁄° *
fqns
[], 
size_t
 
fqns_cou¡
, c⁄° 
kØ_evít_li°íîs_ˇŒback_t
 *
ˇŒback
)

205 
kØ_evít_li°íîs_ªque°_t
 *
ªsu…
 = (kØ_evít_li°íîs_ªque°_à*Ë
	`KAA_MALLOC
((kaa_event_listeners_request_t));

206 
	`KAA_RETURN_IF_NIL
(
ªsu…
, 
NULL
);

208 
ªsu…
->
is_£¡
 = 
Ál£
;

209 
ªsu…
->
ˇŒback
 = *callback;

210 
ªsu…
->
ªque°_id
 = 
£lf
->
evít_li°íîs_ªque°_id
 + 1;

212 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "GoögÅÿ¸óãÉvíàli°íî†ªque°: fqn†cou¡ %zu,Ñeque° id '%u'", 
fqns_cou¡
, 
ªsu…
->
ªque°_id
);

214 
ªsu…
->
fqns
 = (
kØ_byãs_t
 **Ë
	`KAA_CALLOC
(
fqns_cou¡
, (kaa_bytes_t *));

215 i‡(!
ªsu…
->
fqns
) {

216 
	`de°roy_evít_li°íî_ªque°
(
ªsu…
);

217  
NULL
;

219 
ªsu…
->
fqns_cou¡
 = fqns_count;

221 
size_t
 
i
 = 0;

222 ; 
i
 < 
fqns_cou¡
; ++i) {

223 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "T¨gë fqn[%d]: '%s'", 
i
+1, 
fqns
[i]);

224 
ªsu…
->
fqns
[
i
] = 
	`kØ_byãs_c›y_¸óã
((c⁄° 
uöt8_t
 *Ëfqns[i], 
	`°æí
(fqns[i]));

225 i‡(!
ªsu…
->
fqns
[
i
]) {

226 
	`de°roy_evít_li°íî_ªque°
(
ªsu…
);

227  
NULL
;

231  
ªsu…
;

232 
	}
}

234 
boﬁ
 
	$föd_li°íîs_ªque°_by_id
(*
ªque°_p
, *
c⁄ãxt
)

236 
kØ_evít_li°íîs_ªque°_t
 *
ªque°
 = (kØ_evít_li°íîs_ªque°_à*Ë
ªque°_p
;

237 
uöt16_t
 *
ªque°_id
 = (uöt16_à*Ë
c⁄ãxt
;

238  (
ªque°
 && 
ªque°_id
 && ((*request_id) ==Ñequest->request_id));

239 
	}
}

241 
	$kØ_evít_de°roy
(* 
d©a
)

243 i‡(
d©a
) {

244 
kØ_evít_t
* 
ªc‹d
 = (kØ_evít_t*)
d©a
;

246 
	`kØ_byãs_de°roy
(
ªc‹d
->
evít_˛ass_fqn
);

247 
	`kØ_byãs_de°roy
(
ªc‹d
->
evít_d©a
);

248 
	`kØ_byãs_de°roy
(
ªc‹d
->
èrgë
);

250 
	`KAA_FREE
(
ªc‹d
);

252 
	}
}

254 
evít_ˇŒback_∑ú_t
 *
	$¸óã_evít_ˇŒback_∑ú
(c⁄° *
fqn


255 , 
kØ_evít_ˇŒback_t
 
ˇŒback
)

257 
evít_ˇŒback_∑ú_t
 *
∑ú
 = (evít_ˇŒback_∑ú_à*Ë
	`KAA_MALLOC
((event_callback_pair_t));

258 
	`KAA_RETURN_IF_NIL
(
∑ú
, 
NULL
);

260 
size_t
 
fqn_Àngth
 = 
	`°æí
(
fqn
);

261 
∑ú
->
fqn
 = (*Ë
	`KAA_MALLOC
((
fqn_Àngth
 + 1) * ());

262 i‡(!
∑ú
->
fqn
) {

263 
	`KAA_FREE
(
∑ú
);

264  
NULL
;

266 
	`°r˝y
(
∑ú
->
fqn
, fqn);

267 
∑ú
->
cb
 = 
ˇŒback
;

268  
∑ú
;

269 
	}
}

271 
	$kØ_evít_de°roy_ˇŒback_∑ú
(*
∑ú_p
)

273 
	`KAA_RETURN_IF_NIL
(
∑ú_p
, );

274 
evít_ˇŒback_∑ú_t
 *
∑ú
 = (evít_ˇŒback_∑ú_à*Ë
∑ú_p
;

275 
	`KAA_FREE
(
∑ú
->
fqn
);

276 
	`KAA_FREE
(
∑ú
);

277 
	}
}

279 
kØ_evít_ˇŒback_t
 
	$föd_evít_ˇŒback
(
kØ_li°_t
 *
hód
, c⁄° *
fqn
)

281 
kØ_li°_node_t
 *
ô
 = 
	`kØ_li°_begö
(
hód
);

282 
ô
) {

283 
evít_ˇŒback_∑ú_t
 *
∑ú
 = (evít_ˇŒback_∑ú_à*Ë
	`kØ_li°_gë_d©a
(
ô
);

284 i‡(
	`°rcmp
(
fqn
, 
∑ú
->fqn) == 0)

285  
∑ú
->
cb
;

286 
ô
 = 
	`kØ_li°_√xt
(it);

288  
NULL
;

289 
	}
}

291 
evít_å™ß˘i⁄_t
 *
	$¸óã_å™ß˘i⁄
(
kØ_evít_block_id
 
id
)

293 
evít_å™ß˘i⁄_t
 *
åx
 = (evít_å™ß˘i⁄_à*Ë
	`KAA_MALLOC
((event_transaction_t));

294 
	`KAA_RETURN_IF_NIL
(
åx
, 
NULL
);

296 
åx
->
id
 = id;

297 
åx
->
evíts
 = 
	`kØ_li°_¸óã
();

298 i‡(!
åx
->
evíts
) {

299 
	`KAA_FREE
(
åx
);

300  
NULL
;

303  
åx
;

304 
	}
}

306 
	$de°roy_å™ß˘i⁄
(*
åx_p
)

308 
	`KAA_RETURN_IF_NIL
(
åx_p
, );

309 
evít_å™ß˘i⁄_t
 *
åx
 = (evít_å™ß˘i⁄_à*Ë
åx_p
;

310 
	`kØ_li°_de°roy
(
åx
->
evíts
, &
kØ_evít_de°roy
);

311 
	`KAA_FREE
(
åx
);

312 
	}
}

314 
boﬁ
 
	$å™ß˘i⁄_£¨ch_by_id_¥ediˇã
(*
åx_p
, *
c⁄ãxt
)

316 
evít_å™ß˘i⁄_t
 *
åx
 = (evít_å™ß˘i⁄_à*Ë
åx_p
;

317 
kØ_evít_block_id
 *
m©chî
 = (kØ_evít_block_id *Ë
c⁄ãxt
;

318  (
m©chî
 && 
åx
Ë? ((*m©chîË=åx->
id
Ë: 
Ál£
;

319 
	}
}

322 
	$kØ_evít_m™agî_de°roy
(
kØ_evít_m™agî_t
 *
£lf
)

324 i‡(
£lf
) {

325 
	`kØ_li°_de°roy
(
£lf
->
≥ndög_evíts
, &
kØ_evít_de°roy
);

326 
	`kØ_li°_de°roy
(
£lf
->
evíts_awaôög_ª•⁄£
.
£¡_evíts
, &
kØ_evít_de°roy
);

327 
	`kØ_li°_de°roy
(
£lf
->
evít_ˇŒbacks
, &
kØ_evít_de°roy_ˇŒback_∑ú
);

328 
	`kØ_li°_de°roy
(
£lf
->
å™ß˘i⁄s
, &
de°roy_å™ß˘i⁄
);

329 
	`kØ_li°_de°roy
(
£lf
->
evít_li°íîs_ªque°s
, &
de°roy_evít_li°íî_ªque°
);

331 i‡(
£lf
->
evít_sour˚
) {

332 
	`KAA_FREE
((*)
£lf
->
evít_sour˚
);

334 
	`KAA_FREE
(
£lf
);

336 
	}
}

339 
kØ_îr‹_t
 
	$kØ_evít_m™agî_¸óã
(
kØ_evít_m™agî_t
 **
c⁄ãxt
, 
kØ_°©us_t
 *
°©us
,

340 
kØ_ch™√l_m™agî_t
 *
ch™√l_m™agî
, 
kØ_loggî_t
 *
loggî
)

342 
kØ_evít_m™agî_t
 **
evít_m™agî_p
 = (kØ_evít_m™agî_à**)
c⁄ãxt
;

343 
	`KAA_RETURN_IF_NIL
(
evít_m™agî_p
, 
KAA_ERR_BADPARAM
);

345 *
evít_m™agî_p
 = (
kØ_evít_m™agî_t
 *Ë
	`KAA_MALLOC
((kaa_event_manager_t));

346 
	`KAA_RETURN_IF_NIL
(*
evít_m™agî_p
, 
KAA_ERR_NOMEM
);

348 (*
evít_m™agî_p
)->
evíts_awaôög_ª•⁄£
.
ªque°_id
 = (
size_t
) -1;

349 (*
evít_m™agî_p
)->
evít_li°íîs_ªque°_id
 = 0;

350 (*
evít_m™agî_p
)->
åx_cou¡î
 = 0;

351 (*
evít_m™agî_p
)->
globÆ_evít_ˇŒback
 = 
NULL
;

352 (*
evít_m™agî_p
)->
evít_£quí˚_numbî
 = 
°©us
->
evít_£q_n
;

354 (*
evít_m™agî_p
)->
£quí˚_numbî_°©us
 = 
KAA_EVENT_SEQUENCE_NUMBER_UNSYNCHRONIZED
;

356 (*
evít_m™agî_p
)->
°©us
 = status;

357 (*
evít_m™agî_p
)->
ch™√l_m™agî
 = channel_manager;

358 (*
evít_m™agî_p
)->
loggî
 =Üogger;

360 (*
evít_m™agî_p
)->
evít_sour˚
 = (
kØ_ídpoöt_id_p
)
	`KAA_MALLOC
((
kØ_ídpoöt_id
));

361 
	`KAA_RETURN_IF_NIL
((*
evít_m™agî_p
)->
evít_sour˚
, 
KAA_ERR_NOMEM
);

363 (*
evít_m™agî_p
)->
≥ndög_evíts
 = 
	`kØ_li°_¸óã
();

364 (*
evít_m™agî_p
)->
evíts_awaôög_ª•⁄£
.
£¡_evíts
 = 
	`kØ_li°_¸óã
();

365 (*
evít_m™agî_p
)->
evít_ˇŒbacks
 = 
	`kØ_li°_¸óã
();

366 (*
evít_m™agî_p
)->
å™ß˘i⁄s
 = 
	`kØ_li°_¸óã
();

367 (*
evít_m™agî_p
)->
evít_li°íîs_ªque°s
 = 
	`kØ_li°_¸óã
();

369 i‡(!(*
evít_m™agî_p
)->
≥ndög_evíts
 || !(*evít_m™agî_p)->
evíts_awaôög_ª•⁄£
.
£¡_evíts
 ||

370 !(*
evít_m™agî_p
)->
evít_ˇŒbacks
 || !(*evít_m™agî_p)->
å™ß˘i⁄s
 ||

371 !(*
evít_m™agî_p
)->
evít_li°íîs_ªque°s
)

373 
	`kØ_evít_m™agî_de°roy
(*
evít_m™agî_p
);

374  
KAA_ERR_NOMEM
;

377  
KAA_ERR_NONE
;

378 
	}
}

380 
kØ_îr‹_t
 
	$kØ_fûl_evít_°ru˘uª
(
kØ_evít_t
 *
evít


381 , 
size_t
 
£quí˚_numbî


382 , c⁄° *
fqn


383 , c⁄° *
evít_d©a


384 , 
size_t
 
evít_d©a_size


385 , 
kØ_ídpoöt_id_p
 
èrgë
)

387 
	`KAA_RETURN_IF_NIL2
(
evít
, 
fqn
, 
KAA_ERR_BADPARAM
);

389 
evít
->
£q_num
 = 
£quí˚_numbî
;

390 
evít
->
evít_˛ass_fqn
 = 
	`kØ_byãs_c›y_¸óã
((c⁄° 
uöt8_t
 *)
fqn


391 , 
	`°æí
(
fqn
) + 1);

392 --
evít
->
evít_˛ass_fqn
->
size
;

393 
	`KAA_RETURN_IF_NIL
(
evít
->
evít_˛ass_fqn
, 
KAA_ERR_NOMEM
);

395 i‡(
evít_d©a
 && 
evít_d©a_size
 > 0) {

396 
evít
->
evít_d©a
 = 
	`kØ_byãs_move_¸óã
((c⁄° 
uöt8_t
 *)Évent_data

397 , 
evít_d©a_size


398 , &
kØ_d©a_de°roy
);

399 
	`KAA_RETURN_IF_NIL
(
evít
->
evít_d©a
, 
KAA_ERR_NOMEM
);

402 i‡(
èrgë
) {

403 
evít
->
èrgë
 = 
	`kØ_byãs_c›y_¸óã
—¨gë, 
KAA_ENDPOINT_ID_LENGTH
);

404 
	`KAA_RETURN_IF_NIL
(
evít
->
èrgë
, 
KAA_ERR_NOMEM
);

407  
KAA_ERR_NONE
;

408 
	}
}

426 
kØ_îr‹_t
 
	$kØ_evít_m™agî_£nd_evít
(
kØ_evít_m™agî_t
 *
£lf


427 , c⁄° *
fqn


428 , c⁄° *
evít_d©a


429 , 
size_t
 
evít_d©a_size


430 , 
kØ_ídpoöt_id_p
 
èrgë
)

435 
	`KAA_RETURN_IF_NIL
(
£lf
, 
KAA_ERR_NOT_INITIALIZED
);

436 
	`KAA_RETURN_IF_NIL
(
fqn
, 
KAA_ERR_EVENT_BAD_FQN
);

438 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "AddögáÇewÉvíà\"%s\"", 
fqn
);

443 
kØ_evít_t
 *
evít
 = (kØ_evít_t*)
	`KAA_CALLOC
(1, (kaa_event_t));

444 i‡(!
evít
) {

445 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
KAA_ERR_NOMEM
, "FailedÅoállocateáÇewÉvent structure");

446  
KAA_ERR_NOMEM
;

449 
size_t
 
√w_£quí˚_numbî
 = (
£lf
->
£quí˚_numbî_°©us
 =
KAA_EVENT_SEQUENCE_NUMBER_SYNCHRONIZED
 ?

450 ++
£lf
->
evít_£quí˚_numbî
 :

451 (
size_t
) -1);

453 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "FûlögáÇewÉvíàwôh d©®sizê%u", 
evít_d©a_size
);

454 #ifde‡
KAA_LOG_LEVEL_TRACE_ENABLED


455 i‡(
èrgë
) {

456 
èrgë_°rög
[2 * 
KAA_ENDPOINT_ID_LENGTH
 + 1];

457 
i
 = 0;

458 ; 
i
 < 
KAA_ENDPOINT_ID_LENGTH
; ++i) {

459 
	`ext_¢pötf
(&
èrgë_°rög
[2 * 
i
], 3, "%02X", 
èrgë
[i]);

461 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Evíàèrgë = %s", 
èrgë_°rög
);

464 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_fûl_evít_°ru˘uª
(
evít


465 , 
√w_£quí˚_numbî


466 , 
fqn


467 , 
evít_d©a


468 , 
evít_d©a_size


469 , 
èrgë
);

470 i‡(
îr‹
) {

471 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹
, "FaûedÅÿfû»®√wÉvíà(size=%u)", 
evít_d©a_size
);

472 
	`kØ_evít_de°roy
(
evít
);

473  
îr‹
;

476 i‡(!
	`kØ_li°_push_back
(
£lf
->
≥ndög_evíts
, 
evít
)) {

477 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
KAA_ERR_NOMEM
, "FailedÅo saveáÇewÉvent");

478 
	`kØ_evít_de°roy
(
evít
);

479  
KAA_ERR_NOMEM
;

482 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√l
 =

483 
	`kØ_ch™√l_m™agî_gë_å™•‹t_ch™√l
(
£lf
->
ch™√l_m™agî
, 
evít_sync_£rvi˚s
[0]);

484 i‡(
ch™√l
)

485 
ch™√l
->
	`sync_h™dÀr
(ch™√l->
c⁄ãxt
, 
evít_sync_£rvi˚s
, 1);

487  
KAA_ERR_NONE
;

488 
	}
}

490 
size_t
 
	$kØ_evít_li°_gë_ªque°_size
(
kØ_li°_t
 *
evíts
)

492 
size_t
 
ex≥˘ed_size
 = 0;

494 
kØ_li°_node_t
 *
ô
 = 
	`kØ_li°_begö
(
evíts
);

495 
ô
) {

496 
kØ_evít_t
 *
evít
 = (kØ_evít_à*)
	`kØ_li°_gë_d©a
(
ô
);

498 
ex≥˘ed_size
 +(
uöt32_t
)

499 + (
uöt16_t
)

500 + (
uöt16_t
);

502 i‡(
evít
->
evít_d©a
) {

503 
ex≥˘ed_size
 +(
uöt32_t
);

506 i‡(
evít
->
èrgë
 ) {

507 
ex≥˘ed_size
 +
KAA_ENDPOINT_ID_LENGTH
;

510 
ex≥˘ed_size
 +
	`kØ_Æig√d_size_gë
(
evít
->
evít_˛ass_fqn
->
size
);

512 i‡(
evít
->
evít_d©a
) {

513 
ex≥˘ed_size
 +
	`kØ_Æig√d_size_gë
(
evít
->
evít_d©a
->
size
);

516 
ô
 = 
	`kØ_li°_√xt
(it);

518  
ex≥˘ed_size
;

519 
	}
}

521 
kØ_îr‹_t
 
	$kØ_evít_ªque°_gë_size_no_hódî
(
kØ_evít_m™agî_t
 *
£lf
, 
size_t
 *
ex≥˘ed_size
)

523 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
ex≥˘ed_size
, 
KAA_ERR_BADPARAM
);

525 *
ex≥˘ed_size
 = 0;

526 i‡(
£lf
->
£quí˚_numbî_°©us
 =
KAA_EVENT_SEQUENCE_NUMBER_SYNCHRONIZED
) {

527 
boﬁ
 
have_evíts
 = (
	`kØ_li°_gë_size
(
£lf
->
≥ndög_evíts
) > 0) ||

528 (
	`kØ_li°_gë_size
(
£lf
->
evíts_awaôög_ª•⁄£
.
£¡_evíts
) > 0);

530 i‡(
have_evíts
) {

531 *
ex≥˘ed_size
 +(
uöt32_t
);

532 *
ex≥˘ed_size
 +
	`kØ_evít_li°_gë_ªque°_size
(
£lf
->
≥ndög_evíts
);

533 *
ex≥˘ed_size
 +
	`kØ_evít_li°_gë_ªque°_size
(
£lf
->
evíts_awaôög_ª•⁄£
.
£¡_evíts
);

537 i‡(
	`kØ_li°_gë_size
(
£lf
->
evít_li°íîs_ªque°s
) > 0) {

538 *
ex≥˘ed_size
 +(
uöt32_t
);

540 
kØ_li°_node_t
 *
ô
 = 
	`kØ_li°_begö
(
£lf
->
evít_li°íîs_ªque°s
);

541 
ô
) {

542 
kØ_evít_li°íîs_ªque°_t
 *
ªque°
 = (kØ_evít_li°íîs_ªque°_à*Ë
	`kØ_li°_gë_d©a
(
ô
);

543 i‡(!
ªque°
->
is_£¡
) {

544 *
ex≥˘ed_size
 +(
uöt32_t
);

545 *
ex≥˘ed_size
 +(
uöt32_t
Ë* 
ªque°
->
fqns_cou¡
;

546 
size_t
 
i
 = 0; i < 
ªque°
->
fqns_cou¡
; ++i) {

547 *
ex≥˘ed_size
 +
	`kØ_Æig√d_size_gë
(
ªque°
->
fqns
[
i
]->
size
);

550 
ô
 = 
	`kØ_li°_√xt
(it);

553  
KAA_ERR_NONE
;

554 
	}
}

556 
kØ_îr‹_t
 
	$kØ_evít_ªque°_gë_size
(
kØ_evít_m™agî_t
 *
£lf
, 
size_t
 *
ex≥˘ed_size
)

558 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
ex≥˘ed_size
, 
KAA_ERR_BADPARAM
);

560 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_evít_ªque°_gë_size_no_hódî
(
£lf
, 
ex≥˘ed_size
);

561 i‡(
îr‹
) {

562 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹
, "FailedÅo getÉventÉxtensionÜength");

563 *
ex≥˘ed_size
 = 0;

564  
îr‹
;

567 
£lf
->
exãnsi⁄_∑ylﬂd_size
 = *
ex≥˘ed_size
;

568 *
ex≥˘ed_size
 +
KAA_EXTENSION_HEADER_SIZE
;

570  
KAA_ERR_NONE
;

571 
	}
}

573 
kØ_îr‹_t
 
	$kØ_evít_li°_£rülize
(
kØ_evít_m™agî_t
 *
£lf
, 
kØ_li°_t
 *
evíts
, 
kØ_∂©f‹m_mesßge_wrôî_t
 *
wrôî
)

575 
uöt16_t
 
ãmp_√tw‹k_‹dî_16
 = 0;

576 
uöt16_t
 
›ti⁄s
 = 0;

577 
uöt32_t
 
ãmp_√tw‹k_‹dî_32
 = 0;

579 
kØ_li°_node_t
 *
ô
 = 
	`kØ_li°_begö
(
evíts
);

580 
ô
) {

581 
kØ_evít_t
 *
evít
 = (kØ_evít_à*Ë
	`kØ_li°_gë_d©a
(
ô
);

583 i‡(
evít
->
£q_num
 == -1) {

584 
evít
->
£q_num
 = ++
£lf
->
evít_£quí˚_numbî
;

587 
ãmp_√tw‹k_‹dî_32
 = 
	`KAA_HTONL
(
evít
->
£q_num
);

588 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
wrôî
, &
ãmp_√tw‹k_‹dî_32
, (
uöt32_t
));

589 i‡(
îr‹
) {

590 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹
, "FailedÅo writeÉvent sequenceÇumber");

591  
îr‹
;

597 
›ti⁄s
 = (!
evít
->
èrgë
 ? 0 : 
KAA_EVENT_OPTION_TARGET_ID_PRESENT
)

598 | (
evít
->
evít_d©a
 ? 
KAA_EVENT_OPTION_EVENT_HAS_DATA
 : 0);

599 
›ti⁄s
 = 
	`KAA_HTONS
(options);

601 
îr‹
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
wrôî
, &
›ti⁄s
, (
uöt16_t
));

602 i‡(
îr‹
) {

603 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹
, "FailedÅo writeÉvent options");

604  
îr‹
;

607 
ãmp_√tw‹k_‹dî_16
 = 
	`KAA_HTONS
(
evít
->
evít_˛ass_fqn
->
size
);

608 
îr‹
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
wrôî
, &
ãmp_√tw‹k_‹dî_16
, (
uöt16_t
));

609 i‡(
îr‹
) {

610 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹
, "FailedÅo writeÉvent class fqnÜength");

611  
îr‹
;

614 i‡(
evít
->
evít_d©a
) {

615 
ãmp_√tw‹k_‹dî_32
 = 
	`KAA_HTONL
(
evít
->
evít_d©a
->
size
);

616 
îr‹
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
wrôî
, &
ãmp_√tw‹k_‹dî_32
, (
uöt32_t
));

617 i‡(
îr‹
) {

618 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹
, "FailedÅo writeÉvent data size");

619  
îr‹
;

623 i‡(
evít
->
èrgë
) {

624 
îr‹
 = 
	`kØ_∂©f‹m_mesßge_wrôe_Æig√d
(
wrôî
,

625 
evít
->
èrgë
->
buf„r


626 , 
KAA_ENDPOINT_ID_LENGTH
);

627 i‡(
îr‹
) {

628 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹
, "FailedÅo writeÉventÅarget id");

629  
îr‹
;

633 
îr‹
 = 
	`kØ_∂©f‹m_mesßge_wrôe_Æig√d
(
wrôî


634 , 
evít
->
evít_˛ass_fqn
->
buf„r


635 , 
evít
->
evít_˛ass_fqn
->
size
);

636 i‡(
îr‹
) {

637 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹
, "FailedÅo writeÉvent class fqnáligned");

638  
îr‹
;

642 i‡(
evít
->
evít_d©a
) {

643 
îr‹
 = 
	`kØ_∂©f‹m_mesßge_wrôe_Æig√d
(
wrôî


644 , 
evít
->
evít_d©a
->
buf„r


645 , 
evít
->
evít_d©a
->
size
);

646 i‡(
îr‹
) {

647 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹
, "FailedÅo writeÉvent dataáligned");

648  
îr‹
;

651 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "SerializedÉvent: sqn '%u', options '%u', data size '%u', fqn '%s'"

652 , 
evít
->
£q_num
, 
	`KAA_NTOHS
(
›ti⁄s
),Évít->
evít_d©a
 ?Évít->evít_d©a->
size
 : 0,Évít->
evít_˛ass_fqn
->
buf„r
);

653 
ô
 = 
	`kØ_li°_√xt
(it);

655  
KAA_ERR_NONE
;

656 
	}
}

658 
kØ_îr‹_t
 
	$kØ_evít_li°íîs_ªque°_£rülize
(
kØ_evít_m™agî_t
 *
£lf
, 
kØ_∂©f‹m_mesßge_wrôî_t
 *
wrôî
, 
uöt16_t
 *
£rülized_li°íîs_cou¡
)

660 
kØ_li°_node_t
 *
ô
 = 
	`kØ_li°_begö
(
£lf
->
evít_li°íîs_ªque°s
);

661 *
£rülized_li°íîs_cou¡
 = 0;

662 
ô
) {

663 
kØ_evít_li°íîs_ªque°_t
 *
ªque°
 = (kØ_evít_li°íîs_ªque°_à*Ë
	`kØ_li°_gë_d©a
(
ô
);

664 i‡(!
ªque°
->
is_£¡
) {

665 *((
uöt16_t
 *Ë
wrôî
->
cuºít
Ë
	`KAA_HTONS
(
ªque°
->
ªque°_id
);

666 
wrôî
->
cuºít
 +(
uöt16_t
);

667 *((
uöt16_t
 *Ë
wrôî
->
cuºít
Ë
	`KAA_HTONS
((uöt16_tË
ªque°
->
fqns_cou¡
);

668 
wrôî
->
cuºít
 +(
uöt16_t
);

669 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "GoingÅo serializeÉventÜisteners:Ñequest id '%u', fqn count '%u'"

670 , 
ªque°
->
ªque°_id
,Ñeque°->
fqns_cou¡
);

671 
size_t
 
i
 = 0; i < 
ªque°
->
fqns_cou¡
; ++i) {

672 
size_t
 
fqn_Àngth
 = 
ªque°
->
fqns
[
i
]->
size
;

673 *((
uöt16_t
 *Ë
wrôî
->
cuºít
Ë
	`KAA_HTONS
((uöt16_tË
fqn_Àngth
);

674 
wrôî
->
cuºít
 +(
uöt32_t
);

675 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_∂©f‹m_mesßge_wrôe_Æig√d
(
wrôî
, 
ªque°
->
fqns
[
i
]->
buf„r
, 
fqn_Àngth
);

676 i‡(
îr‹
) {

677 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹
, "FailedÅo writeÉventÜistenerÑequest");

678 *
£rülized_li°íîs_cou¡
 = 0;

679  
îr‹
;

683 
ªque°
->
is_£¡
 = 
åue
;

684 (*
£rülized_li°íîs_cou¡
)++;

686 
ô
 = 
	`kØ_li°_√xt
(it);

688  
KAA_ERR_NONE
;

689 
	}
}

691 
kØ_îr‹_t
 
	$kØ_evít_ªque°_£rülize
(
kØ_evít_m™agî_t
 *
£lf
, 
size_t
 
ªque°_id
, 
kØ_∂©f‹m_mesßge_wrôî_t
 *
wrôî
)

693 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
wrôî
, 
KAA_ERR_BADPARAM
);

695 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "GoingÅo serialize clientÉvent sync");

698 
uöt16_t
 
exãnsi⁄_›ti⁄s
 = 0;

699 i‡(
£lf
->
£quí˚_numbî_°©us
 !
KAA_EVENT_SEQUENCE_NUMBER_SYNCHRONIZED
) {

700 
exãnsi⁄_›ti⁄s
 |
KAA_EVENT_CLIENT_SYNC_EXTENSION_FLAG_SEQUENCE_NUMBER_SYNC
;

701 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "GoingÅo syncÉvent SQN");

703 
exãnsi⁄_›ti⁄s
 |
KAA_EVENT_CLIENT_SYNC_EXTENSION_FLAG_RECEIVE_EVENTS
;

706 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_∂©f‹m_mesßge_wrôe_exãnsi⁄_hódî
(
wrôî


707 , 
KAA_EXTENSION_EVENT


708 , 
exãnsi⁄_›ti⁄s


709 , 
£lf
->
exãnsi⁄_∑ylﬂd_size
);

710 i‡(
îr‹
) {

711 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹
, "FailedÅo writeÉventÉxtension header (extÅype %u, options %X,Öayload size %u)"

712 , 
KAA_EXTENSION_EVENT
, 
exãnsi⁄_›ti⁄s
, 
£lf
->
exãnsi⁄_∑ylﬂd_size
);

713  
îr‹
;

717 i‡(
£lf
->
exãnsi⁄_∑ylﬂd_size
) {

718 
kØ_li°_t
 *
≥ndög_evíts
 = 
£lf
->pending_events;

719 
kØ_li°_t
 *
ª£ndög_evíts
 = 
£lf
->
evíts_awaôög_ª•⁄£
.
£¡_evíts
;

720 
uöt16_t
 
evíts_cou¡
 = 
	`kØ_li°_gë_size
(
≥ndög_evíts
Ë+ kØ_li°_gë_size(
ª£ndög_evíts
);

722 i‡(
evíts_cou¡
) {

723 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Sîülizög %uÉvíts", 
evíts_cou¡
);

724 *((
uöt8_t
 *Ë
wrôî
->
cuºít
Ë
EVENTS_FIELD
;

725 
wrôî
->
cuºít
 +(
uöt16_t
);

726 *((
uöt16_t
 *Ë
wrôî
->
cuºít
Ë
	`KAA_HTONS
(
evíts_cou¡
);

727 
wrôî
->
cuºít
 +(
uöt16_t
);

729 
îr‹
 = 
	`kØ_evít_li°_£rülize
(
£lf
, 
ª£ndög_evíts
, 
wrôî
);

730 i‡(
îr‹
) {

731 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹
, "FailedÅo writeÉvents");

732  
îr‹
;

735 
îr‹
 = 
	`kØ_evít_li°_£rülize
(
£lf
, 
≥ndög_evíts
, 
wrôî
);

736 i‡(
îr‹
) {

737 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹
, "FailedÅo writeÉvents");

738  
îr‹
;

741 
£lf
->
evíts_awaôög_ª•⁄£
.
ªque°_id
 =Ñequest_id;

742 
£lf
->
evíts_awaôög_ª•⁄£
.
£¡_evíts
 = 
	`kØ_li°s_mîge
(self->events_awaiting_response.sent_events

743 , 
£lf
->
≥ndög_evíts
);

746 i‡(
	`kØ_li°_gë_size
(
£lf
->
evít_li°íîs_ªque°s
)) {

747 *((
uöt8_t
 *Ë
wrôî
->
cuºít
Ë
EVENT_LISTENERS_FIELD
;

748 
wrôî
->
cuºít
 +(
uöt16_t
);

749 
uöt8_t
 *
li°íîs_cou¡_p
 = 
wrôî
->
cuºít
;

750 
wrôî
->
cuºít
 +(
uöt16_t
);

752 
uöt16_t
 
li°íîs_cou¡
 = 0;

753 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "SerializingÉventÜisteners");

754 
îr‹
 = 
	`kØ_evít_li°íîs_ªque°_£rülize
(
£lf
, 
wrôî
, &
li°íîs_cou¡
);

755 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Sîülized %uÉvíàli°íîs", 
li°íîs_cou¡
);

756 i‡(
îr‹
) {

757 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹
, "FailedÅo serializeÉventÜistenersÑequest");

758  
îr‹
;

760 *((
uöt16_t
 *Ë
li°íîs_cou¡_p
Ë
	`KAA_HTONS
(
li°íîs_cou¡
);

763  
KAA_ERR_NONE
;

764 
	}
}

766 
kØ_îr‹_t
 
	$kØ_evít_ªad_evít
(
kØ_evít_m™agî_t
 *
£lf
, 
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî
)

769 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
ªadî
, 
KAA_ERR_BADPARAM
);

771 
uöt16_t
 
evít_›ti⁄s
 = 0;

772 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_∂©f‹m_mesßge_ªad
(
ªadî
, &
evít_›ti⁄s
, (
uöt16_t
));

773 i‡(
îr‹
) {

774 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹
, "FailedÅoÑeadÉvent options field");

775  
îr‹
;

777 
evít_›ti⁄s
 = 
	`KAA_NTOHS
(event_options);

779 
uöt16_t
 
evít_˛ass_fqn_Àngth
 = 0;

780 
îr‹
 = 
	`kØ_∂©f‹m_mesßge_ªad
(
ªadî
, &
evít_˛ass_fqn_Àngth
, (
uöt16_t
));

781 i‡(
îr‹
) {

782 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹
, "FailedÅoÑeadÉvent class fqnÜength field");

783  
îr‹
;

785 
evít_˛ass_fqn_Àngth
 = 
	`KAA_NTOHS
(event_class_fqn_length);

787 
uöt32_t
 
evít_d©a_size
 = 0;

788 i‡(
evít_›ti⁄s
 & 
KAA_EVENT_OPTION_EVENT_HAS_DATA
) {

789 
îr‹
 = 
	`kØ_∂©f‹m_mesßge_ªad
(
ªadî
, &
evít_d©a_size
, (
uöt32_t
));

790 i‡(
îr‹
) {

791 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹
, "FailedÅoÑeadÉvent data size field");

792  
îr‹
;

794 
evít_d©a_size
 = 
	`KAA_NTOHL
(event_data_size);

797 
îr‹
 = 
	`kØ_∂©f‹m_mesßge_ªad
(
ªadî
, (*)
£lf
->
evít_sour˚
, (
kØ_ídpoöt_id
));

799 i‡(
îr‹
) {

800 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹
, "FailedÅoÑeadÉvent sourceÉndpoint id field");

801  
îr‹
;

804 
boﬁ
 
is_íough
 = 
	`kØ_∂©f‹m_mesßge_is_buf„r_œrge_íough
(
ªadî
, 
	`kØ_Æig√d_size_gë
(
evít_˛ass_fqn_Àngth
));

806 i‡(!
is_íough
) {

807 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
KAA_ERR_READ_FAILED
, "Buffer size isÜessÅhanÉvent class fqnÜength value");

808  
KAA_ERR_READ_FAILED
;

810 * 
evít_fqn
 = (*)
	`KAA_MALLOC
(
evít_˛ass_fqn_Àngth
 + 1);

812 
	`KAA_RETURN_IF_NIL
(
evít_fqn
, 
KAA_ERR_NOMEM
);

814 
îr‹
 = 
	`kØ_∂©f‹m_mesßge_ªad_Æig√d
(
ªadî
, 
evít_fqn
, 
evít_˛ass_fqn_Àngth
);

816 i‡(
îr‹
) {

817 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹
, "FailedÅoÑeadÉvent class fqn field");

818 
	`KAA_FREE
(
evít_fqn
);

819  
îr‹
;

821 
evít_fqn
[
evít_˛ass_fqn_Àngth
] = '\0';

823 
	`KAA_LOG_DEBUG
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Pro˚ssögÉvít: o±i⁄†'%u', fq¿Àngth '%u', fq¿'%s' ", 
evít_›ti⁄s
, 
evít_˛ass_fqn_Àngth
, 
evít_fqn
);

825 
kØ_evít_ˇŒback_t
 
ˇŒback
 = 
	`föd_evít_ˇŒback
(
£lf
->
evít_ˇŒbacks
, 
evít_fqn
);

826 i‡(!
ˇŒback
)

827 
ˇŒback
 = 
£lf
->
globÆ_evít_ˇŒback
;

829 i‡(
evít_›ti⁄s
 & 
KAA_EVENT_OPTION_EVENT_HAS_DATA
) {

830 c⁄° 
uöt8_t
 *
evít_d©a
 = 
ªadî
->
cuºít
;

831 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_∂©f‹m_mesßge_skù
(
ªadî
, 
	`kØ_Æig√d_size_gë
(
evít_d©a_size
));

832 i‡(
îr‹
) {

833 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹
, "FaûedÅÿªadÉvíàd©a, sizê%u", 
evít_d©a_size
);

834 
	`KAA_FREE
(
evít_fqn
);

835  
îr‹
;

837 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Suc˚ssfuŒyÑërõvedÉvíàd©®size=%u", 
evít_d©a_size
);

838 i‡(
ˇŒback
)

839 (*
ˇŒback
)(
evít_fqn
, (c⁄° *)
evít_d©a
, 
evít_d©a_size
, 
£lf
->
evít_sour˚
);

840 } i‡(
ˇŒback
) {

841 (*
ˇŒback
)(
evít_fqn
, 
NULL
, 0, 
£lf
->
evít_sour˚
);

843 
	`KAA_FREE
(
evít_fqn
);

844  
KAA_ERR_NONE
;

845 
	}
}

847 
kØ_îr‹_t
 
	$kØ_evít_ªad_li°íîs_ª•⁄£
(
kØ_evít_m™agî_t
 *
£lf
, 
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî
)

849 
uöt16_t
 
ªque°_id
 = 
	`KAA_NTOHS
(*(uöt16_à*Ë
ªadî
->
cuºít
);

850 
ªadî
->
cuºít
 +(
uöt16_t
);

851 
uöt16_t
 
li°íîs_ªsu…
 = 
	`KAA_NTOHS
(*(uöt16_à*Ë
ªadî
->
cuºít
);

852 
ªadî
->
cuºít
 +(
uöt16_t
);

854 
uöt32_t
 
li°íîs_cou¡
 = 
	`KAA_NTOHL
(*(uöt32_à*Ë
ªadî
->
cuºít
);

855 
ªadî
->
cuºít
 +(
uöt32_t
);

857 
	`KAA_LOG_DEBUG
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Received %uÉventÜistener(s) on %uÑequest"

858 , 
li°íîs_cou¡
, 
ªque°_id
);

860 
kØ_li°_node_t
 *
ªque°_node
 = 
	`kØ_li°_föd_√xt
(
	`kØ_li°_begö
(
£lf
->
evít_li°íîs_ªque°s
)

861 , &
föd_li°íîs_ªque°_by_id


862 , &
ªque°_id
);

863 i‡(
ªque°_node
) {

864 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "FoundÉvíàli°íî†ˇŒback wôhÑeque° id %u", 
ªque°_id
);

865 i‡(
ªadî
->
cuºít
 + (
li°íîs_cou¡
 * 
KAA_ENDPOINT_ID_LENGTH
Ë>Ñódî->
íd
) {

866 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
KAA_ERR_READ_FAILED
, "FaûedÅÿªadÉndpoöàid†f‹Ñeque° id %u", 
ªque°_id
);

867  
KAA_ERR_READ_FAILED
;

869 
kØ_evít_li°íîs_ªque°_t
 *
ªque°
 = (kØ_evít_li°íîs_ªque°_à*Ë
	`kØ_li°_gë_d©a
(
ªque°_node
);

870 i‡(
li°íîs_ªsu…
 =
EVENT_LISTENERS_SUCCESS
) {

871 
ªque°
->
ˇŒback
.
	`⁄_evít_li°íîs
‘eque°->ˇŒback.
c⁄ãxt
, (c⁄° 
kØ_ídpoöt_id
 *Ë
ªadî
->
cuºít
, 
li°íîs_cou¡
);

872 
	`KAA_LOG_DEBUG
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Suc˚s†evíàli°íî†ª•⁄£ f‹Ñeque° id %u", 
ªque°_id
);

874 
ªque°
->
ˇŒback
.
	`⁄_evít_li°íîs_Áûed
‘eque°->ˇŒback.
c⁄ãxt
);

875 
	`KAA_LOG_DEBUG
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "FaûedÅÿfödÉvíàli°íîs,Ñeque° id %u", 
ªque°_id
);

877 
	`kØ_li°_ªmove_©
(
£lf
->
evít_li°íîs_ªque°s
, 
ªque°_node
, &
de°roy_evít_li°íî_ªque°
);

879 
	`KAA_LOG_WARN
(
£lf
->
loggî
, 
KAA_ERR_NOT_FOUND
, "FaûedÅÿfödÉvíàli°íî†ˇŒback wôhÑeque° id %u", 
ªque°_id
);

881 
ªadî
->
cuºít
 +
li°íîs_cou¡
 * 
KAA_ENDPOINT_ID_LENGTH
;

882  
KAA_ERR_NONE
;

883 
	}
}

885 
kØ_îr‹_t
 
	$kØ_evít_h™dÀ_£rvî_sync
(
kØ_evít_m™agî_t
 *
£lf


886 , 
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî


887 , 
uöt16_t
 
exãnsi⁄_›ti⁄s


888 , 
size_t
 
exãnsi⁄_Àngth


889 , 
size_t
 
ªque°_id
)

891 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
ªadî
, 
KAA_ERR_BADPARAM
);

893 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Re˚ivedÉvíà£rvî sync: o±i⁄†%u,Öaylﬂd sizê%u", 
exãnsi⁄_›ti⁄s
, 
exãnsi⁄_Àngth
);

895 i‡(
exãnsi⁄_›ti⁄s
 & 
KAA_EVENT_SERVER_SYNC_EXTENSION_FLAG_SEQUENCE_NUMBER_PRESENT
) {

896 
uöt32_t
 
evít_£quí˚_numbî
 = 0;

897 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_∂©f‹m_mesßge_ªad
(
ªadî
, &
evít_£quí˚_numbî
, (
uöt32_t
));

898 i‡(
îr‹
) {

899 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹
, "FailedÅoÑeadÉvent_sequenceÇumber field");

900  
îr‹
;

903 
evít_£quí˚_numbî
 = 
	`KAA_HTONL
(event_sequence_number);

904 
exãnsi⁄_Àngth
 -(
uöt32_t
);

906 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Re˚ivedÉvíà£quí˚Çumbî '%u'", 
evít_£quí˚_numbî
);

907 i‡(
£lf
->
£quí˚_numbî_°©us
 !
KAA_EVENT_SEQUENCE_NUMBER_SYNCHRONIZED
) {

908 
£lf
->
£quí˚_numbî_°©us
 = 
KAA_EVENT_SEQUENCE_NUMBER_SYNCHRONIZED
;

910 i‡(
£lf
->
evít_£quí˚_numbî
 !=Évent_sequence_number) {

911 
	`KAA_LOG_WARN
(
£lf
->
loggî
, 
KAA_ERR_BAD_STATE
, "St‹edÉvíà£quí˚Çumbî i†nŸ c‹ª˘ (°‹ed %u,Ñe˚ived %u).", sñf->
evít_£quí˚_numbî
,Évent_sequence_number);

912 
£lf
->
evít_£quí˚_numbî
 =Évent_sequence_number;

913 
kØ_li°_node_t
 *
ô
 = 
	`kØ_li°_begö
(
£lf
->
≥ndög_evíts
);

914 
ô
) {

915 
kØ_evít_t
 *
evít
 = (kØ_evít_à*)
	`kØ_li°_gë_d©a
(
ô
);

916 
evít
->
£q_num
 = ++
£lf
->
evít_£quí˚_numbî
;

917 
ô
 = 
	`kØ_li°_√xt
(it);

921 i‡(
	`kØ_li°_gë_size
(
£lf
->
≥ndög_evíts
) > 0) {

922 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√l
 =

923 
	`kØ_ch™√l_m™agî_gë_å™•‹t_ch™√l
(
£lf
->
ch™√l_m™agî
, 
evít_sync_£rvi˚s
[0]);

924 i‡(
ch™√l
)

925 
ch™√l
->
	`sync_h™dÀr
(ch™√l->
c⁄ãxt
, 
evít_sync_£rvi˚s
, 1);

929 i‡(
ªque°_id
 =
£lf
->
evíts_awaôög_ª•⁄£
.request_id) {

930 
	`kØ_li°_˛ór
(
£lf
->
evíts_awaôög_ª•⁄£
.
£¡_evíts
, &
kØ_evít_de°roy
);

931 
£lf
->
evíts_awaôög_ª•⁄£
.
ªque°_id
 = (
size_t
) -1;

934 
exãnsi⁄_Àngth
 > 0) {

935 
uöt8_t
 
fõld_id
 = 0;

936 c⁄° 
uöt8_t
 *
fõld_id_pos
 = 
ªadî
->
cuºít
;

938 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_∂©f‹m_mesßge_ªad
(
ªadî
, &
fõld_id
, (
uöt8_t
));

939 i‡(
îr‹
) {

940 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹
, "FailedÅoÑead field id in Event server sync message");

941  
îr‹
;

944 
îr‹
 = 
	`kØ_∂©f‹m_mesßge_skù
(
ªadî
, (
uöt8_t
));

945 i‡(
îr‹
) {

946 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹
, "FailedÅo skipÑeserved field in Event server sync message");

947  
îr‹
;

949 
fõld_id
) {

950 
EVENTS_FIELD
: {

951 
uöt16_t
 
evíts_cou¡
 = 0;

952 
îr‹
 = 
	`kØ_∂©f‹m_mesßge_ªad
(
ªadî
, &
evíts_cou¡
, (
uöt16_t
));

953 i‡(
îr‹
) {

954 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹
, "FailedÅoÑead field id in Event server sync message");

955  
îr‹
;

957 
evíts_cou¡
 = 
	`KAA_NTOHS
(events_count);

958 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Re˚ived %uÉvíts", 
evíts_cou¡
);

959 
evíts_cou¡
--) {

960 
îr‹
 = 
	`kØ_evít_ªad_evít
(
£lf
, 
ªadî
);

961 i‡(
îr‹
) {

962 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹
, "FailedÅoÑeadÉvent from server sync");

963  
îr‹
;

968 
EVENT_LISTENERS_FIELD
: {

969 
uöt16_t
 
evít_li°íîs_ª•⁄£s_cou¡
 = 0;

970 
îr‹
 = 
	`kØ_∂©f‹m_mesßge_ªad
(
ªadî
, &
evít_li°íîs_ª•⁄£s_cou¡
, (
uöt16_t
));

971 i‡(
îr‹
) {

972 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹
, "FailedÅoÑeadÉventÜistenerÑesponse in Event server sync message");

973  
îr‹
;

976 
evít_li°íîs_ª•⁄£s_cou¡
 = 
	`KAA_NTOHS
(event_listeners_responses_count);

977 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Received %uÉventÜistenersÑesponse(s)"

978 , 
evít_li°íîs_ª•⁄£s_cou¡
);

980 
evít_li°íîs_ª•⁄£s_cou¡
--) {

981 
îr‹
 = 
	`kØ_evít_ªad_li°íîs_ª•⁄£
(
£lf
, 
ªadî
);

982 i‡(
îr‹
) {

983 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹
, "FailedÅoÑeadÉventÜistenersÑesponse");

984  
îr‹
;

990 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
KAA_ERR_BADDATA
, "U√x≥˘ed fõld id %u", 
fõld_id
);

991  
KAA_ERR_BADDATA
;

994 
exãnsi⁄_Àngth
 -(
ªadî
->
cuºít
 - 
fõld_id_pos
);

997  
KAA_ERR_NONE
;

998 
	}
}

1000 
kØ_îr‹_t
 
	$kØ_evít_m™agî_föd_evít_li°íîs
(
kØ_evít_m™agî_t
 *
£lf
, c⁄° *
fqns
[], 
size_t
 
fqns_cou¡
, c⁄° 
kØ_evít_li°íîs_ˇŒback_t
 *
ˇŒback
)

1002 
	`KAA_RETURN_IF_NIL5
(
£lf
, 
fqns_cou¡
, 
ˇŒback
, cÆlback->
⁄_evít_li°íîs
, cÆlback->
⁄_evít_li°íîs_Áûed
, 
KAA_ERR_BADPARAM
);

1004 
kØ_evít_li°íîs_ªque°_t
 *
subs¸ibî
 = 
	`¸óã_evít_li°íî_ªque°
(
£lf
, 
fqns
, 
fqns_cou¡
, 
ˇŒback
);

1005 
	`KAA_RETURN_IF_NIL
(
subs¸ibî
, 
KAA_ERR_NOMEM
);

1007 
kØ_li°_node_t
 *
ªque°_ô
 = 
	`kØ_li°_push_‰⁄t
(
£lf
->
evít_li°íîs_ªque°s
, 
subs¸ibî
);

1008 i‡(!
ªque°_ô
) {

1009 
	`de°roy_evít_li°íî_ªque°
(
subs¸ibî
);

1010  
KAA_ERR_NOMEM
;

1013 ++
£lf
->
evít_li°íîs_ªque°_id
;

1015 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√l
 = 
	`kØ_ch™√l_m™agî_gë_å™•‹t_ch™√l
(
£lf
->
ch™√l_m™agî
, 
evít_sync_£rvi˚s
[0]);

1016 i‡(
ch™√l
)

1017 
ch™√l
->
	`sync_h™dÀr
(ch™√l->
c⁄ãxt
, 
evít_sync_£rvi˚s
, 1);

1019  
KAA_ERR_NONE
;

1020 
	}
}

1036 
kØ_îr‹_t
 
	$kØ_evít_m™agî_add_⁄_evít_ˇŒback
(
kØ_evít_m™agî_t
 *
£lf
, c⁄° *
fqn
, 
kØ_evít_ˇŒback_t
 
ˇŒback
)

1038 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
ˇŒback
, 
KAA_ERR_BADPARAM
);

1039 i‡(
fqn
) {

1040 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Addög cÆlback f‹Évíts, fq¿'%s'", 
fqn
);

1041 
evít_ˇŒback_∑ú_t
 *
∑ú
 = 
	`¸óã_evít_ˇŒback_∑ú
(
fqn
, 
ˇŒback
);

1042 
	`KAA_RETURN_IF_NIL
(
∑ú
, 
KAA_ERR_NOMEM
);

1043 
kØ_li°_node_t
 *
ô
 = 
	`kØ_li°_begö
(
£lf
->
evít_ˇŒbacks
);

1044 
ô
) {

1045 
evít_ˇŒback_∑ú_t
 *
d©a
 = (evít_ˇŒback_∑ú_à*Ë
	`kØ_li°_gë_d©a
(
ô
);

1046 i‡(
	`°rcmp
(
fqn
, 
d©a
->fqn) == 0) {

1047 
	`kØ_li°_£t_d©a_©
(
ô
, 
∑ú
, &
kØ_evít_de°roy_ˇŒback_∑ú
);

1048  
KAA_ERR_NONE
;

1050 
ô
 = 
	`kØ_li°_√xt
(it);

1052 i‡(!
	`kØ_li°_push_back
(
£lf
->
evít_ˇŒbacks
, 
∑ú
)) {

1053 
	`kØ_evít_de°roy_ˇŒback_∑ú
(
∑ú
);

1054  
KAA_ERR_NOMEM
;

1057 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Adding globalÉvent callback");

1058 
£lf
->
globÆ_evít_ˇŒback
 = 
ˇŒback
;

1060  
KAA_ERR_NONE
;

1061 
	}
}

1063 
kØ_îr‹_t
 
	$kØ_evít_¸óã_å™ß˘i⁄
(
kØ_evít_m™agî_t
 *
£lf
, 
kØ_evít_block_id
 *
åx_id
)

1065 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
åx_id
, 
KAA_ERR_NOT_INITIALIZED
);

1067 *
åx_id
 = 
£lf
->
åx_cou¡î
 + 1;

1068 
evít_å™ß˘i⁄_t
 *
√w_å™ß˘i⁄
 = 
	`¸óã_å™ß˘i⁄
(*
åx_id
);

1069 
	`KAA_RETURN_IF_NIL
(
√w_å™ß˘i⁄
, 
KAA_ERR_NOMEM
);

1071 i‡(!
	`kØ_li°_push_back
(
£lf
->
å™ß˘i⁄s
, 
√w_å™ß˘i⁄
)) {

1072 
	`de°roy_å™ß˘i⁄
(
√w_å™ß˘i⁄
);

1073  
KAA_ERR_NOMEM
;

1076 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Cª©ögÇewÉvít†b©ch, id %zu", *
åx_id
);

1078 
£lf
->
åx_cou¡î
 = *
åx_id
;

1079  
KAA_ERR_NONE
;

1080 
	}
}

1082 
kØ_îr‹_t
 
	$kØ_evít_föish_å™ß˘i⁄
(
kØ_evít_m™agî_t
 *
£lf
, 
kØ_evít_block_id
 
åx_id
)

1084 
	`KAA_RETURN_IF_NIL
(
£lf
, 
KAA_ERR_NOT_INITIALIZED
);

1086 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "GoögÅÿ£ndÉvít†‰omÉvíàb©ch, id %zu", 
åx_id
);

1088 
kØ_li°_node_t
 *
ô
 = 
	`kØ_li°_föd_√xt
(
	`kØ_li°_begö
(
£lf
->
å™ß˘i⁄s
), &
å™ß˘i⁄_£¨ch_by_id_¥ediˇã
, &
åx_id
);

1089 i‡(
ô
) {

1090 
evít_å™ß˘i⁄_t
 *
åx
 = 
	`kØ_li°_gë_d©a
(
ô
);

1091 
boﬁ
 
√ed_sync
 = 
Ál£
;

1092 i‡(
	`kØ_gë_max_log_Àvñ
(
£lf
->
loggî
Ë>
KAA_LOG_LEVEL_TRACE
) {

1093 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Evít†b©ch wôh id %zu ha†%zuÉvíts", 
åx_id
, 
	`kØ_li°_gë_size
(
åx
->
evíts
));

1095 i‡(
	`kØ_li°_gë_size
(
åx
->
evíts
) > 0) {

1096 
£lf
->
≥ndög_evíts
 = 
	`kØ_li°s_mîge
(£lf->≥ndög_evíts, 
åx
->
evíts
);

1097 
√ed_sync
 = 
åue
;

1099 
	`kØ_li°_ªmove_©
(
£lf
->
å™ß˘i⁄s
, 
ô
, &
de°roy_å™ß˘i⁄
);

1101 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√l
 =

1102 
	`kØ_ch™√l_m™agî_gë_å™•‹t_ch™√l
(
£lf
->
ch™√l_m™agî
, 
evít_sync_£rvi˚s
[0]);

1103 i‡(
√ed_sync
 && 
ch™√l
)

1104 
ch™√l
->
	`sync_h™dÀr
(ch™√l->
c⁄ãxt
, 
evít_sync_£rvi˚s
, 1);

1106  
KAA_ERR_NONE
;

1109 
	`KAA_LOG_WARN
(
£lf
->
loggî
, 
KAA_ERR_NOT_FOUND
, "Evít†b©ch wôh id %zu wa†nŸ cª©ed bef‹e", 
åx_id
);

1111  
KAA_ERR_NOT_FOUND
;

1112 
	}
}

1114 
kØ_îr‹_t
 
	$kØ_evít_ªmove_å™ß˘i⁄
(
kØ_evít_m™agî_t
 *
£lf
, 
kØ_evít_block_id
 
åx_id
)

1116 
	`KAA_RETURN_IF_NIL
(
£lf
, 
KAA_ERR_NOT_INITIALIZED
);

1118 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "GoögÅÿªmovêevít†b©ch wôh id %zu", 
åx_id
);

1120 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_li°_ªmove_fú°
(
£lf
->
å™ß˘i⁄s
, &
å™ß˘i⁄_£¨ch_by_id_¥ediˇã
, &
åx_id
, &
de°roy_å™ß˘i⁄
);

1121 i‡(
îr‹
) {

1122 
	`KAA_LOG_WARN
(
£lf
->
loggî
, 
îr‹
, "Evít†b©ch wôh id %zu wa†nŸ cª©ed bef‹e", 
åx_id
);

1125  
îr‹
;

1126 
	}
}

1144 
kØ_îr‹_t
 
	$kØ_evít_m™agî_add_evít_to_å™ß˘i⁄
(
kØ_evít_m™agî_t
 *
£lf


1145 , 
kØ_evít_block_id
 
åx_id


1146 , c⁄° *
fqn


1147 , c⁄° *
evít_d©a


1148 , 
size_t
 
evít_d©a_size


1149 , 
kØ_ídpoöt_id_p
 
èrgë
)

1151 
	`KAA_RETURN_IF_NIL
(
£lf
, 
KAA_ERR_NOT_INITIALIZED
);

1153 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "GoögÅÿaddÉvíàtÿevít†b©ch, id %zu", 
åx_id
);

1155 
	`KAA_RETURN_IF_NIL
(
fqn
, 
KAA_ERR_EVENT_BAD_FQN
);

1157 
kØ_li°_node_t
 *
ô
 = 
	`kØ_li°_föd_√xt
(
	`kØ_li°_begö
(
£lf
->
å™ß˘i⁄s
), &
å™ß˘i⁄_£¨ch_by_id_¥ediˇã
, &
åx_id
);

1158 i‡(
ô
) {

1162 
kØ_evít_t
 *
evít
 = (kØ_evít_t*)
	`KAA_CALLOC
(1, (kaa_event_t));

1163 
	`KAA_RETURN_IF_NIL
(
evít
, 
KAA_ERR_NOMEM
);

1165 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_fûl_evít_°ru˘uª
(
evít


1166 , (
size_t
)-1

1167 , 
fqn


1168 , 
evít_d©a


1169 , 
evít_d©a_size


1170 , 
èrgë
);

1171 i‡(
îr‹
) {

1172 
	`kØ_evít_de°roy
(
evít
);

1173  
îr‹
;

1176 
evít_å™ß˘i⁄_t
 *
åx
 = 
	`kØ_li°_gë_d©a
(
ô
);

1177 i‡(!
	`kØ_li°_push_back
(
åx
->
evíts
, 
evít
)) {

1178 
	`kØ_evít_de°roy
(
evít
);

1179  
KAA_ERR_NOMEM
;

1182  
KAA_ERR_NONE
;

1185 
	`KAA_LOG_WARN
(
£lf
->
loggî
, 
KAA_ERR_NOT_FOUND
, "C™ÇŸáddÉvíàtÿevít†b©ch, id %zu.", 
åx_id
);

1187  
KAA_ERR_EVENT_TRX_NOT_FOUND
;

1188 
	}
}

1190 c⁄° *
	$kØ_föd_˛ass_Ámûy_«me
(c⁄° *
fqn
)

1192 
size_t
 
i
 = 0;

1193 
SUPPORTED_EVENT_CLASS_FAMILIES_SIZE
 - 
i
++) {

1194 
size_t
 
fqn_cou¡
 = 
SUPPORTED_EVENT_CLASS_FAMILIES
[
SUPPORTED_EVENT_CLASS_FAMILIES_SIZE
 - 
i
].
suµ‹ãd_öcomög_fqns_cou¡
;

1195 **
fqns
 = 
SUPPORTED_EVENT_CLASS_FAMILIES
[
SUPPORTED_EVENT_CLASS_FAMILIES_SIZE
 - 
i
].
suµ‹ãd_öcomög_fqns
;

1196 
fqn_cou¡
--) {

1197 i‡(
	`°rcmp
(
fqn
, 
fqns
[
fqn_cou¡
]) == 0) {

1198  
SUPPORTED_EVENT_CLASS_FAMILIES
[
SUPPORTED_EVENT_CLASS_FAMILIES_SIZE
 - 
i
].
ecf_«me
;

1202  
NULL
;

1203 
	}
}

	@/var/www/html/debian/gateway/kaa/src/extensions/event/kaa_event.h

24 #i‚de‡
KAA_EVENT_H_


25 
	#KAA_EVENT_H_


	)

27 #ifde‡
__˝lu•lus


31 
	~<°ddef.h
>

32 
	~"kØ_îr‹.h
"

33 
	~"∂©f‹m/ext_evít_li°íîs_ˇŒback.h
"

35 (*
kØ_evít_ˇŒback_t
)(c⁄° *
	tevít_fqn
, c⁄° *
	tevít_d©a
, 
	tsize_t
 
	tevít_d©a_size
, 
	tkØ_ídpoöt_id_p
 
	tevít_sour˚
);

36 
size_t
 
	tkØ_evít_block_id
;

38 #i‚de‡
KAA_EVENT_MANAGER_T


39 
	#KAA_EVENT_MANAGER_T


	)

40 
kØ_evít_m™agî_t
 
	tkØ_evít_m™agî_t
;

55 
kØ_îr‹_t
 
kØ_evít_m™agî_föd_evít_li°íîs
(
kØ_evít_m™agî_t
 *
£lf
, c⁄° *
fqns
[], 
size_t
 
fqns_cou¡
, c⁄° 
kØ_evít_li°íîs_ˇŒback_t
 *
ˇŒback
);

68 
kØ_îr‹_t
 
kØ_evít_¸óã_å™ß˘i⁄
(
kØ_evít_m™agî_t
 *
£lf
, 
kØ_evít_block_id
 *
åx_id
);

81 
kØ_îr‹_t
 
kØ_evít_föish_å™ß˘i⁄
(
kØ_evít_m™agî_t
 *
£lf
, 
kØ_evít_block_id
 
åx_id
);

92 
kØ_îr‹_t
 
kØ_evít_ªmove_å™ß˘i⁄
(
kØ_evít_m™agî_t
 *
£lf
, 
kØ_evít_block_id
 
åx_id
);

102 c⁄° *
kØ_föd_˛ass_Ámûy_«me
(c⁄° *
fqn
);

104 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/extensions/event/kaa_event_private.h

16 #i‚de‡
KAA_EVENT_PRIVATE_H


17 
	#KAA_EVENT_PRIVATE_H


	)

19 
	~<kØ_evít.h
>

20 
	~<kØ_°©us.h
>

21 
	~<kØ_ch™√l_m™agî.h
>

22 
	~<utûôõs/kØ_log.h
>

23 
	~<kØ_∂©f‹m_utûs.h
>

25 
kØ_îr‹_t
 
kØ_evít_m™agî_¸óã
(
kØ_evít_m™agî_t
 **
evít_m™agî_p
, 
kØ_°©us_t
 *
°©us
,

26 
kØ_ch™√l_m™agî_t
 *
ch™√l_m™agî
, 
kØ_loggî_t
 *
loggî
);

27 
kØ_evít_m™agî_de°roy
(
kØ_evít_m™agî_t
 *
£lf
);

28 
kØ_îr‹_t
 
kØ_evít_m™agî_£nd_evít
(
kØ_evít_m™agî_t
 *
£lf
, c⁄° *
fqn
, c⁄° *
evít_d©a
,

29 
size_t
 
evít_d©a_size
, 
kØ_ídpoöt_id_p
 
èrgë
);

31 
kØ_îr‹_t
 
kØ_evít_m™agî_add_evít_to_å™ß˘i⁄
(
kØ_evít_m™agî_t
 *
£lf
, 
kØ_evít_block_id
 
åx_id
,

32 c⁄° *
fqn
, c⁄° *
evít_d©a
, 
size_t
 
evít_d©a_size
, 
kØ_ídpoöt_id_p
 
èrgë
);

34 
kØ_îr‹_t
 
kØ_evít_m™agî_add_⁄_evít_ˇŒback
(
kØ_evít_m™agî_t
 *
£lf
, c⁄° *
fqn
,

35 
kØ_evít_ˇŒback_t
 
ˇŒback
);

37 
kØ_îr‹_t
 
kØ_evít_ªque°_gë_size
(
kØ_evít_m™agî_t
 *
£lf
, 
size_t
 *
ex≥˘ed_size
);

38 
kØ_îr‹_t
 
kØ_evít_ªque°_£rülize
(
kØ_evít_m™agî_t
 *
£lf
, 
size_t
 
ªque°_id
,

39 
kØ_∂©f‹m_mesßge_wrôî_t
 *
wrôî
);

40 
kØ_îr‹_t
 
kØ_evít_h™dÀ_£rvî_sync
(
kØ_evít_m™agî_t
 *
£lf
, 
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî
, 
uöt16_t
 
exãnsi⁄_›ti⁄s
, 
size_t
 
exãnsi⁄_Àngth
, size_à
ªque°_id
);

	@/var/www/html/debian/gateway/kaa/src/extensions/event/test/test_kaa_event.c

17 
	~<°döt.h
>

18 
	~<°dboﬁ.h
>

19 
	~<°rög.h
>

20 
	~<°dio.h
>

22 
	~"∂©f‹m/ext_sha.h
"

23 
	~"kØ_evít.h
"

24 
	~"kØ_evít_¥iv©e.h
"

26 
	~"kØ_ã°.h
"

28 
	~"kØ_c⁄ãxt.h
"

29 
	~"utûôõs/kØ_log.h
"

30 
	~"utûôõs/kØ_mem.h
"

31 
	~"kØ_°©us.h
"

32 
	~"kØ_ch™√l_m™agî.h
"

33 
	~"kØ_∂©f‹m_utûs.h
"

34 
	~"∂©f‹m/sock.h
"

36 
	~"kØ_¥iv©e.h
"

39 
	gglobÆ_evíts_cou¡î
 = 0;

40 
	g•ecific_evíts_cou¡î
 = 0;

42 
kØ_c⁄ãxt_t
 
	gkØ_c⁄ãxt
;

43 
kØ_loggî_t
 *
	gloggî
 = 
NULL
;

44 
kØ_°©us_t
 *
	g°©us
 = 
NULL
;

45 
kØ_ch™√l_m™agî_t
 *
	gch™√l_m™agî
 = 
NULL
;

46 
kØ_evít_m™agî_t
 *
	gevít_m™agî
 = 
NULL
;

50 
ã°_öô
();

51 
ã°_deöô
();

55 
	$ã°_kØ_¸óã_evít_m™agî
(**
°©e
)

57 ()
°©e
;

59 
kØ_°©us_t
* 
°©us
 = 
NULL
;

60 
	`kØ_°©us_¸óã
(&
°©us
);

61 
kØ_evít_m™agî_t
 *
evít_m™agî
 = 
NULL
;

62 
kØ_îr‹_t
 
îr_code
 = 
	`kØ_evít_m™agî_¸óã
(&
evít_m™agî
, 
°©us
, 
NULL
, 
loggî
);

63 
	`ASSERT_EQUAL
(
îr_code
, 
KAA_ERR_NONE
);

64 
	`ASSERT_NOT_NULL
(
evít_m™agî
);

65 
	`kØ_evít_m™agî_de°roy
(
evít_m™agî
);

67 
	`KAA_FREE
(
°©us
);

68 
	}
}

70 
kØ_ídpoöt_id
 
	gídpoöt_id1
 = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20 };

71 
kØ_ídpoöt_id
 
	gídpoöt_id2
 = { 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40 };

72 
boﬁ
 
	gis_evít_li°íîs_cb_ˇŒed
 = 
Ál£
;

74 
kØ_îr‹_t
 
	$evít_li°íîs_ˇŒback
(*
c⁄ãxt
, c⁄° 
kØ_ídpoöt_id
 
li°íîs
[], 
size_t
 
li°íîs_cou¡
)

76 ()
c⁄ãxt
;

77 
	`ASSERT_EQUAL
(
li°íîs_cou¡
, 2);

78 
	`ASSERT_EQUAL
(
	`memcmp
(
li°íîs
[0], 
ídpoöt_id1
, 
KAA_ENDPOINT_ID_LENGTH
), 0);

79 
	`ASSERT_EQUAL
(
	`memcmp
(
li°íîs
[1], 
ídpoöt_id2
, 
KAA_ENDPOINT_ID_LENGTH
), 0);

80 
is_evít_li°íîs_cb_ˇŒed
 = 
åue
;

81  
KAA_ERR_NONE
;

82 
	}
}

84 
kØ_îr‹_t
 
	$evít_li°íîs_ªque°_Áûed
(*
c⁄ãxt
)

86 ()
c⁄ãxt
;

87  
KAA_ERR_NONE
;

88 
	}
}

90 
	$ã°_kØ_evít_li°íîs_£rülize_ªque°
(**
°©e
)

92 ()
°©e
;

94 
size_t
 
ex≥˘ed_size
 = 
KAA_EXTENSION_HEADER_SIZE
 + (
uöt32_t
);

95 
ex≥˘ed_size
 +(
uöt32_t
);

96 
ex≥˘ed_size
 +2 * (
uöt32_t
);

98 c⁄° *
fqns
[] = { "test.fqn1", "test.fqn2" };

99 c⁄° 
size_t
 
fqn1_Àn
 = 
	`°æí
(
fqns
[0]);

100 c⁄° 
size_t
 
fqn2_Àn
 = 
	`°æí
(
fqns
[1]);

102 
ex≥˘ed_size
 +
	`kØ_Æig√d_size_gë
(
fqn1_Àn
Ë+ kØ_Æig√d_size_gë(
fqn2_Àn
);

104 
kØ_evít_li°íîs_ˇŒback_t
 
ˇŒback
 = { 
NULL
, NULL, NULL };

105 
	`ASSERT_NOT_EQUAL
(
	`kØ_evít_m™agî_föd_evít_li°íîs
(
evít_m™agî
, 
fqns
, 2, &
ˇŒback
), 
KAA_ERR_NONE
);

107 
ˇŒback
 = (
kØ_evít_li°íîs_ˇŒback_t
Ë{ 
NULL
, &
evít_li°íîs_ˇŒback
, &
evít_li°íîs_ªque°_Áûed
 };

108 
	`ASSERT_EQUAL
(
	`kØ_evít_m™agî_föd_evít_li°íîs
(
evít_m™agî
, 
fqns
, 2, &
ˇŒback
), 
KAA_ERR_NONE
);

110 
size_t
 
a˘uÆ_size
 = 0;

111 
	`ASSERT_EQUAL
(
	`kØ_evít_ªque°_gë_size
(
evít_m™agî
, &
a˘uÆ_size
), 
KAA_ERR_NONE
);

112 
	`ASSERT_EQUAL
(
a˘uÆ_size
, 
ex≥˘ed_size
);

114 
uöt8_t
 
buf„r
[
a˘uÆ_size
];

115 
kØ_∂©f‹m_mesßge_wrôî_t
 *
wrôî
;

116 
	`ASSERT_EQUAL
(
	`kØ_∂©f‹m_mesßge_wrôî_¸óã
(&
wrôî
, 
buf„r
, 
a˘uÆ_size
), 
KAA_ERR_NONE
);

118 
	`ASSERT_EQUAL
(
	`kØ_evít_ªque°_£rülize
(
evít_m™agî
, 1, 
wrôî
), 
KAA_ERR_NONE
);

120 
uöt8_t
 *
curs‹
 = 
buf„r
 + 
KAA_EXTENSION_HEADER_SIZE
;

121 
	`ASSERT_EQUAL
((*(
uöt8_t
 *Ë
curs‹
), 0);

122 
curs‹
 +(
uöt16_t
);

124 
	`ASSERT_EQUAL
(
	`KAA_NTOHS
(*(
uöt16_t
 *Ë
curs‹
), 1);

125 
curs‹
 +(
uöt16_t
);

127 
	`ASSERT_EQUAL
(
	`KAA_NTOHS
(*(
uöt16_t
 *Ë
curs‹
), 1);

128 
curs‹
 +(
uöt16_t
);

130 
	`ASSERT_EQUAL
(
	`KAA_NTOHS
(*(
uöt16_t
 *Ë
curs‹
), 2);

131 
curs‹
 +(
uöt16_t
);

133 
	`ASSERT_EQUAL
(
	`KAA_NTOHS
(*(
uöt16_t
 *Ë
curs‹
), 
fqn1_Àn
);

134 
curs‹
 +(
uöt32_t
);

136 
	`ASSERT_EQUAL
(
	`memcmp
(
curs‹
, 
fqns
[0], 
fqn1_Àn
), 0);

137 
curs‹
 +
	`kØ_Æig√d_size_gë
(
fqn1_Àn
);

139 
	`ASSERT_EQUAL
(
	`KAA_NTOHS
(*(
uöt16_t
 *Ë
curs‹
), 
fqn2_Àn
);

140 
curs‹
 +(
uöt32_t
);

142 
	`ASSERT_EQUAL
(
	`memcmp
(
curs‹
, 
fqns
[1], 
fqn2_Àn
), 0);

143 
curs‹
 +
	`kØ_Æig√d_size_gë
(
fqn2_Àn
);

145 
	`ASSERT_EQUAL
(
curs‹
, 
buf„r
 + 
a˘uÆ_size
);

147 
	`kØ_∂©f‹m_mesßge_wrôî_de°roy
(
wrôî
);

148 
	}
}

150 
	$ã°_kØ_evít_li°íîs_h™dÀ_sync
(**
°©e
)

152 ()
°©e
;

154 c⁄° 
uöt32_t
 
exãnsi⁄_size
 = 52;

155 
uöt8_t
 
buf„r
[
exãnsi⁄_size
];

157 
uöt8_t
 *
curs‹
 = 
buf„r
;

158 *
curs‹
 = 0;

159 
curs‹
 +(
uöt16_t
);

161 *((
uöt16_t
 *Ë
curs‹
Ë
	`KAA_HTONS
(1);

162 
curs‹
 +(
uöt16_t
);

164 *((
uöt16_t
 *Ë
curs‹
Ë
	`KAA_HTONS
(1);

165 
curs‹
 +(
uöt16_t
);

167 *((
uöt16_t
 *Ë
curs‹
Ë
	`KAA_HTONS
(0);

168 
curs‹
 +(
uöt16_t
);

170 *((
uöt32_t
 *Ë
curs‹
Ë
	`KAA_HTONL
(2);

171 
curs‹
 +(
uöt32_t
);

173 
	`mem˝y
(
curs‹
, 
ídpoöt_id1
, 
KAA_ENDPOINT_ID_LENGTH
);

174 
curs‹
 +
KAA_ENDPOINT_ID_LENGTH
;

176 
	`mem˝y
(
curs‹
, 
ídpoöt_id2
, 
KAA_ENDPOINT_ID_LENGTH
);

177 
curs‹
 +
KAA_ENDPOINT_ID_LENGTH
;

179 
	`ASSERT_EQUAL
(
curs‹
, 
buf„r
 + 
exãnsi⁄_size
);

181 
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî
;

182 
	`ASSERT_EQUAL
(
	`kØ_∂©f‹m_mesßge_ªadî_¸óã
(&
ªadî
, 
buf„r
, 
exãnsi⁄_size
), 
KAA_ERR_NONE
);

184 
	`ASSERT_FALSE
(
is_evít_li°íîs_cb_ˇŒed
);

185 
	`ASSERT_EQUAL
(
	`kØ_evít_h™dÀ_£rvî_sync
(
evít_m™agî
, 
ªadî
, 0, 
exãnsi⁄_size
, 1), 
KAA_ERR_NONE
);

186 
	`ASSERT_TRUE
(
is_evít_li°íîs_cb_ˇŒed
);

187 
	`ASSERT_EQUAL
(
ªadî
->
cuºít
,Ñódî->
íd
);

190 
is_evít_li°íîs_cb_ˇŒed
 = 
Ál£
;

191 
ªadî
->
cuºít
 =Ñódî->
begö
;

192 
	`ASSERT_EQUAL
(
	`kØ_evít_h™dÀ_£rvî_sync
(
evít_m™agî
, 
ªadî
, 0, 
exãnsi⁄_size
, 1), 
KAA_ERR_NONE
);

193 
	`ASSERT_FALSE
(
is_evít_li°íîs_cb_ˇŒed
);

195 
	`kØ_∂©f‹m_mesßge_ªadî_de°roy
(
ªadî
);

196 
	}
}

198 
	$ã°_kØ_evít_sync_gë_size
(**
°©e
)

200 ()
°©e
;

202 
kØ_îr‹_t
 
îr‹_code
;

203 
size_t
 
ex≥˘ed_size
 = 
KAA_EXTENSION_HEADER_SIZE


204 + (
uöt8_t
)

205 + (
uöt8_t
)

206 + (
uöt16_t
);

208 c⁄° *
fqn
 = "test fqn";

209 c⁄° 
size_t
 
fqn_Àn
 = 
	`°æí
(
fqn
);

211 c⁄° 
size_t
 
evít_d©a_size
 = 16;

215 c⁄° *
evít_d©a
 = (c⁄° *Ë
	`KAA_MALLOC
(
evít_d©a_size
);

217 
kØ_ídpoöt_id
 
èrgë
 = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0 };

219 c⁄° 
size_t
 
buf„r_size
 = 
KAA_EXTENSION_HEADER_SIZE
 + (
uöt32_t
);

220 
uöt8_t
 
buf„r
[
buf„r_size
];

221 
kØ_∂©f‹m_mesßge_wrôî_t
 *
wrôî
;

222 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôî_¸óã
(&
wrôî
, 
buf„r
, 
buf„r_size
);

223 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

225 c⁄° 
uöt32_t
 
£quí˚_numbî
 = 
	`KAA_HTONL
(12345);

226 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
wrôî
, &
£quí˚_numbî
, (
uöt32_t
));

227 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

229 
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî
;

230 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªadî_¸óã
(&
ªadî
, 
buf„r
, 
buf„r_size
);

231 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

233 
îr‹_code
 = 
	`kØ_evít_m™agî_£nd_evít
(
evít_m™agî
, 
fqn
, 
evít_d©a
, 
evít_d©a_size
, 
èrgë
);

234 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

235 
ex≥˘ed_size
 +(
uöt32_t
)

236 + (
uöt16_t
)

237 + (
uöt16_t
)

238 + (
uöt32_t
)

239 + 
KAA_ENDPOINT_ID_LENGTH


240 + 
	`kØ_Æig√d_size_gë
(
fqn_Àn
)

241 + 
	`kØ_Æig√d_size_gë
(
evít_d©a_size
);

243 
îr‹_code
 = 
	`kØ_evít_m™agî_£nd_evít
(
evít_m™agî
, 
fqn
, 
NULL
, 0, NULL);

244 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

245 
ex≥˘ed_size
 +(
uöt32_t
)

246 + (
uöt16_t
)

247 + (
uöt16_t
)

248 + 
	`kØ_Æig√d_size_gë
(
fqn_Àn
);

250 
size_t
 
evít_sync_size
;

251 
îr‹_code
 = 
	`kØ_evít_ªque°_gë_size
(
evít_m™agî
, &
evít_sync_size
);

252 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

254 
	`ASSERT_EQUAL
(
evít_sync_size
, 
KAA_EXTENSION_HEADER_SIZE
);

256 
îr‹_code
 = 
	`kØ_evít_h™dÀ_£rvî_sync
(
evít_m™agî
, 
ªadî
, 0x1, (
uöt32_t
), 1);

257 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

259 
îr‹_code
 = 
	`kØ_evít_ªque°_gë_size
(
evít_m™agî
, &
evít_sync_size
);

260 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

261 
	`ASSERT_EQUAL
(
evít_sync_size
, 
ex≥˘ed_size
);

263 
	`kØ_∂©f‹m_mesßge_wrôî_de°roy
(
wrôî
);

264 
	`kØ_∂©f‹m_mesßge_ªadî_de°roy
(
ªadî
);

265 
	}
}

267 
kØ_îr‹_t
 
	$£rülize_evít
(
kØ_∂©f‹m_mesßge_wrôî_t
 *
wrôî


268 , c⁄° *
fqn


269 , c⁄° *
evít_d©a


270 , 
size_t
 
evít_d©a_size


271 , 
kØ_ídpoöt_id_p
 
èrgë


272 , 
size_t
 
£quí˚_numbî


273 , 
boﬁ
 
√ed_£quí˚_numbî
)

275 
	`KAA_RETURN_IF_NIL2
(
wrôî
, 
fqn
, 
KAA_ERR_BADPARAM
);

277 
kØ_îr‹_t
 
îr‹_code
;

279 
uöt16_t
 
evít_›ti⁄s
 = (
evít_d©a
 ? 0x2 : 0Ë| (
èrgë
 ? 0x1 : 0);

280 
uöt16_t
 
fqn_Àn
 = 
	`°æí
(
fqn
);

282 
uöt16_t
 
√tw‹k_‹dî_16
;

283 
uöt32_t
 
√tw‹k_‹dî_32
;

285 i‡(
√ed_£quí˚_numbî
) {

286 
√tw‹k_‹dî_32
 = 
	`KAA_HTONL
(
£quí˚_numbî
);

287 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
wrôî
, &
√tw‹k_‹dî_32
, (
uöt32_t
));

288 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

291 
√tw‹k_‹dî_16
 = 
	`KAA_HTONS
(
evít_›ti⁄s
);

292 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
wrôî
, &
√tw‹k_‹dî_16
, (
uöt16_t
));

293 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

295 
√tw‹k_‹dî_16
 = 
	`KAA_HTONS
(
fqn_Àn
);

296 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
wrôî
, &
√tw‹k_‹dî_16
, (
uöt16_t
));

297 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

299 i‡(
evít_d©a
) {

300 
√tw‹k_‹dî_32
 = 
	`KAA_HTONL
(
evít_d©a_size
);

301 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
wrôî
, &
√tw‹k_‹dî_32
, (
uöt32_t
));

302 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

305 i‡(
èrgë
) {

306 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe_Æig√d
(
wrôî
, 
èrgë
, 
KAA_ENDPOINT_ID_LENGTH
);

307 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

310 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe_Æig√d
(
wrôî
, 
fqn
, 
fqn_Àn
);

311 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

313 i‡(
evít_d©a
) {

314 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe_Æig√d
(
wrôî
, 
evít_d©a
, 
evít_d©a_size
);

315 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

318  
îr‹_code
;

319 
	}
}

323 
	$ã°_evít_sync_£rülize
(**
°©e
)

325 ()
°©e
;

326 
	`ã°_deöô
();

327 
	`ã°_öô
();

329 
kØ_îr‹_t
 
îr‹_code
;

331 c⁄° 
uöt8_t
 
evít_fõld
 = 1;

332 c⁄° 
uöt8_t
 
ª£rved_fõld
 = 0;

333 
uöt16_t
 
evít_cou¡
 = 0;

335 c⁄° *
fqn
 = "test fqn";

339 c⁄° 
size_t
 
evít_d©a_size
 = 16;

340 c⁄° *
evít_d©a
 = (c⁄° *Ë
	`KAA_MALLOC
(
evít_d©a_size
);

342 
kØ_ídpoöt_id
 
èrgë
 = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0 };

344 c⁄° 
size_t
 
£rvî_sync_buf„r_size
 = 
KAA_EXTENSION_HEADER_SIZE
 + (
uöt32_t
);

345 
uöt8_t
 
£rvî_sync_buf„r
[
£rvî_sync_buf„r_size
];

346 
kØ_∂©f‹m_mesßge_wrôî_t
 *
£rvî_sync_wrôî
;

347 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôî_¸óã
(&
£rvî_sync_wrôî
, 
£rvî_sync_buf„r
, 
£rvî_sync_buf„r_size
);

348 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

350 
uöt32_t
 
£quí˚_numbî
 = 
	`KAA_HTONL
(12345);

351 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
£rvî_sync_wrôî
, &
£quí˚_numbî
, (
uöt32_t
));

352 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

353 
£quí˚_numbî
 = 
	`KAA_NTOHL
(sequence_number);

355 
kØ_∂©f‹m_mesßge_ªadî_t
 *
£rvî_sync_ªadî
;

356 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªadî_¸óã
(&
£rvî_sync_ªadî
, 
£rvî_sync_buf„r
, 
£rvî_sync_buf„r_size
);

357 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

359 
îr‹_code
 = 
	`kØ_evít_h™dÀ_£rvî_sync
(
evít_m™agî
, 
£rvî_sync_ªadî
, 0x1, (
uöt32_t
), 1);

360 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

362 
îr‹_code
 = 
	`kØ_evít_m™agî_£nd_evít
(
evít_m™agî
, 
fqn
, 
evít_d©a
, 
evít_d©a_size
, 
èrgë
);

363 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

364 ++
evít_cou¡
;

365 
îr‹_code
 = 
	`kØ_evít_m™agî_£nd_evít
(
evít_m™agî
, 
fqn
, 
NULL
, 0, NULL);

366 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

367 ++
evít_cou¡
;

369 
size_t
 
evít_sync_size
 = 0;

370 
îr‹_code
 = 
	`kØ_evít_ªque°_gë_size
(
evít_m™agî
, &
evít_sync_size
);

371 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

373 
uöt8_t
 
m™uÆ_buf„r
[
evít_sync_size
];

374 
uöt8_t
 
auto_buf„r
[
evít_sync_size
];

376 
uöt8_t
 *
m™uÆ_buf„r_±r
 = 
m™uÆ_buf„r
;

377 
uöt8_t
 *
auto_buf„r_±r
 = 
auto_buf„r
;

379 
kØ_∂©f‹m_mesßge_wrôî_t
 *
m™uÆ_wrôî
;

380 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôî_¸óã
(&
m™uÆ_wrôî
, 
m™uÆ_buf„r
, 
evít_sync_size
);

381 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

382 
kØ_∂©f‹m_mesßge_wrôî_t
 *
auto_wrôî
;

383 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôî_¸óã
(&
auto_wrôî
, 
auto_buf„r
, 
evít_sync_size
);

384 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

386 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe_exãnsi⁄_hódî
(
m™uÆ_wrôî


387 , 
KAA_EXTENSION_EVENT


389 , 
evít_sync_size
 - 
KAA_EXTENSION_HEADER_SIZE
);

390 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

391 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
m™uÆ_wrôî
, &
evít_fõld
, (
uöt8_t
));

392 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

393 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
m™uÆ_wrôî
, &
ª£rved_fõld
, (
uöt8_t
));

394 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

395 
evít_cou¡
 = 
	`KAA_HTONS
(event_count);

396 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
m™uÆ_wrôî
, &
evít_cou¡
, (
uöt16_t
));

397 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

399 
îr‹_code
 = 
	`£rülize_evít
(
m™uÆ_wrôî
, 
fqn
, 
evít_d©a
, 
evít_d©a_size
, 
èrgë
, ++
£quí˚_numbî
, 
åue
);

400 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

401 
îr‹_code
 = 
	`£rülize_evít
(
m™uÆ_wrôî
, 
fqn
, 
NULL
, 0, NULL, ++
£quí˚_numbî
, 
åue
);

402 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

404 
îr‹_code
 = 
	`kØ_evít_ªque°_£rülize
(
evít_m™agî
, 1, 
auto_wrôî
);

405 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

407 
îr‹_code
 = (
	`memcmp
(
auto_buf„r_±r
, 
m™uÆ_buf„r_±r
, 
KAA_EXTENSION_HEADER_SIZE
Ë=0 ? 
KAA_ERR_NONE
 : 
KAA_ERR_BADDATA
);

408 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

410 
auto_buf„r_±r
 +
KAA_EXTENSION_HEADER_SIZE
;

411 
m™uÆ_buf„r_±r
 +
KAA_EXTENSION_HEADER_SIZE
;

412 
evít_sync_size
 -
KAA_EXTENSION_HEADER_SIZE
;

414 
	`ASSERT_EQUAL
(*
auto_buf„r_±r
, *
m™uÆ_buf„r_±r
);

416 
auto_buf„r_±r
 +(
uöt16_t
);

417 
m™uÆ_buf„r_±r
 +(
uöt16_t
);

418 
evít_sync_size
 -(
uöt16_t
);

420 
îr‹_code
 = (
	`memcmp
(
auto_buf„r_±r
, 
m™uÆ_buf„r_±r
, 
evít_sync_size
Ë=0 ? 
KAA_ERR_NONE
 : 
KAA_ERR_BADDATA
);

421 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

423 
	`kØ_∂©f‹m_mesßge_wrôî_de°roy
(
m™uÆ_wrôî
);

424 
	`kØ_∂©f‹m_mesßge_wrôî_de°roy
(
auto_wrôî
);

425 
	`kØ_∂©f‹m_mesßge_ªadî_de°roy
(
£rvî_sync_ªadî
);

426 
	`kØ_∂©f‹m_mesßge_wrôî_de°roy
(
£rvî_sync_wrôî
);

427 
	}
}

431 
	$globÆ_evít_cb
(c⁄° *
fqn
, c⁄° *
d©a
, 
size_t
 
size
, 
kØ_ídpoöt_id_p
 
sour˚
)

433 ()
fqn
;

434 ()
d©a
;

435 ()
size
;

436 ()
sour˚
;

437 
globÆ_evíts_cou¡î
++;

438 
	}
}

442 
	$•ecific_evít_cb
(c⁄° *
fqn
, c⁄° *
d©a
, 
size_t
 
size
, 
kØ_ídpoöt_id_p
 
sour˚
)

444 ()
fqn
;

445 ()
d©a
;

446 ()
size
;

447 ()
sour˚
;

448 
•ecific_evíts_cou¡î
++;

449 
	}
}

451 
size_t
 
	$evít_gë_size
(c⁄° *
fqn


452 , c⁄° *
evít_d©a


453 , 
size_t
 
evít_d©a_size


454 , 
kØ_ídpoöt_id_p
 
sour˚
)

456 ()
sour˚
;

457 
size_t
 
size
 = 0;

459 
size
 +(
uöt16_t
)

460 + (
uöt16_t
);

462 i‡(
evít_d©a
) {

463 
size
 +(
uöt32_t
);

466 
size
 +
KAA_ENDPOINT_ID_LENGTH


467 + 
	`kØ_Æig√d_size_gë
(
	`°æí
(
fqn
));

469 i‡(
evít_d©a
) {

470 
size
 +
	`kØ_Æig√d_size_gë
(
evít_d©a_size
);

473  
size
;

474 
	}
}

476 
	$ã°_evít_blocks
(**
°©e
)

478 ()
°©e
;

480 
	`ã°_deöô
();

481 
	`ã°_öô
();

483 
size_t
 
£rvî_sync_buf„r_size
 = (
uöt32_t
);

485 
uöt8_t
 
£rvî_sync_buf„r
[
£rvî_sync_buf„r_size
];

486 
	`mem£t
(
£rvî_sync_buf„r
, 0, 
£rvî_sync_buf„r_size
);

488 
kØ_∂©f‹m_mesßge_ªadî_t
 *
£rvî_sync_ªadî
;

489 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªadî_¸óã
(&
£rvî_sync_ªadî
, 
£rvî_sync_buf„r
, 
£rvî_sync_buf„r_size
);

490 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

493 
îr‹_code
 = 
	`kØ_evít_h™dÀ_£rvî_sync
(
evít_m™agî
, 
£rvî_sync_ªadî
, 0x01, 
£rvî_sync_buf„r_size
, 1);

494 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

496 
kØ_evít_block_id
 
åx_id
 = 0;

497 
îr‹_code
 = 
	`kØ_evít_¸óã_å™ß˘i⁄
(
evít_m™agî
, &
åx_id
);

498 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

499 
	`ASSERT_TRUE
(
åx_id
);

501 c⁄° 
size_t
 
evít1_size
 = 6;

502 *
evít1
 = (*Ë
	`KAA_MALLOC
(
evít1_size
 + 1);

503 
	`°r˝y
(
evít1
, "event1");

504 
îr‹_code
 = 
	`kØ_evít_m™agî_add_evít_to_å™ß˘i⁄
(
evít_m™agî
, 
åx_id
, "ã°.fqn1", 
evít1
, 
evít1_size
, 
NULL
);

505 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

507 c⁄° 
size_t
 
evít2_size
 = 6;

508 *
evít2
 = (*Ë
	`KAA_MALLOC
(
evít2_size
 + 1);

509 
	`°r˝y
(
evít2
, "event2");

510 
îr‹_code
 = 
	`kØ_evít_m™agî_add_evít_to_å™ß˘i⁄
(
evít_m™agî
, 
åx_id
, "ã°.fqn2", 
evít2
, 
evít2_size
, 
NULL
);

511 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

513 
îr‹_code
 = 
	`kØ_evít_m™agî_add_evít_to_å™ß˘i⁄
(
evít_m™agî
, 
åx_id
, "ã°.fqn3", 
NULL
, 0, NULL);

514 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

516 
îr‹_code
 = 
	`kØ_evít_föish_å™ß˘i⁄
(
evít_m™agî
, 
åx_id
);

517 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

519 
size_t
 
ex≥˘ed_size
 = 
KAA_EXTENSION_HEADER_SIZE


520 + (
uöt32_t
)

521 + 3 * (
uöt32_t
)

522 + 3 * (
uöt32_t
)

523 + 2 * (
uöt32_t
)

524 + 
	`kØ_Æig√d_size_gë
(
evít1_size
Ë+ kØ_Æig√d_size_gë(
	`°æí
("test.fqn1"))

525 + 
	`kØ_Æig√d_size_gë
(
evít2_size
Ë+ kØ_Æig√d_size_gë(
	`°æí
("test.fqn2"))

526 + 
	`kØ_Æig√d_size_gë
(
	`°æí
("test.fqn3"));

528 
size_t
 
ªque°_size
 = 0;

529 
îr‹_code
 = 
	`kØ_evít_ªque°_gë_size
(
evít_m™agî
, &
ªque°_size
);

530 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

531 
	`ASSERT_EQUAL
(
ªque°_size
, 
ex≥˘ed_size
);

533 
	`kØ_∂©f‹m_mesßge_ªadî_de°roy
(
£rvî_sync_ªadî
);

534 
	}
}

536 
	$ã°_kØ_£rvî_sync_wôh_evít_ˇŒbacks
(**
°©e
)

538 ()
°©e
;

540 
	`ã°_deöô
();

541 
	`ã°_öô
();

543 
kØ_îr‹_t
 
îr‹_code
;

545 c⁄° 
uöt8_t
 
evít_fõld
 = 1;

546 c⁄° 
uöt8_t
 
ª£rved_fõld
 = 0;

547 
uöt16_t
 
evít_cou¡
 = 2;

549 c⁄° *
imp‹è¡_fqn
 = "important fqn";

550 c⁄° *
unimp‹è¡_fqn
 = "unimportant fqn";

555 c⁄° 
size_t
 
evít_d©a_size
 = 14;

556 c⁄° *
evít_d©a
 = (c⁄° *Ë
	`KAA_MALLOC
(
evít_d©a_size
);

558 
kØ_ídpoöt_id
 
sour˚
 = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0 };

560 
îr‹_code
 = 
	`kØ_evít_m™agî_add_⁄_evít_ˇŒback
(
evít_m™agî
, 
imp‹è¡_fqn
, 
•ecific_evít_cb
);

561 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

562 
îr‹_code
 = 
	`kØ_evít_m™agî_add_⁄_evít_ˇŒback
(
evít_m™agî
, 
NULL
, 
globÆ_evít_cb
);

563 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

565 
size_t
 
£rvî_sync_buf„r_size
 = 0;

567 
£rvî_sync_buf„r_size
 +(
uöt32_t
)

568 + (
uöt8_t
)

569 + (
uöt8_t
)

570 + (
uöt16_t
)

571 + 
	`evít_gë_size
(
unimp‹è¡_fqn
, 
NULL
, 0, 
sour˚
)

572 + 
	`evít_gë_size
(
imp‹è¡_fqn
, 
evít_d©a
, 
evít_d©a_size
, 
sour˚
);

574 
uöt8_t
 
£rvî_sync_buf„r
[
£rvî_sync_buf„r_size
];

575 
kØ_∂©f‹m_mesßge_wrôî_t
 *
£rvî_sync_wrôî
;

576 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôî_¸óã
(&
£rvî_sync_wrôî
, 
£rvî_sync_buf„r
, 
£rvî_sync_buf„r_size
);

577 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

579 
uöt32_t
 
£quí˚_numbî
 = 
	`KAA_HTONL
(12345);

580 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
£rvî_sync_wrôî
, &
£quí˚_numbî
, (
uöt32_t
));

581 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

582 
£quí˚_numbî
 = 
	`KAA_NTOHL
(sequence_number);

584 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
£rvî_sync_wrôî
, &
evít_fõld
, (
uöt8_t
));

585 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

587 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
£rvî_sync_wrôî
, &
ª£rved_fõld
, (
uöt8_t
));

588 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

590 
evít_cou¡
 = 
	`KAA_HTONS
(event_count);

591 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
£rvî_sync_wrôî
, &
evít_cou¡
, (
uöt16_t
));

592 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

594 
îr‹_code
 = 
	`£rülize_evít
(
£rvî_sync_wrôî
, 
unimp‹è¡_fqn
, 
NULL
, 0, 
sour˚
, 0, 
Ál£
);

595 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

597 
îr‹_code
 = 
	`£rülize_evít
(
£rvî_sync_wrôî
, 
imp‹è¡_fqn
, 
evít_d©a
, 
evít_d©a_size
, 
sour˚
, 0, 
Ál£
);

598 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

600 
kØ_∂©f‹m_mesßge_ªadî_t
 *
£rvî_sync_ªadî
;

601 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªadî_¸óã
(&
£rvî_sync_ªadî
, 
£rvî_sync_buf„r
, 
£rvî_sync_buf„r_size
);

602 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

604 
îr‹_code
 = 
	`kØ_evít_h™dÀ_£rvî_sync
(
evít_m™agî
, 
£rvî_sync_ªadî
, 0x1, 
£rvî_sync_buf„r_size
, 1);

605 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

607 
	`ASSERT_EQUAL
(
globÆ_evíts_cou¡î
, 1);

608 
	`ASSERT_EQUAL
(
•ecific_evíts_cou¡î
, 1);

610 
	`kØ_∂©f‹m_mesßge_ªadî_de°roy
(
£rvî_sync_ªadî
);

611 
	`kØ_∂©f‹m_mesßge_wrôî_de°roy
(
£rvî_sync_wrôî
);

612 
	`KAA_FREE
((*Ë
evít_d©a
);

613 
	}
}

615 
	$ã°_öô
()

617 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_log_¸óã
(&
loggî
, 
KAA_MAX_LOG_MESSAGE_LENGTH
, 
KAA_MAX_LOG_LEVEL
, 
NULL
);

618 i‡(
îr‹
 || !
loggî
) {

619  
îr‹
;

622 
kØ_c⁄ãxt
.
loggî
 =Üogger;

624 
îr‹
 = 
	`kØ_°©us_¸óã
(&
°©us
);

625 i‡(
îr‹
 || !
°©us
) {

626  
îr‹
;

629 
îr‹
 = 
	`kØ_ch™√l_m™agî_¸óã
(&
ch™√l_m™agî
, &
kØ_c⁄ãxt
);

630 i‡(
îr‹
 || !
ch™√l_m™agî
) {

631  
îr‹
;

634 
îr‹
 = 
	`kØ_evít_m™agî_¸óã
(&
evít_m™agî
, 
°©us
, 
ch™√l_m™agî
, 
loggî
);

635 i‡(
îr‹
 || !
evít_m™agî
) {

636  
îr‹
;

639 
	}
}

643 
	$ã°_deöô
()

645 
	`kØ_evít_m™agî_de°roy
(
evít_m™agî
);

646 
	`kØ_ch™√l_m™agî_de°roy
(
ch™√l_m™agî
);

647 
	`kØ_°©us_de°roy
(
°©us
);

648 
	`kØ_log_de°roy
(
loggî
);

650 
	}
}

652 
KAA_SUITE_MAIN
(
Evít
, 
ã°_öô
, 
ã°_deöô
,

653 
	$KAA_TEST_CASE
(
¸óã_evít_m™agî
, 
ã°_kØ_¸óã_evít_m™agî
)

654 
	$KAA_TEST_CASE
(
compûe_evít_ªque°
, 
ã°_kØ_evít_sync_gë_size
)

655 
	$KAA_TEST_CASE
(
evít_sync_£rülize
, 
ã°_evít_sync_£rülize
)

656 
	$KAA_TEST_CASE
(
add_⁄_evít_ˇŒback
, 
ã°_kØ_£rvî_sync_wôh_evít_ˇŒbacks
)

657 
	$KAA_TEST_CASE
(
evít_li°íîs_£rülize_ªque°
, 
ã°_kØ_evít_li°íîs_£rülize_ªque°
)

658 
	$KAA_TEST_CASE
(
evít_li°íîs_h™dÀ_sync
, 
ã°_kØ_evít_li°íîs_h™dÀ_sync
)

659 
	`KAA_TEST_CASE
(
evít_ã°_blocks
, 
ã°_evít_blocks
))

	@/var/www/html/debian/gateway/kaa/src/extensions/logging/kaa_logging.c

17 
	~"kØ_loggög_¥iv©e.h
"

18 
	~"kØ_loggög.h
"

20 
	~"kØ_¥iv©e.h
"

22 
	~<°rög.h
>

23 
	~<öây≥s.h
>

24 
	~<sys/ty≥s.h
>

25 
	~"∂©f‹m/°dio.h
"

26 
	~"∂©f‹m/sock.h
"

27 
	~"∂©f‹m/time.h
"

28 
	~"∂©f‹m/ext_sha.h
"

29 
	~"cﬁÀ˘i⁄s/kØ_li°.h
"

30 
	~"kØ_comm⁄.h
"

31 
	~"kØ_°©us.h
"

32 
	~"kØ_ch™√l_m™agî.h
"

33 
	~"kØ_∂©f‹m_utûs.h
"

34 
	~"kØ_∂©f‹m_comm⁄.h
"

35 
	~"utûôõs/kØ_mem.h
"

36 
	~"utûôõs/kØ_log.h
"

37 
	~"avro_§c/avro/io.h
"

39 
	#KAA_LOGGING_RECEIVE_UPDATES_FLAG
 0x01

	)

40 
	#KAA_MAX_PADDING_LENGTH
 (
KAA_ALIGNMENT
 - 1)

	)

43 
	mLOGGING_RESULT_SUCCESS
 = 0x00,

44 
	mLOGGING_RESULT_FAILURE
 = 0x01

45 } 
	tloggög_sync_ªsu…_t
;

51 
kØ_time_t
 
	mdódlöe
;

52 
uöt16_t
 
	mlog_buckë_id
;

53 
uöt16_t
 
	mlog_cou¡
;

54 } 
	ttimeout_öfo_t
;

57 
size_t
 
	msize
;

58 
size_t
 
	mlog_cou¡
;

59 
uöt16_t
 
	mid
;

60 } 
	tœ°_buckë_öfo_t
;

62 
	skØ_log_cﬁÀ˘‹_t
 {

63 
kØ_log_buckë_c⁄°øöts_t
 
	mbuckë_size
;

64 *
	mlog_°‹age_c⁄ãxt
;

65 *
	mlog_u∂ﬂd_°øãgy_c⁄ãxt
;

66 
kØ_°©us_t
 *
	m°©us
;

67 
kØ_ch™√l_m™agî_t
 *
	mch™√l_m™agî
;

68 
kØ_loggî_t
 *
	mloggî
;

69 
kØ_li°_t
 *
	mtimeouts
;

70 
kØ_log_dñivîy_li°íî_t
 
	mlog_dñivîy_li°íîs
;

71 
boﬁ
 
	mis_sync_ign‹ed
;

72 
uöt32_t
 
	mlog_œ°_id
;

73 
uöt16_t
 
	mlog_buckë_id
;

74 
œ°_buckë_öfo_t
 
	mœ°_buckë
;

77 c⁄° 
kØ_exãnsi⁄_id
 
	gloggög_sync_£rvi˚s
[] = {
KAA_EXTENSION_LOGGING
};

79 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_loggög_öô
(
kØ_c⁄ãxt_t
 *
kØ_c⁄ãxt
, **
c⁄ãxt
)

81 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_log_cﬁÀ˘‹_¸óã
(&
kØ_c⁄ãxt
->
log_cﬁÀ˘‹
,

82 
kØ_c⁄ãxt
->
°©us
->
°©us_ö°™˚
,

83 
kØ_c⁄ãxt
->
ch™√l_m™agî
, kØ_c⁄ãxt->
loggî
);

84 *
c⁄ãxt
 = 
kØ_c⁄ãxt
->
log_cﬁÀ˘‹
;

85  
îr‹
;

86 
	}
}

88 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_loggög_deöô
(*
c⁄ãxt
)

90 
	`kØ_log_cﬁÀ˘‹_de°roy
(
c⁄ãxt
);

91  
KAA_ERR_NONE
;

92 
	}
}

94 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_loggög_ªque°_gë_size
(*
c⁄ãxt
, 
size_t
 *
ex≥˘ed_size
)

96  
	`kØ_loggög_ªque°_gë_size
(
c⁄ãxt
, 
ex≥˘ed_size
);

97 
	}
}

99 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_loggög_ªque°_£rülize
(*
c⁄ãxt
, 
uöt32_t
 
ªque°_id
,

100 
uöt8_t
 *
buf„r
, 
size_t
 *
size
, 
boﬁ
 *
√ed_ªsync
)

102 ()
ªque°_id
;

105 i‡(!
c⁄ãxt
 || !
size
 || !
√ed_ªsync
) {

106  
KAA_ERR_BADPARAM
;

109 
kØ_îr‹_t
 
îr‹
;

111 
size_t
 
size_√eded
;

112 
îr‹
 = 
	`kØ_loggög_ªque°_gë_size
(
c⁄ãxt
, &
size_√eded
);

113 i‡(
îr‹
) {

114  
îr‹
;

117 *
√ed_ªsync
 = 
Ál£
;

118 
îr‹
 = 
	`kØ_loggög_√ed_loggög_ªsync
(
c⁄ãxt
, 
√ed_ªsync
);

119 i‡(
îr‹
) {

120  
îr‹
;

123 i‡(!*
√ed_ªsync
) {

124 *
size
 = 0;

125  
KAA_ERR_NONE
;

128 i‡(!
buf„r
 || *
size
 < 
size_√eded
) {

129 *
size
 = 
size_√eded
;

130  
KAA_ERR_BUFFER_IS_NOT_ENOUGH
;

133 *
size
 = 
size_√eded
;

135 
kØ_∂©f‹m_mesßge_wrôî_t
 
wrôî
 = 
	`KAA_MESSAGE_WRITER
(
buf„r
, *
size
);

136 
îr‹
 = 
	`kØ_loggög_ªque°_£rülize
(
c⁄ãxt
, &
wrôî
);

137 i‡(
îr‹
) {

138  
îr‹
;

141 *
size
 = 
wrôî
.
cuºít
 - 
buf„r
;

142  
KAA_ERR_NONE
;

143 
	}
}

145 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_loggög_£rvî_sync
(*
c⁄ãxt
, 
uöt32_t
 
ªque°_id
,

146 
uöt16_t
 
exãnsi⁄_›ti⁄s
, c⁄° 
uöt8_t
 *
buf„r
, 
size_t
 
size
)

148 ()
ªque°_id
;

151 i‡(!
c⁄ãxt
 || !
buf„r
) {

152  
KAA_ERR_BADPARAM
;

155 
kØ_∂©f‹m_mesßge_ªadî_t
 
ªadî
 = 
	`KAA_MESSAGE_READER
(
buf„r
, 
size
);

156  
	`kØ_loggög_h™dÀ_£rvî_sync
(
c⁄ãxt
, &
ªadî
, 
exãnsi⁄_›ti⁄s
, 
size
);

157 
	}
}

159 
kØ_îr‹_t
 
	$kØ_loggög_√ed_loggög_ªsync
(
kØ_log_cﬁÀ˘‹_t
 *
£lf
, 
boﬁ
 *
ªsu…
)

162 i‡(!
£lf
 || !
ªsu…
) {

163  
KAA_ERR_BADPARAM
;

166 i‡(
£lf
->
is_sync_ign‹ed
) {

167 *
ªsu…
 = 
Ál£
;

168  
KAA_ERR_NONE
;

171 *
ªsu…
 = 
åue
;

172  
KAA_ERR_NONE
;

173 
	}
}

175 
kØ_îr‹_t
 
	$ªmembî_ªque°
(
kØ_log_cﬁÀ˘‹_t
 *
£lf
, 
uöt16_t
 
buckë_id
, uöt16_à
cou¡
)

178 i‡(!
£lf
) {

179  
KAA_ERR_BADPARAM
;

182 
timeout_öfo_t
 *
öfo
 = 
	`KAA_MALLOC
((*info));

183 i‡(!
öfo
) {

184  
KAA_ERR_NOMEM
;

187 
öfo
->
log_buckë_id
 = 
buckë_id
;

188 
öfo
->
dódlöe
 = 
	`KAA_TIME
(Ë+ (
kØ_time_t
)
	`ext_log_u∂ﬂd_°øãgy_gë_timeout
(
£lf
->
log_u∂ﬂd_°øãgy_c⁄ãxt
);

189 
öfo
->
log_cou¡
 = 
cou¡
;

191 
kØ_li°_node_t
 *
ô
 = 
	`kØ_li°_push_back
(
£lf
->
timeouts
, 
öfo
);

192 i‡(!
ô
) {

193 
	`KAA_FREE
(
öfo
);

194  
KAA_ERR_NOMEM
;

197  
KAA_ERR_NONE
;

198 
	}
}

200 
boﬁ
 
	$föd_by_buckë_id
(*
d©a
, *
c⁄ãxt
)

203 i‡(!
d©a
 || !
c⁄ãxt
) {

204  
Ál£
;

207 
uöt16_t
 
buckë_id
 = *(uöt16_à*Ë
c⁄ãxt
;

208 
timeout_öfo_t
 *
timeout_öfo
 = 
d©a
;

210 i‡(
timeout_öfo
->
log_buckë_id
 =
buckë_id
) {

211  
åue
;

214  
Ál£
;

215 
	}
}

219 
size_t
 
	$ªmove_ªque°
(
kØ_log_cﬁÀ˘‹_t
 *
£lf
, 
uöt16_t
 
buckë_id
)

221 
kØ_li°_node_t
 *
node
;

222 
timeout_öfo_t
 *
öfo
;

223 
size_t
 
logs_£¡
 = 0;

225 
node
 = 
	`kØ_li°_föd_√xt
(
	`kØ_li°_begö
(
£lf
->
timeouts
), 
föd_by_buckë_id
, &
buckë_id
);

227 i‡(
node
) {

228 
öfo
 = 
	`kØ_li°_gë_d©a
(
node
);

230 i‡(
öfo
) {

231 
logs_£¡
 = 
öfo
->
log_cou¡
;

234 
	`kØ_li°_ªmove_©
(
£lf
->
timeouts
, 
node
, 
NULL
);

237  
logs_£¡
;

238 
	}
}

241 
	$h™dÀ_timeout
(
kØ_log_cﬁÀ˘‹_t
 *
£lf
)

244 i‡(!
£lf
 || !£lf->
timeouts
) {

248 
kØ_îr‹_t
 
îr
 = 
	`ext_log_u∂ﬂd_°øãgy_⁄_timeout
(
£lf
->
log_u∂ﬂd_°øãgy_c⁄ãxt
);

250 
boﬁ
 
expúe_evîy_íåy
 = (
îr
 =
KAA_ERR_EVENT_NOT_ATTACHED
);

252 i‡(
expúe_evîy_íåy
) {

256 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "AccessÖoint has been switched. All bucketsáreÉxpired.");

259 
kØ_li°_node_t
 *
ô
 = 
	`kØ_li°_begö
(
£lf
->
timeouts
); it; ià
	`kØ_li°_√xt
(it)) {

260 
timeout_öfo_t
 *
öfo
 = 
	`kØ_li°_gë_d©a
(
ô
);

262 i‡(
expúe_evîy_íåy
 || !
öfo
->
dódlöe
) {

263 
	`ext_log_°‹age_unm¨k_by_buckë_id
(
£lf
->
log_°‹age_c⁄ãxt
, 
öfo
->
log_buckë_id
);

264 i‡(
£lf
->
log_dñivîy_li°íîs
.
⁄_timeout
) {

265 
kØ_log_buckë_öfo_t
 
log_buckë_öfo
 = {

266 .
buckë_id
 = 
öfo
->
log_buckë_id
,

267 .
log_cou¡
 = 
öfo
->log_count,

270 
£lf
->
log_dñivîy_li°íîs
.
	`⁄_timeout
(£lf->log_dñivîy_li°íîs.
˘x
,

271 &
log_buckë_öfo
);

276 
	`kØ_li°_˛ór
(
£lf
->
timeouts
, 
NULL
);

277 
	}
}

279 
boﬁ
 
	$is_timeout
(
kØ_log_cﬁÀ˘‹_t
 *
£lf
)

281 
kØ_time_t
 
now
 = 
	`KAA_TIME
();

282 
boﬁ
 
timeout_occur
 = 
Ál£
;

284 
kØ_li°_node_t
 *
ô
 = 
	`kØ_li°_begö
(
£lf
->
timeouts
); it; ià
	`kØ_li°_√xt
(it)) {

285 
timeout_öfo_t
 *
öfo
 = 
	`kØ_li°_gë_d©a
(
ô
);

286 i‡(
now
 >
öfo
->
dódlöe
) {

287 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
KAA_ERR_TIMEOUT
,

288 "Log dñivîyÅimeouàoccuºed (buckë_id %u)", 
öfo
->
log_buckë_id
);

289 
timeout_occur
 = 
åue
;

291 
öfo
->
dódlöe
 = 0;

295  
timeout_occur
;

296 
	}
}

298 
boﬁ
 
	$is_u∂ﬂd_Ælowed
(
kØ_log_cﬁÀ˘‹_t
 *
£lf
)

300 
size_t
 
≥ndögCou¡
 = 
	`kØ_li°_gë_size
(
£lf
->
timeouts
);

301 
size_t
 
ÆlowedCou¡
 = 
	`ext_log_u∂ﬂd_°øãgy_gë_max_∑øŒñ_u∂ﬂds
(
£lf
->
log_u∂ﬂd_°øãgy_c⁄ãxt
);

303 i‡(
≥ndögCou¡
 >
ÆlowedCou¡
) {

304 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "IgnoreÜog upload:Åoo muchÖendingÑequests %zu, maxállowed %zu",

305 
≥ndögCou¡
, 
ÆlowedCou¡
);

306  
Ál£
;

309  
åue
;

310 
	}
}

313 
	$kØ_log_cﬁÀ˘‹_de°roy
(
kØ_log_cﬁÀ˘‹_t
 *
£lf
)

316 i‡(!
£lf
) {

320 
	`ext_log_u∂ﬂd_°øãgy_de°roy
(
£lf
->
log_u∂ﬂd_°øãgy_c⁄ãxt
);

321 
	`ext_log_°‹age_de°roy
(
£lf
->
log_°‹age_c⁄ãxt
);

322 
	`kØ_li°_de°roy
(
£lf
->
timeouts
, 
NULL
);

323 
	`KAA_FREE
(
£lf
);

324 
	}
}

327 
kØ_îr‹_t
 
	$kØ_log_cﬁÀ˘‹_¸óã
(
kØ_log_cﬁÀ˘‹_t
 **
log_cﬁÀ˘‹_p
,

328 
kØ_°©us_t
 *
°©us
, 
kØ_ch™√l_m™agî_t
 *
ch™√l_m™agî
, 
kØ_loggî_t
 *
loggî
)

331 i‡(!
log_cﬁÀ˘‹_p
) {

332  
KAA_ERR_BADPARAM
;

335 
kØ_log_cﬁÀ˘‹_t
 *
cﬁÀ˘‹
 = 
	`KAA_MALLOC
((*collector));

336 i‡(!
cﬁÀ˘‹
) {

337  
KAA_ERR_NOMEM
;

340 
cﬁÀ˘‹
->
log_buckë_id
 = 0;

341 
cﬁÀ˘‹
->
log_œ°_id
 = 0;

342 
cﬁÀ˘‹
->
log_°‹age_c⁄ãxt
 = 
NULL
;

343 
cﬁÀ˘‹
->
log_u∂ﬂd_°øãgy_c⁄ãxt
 = 
NULL
;

344 
cﬁÀ˘‹
->
°©us
 = status;

345 
cﬁÀ˘‹
->
ch™√l_m™agî
 = channel_manager;

346 
cﬁÀ˘‹
->
loggî
 =Üogger;

347 
cﬁÀ˘‹
->
is_sync_ign‹ed
 = 
Ál£
;

348 
cﬁÀ˘‹
->
œ°_buckë
.
log_cou¡
 = 0;

349 
cﬁÀ˘‹
->
œ°_buckë
.
size
 = 0;

350 
cﬁÀ˘‹
->
œ°_buckë
.
id
 = 1;

353 
cﬁÀ˘‹
->
buckë_size
.
max_buckë_log_cou¡
 = 0;

354 
cﬁÀ˘‹
->
buckë_size
.
max_buckë_size
 = 0;

356 
cﬁÀ˘‹
->
timeouts
 = 
	`kØ_li°_¸óã
();

357 i‡(!
cﬁÀ˘‹
->
timeouts
) {

358 
	`KAA_FREE
(
cﬁÀ˘‹
);

359  
KAA_ERR_NOMEM
;

362 *
log_cﬁÀ˘‹_p
 = 
cﬁÀ˘‹
;

363  
KAA_ERR_NONE
;

364 
	}
}

366 
kØ_îr‹_t
 
	$kØ_loggög_öô
(
kØ_log_cﬁÀ˘‹_t
 *
£lf
, *
log_°‹age_c⁄ãxt
,

367 *
log_u∂ﬂd_°øãgy_c⁄ãxt
, c⁄° 
kØ_log_buckë_c⁄°øöts_t
 *
buckë_sizes
)

370 i‡(!
£lf
 || !
log_°‹age_c⁄ãxt
 || !
log_u∂ﬂd_°øãgy_c⁄ãxt
) {

371  
KAA_ERR_BADPARAM
;

374 
	`ext_log_°‹age_de°roy
(
£lf
->
log_°‹age_c⁄ãxt
);

375 
	`ext_log_u∂ﬂd_°øãgy_de°roy
(
£lf
->
log_u∂ﬂd_°øãgy_c⁄ãxt
);

377 
£lf
->
log_°‹age_c⁄ãxt
 =Üog_storage_context;

378 
£lf
->
log_u∂ﬂd_°øãgy_c⁄ãxt
 =Üog_upload_strategy_context;

379 
£lf
->
log_dñivîy_li°íîs
 = 
KAA_LOG_EMPTY_LISTENERS
;

380 
£lf
->
buckë_size
 = *
buckë_sizes
;

382 
	`KAA_LOG_DEBUG
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "InitializedÜog collector withÜog storage {%p},Üog upload strategy {%p}"

383 , 
log_°‹age_c⁄ãxt
, 
log_u∂ﬂd_°øãgy_c⁄ãxt
);

385  
KAA_ERR_NONE
;

386 
	}
}

388 
kØ_îr‹_t
 
	$kØ_loggög_£t_°øãgy
(
kØ_log_cﬁÀ˘‹_t
 *
£lf
, *
log_u∂ﬂd_°øãgy_c⁄ãxt
)

391 i‡(!
£lf
 || !
log_u∂ﬂd_°øãgy_c⁄ãxt
) {

392  
KAA_ERR_BADPARAM
;

395 i‡(
£lf
->
log_u∂ﬂd_°øãgy_c⁄ãxt
) {

396 
	`ext_log_u∂ﬂd_°øãgy_de°roy
(
£lf
->
log_u∂ﬂd_°øãgy_c⁄ãxt
);

399 
£lf
->
log_u∂ﬂd_°øãgy_c⁄ãxt
 =Üog_upload_strategy_context;

401  
KAA_ERR_NONE
;

402 
	}
}

404 
kØ_îr‹_t
 
	$kØ_loggög_£t_°‹age
(
kØ_log_cﬁÀ˘‹_t
 *
£lf
, *
log_°‹age_c⁄ãxt
)

407 i‡(!
£lf
 || !
log_°‹age_c⁄ãxt
) {

408  
KAA_ERR_BADPARAM
;

411 i‡(
£lf
->
log_°‹age_c⁄ãxt
) {

412 
	`ext_log_°‹age_de°roy
(
£lf
->
log_°‹age_c⁄ãxt
);

415 
£lf
->
log_°‹age_c⁄ãxt
 =Üog_storage_context;

417  
KAA_ERR_NONE
;

418 
	}
}

420 
	$do_sync
(
kØ_log_cﬁÀ˘‹_t
 *
£lf
)

423 i‡(!
£lf
) {

427 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "InitiatingÜog upload...");

428 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√l
 =

429 
	`kØ_ch™√l_m™agî_gë_å™•‹t_ch™√l
(
£lf
->
ch™√l_m™agî
, 
loggög_sync_£rvi˚s
[0]);

430 i‡(
ch™√l
) {

431 
ch™√l
->
	`sync_h™dÀr
(ch™√l->
c⁄ãxt
, 
loggög_sync_£rvi˚s
, 1);

433 
	}
}

435 
	$upd©e_°‹age
(
kØ_log_cﬁÀ˘‹_t
 *
£lf
)

438 i‡(!
£lf
) {

442 
	`ext_log_u∂ﬂd_°øãgy_decide
(
£lf
->
log_u∂ﬂd_°øãgy_c⁄ãxt
, sñf->
log_°‹age_c⁄ãxt
)) {

443 
UPLOAD
:

444 i‡(
	`is_u∂ﬂd_Ælowed
(
£lf
)) {

445 
	`do_sync
(
£lf
);

449 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Upload willÇot beÅriggeredÇow.");

452 
	}
}

455 
boﬁ
 
	$no_m‹e_•a˚_ö_buckë
(
kØ_log_cﬁÀ˘‹_t
 *
£lf
, 
kØ_log_ªc‹d_t
 *
√w_ªc‹d
)

457 i‡(
£lf
->
œ°_buckë
.
log_cou¡
 + 1 > sñf->
buckë_size
.
max_buckë_log_cou¡


458 || 
£lf
->
œ°_buckë
.
size
 + 
√w_ªc‹d
->sizê> sñf->
buckë_size
.
max_buckë_size
) {

459  
åue
;

462  
Ál£
;

463 
	}
}

466 
boﬁ
 
	$œ°_buckë
(
kØ_log_cﬁÀ˘‹_t
 *
£lf
, 
uöt16_t
 
buckë
)

468  
£lf
->
œ°_buckë
.
id
 =
buckë
;

469 
	}
}

472 
	$f‹m_√w_buckë
(
kØ_log_cﬁÀ˘‹_t
 *
£lf
)

474 
£lf
->
œ°_buckë
.
id
++;

476 i‡(!
£lf
->
œ°_buckë
.
id
) {

477 
£lf
->
œ°_buckë
.
id
++;

480 
£lf
->
œ°_buckë
.
log_cou¡
 = 0;

481 
£lf
->
œ°_buckë
.
size
 = 0;

482 
	}
}

485 
	$∂a˚_ªc‹d_ö_cuºít_buckë
(
kØ_log_cﬁÀ˘‹_t
 *
£lf
, 
kØ_log_ªc‹d_t
 *
√w_ªc‹d
)

487 
√w_ªc‹d
->
buckë_id
 = 
£lf
->
œ°_buckë
.
id
;

488 
£lf
->
œ°_buckë
.
log_cou¡
++;

489 
£lf
->
œ°_buckë
.
size
 +
√w_ªc‹d
->size;

490 
	}
}

493 
	$∂a˚_ªc‹d_ö_√xt_buckë
(
kØ_log_cﬁÀ˘‹_t
 *
£lf
, 
kØ_log_ªc‹d_t
 *
√w_ªc‹d
)

495 
	`f‹m_√w_buckë
(
£lf
);

496 
	`∂a˚_ªc‹d_ö_cuºít_buckë
(
£lf
, 
√w_ªc‹d
);

497 
	}
}

499 
kØ_îr‹_t
 
	$kØ_loggög_add_ªc‹d
(
kØ_log_cﬁÀ˘‹_t
 *
£lf
, 
kØ_u£r_log_ªc‹d_t
 *
íåy
, 
kØ_log_ªc‹d_öfo_t
 *
log_öfo
)

502 i‡(!
£lf
 || !
íåy
) {

503  
KAA_ERR_BADPARAM
;

507 i‡(!
£lf
->
log_°‹age_c⁄ãxt
) {

508  
KAA_ERR_NOT_INITIALIZED
;

512 
kØ_log_ªc‹d_t
 
ªc‹d
 = {

513 .
d©a
 = 
NULL
,

514 .
size
 = 
íåy
->
	`gë_size
(entry),

515 .
buckë_id
 = 0,

518 i‡(!
ªc‹d
.
size
) {

519 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
KAA_ERR_BADDATA
,

522  
KAA_ERR_BADDATA
;

525 
boﬁ
 
√xt_buckë_ªquúed
 = 
	`no_m‹e_•a˚_ö_buckë
(
£lf
, &
ªc‹d
);

528 
œ°_buckë_öfo_t
 
ÁŒback
 = 
£lf
->
œ°_buckë
;

531 i‡(
√xt_buckë_ªquúed
) {

532 
	`∂a˚_ªc‹d_ö_√xt_buckë
(
£lf
, &
ªc‹d
);

534 
	`∂a˚_ªc‹d_ö_cuºít_buckë
(
£lf
, &
ªc‹d
);

537 
kØ_îr‹_t
 
îr‹
 = 
	`ext_log_°‹age_Æloˇã_log_ªc‹d_buf„r
(
£lf
->
log_°‹age_c⁄ãxt
,

538 &
ªc‹d
);

539 i‡(
îr‹
) {

540 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹
,

542 
îr_buf„r
;

545 
avro_wrôî_t
 
wrôî
 = 
	`avro_wrôî_mem‹y
((*)
ªc‹d
.
d©a
,Ñec‹d.
size
);

546 i‡(!
wrôî
) {

547 
îr‹
 = 
KAA_ERR_NOMEM
;

548 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹
,

550 
	`ext_log_°‹age_dóŒoˇã_log_ªc‹d_buf„r
(
£lf
->
log_°‹age_c⁄ãxt
, &
ªc‹d
);

551 
îr_avro
;

554 
íåy
->
	`£rülize
(
wrôî
,Éntry);

555 
	`avro_wrôî_‰ì
(
wrôî
);

557 
îr‹
 = 
	`ext_log_°‹age_add_log_ªc‹d
(
£lf
->
log_°‹age_c⁄ãxt
, &
ªc‹d
);

558 i‡(
îr‹
) {

559 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹
, "FailedÅoáddÜogÑecordÅo storage");

560 
	`ext_log_°‹age_dóŒoˇã_log_ªc‹d_buf„r
(
£lf
->
log_°‹age_c⁄ãxt
, &
ªc‹d
);

561 
îr_add
;

564 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "AddedÜogÑecord, size %zu, bucket %u",

565 
ªc‹d
.
size
,

566 
ªc‹d
.
buckë_id
);

568 i‡(
	`is_timeout
(
£lf
)) {

569 
	`h™dÀ_timeout
(
£lf
);

571 
	`upd©e_°‹age
(
£lf
);

574 i‡(
log_öfo
) {

575 
log_öfo
->
buckë_id
 = 
£lf
->
œ°_buckë
.
id
;

576 
log_öfo
->
log_id
 = 
£lf
->
log_œ°_id
++;

579  
KAA_ERR_NONE
;

581 
îr_add
:

582 
îr_avro
:

583 
	`ext_log_°‹age_dóŒoˇã_log_ªc‹d_buf„r
(
£lf
->
log_°‹age_c⁄ãxt
, &
ªc‹d
);

584 
îr_buf„r
:

585 
£lf
->
œ°_buckë
 = 
ÁŒback
;

586  
îr‹
;

587 
	}
}

589 
kØ_îr‹_t
 
	$kØ_loggög_£t_li°íîs
(
kØ_log_cﬁÀ˘‹_t
 *
£lf
, c⁄° 
kØ_log_dñivîy_li°íî_t
 *
li°íîs
)

592 i‡(!
£lf
 || !
li°íîs
) {

593  
KAA_ERR_BADPARAM
;

596 
£lf
->
log_dñivîy_li°íîs
 = *
li°íîs
;

597  
KAA_ERR_NONE
;

598 
	}
}

600 
kØ_îr‹_t
 
	$kØ_loggög_ªque°_gë_size
(
kØ_log_cﬁÀ˘‹_t
 *
£lf
, 
size_t
 *
ex≥˘ed_size
)

603 i‡(!
£lf
 || !
ex≥˘ed_size
) {

604  
KAA_ERR_BADPARAM
;

608 i‡(!
£lf
->
log_°‹age_c⁄ãxt
) {

609  
KAA_ERR_NOT_INITIALIZED
;

612 *
ex≥˘ed_size
 = 0;

614 i‡(!
	`is_u∂ﬂd_Ælowed
(
£lf
)) {

615 
£lf
->
is_sync_ign‹ed
 = 
åue
;

616  
KAA_ERR_NONE
;

619 
size_t
 
ªc‹ds_cou¡
 = 
	`ext_log_°‹age_gë_ªc‹ds_cou¡
(
£lf
->
log_°‹age_c⁄ãxt
);

620 
size_t
 
tŸÆ_size
 = 
	`ext_log_°‹age_gë_tŸÆ_size
(
£lf
->
log_°‹age_c⁄ãxt
);

622 
£lf
->
is_sync_ign‹ed
 = (!
ªc‹ds_cou¡
 || !
tŸÆ_size
);

624 i‡(!
£lf
->
is_sync_ign‹ed
) {

625 *
ex≥˘ed_size
 = 
KAA_EXTENSION_HEADER_SIZE
;

626 *
ex≥˘ed_size
 +(
uöt32_t
);

628 
size_t
 
a˘uÆ_size
 = 
ªc‹ds_cou¡
 * (
uöt32_t
Ë+Ñec‹ds_cou¡ * 
KAA_MAX_PADDING_LENGTH
 + 
tŸÆ_size
;

629 
size_t
 
buckë_size
 = 
£lf
->buckë_size.
max_buckë_size
;

631 *
ex≥˘ed_size
 +((
a˘uÆ_size
 > 
buckë_size
) ? bucket_size :áctual_size);

634  
KAA_ERR_NONE
;

635 
	}
}

639 
kØ_îr‹_t
 
	$kØ_loggög_ªque°_£rülize
(
kØ_log_cﬁÀ˘‹_t
 *
£lf
, 
kØ_∂©f‹m_mesßge_wrôî_t
 *
wrôî
)

642 i‡(!
£lf
 || !
wrôî
) {

643  
KAA_ERR_BADPARAM
;

647 i‡(!
£lf
->
log_°‹age_c⁄ãxt
) {

648  
KAA_ERR_NOT_INITIALIZED
;

651 i‡(
£lf
->
is_sync_ign‹ed
) {

652  
KAA_ERR_NONE
;

655 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "GoingÅo serialize clientÜogging sync");

657 
kØ_∂©f‹m_mesßge_wrôî_t
 
tmp_wrôî
 = *
wrôî
;

659 
uöt8_t
 *
exãnsi⁄_size_p
 = 
tmp_wrôî
.
cuºít
 + (
uöt32_t
);

660 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_∂©f‹m_mesßge_wrôe_exãnsi⁄_hódî
(&
tmp_wrôî
,

661 
KAA_EXTENSION_LOGGING
,

662 
KAA_LOGGING_RECEIVE_UPDATES_FLAG
,

664 i‡(
îr‹
) {

665 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹
, "FailedÅo writeÜogÉxtension header");

666  
KAA_ERR_WRITE_FAILED
;

669 
uöt8_t
 *
buckë_id_p
 = 
tmp_wrôî
.
cuºít
;

670 
tmp_wrôî
.
cuºít
 +(
uöt16_t
);

671 
uöt8_t
 *
ªc‹ds_cou¡_p
 = 
tmp_wrôî
.
cuºít
;

672 
tmp_wrôî
.
cuºít
 +(
uöt16_t
);

674 
uöt16_t
 
buckë_id
;

675 
uöt16_t
 
fú°_buckë
 = 0;

679 
size_t
 
buckë_size
 = 
£lf
->buckë_size.
max_buckë_size
;

680 
size_t
 
max_log_cou¡
 = 
£lf
->
buckë_size
.
max_buckë_log_cou¡
;

681 
size_t
 
a˘uÆ_size
 = (
tmp_wrôî
.
íd
 -Åmp_wrôî.
cuºít
);

683 
buckë_size
 = (
a˘uÆ_size
 > bucket_size ? bucket_size :áctual_size);

685 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
,

686 "Exåa˘ögÜogÑec‹ds... (buckë sizê%zu)", 
buckë_size
);

688 
uöt16_t
 
ªc‹ds_cou¡
 = 0;

690 !
îr‹
 && 
buckë_size
 > (
uöt32_t
Ë&& 
ªc‹ds_cou¡
 < 
max_log_cou¡
) {

691 
size_t
 
ªc‹d_Àn
 = 0;

692 
îr‹
 = 
	`ext_log_°‹age_wrôe_√xt_ªc‹d
(
£lf
->
log_°‹age_c⁄ãxt
,

693 (*)
tmp_wrôî
.
cuºít
 + (
uöt32_t
),

694 
buckë_size
 - (
uöt32_t
),

695 &
buckë_id
,

696 &
ªc‹d_Àn
);

698 
îr‹
) {

699 
KAA_ERR_NONE
:

700 i‡(
fú°_buckë
 == 0) {

701 
fú°_buckë
 = 
buckë_id
;

702 } i‡(
buckë_id
 !
fú°_buckë
) {

704 
	`ext_log_°‹age_unm¨k_by_buckë_id
(
£lf
->
log_°‹age_c⁄ãxt
, 
buckë_id
);

708 ++
ªc‹ds_cou¡
;

709 *((
uöt32_t
 *Ë
tmp_wrôî
.
cuºít
Ë
	`KAA_HTONL
(
ªc‹d_Àn
);

710 
tmp_wrôî
.
cuºít
 +((
uöt32_t
Ë+ 
ªc‹d_Àn
);

711 
	`kØ_∂©f‹m_mesßge_wrôe_Æignmít
(&
tmp_wrôî
);

712 
buckë_size
 -
	`kØ_Æig√d_size_gë
(
ªc‹d_Àn
Ë+ (
uöt32_t
);

714 
KAA_ERR_NOT_FOUND
:

715 
KAA_ERR_INSUFFICIENT_BUFFER
:

717 i‡(!
ªc‹ds_cou¡
) {

718 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹
, "FailedÅo writeÅheÜogÑecord");

719  
îr‹
;

723 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹
, "FailedÅo writeÅheÜogÑecord");

724  
îr‹
;

728 *((
uöt16_t
 *Ë
buckë_id_p
Ë
	`KAA_HTONS
(
fú°_buckë
);

730 
size_t
 
∑ylﬂd_size
 = 
tmp_wrôî
.
cuºít
 - 
wrôî
->cuºíà- 
KAA_EXTENSION_HEADER_SIZE
;

731 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
,

733 
fú°_buckë
, 
ªc‹ds_cou¡
, 
∑ylﬂd_size
);

735 *((
uöt32_t
 *Ë
exãnsi⁄_size_p
Ë
	`KAA_HTONL
(
∑ylﬂd_size
);

736 *((
uöt16_t
 *Ë
ªc‹ds_cou¡_p
Ë
	`KAA_HTONS
(
ªc‹ds_cou¡
);

737 *
wrôî
 = 
tmp_wrôî
;

739 
îr‹
 = 
	`ªmembî_ªque°
(
£lf
, 
fú°_buckë
, 
ªc‹ds_cou¡
);

740 i‡(
îr‹
) {

741 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹
, "FailedÅoÑememberÑequestÅime stamp");

745 i‡(
	`œ°_buckë
(
£lf
, 
fú°_buckë
)) {

746 
	`f‹m_√w_buckë
(
£lf
);

749  
KAA_ERR_NONE
;

750 
	}
}

752 
kØ_îr‹_t
 
	$kØ_loggög_h™dÀ_£rvî_sync
(
kØ_log_cﬁÀ˘‹_t
 *
£lf
,

753 
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî
, 
uöt16_t
 
exãnsi⁄_›ti⁄s
, 
size_t
 
exãnsi⁄_Àngth
)

756 ()
exãnsi⁄_›ti⁄s
;

757 ()
exãnsi⁄_Àngth
;

760 i‡(!
£lf
 || !
ªadî
) {

761  
KAA_ERR_BADPARAM
;

764 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Re˚ivedÜoggög sîvî sync: o±i⁄†0,Öaylﬂd sizê%u", 
exãnsi⁄_Àngth
);

766 
uöt32_t
 
dñivîy_°©us_cou¡
;

767 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªad
(
ªadî
, &
dñivîy_°©us_cou¡
, (
uöt32_t
));

768 i‡(
îr‹_code
) {

769  
îr‹_code
;

772 
dñivîy_°©us_cou¡
 = 
	`KAA_NTOHL
(delivery_status_count);

774 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Re˚ived %luÜog dñivîy sètu£s", 
dñivîy_°©us_cou¡
);

776 
uöt16_t
 
buckë_id
;

777 
öt8_t
 
dñivîy_ªsu…
;

778 
öt8_t
 
dñivîy_îr‹_code
;

780 
uöt32_t
 
i
 = 0; i < 
dñivîy_°©us_cou¡
; ++i) {

781 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªad
(
ªadî
, &
buckë_id
, (
uöt16_t
));

782 i‡(
îr‹_code
) {

783  
îr‹_code
;

786 
buckë_id
 = 
	`KAA_NTOHS
(bucket_id);

788 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªad
(
ªadî
, &
dñivîy_ªsu…
, (
öt8_t
));

789 i‡(
îr‹_code
) {

790  
îr‹_code
;

793 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªad
(
ªadî
, &
dñivîy_îr‹_code
, (
öt8_t
));

794 i‡(
îr‹_code
) {

795  
îr‹_code
;

798 i‡(
dñivîy_ªsu…
 =
LOGGING_RESULT_SUCCESS
) {

799 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Log buckë u∂ﬂded suc˚ssfuŒy, id '%u'", 
buckë_id
);

801 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
KAA_ERR_WRITE_FAILED
,

803 
buckë_id
, 
dñivîy_îr‹_code
);

806 
size_t
 
u∂ﬂded_cou¡
 = 
	`ªmove_ªque°
(
£lf
, 
buckë_id
);

808 
kØ_log_buckë_öfo_t
 
log_buckë_öfo
 = {

809 .
log_cou¡
 = 
u∂ﬂded_cou¡
,

810 .
buckë_id
 = bucket_id,

813 i‡(
dñivîy_ªsu…
 =
LOGGING_RESULT_SUCCESS
) {

814 i‡(
£lf
->
log_dñivîy_li°íîs
.
⁄_suc˚ss
) {

815 
£lf
->
log_dñivîy_li°íîs
.
	`⁄_suc˚ss
(£lf->log_dñivîy_li°íîs.
˘x
,

816 &
log_buckë_öfo
);

818 
	`ext_log_°‹age_ªmove_by_buckë_id
(
£lf
->
log_°‹age_c⁄ãxt
, 
buckë_id
);

820 i‡(
£lf
->
log_dñivîy_li°íîs
.
⁄_Áûed
) {

821 
£lf
->
log_dñivîy_li°íîs
.
	`⁄_Áûed
(£lf->log_dñivîy_li°íîs.
˘x
,

822 &
log_buckë_öfo
);

824 
	`ext_log_°‹age_unm¨k_by_buckë_id
(
£lf
->
log_°‹age_c⁄ãxt
, 
buckë_id
);

825 
	`ext_log_u∂ﬂd_°øãgy_⁄_Áûuª
(
£lf
->
log_u∂ﬂd_°øãgy_c⁄ãxt
,

826 (
loggög_dñivîy_îr‹_code_t
)
dñivîy_îr‹_code
);

830 
	`upd©e_°‹age
(
£lf
);

832  
îr‹_code
;

833 
	}
}

836 
	$ext_log_u∂ﬂd_timeout
(
kØ_log_cﬁÀ˘‹_t
 *
£lf
)

838 i‡(!
	`is_timeout
(
£lf
)

839 || 
	`ext_log_u∂ﬂd_°øãgy_is_timeout_°øãgy
(
£lf
->
log_u∂ﬂd_°øãgy_c⁄ãxt
)) {

840 
	`upd©e_°‹age
(
£lf
);

842 
	`h™dÀ_timeout
(
£lf
);

844 
	}
}

	@/var/www/html/debian/gateway/kaa/src/extensions/logging/kaa_logging.h

24 #i‚de‡
KAA_LOGGING_H_


25 
	#KAA_LOGGING_H_


	)

28 
	~"gí/kØ_loggög_deföôi⁄s.h
"

29 
	~"∂©f‹m/ext_log_°‹age.h
"

30 
	~"∂©f‹m/ext_log_u∂ﬂd_°øãgy.h
"

31 
	~"∂©f‹m/ext_log_dñivîy_li°íî.h
"

33 #ifde‡
__˝lu•lus


41 
kØ_log_cﬁÀ˘‹_t
;

42 
kØ_log_cﬁÀ˘‹_t
 
	tkØ_log_cﬁÀ˘‹_t
;

56 
uöt32_t
 
log_id
;

57 
uöt16_t
 
buckë_id
;

58 } 
	tkØ_log_ªc‹d_öfo_t
;

62 
size_t
 
max_buckë_size
;

63 
size_t
 
max_buckë_log_cou¡
;

64 } 
	tkØ_log_buckë_c⁄°øöts_t
;

76 
kØ_îr‹_t
 
kØ_loggög_öô
(
kØ_log_cﬁÀ˘‹_t
 *
£lf
, *
log_°‹age_c⁄ãxt
, *
log_u∂ﬂd_°øãgy_c⁄ãxt
, c⁄° 
kØ_log_buckë_c⁄°øöts_t
 *
buckë_sizes
);

89 
kØ_îr‹_t
 
kØ_loggög_£t_°øãgy
(
kØ_log_cﬁÀ˘‹_t
 *
£lf
, *
log_u∂ﬂd_°øãgy_c⁄ãxt
);

103 
kØ_îr‹_t
 
kØ_loggög_£t_°‹age
(
kØ_log_cﬁÀ˘‹_t
 *
£lf
, *
log_°‹age_c⁄ãxt
);

114 
kØ_îr‹_t
 
kØ_loggög_add_ªc‹d
(
kØ_log_cﬁÀ˘‹_t
 *
£lf
, 
kØ_u£r_log_ªc‹d_t
 *
íåy
, 
kØ_log_ªc‹d_öfo_t
 *
log_öfo
);

125 
kØ_îr‹_t
 
kØ_loggög_£t_li°íîs
(
kØ_log_cﬁÀ˘‹_t
 *
£lf
, c⁄° 
kØ_log_dñivîy_li°íî_t
 *
li°íîs
);

127 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/extensions/logging/kaa_logging_private.h

16 #i‚de‡
KAA_LOGGING_PRIVATE_H


17 
	#KAA_LOGGING_PRIVATE_H


	)

19 
	~<kØ_loggög.h
>

20 
	~<kØ_°©us.h
>

21 
	~<kØ_°©us.h
>

22 
	~<kØ_ch™√l_m™agî.h
>

23 
	~<utûôõs/kØ_log.h
>

24 
	~<kØ_∂©f‹m_utûs.h
>

26 
kØ_îr‹_t
 
kØ_log_cﬁÀ˘‹_¸óã
(
kØ_log_cﬁÀ˘‹_t
 ** 
log_cﬁÀ˘‹_p
, 
kØ_°©us_t
 *
°©us
,

27 
kØ_ch™√l_m™agî_t
 *
ch™√l_m™agî
, 
kØ_loggî_t
 *
loggî
);

28 
kØ_log_cﬁÀ˘‹_de°roy
(
kØ_log_cﬁÀ˘‹_t
 *
£lf
);

29 
kØ_îr‹_t
 
kØ_loggög_√ed_loggög_ªsync
(
kØ_log_cﬁÀ˘‹_t
 *
£lf
, 
boﬁ
 *
ªsu…
);

31 
kØ_îr‹_t
 
kØ_loggög_ªque°_gë_size
(
kØ_log_cﬁÀ˘‹_t
 *
£lf
, 
size_t
 *
ex≥˘ed_size
);

32 
kØ_îr‹_t
 
kØ_loggög_ªque°_£rülize
(
kØ_log_cﬁÀ˘‹_t
 *
£lf
,

33 
kØ_∂©f‹m_mesßge_wrôî_t
 *
wrôî
);

34 
kØ_îr‹_t
 
kØ_loggög_h™dÀ_£rvî_sync
(
kØ_log_cﬁÀ˘‹_t
 *
£lf
, 
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî
, 
uöt16_t
 
exãnsi⁄_›ti⁄s
, 
size_t
 
exãnsi⁄_Àngth
);

36 
ext_log_u∂ﬂd_timeout
(
kØ_log_cﬁÀ˘‹_t
 *
£lf
);

37 
ext_log_u∂ﬂd_timeout
(
kØ_log_cﬁÀ˘‹_t
 *
£lf
);

38 
boﬁ
 
ext_log_u∂ﬂd_°øãgy_is_timeout_°øãgy
(*
°øãgy
);

40 
kØ_îr‹_t
 
ext_u∆imôed_log_°‹age_¸óã
(**
log_°‹age_c⁄ãxt_p
, 
kØ_loggî_t
 *
loggî
);

41 
kØ_îr‹_t
 
ext_limôed_log_°‹age_¸óã
(**
log_°‹age_c⁄ãxt_p
, 
kØ_loggî_t
 *
loggî
,

42 
size_t
 
°‹age_size
, size_à
≥r˚¡_to_dñëe
);

43 
kØ_îr‹_t
 
ext_log_°‹age_de°roy
(*
c⁄ãxt
);

	@/var/www/html/debian/gateway/kaa/src/extensions/logging/test/test_kaa_log.c

17 
	~<°dio.h
>

18 
	~<°rög.h
>

19 
	~<sys/ty≥s.h
>

20 
	~<°döt.h
>

21 
	~<time.h
>

22 
	~<uni°d.h
>

23 
	~"∂©f‹m/ext_sha.h
"

25 
	~"kØ_loggög.h
"

26 
	~"kØ_loggög_¥iv©e.h
"

28 
	~"kØ_ã°.h
"

30 
	~"kØ_c⁄ãxt.h
"

31 
	~"kØ_∂©f‹m_¥Ÿocﬁ.h
"

32 
	~"kØ_ch™√l_m™agî.h
"

33 
	~"kØ_∂©f‹m_utûs.h
"

34 
	~"kØ_°©us.h
"

35 
	~"utûôõs/kØ_mem.h
"

36 
	~"utûôõs/kØ_log.h
"

37 
	~"∂©f‹m/sock.h
"

38 
	~"∂©f‹m/ext_log_°‹age.h
"

39 
	~"∂©f‹m/ext_log_u∂ﬂd_°øãgy.h
"

41 
	~"kØ_¥iv©e.h
"

43 
kØ_c⁄ãxt_t
 
	gkØ_c⁄ãxt
;

44 
kØ_loggî_t
 *
	gloggî
 = 
NULL
;

45 
kØ_°©us_t
 *
	g°©us
 = 
NULL
;

46 
kØ_ch™√l_m™agî_t
 *
	gch™√l_m™agî
 = 
NULL
;

48 c⁄° 
kØ_exãnsi⁄_id
 
	gOPERATIONS_SERVICES
[] = {

49 
KAA_EXTENSION_PROFILE
,

50 
KAA_EXTENSION_USER
,

51 
KAA_EXTENSION_CONFIGURATION
,

52 
KAA_EXTENSION_EVENT
,

53 
KAA_EXTENSION_LOGGING
,

54 
KAA_EXTENSION_NOTIFICATION


56 c⁄° 
	gOPERATIONS_SERVICES_COUNT
 = (
OPERATIONS_SERVICES
Ë/ (
kØ_exãnsi⁄_id
);

58 
	#TEST_LOG_BUFFER
 "log_ªc‹d"

	)

59 
	#TEST_TIMEOUT
 1

	)

63 
size_t
 
	mtimeout
;

64 
size_t
 
	mmax_∑øŒñ_u∂ﬂds
;

65 
	m⁄_timeout_cou¡
;

66 
	m⁄_Áûuª_cou¡
;

67 
ext_log_u∂ﬂd_decisi⁄_t
 
	mdecisi⁄
;

68 
kØ_îr‹_t
 
	mtimeout_ªtvÆ
;

69 } 
	tmock_°øãgy_c⁄ãxt_t
;

72 
kØ_li°_t
 *
	mlogs
;

73 
size_t
 
	mªc‹d_cou¡
;

74 
size_t
 
	mtŸÆ_size
;

75 
	m⁄_ªmove_by_id_cou¡
;

76 
	m⁄_unm¨k_by_id_cou¡
;

77 } 
	tmock_°‹age_c⁄ãxt_t
;

80 
size_t
 
	m⁄_sync_cou¡
;

81 } 
	tmock_å™•‹t_ch™√l_c⁄ãxt_t
;

88 
kØ_îr‹_t
 
	$ã°_kØ_öô_ch™√l
(*
ch™√l_c⁄ãxt
,

89 
kØ_å™•‹t_c⁄ãxt_t
 *
å™•‹t_c⁄ãxt
)

91 ()
ch™√l_c⁄ãxt
;

92 ()
å™•‹t_c⁄ãxt
;

93  
KAA_ERR_NONE
;

94 
	}
}

96 
kØ_îr‹_t
 
	$ã°_kØ_£t_ac˚ss_poöt
(*
ch™√l_c⁄ãxt
,

97 
kØ_ac˚ss_poöt_t
 *
ac˚ss_poöt
)

99 ()
ch™√l_c⁄ãxt
;

100 ()
ac˚ss_poöt
;

101  
KAA_ERR_NONE
;

102 
	}
}

104 
kØ_îr‹_t
 
	$ã°_kØ_gë_¥Ÿocﬁ_id
(*
c⁄ãxt
,

105 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 *
¥Ÿocﬁ_öfo
)

107 ()
c⁄ãxt
;

108 
¥Ÿocﬁ_öfo
->
id
 = 1;

109 
¥Ÿocﬁ_öfo
->
vîsi⁄
 = 1;

110  
KAA_ERR_NONE
;

111 
	}
}

113 
kØ_îr‹_t
 
	$ã°_kØ_gë_suµ‹ãd_£rvi˚s
(*
c⁄ãxt
,

114 c⁄° 
kØ_exãnsi⁄_id
 **
suµ‹ãd_£rvi˚s
,

115 
size_t
 *
£rvi˚_cou¡
)

117 ()
c⁄ãxt
;

118 *
suµ‹ãd_£rvi˚s
 = 
OPERATIONS_SERVICES
;

119 *
£rvi˚_cou¡
 = 
OPERATIONS_SERVICES_COUNT
;

120  
KAA_ERR_NONE
;

121 
	}
}

123 
kØ_îr‹_t
 
	$ã°_kØ_sync_h™dÀr
(*
c⁄ãxt
, c⁄° 
kØ_exãnsi⁄_id
 
£rvi˚s
[],

124 
size_t
 
£rvi˚_cou¡
)

126 ()
£rvi˚s
;

127 ()
£rvi˚_cou¡
;

128 ((
mock_å™•‹t_ch™√l_c⁄ãxt_t
 *)
c⁄ãxt
)->
⁄_sync_cou¡
++;

129  
KAA_ERR_NONE
;

130 
	}
}

132 
kØ_îr‹_t
 
	$ã°_kØ_ch™√l_de°roy
(*
c⁄ãxt
)

134 
	`KAA_FREE
(
c⁄ãxt
);

135  
KAA_ERR_NONE
;

136 
	}
}

138 
	$ã°_kØ_ch™√l_¸óã
(
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
£lf
)

140 
£lf
->
c⁄ãxt
 = 
	`KAA_CALLOC
(1, (
mock_å™•‹t_ch™√l_c⁄ãxt_t
));

142 
£lf
->
gë_¥Ÿocﬁ_id
 = 
ã°_kØ_gë_¥Ÿocﬁ_id
;

143 
£lf
->
gë_suµ‹ãd_£rvi˚s
 = 
ã°_kØ_gë_suµ‹ãd_£rvi˚s
;

144 
£lf
->
de°roy
 = 
ã°_kØ_ch™√l_de°roy
;

145 
£lf
->
sync_h™dÀr
 = 
ã°_kØ_sync_h™dÀr
;

146 
£lf
->
öô
 = 
ã°_kØ_öô_ch™√l
;

147 
£lf
->
£t_ac˚ss_poöt
 = 
ã°_kØ_£t_ac˚ss_poöt
;

148 
	}
}

155 
ext_log_u∂ﬂd_decisi⁄_t
 
	$ext_log_u∂ﬂd_°øãgy_decide
(*
c⁄ãxt
,

156 c⁄° *
log_°‹age_c⁄ãxt
)

158 ()
log_°‹age_c⁄ãxt
;

159  ((
mock_°øãgy_c⁄ãxt_t
 *)
c⁄ãxt
)->
decisi⁄
;

160 
	}
}

162 
size_t
 
	$ext_log_u∂ﬂd_°øãgy_gë_timeout
(*
c⁄ãxt
)

164  ((
mock_°øãgy_c⁄ãxt_t
 *)
c⁄ãxt
)->
timeout
;

165 
	}
}

167 
kØ_îr‹_t
 
	$ext_log_u∂ﬂd_°øãgy_⁄_timeout
(*
c⁄ãxt
)

169 
mock_°øãgy_c⁄ãxt_t
 *
mock_˘x
 = 
c⁄ãxt
;

170 
mock_˘x
->
⁄_timeout_cou¡
++;

171  
mock_˘x
->
timeout_ªtvÆ
;

172 
	}
}

174 
kØ_îr‹_t
 
	$ext_log_u∂ﬂd_°øãgy_⁄_Áûuª
(*
c⁄ãxt
,

175 
loggög_dñivîy_îr‹_code_t
 
îr‹_code
)

177 ()
îr‹_code
;

178 ((
mock_°øãgy_c⁄ãxt_t
 *)
c⁄ãxt
)->
⁄_Áûuª_cou¡
++;

179  
KAA_ERR_NONE
;

180 
	}
}

182 
size_t
 
	$ext_log_u∂ﬂd_°øãgy_gë_max_∑øŒñ_u∂ﬂds
(*
c⁄ãxt
)

184  ((
mock_°øãgy_c⁄ãxt_t
 *)
c⁄ãxt
)->
max_∑øŒñ_u∂ﬂds
;

185 
	}
}

187 
	$ext_log_u∂ﬂd_°øãgy_de°roy
(*
c⁄ãxt
)

189 ()
c⁄ãxt
;

190 
	}
}

192 
boﬁ
 
	$ext_log_u∂ﬂd_°øãgy_is_timeout_°øãgy
(*
°øãgy
)

194 ()
°øãgy
;

195  
Ál£
;

196 
	}
}

204 
boﬁ
 
	m¥o˚s£d
;

205 
kØ_log_ªc‹d_t
 
	mªc
;

206 } 
	tã°_log_ªc‹d_t
;

208 
	$de°roy_log_ªc‹d
(*
ªc‹d_p
)

210 i‡(
ªc‹d_p
) {

211 
ã°_log_ªc‹d_t
 *
ã°_ªc
 = 
ªc‹d_p
;

212 
	`KAA_FREE
(
ã°_ªc
->
ªc
.
d©a
);

213 
	`KAA_FREE
(
ã°_ªc
);

215 
	}
}

217 
boﬁ
 
	$m©ch_u≈ro˚s£d
(*
log_ªc‹d_p
, *
¨g
)

219 (Ë
¨g
;

220 
ã°_log_ªc‹d_t
 *
ªc‹d
 = 
log_ªc‹d_p
;

221  !
ªc‹d
->
¥o˚s£d
;

222 
	}
}

224 
kØ_îr‹_t
 
	$ext_log_°‹age_Æloˇã_log_ªc‹d_buf„r
(*
c⁄ãxt
, 
kØ_log_ªc‹d_t
 *
ªc‹d
)

226 ()
c⁄ãxt
;

227 
ªc‹d
->
d©a
 = 
	`KAA_MALLOC
‘ec‹d->
size
);

228  
KAA_ERR_NONE
;

229 
	}
}

231 
kØ_îr‹_t
 
	$ext_log_°‹age_dóŒoˇã_log_ªc‹d_buf„r
(*
c⁄ãxt
, 
kØ_log_ªc‹d_t
 *
ªc‹d
)

233 ()
c⁄ãxt
;

234 
	`KAA_FREE
(
ªc‹d
->
d©a
);

235  
KAA_ERR_NONE
;

236 
	}
}

238 
kØ_îr‹_t
 
	$ext_log_°‹age_add_log_ªc‹d
(*
c⁄ãxt
, 
kØ_log_ªc‹d_t
 *
ªc‹d
)

240 
mock_°‹age_c⁄ãxt_t
 *
£lf
 = 
c⁄ãxt
;

242 
ã°_log_ªc‹d_t
 *
ã°_ªc
 = 
	`KAA_MALLOC
((*test_rec));

243 i‡(!
ã°_ªc
) {

244  
KAA_ERR_NOMEM
;

247 
ã°_ªc
->
ªc
 = *
ªc‹d
;

248 
ã°_ªc
->
¥o˚s£d
 = 
Ál£
;

250 
	`kØ_li°_push_back
(
£lf
->
logs
, 
ã°_ªc
);

252 
£lf
->
ªc‹d_cou¡
++;

253 
£lf
->
tŸÆ_size
 +
ã°_ªc
->
ªc
.
size
;

255  
KAA_ERR_NONE
;

256 
	}
}

258 
kØ_îr‹_t
 
	$ext_log_°‹age_wrôe_√xt_ªc‹d
(*
c⁄ãxt
, *
buf„r
, 
size_t
 
buf„r_Àn
,

259 
uöt16_t
 *
buckë_id
, 
size_t
 *
ªc‹d_Àn
)

261 
mock_°‹age_c⁄ãxt_t
 *
£lf
 = 
c⁄ãxt
;

262 
	`KAA_RETURN_IF_NIL2
(
£lf
, sñf->
logs
, 
KAA_ERR_NOT_FOUND
);

264 
kØ_li°_node_t
 *
node
 = 
	`kØ_li°_föd_√xt
(
	`kØ_li°_begö
(
£lf
->
logs
),

265 
m©ch_u≈ro˚s£d
, 
NULL
);

267 i‡(!
node
) {

268  
KAA_ERR_NOT_FOUND
;

271 
ã°_log_ªc‹d_t
 *
ªc‹d
 = 
	`kØ_li°_gë_d©a
(
node
);

273 i‡(
buf„r_Àn
 < 
ªc‹d
->
ªc
.
size
) {

274  
KAA_ERR_INSUFFICIENT_BUFFER
;

277 *
ªc‹d_Àn
 = 
ªc‹d
->
ªc
.
size
;

278 *
buckë_id
 = 
ªc‹d
->
ªc
.bucket_id;

279 
	`mem˝y
(
buf„r
, 
ªc‹d
->
ªc
.
d©a
, *
ªc‹d_Àn
);

280 
ªc‹d
->
¥o˚s£d
 = 
åue
;

281  
KAA_ERR_NONE
;

282 
	}
}

284 
kØ_îr‹_t
 
	$ext_log_°‹age_ªmove_by_buckë_id
(*
c⁄ãxt
, 
uöt16_t
 
buckë_id
)

286 ()
buckë_id
;

287 
mock_°‹age_c⁄ãxt_t
 *
£lf
 = 
c⁄ãxt
;

288 
£lf
->
⁄_ªmove_by_id_cou¡
++;

290  
KAA_ERR_NONE
;

291 
	}
}

293 
kØ_îr‹_t
 
	$ext_log_°‹age_unm¨k_by_buckë_id
(*
c⁄ãxt
, 
uöt16_t
 
buckë_id
)

295 ()
buckë_id
;

296 ((
mock_°‹age_c⁄ãxt_t
 *)
c⁄ãxt
)->
⁄_unm¨k_by_id_cou¡
++;

297  
KAA_ERR_NONE
;

298 
	}
}

300 
size_t
 
	$ext_log_°‹age_gë_tŸÆ_size
(c⁄° *
c⁄ãxt
)

302  ((
mock_°‹age_c⁄ãxt_t
 *)
c⁄ãxt
)->
tŸÆ_size
;

303 
	}
}

305 
size_t
 
	$ext_log_°‹age_gë_ªc‹ds_cou¡
(c⁄° *
c⁄ãxt
)

307  ((
mock_°‹age_c⁄ãxt_t
 *)
c⁄ãxt
)->
ªc‹d_cou¡
;

308 
	}
}

310 
mock_°‹age_c⁄ãxt_t
 *
	$¸óã_mock_°‹age
()

312 
mock_°‹age_c⁄ãxt_t
 *
°‹age
 = 
	`KAA_CALLOC
(1, (mock_storage_context_t));

313 
	`KAA_RETURN_IF_NIL
(
°‹age
, 
NULL
);

314 
°‹age
->
logs
 = 
	`kØ_li°_¸óã
();

316  
°‹age
;

317 
	}
}

319 
kØ_îr‹_t
 
	$ext_log_°‹age_de°roy
(*
c⁄ãxt
)

321 i‡(
c⁄ãxt
) {

322 
	`kØ_li°_de°roy
(((
mock_°‹age_c⁄ãxt_t
 *)
c⁄ãxt
)->
logs
, &
de°roy_log_ªc‹d
);

323 
	`KAA_FREE
(
c⁄ãxt
);

325  
KAA_ERR_NONE
;

326 
	}
}

330 
	$ã°_¸óã_ªque°
(**
°©e
)

332 ()
°©e
;

334 
kØ_u£r_log_ªc‹d_t
 *
ã°_log_ªc‹d
 = 
	`kØ_ã°_log_ªc‹d_¸óã
();

335 
ã°_log_ªc‹d
->
d©a
 = 
	`kØ_°rög_c›y_¸óã
(
TEST_LOG_BUFFER
);

336 
size_t
 
ã°_log_ªc‹d_size
 = 
ã°_log_ªc‹d
->
	`gë_size
(test_log_record);

338 
kØ_log_cﬁÀ˘‹_t
 *
log_cﬁÀ˘‹
 = 
NULL
;

339 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_log_cﬁÀ˘‹_¸óã
(&
log_cﬁÀ˘‹
, 
°©us
,

340 
ch™√l_m™agî
, 
loggî
);

341 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

343 
mock_°øãgy_c⁄ãxt_t
 
°øãgy
;

344 
	`mem£t
(&
°øãgy
, 0, (
mock_°øãgy_c⁄ãxt_t
));

345 
°øãgy
.
decisi⁄
 = 
NOOP
;

346 
°øãgy
.
max_∑øŒñ_u∂ﬂds
 = 
UINT32_MAX
;

348 
kØ_log_buckë_c⁄°øöts_t
 
c⁄°øöts
 = {

349 .
max_buckë_size
 = 2 * 
ã°_log_ªc‹d_size
,

350 .
max_buckë_log_cou¡
 = 
UINT32_MAX
,

353 
îr‹_code
 = 
	`kØ_loggög_öô
(
log_cﬁÀ˘‹
, 
	`¸óã_mock_°‹age
(), &
°øãgy
, &
c⁄°øöts
);

354 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

356 
îr‹_code
 = 
	`kØ_loggög_add_ªc‹d
(
log_cﬁÀ˘‹
, 
ã°_log_ªc‹d
, 
NULL
);

357 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

359 
size_t
 
ex≥˘ed_size
 = 0;

360 
îr‹_code
 = 
	`kØ_loggög_ªque°_gë_size
(
log_cﬁÀ˘‹
, &
ex≥˘ed_size
);

361 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

363 
uöt8_t
 
buf„r
[
ex≥˘ed_size
];

364 
kØ_∂©f‹m_mesßge_wrôî_t
 *
wrôî
 = 
NULL
;

365 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôî_¸óã
(&
wrôî
, 
buf„r
, 
ex≥˘ed_size
);

366 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

367 
	`ASSERT_NOT_NULL
(
wrôî
);

369 
îr‹_code
 = 
	`kØ_loggög_ªque°_£rülize
(
log_cﬁÀ˘‹
, 
wrôî
);

370 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

371 
	`kØ_∂©f‹m_mesßge_wrôî_de°roy
(
wrôî
);

373 
uöt8_t
 *
buf_curs‹
 = 
buf„r
;

374 
	`ASSERT_EQUAL
(
KAA_EXTENSION_LOGGING
, 
	`KAA_HTONS
(*(
uöt16_t
 *)
buf_curs‹
));

375 
buf_curs‹
 +(
uöt16_t
);

377 
uöt8_t
 
›ti⁄s
[] = { 0x00, 0x01 };

378 
	`ASSERT_EQUAL
(
	`memcmp
(
buf_curs‹
, 
›ti⁄s
, 2), 0);

379 
buf_curs‹
 += 2;

381 
	`ASSERT_EQUAL
(*(
uöt32_t
 *Ë
buf_curs‹
, 
	`KAA_HTONL
(20));

382 
buf_curs‹
 +(
uöt32_t
);

384 
uöt8_t
 
ªque°_id_ªc‹ds_cou¡
[] = { 0x00, 0x01, 0x00, 0x01 };

385 
	`ASSERT_EQUAL
(
	`memcmp
(
buf_curs‹
, 
ªque°_id_ªc‹ds_cou¡
, 4), 0);

386 
buf_curs‹
 += 4;

388 
uöt8_t
 
ªc‹d_buf
[
ã°_log_ªc‹d_size
];

389 
avro_wrôî_t
 
avro_wrôî
 = 
	`avro_wrôî_mem‹y
((*)
ªc‹d_buf
, 
ã°_log_ªc‹d_size
);

390 
ã°_log_ªc‹d
->
	`£rülize
(
avro_wrôî
,Åest_log_record);

391 
	`avro_wrôî_‰ì
(
avro_wrôî
);

393 
	`ASSERT_EQUAL
(*(
uöt32_t
 *Ë
buf_curs‹
, 
	`KAA_HTONL
(
ã°_log_ªc‹d_size
));

394 
buf_curs‹
 +(
uöt32_t
);

396 
	`ASSERT_EQUAL
(
	`memcmp
(
buf_curs‹
, 
ªc‹d_buf
, 
ã°_log_ªc‹d_size
), 0);

398 
	`kØ_log_cﬁÀ˘‹_de°roy
(
log_cﬁÀ˘‹
);

399 
ã°_log_ªc‹d
->
	`de°roy
(test_log_record);

400 
	}
}

404 
	$ã°_ª•⁄£
(**
°©e
)

406 ()
°©e
;

408 
	`§™d
(
	`time
(
NULL
));

410 
kØ_log_cﬁÀ˘‹_t
 *
log_cﬁÀ˘‹
 = 
NULL
;

411 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_log_cﬁÀ˘‹_¸óã
(&
log_cﬁÀ˘‹
, 
°©us
, 
ch™√l_m™agî
, 
loggî
);

412 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

414 
mock_°øãgy_c⁄ãxt_t
 
°øãgy
;

415 
	`mem£t
(&
°øãgy
, 0, (
mock_°øãgy_c⁄ãxt_t
));

417 
mock_°‹age_c⁄ãxt_t
 *
°‹age
 = 
	`¸óã_mock_°‹age
();

419 
kØ_log_buckë_c⁄°øöts_t
 
c⁄°øöts
 = {

420 .
max_buckë_size
 = 1024,

421 .
max_buckë_log_cou¡
 = 
UINT32_MAX
,

424 
îr‹_code
 = 
	`kØ_loggög_öô
(
log_cﬁÀ˘‹
, 
°‹age
, &
°øãgy
, &
c⁄°øöts
);

425 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

427 
uöt32_t
 
ª•⁄£_cou¡
 = 2;

428 
size_t
 
ª•⁄£_buf„r_size
 = (
uöt32_t
Ë+ (uöt32_tË* 
ª•⁄£_cou¡
;

429 
uöt8_t
 
ª•⁄£_buf„r
[
ª•⁄£_buf„r_size
];

431 
uöt8_t
 *
ª•⁄£
 = 
ª•⁄£_buf„r
;

432 *((
uöt32_t
 *)
ª•⁄£
Ë
	`KAA_HTONL
(
ª•⁄£_cou¡
);

433 
ª•⁄£
 +(
uöt32_t
);

436 *((
uöt16_t
 *)
ª•⁄£
Ë
	`KAA_HTONS
(
	`ønd
());

437 
ª•⁄£
 +(
uöt16_t
);

438 *((
uöt8_t
 *)
ª•⁄£
) = 0x0;

439 
ª•⁄£
 +(
uöt8_t
);

440 *((
uöt8_t
 *)
ª•⁄£
) = 0;

441 
ª•⁄£
 +(
uöt8_t
);

444 *((
uöt16_t
 *)
ª•⁄£
Ë
	`KAA_HTONS
(
	`ønd
());

445 
ª•⁄£
 +(
uöt16_t
);

446 *((
uöt8_t
 *)
ª•⁄£
) = 0x1;

447 
ª•⁄£
 +(
uöt8_t
);

448 *((
uöt8_t
 *)
ª•⁄£
Ë
	`ønd
() % 4;

449 
ª•⁄£
 +(
uöt8_t
);

451 
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî
 = 
NULL
;

452 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªadî_¸óã
(&
ªadî
, 
ª•⁄£_buf„r
, 
ª•⁄£_buf„r_size
);

453 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

454 
	`ASSERT_NOT_NULL
(
ªadî
);

456 
îr‹_code
 = 
	`kØ_loggög_h™dÀ_£rvî_sync
(
log_cﬁÀ˘‹
, 
ªadî
, 0, 
ª•⁄£_buf„r_size
);

457 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

459 
	`ASSERT_TRUE
(
°øãgy
.
⁄_Áûuª_cou¡
);

460 
	`ASSERT_TRUE
(
°‹age
->
⁄_ªmove_by_id_cou¡
);

461 
	`ASSERT_TRUE
(
°‹age
->
⁄_unm¨k_by_id_cou¡
);

463 
	`kØ_∂©f‹m_mesßge_ªadî_de°roy
(
ªadî
);

464 
	`kØ_log_cﬁÀ˘‹_de°roy
(
log_cﬁÀ˘‹
);

465 
	}
}

469 
	$ã°_timeout
(**
°©e
)

471 ()
°©e
;

473 
kØ_log_cﬁÀ˘‹_t
 *
log_cﬁÀ˘‹
 = 
NULL
;

474 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_log_cﬁÀ˘‹_¸óã
(&
log_cﬁÀ˘‹
,

475 
°©us
, 
ch™√l_m™agî
, 
loggî
);

476 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

478 
kØ_u£r_log_ªc‹d_t
 *
ã°_log_ªc‹d
 = 
	`kØ_ã°_log_ªc‹d_¸óã
();

479 
ã°_log_ªc‹d
->
d©a
 = 
	`kØ_°rög_c›y_¸óã
(
TEST_LOG_BUFFER
);

480 
size_t
 
ã°_log_ªc‹d_size
 = 
ã°_log_ªc‹d
->
	`gë_size
(test_log_record);

482 
mock_°øãgy_c⁄ãxt_t
 
°øãgy
;

483 
	`mem£t
(&
°øãgy
, 0, (
mock_°øãgy_c⁄ãxt_t
));

484 
°øãgy
.
timeout
 = 
TEST_TIMEOUT
;

485 
°øãgy
.
decisi⁄
 = 
NOOP
;

486 
°øãgy
.
max_∑øŒñ_u∂ﬂds
 = 
UINT32_MAX
;

488 
kØ_log_buckë_c⁄°øöts_t
 
c⁄°øöts
 = {

489 .
max_buckë_size
 = 2 * 
ã°_log_ªc‹d_size
,

490 .
max_buckë_log_cou¡
 = 
UINT32_MAX
,

493 
îr‹_code
 = 
	`kØ_loggög_öô
(
log_cﬁÀ˘‹
, 
	`¸óã_mock_°‹age
(), &
°øãgy
, &
c⁄°øöts
);

494 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

496 
îr‹_code
 = 
	`kØ_loggög_add_ªc‹d
(
log_cﬁÀ˘‹
, 
ã°_log_ªc‹d
, 
NULL
);

497 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

499 
size_t
 
ªque°_buf„r_size
 = 256;

500 
uöt8_t
 
ªque°_buf„r
[
ªque°_buf„r_size
];

501 
kØ_∂©f‹m_mesßge_wrôî_t
 *
wrôî
 = 
NULL
;

502 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôî_¸óã
(&
wrôî
, 
ªque°_buf„r
, 
ªque°_buf„r_size
);

503 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

505 
îr‹_code
 = 
	`kØ_loggög_ªque°_£rülize
(
log_cﬁÀ˘‹
, 
wrôî
);

506 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

508 
	`¶ìp
(
TEST_TIMEOUT
 + 1);

510 
îr‹_code
 = 
	`kØ_loggög_add_ªc‹d
(
log_cﬁÀ˘‹
, 
ã°_log_ªc‹d
, 
NULL
);

511 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

513 
	`ASSERT_TRUE
(
°øãgy
.
⁄_timeout_cou¡
);

515 
ã°_log_ªc‹d
->
	`de°roy
(test_log_record);

516 
	`kØ_∂©f‹m_mesßge_wrôî_de°roy
(
wrôî
);

517 
	`kØ_log_cﬁÀ˘‹_de°roy
(
log_cﬁÀ˘‹
);

518 
	}
}

520 
	$ã°_de˛öe_timeout
(**
°©e
)

522 ()
°©e
;

524 
kØ_log_cﬁÀ˘‹_t
 *
log_cﬁÀ˘‹
 = 
NULL
;

525 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_log_cﬁÀ˘‹_¸óã
(&
log_cﬁÀ˘‹
, 
°©us
, 
ch™√l_m™agî
, 
loggî
);

526 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

528 
kØ_u£r_log_ªc‹d_t
 *
ã°_log_ªc‹d
 = 
	`kØ_ã°_log_ªc‹d_¸óã
();

529 
ã°_log_ªc‹d
->
d©a
 = 
	`kØ_°rög_c›y_¸óã
(
TEST_LOG_BUFFER
);

530 
size_t
 
ã°_log_ªc‹d_size
 = 
ã°_log_ªc‹d
->
	`gë_size
(test_log_record);

532 
mock_°øãgy_c⁄ãxt_t
 
°øãgy
;

533 
	`mem£t
(&
°øãgy
, 0, (
mock_°øãgy_c⁄ãxt_t
));

534 
°øãgy
.
timeout
 = 
TEST_TIMEOUT
;

535 
°øãgy
.
decisi⁄
 = 
NOOP
;

536 
°øãgy
.
max_∑øŒñ_u∂ﬂds
 = 
UINT32_MAX
;

538 
mock_°‹age_c⁄ãxt_t
 *
°‹age
 = 
	`¸óã_mock_°‹age
();

539 
	`ASSERT_NOT_NULL
(
°‹age
);

541 
kØ_log_buckë_c⁄°øöts_t
 
c⁄°øöts
 = {

542 .
max_buckë_size
 = 2 * 
ã°_log_ªc‹d_size
,

543 .
max_buckë_log_cou¡
 = 
UINT32_MAX
,

546 
îr‹_code
 = 
	`kØ_loggög_öô
(
log_cﬁÀ˘‹
, 
°‹age
, &
°øãgy
, &
c⁄°øöts
);

547 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

549 
îr‹_code
 = 
	`kØ_loggög_add_ªc‹d
(
log_cﬁÀ˘‹
, 
ã°_log_ªc‹d
, 
NULL
);

550 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

552 
size_t
 
ªque°_buf„r_size
 = 256;

553 
uöt8_t
 
ªque°_buf„r
[
ªque°_buf„r_size
];

554 
kØ_∂©f‹m_mesßge_wrôî_t
 *
wrôî
 = 
NULL
;

555 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôî_¸óã
(&
wrôî
, 
ªque°_buf„r
, 
ªque°_buf„r_size
);

556 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

558 
îr‹_code
 = 
	`kØ_loggög_ªque°_£rülize
(
log_cﬁÀ˘‹
, 
wrôî
);

559 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

561 
	`¶ìp
(
TEST_TIMEOUT
 + 1);

563 
uöt16_t
 
buckë_id
 = *((uöt16_à*)(
ªque°_buf„r
 + 
KAA_EXTENSION_HEADER_SIZE
));

564 
buckë_id
 = 
	`KAA_NTOHS
(bucket_id);

566 
uöt32_t
 
ª•⁄£_cou¡
 = 1;

567 
size_t
 
ª•⁄£_buf„r_size
 = (
uöt32_t
Ë+ (uöt32_tË* 
ª•⁄£_cou¡
;

568 
uöt8_t
 
ª•⁄£_buf„r
[
ª•⁄£_buf„r_size
];

570 
uöt8_t
 *
ª•⁄£
 = 
ª•⁄£_buf„r
;

571 *((
uöt32_t
 *)
ª•⁄£
Ë
	`KAA_HTONL
(
ª•⁄£_cou¡
);

572 
ª•⁄£
 +(
uöt32_t
);

575 *((
uöt16_t
 *)
ª•⁄£
Ë
	`KAA_HTONS
(
buckë_id
);

576 
ª•⁄£
 +(
uöt16_t
);

577 *((
uöt8_t
 *)
ª•⁄£
) = 0x0;

578 
ª•⁄£
 +(
uöt8_t
);

579 *((
uöt8_t
 *)
ª•⁄£
) = 0;

580 
ª•⁄£
 +(
uöt8_t
);

582 
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî
 = 
NULL
;

583 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªadî_¸óã
(&
ªadî
, 
ª•⁄£_buf„r
, 
ª•⁄£_buf„r_size
);

584 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

585 
	`ASSERT_NOT_NULL
(
ªadî
);

587 
îr‹_code
 = 
	`kØ_loggög_h™dÀ_£rvî_sync
(
log_cﬁÀ˘‹
, 
ªadî
, 0, 
ª•⁄£_buf„r_size
);

588 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

589 
	`ASSERT_TRUE
(
°‹age
->
⁄_ªmove_by_id_cou¡
);

591 
îr‹_code
 = 
	`kØ_loggög_add_ªc‹d
(
log_cﬁÀ˘‹
, 
ã°_log_ªc‹d
, 
NULL
);

592 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

594 
	`ASSERT_FALSE
(
°øãgy
.
⁄_timeout_cou¡
);

596 
ã°_log_ªc‹d
->
	`de°roy
(test_log_record);

597 
	`kØ_∂©f‹m_mesßge_wrôî_de°roy
(
wrôî
);

598 
	`kØ_∂©f‹m_mesßge_ªadî_de°roy
(
ªadî
);

599 
	`kØ_log_cﬁÀ˘‹_de°roy
(
log_cﬁÀ˘‹
);

600 
	}
}

602 
	$ã°_max_∑øŒñ_u∂ﬂds_wôh_log_sync
(**
°©e
)

604 ()
°©e
;

606 
uöt32_t
 
ch™√l_id
 = 0;

607 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 
å™•‹t_c⁄ãxt
;

608 
	`ã°_kØ_ch™√l_¸óã
(&
å™•‹t_c⁄ãxt
);

610 
	`kØ_ch™√l_m™agî_add_å™•‹t_ch™√l
(
ch™√l_m™agî
, &
å™•‹t_c⁄ãxt
, &
ch™√l_id
);

612 
kØ_log_cﬁÀ˘‹_t
 *
log_cﬁÀ˘‹
 = 
NULL
;

613 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_log_cﬁÀ˘‹_¸óã
(&
log_cﬁÀ˘‹
, 
°©us
, 
ch™√l_m™agî
, 
loggî
);

614 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

616 
kØ_u£r_log_ªc‹d_t
 *
ã°_log_ªc‹d
 = 
	`kØ_ã°_log_ªc‹d_¸óã
();

617 
ã°_log_ªc‹d
->
d©a
 = 
	`kØ_°rög_c›y_¸óã
(
TEST_LOG_BUFFER
);

618 
size_t
 
ã°_log_size
 = 
ã°_log_ªc‹d
->
	`gë_size
(test_log_record);

620 
mock_°øãgy_c⁄ãxt_t
 
°øãgy
;

621 
	`mem£t
(&
°øãgy
, 0, (
mock_°øãgy_c⁄ãxt_t
));

622 
°øãgy
.
timeout
 = 
INT16_MAX
;

623 
°øãgy
.
decisi⁄
 = 
UPLOAD
;

625 
mock_°‹age_c⁄ãxt_t
 *
°‹age
 = 
	`¸óã_mock_°‹age
();

626 
	`ASSERT_NOT_NULL
(
°‹age
);

628 
kØ_log_buckë_c⁄°øöts_t
 
c⁄°øöts
 = {

629 .
max_buckë_size
 = 2 * 
ã°_log_size
,

630 .
max_buckë_log_cou¡
 = 
UINT32_MAX
,

633 
îr‹_code
 = 
	`kØ_loggög_öô
(
log_cﬁÀ˘‹
, 
°‹age
, &
°øãgy
, &
c⁄°øöts
);

634 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

639 
°øãgy
.
max_∑øŒñ_u∂ﬂds
 = 0;

640 
îr‹_code
 = 
	`kØ_loggög_add_ªc‹d
(
log_cﬁÀ˘‹
, 
ã°_log_ªc‹d
, 
NULL
);

641 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

643 
	`ASSERT_EQUAL
(((
mock_å™•‹t_ch™√l_c⁄ãxt_t
 *)
å™•‹t_c⁄ãxt
.
c⁄ãxt
)->
⁄_sync_cou¡
, 0);

649 
°øãgy
.
max_∑øŒñ_u∂ﬂds
 = 1;

650 
îr‹_code
 = 
	`kØ_loggög_add_ªc‹d
(
log_cﬁÀ˘‹
, 
ã°_log_ªc‹d
, 
NULL
);

651 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

652 
	`ASSERT_EQUAL
(((
mock_å™•‹t_ch™√l_c⁄ãxt_t
 *)
å™•‹t_c⁄ãxt
.
c⁄ãxt
)->
⁄_sync_cou¡
, 1);

657 
size_t
 
ªque°_buf„r_size
 = 256;

658 
uöt8_t
 
ªque°_buf„r
[
ªque°_buf„r_size
];

659 
kØ_∂©f‹m_mesßge_wrôî_t
 *
wrôî
 = 
NULL
;

660 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôî_¸óã
(&
wrôî
, 
ªque°_buf„r
, 
ªque°_buf„r_size
);

661 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

663 
îr‹_code
 = 
	`kØ_loggög_ªque°_£rülize
(
log_cﬁÀ˘‹
, 
wrôî
);

664 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

666 
îr‹_code
 = 
	`kØ_loggög_add_ªc‹d
(
log_cﬁÀ˘‹
, 
ã°_log_ªc‹d
, 
NULL
);

667 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

672 
	`ASSERT_EQUAL
(((
mock_å™•‹t_ch™√l_c⁄ãxt_t
 *)
å™•‹t_c⁄ãxt
.
c⁄ãxt
)->
⁄_sync_cou¡
, 1);

677 
îr‹_code
 = 
	`kØ_ch™√l_m™agî_ªmove_å™•‹t_ch™√l
(
ch™√l_m™agî
, 
ch™√l_id
);

678 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

680 
ã°_log_ªc‹d
->
	`de°roy
(test_log_record);

681 
	`kØ_log_cﬁÀ˘‹_de°roy
(
log_cﬁÀ˘‹
);

682 
	}
}

684 
	$ã°_max_∑øŒñ_u∂ﬂds_wôh_sync_Æl
(**
°©e
)

686 ()
°©e
;

688 
uöt32_t
 
ch™√l_id
 = 0;

689 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 
å™•‹t_c⁄ãxt
;

690 
	`ã°_kØ_ch™√l_¸óã
(&
å™•‹t_c⁄ãxt
);

692 
	`kØ_ch™√l_m™agî_add_å™•‹t_ch™√l
(
ch™√l_m™agî
, &
å™•‹t_c⁄ãxt
, &
ch™√l_id
);

694 
kØ_log_cﬁÀ˘‹_t
 *
log_cﬁÀ˘‹
 = 
NULL
;

695 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_log_cﬁÀ˘‹_¸óã
(&
log_cﬁÀ˘‹
,

696 
°©us
, 
ch™√l_m™agî
, 
loggî
);

697 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

699 
kØ_u£r_log_ªc‹d_t
 *
ã°_log_ªc‹d
 = 
	`kØ_ã°_log_ªc‹d_¸óã
();

700 
ã°_log_ªc‹d
->
d©a
 = 
	`kØ_°rög_c›y_¸óã
(
TEST_LOG_BUFFER
);

701 
size_t
 
ã°_log_size
 = 
ã°_log_ªc‹d
->
	`gë_size
(test_log_record);

703 
mock_°øãgy_c⁄ãxt_t
 
°øãgy
;

704 
	`mem£t
(&
°øãgy
, 0, (
mock_°øãgy_c⁄ãxt_t
));

705 
°øãgy
.
timeout
 = 
INT16_MAX
;

706 
°øãgy
.
decisi⁄
 = 
UPLOAD
;

708 
mock_°‹age_c⁄ãxt_t
 *
°‹age
 = 
	`¸óã_mock_°‹age
();

709 
	`ASSERT_NOT_NULL
(
°‹age
);

711 
kØ_log_buckë_c⁄°øöts_t
 
c⁄°øöts
 = {

712 .
max_buckë_size
 = 2 * 
ã°_log_size
,

713 .
max_buckë_log_cou¡
 = 
UINT32_MAX
,

716 
îr‹_code
 = 
	`kØ_loggög_öô
(
log_cﬁÀ˘‹
, 
°‹age
, &
°øãgy
, &
c⁄°øöts
);

717 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

722 
°øãgy
.
max_∑øŒñ_u∂ﬂds
 = 0;

723 
îr‹_code
 = 
	`kØ_loggög_add_ªc‹d
(
log_cﬁÀ˘‹
, 
ã°_log_ªc‹d
, 
NULL
);

724 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

726 
size_t
 
ex≥˘ed_size
 = 0;

727 
îr‹_code
 = 
	`kØ_loggög_ªque°_gë_size
(
log_cﬁÀ˘‹
, &
ex≥˘ed_size
);

728 
	`as£π_öt_equÆ
(
KAA_ERR_NONE
, 
îr‹_code
);

729 
	`ASSERT_FALSE
(
ex≥˘ed_size
);

735 
°øãgy
.
max_∑øŒñ_u∂ﬂds
 = 1;

736 
îr‹_code
 = 
	`kØ_loggög_add_ªc‹d
(
log_cﬁÀ˘‹
, 
ã°_log_ªc‹d
, 
NULL
);

737 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

742 
îr‹_code
 = 
	`kØ_loggög_ªque°_gë_size
(
log_cﬁÀ˘‹
, &
ex≥˘ed_size
);

743 
	`as£π_öt_equÆ
(
KAA_ERR_NONE
, 
îr‹_code
);

744 
	`ASSERT_TRUE
(
ex≥˘ed_size
);

745 
size_t
 
ªque°_buf„r_size
 = 256;

746 
uöt8_t
 
ªque°_buf„r
[
ªque°_buf„r_size
];

747 
kØ_∂©f‹m_mesßge_wrôî_t
 *
wrôî
 = 
NULL
;

748 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôî_¸óã
(&
wrôî
, 
ªque°_buf„r
, 
ªque°_buf„r_size
);

749 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

751 
îr‹_code
 = 
	`kØ_loggög_ªque°_£rülize
(
log_cﬁÀ˘‹
, 
wrôî
);

752 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

754 
îr‹_code
 = 
	`kØ_loggög_add_ªc‹d
(
log_cﬁÀ˘‹
, 
ã°_log_ªc‹d
, 
NULL
);

755 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

760 
îr‹_code
 = 
	`kØ_loggög_ªque°_gë_size
(
log_cﬁÀ˘‹
, &
ex≥˘ed_size
);

761 
	`as£π_öt_equÆ
(
KAA_ERR_NONE
, 
îr‹_code
);

762 
	`ASSERT_FALSE
(
ex≥˘ed_size
);

767 
îr‹_code
 = 
	`kØ_ch™√l_m™agî_ªmove_å™•‹t_ch™√l
(
ch™√l_m™agî
, 
ch™√l_id
);

768 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

770 
ã°_log_ªc‹d
->
	`de°roy
(test_log_record);

771 
	`kØ_log_cﬁÀ˘‹_de°roy
(
log_cﬁÀ˘‹
);

772 
	}
}

780 
	sª•⁄£_chunk
 {

781 
uöt8_t
 
	mbuckë_id
[2];

782 
uöt8_t
 
	mª•_code
;

783 
uöt8_t
 
	mª£rved
;

786 
	sª•⁄£_∑ckë
 {

787 
uöt8_t
 
	mª•_˙t
[4];

788 
ª•⁄£_chunk
 
	mª•s
[];

791 
	#RESP_PACKETS
 2

	)

792 
	#RESP_SUCCESS_IDX
 0

	)

793 
	#RESP_FAILURE_IDX
 1

	)

794 
	#TEST_BUFFER_SIZE
 1024

	)

795 
	#TEST_EXT_OP
 0

	)

798 
mock_°øãgy_c⁄ãxt_t
 
	gã°_°øãgy1
;

799 
mock_°øãgy_c⁄ãxt_t
 
	gã°_°øãgy2
;

800 
mock_°‹age_c⁄ãxt_t
 *
	gã°_°‹age1
;

801 
mock_°‹age_c⁄ãxt_t
 *
	gã°_°‹age2
;

802 
kØ_log_cﬁÀ˘‹_t
 *
	glog_cﬁÀ˘‹
;

803 
size_t
 
	gã°_log_ªc‹d_size
 = 
TEST_BUFFER_SIZE
;

805 
uöt32_t
 
	gã°_ªadî_buf„r
[
TEST_BUFFER_SIZE
 / 4];

806 
uöt32_t
 
	gã°_wrôî_buf„r
[
TEST_BUFFER_SIZE
 / 4];

808 
size_t
 
	gã°_fûÀd_size
;

809 
kØ_∂©f‹m_mesßge_ªadî_t
 *
	gã°_ªadî
;

810 
kØ_∂©f‹m_mesßge_wrôî_t
 *
	gã°_wrôî
;

811 
kØ_u£r_log_ªc‹d_t
 *
	gã°_log_ªc‹d
;

814 *
	gex≥˘ed_˘x
;

815 
	gcheck_buckë
;

816 
uöt16_t
 
	gex≥˘ed_bucked_id
;

819 
	gˇŒ_is_ex≥˘ed
;

820 
	gˇŒ_com∂ëed
;

823 
	gÁûed_ˇŒ_is_ex≥˘ed
;

824 
	gÁûed_ˇŒ_com∂ëed
;

827 
	gsuc˚ss_ˇŒ_is_ex≥˘ed
;

828 
	gsuc˚ss_ˇŒ_com∂ëed
;

831 
	gtimeout_ˇŒ_is_ex≥˘ed
;

832 
	gtimeout_ˇŒ_com∂ëed
;

836 
	$mock_log_evít_gíîic_‚
(*
˘x
, c⁄° 
kØ_log_buckë_öfo_t
 *
buckë
)

838 
	`ASSERT_TRUE
(
ˇŒ_is_ex≥˘ed
);

839 
	`ASSERT_NOT_NULL
(
buckë
);

841 i‡(
check_buckë
) {

842 
	`ASSERT_EQUAL
(
ex≥˘ed_bucked_id
, 
buckë
->
buckë_id
);

845 
	`ASSERT_EQUAL
(
ex≥˘ed_˘x
, 
˘x
);

847 
ˇŒ_com∂ëed
++;

848 
	}
}

850 
	$mock_log_evít_Áûed_‚
(*
˘x
, c⁄° 
kØ_log_buckë_öfo_t
 *
buckë
)

852 
	`ASSERT_TRUE
(
Áûed_ˇŒ_is_ex≥˘ed
);

854 
ˇŒ_is_ex≥˘ed
 = 1;

855 
	`mock_log_evít_gíîic_‚
(
˘x
, 
buckë
);

857 
Áûed_ˇŒ_com∂ëed
++;

858 
	}
}

860 
	$mock_log_evít_suc˚ss_‚
(*
˘x
, c⁄° 
kØ_log_buckë_öfo_t
 *
buckë
)

862 
	`ASSERT_TRUE
(
suc˚ss_ˇŒ_is_ex≥˘ed
);

864 
ˇŒ_is_ex≥˘ed
 = 1;

865 
	`mock_log_evít_gíîic_‚
(
˘x
, 
buckë
);

867 
suc˚ss_ˇŒ_com∂ëed
++;

868 
	}
}

870 
	$mock_log_evít_timeout_‚
(*
˘x
, c⁄° 
kØ_log_buckë_öfo_t
 *
buckë
)

872 
	`ASSERT_TRUE
(
timeout_ˇŒ_is_ex≥˘ed
);

874 
ˇŒ_is_ex≥˘ed
 = 1;

875 
	`mock_log_evít_gíîic_‚
(
˘x
, 
buckë
);

877 
timeout_ˇŒ_com∂ëed
++;

878 
	}
}

884 
	$KAA_GROUP_SETUP
(
log_£âîs
)

886 ()
°©e
;

887 
kØ_îr‹_t
 
rc
;

889 
rc
 = 
	`kØ_log_cﬁÀ˘‹_¸óã
(&
log_cﬁÀ˘‹
,

890 
°©us
,

891 
ch™√l_m™agî
,

892 
loggî
);

894 
	`ASSERT_EQUAL
(
KAA_ERR_NONE
, 
rc
);

898 
	`mem£t
(&
ã°_°øãgy1
, 0, (test_strategy1));

899 
	`mem£t
(&
ã°_°øãgy2
, 0, (test_strategy2));

901 
kØ_log_buckë_c⁄°øöts_t
 
c⁄°øöts
 = {

902 .
max_buckë_size
 = 2 * 
ã°_log_ªc‹d_size
,

903 .
max_buckë_log_cou¡
 = 
UINT32_MAX
,

908 
ã°_°‹age1
 = 
	`¸óã_mock_°‹age
();

909 
ã°_°‹age2
 = 
	`¸óã_mock_°‹age
();

911 
rc
 = 
	`kØ_loggög_öô
(
log_cﬁÀ˘‹
, 
ã°_°‹age1
,

912 &
ã°_°øãgy1
, &
c⁄°øöts
);

913 
	`ASSERT_EQUAL
(
KAA_ERR_NONE
, 
rc
);

915 
ex≥˘ed_˘x
 = 
NULL
;

916 
ex≥˘ed_bucked_id
 = 0;

917 
ˇŒ_is_ex≥˘ed
 = 0;

920 
	}
}

922 
	$KAA_GROUP_TEARDOWN
(
log_£âîs
)

924 ()
°©e
;

928 
	`kØ_log_cﬁÀ˘‹_de°roy
(
log_cﬁÀ˘‹
);

929 
log_cﬁÀ˘‹
 = 
NULL
;

932 
	}
}

935 
	$KAA_TEST_CASE_EX
(
log_£âîs
, 
£t_°øãgy_övÆid_∑ømëîs
)

937 ()
°©e
;

938 
kØ_îr‹_t
 
rc
;

940 
rc
 = 
	`kØ_loggög_£t_°øãgy
(
log_cﬁÀ˘‹
, 
NULL
);

941 
	`ASSERT_EQUAL
(
KAA_ERR_BADPARAM
, 
rc
);

943 
rc
 = 
	`kØ_loggög_£t_°øãgy
(
NULL
, &
ã°_°øãgy2
);

944 
	`ASSERT_EQUAL
(
KAA_ERR_BADPARAM
, 
rc
);

946 
	`ext_log_°‹age_de°roy
(
ã°_°‹age2
);

947 
	`ext_log_u∂ﬂd_°øãgy_de°roy
(&
ã°_°øãgy2
);

948 
	}
}

951 
	$KAA_TEST_CASE_EX
(
log_£âîs
, 
£t_°‹age_övÆid_∑ømëîs
)

953 ()
°©e
;

954 
kØ_îr‹_t
 
rc
;

956 
rc
 = 
	`kØ_loggög_£t_°‹age
(
log_cﬁÀ˘‹
, 
NULL
);

957 
	`ASSERT_EQUAL
(
KAA_ERR_BADPARAM
, 
rc
);

959 
rc
 = 
	`kØ_loggög_£t_°‹age
(
NULL
, 
ã°_°‹age2
);

960 
	`ASSERT_EQUAL
(
KAA_ERR_BADPARAM
, 
rc
);

962 
	`ext_log_°‹age_de°roy
(
ã°_°‹age2
);

963 
	`ext_log_u∂ﬂd_°øãgy_de°roy
(&
ã°_°øãgy2
);

964 
	}
}

966 
	$KAA_TEST_CASE_EX
(
log_£âîs
, 
£t_°øãgy_vÆid_∑ømëîs
)

968 ()
°©e
;

969 
kØ_îr‹_t
 
rc
;

972 
rc
 = 
	`kØ_loggög_£t_°øãgy
(
log_cﬁÀ˘‹
, &
ã°_°øãgy2
);

973 
	`ASSERT_EQUAL
(
KAA_ERR_NONE
, 
rc
);

975 
	`ext_log_°‹age_de°roy
(
ã°_°‹age2
);

978 
	}
}

981 
	$KAA_TEST_CASE_EX
(
log_£âîs
, 
£t_°‹age_vÆid_∑ømëîs
)

983 ()
°©e
;

984 
kØ_îr‹_t
 
rc
;

987 
rc
 = 
	`kØ_loggög_£t_°‹age
(
log_cﬁÀ˘‹
, 
ã°_°‹age2
);

988 
	`ASSERT_EQUAL
(
KAA_ERR_NONE
, 
rc
);

990 
	`ext_log_u∂ﬂd_°øãgy_de°roy
(&
ã°_°øãgy2
);

993 
	}
}

1001 
	$KAA_GROUP_SETUP
(
log_ˇŒback_basic
)

1003 ()
°©e
;

1004 
kØ_îr‹_t
 
îr‹_code
;

1006 
îr‹_code
 = 
	`kØ_log_cﬁÀ˘‹_¸óã
(&
log_cﬁÀ˘‹
,

1007 
°©us
,

1008 
ch™√l_m™agî
,

1009 
loggî
);

1011 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

1013 
	`mem£t
(&
ã°_°øãgy1
, 0, (test_strategy1));

1015 
kØ_log_buckë_c⁄°øöts_t
 
c⁄°øöts
 = {

1016 .
max_buckë_size
 = 2 * 
ã°_log_ªc‹d_size
,

1017 .
max_buckë_log_cou¡
 = 
UINT32_MAX
,

1020 
îr‹_code
 = 
	`kØ_loggög_öô
(
log_cﬁÀ˘‹
, 
	`¸óã_mock_°‹age
(), &
ã°_°øãgy1
, &
c⁄°øöts
);

1021 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

1023 
ex≥˘ed_˘x
 = 
NULL
;

1024 
ex≥˘ed_bucked_id
 = 0;

1025 
ˇŒ_is_ex≥˘ed
 = 0;

1028 
	}
}

1030 
	$KAA_GROUP_TEARDOWN
(
log_ˇŒback_basic
)

1032 ()
°©e
;

1034 
	`kØ_log_cﬁÀ˘‹_de°roy
(
log_cﬁÀ˘‹
);

1035 
log_cﬁÀ˘‹
 = 
NULL
;

1038 
	}
}

1040 
	$KAA_TEST_CASE_EX
(
log_ˇŒback_basic
, 
övÆid_∑ømëîs
)

1042 ()
°©e
;

1044 
kØ_log_dñivîy_li°íî_t
 
li°íîs
 = {

1045 .
⁄_suc˚ss
 = 
NULL
,

1046 .
⁄_Áûed
 = 
NULL
,

1047 .
⁄_timeout
 = 
NULL
,

1048 .
˘x
 = 
NULL
,

1053 
kØ_îr‹_t
 
rc
 = 
	`kØ_loggög_£t_li°íîs
(
log_cﬁÀ˘‹
, 
NULL
);

1054 
	`ASSERT_EQUAL
(
KAA_ERR_BADPARAM
, 
rc
);

1055 
rc
 = 
	`kØ_loggög_£t_li°íîs
(
NULL
, &
li°íîs
);

1056 
	`ASSERT_EQUAL
(
KAA_ERR_BADPARAM
, 
rc
);

1059 
	}
}

1063 
	$KAA_TEST_CASE_EX
(
log_ˇŒback_basic
, 
vÆid_∑ømëîs
)

1065 ()
°©e
;

1067 
kØ_îr‹_t
 
rc
;

1069 
kØ_log_dñivîy_li°íî_t
 
li°íîs
 = {

1070 
mock_log_evít_gíîic_‚
,

1071 
mock_log_evít_gíîic_‚
,

1072 
mock_log_evít_gíîic_‚
,

1073 
NULL
,

1078 
rc
 = 
	`kØ_loggög_£t_li°íîs
(
log_cﬁÀ˘‹
, &
li°íîs
);

1079 
	`ASSERT_EQUAL
(
KAA_ERR_NONE
, 
rc
);

1081 
li°íîs
.
⁄_Áûed
 = 
NULL
;

1082 
rc
 = 
	`kØ_loggög_£t_li°íîs
(
log_cﬁÀ˘‹
, &
li°íîs
);

1083 
	`ASSERT_EQUAL
(
KAA_ERR_NONE
, 
rc
);

1085 
li°íîs
.
⁄_suc˚ss
 = 
NULL
;

1086 
rc
 = 
	`kØ_loggög_£t_li°íîs
(
log_cﬁÀ˘‹
, &
li°íîs
);

1087 
	`ASSERT_EQUAL
(
KAA_ERR_NONE
, 
rc
);

1089 
li°íîs
.
⁄_timeout
 = 
NULL
;

1090 
rc
 = 
	`kØ_loggög_£t_li°íîs
(
log_cﬁÀ˘‹
, &
li°íîs
);

1091 
	`ASSERT_EQUAL
(
KAA_ERR_NONE
, 
rc
);

1094 
rc
 = 
	`kØ_loggög_£t_li°íîs
(
log_cﬁÀ˘‹
, &
KAA_LOG_EMPTY_LISTENERS
);

1095 
	`ASSERT_EQUAL
(
KAA_ERR_NONE
, 
rc
);

1100 
	`ASSERT_FALSE
(
ˇŒ_com∂ëed
);

1101 
	}
}

1107 
	$KAA_GROUP_SETUP
(
log_ˇŒback_wôh_°‹age
)

1109 ()
°©e
;

1110 
kØ_îr‹_t
 
îr‹_code
;

1112 
îr‹_code
 = 
	`kØ_log_cﬁÀ˘‹_¸óã
(&
log_cﬁÀ˘‹
,

1113 
°©us
,

1114 
ch™√l_m™agî
,

1115 
loggî
);

1117 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

1119 
	`mem£t
(&
ã°_°øãgy1
, 0, (
mock_°øãgy_c⁄ãxt_t
));

1120 
	`mem£t
(
ã°_ªadî_buf„r
, 0, (test_reader_buffer));

1121 
	`mem£t
(
ã°_wrôî_buf„r
, 0, (test_writer_buffer));

1123 
ex≥˘ed_˘x
 = 
NULL
;

1124 
ex≥˘ed_bucked_id
 = 0;

1125 
ˇŒ_is_ex≥˘ed
 = 0;

1126 
ˇŒ_com∂ëed
 = 0;

1127 
Áûed_ˇŒ_com∂ëed
 = 0;

1128 
Áûed_ˇŒ_is_ex≥˘ed
 = 0;

1129 
suc˚ss_ˇŒ_com∂ëed
 = 0;

1130 
suc˚ss_ˇŒ_is_ex≥˘ed
 = 0;

1131 
check_buckë
 = 0;

1133 
ã°_°‹age1
 = 
	`¸óã_mock_°‹age
();

1134 
kØ_log_buckë_c⁄°øöts_t
 
c⁄°øöts
 = {

1135 .
max_buckë_size
 = 2 * 
ã°_log_ªc‹d_size
,

1136 .
max_buckë_log_cou¡
 = 
UINT32_MAX
,

1139 
îr‹_code
 = 
	`kØ_loggög_öô
(
log_cﬁÀ˘‹
, 
ã°_°‹age1
,

1140 &
ã°_°øãgy1
, &
c⁄°øöts
);

1141 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

1144 
uöt32_t
 
ª•⁄£_cou¡
 = 2;

1145 
ª•⁄£_∑ckë
 *
ª•⁄£
 = (ª•⁄£_∑ckë *Ë
ã°_ªadî_buf„r
;

1146 *(
uöt32_t
 *Ë
ª•⁄£
->
ª•_˙t
 = 
	`KAA_HTONL
(
ª•⁄£_cou¡
);

1151 *(
uöt16_t
 *Ë
ª•⁄£
->
ª•s
[
RESP_SUCCESS_IDX
].
buckë_id
 = 0;

1152 
ª•⁄£
->
ª•s
[
RESP_SUCCESS_IDX
].
ª•_code
 = 0;

1157 *(
uöt16_t
 *Ë
ª•⁄£
->
ª•s
[
RESP_FAILURE_IDX
].
buckë_id
 = 0;

1158 
ª•⁄£
->
ª•s
[
RESP_FAILURE_IDX
].
ª•_code
 = 1;

1160 
ã°_fûÀd_size
 = (
ª•⁄£_∑ckë
)

1161 + (
ª•⁄£_chunk
) * 2;

1163 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªadî_¸óã
(

1164 &
ã°_ªadî
,

1165 (c⁄° 
uöt8_t
 *)
ã°_ªadî_buf„r
,

1166 
ã°_fûÀd_size
);

1168 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

1169 
	`ASSERT_NOT_NULL
(
ã°_ªadî
);

1172 
	}
}

1174 
	$KAA_GROUP_TEARDOWN
(
log_ˇŒback_wôh_°‹age
)

1176 ()
°©e
;

1178 
	`kØ_∂©f‹m_mesßge_ªadî_de°roy
(
ã°_ªadî
);

1179 
ã°_ªadî
 = 
NULL
;

1181 
	`kØ_log_cﬁÀ˘‹_de°roy
(
log_cﬁÀ˘‹
);

1182 
log_cﬁÀ˘‹
 = 
NULL
;

1185 
	}
}

1187 
	$KAA_TEST_CASE_EX
(
log_ˇŒback_wôh_°‹age
, 
⁄_Áû_ˇŒed
)

1189 ()
°©e
;

1191 
kØ_îr‹_t
 
rc
;

1192 
dummy_˘x
;

1194 
kØ_log_dñivîy_li°íî_t
 
li°íîs
 = {

1195 
NULL
,

1196 
mock_log_evít_Áûed_‚
,

1197 
NULL
,

1198 &
dummy_˘x
,

1202 
Áûed_ˇŒ_is_ex≥˘ed
 = 1;

1203 
ex≥˘ed_˘x
 = &
dummy_˘x
;

1204 
check_buckë
 = 1;

1205 
ex≥˘ed_bucked_id
 = 42;

1207 
rc
 = 
	`kØ_loggög_£t_li°íîs
(
log_cﬁÀ˘‹
, &
li°íîs
);

1208 
	`ASSERT_EQUAL
(
KAA_ERR_NONE
, 
rc
);

1211 
ª•⁄£_∑ckë
 *
ª•⁄£
 = (ª•⁄£_∑ckë *Ë
ã°_ªadî_buf„r
;

1212 *(
uöt16_t
 *Ë
ª•⁄£
->
ª•s
[
RESP_FAILURE_IDX
].
buckë_id
 = 
	`KAA_HTONS
(
ex≥˘ed_bucked_id
);

1215 
rc
 = 
	`kØ_loggög_h™dÀ_£rvî_sync
(
log_cﬁÀ˘‹
, 
ã°_ªadî
, 
TEST_EXT_OP
, 
ã°_fûÀd_size
);

1217 
	`ASSERT_EQUAL
(
rc
, 
KAA_ERR_NONE
);

1221 
	`ASSERT_FALSE
(
suc˚ss_ˇŒ_com∂ëed
);

1222 
	`ASSERT_TRUE
(
Áûed_ˇŒ_com∂ëed
);

1223 
	`ASSERT_FALSE
(
timeout_ˇŒ_com∂ëed
);

1224 
	}
}

1226 
	$KAA_TEST_CASE_EX
(
log_ˇŒback_wôh_°‹age
, 
⁄_suc˚ss_ˇŒed
)

1228 ()
°©e
;

1230 
kØ_îr‹_t
 
rc
;

1231 
dummy_˘x
;

1233 
kØ_log_dñivîy_li°íî_t
 
li°íîs
 = {

1234 
mock_log_evít_suc˚ss_‚
,

1235 
NULL
,

1236 
NULL
,

1237 &
dummy_˘x
,

1241 
check_buckë
 = 1;

1242 
ex≥˘ed_bucked_id
 = 42;

1243 
suc˚ss_ˇŒ_is_ex≥˘ed
 = 1;

1244 
ex≥˘ed_˘x
 = &
dummy_˘x
;

1246 
rc
 = 
	`kØ_loggög_£t_li°íîs
(
log_cﬁÀ˘‹
, &
li°íîs
);

1247 
	`ASSERT_EQUAL
(
KAA_ERR_NONE
, 
rc
);

1250 
ª•⁄£_∑ckë
 *
ª•⁄£
 = (ª•⁄£_∑ckë *Ë
ã°_ªadî_buf„r
;

1251 *(
uöt16_t
 *Ë
ª•⁄£
->
ª•s
[
RESP_SUCCESS_IDX
].
buckë_id
 = 
	`KAA_HTONS
(
ex≥˘ed_bucked_id
);

1254 
rc
 = 
	`kØ_loggög_h™dÀ_£rvî_sync
(
log_cﬁÀ˘‹
, 
ã°_ªadî
, 
TEST_EXT_OP
, 
ã°_fûÀd_size
);

1256 
	`ASSERT_EQUAL
(
rc
, 
KAA_ERR_NONE
);

1260 
	`ASSERT_TRUE
(
suc˚ss_ˇŒ_com∂ëed
);

1261 
	`ASSERT_FALSE
(
Áûed_ˇŒ_com∂ëed
);

1262 
	`ASSERT_FALSE
(
timeout_ˇŒ_com∂ëed
);

1263 
	}
}

1265 
	$KAA_TEST_CASE_EX
(
log_ˇŒback_wôh_°‹age
, 
⁄_Áû_™d_suc˚ss_ˇŒed
)

1267 ()
°©e
;

1269 
kØ_îr‹_t
 
rc
;

1270 
dummy_˘x
;

1272 
kØ_log_dñivîy_li°íî_t
 
li°íîs
 = {

1273 
mock_log_evít_suc˚ss_‚
,

1274 
mock_log_evít_Áûed_‚
,

1275 
NULL
,

1276 &
dummy_˘x
,

1280 
check_buckë
 = 1;

1281 
ex≥˘ed_bucked_id
 = 42;

1282 
Áûed_ˇŒ_is_ex≥˘ed
 = 1;

1283 
suc˚ss_ˇŒ_is_ex≥˘ed
 = 1;

1284 
ex≥˘ed_˘x
 = &
dummy_˘x
;

1286 
rc
 = 
	`kØ_loggög_£t_li°íîs
(
log_cﬁÀ˘‹
, &
li°íîs
);

1287 
	`ASSERT_EQUAL
(
KAA_ERR_NONE
, 
rc
);

1290 
ª•⁄£_∑ckë
 *
ª•⁄£
 = (ª•⁄£_∑ckë *Ë
ã°_ªadî_buf„r
;

1291 *(
uöt16_t
 *Ë
ª•⁄£
->
ª•s
[
RESP_SUCCESS_IDX
].
buckë_id


1292 
	`KAA_HTONS
(
ex≥˘ed_bucked_id
);

1293 *(
uöt16_t
 *Ë
ª•⁄£
->
ª•s
[
RESP_FAILURE_IDX
].
buckë_id


1294 
	`KAA_HTONS
(
ex≥˘ed_bucked_id
);

1297 
rc
 = 
	`kØ_loggög_h™dÀ_£rvî_sync
(
log_cﬁÀ˘‹
, 
ã°_ªadî
, 
TEST_EXT_OP
, 
ã°_fûÀd_size
);

1299 
	`ASSERT_EQUAL
(
rc
, 
KAA_ERR_NONE
);

1303 
	`ASSERT_TRUE
(
suc˚ss_ˇŒ_com∂ëed
);

1304 
	`ASSERT_TRUE
(
Áûed_ˇŒ_com∂ëed
);

1305 
	`ASSERT_FALSE
(
timeout_ˇŒ_com∂ëed
);

1306 
	}
}

1313 
	$KAA_GROUP_SETUP
(
log_ˇŒback_wôh_°‹age_™d_°øãgy
)

1315 ()
°©e
;

1316 
kØ_îr‹_t
 
îr‹_code
;

1317 
size_t
 
ã°_log_ªc‹d_size
;

1319 
îr‹_code
 = 
	`kØ_log_cﬁÀ˘‹_¸óã
(&
log_cﬁÀ˘‹
,

1320 
°©us
,

1321 
ch™√l_m™agî
,

1322 
loggî
);

1324 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

1326 
	`mem£t
(&
ã°_°øãgy1
, 0, (
mock_°øãgy_c⁄ãxt_t
));

1327 
ã°_°øãgy1
.
timeout
 = 
TEST_TIMEOUT
;

1328 
ã°_°øãgy1
.
decisi⁄
 = 
NOOP
;

1329 
ã°_°øãgy1
.
max_∑øŒñ_u∂ﬂds
 = 
UINT32_MAX
;

1331 
kØ_log_buckë_c⁄°øöts_t
 
c⁄°øöts
 = {

1332 .
max_buckë_size
 = 
TEST_BUFFER_SIZE
,

1333 .
max_buckë_log_cou¡
 = 
UINT32_MAX
,

1336 
ex≥˘ed_˘x
 = 
NULL
;

1337 
ex≥˘ed_bucked_id
 = 0;

1338 
ˇŒ_is_ex≥˘ed
 = 0;

1339 
ˇŒ_com∂ëed
 = 0;

1340 
Áûed_ˇŒ_com∂ëed
 = 0;

1341 
Áûed_ˇŒ_is_ex≥˘ed
 = 0;

1342 
suc˚ss_ˇŒ_com∂ëed
 = 0;

1343 
suc˚ss_ˇŒ_is_ex≥˘ed
 = 0;

1344 
timeout_ˇŒ_com∂ëed
 = 0;

1345 
check_buckë
 = 0;

1347 
îr‹_code
 = 
	`kØ_loggög_öô
(
log_cﬁÀ˘‹
, 
	`¸óã_mock_°‹age
(),

1348 &
ã°_°øãgy1
, &
c⁄°øöts
);

1350 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

1352 
uöt32_t
 
ª•⁄£_cou¡
 = 2;

1354 
ª•⁄£_∑ckë
 *
ª•⁄£
 = (ª•⁄£_∑ckë *Ë
ã°_ªadî_buf„r
;

1355 *(
uöt32_t
 *Ë
ª•⁄£
->
ª•_˙t
 = 
	`KAA_HTONL
(
ª•⁄£_cou¡
);

1360 *(
uöt16_t
 *Ë
ª•⁄£
->
ª•s
[
RESP_SUCCESS_IDX
].
buckë_id
 = 0;

1361 
ª•⁄£
->
ª•s
[
RESP_SUCCESS_IDX
].
ª•_code
 = 0;

1366 *(
uöt16_t
 *Ë
ª•⁄£
->
ª•s
[
RESP_FAILURE_IDX
].
buckë_id
 = 0;

1367 
ª•⁄£
->
ª•s
[
RESP_FAILURE_IDX
].
ª•_code
 = 1;

1369 
ã°_fûÀd_size
 = (
ª•⁄£_∑ckë
)

1370 + (
ª•⁄£_chunk
) * 2;

1372 
ã°_log_ªc‹d
 = 
	`kØ_ã°_log_ªc‹d_¸óã
();

1373 
ã°_log_ªc‹d
->
d©a
 = 
	`kØ_°rög_c›y_¸óã
(
TEST_LOG_BUFFER
);

1374 
ã°_log_ªc‹d_size
 = 
ã°_log_ªc‹d
->
	`gë_size
(test_log_record);

1376 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªadî_¸óã
(

1377 &
ã°_ªadî
,

1378 (c⁄° 
uöt8_t
 *)
ã°_ªadî_buf„r
,

1379 
ã°_fûÀd_size
);

1381 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

1382 
	`ASSERT_NOT_NULL
(
ã°_ªadî
);

1384 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôî_¸óã
(

1385 &
ã°_wrôî
,

1386 (
uöt8_t
 *)
ã°_wrôî_buf„r
,

1387 
ã°_log_ªc‹d_size
);

1388 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

1391 
	}
}

1393 
	$KAA_GROUP_TEARDOWN
(
log_ˇŒback_wôh_°‹age_™d_°øãgy
)

1395 ()
°©e
;

1397 
ã°_log_ªc‹d
->
	`de°roy
(test_log_record);

1399 
	`kØ_∂©f‹m_mesßge_wrôî_de°roy
(
ã°_wrôî
);

1400 
ã°_wrôî
 = 
NULL
;

1401 
	`kØ_∂©f‹m_mesßge_ªadî_de°roy
(
ã°_ªadî
);

1402 
ã°_ªadî
 = 
NULL
;

1405 
	`kØ_log_cﬁÀ˘‹_de°roy
(
log_cﬁÀ˘‹
);

1406 
log_cﬁÀ˘‹
 = 
NULL
;

1409 
	}
}

1411 
	$KAA_TEST_CASE_EX
(
log_ˇŒback_wôh_°‹age_™d_°øãgy
, 
⁄_timeout_ˇŒed
)

1413 ()
°©e
;

1415 
kØ_îr‹_t
 
rc
;

1416 
dummy_˘x
;

1418 
kØ_log_dñivîy_li°íî_t
 
li°íîs
 = {

1419 
NULL
,

1420 
NULL
,

1421 
mock_log_evít_timeout_‚
,

1422 &
dummy_˘x
,

1425 
kØ_log_ªc‹d_öfo_t
 
buckë
;

1427 
timeout_ˇŒ_is_ex≥˘ed
 = 1;

1428 
ex≥˘ed_˘x
 = &
dummy_˘x
;

1430 
rc
 = 
	`kØ_loggög_£t_li°íîs
(
log_cﬁÀ˘‹
, &
li°íîs
);

1431 
	`ASSERT_EQUAL
(
KAA_ERR_NONE
, 
rc
);

1433 
rc
 = 
	`kØ_loggög_add_ªc‹d
(
log_cﬁÀ˘‹
, 
ã°_log_ªc‹d
, &
buckë
);

1434 
	`ASSERT_EQUAL
(
KAA_ERR_NONE
, 
rc
);

1437 
check_buckë
 = 1;

1438 
ex≥˘ed_bucked_id
 = 
buckë
.
buckë_id
;

1442 
rc
 = 
	`kØ_loggög_ªque°_£rülize
(
log_cﬁÀ˘‹
, 
ã°_wrôî
);

1443 
	`ASSERT_EQUAL
(
KAA_ERR_NONE
, 
rc
);

1445 
	`¶ìp
(
TEST_TIMEOUT
 + 1);

1447 
rc
 = 
	`kØ_loggög_add_ªc‹d
(
log_cﬁÀ˘‹
, 
ã°_log_ªc‹d
, 
NULL
);

1448 
	`ASSERT_EQUAL
(
KAA_ERR_NONE
, 
rc
);

1453 
	`ASSERT_EQUAL
(1, 
timeout_ˇŒ_com∂ëed
);

1454 
	}
}

1463 
	$KAA_GROUP_SETUP
(
log_adv™˚d_timeouts
)

1465 ()
°©e
;

1466 
kØ_îr‹_t
 
îr‹_code
;

1467 
size_t
 
ã°_log_ªc‹d_size
;

1469 
îr‹_code
 = 
	`kØ_log_cﬁÀ˘‹_¸óã
(&
log_cﬁÀ˘‹
, 
°©us
, 
ch™√l_m™agî
, 
loggî
);

1471 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

1473 
	`mem£t
(&
ã°_°øãgy1
, 0, (test_strategy1));

1474 
ã°_°øãgy1
.
timeout
 = 
TEST_TIMEOUT
;

1475 
ã°_°øãgy1
.
decisi⁄
 = 
NOOP
;

1476 
ã°_°øãgy1
.
max_∑øŒñ_u∂ﬂds
 = 
UINT32_MAX
;

1478 
kØ_log_buckë_c⁄°øöts_t
 
c⁄°øöts
 = {

1479 .
max_buckë_size
 = 
TEST_BUFFER_SIZE
,

1480 .
max_buckë_log_cou¡
 = 1,

1483 
ex≥˘ed_˘x
 = 
NULL
;

1484 
ex≥˘ed_bucked_id
 = 0;

1485 
ˇŒ_is_ex≥˘ed
 = 0;

1486 
ˇŒ_com∂ëed
 = 0;

1487 
Áûed_ˇŒ_com∂ëed
 = 0;

1488 
Áûed_ˇŒ_is_ex≥˘ed
 = 0;

1489 
suc˚ss_ˇŒ_com∂ëed
 = 0;

1490 
suc˚ss_ˇŒ_is_ex≥˘ed
 = 0;

1491 
timeout_ˇŒ_com∂ëed
 = 0;

1492 
check_buckë
 = 0;

1494 
îr‹_code
 = 
	`kØ_loggög_öô
(
log_cﬁÀ˘‹
, 
	`¸óã_mock_°‹age
(), &
ã°_°øãgy1
, &
c⁄°øöts
);

1496 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

1498 
ã°_log_ªc‹d
 = 
	`kØ_ã°_log_ªc‹d_¸óã
();

1499 
ã°_log_ªc‹d
->
d©a
 = 
	`kØ_°rög_c›y_¸óã
(
TEST_LOG_BUFFER
);

1500 
ã°_log_ªc‹d_size
 = 
ã°_log_ªc‹d
->
	`gë_size
(test_log_record);

1502 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

1504 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôî_¸óã
(&
ã°_wrôî
,

1505 (
uöt8_t
 *)
ã°_wrôî_buf„r
,

1506 
ã°_log_ªc‹d_size
);

1507 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

1510 
	}
}

1512 
	$KAA_GROUP_TEARDOWN
(
log_adv™˚d_timeouts
)

1514 ()
°©e
;

1516 
ã°_log_ªc‹d
->
	`de°roy
(test_log_record);

1518 
	`kØ_∂©f‹m_mesßge_wrôî_de°roy
(
ã°_wrôî
);

1519 
ã°_wrôî
 = 
NULL
;

1522 
	`kØ_log_cﬁÀ˘‹_de°roy
(
log_cﬁÀ˘‹
);

1523 
log_cﬁÀ˘‹
 = 
NULL
;

1526 
	}
}

1528 
	$KAA_TEST_CASE_EX
(
log_adv™˚d_timeouts
, 
„w_buckës
)

1530 ()
°©e
;

1532 
kØ_îr‹_t
 
rc
;

1533 
dummy_˘x
;

1535 
kØ_log_dñivîy_li°íî_t
 
li°íîs
 = {

1536 
NULL
,

1537 
NULL
,

1538 
mock_log_evít_timeout_‚
,

1539 &
dummy_˘x
,

1542 
kØ_log_ªc‹d_öfo_t
 
buckë
;

1544 
timeout_ˇŒ_is_ex≥˘ed
 = 1;

1545 
ex≥˘ed_˘x
 = &
dummy_˘x
;

1547 
ã°_°øãgy1
.
timeout
 = 1;

1550 
ã°_°øãgy1
.
timeout_ªtvÆ
 = 
KAA_ERR_EVENT_NOT_ATTACHED
;

1554 
rc
 = 
	`kØ_loggög_£t_li°íîs
(
log_cﬁÀ˘‹
, &
li°íîs
);

1555 
	`ASSERT_EQUAL
(
KAA_ERR_NONE
, 
rc
);

1557 
rc
 = 
	`kØ_loggög_add_ªc‹d
(
log_cﬁÀ˘‹
, 
ã°_log_ªc‹d
, &
buckë
);

1558 
	`ASSERT_EQUAL
(
KAA_ERR_NONE
, 
rc
);

1560 
rc
 = 
	`kØ_loggög_add_ªc‹d
(
log_cﬁÀ˘‹
, 
ã°_log_ªc‹d
, &
buckë
);

1561 
	`ASSERT_EQUAL
(
KAA_ERR_NONE
, 
rc
);

1563 
rc
 = 
	`kØ_loggög_add_ªc‹d
(
log_cﬁÀ˘‹
, 
ã°_log_ªc‹d
, &
buckë
);

1564 
	`ASSERT_EQUAL
(
KAA_ERR_NONE
, 
rc
);

1568 
rc
 = 
	`kØ_loggög_ªque°_£rülize
(
log_cﬁÀ˘‹
, 
ã°_wrôî
);

1569 
	`ASSERT_EQUAL
(
KAA_ERR_NONE
, 
rc
);

1571 
ã°_wrôî
->
cuºít
 =Åe°_wrôî->
begö
;

1574 
ã°_°øãgy1
.
timeout
 = 100;

1576 
rc
 = 
	`kØ_loggög_ªque°_£rülize
(
log_cﬁÀ˘‹
, 
ã°_wrôî
);

1577 
	`ASSERT_EQUAL
(
KAA_ERR_NONE
, 
rc
);

1579 
ã°_wrôî
->
cuºít
 =Åe°_wrôî->
begö
;

1581 
rc
 = 
	`kØ_loggög_ªque°_£rülize
(
log_cﬁÀ˘‹
, 
ã°_wrôî
);

1582 
	`ASSERT_EQUAL
(
KAA_ERR_NONE
, 
rc
);

1584 
	`¶ìp
(
TEST_TIMEOUT
 + 2);

1587 
	`ext_log_u∂ﬂd_timeout
(
log_cﬁÀ˘‹
);

1592 
	`ASSERT_EQUAL
(3, 
timeout_ˇŒ_com∂ëed
);

1593 
	}
}

1599 
	$ã°_öô
()

1601 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_log_¸óã
(&
loggî
, 
KAA_MAX_LOG_MESSAGE_LENGTH
, 
KAA_MAX_LOG_LEVEL
, 
NULL
);

1602 i‡(
îr‹
 || !
loggî
) {

1603  
îr‹
;

1606 
kØ_c⁄ãxt
.
loggî
 =Üogger;

1608 
îr‹
 = 
	`kØ_°©us_¸óã
(&
°©us
);

1609 i‡(
îr‹
 || !
°©us
) {

1610  
îr‹
;

1613 
îr‹
 = 
	`kØ_ch™√l_m™agî_¸óã
(&
ch™√l_m™agî
, &
kØ_c⁄ãxt
);

1614 i‡(
îr‹
 || !
ch™√l_m™agî
) {

1615  
îr‹
;

1618 
	}
}

1622 
	$ã°_deöô
()

1624 
	`kØ_ch™√l_m™agî_de°roy
(
ch™√l_m™agî
);

1625 
	`kØ_°©us_de°roy
(
°©us
);

1626 
	`kØ_log_de°roy
(
loggî
);

1629 
	}
}

1631 
KAA_SUITE_MAIN
(
Log
, 
ã°_öô
, 
ã°_deöô
,

1632 
	$KAA_TEST_CASE
(
¸óã_ªque°
, 
ã°_¸óã_ªque°
)

1633 
	$KAA_TEST_CASE
(
¥o˚ss_ª•⁄£
, 
ã°_ª•⁄£
)

1634 
	$KAA_TEST_CASE
(
¥o˚ss_timeout
, 
ã°_timeout
)

1635 
	$KAA_TEST_CASE
(
de˛öe_timeout
, 
ã°_de˛öe_timeout
)

1636 
	$KAA_TEST_CASE
(
max_∑øŒñ_u∂ﬂds_wôh_log_sync
, 
ã°_max_∑øŒñ_u∂ﬂds_wôh_log_sync
)

1637 
	$KAA_TEST_CASE
(
max_∑øŒñ_u∂ﬂds_wôh_sync_Æl
, 
ã°_max_∑øŒñ_u∂ﬂds_wôh_sync_Æl
)

1638 
	$KAA_RUN_TEST
(
log_£âîs
, 
£t_°øãgy_övÆid_∑ømëîs
)

1639 
	$KAA_RUN_TEST
(
log_£âîs
, 
£t_°øãgy_vÆid_∑ømëîs
)

1640 
	$KAA_RUN_TEST
(
log_£âîs
, 
£t_°‹age_övÆid_∑ømëîs
)

1641 
	$KAA_RUN_TEST
(
log_£âîs
, 
£t_°‹age_vÆid_∑ømëîs
)

1642 
	$KAA_RUN_TEST
(
log_ˇŒback_basic
, 
vÆid_∑ømëîs
)

1643 
	$KAA_RUN_TEST
(
log_ˇŒback_basic
, 
övÆid_∑ømëîs
)

1644 
	$KAA_RUN_TEST
(
log_ˇŒback_basic
, 
vÆid_∑ømëîs
)

1645 
	$KAA_RUN_TEST
(
log_ˇŒback_wôh_°‹age
, 
⁄_suc˚ss_ˇŒed
)

1646 
	$KAA_RUN_TEST
(
log_ˇŒback_wôh_°‹age
, 
⁄_Áû_ˇŒed
)

1647 
	$KAA_RUN_TEST
(
log_ˇŒback_wôh_°‹age
, 
⁄_Áû_™d_suc˚ss_ˇŒed
)

1648 
	$KAA_RUN_TEST
(
log_ˇŒback_wôh_°‹age_™d_°øãgy
, 
⁄_timeout_ˇŒed
)

1649 
	`KAA_RUN_TEST
(
log_adv™˚d_timeouts
, 
„w_buckës
))

	@/var/www/html/debian/gateway/kaa/src/extensions/notification/kaa_notification_manager.c

17 
	~"kØ_¥iv©e.h
"

19 
	~"kØ_nŸifiˇti⁄_m™agî.h
"

21 
	~<°rög.h
>

22 
	~<°dio.h
>

24 
	~"kØ_°©us.h
"

25 
	~"kØ_∂©f‹m_comm⁄.h
"

26 
	~"utûôõs/kØ_mem.h
"

27 
	~"kØ_comm⁄.h
"

28 
	~"utûôõs/kØ_log.h
"

29 
	~"kØ_∂©f‹m_utûs.h
"

30 
	~"kØ_ch™√l_m™agî.h
"

31 
	~"∂©f‹m-im∂/comm⁄/kØ_ht⁄Œ.h
"

33 
	~"∂©f‹m/sock.h
"

35 
	skØ_nŸifiˇti⁄_m™agî_t
 {

36 
kØ_li°_t
 *
	mm™d©‹y_li°íîs
;

37 
kØ_li°_t
 *
	mt›ics_li°íîs
;

38 
kØ_li°_t
 *
	m›ti⁄Æ_li°íîs
;

39 
kØ_li°_t
 *
	msubs¸ùti⁄s
;

40 
kØ_li°_t
 *
	munsubs¸ùti⁄s
;

41 
kØ_li°_t
 *
	muids
;

42 
kØ_li°_t
 *
	mnŸifiˇti⁄s
;

43 
size_t
 
	mexãnsi⁄_∑ylﬂd_size
;

45 
kØ_∂©f‹m_mesßge_wrôî_t
 *
	mwrôî
;

47 
kØ_°©us_t
 *
	m°©us
;

48 
kØ_ch™√l_m™agî_t
 *
	mch™√l_m™agî
;

49 
kØ_loggî_t
 *
	mloggî
;

53 
	mKAA_CLIENT_WANTS_TO_RECEIVE_NOTIFICATIONS
 = 0x01,

54 
	mKAA_SUBSCRIBED_TOPIC_HASH_IS_PRESENT
 = 0x02,

55 } 
	tkØ_nŸifiˇti⁄_exãnsi⁄_Êags_t
;

58 
	mKAA_NO_DELTA
,

59 
	mKAA_DELTA
,

60 
	mKAA_RESYNC
,

61 } 
	tkØ_sync_ª•⁄£_°©us
;

64 
	mSYSTEM
 = 0x0,

65 
	mCUSTOM
 = 0x1,

66 } 
	tkØ_nŸifiˇti⁄_ty≥
;

69 
uöt16_t
 
	mÀngth
;

70 *
	md©a
;

71 } 
	tkØ_nŸifiˇti⁄s_uid_t
;

73 
	#TOPICS
 0x0

	)

74 
	#NOTIFICATIONS
 0x1

	)

75 
	#TOPICS_STATE_ID
 0x0

	)

76 
	#UID_ID
 0x1

	)

77 
	#SUBSCRIPTION_ID
 0x2

	)

78 
	#UNSUBSCRIPTION_ID
 0x3

	)

81 
uöt64_t
 
	mt›ic_id
;

82 
kØ_li°_t
 *
	mli°íîs
;

83 } 
	tkØ_›ti⁄Æ_nŸifiˇti⁄_li°íîs_wøµî_t
;

86 
uöt32_t
 
	mid
;

87 
kØ_nŸifiˇti⁄_li°íî_t
 
	mli°íî
;

88 } 
	tkØ_nŸifiˇti⁄_li°íî_wøµî_t
;

91 
uöt32_t
 
	mid
;

92 
kØ_t›ic_li°íî_t
 
	mli°íî
;

93 } 
	tkØ_t›ic_li°íî_wøµî_t
;

95 
kØ_îr‹_t
 
kØ_nŸifiˇti⁄_m™agî_¸óã
(
kØ_nŸifiˇti⁄_m™agî_t
 **
£lf
, 
kØ_°©us_t
 *
°©us
, 
kØ_ch™√l_m™agî_t
 *
ch™√l_m™agî
, 
kØ_loggî_t
 *
loggî
);

96 
kØ_nŸifiˇti⁄_m™agî_de°roy
(
kØ_nŸifiˇti⁄_m™agî_t
 *
£lf
);

98 
kØ_îr‹_t
 
kØ_nŸifiˇti⁄_m™agî_gë_size
(
kØ_nŸifiˇti⁄_m™agî_t
 *
£lf
, 
size_t
 *
ex≥˘ed_size
);

99 
kØ_îr‹_t
 
kØ_nŸifiˇti⁄_m™agî_ªque°_£rülize
(
kØ_nŸifiˇti⁄_m™agî_t
 *
£lf
,

100 
kØ_∂©f‹m_mesßge_wrôî_t
 *
wrôî
);

101 
kØ_îr‹_t
 
kØ_nŸifiˇti⁄_m™agî_h™dÀ_£rvî_sync
(
kØ_nŸifiˇti⁄_m™agî_t
 *
£lf
, 
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî
, 
uöt32_t
 
exãnsi⁄_Àngth
);

103 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_nŸifiˇti⁄_öô
(
kØ_c⁄ãxt_t
 *
kØ_c⁄ãxt
, **
c⁄ãxt
)

105 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_nŸifiˇti⁄_m™agî_¸óã
(&
kØ_c⁄ãxt
->
nŸifiˇti⁄_m™agî
,

106 
kØ_c⁄ãxt
->
°©us
->
°©us_ö°™˚
,

107 
kØ_c⁄ãxt
->
ch™√l_m™agî
,

108 
kØ_c⁄ãxt
->
loggî
);

109 *
c⁄ãxt
 = 
kØ_c⁄ãxt
->
nŸifiˇti⁄_m™agî
;

110  
îr‹
;

111 
	}
}

113 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_nŸifiˇti⁄_deöô
(*
c⁄ãxt
)

115 
	`kØ_nŸifiˇti⁄_m™agî_de°roy
(
c⁄ãxt
);

116  
KAA_ERR_NONE
;

117 
	}
}

119 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_nŸifiˇti⁄_ªque°_gë_size
(*
c⁄ãxt
, 
size_t
 *
ex≥˘ed_size
)

121  
	`kØ_nŸifiˇti⁄_m™agî_gë_size
(
c⁄ãxt
, 
ex≥˘ed_size
);

122 
	}
}

124 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_nŸifiˇti⁄_ªque°_£rülize
(*
c⁄ãxt
, 
uöt32_t
 
ªque°_id
,

125 
uöt8_t
 *
buf„r
, 
size_t
 *
size
, 
boﬁ
 *
√ed_ªsync
)

127 ()
ªque°_id
;

130 i‡(!
c⁄ãxt
 || !
size
 || !
√ed_ªsync
) {

131  
KAA_ERR_BADPARAM
;

134 *
√ed_ªsync
 = 
åue
;

136 
size_t
 
size_√eded
;

137 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_nŸifiˇti⁄_m™agî_gë_size
(
c⁄ãxt
, &
size_√eded
);

138 i‡(
îr‹
) {

139  
îr‹
;

142 i‡(!
buf„r
 || *
size
 < 
size_√eded
) {

143 *
size
 = 
size_√eded
;

144  
KAA_ERR_BUFFER_IS_NOT_ENOUGH
;

147 *
size
 = 
size_√eded
;

149 
kØ_∂©f‹m_mesßge_wrôî_t
 
wrôî
 = 
	`KAA_MESSAGE_WRITER
(
buf„r
, *
size
);

150 
îr‹
 = 
	`kØ_nŸifiˇti⁄_m™agî_ªque°_£rülize
(
c⁄ãxt
, &
wrôî
);

151 i‡(
îr‹
) {

152  
îr‹
;

155 *
size
 = 
wrôî
.
cuºít
 - 
buf„r
;

156  
KAA_ERR_NONE
;

157 
	}
}

159 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_nŸifiˇti⁄_£rvî_sync
(*
c⁄ãxt
, 
uöt32_t
 
ªque°_id
,

160 
uöt16_t
 
exãnsi⁄_›ti⁄s
, c⁄° 
uöt8_t
 *
buf„r
, 
size_t
 
size
)

162 ()
ªque°_id
;

163 ()
exãnsi⁄_›ti⁄s
;

166 i‡(!
c⁄ãxt
 || !
buf„r
) {

167  
KAA_ERR_BADPARAM
;

170 
kØ_∂©f‹m_mesßge_ªadî_t
 
ªadî
 = 
	`KAA_MESSAGE_READER
(
buf„r
, 
size
);

171  
	`kØ_nŸifiˇti⁄_m™agî_h™dÀ_£rvî_sync
(
c⁄ãxt
, &
ªadî
, 
size
);

172 
	}
}

174 
	$shi·_™d_sub_exãnsi⁄
(
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî
, 
uöt32_t
 *
exãnsi⁄_Àngth
, 
size_t
 
size
)

176 
	`KAA_RETURN_IF_NIL2
(
ªadî
, 
exãnsi⁄_Àngth
,);

177 
ªadî
->
cuºít
 +
size
;

178 *
exãnsi⁄_Àngth
 -
size
;

179 
	}
}

182 
kØ_nŸifiˇti⁄_t
 *
	mnŸifiˇti⁄
;

183 
uöt32_t
 
	msqn
;

184 } 
	tkØ_nŸifiˇti⁄_wøµî_t
;

187 
uöt64_t
 
	mt›ic_id
;

188 
kØ_li°_t
 *
	mnŸifiˇti⁄s
;

189 } 
	tkØ_t›ic_nŸifiˇti⁄s_node_t
;

191 
boﬁ
 
	$föd_nŸifiˇti⁄s_by_t›ic
(*
d©a
, *
c⁄ãxt
)

193 
kØ_t›ic_nŸifiˇti⁄s_node_t
 *
node
 = 
d©a
;

194  
node
->
t›ic_id
 =*((
uöt64_t
 *Ë
c⁄ãxt
);

195 
	}
}

197 
boﬁ
 
	$s‹t_t›ic_by_id
(*
node_1
, *
node_2
)

199 
	`KAA_RETURN_IF_NIL2
(
node_1
, 
node_2
, 
Ál£
);

200 
kØ_t›ic_t
 *
wøµî_1
 = 
node_1
;

201 
kØ_t›ic_t
 *
wøµî_2
 = 
node_2
;

202  
wøµî_1
->
id
 < 
wøµî_2
->id;

203 
	}
}

205 
uöt64_t
 
	$gë_t›ic_id
(*
node
)

207 
kØ_t›ic_t
 *
wøµî
 = 
node
;

208  
wøµî
->
id
;

209 
	}
}

211 
	$kØ_de°roy_nŸifiˇti⁄_wøµî
(*
d©a
)

213 
	`KAA_RETURN_IF_NIL
(
d©a
, );

214 
kØ_nŸifiˇti⁄_wøµî_t
 *
wøµî
 = 
d©a
;

215 i‡(
wøµî
->
nŸifiˇti⁄
) {

216 
wøµî
->
nŸifiˇti⁄
->
	`de°roy
(wrapper->notification);

218 
	`KAA_FREE
(
wøµî
);

219 
	}
}

221 
	$kØ_de°roy_nŸifiˇti⁄_node
(*
d©a
)

223 
	`KAA_RETURN_IF_NIL
(
d©a
, );

224 
kØ_t›ic_nŸifiˇti⁄s_node_t
 *
node
 = 
d©a
;

225 i‡(
node
->
nŸifiˇti⁄s
) {

226 
	`kØ_li°_de°roy
(
node
->
nŸifiˇti⁄s
, 
kØ_de°roy_nŸifiˇti⁄_wøµî
);

228 
	`KAA_FREE
(
node
);

229 
	}
}

231 
kØ_îr‹_t
 
	$kØ_¸óã_t›ic_nŸifiˇti⁄_node
(
kØ_t›ic_nŸifiˇti⁄s_node_t
 **
node
, 
kØ_nŸifiˇti⁄_t
 *
ôem
, 
uöt32_t
 *
sqn
, 
uöt64_t
 
t›ic_id
)

233 
	`KAA_RETURN_IF_NIL
(
node
, 
KAA_ERR_BADPARAM
);

235 
kØ_t›ic_nŸifiˇti⁄s_node_t
 *
√w_node
 = 
	`KAA_MALLOC
((*new_node));

236 
	`KAA_RETURN_IF_NIL
(
√w_node
, 
KAA_ERR_NOMEM
);

238 
√w_node
->
nŸifiˇti⁄s
 = 
	`kØ_li°_¸óã
();

239 i‡(!
√w_node
->
nŸifiˇti⁄s
) {

240 
	`kØ_de°roy_nŸifiˇti⁄_node
(
√w_node
);

241  
KAA_ERR_NOMEM
;

244 
kØ_nŸifiˇti⁄_wøµî_t
 *
wøµî
 = 
	`KAA_MALLOC
((*wrapper));

245 i‡(!
wøµî
) {

246 
	`kØ_de°roy_nŸifiˇti⁄_node
(
√w_node
);

247  
KAA_ERR_NOMEM
;

250 i‡(!
	`kØ_li°_push_back
(
√w_node
->
nŸifiˇti⁄s
, 
wøµî
)) {

251 
	`kØ_de°roy_nŸifiˇti⁄_node
(
√w_node
);

252 
	`KAA_FREE
(
wøµî
);

253  
KAA_ERR_NOMEM
;

256 
√w_node
->
t›ic_id
 =Åopic_id;

257 
wøµî
->
nŸifiˇti⁄
 = 
ôem
;

258 
wøµî
->
sqn
 = *sqn;

259 *
node
 = 
√w_node
;

260  
KAA_ERR_NONE
;

261 
	}
}

263 
kØ_îr‹_t
 
	$kØ_add_nŸifiˇti⁄_to_m≠
(
kØ_li°_t
 *
nŸifiˇti⁄s
, 
kØ_nŸifiˇti⁄_t
 *
ôem
, 
uöt64_t
 
t›ic_id
, 
uöt32_t
 *
sqn
)

265 
	`KAA_RETURN_IF_NIL3
(
nŸifiˇti⁄s
, 
ôem
, 
sqn
, 
KAA_ERR_BADPARAM
);

266 
kØ_li°_node_t
 *
nŸifiˇti⁄_li°_node
 = 
	`kØ_li°_föd_√xt
(
	`kØ_li°_begö
(
nŸifiˇti⁄s
), 
föd_nŸifiˇti⁄s_by_t›ic
, &
t›ic_id
);

267 
kØ_t›ic_nŸifiˇti⁄s_node_t
 *
nŸifiˇti⁄_node
 = 
NULL
;

268 i‡(!
nŸifiˇti⁄_li°_node
) {

269 
kØ_îr‹_t
 
îr
 = 
	`kØ_¸óã_t›ic_nŸifiˇti⁄_node
(&
nŸifiˇti⁄_node
, 
ôem
, 
sqn
, 
t›ic_id
);

270 i‡(
îr
) {

271 
	`kØ_li°_de°roy
(
nŸifiˇti⁄s
, &
kØ_de°roy_nŸifiˇti⁄_node
);

272 
ôem
->
	`de°roy
(item);

273  
îr
;

275 i‡(!
	`kØ_li°_push_back
(
nŸifiˇti⁄s
, 
nŸifiˇti⁄_node
)) {

276 
	`kØ_li°_de°roy
(
nŸifiˇti⁄s
, &
kØ_de°roy_nŸifiˇti⁄_node
);

277 
	`kØ_de°roy_nŸifiˇti⁄_node
(
nŸifiˇti⁄_node
);

278 
ôem
->
	`de°roy
(item);

279  
KAA_ERR_NOMEM
;

282 
nŸifiˇti⁄_node
 = 
	`kØ_li°_gë_d©a
(
nŸifiˇti⁄_li°_node
);

283 
kØ_nŸifiˇti⁄_wøµî_t
 *
√w_wøµî
 = 
	`KAA_MALLOC
((*new_wrapper));

284 i‡(!
√w_wøµî
) {

285 
	`kØ_li°_de°roy
(
nŸifiˇti⁄s
, &
kØ_de°roy_nŸifiˇti⁄_node
);

286 
ôem
->
	`de°roy
(item);

287  
KAA_ERR_NOMEM
;

289 i‡(!
	`kØ_li°_push_back
(
nŸifiˇti⁄_node
->
nŸifiˇti⁄s
, 
√w_wøµî
)) {

290 
	`kØ_li°_de°roy
(
nŸifiˇti⁄s
, &
kØ_de°roy_nŸifiˇti⁄_node
);

291 
ôem
->
	`de°roy
(item);

292 
	`KAA_FREE
(
√w_wøµî
);

293  
KAA_ERR_NOMEM
;

296 
√w_wøµî
->
nŸifiˇti⁄
 = 
ôem
;

297 
√w_wøµî
->
sqn
 = *sqn;

300  
KAA_ERR_NONE
;

301 
	}
}

303 
boﬁ
 
	$kØ_¥ediˇã_f‹_nŸifiˇti⁄s
(*
nŸif_1
, *
nŸif_2
)

305 
	`KAA_RETURN_IF_NIL2
(
nŸif_1
, 
nŸif_2
, 
Ál£
);

306 
kØ_nŸifiˇti⁄_wøµî_t
 *
wøµî_1
 = 
nŸif_1
;

307 
kØ_nŸifiˇti⁄_wøµî_t
 *
wøµî_2
 = 
nŸif_2
;

308  
wøµî_1
->
sqn
 < 
wøµî_2
->sqn;

309 
	}
}

310 
	$kØ_s‹t_nŸifiˇti⁄s_by_sqn
(*
d©a
, *
c⁄ãxt
)

312 ()
c⁄ãxt
;

313 
kØ_t›ic_nŸifiˇti⁄s_node_t
 *
node
 = 
d©a
;

314 
	`kØ_li°_s‹t
(
node
->
nŸifiˇti⁄s
, &
kØ_¥ediˇã_f‹_nŸifiˇti⁄s
);

315 
	}
}

317 
	$kØ_s‹t_nŸifiˇti⁄s
(
kØ_li°_t
 *
nŸifiˇti⁄s
)

319 
	`kØ_li°_f‹_óch
(
	`kØ_li°_begö
(
nŸifiˇti⁄s
), 
	`kØ_li°_back
“Ÿifiˇti⁄s), &
kØ_s‹t_nŸifiˇti⁄s_by_sqn
, 
NULL
);

320 
	}
}

322 
kØ_exãnsi⁄_id
 
	gnŸifiˇti⁄_sync_£rvi˚s
[] = { 
KAA_EXTENSION_NOTIFICATION
 };

324 
boﬁ
 
	$kØ_föd_nŸifiˇti⁄_li°íî_by_id
(*
li°íî
, *
c⁄ãxt
)

326 
	`KAA_RETURN_IF_NIL2
(
li°íî
, 
c⁄ãxt
, 
KAA_ERR_NONE
);

327  ((
kØ_nŸifiˇti⁄_li°íî_wøµî_t
 *Ë
li°íî
)->
id
 =*(
uöt32_t
 *)
c⁄ãxt
;

328 
	}
}

329 
boﬁ
 
	$kØ_föd_t›ic_li°íî_by_id
(*
li°íî
, *
c⁄ãxt
)

331 
	`KAA_RETURN_IF_NIL2
(
li°íî
, 
c⁄ãxt
, 
KAA_ERR_NONE
);

332  ((
kØ_t›ic_li°íî_wøµî_t
 *Ë
li°íî
)->
id
 =*(
uöt32_t
 *)
c⁄ãxt
;

333 
	}
}

335 
boﬁ
 
	$kØ_föd_›ti⁄Æ_nŸifiˇti⁄_li°íî_by_id
 (*
›ti⁄Æ_li°íî_li°
, *
t›ic_id
)

337 
	`KAA_RETURN_IF_NIL2
(
›ti⁄Æ_li°íî_li°
, 
t›ic_id
, 
KAA_ERR_NONE
);

338 
kØ_›ti⁄Æ_nŸifiˇti⁄_li°íîs_wøµî_t
 *
›ti⁄Æ_li°íî_node
 = 
›ti⁄Æ_li°íî_li°
;

339  
›ti⁄Æ_li°íî_node
->
t›ic_id
 =*(
uöt64_t
 *)topic_id;

340 
	}
}

342 
boﬁ
 
	$kØ_föd_t›ic_by_id
(*
t›ic
, *
id
)

344 
	`KAA_RETURN_IF_NIL2
(
t›ic
, 
id
, 
KAA_ERR_NONE
);

345 
kØ_t›ic_t
* 
nŸifiˇti⁄_t›ic
 = 
t›ic
;

346  
nŸifiˇti⁄_t›ic
->
id
 =*(
uöt64_t
 *)id;

347 
	}
}

349 
kØ_îr‹_t
 
	$kØ_föd_t›ic
(
kØ_nŸifiˇti⁄_m™agî_t
 *
£lf
, 
kØ_t›ic_t
 **
t›ic
, 
uöt64_t
 *
t›ic_id
)

351 
	`KAA_RETURN_IF_NIL2
(
t›ic_id
, 
t›ic
, 
KAA_ERR_BADPARAM
);

352 
kØ_li°_node_t
 *
t›ic_node
 = 
	`kØ_li°_föd_√xt
(
	`kØ_li°_begö
(
£lf
->
°©us
->
t›ics
), &
kØ_föd_t›ic_by_id
, 
t›ic_id
);

353 i‡(!
t›ic_node
) {

354  
KAA_ERR_NOT_FOUND
;

357 *
t›ic
 = 
	`kØ_li°_gë_d©a
(
t›ic_node
);

358  
KAA_ERR_NONE
;

359 
	}
}

361 
boﬁ
 
	$kØ_föd_uid
(*
d©a
, *
c⁄ãxt
)

363 
	`KAA_RETURN_IF_NIL2
(
d©a
, 
c⁄ãxt
, 
KAA_ERR_NONE
);

364 
kØ_nŸifiˇti⁄s_uid_t
 *
uid
 = 
d©a
;

365 
kØ_nŸifiˇti⁄s_uid_t
 *
£¨ch_c⁄ãxt
 = 
c⁄ãxt
;

366 i‡(
uid
->
Àngth
 !
£¨ch_c⁄ãxt
->length) {

367  
Ál£
;

370 i‡(!
	`memcmp
(
uid
->
d©a
, 
£¨ch_c⁄ãxt
->d©a, uid->
Àngth
)) {

371  
åue
;

373  
Ál£
;

374 
	}
}

376 
boﬁ
 
	$kØ_föd_t›ic_°©e_by_id
(*
t›ic_°©e
, *
id
)

378 
	`KAA_RETURN_IF_NIL2
(
t›ic_°©e
, 
id
, 
KAA_ERR_BADPARAM
);

379 
kØ_t›ic_°©e_t
 *
°©e
 = 
t›ic_°©e
;

380  
°©e
->
t›ic_id
 =*(
uöt64_t
 *)
id
;

381 
	}
}

383 
kØ_îr‹_t
 
	$kØ_ˇlcuœã_t›ic_li°íî_id
(c⁄° 
kØ_t›ic_li°íî_t
 *
li°íî
, 
uöt32_t
 *
li°íî_id
)

385 
	`KAA_RETURN_IF_NIL2
(
li°íî
, 
li°íî_id
, 
KAA_ERR_BADPARAM
);

387 c⁄° 
uöt32_t
 
¥ime
 = 31;

389 *
li°íî_id
 = 1;

390 *
li°íî_id
 = 
¥ime
 * (*li°íî_idË+ (
±rdiff_t
)
li°íî
->
c⁄ãxt
;

391 *
li°íî_id
 = 
¥ime
 * (*li°íî_idË+ (
±rdiff_t
)
li°íî
->
ˇŒback
;

392  
KAA_ERR_NONE
;

393 
	}
}

395 
kØ_îr‹_t
 
	$kØ_ˇlcuœã_nŸifiˇti⁄_li°íî_id
(c⁄° 
kØ_nŸifiˇti⁄_li°íî_t
 *
li°íî
, 
uöt32_t
 *
li°íî_id
)

397 
	`KAA_RETURN_IF_NIL2
(
li°íî
, 
li°íî_id
, 
KAA_ERR_BADPARAM
);

399 c⁄° 
uöt32_t
 
¥ime
 = 31;

401 *
li°íî_id
 = 1;

402 *
li°íî_id
 = 
¥ime
 * (*li°íî_idË+ (
±rdiff_t
)
li°íî
->
c⁄ãxt
;

403 *
li°íî_id
 = 
¥ime
 * (*li°íî_idË+ (
±rdiff_t
)
li°íî
->
ˇŒback
;

404  
KAA_ERR_NONE
;

405 
	}
}

407 
size_t
 
	$gë_subs¸ùti⁄s_size
(
kØ_li°_t
 *
subs¸ùti⁄s
)

409 i‡(
	`kØ_li°_gë_size
(
subs¸ùti⁄s
) > 0) {

410 
size_t
 
ex≥˘ed_size
 = (
uöt32_t
);

411 
ex≥˘ed_size
 +
	`kØ_li°_gë_size
(
subs¸ùti⁄s
Ë* (
uöt64_t
);

412  
ex≥˘ed_size
;

416 
	}
}

418 
kØ_îr‹_t
 
	$kØ_nŸifiˇti⁄_m™agî_gë_size
(
kØ_nŸifiˇti⁄_m™agî_t
 *
£lf
, 
size_t
 *
ex≥˘ed_size
)

420 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
ex≥˘ed_size
, 
KAA_ERR_BADPARAM
);

421 *
ex≥˘ed_size
 = 0;

422 *
ex≥˘ed_size
 +(
uöt32_t
);

424 i‡(
	`kØ_li°_gë_size
(
£lf
->
°©us
->
t›ic_°©es
) > 0) {

425 *
ex≥˘ed_size
 +(
uöt32_t
);

426 *
ex≥˘ed_size
 +((
uöt64_t
Ë+ (
uöt32_t
)Ë* 
	`kØ_li°_gë_size
(
£lf
->
°©us
->
t›ic_°©es
);

429 i‡(
	`kØ_li°_gë_size
(
£lf
->
uids
) > 0) {

430 *
ex≥˘ed_size
 +(
uöt32_t
);

431 *
ex≥˘ed_size
 +(
uöt32_t
Ë* 
	`kØ_li°_gë_size
(
£lf
->
uids
);

433 
kØ_li°_node_t
 *
uid_node
 = 
	`kØ_li°_begö
(
£lf
->
uids
);

434 
uid_node
) {

435 
kØ_nŸifiˇti⁄s_uid_t
 *
uid
 = 
	`kØ_li°_gë_d©a
(
uid_node
);

436 *
ex≥˘ed_size
 +
	`kØ_Æig√d_size_gë
(
uid
->
Àngth
);

437 
uid_node
 = 
	`kØ_li°_√xt
(uid_node);

441 *
ex≥˘ed_size
 +
	`gë_subs¸ùti⁄s_size
(
£lf
->
subs¸ùti⁄s
);

442 *
ex≥˘ed_size
 +
	`gë_subs¸ùti⁄s_size
(
£lf
->
unsubs¸ùti⁄s
);

444 
£lf
->
exãnsi⁄_∑ylﬂd_size
 = *
ex≥˘ed_size
;

445 *
ex≥˘ed_size
 +
KAA_EXTENSION_HEADER_SIZE
;

446  
KAA_ERR_NONE
;

447 
	}
}

449 
	$£rülize_t›ic_°©e
(
kØ_t›ic_°©e_t
 *
°©e
, 
kØ_nŸifiˇti⁄_m™agî_t
 *
£lf
)

451 
	`KAA_RETURN_IF_NIL3
(
°©e
, 
£lf
, sñf->
wrôî
, );

452 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "SîülizögÅ›i¯°©e:Å›i¯id '%Œu', sq¿'%lu'", 
°©e
->
t›ic_id
, sèã->
sqn_numbî
);

453 *(
uöt64_t
 *)
£lf
->
wrôî
->
cuºít
 = 
	`KAA_HTONLL
(
°©e
->
t›ic_id
);

454 
£lf
->
wrôî
->
cuºít
 +(
uöt64_t
);

455 *(
uöt32_t
 *)
£lf
->
wrôî
->
cuºít
 = 
	`KAA_HTONL
((uöt32_t)
°©e
->
sqn_numbî
);

456 
£lf
->
wrôî
->
cuºít
 +(
uöt32_t
);

457 
	}
}

459 
	$£rülize_nŸifiˇti⁄s_uid
(
kØ_nŸifiˇti⁄s_uid_t
 * 
uid
, 
kØ_∂©f‹m_mesßge_wrôî_t
 *
wrôî
)

461 
	`KAA_RETURN_IF_NIL2
(
uid
, 
wrôî
, );

462 *(
uöt32_t
 *)
wrôî
->
cuºít
 = 
	`KAA_HTONL
(
uid
->
Àngth
);

463 
wrôî
->
cuºít
 +(
uöt32_t
);

464 
	`kØ_∂©f‹m_mesßge_wrôe_Æig√d
(
wrôî
, 
uid
->
d©a
, uid->
Àngth
);

465 
	}
}

467 
	$£rülize_subs¸ùti⁄
(
uöt64_t
 *
t›ic_id
, 
kØ_nŸifiˇti⁄_m™agî_t
 *
£lf
)

469 
	`KAA_RETURN_IF_NIL3
(
t›ic_id
, 
£lf
, sñf->
wrôî
, );

470 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "T›i¯id '%Œu'", *
t›ic_id
);

471 *(
uöt64_t
 *)
£lf
->
wrôî
->
cuºít
 = 
	`KAA_HTONLL
(*
t›ic_id
);

472 
£lf
->
wrôî
->
cuºít
 +(
uöt64_t
);

473 
	}
}

475 
	$£rülize_subs¸ùti⁄s
(
kØ_nŸifiˇti⁄_m™agî_t
 *
£lf
, 
uöt8_t
 
subs¸ùti⁄_ty≥
)

477 
	`KAA_RETURN_IF_NIL
(
£lf
, );

479 
kØ_li°_t
 *
subs¸ùti⁄s
 = 
NULL
;

481 i‡(
subs¸ùti⁄_ty≥
 =
SUBSCRIPTION_ID
) {

482 
	`KAA_RETURN_IF_NIL
(
	`kØ_li°_gë_size
(
£lf
->
subs¸ùti⁄s
), );

483 
subs¸ùti⁄s
 = 
£lf
->subscriptions;

485 i‡(
subs¸ùti⁄_ty≥
 =
UNSUBSCRIPTION_ID
) {

486 
	`KAA_RETURN_IF_NIL
(
	`kØ_li°_gë_size
(
£lf
->
unsubs¸ùti⁄s
), );

487 
subs¸ùti⁄s
 = 
£lf
->
unsubs¸ùti⁄s
;

489 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "GoögÅÿ£rülizê%s", 
subs¸ùti⁄_ty≥
 =
SUBSCRIPTION_ID
 ? "subscriptions" : "unsubscriptions");

491 *(
uöt8_t
 *)
£lf
->
wrôî
->
cuºít
 = 
subs¸ùti⁄_ty≥
;

492 
£lf
->
wrôî
->
cuºít
 +(
uöt16_t
);

493 *(
uöt16_t
 *)
£lf
->
wrôî
->
cuºít
 = 
	`KAA_HTONS
((uöt16_t)
	`kØ_li°_gë_size
(
subs¸ùti⁄s
));

494 
£lf
->
wrôî
->
cuºít
 +(
uöt16_t
);

497 
	`kØ_li°_f‹_óch
(
	`kØ_li°_begö
(
subs¸ùti⁄s
), 
	`kØ_li°_back
(subscriptions),

498 (
¥o˚ss_d©a
)
£rülize_subs¸ùti⁄
, 
£lf
);

499 
	}
}

501 
kØ_îr‹_t
 
	$kØ_nŸifiˇti⁄_m™agî_ªque°_£rülize
(
kØ_nŸifiˇti⁄_m™agî_t
 *
£lf
, 
kØ_∂©f‹m_mesßge_wrôî_t
 *
wrôî
)

503 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
wrôî
, 
KAA_ERR_BADPARAM
);

505 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "GoingÅo serialize clientÇotification sync");

507 
£lf
->
wrôî
 = writer;

509 
kØ_îr‹_t
 
îr
 = 
	`kØ_∂©f‹m_mesßge_wrôe_exãnsi⁄_hódî
(
wrôî
,

510 
KAA_EXTENSION_NOTIFICATION
, 
KAA_CLIENT_WANTS_TO_RECEIVE_NOTIFICATIONS
,

511 
£lf
->
exãnsi⁄_∑ylﬂd_size
);

512 i‡(
îr
) {

513 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
KAA_ERR_BADPARAM
, "FailedÅo writeÇotification header");

514  
KAA_ERR_BADPARAM
;

517 *(
öt32_t
 *)
wrôî
->
cuºít
 = 
	`KAA_HTONL
((öt32_t)
£lf
->
°©us
->
t›ic_li°_hash
);

518 
wrôî
->
cuºít
 +(
öt32_t
);

520 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "GoögÅÿ£rülizê%zuÅ›i¯°©es", 
	`kØ_li°_gë_size
(£lf->
°©us
->
t›ic_°©es
));

521 i‡(
	`kØ_li°_gë_size
(
£lf
->
°©us
->
t›ic_°©es
) > 0) {

522 *(
uöt8_t
 *)
wrôî
->
cuºít
 = (uöt8_t)
TOPICS_STATE_ID
;

523 
wrôî
->
cuºít
 +(
uöt16_t
);

524 *(
uöt16_t
 *)
wrôî
->
cuºít
 = 
	`KAA_HTONS
((uöt16_t)
	`kØ_li°_gë_size
(
£lf
->
°©us
->
t›ic_°©es
));

525 
wrôî
->
cuºít
 +(
uöt16_t
);

527 
	`kØ_li°_f‹_óch
(
	`kØ_li°_begö
(
£lf
->
°©us
->
t›ic_°©es
),

528 
	`kØ_li°_back
(
£lf
->
°©us
->
t›ic_°©es
),

529 (
¥o˚ss_d©a
)
£rülize_t›ic_°©e
, 
£lf
);

532 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "GoögÅÿ£rülizê%zu uids", 
	`kØ_li°_gë_size
(£lf->
uids
));

533 i‡(
	`kØ_li°_gë_size
(
£lf
->
uids
) > 0) {

534 *(
uöt8_t
 *)
wrôî
->
cuºít
 = (uöt8_t)
UID_ID
;

535 
wrôî
->
cuºít
 +(
uöt16_t
);

536 *(
uöt16_t
 *)
wrôî
->
cuºít
 = 
	`KAA_HTONS
(
	`kØ_li°_gë_size
(
£lf
->
uids
));

537 
wrôî
->
cuºít
 +(
uöt16_t
);

539 
	`kØ_li°_f‹_óch
(
	`kØ_li°_begö
(
£lf
->
uids
), 
	`kØ_li°_back
(self->uids),

540 (
¥o˚ss_d©a
)
£rülize_nŸifiˇti⁄s_uid
, 
wrôî
);

543 
	`£rülize_subs¸ùti⁄s
(
£lf
, 
SUBSCRIPTION_ID
);

544 
	`£rülize_subs¸ùti⁄s
(
£lf
, 
UNSUBSCRIPTION_ID
);

546  
KAA_ERR_NONE
;

547 
	}
}

549 
	$de°roy_nŸifiˇti⁄s_uid
(*
d©a
)

551 i‡(!
d©a
) {

555 
	`KAA_RETURN_IF_NIL
(
d©a
,);

556 
kØ_nŸifiˇti⁄s_uid_t
 *
uid
 = 
d©a
;

557 
	`KAA_FREE
(
uid
->
d©a
);

558 
	`KAA_FREE
(
uid
);

559 
	}
}

561 
	$de°roy_t›ic
(*
d©a
)

563 i‡(!
d©a
) {

567 
kØ_t›ic_t
 *
t›ic
 = 
d©a
;

568 
	`KAA_FREE
(
t›ic
->
«me
);

569 
	`KAA_FREE
(
d©a
);

570 
	}
}

572 
	$de°roy_›ti⁄Æ_li°íîs_wøµî
(*
d©a
)

574 
	`KAA_RETURN_IF_NIL
(
d©a
,);

575 
kØ_›ti⁄Æ_nŸifiˇti⁄_li°íîs_wøµî_t
 *
wøµî
 = 
d©a
;

576 
	`kØ_li°_de°roy
(
wøµî
->
li°íîs
, 
NULL
);

577 
	`KAA_FREE
(
wøµî
);

578 
	}
}

581 
	$kØ_nŸifiˇti⁄_m™agî_de°roy
(
kØ_nŸifiˇti⁄_m™agî_t
 *
£lf
)

583 i‡(!
£lf
) {

587 
	`kØ_li°_de°roy
(
£lf
->
m™d©‹y_li°íîs
, 
kØ_d©a_de°roy
);

588 
	`kØ_li°_de°roy
(
£lf
->
t›ics_li°íîs
, 
kØ_d©a_de°roy
);

589 
	`kØ_li°_de°roy
(
£lf
->
subs¸ùti⁄s
, 
kØ_d©a_de°roy
);

590 
	`kØ_li°_de°roy
(
£lf
->
unsubs¸ùti⁄s
, 
kØ_d©a_de°roy
);

591 
	`kØ_li°_de°roy
(
£lf
->
›ti⁄Æ_li°íîs
, 
de°roy_›ti⁄Æ_li°íîs_wøµî
);

592 
	`kØ_li°_de°roy
(
£lf
->
uids
, 
de°roy_nŸifiˇti⁄s_uid
);

593 
	`kØ_li°_de°roy
(
£lf
->
nŸifiˇti⁄s
, 
kØ_de°roy_nŸifiˇti⁄_node
);

595 
	`KAA_FREE
(
£lf
);

596 
	}
}

599 
kØ_îr‹_t
 
	$kØ_nŸifiˇti⁄_m™agî_¸óã
(
kØ_nŸifiˇti⁄_m™agî_t
 **
£lf
, 
kØ_°©us_t
 *
°©us
,

600 
kØ_ch™√l_m™agî_t
 *
ch™√l_m™agî
, 
kØ_loggî_t
 *
loggî
)

602 i‡(!
£lf
 || !
°©us
 || !
ch™√l_m™agî
 || !
loggî
) {

603  
KAA_ERR_BADPARAM
;

606 
kØ_nŸifiˇti⁄_m™agî_t
 *
m™agî
 = 
	`KAA_MALLOC
((*manager));

607 i‡(!
m™agî
) {

608  
KAA_ERR_NOMEM
;

611 
m™agî
->
m™d©‹y_li°íîs
 = 
	`kØ_li°_¸óã
();

612 
m™agî
->
t›ics_li°íîs
 = 
	`kØ_li°_¸óã
();

613 
m™agî
->
›ti⁄Æ_li°íîs
 = 
	`kØ_li°_¸óã
();

614 
m™agî
->
subs¸ùti⁄s
 = 
	`kØ_li°_¸óã
();

615 
m™agî
->
unsubs¸ùti⁄s
 = 
	`kØ_li°_¸óã
();

616 
m™agî
->
nŸifiˇti⁄s
 = 
	`kØ_li°_¸óã
();

617 
m™agî
->
uids
 = 
	`kØ_li°_¸óã
();

619 i‡(!
m™agî
->
m™d©‹y_li°íîs
 || !m™agî->
t›ics_li°íîs


620 || !
m™agî
->
›ti⁄Æ_li°íîs
 ||!m™agî->
subs¸ùti⁄s


621 || !
m™agî
->
unsubs¸ùti⁄s
 || !m™agî->
uids
)

623 
	`kØ_nŸifiˇti⁄_m™agî_de°roy
(
m™agî
);

624  
KAA_ERR_NOMEM
;

627 
m™agî
->
exãnsi⁄_∑ylﬂd_size
 = 0;

629 
m™agî
->
wrôî
 = 
NULL
;

630 
m™agî
->
°©us
 = status;

631 
m™agî
->
ch™√l_m™agî
 = channel_manager;

632 
m™agî
->
loggî
 =Üogger;

634 *
£lf
 = 
m™agî
;

636  
KAA_ERR_NONE
;

637 
	}
}

639 
kØ_îr‹_t
 
	$kØ_add_nŸifiˇti⁄_li°íî
(
kØ_nŸifiˇti⁄_m™agî_t
 *
£lf
, 
kØ_nŸifiˇti⁄_li°íî_t
 *
li°íî
, 
uöt32_t
* 
li°íî_id
)

641 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
li°íî
, 
KAA_ERR_BADPARAM
);

643 i‡(!
li°íî
->
ˇŒback
) {

644 
	`KAA_LOG_WARN
(
£lf
->
loggî
, 
KAA_ERR_BADPARAM
, "FailedÅoádd mandatoryÇotificationÜistener: NULL callback");

645  
KAA_ERR_BADPARAM
;

648 
uöt32_t
 
id
;

649 
kØ_îr‹_t
 
îr
 = 
	`kØ_ˇlcuœã_nŸifiˇti⁄_li°íî_id
(
li°íî
, &
id
);

650 i‡(
îr
) {

651 
	`KAA_LOG_WARN
(
£lf
->
loggî
, 
îr
, "FailedÅo calculate mandatoryÜistener id");

652  
îr
;

654 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "GoögÅÿadd m™d©‹yÇŸifiˇti⁄Üi°íî, id '%lu'", 
id
);

656 i‡(
	`kØ_li°_föd_√xt
(
	`kØ_li°_begö
(
£lf
->
m™d©‹y_li°íîs
), &
kØ_föd_nŸifiˇti⁄_li°íî_by_id
, &
id
)) {

657 
	`KAA_LOG_WARN
(
£lf
->
loggî
, 
KAA_ERR_ALREADY_EXISTS
, "FailedÅoádd mandatoryÜistener:Üistener isálready subscribed");

658  
KAA_ERR_ALREADY_EXISTS
;

661 
kØ_nŸifiˇti⁄_li°íî_wøµî_t
* 
wøµî
 = 
	`KAA_MALLOC
((*wrapper));

662 
	`KAA_RETURN_IF_NIL
(
wøµî
, 
KAA_ERR_NOMEM
);

664 i‡(!
	`kØ_li°_push_‰⁄t
(
£lf
->
m™d©‹y_li°íîs
, 
wøµî
)) {

665 
	`KAA_FREE
(
wøµî
);

666 
	`KAA_LOG_WARN
(
£lf
->
loggî
, 
KAA_ERR_NOMEM
, "FailedÅoádd mandatoryÜistener");

667  
KAA_ERR_NOMEM
;

670 
wøµî
->
li°íî
 = *listener;

671 
wøµî
->
id
 = id;

673 i‡(
li°íî_id
) {

674 *
li°íî_id
 = 
id
;

676 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Added m™d©‹yÇŸifiˇti⁄Üi°íî id '%lu'", 
id
);

677  
KAA_ERR_NONE
;

678 
	}
}

680 
kØ_îr‹_t
 
	$kØ_ªmove_nŸifiˇti⁄_li°íî
(
kØ_nŸifiˇti⁄_m™agî_t
 *
£lf
, 
uöt32_t
 *
li°íî_id
)

682 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
li°íî_id
, 
KAA_ERR_BADPARAM
);

683 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "GoögÅÿªmovêm™d©‹yÇŸifiˇti⁄Üi°íî, id '%lu'", *
li°íî_id
);

685 
kØ_îr‹_t
 
îr
 = 
	`kØ_li°_ªmove_fú°
(
£lf
->
m™d©‹y_li°íîs
,

686 
kØ_föd_nŸifiˇti⁄_li°íî_by_id
, 
li°íî_id
, &
kØ_d©a_de°roy
);

687 i‡(
îr
) {

688 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
îr
,

689 "FaûedÅÿªmovêm™d©‹yÇŸifiˇti⁄Üi°íî:Åhêli°íî wôh id '%lu' i†nŸ found", *
li°íî_id
);

691 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
îr
,

692 "Removed m™d©‹yÇŸifiˇti⁄Üi°íî, id '%lu'", *
li°íî_id
);

695  
îr
;

696 
	}
}

698 
kØ_îr‹_t
 
	$kØ_add_›ti⁄Æ_nŸifiˇti⁄_li°íî
(
kØ_nŸifiˇti⁄_m™agî_t
 *
£lf
,

699 
kØ_nŸifiˇti⁄_li°íî_t
 *
li°íî
, 
uöt64_t
 *
t›ic_id
, 
uöt32_t
 *
li°íî_id
)

701 
	`KAA_RETURN_IF_NIL4
(
£lf
, 
li°íî
,Üi°íî->
ˇŒback
, 
t›ic_id
, 
KAA_ERR_BADPARAM
);

703 i‡(!
	`kØ_li°_föd_√xt
(
	`kØ_li°_begö
(
£lf
->
°©us
->
t›ics
), &
kØ_föd_t›ic_by_id
, 
t›ic_id
)) {

704 
	`KAA_LOG_WARN
(
£lf
->
loggî
, 
KAA_ERR_NOT_FOUND
,

706 *
t›ic_id
);

707  
KAA_ERR_NOT_FOUND
;

710 
uöt32_t
 
id
;

711 
kØ_îr‹_t
 
îr
 = 
	`kØ_ˇlcuœã_nŸifiˇti⁄_li°íî_id
(
li°íî
, &
id
);

712 i‡(
îr
) {

713 
	`KAA_LOG_WARN
(
£lf
->
loggî
, 
îr
, "FailedÅo calculate optionalÜistener id");

714  
îr
;

716 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "GoögÅÿadd o±i⁄ÆÇŸifiˇti⁄Üi°íî: id '%lu',Å›i¯id '%Œu'", 
id
, *
t›ic_id
);

718 
kØ_nŸifiˇti⁄_li°íî_wøµî_t
 *
wøµî
 = 
	`KAA_MALLOC
((*wrapper));

719 
	`KAA_RETURN_IF_NIL
(
wøµî
, 
KAA_ERR_NOMEM
);

721 
kØ_li°_node_t
 *
›t_li°íîs_node
 = 
	`kØ_li°_föd_√xt
(

722 
	`kØ_li°_begö
(
£lf
->
›ti⁄Æ_li°íîs
), 
kØ_föd_›ti⁄Æ_nŸifiˇti⁄_li°íî_by_id
,

723 
t›ic_id
);

724 i‡(!
›t_li°íîs_node
) {

725 
kØ_›ti⁄Æ_nŸifiˇti⁄_li°íîs_wøµî_t
* 
›ti⁄Æ_wøµî
 = 
	`KAA_MALLOC
((*optional_wrapper));

726 i‡(!
›ti⁄Æ_wøµî
) {

727 
	`KAA_FREE
(
wøµî
);

728  
KAA_ERR_NOMEM
;

731 
›ti⁄Æ_wøµî
->
li°íîs
 = 
	`kØ_li°_¸óã
();

732 i‡(!
	`kØ_li°_push_‰⁄t
(
›ti⁄Æ_wøµî
->
li°íîs
, 
wøµî
)) {

733 
	`KAA_FREE
(
wøµî
);

734 
	`de°roy_›ti⁄Æ_li°íîs_wøµî
(
›ti⁄Æ_wøµî
);

735  
KAA_ERR_NOMEM
;

738 i‡(!
	`kØ_li°_push_‰⁄t
(
£lf
->
›ti⁄Æ_li°íîs
, 
›ti⁄Æ_wøµî
)) {

739 
	`KAA_FREE
(
wøµî
);

740 
	`de°roy_›ti⁄Æ_li°íîs_wøµî
(
›ti⁄Æ_wøµî
);

741  
KAA_ERR_NOMEM
;

744 
›ti⁄Æ_wøµî
->
t›ic_id
 = *topic_id;

746 
kØ_›ti⁄Æ_nŸifiˇti⁄_li°íîs_wøµî_t
* 
›ti⁄Æ_wøµî
 = 
	`kØ_li°_gë_d©a
(
›t_li°íîs_node
);

748 i‡(
	`kØ_li°_föd_√xt
(
	`kØ_li°_begö
(
›ti⁄Æ_wøµî
->
li°íîs
), &
kØ_föd_nŸifiˇti⁄_li°íî_by_id
, &
id
)) {

749 
	`KAA_LOG_WARN
(
£lf
->
loggî
, 
KAA_ERR_ALREADY_EXISTS
, "FailedÅoáddÅhe optionalÜistener:ÅheÜistener isálready subscribed");

750 
	`KAA_FREE
(
wøµî
);

751  
KAA_ERR_ALREADY_EXISTS
;

754 i‡(!
	`kØ_li°_push_‰⁄t
(
›ti⁄Æ_wøµî
->
li°íîs
, 
wøµî
)) {

755 
	`KAA_FREE
(
wøµî
);

756  
KAA_ERR_NOMEM
;

760 
wøµî
->
li°íî
 = *listener;

761 
wøµî
->
id
 = id;

762 i‡(
li°íî_id
) {

763 *
li°íî_id
 = 
id
;

766 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Added o±i⁄ÆÇŸifiˇti⁄Üi°íî: id '%lu',Å›i¯id '%Œu'", 
id
, *
t›ic_id
);

768  
KAA_ERR_NONE
;

769 
	}
}

771 
kØ_îr‹_t
 
	$kØ_ªmove_›ti⁄Æ_nŸifiˇti⁄_li°íî
(
kØ_nŸifiˇti⁄_m™agî_t
 *
£lf
, 
uöt64_t
 *
t›ic_id
, 
uöt32_t
 *
li°íî_id
)

773 
	`KAA_RETURN_IF_NIL3
(
£lf
, 
t›ic_id
, 
li°íî_id
, 
KAA_ERR_BADPARAM
);

774 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "GoögÅÿªmovê›ti⁄ÆÇŸifiˇti⁄Üi°íî: id '%u',Å›i¯id '%u'", *
li°íî_id
, *
t›ic_id
);

776 
kØ_li°_node_t
 *
›t_li°íîs_node
 = 
	`kØ_li°_föd_√xt
(

777 
	`kØ_li°_begö
(
£lf
->
›ti⁄Æ_li°íîs
),

778 &
kØ_föd_›ti⁄Æ_nŸifiˇti⁄_li°íî_by_id
, 
t›ic_id
);

779 i‡(!
›t_li°íîs_node
) {

780 
	`KAA_LOG_WARN
(
£lf
->
loggî
, 
KAA_ERR_NOT_FOUND
, "FaûedÅÿªmovêthê›ti⁄ÆÜi°íî:Åhîêi†nÿli°íî†subs¸ibed o¿thi†t›i¯—›i¯id '%Œu').", *
t›ic_id
);

781  
KAA_ERR_NOT_FOUND
;

784 
kØ_›ti⁄Æ_nŸifiˇti⁄_li°íîs_wøµî_t
 *
›ti⁄Æ_wøµî
 = 
	`kØ_li°_gë_d©a
(
›t_li°íîs_node
);

786 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_li°_ªmove_fú°
(
›ti⁄Æ_wøµî
->
li°íîs
,

787 &
kØ_föd_nŸifiˇti⁄_li°íî_by_id
, 
li°íî_id
, &
kØ_d©a_de°roy
);

788 i‡(
îr‹
) {

789 
	`KAA_LOG_WARN
(
£lf
->
loggî
, 
KAA_ERR_NOT_FOUND
, "FaûedÅÿªmovêthê›ti⁄ÆÜi°íî:Åhêli°íî wôh id '%lu' i†nŸ found", *
li°íî_id
);

790  
îr‹
;

792 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Removed o±i⁄ÆÇŸifiˇti⁄Üi°íî id: '%lu',Å›i¯id '%Œu'", *
li°íî_id
, *
t›ic_id
);

793 i‡(!
	`kØ_li°_gë_size
(
›ti⁄Æ_wøµî
->
li°íîs
)) {

794 
	`kØ_li°_ªmove_©
(
£lf
->
›ti⁄Æ_li°íîs
, 
›t_li°íîs_node
, &
de°roy_›ti⁄Æ_li°íîs_wøµî
);

796  
KAA_ERR_NONE
;

798 
	}
}

800 
kØ_îr‹_t
 
	$kØ_add_t›ic_li°_li°íî
(
kØ_nŸifiˇti⁄_m™agî_t
 *
£lf
, 
kØ_t›ic_li°íî_t
 *
li°íî
, 
uöt32_t
 *
t›ic_li°íî_id
)

802 
	`KAA_RETURN_IF_NIL3
(
£lf
, 
li°íî
,Üi°íî->
ˇŒback
, 
KAA_ERR_BADPARAM
);

805 
uöt32_t
 
id
;

806 
kØ_îr‹_t
 
îr
 = 
	`kØ_ˇlcuœã_t›ic_li°íî_id
(
li°íî
, &
id
);

807 i‡(
îr
) {

808 
	`KAA_LOG_WARN
(
£lf
->
loggî
, 
îr
, "FailedÅo calculate mandatoryÜistener's id");

809  
îr
;

811 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "GoögÅÿaddÅ›i¯li°Üi°íî, id '%lu'", 
id
);

813 
kØ_t›ic_li°íî_wøµî_t
 *
wøµî
 = (kØ_t›ic_li°íî_wøµî_à*Ë
	`KAA_MALLOC
((kaa_topic_listener_wrapper_t));

814 
	`KAA_RETURN_IF_NIL
(
wøµî
, 
KAA_ERR_NOMEM
);

816 i‡(
	`kØ_li°_föd_√xt
(
	`kØ_li°_begö
(
£lf
->
t›ics_li°íîs
), &
kØ_föd_t›ic_li°íî_by_id
, &
id
)) {

817 
	`KAA_LOG_WARN
(
£lf
->
loggî
, 
KAA_ERR_ALREADY_EXISTS
, "FailedÅoáddÅopicÅheÜistener:ÅheÜistener isálready subscribed");

818 
	`KAA_FREE
(
wøµî
);

819  
KAA_ERR_ALREADY_EXISTS
;

822 i‡(!
	`kØ_li°_push_‰⁄t
(
£lf
->
t›ics_li°íîs
, 
wøµî
)) {

823 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
KAA_ERR_NOMEM
, "FailedÅoáddÅheÅopicÜistener");

824 
	`KAA_FREE
(
wøµî
);

825  
KAA_ERR_NOMEM
;

828 
wøµî
->
li°íî
 = *listener;

829 
wøµî
->
id
 = id;

830 i‡(
t›ic_li°íî_id
) {

831 *
t›ic_li°íî_id
 = 
id
;

833 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "AddedÅ›i¯li°Üi°íî, id '%lu'", 
id
);

834  
KAA_ERR_NONE
;

835 
	}
}

837 
kØ_îr‹_t
 
	$kØ_ªmove_t›ic_li°_li°íî
(
kØ_nŸifiˇti⁄_m™agî_t
 *
£lf
, 
uöt32_t
 *
t›ic_li°íî_id
)

839 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
t›ic_li°íî_id
, 
KAA_ERR_BADPARAM
);

840 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "GoögÅÿªmovêt›i¯li°Üi°íî, id '%lu'", *
t›ic_li°íî_id
);

842 
kØ_îr‹_t
 
îr
 = 
	`kØ_li°_ªmove_fú°
(
£lf
->
t›ics_li°íîs
,

843 &
kØ_föd_t›ic_li°íî_by_id
, 
t›ic_li°íî_id
, &
kØ_d©a_de°roy
);

844 i‡(
îr
) {

845 
	`KAA_LOG_WARN
(
£lf
->
loggî
, 
îr
,

847 *
t›ic_li°íî_id
);

848  
îr
;

850 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
îr
, "RemovedÅ›i¯li°Üi°íî, id '%lu'", *
t›ic_li°íî_id
);

851  
îr
;

852 
	}
}

854 
kØ_îr‹_t
 
	$kØ_gë_t›ics
(
kØ_nŸifiˇti⁄_m™agî_t
 *
£lf
, 
kØ_li°_t
 **
t›ics
)

856 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
t›ics
, 
KAA_ERR_BADPARAM
);

857 *
t›ics
 = 
£lf
->
°©us
->topics;

858  
KAA_ERR_NONE
;

859 
	}
}

861 
	$nŸify_t›ic_upd©e_subs¸ibî
(
kØ_t›ic_li°íî_wøµî_t
 *
wøµî
, 
kØ_li°_t
 *
t›ics
)

863 
	`KAA_RETURN_IF_NIL2
(
wøµî
, 
t›ics
, );

864 
wøµî
->
li°íî
.
	`ˇŒback
(wøµî->li°íî.
c⁄ãxt
, 
t›ics
);

865 
	}
}

867 
kØ_îr‹_t
 
	$kØ_nŸify_t›ic_upd©e_subs¸ibîs
(
kØ_nŸifiˇti⁄_m™agî_t
 *
£lf
, 
kØ_li°_t
 *
t›ics
)

869 
	`KAA_RETURN_IF_NIL
(
£lf
, 
KAA_ERR_BADPARAM
);

870 
	`kØ_li°_f‹_óch
(
	`kØ_li°_begö
(
£lf
->
t›ics_li°íîs
), 
	`kØ_li°_back
(self->topics_listeners),

871 (
¥o˚ss_d©a
)
nŸify_t›ic_upd©e_subs¸ibî
, 
t›ics
);

872  
KAA_ERR_NONE
;

873 
	}
}

875 
kØ_îr‹_t
 
	$kØ_nŸify_m™d©‹y_nŸifiˇti⁄_subs¸ibîs
(
kØ_nŸifiˇti⁄_m™agî_t
 *
£lf
,

876 
uöt64_t
 
t›ic_id
, 
kØ_nŸifiˇti⁄_t
 *
nŸifiˇti⁄
)

878 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
nŸifiˇti⁄
, 
KAA_ERR_BADPARAM
);

879 
kØ_li°_node_t
 *
cuºít_li°íî_node
 = 
	`kØ_li°_begö
(
£lf
->
m™d©‹y_li°íîs
);

880 
cuºít_li°íî_node
) {

881 
kØ_nŸifiˇti⁄_li°íî_wøµî_t
 *
wøµî
 = 
	`kØ_li°_gë_d©a
(
cuºít_li°íî_node
);

882 
wøµî
->
li°íî
.
	`ˇŒback
(wøµî->li°íî.
c⁄ãxt
, &
t›ic_id
, 
nŸifiˇti⁄
);

883 
cuºít_li°íî_node
 = 
	`kØ_li°_√xt
(current_listener_node);

885  
KAA_ERR_NONE
;

886 
	}
}

888 
kØ_îr‹_t
 
	$kØ_nŸify_›ti⁄Æ_nŸifiˇti⁄_subs¸ibîs
(
kØ_nŸifiˇti⁄_m™agî_t
 *
£lf
,

889 
uöt64_t
 
t›ic_id
, 
kØ_nŸifiˇti⁄_t
 *
nŸifiˇti⁄
)

891 
	`KAA_RETURN_IF_NIL3
(
£lf
, 
t›ic_id
, 
nŸifiˇti⁄
, 
KAA_ERR_BADPARAM
);

892 
kØ_li°_node_t
 *
›t_li°íîs_node
 = 
	`kØ_li°_föd_√xt
(

893 
	`kØ_li°_begö
(
£lf
->
›ti⁄Æ_li°íîs
),

894 
kØ_föd_›ti⁄Æ_nŸifiˇti⁄_li°íî_by_id
, &
t›ic_id
);

895 
	`KAA_RETURN_IF_NIL
(
›t_li°íîs_node
, 
KAA_ERR_NOT_FOUND
);

897 
kØ_›ti⁄Æ_nŸifiˇti⁄_li°íîs_wøµî_t
* 
›ti⁄Æ_wøµî
 =

898 
	`kØ_li°_gë_d©a
(
›t_li°íîs_node
);

900 
kØ_li°_node_t
 *
›ti⁄Æ_li°íî_node
 = 
	`kØ_li°_begö
(
›ti⁄Æ_wøµî
->
li°íîs
);

901 
›ti⁄Æ_li°íî_node
) {

902 
kØ_nŸifiˇti⁄_li°íî_wøµî_t
 *
wøµî
 = 
	`kØ_li°_gë_d©a
(
›ti⁄Æ_li°íî_node
);

903 
wøµî
->
li°íî
.
	`ˇŒback
(wøµî->li°íî.
c⁄ãxt
, &
t›ic_id
, 
nŸifiˇti⁄
);

904 
›ti⁄Æ_li°íî_node
 = 
	`kØ_li°_√xt
(optional_listener_node);

906  
KAA_ERR_NONE
;

907 
	}
}

909 
kØ_îr‹_t
 
	$kØ_add_subs¸ibti⁄_‹_unsubs¸ibti⁄
(
kØ_li°_t
 *
èrgë
, 
uöt64_t
 *
t›ic_id
)

911 
	`KAA_RETURN_IF_NIL2
(
èrgë
, 
t›ic_id
, 
KAA_ERR_BADPARAM
);

912 
uöt64_t
 *
subs_t›ic_id
 = (uöt64_à*Ë
	`KAA_MALLOC
((uint64_t));

913 
	`KAA_RETURN_IF_NIL
(
subs_t›ic_id
, 
KAA_ERR_NOMEM
);

914 *
subs_t›ic_id
 = *
t›ic_id
;

915 i‡(!
	`kØ_li°_push_‰⁄t
(
èrgë
, 
subs_t›ic_id
)) {

916 
	`KAA_FREE
(
subs_t›ic_id
);

917  
KAA_ERR_NOMEM
;

920  
KAA_ERR_NONE
;

921 
	}
}

923 
kØ_îr‹_t
 
	$kØ_add_subs¸ibti⁄s_‹_unsubs¸ibti⁄s
(
kØ_nŸifiˇti⁄_m™agî_t
 *
£lf
, 
uöt64_t
 *
t›ic_ids
, 
size_t
 
size
, 
uöt8_t
 
subs¸ùti⁄_id
)

925 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
t›ic_ids
, 
KAA_ERR_BADPARAM
);

927 
kØ_li°_t
 *
√w_subs¸ùti⁄s
 = 
	`kØ_li°_¸óã
();

928 
	`KAA_RETURN_IF_NIL
(
√w_subs¸ùti⁄s
, 
KAA_ERR_NOMEM
);

929 
size
--) {

930 
uöt64_t
 *
subs_t›ic_id
 = 
	`KAA_MALLOC
((*subs_topic_id));

931 
	`KAA_RETURN_IF_NIL
(
subs_t›ic_id
, 
KAA_ERR_NOMEM
);

932 *
subs_t›ic_id
 = 
t›ic_ids
[
size
];

933 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "GoingÅoádd %sÅoÅopic with id '%llu'",

934 
subs¸ùti⁄_id
 =
SUBSCRIPTION_ID
 ? "subscription" : "unsubscription",

935 *
subs_t›ic_id
);

936 i‡(!
	`kØ_li°_push_‰⁄t
(
√w_subs¸ùti⁄s
, 
subs_t›ic_id
)) {

937 
	`KAA_FREE
(
subs_t›ic_id
);

938 
	`kØ_li°_de°roy
(
√w_subs¸ùti⁄s
, &
kØ_d©a_de°roy
);

939  
KAA_ERR_NOMEM
;

942 
kØ_li°_t
 *
subs¸ùti⁄s
 = 
subs¸ùti⁄_id
 =
SUBSCRIPTION_ID
 ? 
£lf
->subs¸ùti⁄†: sñf->
unsubs¸ùti⁄s
;

943 
	`kØ_li°s_mîge
(
subs¸ùti⁄s
, 
√w_subs¸ùti⁄s
);

944 
	`kØ_li°_de°roy
(
√w_subs¸ùti⁄s
, 
NULL
);

945  
KAA_ERR_NONE
;

946 
	}
}

948 
kØ_îr‹_t
 
	$kØ_subs¸ibe_to_t›ic
(
kØ_nŸifiˇti⁄_m™agî_t
 *
£lf
, 
uöt64_t
 *
t›ic_id
, 
boﬁ
 
f‹˚_sync
)

950 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
t›ic_id
, 
KAA_ERR_BADPARAM
);

951 
kØ_t›ic_t
* 
t›ic
 = 
NULL
;

952 
kØ_îr‹_t
 
îr
 = 
	`kØ_föd_t›ic
(
£lf
, &
t›ic
, 
t›ic_id
);

953 i‡(
îr
) {

954 
	`KAA_LOG_WARN
(
£lf
->
loggî
, 
KAA_ERR_BADPARAM
, "FaûedÅÿsubs¸ibêtÿthêt›i¯wôh id '%Œu'.", *
t›ic_id
);

955  
îr
;

957 i‡(
t›ic
->
subs¸ùti⁄_ty≥
 =
MANDATORY_SUBSCRIPTION
) {

958 
	`KAA_LOG_WARN
(
£lf
->
loggî
, 
KAA_ERR_BADPARAM
, "FaûedÅÿsubs¸ibêtÿthêt›i¯wôh id '%Œu'. T›i¯i¢'à›ti⁄Æ.", *
t›ic_id
);

959  
KAA_ERR_BADPARAM
;

961 
îr
 = 
	`kØ_add_subs¸ibti⁄_‹_unsubs¸ibti⁄
(
£lf
->
subs¸ùti⁄s
, 
t›ic_id
);

962 
	`KAA_RETURN_IF_ERR
(
îr
);

964 i‡(
f‹˚_sync
) {

965 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "GoögÅÿsubs¸ibêtÿt›i¯'%Œu'", *
t›ic_id
);

966 
	`kØ_sync_t›ic_subs¸ùti⁄s
(
£lf
);

968 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Subs¸ùti⁄Åÿt›i¯'%Œu' i†po°p⁄edÅû»sync", *
t›ic_id
);

970  
KAA_ERR_NONE
;

971 
	}
}

973 
kØ_îr‹_t
 
	$kØ_subs¸ibe_to_t›ics
(
kØ_nŸifiˇti⁄_m™agî_t
 *
£lf
, 
uöt64_t
 *
t›ic_ids
, 
size_t
 
size
, 
boﬁ
 
f‹˚_sync
)

975 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
t›ic_ids
, 
KAA_ERR_BADPARAM
);

976 
kØ_t›ic_t
 *
t›ic
 = 
NULL
;

977 
kØ_îr‹_t
 
îr
 = 
KAA_ERR_NONE
;

978 
size_t
 
size_c›y
 = 
size
;

979 
size_c›y
--) {

980 
îr
 = 
	`kØ_föd_t›ic
(
£lf
, &
t›ic
, 
t›ic_ids
 + 
size_c›y
);

981 i‡(
îr
) {

982 
	`KAA_LOG_WARN
(
£lf
->
loggî
, 
îr
, "FaûedÅÿsubs¸ibêtÿthêt›ic:Å›i¯nŸ found, id '%Œu'", 
t›ic_ids
[
size_c›y
]);

983  
îr
;

985 i‡(
t›ic
->
subs¸ùti⁄_ty≥
 =
MANDATORY_SUBSCRIPTION
) {

986 
	`KAA_LOG_WARN
(
£lf
->
loggî
, 
KAA_ERR_BADPARAM
, "FaûedÅÿsubs¸ibêtÿthêt›ics. T›i¯wôh id '%Œu'. T›i¯i¢'à›ti⁄Æ.", 
t›ic_ids
[
size_c›y
]);

987  
KAA_ERR_BADPARAM
;

991 i‡(
f‹˚_sync
) {

992 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "GoingÅo subscribeÅoÅheÅopics");

994 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "SubscriptionÅoÅopics isÖostponedÅill sync");

996 
îr
 = 
	`kØ_add_subs¸ibti⁄s_‹_unsubs¸ibti⁄s
(
£lf
, 
t›ic_ids
, 
size
, 
SUBSCRIPTION_ID
);

997 
	`KAA_RETURN_IF_ERR
(
îr
);

999 i‡(
f‹˚_sync
) {

1000 
	`kØ_sync_t›ic_subs¸ùti⁄s
(
£lf
);

1003  
KAA_ERR_NONE
;

1004 
	}
}

1006 
kØ_îr‹_t
 
	$kØ_unsubs¸ibe_‰om_t›ic
(
kØ_nŸifiˇti⁄_m™agî_t
 *
£lf
, 
uöt64_t
 *
t›ic_id
, 
boﬁ
 
f‹˚_sync
)

1008 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
t›ic_id
, 
KAA_ERR_BADPARAM
);

1009 
kØ_t›ic_t
* 
t›ic
 = 
NULL
;

1010 
kØ_îr‹_t
 
îr
 = 
	`kØ_föd_t›ic
(
£lf
, &
t›ic
, 
t›ic_id
);

1011 i‡(
îr
) {

1012 
	`KAA_LOG_WARN
(
£lf
->
loggî
, 
îr
, "FaûedÅÿunsubs¸ibê‰omÅhêt›i¯wôh id '%Œu'.", *
t›ic_id
);

1013  
îr
;

1015 i‡(
t›ic
->
subs¸ùti⁄_ty≥
 =
MANDATORY_SUBSCRIPTION
) {

1016 
	`KAA_LOG_WARN
(
£lf
->
loggî
, 
KAA_ERR_BADPARAM
, "FaûedÅÿunsubs¸ibê‰omÅhêt›i¯wôh id '%Œu'. T›i¯i¢'à›ti⁄Æ.", *
t›ic_id
);

1017  
KAA_ERR_BADPARAM
;

1019 
îr
 = 
	`kØ_add_subs¸ibti⁄_‹_unsubs¸ibti⁄
(
£lf
->
unsubs¸ùti⁄s
, 
t›ic_id
);

1020 
	`KAA_RETURN_IF_ERR
(
îr
);

1022 i‡(
f‹˚_sync
) {

1023 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "GoögÅÿunsubs¸ibê‰omÅhêt›i¯'%Œu'", *
t›ic_id
);

1024 
	`kØ_sync_t›ic_subs¸ùti⁄s
(
£lf
);

1026 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Unsubs¸ùti⁄ fromÅhêt›i¯'%Œu' i†po°p⁄edÅû»sync", *
t›ic_id
);

1028  
KAA_ERR_NONE
;

1029 
	}
}

1031 
kØ_îr‹_t
 
	$kØ_unsubs¸ibe_‰om_t›ics
(
kØ_nŸifiˇti⁄_m™agî_t
 *
£lf
, 
uöt64_t
 *
t›ic_ids
, 
size_t
 
size
, 
boﬁ
 
f‹˚_sync
)

1033 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
t›ic_ids
, 
KAA_ERR_BADPARAM
);

1034 
kØ_t›ic_t
 *
t›ic
 = 
NULL
;

1035 
kØ_îr‹_t
 
îr
 = 
KAA_ERR_NONE
;

1036 
size_t
 
size_c›y
 = 
size
;

1038 
size_c›y
--) {

1039 
îr
 = 
	`kØ_föd_t›ic
(
£lf
, &
t›ic
, 
t›ic_ids
 + 
size_c›y
);

1040 i‡(
îr
) {

1041 
	`KAA_LOG_WARN
(
£lf
->
loggî
, 
îr
, "FaûedÅÿunsubs¸ibê‰omÅhêt›ic:Å›i¯nŸ found, id '%Œu'", 
t›ic_ids
[
size_c›y
]);

1042  
îr
;

1044 i‡(
t›ic
->
subs¸ùti⁄_ty≥
 =
MANDATORY_SUBSCRIPTION
) {

1045 
	`KAA_LOG_WARN
(
£lf
->
loggî
, 
KAA_ERR_BADPARAM
, "FaûedÅÿunsubs¸ibê‰omÅhêt›ics. T›i¯wôh id '%Œu'. T›i¯i¢'à›ti⁄Æ.", 
t›ic_ids
[
size_c›y
]);

1046  
KAA_ERR_BADPARAM
;

1051 i‡(
f‹˚_sync
) {

1052 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "GoingÅo unsubscribe fromÅheÅopics");

1054 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Unsubscription fromÅheÅopics isÖostponedÅill sync");

1057 
îr
 = 
	`kØ_add_subs¸ibti⁄s_‹_unsubs¸ibti⁄s
(
£lf
, 
t›ic_ids
, 
size
, 
UNSUBSCRIPTION_ID
);

1058 
	`KAA_RETURN_IF_ERR
(
îr
);

1060 i‡(
f‹˚_sync
) {

1061 
	`kØ_sync_t›ic_subs¸ùti⁄s
(
£lf
);

1063  
KAA_ERR_NONE
;

1064 
	}
}

1066 
kØ_îr‹_t
 
	$do_sync
(
kØ_nŸifiˇti⁄_m™agî_t
 *
£lf
)

1068 
	`KAA_RETURN_IF_NIL
(
£lf
, 
KAA_ERR_BADPARAM
);

1069 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√l
 =

1070 
	`kØ_ch™√l_m™agî_gë_å™•‹t_ch™√l
(
£lf
->
ch™√l_m™agî
,

1071 
nŸifiˇti⁄_sync_£rvi˚s
[0]);

1072 i‡(
ch™√l
) {

1073 
ch™√l
->
	`sync_h™dÀr
(ch™√l->
c⁄ãxt
, 
nŸifiˇti⁄_sync_£rvi˚s
, 1);

1075 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
KAA_ERR_NOT_FOUND
, "FailedÅo sync:Åransport channelÇot found");

1078  
KAA_ERR_NONE
;

1079 
	}
}

1081 
kØ_îr‹_t
 
	$kØ_sync_t›ic_subs¸ùti⁄s
(
kØ_nŸifiˇti⁄_m™agî_t
 *
£lf
)

1083 
	`KAA_RETURN_IF_NIL
(
£lf
, 
KAA_ERR_BADPARAM
);

1084  
	`do_sync
(
£lf
);

1085 
	}
}

1087 
kØ_îr‹_t
 
	$kØ_t›ic_li°_upd©e
(
kØ_nŸifiˇti⁄_m™agî_t
 *
£lf
, 
kØ_li°_t
 *
√w_t›ics
)

1089 
	`KAA_RETURN_IF_NIL
(
£lf
, 
KAA_ERR_BADPARAM
);

1090 
kØ_t›ic_t
 *
t›ic
 = 
NULL
;

1091 
kØ_li°_node_t
 *
t›ic_node
 = 
	`kØ_li°_begö
(
√w_t›ics
);

1094 
t›ic_node
 && 
	`kØ_li°_gë_size
(
£lf
->
°©us
->
t›ics
) > 0) {

1095 
t›ic
 = 
	`kØ_li°_gë_d©a
(
t›ic_node
);

1096 
	`KAA_RETURN_IF_NIL
(
t›ic
, 
KAA_ERR_NOMEM
);

1097 
	`kØ_li°_ªmove_fú°
(
£lf
->
°©us
->
t›ics
, 
kØ_föd_t›ic_by_id
, &
t›ic
->
id
, 
de°roy_t›ic
);

1098 
t›ic_node
 = 
	`kØ_li°_√xt
(topic_node);

1101 i‡(
	`kØ_li°_gë_size
(
£lf
->
°©us
->
t›ics
)) {

1102 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
,

1104 
	`kØ_li°_gë_size
(
£lf
->
°©us
->
t›ics
));

1106 
kØ_li°_node_t
 *
outd©ed_t›ics
 = 
	`kØ_li°_begö
(
£lf
->
°©us
->
t›ics
);

1107 
outd©ed_t›ics
) {

1108 
t›ic
 = 
	`kØ_li°_gë_d©a
(
outd©ed_t›ics
);

1109 
	`kØ_li°_ªmove_fú°
(
£lf
->
›ti⁄Æ_li°íîs
,

1110 
kØ_föd_›ti⁄Æ_nŸifiˇti⁄_li°íî_by_id
, &
t›ic
->
id
,

1111 
de°roy_›ti⁄Æ_li°íîs_wøµî
);

1112 
outd©ed_t›ics
 = 
	`kØ_li°_√xt
(outdated_topics);

1116 
	`kØ_li°_de°roy
(
£lf
->
°©us
->
t›ics
, &
de°roy_t›ic
);

1117 
	`kØ_li°_s‹t
(
√w_t›ics
, &
s‹t_t›ic_by_id
);

1118 
£lf
->
°©us
->
t›ic_li°_hash
 = 
	`kØ_li°_hash
(
√w_t›ics
, &
gë_t›ic_id
);

1119 
£lf
->
°©us
->
t›ics
 = 
√w_t›ics
;

1120  
	`kØ_nŸify_t›ic_upd©e_subs¸ibîs
(
£lf
, 
√w_t›ics
);

1121 
	}
}

1123 
kØ_îr‹_t
 
	$kØ_nŸifiˇti⁄_ª˚ived
(
kØ_nŸifiˇti⁄_m™agî_t
 *
£lf
, 
kØ_nŸifiˇti⁄_t
 *
nŸifiˇti⁄
, 
uöt64_t
 
t›ic_id
)

1125 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
nŸifiˇti⁄
, 
KAA_ERR_BADDATA
);

1126 i‡(
	`kØ_nŸify_›ti⁄Æ_nŸifiˇti⁄_subs¸ibîs
(
£lf
, 
t›ic_id
, 
nŸifiˇti⁄
)) {

1127 
	`kØ_nŸify_m™d©‹y_nŸifiˇti⁄_subs¸ibîs
(
£lf
, 
t›ic_id
, 
nŸifiˇti⁄
);

1129  
KAA_ERR_NONE
;

1130 
	}
}

1132 
kØ_îr‹_t
 
	$upd©e_£quí˚_numbî
(
kØ_nŸifiˇti⁄_m™agî_t
 *
£lf
, 
uöt64_t
 
t›ic_id
, 
uöt32_t
 
sqn_numbî
)

1134 
	`KAA_RETURN_IF_NIL
(
£lf
, 
KAA_ERR_BADPARAM
);

1136 
kØ_t›ic_°©e_t
 *
°©e
;

1137 
kØ_li°_node_t
 *
ô
 = 
	`kØ_li°_föd_√xt
(
	`kØ_li°_begö
(
£lf
->
°©us
->
t›ic_°©es
),

1138 
kØ_föd_t›ic_°©e_by_id
, &
t›ic_id
);

1139 i‡(!
ô
) {

1140 
°©e
 = 
	`KAA_MALLOC
((*state));

1141 
	`KAA_RETURN_IF_NIL
(
°©e
, 
KAA_ERR_NOMEM
);

1143 i‡(!
	`kØ_li°_push_‰⁄t
(
£lf
->
°©us
->
t›ic_°©es
, 
°©e
)) {

1144 
	`KAA_FREE
(
°©e
);

1145  
KAA_ERR_NOMEM
;

1148 
°©e
->
t›ic_id
 =Åopic_id;

1149 
°©e
->
sqn_numbî
 = sqn_number;

1150 
£lf
->
°©us
->
has_upd©e
 = 
åue
;

1152 
°©e
 = 
	`kØ_li°_gë_d©a
(
ô
);

1153 i‡(
sqn_numbî
 > 
°©e
->sqn_number) {

1154 
°©e
->
sqn_numbî
 = sqn_number;

1155 
£lf
->
°©us
->
has_upd©e
 = 
åue
;

1158  
KAA_ERR_NONE
;

1159 
	}
}

1161 
	$kØ_nŸify_nŸifiˇti⁄_li°íîs
(*
d©a
, * 
c⁄ãxt
)

1163 
	`KAA_RETURN_IF_NIL2
(
d©a
, 
c⁄ãxt
, );

1164 
kØ_îr‹_t
 
îr
 = 
KAA_ERR_NONE
;

1165 
kØ_t›ic_nŸifiˇti⁄s_node_t
 *
node
 = 
d©a
;

1166 
kØ_li°_node_t
 *
nŸifiˇti⁄_li°_node
 = 
	`kØ_li°_begö
(
node
->
nŸifiˇti⁄s
);

1167 
kØ_nŸifiˇti⁄_m™agî_t
 *
£lf
 = 
c⁄ãxt
;

1169 
nŸifiˇti⁄_li°_node
) {

1170 
kØ_nŸifiˇti⁄_wøµî_t
 *
wøµî
 = 
	`kØ_li°_gë_d©a
(
nŸifiˇti⁄_li°_node
);

1171 
kØ_li°_node_t
 *
ô
 = 
	`kØ_li°_föd_√xt
(
	`kØ_li°_begö
(
£lf
->
°©us
->
t›ic_°©es
),

1172 
kØ_föd_t›ic_°©e_by_id
, &
node
->
t›ic_id
);

1173 i‡(
ô
) {

1174 
kØ_t›ic_°©e_t
 *
°©e
 = 
	`kØ_li°_gë_d©a
(
ô
);

1175 i‡(
wøµî
->
sqn
 > 
°©e
->
sqn_numbî
) {

1176 
îr
 = 
	`kØ_nŸifiˇti⁄_ª˚ived
(
£lf
, 
wøµî
->
nŸifiˇti⁄
, 
node
->
t›ic_id
);

1179 
îr
 = 
	`kØ_nŸifiˇti⁄_ª˚ived
(
£lf
, 
wøµî
->
nŸifiˇti⁄
, 
node
->
t›ic_id
);

1180 i‡(
îr
) {

1181 
	`KAA_LOG_WARN
(
£lf
->
loggî
, 
îr
, "FailedÅoÇotifyÇotificationÜistener");

1186 
îr
 = 
	`upd©e_£quí˚_numbî
(
£lf
, 
node
->
t›ic_id
, 
wøµî
->
sqn
);

1187 i‡(
îr
) {

1188 
	`KAA_LOG_WARN
(
£lf
->
loggî
, 
îr
, "FaûedÅÿupd©ênŸifiˇti⁄ sequí˚Çumbî f‹Å›i¯'%Œu'", 
node
->
t›ic_id
);

1191 
nŸifiˇti⁄_li°_node
 = 
	`kØ_li°_√xt
(notification_list_node);

1193 
	}
}

1195 
kØ_îr‹_t
 
	$kØ_nŸifiˇti⁄_m™agî_h™dÀ_£rvî_sync
(
kØ_nŸifiˇti⁄_m™agî_t
 *
£lf
,

1196 
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî
, 
uöt32_t
 
exãnsi⁄_Àngth
)

1198 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
ªadî
, 
KAA_ERR_BADPARAM
);

1200 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Re˚ivedÇŸifiˇti⁄ sîvî sync: o±i⁄†0,Öaylﬂd sizê%lu", 
exãnsi⁄_Àngth
);

1202 
	`kØ_li°_˛ór
(
£lf
->
subs¸ùti⁄s
, &
kØ_d©a_de°roy
);

1203 
	`kØ_li°_˛ór
(
£lf
->
unsubs¸ùti⁄s
, &
kØ_d©a_de°roy
);

1205 i‡(
exãnsi⁄_Àngth
 > 0) {

1206 
kØ_îr‹_t
 
îr
 = 
KAA_ERR_NONE
;

1207 i‡(
	`KAA_NTOHL
(*((
uöt32_t
 *Ë
ªadî
->
cuºít
)Ë=
KAA_NO_DELTA
) {

1208 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Received deltaÑesponse: NO DELTA. GoingÅo clear uidsÜist...");

1209 
	`kØ_li°_˛ór
(
£lf
->
uids
, 
de°roy_nŸifiˇti⁄s_uid
);

1211 
	`shi·_™d_sub_exãnsi⁄
(
ªadî
, &
exãnsi⁄_Àngth
, (
uöt32_t
));

1212 
exãnsi⁄_Àngth
 > 0) {

1213 
uöt8_t
 
fõld_id
 = *(uöt8_à*)
ªadî
->
cuºít
;

1214 
	`shi·_™d_sub_exãnsi⁄
(
ªadî
, &
exãnsi⁄_Àngth
, (
uöt16_t
));

1216 
fõld_id
) {

1217 
NOTIFICATIONS
: {

1218 
kØ_nŸifiˇti⁄_t
 *
nŸifiˇti⁄
 = 
NULL
;

1219 
uöt32_t
 
£q_numbî
 = 0;

1220 
uöt16_t
 
nŸifiˇti⁄s_cou¡
 = 
	`KAA_NTOHS
(*((uöt16_à*Ë
ªadî
->
cuºít
));

1221 
	`shi·_™d_sub_exãnsi⁄
(
ªadî
, &
exãnsi⁄_Àngth
, (
uöt16_t
));

1223 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Re˚ivedÇŸifiˇti⁄s. NŸifiˇti⁄†cou¡ i†%u", 
nŸifiˇti⁄s_cou¡
);

1225 
nŸifiˇti⁄s_cou¡
--) {

1226 
£q_numbî
 = 
	`KAA_NTOHL
(*((
uöt32_t
 *Ë
ªadî
->
cuºít
));

1227 
	`shi·_™d_sub_exãnsi⁄
(
ªadî
, &
exãnsi⁄_Àngth
, (
uöt16_t
Ë+ (
uöt32_t
));

1228 
uöt16_t
 
uid_Àngth
 = 
	`KAA_NTOHS
(*((uöt16_à*Ë
ªadî
->
cuºít
));

1229 
	`shi·_™d_sub_exãnsi⁄
(
ªadî
, &
exãnsi⁄_Àngth
, (
uöt16_t
));

1230 
uöt32_t
 
nŸifiˇti⁄_size
 = 
	`KAA_NTOHL
(*((uöt32_à*Ë
ªadî
->
cuºít
));

1231 
	`shi·_™d_sub_exãnsi⁄
(
ªadî
, &
exãnsi⁄_Àngth
, (
uöt32_t
));

1232 
uöt64_t
 
t›ic_id
 = 
	`KAA_NTOHLL
(*((uöt64_à*Ë
ªadî
->
cuºít
));

1233 
	`shi·_™d_sub_exãnsi⁄
(
ªadî
, &
exãnsi⁄_Àngth
, (
uöt64_t
));

1235 
kØ_t›ic_t
 *
t›ic_found
;

1236 
îr
 = 
	`kØ_föd_t›ic
(
£lf
, &
t›ic_found
, &
t›ic_id
);

1237 i‡(
îr
) {

1238 
	`KAA_LOG_WARN
(
£lf
->
loggî
, 
îr
, "T›i¯wôh id %Œu i†nŸ found. SkùpögÇŸifiˇti⁄...", 
t›ic_id
);

1239 
size_t
 
skùed_size
 = 
	`kØ_Æig√d_size_gë
(
uid_Àngth
Ë+ kØ_Æig√d_size_gë(
nŸifiˇti⁄_size
);

1240 
	`shi·_™d_sub_exãnsi⁄
(
ªadî
, &
exãnsi⁄_Àngth
, 
skùed_size
);

1243 i‡(
uid_Àngth
) {

1244 
kØ_nŸifiˇti⁄s_uid_t
 *
uid
 = 
	`KAA_MALLOC
((*uid));

1245 
	`KAA_RETURN_IF_NIL
(
uid
, 
KAA_ERR_NOMEM
);

1247 
uid
->
Àngth
 = 
uid_Àngth
;

1248 
uid
->
d©a
 = 
	`KAA_MALLOC
(
uid_Àngth
);

1249 i‡(!
uid
->
d©a
) {

1250 
	`de°roy_nŸifiˇti⁄s_uid
(
uid
);

1251  
KAA_ERR_NOMEM
;

1253 
îr
 = 
	`kØ_∂©f‹m_mesßge_ªad_Æig√d
(
ªadî
, 
uid
->
d©a
, uid->
Àngth
);

1254 i‡(
îr
) {

1255 
	`KAA_LOG_WARN
(
£lf
->
loggî
, 
îr
, "FaûedÅÿªad UID body,Å›i¯id %Œu", 
t›ic_id
);

1256  
îr
;

1258 
exãnsi⁄_Àngth
 -
	`kØ_Æig√d_size_gë
(
uid
->
Àngth
);

1260 
kØ_li°_node_t
 *
has_bìn_Æªady_ª˚ived
 = 
	`kØ_li°_föd_√xt
(
	`kØ_li°_begö
(
£lf
->
uids
), &
kØ_föd_uid
, 
uid
);

1261 i‡(
has_bìn_Æªady_ª˚ived
) {

1262 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "This unicastÇotification has beenálreadyÑeceived");

1263 
	`shi·_™d_sub_exãnsi⁄
(
ªadî
, &
exãnsi⁄_Àngth
, 
	`kØ_Æig√d_size_gë
(
nŸifiˇti⁄_size
));

1264 
	`de°roy_nŸifiˇti⁄s_uid
(
uid
);

1268 i‡(!
	`kØ_li°_push_‰⁄t
(
£lf
->
uids
, 
uid
)) {

1269 
	`de°roy_nŸifiˇti⁄s_uid
(
uid
);

1270  
KAA_ERR_NOMEM
;

1273 i‡(
nŸifiˇti⁄_size
) {

1274 
avro_ªadî_t
 
avro_ªadî
 = 
	`avro_ªadî_mem‹y
((c⁄° *)
ªadî
->
cuºít
, 
nŸifiˇti⁄_size
);

1275 i‡(!
avro_ªadî
) {

1276  
KAA_ERR_NOMEM
;

1278 
nŸifiˇti⁄
 = 
	`KAA_NOTIFICATION_DESERIALIZE
(
avro_ªadî
);

1279 
	`avro_ªadî_‰ì
(
avro_ªadî
);

1280 i‡(!
nŸifiˇti⁄
) {

1281 
	`KAA_LOG_WARN
(
£lf
->
loggî
, 
KAA_ERR_NOMEM
, "FailedÅo deserializeÇotification");

1282  
KAA_ERR_NOMEM
;

1285 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Notification's sqn '%lu',Åopic id '%llu',Åype '%s', size '%lu'"

1286 , 
£q_numbî
, 
t›ic_id
, 
uid_Àngth
 ? "uniˇ°" : "mu…iˇ°", 
nŸifiˇti⁄_size
);

1287 
	`shi·_™d_sub_exãnsi⁄
(
ªadî
, &
exãnsi⁄_Àngth
, 
	`kØ_Æig√d_size_gë
(
nŸifiˇti⁄_size
));

1288 i‡(
uid_Àngth
 == 0) {

1289 
îr
 = 
	`kØ_add_nŸifiˇti⁄_to_m≠
(
£lf
->
nŸifiˇti⁄s
, 
nŸifiˇti⁄
, 
t›ic_id
, &
£q_numbî
);

1291 
îr
 = 
	`kØ_nŸifiˇti⁄_ª˚ived
(
£lf
, 
nŸifiˇti⁄
, 
t›ic_id
);

1292 
nŸifiˇti⁄
->
	`de°roy
(notification);

1294 i‡(
îr
) {

1295 
	`KAA_LOG_WARN
(
£lf
->
loggî
, 
îr
, "FailedÅoáddÇotificationÅo map");

1296  
KAA_ERR_NOMEM
;

1302 
TOPICS
: {

1303 
kØ_li°_t
 *
√w_t›ics
 = 
	`kØ_li°_¸óã
();

1304 
	`KAA_RETURN_IF_NIL
(
√w_t›ics
, 
KAA_ERR_NOMEM
);

1306 
uöt16_t
 
t›ic_cou¡
 = 
	`KAA_NTOHS
(*((uöt16_à*Ë
ªadî
->
cuºít
));

1307 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Re˚ivedÅ›ic†li°. T›ic†cou¡ i†%u", 
t›ic_cou¡
);

1308 
	`shi·_™d_sub_exãnsi⁄
(
ªadî
, &
exãnsi⁄_Àngth
, (
uöt16_t
));

1310 
t›ic_cou¡
--) {

1311 
kØ_t›ic_t
 *
t›ic
 = (kØ_t›ic_à*Ë
	`KAA_MALLOC
((kaa_topic_t));

1312 
	`KAA_RETURN_IF_NIL
(
t›ic
, 
KAA_ERR_NOMEM
);

1313 
t›ic
->
id
 = 
	`KAA_NTOHLL
(*((
uöt64_t
 *Ë
ªadî
->
cuºít
));

1314 
	`shi·_™d_sub_exãnsi⁄
(
ªadî
, &
exãnsi⁄_Àngth
, (
uöt64_t
));

1315 
t›ic
->
subs¸ùti⁄_ty≥
 = (*((
uöt8_t
 *Ë
ªadî
->
cuºít
Ë=
MANDATORY_SUBSCRIPTION
Ë? MANDATORY_SUBSCRIPTION : 
OPTIONAL_SUBSCRIPTION
;

1316 
	`shi·_™d_sub_exãnsi⁄
(
ªadî
, &
exãnsi⁄_Àngth
, (
uöt16_t
));

1317 
t›ic
->
«me_Àngth
 = 
	`KAA_NTOHS
(*((
uöt16_t
 *Ë
ªadî
->
cuºít
));

1318 
	`shi·_™d_sub_exãnsi⁄
(
ªadî
, &
exãnsi⁄_Àngth
, (
uöt16_t
));

1320 
t›ic
->
«me
 = (*Ë
	`KAA_MALLOC
—›ic->
«me_Àngth
 + 1);

1321 i‡(!
t›ic
->
«me
) {

1322 
	`de°roy_t›ic
(
t›ic
);

1323  
KAA_ERR_NOMEM
;

1326 
îr
 = 
	`kØ_∂©f‹m_mesßge_ªad_Æig√d
(
ªadî
, 
t›ic
->
«me
,Å›ic->
«me_Àngth
);

1327 i‡(
îr
) {

1328 
	`KAA_LOG_WARN
(
£lf
->
loggî
, 
KAA_ERR_BADDATA
, "FailedÅoÑeadÅopic'sÇame");

1329 
	`de°roy_t›ic
(
t›ic
);

1330  
îr
;

1333 
t›ic
->
«me
[t›ic->
«me_Àngth
] = '\0';

1334 
exãnsi⁄_Àngth
 -
	`kØ_Æig√d_size_gë
(
t›ic
->
«me_Àngth
);

1335 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Topic Id '%llu', subscriptionÅype '%s',Çame '%s'"

1336 , 
t›ic
->
id
, (t›ic->
subs¸ùti⁄_ty≥
 =
MANDATORY_SUBSCRIPTION
Ë? "m™d©‹y": "›ti⁄Æ",Å›ic->
«me
);

1338 i‡(!
	`kØ_li°_push_‰⁄t
(
√w_t›ics
, 
t›ic
)) {

1339 
	`de°roy_t›ic
(
t›ic
);

1340  
KAA_ERR_NOMEM
;

1344 
îr
 = 
	`kØ_t›ic_li°_upd©e
(
£lf
, 
√w_t›ics
);

1345 i‡(
îr
) {

1346 
	`KAA_LOG_WARN
(
£lf
->
loggî
, 
îr
, "FailedÅoÇotifyÅopicÜistÜisteners");

1352 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Bad field IDÅype");

1353  
KAA_ERR_BADDATA
;

1358 i‡(
	`kØ_li°_gë_size
(
£lf
->
nŸifiˇti⁄s
)) {

1359 
	`kØ_s‹t_nŸifiˇti⁄s
(
£lf
->
nŸifiˇti⁄s
);

1360 
	`kØ_li°_f‹_óch
(
	`kØ_li°_begö
(
£lf
->
nŸifiˇti⁄s
), 
	`kØ_li°_back
(£lf->nŸifiˇti⁄s), 
kØ_nŸify_nŸifiˇti⁄_li°íîs
, self);

1361 
	`kØ_li°_˛ór
(
£lf
->
nŸifiˇti⁄s
, &
kØ_de°roy_nŸifiˇti⁄_node
);

1362 i‡(!
£lf
->
nŸifiˇti⁄s
) {

1363  
KAA_ERR_NOMEM
;

1367  
	`do_sync
(
£lf
);

1368 
	}
}

	@/var/www/html/debian/gateway/kaa/src/extensions/notification/kaa_notification_manager.h

17 #i‚de‡
KAA_KAA_NOTIFICATION_H_


18 
	#KAA_KAA_NOTIFICATION_H_


	)

20 
	~<°döt.h
>

21 
	~<°dboﬁ.h
>

22 
	~<°ddef.h
>

24 
	~"kØ_îr‹.h
"

25 
	~"∂©f‹m/ext_nŸifiˇti⁄_ª˚ivî.h
"

26 
	~"cﬁÀ˘i⁄s/kØ_li°.h
"

30 #ifde‡
__˝lu•lus


34 #i‚de‡
KAA_NOTIFICATION_MANAGER_T


35 
	#KAA_NOTIFICATION_MANAGER_T


	)

39 
kØ_nŸifiˇti⁄_m™agî_t
 
	tkØ_nŸifiˇti⁄_m™agî_t
;

52 
kØ_îr‹_t
 
kØ_ˇlcuœã_t›ic_li°íî_id
(c⁄° 
kØ_t›ic_li°íî_t
 *
li°íî
, 
uöt32_t
 *
li°íî_id
);

62 
kØ_îr‹_t
 
kØ_ˇlcuœã_nŸifiˇti⁄_li°íî_id
(c⁄° 
kØ_nŸifiˇti⁄_li°íî_t
 *
li°íî
, 
uöt32_t
 *
li°íî_id
);

73 
kØ_îr‹_t
 
kØ_add_nŸifiˇti⁄_li°íî
(
kØ_nŸifiˇti⁄_m™agî_t
 *
£lf
, 
kØ_nŸifiˇti⁄_li°íî_t
 *
li°íî
, 
uöt32_t
 *
li°íî_id
);

85 
kØ_îr‹_t
 
kØ_add_›ti⁄Æ_nŸifiˇti⁄_li°íî
(
kØ_nŸifiˇti⁄_m™agî_t
 *
£lf
, 
kØ_nŸifiˇti⁄_li°íî_t
 *
li°íî


86 , 
uöt64_t
 *
t›ic_id
, 
uöt32_t
 *
li°íî_id
);

96 
kØ_îr‹_t
 
kØ_ªmove_nŸifiˇti⁄_li°íî
(
kØ_nŸifiˇti⁄_m™agî_t
 *
£lf
, 
uöt32_t
 *
li°íî_id
);

107 
kØ_îr‹_t
 
kØ_ªmove_›ti⁄Æ_nŸifiˇti⁄_li°íî
(
kØ_nŸifiˇti⁄_m™agî_t
 *
£lf
, 
uöt64_t
 *
t›ic_id
, 
uöt32_t
 *
li°íî_id
);

118 
kØ_îr‹_t
 
kØ_add_t›ic_li°_li°íî
(
kØ_nŸifiˇti⁄_m™agî_t
 *
£lf
, 
kØ_t›ic_li°íî_t
 *
li°íî
, 
uöt32_t
 *
t›ic_li°íî_id
);

128 
kØ_îr‹_t
 
kØ_ªmove_t›ic_li°_li°íî
(
kØ_nŸifiˇti⁄_m™agî_t
 *
£lf
, 
uöt32_t
 *
t›ic_li°íî_id
);

138 
kØ_îr‹_t
 
kØ_gë_t›ics
(
kØ_nŸifiˇti⁄_m™agî_t
 *
£lf
, 
kØ_li°_t
 **
t›ics
);

149 
kØ_îr‹_t
 
kØ_subs¸ibe_to_t›ic
(
kØ_nŸifiˇti⁄_m™agî_t
 *
£lf
, 
uöt64_t
 *
t›ic_id
, 
boﬁ
 
f‹˚_sync
);

161 
kØ_îr‹_t
 
kØ_subs¸ibe_to_t›ics
(
kØ_nŸifiˇti⁄_m™agî_t
 *
£lf
, 
uöt64_t
 *
t›ic_ids
, 
size_t
 
size
, 
boﬁ
 
f‹˚_sync
);

172 
kØ_îr‹_t
 
kØ_unsubs¸ibe_‰om_t›ic
(
kØ_nŸifiˇti⁄_m™agî_t
 *
£lf
, 
uöt64_t
 *
t›ic_id
, 
boﬁ
 
f‹˚_sync
);

184 
kØ_îr‹_t
 
kØ_unsubs¸ibe_‰om_t›ics
(
kØ_nŸifiˇti⁄_m™agî_t
 *
£lf
, 
uöt64_t
 *
t›ic_ids
, 
size_t
 
size
, 
boﬁ
 
f‹˚_sync
);

193 
kØ_îr‹_t
 
kØ_sync_t›ic_subs¸ùti⁄s
(
kØ_nŸifiˇti⁄_m™agî_t
 *
£lf
);

195 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/extensions/notification/test/test_kaa_notification.c

17 
	~<°rög.h
>

18 
	~<°dio.h
>

20 
	~"kØ_ã°.h
"

22 
	~"kØ_nŸifiˇti⁄_m™agî.h
"

23 
	~"kØ.h
"

24 
	~<∂©f‹m/sock.h
>

25 
	~"kØ_îr‹.h
"

26 
	~"kØ_comm⁄.h
"

27 
	~"kØ_c⁄ãxt.h
"

28 
	~"utûôõs/kØ_mem.h
"

29 
	~"utûôõs/kØ_log.h
"

30 
	~"avro_§c/avro/io.h
"

31 
	~"∂©f‹m/sock.h
"

32 
	~"kØ_∂©f‹m_comm⁄.h
"

33 
	~"kØ_∂©f‹m_utûs.h
"

34 
	~"kØ_∂©f‹m_¥Ÿocﬁ.h
"

37 
kØ_c⁄ãxt_t
 *
	gc⁄ãxt
 = 
NULL
;

39 
kØ_nŸifiˇti⁄_li°íî_t
 
	gli°íî
;

40 
kØ_nŸifiˇti⁄_li°íî_t
 
	gli°íî_2
;

41 
kØ_loggî_t
* 
	gloggî
;

43 
uöt8_t
 *
	gbuf„r_poöãr
 = 
NULL
;

44 
kØ_li°_t
 *
	gt›ics
 = 
NULL
;

45 
uöt64_t
 
	gt›ic_id
;

47 
uöt32_t
 
	gid
,
	gid2
;

48 
kØ_îr‹_t
 
	gîr
 = 0;

49 
size_t
 
	gsize
 = 0;

51 
uöt8_t
 *
	gpoöãr_to_sqn
 = 
NULL
;

53 
boﬁ
 
	gli°íî_has_bìn_nŸifõd
 = 
Ál£
;

54 
kØ_t›ic_li°íî_t
 
	gt›ic_li°íî
;

55 
kØ_t›ic_li°íî_t
 
	gt›ic_li°íî_2
;

57 
	$⁄_nŸifiˇti⁄
(* 
c⁄ãxtmock
, 
uöt64_t
 *
t›ic_id
, 
kØ_nŸifiˇti⁄_t
 *
nŸif
)

59 ()
c⁄ãxtmock
;

60 ()
t›ic_id
;

61 ()
nŸif
;

62 
	`¥ötf
("\nNotificationÜistener got his Notification\n\n");

63 
li°íî_has_bìn_nŸifõd
 = 
åue
;

64 
	}
}

66 
	$⁄_t›ic
(* 
c⁄ãxtmock
, 
kØ_li°_t
 *
t›ics
)

68 ()
c⁄ãxtmock
;

69 ()
t›ics
;

70 
	`¥ötf
("\nTopicÜistÜistener got hisÅopicÜist.\n\n");

71 
	}
}

73 
uöt8_t
 *
	gbuf„r
 = 
NULL
;

74 
size_t
 
	gbuf„r_size
 = 0;

83 
	#KAA_STATUS_FILE_NAME
 "./kØ_°©us.bö"

	)

84 
	$ªmove_°©e_fûe
(c⁄° * 
fûíame
)

86 
ªs
 = 
	`ªmove
(
fûíame
);

87 i‡(!
ªs
) {

88 
	`¥ötf
("Status file has been successfullyÑemoved\n");

90 
	`¥ötf
("Error: Can'tÑemove status file!\n");

92 
	}
}

95 
	$ã°_öô
()

97 
îr
 = 
KAA_ERR_NONE
;

99 
îr
 = 
	`kØ_öô
(&
c⁄ãxt
);

100 i‡(
îr
) {

101  
îr
;

103 
li°íî
.
ˇŒback
 = &
⁄_nŸifiˇti⁄
;

104 
li°íî
.
c⁄ãxt
 = 
NULL
;

105 
li°íî_2
.
ˇŒback
 = &
⁄_nŸifiˇti⁄
;

106 
li°íî_2
.
c⁄ãxt
 = &
li°íî
;

108 
t›ic_li°íî
.
ˇŒback
 = &
⁄_t›ic
;

109 
t›ic_li°íî
.
c⁄ãxt
 = 
NULL
;

110 
t›ic_li°íî_2
.
ˇŒback
 = &
⁄_t›ic
;

111 
t›ic_li°íî_2
.
c⁄ãxt
 = &
t›ic_li°íî
;

113 
t›ic_id
 = 22;

115 
	}
}

117 
	$ã°_deöô
()

119 i‡(
c⁄ãxt
) {

120 
	`kØ_deöô
(
c⁄ãxt
);

122 i‡(
buf„r_poöãr
) {

123 
	`KAA_FREE
(
buf„r_poöãr
);

126 
	`ªmove_°©e_fûe
(
KAA_STATUS_FILE_NAME
);

128 
	}
}

130 
	$ã°_de£rülizög
(**
°©e
)

132 ()
°©e
;

134 
kØ_nŸifiˇti⁄_t
 *
nŸifiˇti⁄
 = 
	`kØ_nŸifiˇti⁄_nŸifiˇti⁄_¸óã
();

135 c⁄° *
mesßge
 = "Hello World!!!\n";

136 
nŸifiˇti⁄
->
mesßge
 = 
	`kØ_°rög_c›y_¸óã
(message);

137 
size
 = ((
uöt32_t
Ë+ (
uöt16_t
) + (uint16_t) + (uint16_t) + (uint16_t) + (uint32_t)

138  + (
uöt32_t
Ë+ (uöt32_tË + (
uöt16_t
Ë+ (uöt16_tË + (
uöt64_t
)

139 + (
uöt16_t
Ë+ (uöt16_tË + (
uöt32_t
) + (uint16_t) + (uint16_t)

140 + (
uöt32_t
Ë + (
uöt16_t
Ë+ (uöt16_tË +  (uöt32_tË +  (
uöt64_t
)

141 + + 
	`kØ_Æig√d_size_gë
(
nŸifiˇti⁄
->
	`gë_size
(notification)));

143 
uöt8_t
 *
un£rülized_buf„r
 = 
	`KAA_MALLOC
(
size
);

144 
	`ASSERT_NOT_NULL
(
un£rülized_buf„r
);

145 
buf„r_poöãr
 = 
un£rülized_buf„r
;

146 
	`mem£t
(
un£rülized_buf„r
, 0, 
size
);

147 *(
uöt32_t
 *)
un£rülized_buf„r
 = 
	`KAA_HTONL
((uöt32_tË
KAA_PLATFORM_PROTOCOL_ID
);

148 
un£rülized_buf„r
 +(
uöt32_t
);

149 *(
uöt16_t
 *)
un£rülized_buf„r
 = 
	`KAA_HTONS
((uint16_t)1);

150 
un£rülized_buf„r
 +(
uöt16_t
);

151 *(
uöt16_t
 *)
un£rülized_buf„r
 = 
	`KAA_HTONS
((uint16_t)1);

152 
un£rülized_buf„r
 +(
uöt16_t
);

154 *(
uöt16_t
 *)
un£rülized_buf„r
 = 
	`KAA_HTONS
((uöt16_t)
KAA_EXTENSION_NOTIFICATION
);

155 
un£rülized_buf„r
 +(
uöt16_t
);

156 
un£rülized_buf„r
 +(
uöt16_t
);

158 
uöt32_t
 
∑ylﬂd_öfo
 = (uöt32_tË + (
uöt16_t
Ë+ (uöt16_tË + (
uöt64_t
)

159 + (
uöt16_t
Ë+ (uöt16_tË + (
uöt32_t
) + (uint16_t) + (uint16_t)

160 + (
uöt32_t
Ë + (
uöt16_t
Ë+ (uöt16_tË +  (uöt32_tË +  (
uöt64_t
)

161 + 
	`kØ_Æig√d_size_gë
(
nŸifiˇti⁄
->
	`gë_size
(notification));

163 *(
uöt32_t
 *)
un£rülized_buf„r
 = 
	`KAA_HTONL
((uöt32_tË
∑ylﬂd_öfo
);

164 
un£rülized_buf„r
 +(
uöt32_t
);

165 *(
uöt32_t
 *)
un£rülized_buf„r
 = 
	`KAA_HTONL
((uint32_t)2);

166 
un£rülized_buf„r
 +(
uöt32_t
);

168 *(
uöt8_t
 *)
un£rülized_buf„r
 = (uint8_t)0;

169 
un£rülized_buf„r
 +(
uöt16_t
);

170 *(
uöt16_t
 *)
un£rülized_buf„r
 = 
	`KAA_HTONS
 ((uint16_t)1);

171 
un£rülized_buf„r
 +(
uöt16_t
);

172 *(
uöt64_t
 *)
un£rülized_buf„r
 = 
	`KAA_HTONLL
((uint64_t)22);

173 
un£rülized_buf„r
 +(
uöt64_t
);

174 *(
uöt8_t
 *)
un£rülized_buf„r
 = (uöt8_t)
OPTIONAL_SUBSCRIPTION
;

175 
un£rülized_buf„r
 +(
uöt16_t
);

176 *(
uöt16_t
 *)
un£rülized_buf„r
 = 
	`KAA_HTONS
((uint16_t)4);

177 
un£rülized_buf„r
 +(
uöt16_t
);

178 *
un£rülized_buf„r
++ = 'K';*unserialized_buffer++ = 'A';

179 *
un£rülized_buf„r
++ = 'A';*unserialized_buffer++ = 'A';

180 
un£rülized_buf„r
 +(4 - 
	`kØ_Æig√d_size_gë
(4));

182 *(
uöt8_t
 *)
un£rülized_buf„r
 = (uint8_t)1;

183 
un£rülized_buf„r
 +(
uöt16_t
);

184 *(
uöt16_t
 *)
un£rülized_buf„r
 = 
	`KAA_HTONS
 ((uint16_t)1);

185 
un£rülized_buf„r
 +(
uöt16_t
);

186 *(
uöt32_t
 *)
un£rülized_buf„r
 = 
	`KAA_HTONL
((uint32_t)99);

187 
poöãr_to_sqn
 = 
un£rülized_buf„r
;

188 
un£rülized_buf„r
 +(
uöt32_t
);

189 *(
uöt8_t
 *)
un£rülized_buf„r
 = (uint8_t)0x1;

190 
un£rülized_buf„r
 +(
uöt16_t
);

191 *(
uöt16_t
 *)
un£rülized_buf„r
 = 
	`KAA_HTONS
 ((uint16_t) 0);

192 
un£rülized_buf„r
 +(
uöt16_t
);

193 *(
uöt32_t
 *)
un£rülized_buf„r
 = 
	`KAA_HTONL
 ((uöt32_t)
nŸifiˇti⁄
->
	`gë_size
(notification));

194 
un£rülized_buf„r
 +(
uöt32_t
);

195 *(
uöt64_t
 *)
un£rülized_buf„r
 = 
	`KAA_HTONLL
((uint64_t)22);

196 
un£rülized_buf„r
 +(
uöt64_t
);

198 
avro_wrôî_t
 
avro_wrôî
 = 
	`avro_wrôî_mem‹y
((c⁄° *)
un£rülized_buf„r
, 
nŸifiˇti⁄
->
	`gë_size
(notification));

199 
nŸifiˇti⁄
->
	`£rülize
(
avro_wrôî
,Çotification);

200 
îr
 = 
	`kØ_∂©f‹m_¥Ÿocﬁ_¥o˚ss_£rvî_sync
(
c⁄ãxt
->
∂©f‹m_¥Ÿocﬁ
, 
buf„r_poöãr
, 
size
);

201 
	`avro_wrôî_‰ì
(
avro_wrôî
);

203 
	`ASSERT_EQUAL
(
îr
, 
KAA_ERR_NONE
);

205 
nŸifiˇti⁄
->
	`de°roy
(notification);

206 
	}
}

208 
	$ã°_nŸifiˇti⁄_li°íîs_addög_™d_ªmovög
(**
°©e
)

210 ()
°©e
;

212 
îr
 = 
	`kØ_add_nŸifiˇti⁄_li°íî
(
c⁄ãxt
->
nŸifiˇti⁄_m™agî
, &
li°íî
, &
id
);

213 
	`ASSERT_EQUAL
(
îr
, 
KAA_ERR_NONE
);

215 
îr
 = 
	`kØ_add_nŸifiˇti⁄_li°íî
(
c⁄ãxt
->
nŸifiˇti⁄_m™agî
, &
li°íî
, &
id
);

216 
	`ASSERT_NOT_EQUAL
(
îr
, 
KAA_ERR_NONE
);

218 
îr
 = 
	`kØ_add_nŸifiˇti⁄_li°íî
(
c⁄ãxt
->
nŸifiˇti⁄_m™agî
, &
li°íî_2
, &
id2
);

219 
	`ASSERT_EQUAL
(
îr
, 
KAA_ERR_NONE
);

221 
îr
 = 
	`kØ_ªmove_nŸifiˇti⁄_li°íî
(
c⁄ãxt
->
nŸifiˇti⁄_m™agî
, &
id
);

222 
	`ASSERT_EQUAL
(
îr
, 
KAA_ERR_NONE
);

224 
îr
 = 
	`kØ_ªmove_nŸifiˇti⁄_li°íî
(
c⁄ãxt
->
nŸifiˇti⁄_m™agî
, &
id
);

225 
	`ASSERT_NOT_EQUAL
(
îr
, 
KAA_ERR_NONE
);

227 
îr
 = 
	`kØ_ªmove_nŸifiˇti⁄_li°íî
(
c⁄ãxt
->
nŸifiˇti⁄_m™agî
, &
id2
);

228 
	`ASSERT_EQUAL
(
îr
, 
KAA_ERR_NONE
);

230 
îr
 = 
	`kØ_add_›ti⁄Æ_nŸifiˇti⁄_li°íî
(
c⁄ãxt
->
nŸifiˇti⁄_m™agî
, &
li°íî
, &
t›ic_id
, &
id
);

231 
	`ASSERT_EQUAL
(
îr
, 
KAA_ERR_NONE
);

233 
îr
 = 
	`kØ_add_›ti⁄Æ_nŸifiˇti⁄_li°íî
(
c⁄ãxt
->
nŸifiˇti⁄_m™agî
, &
li°íî
, &
t›ic_id
, &
id
);

234 
	`ASSERT_NOT_EQUAL
(
îr
, 
KAA_ERR_NONE
);

236 
îr
 = 
	`kØ_add_›ti⁄Æ_nŸifiˇti⁄_li°íî
(
c⁄ãxt
->
nŸifiˇti⁄_m™agî
, &
li°íî_2
, &
t›ic_id
, &
id2
);

237 
	`ASSERT_EQUAL
(
îr
, 
KAA_ERR_NONE
);

239 *(
uöt32_t
 *)
poöãr_to_sqn
 = 
	`KAA_HTONL
((uint32_t) 100);

240 
îr
 = 
	`kØ_∂©f‹m_¥Ÿocﬁ_¥o˚ss_£rvî_sync
(
c⁄ãxt
->
∂©f‹m_¥Ÿocﬁ
, 
buf„r_poöãr
, 
size
);

241 
	`ASSERT_EQUAL
(
îr
, 
KAA_ERR_NONE
);

243 
	`ASSERT_EQUAL
(
li°íî_has_bìn_nŸifõd
, 
åue
);

245 
îr
 = 
	`kØ_ªmove_›ti⁄Æ_nŸifiˇti⁄_li°íî
(
c⁄ãxt
->
nŸifiˇti⁄_m™agî
, &
t›ic_id
, &
id
);

246 
	`ASSERT_EQUAL
(
îr
, 
KAA_ERR_NONE
);

248 
îr
 = 
	`kØ_ªmove_›ti⁄Æ_nŸifiˇti⁄_li°íî
(
c⁄ãxt
->
nŸifiˇti⁄_m™agî
, &
t›ic_id
, &
id
);

249 
	`ASSERT_NOT_EQUAL
(
îr
, 
KAA_ERR_NONE
);

251 
îr
 = 
	`kØ_ªmove_›ti⁄Æ_nŸifiˇti⁄_li°íî
(
c⁄ãxt
->
nŸifiˇti⁄_m™agî
, &
t›ic_id
, &
id2
);

252 
	`ASSERT_EQUAL
(
îr
, 
KAA_ERR_NONE
);

253 
	}
}

255 
	$ã°_t›ic_li°_li°íîs_addög_™d_ªmovög
(**
°©e
)

257 ()
°©e
;

259 
îr
 = 
	`kØ_gë_t›ics
(
c⁄ãxt
->
nŸifiˇti⁄_m™agî
, &
t›ics
);

260 
	`ASSERT_EQUAL
(
îr
, 
KAA_ERR_NONE
);

262 
îr
 = 
	`kØ_add_t›ic_li°_li°íî
(
c⁄ãxt
->
nŸifiˇti⁄_m™agî
, &
t›ic_li°íî
, &
id
);

263 
	`ASSERT_EQUAL
(
îr
, 
KAA_ERR_NONE
);

265 
îr
 = 
	`kØ_add_t›ic_li°_li°íî
(
c⁄ãxt
->
nŸifiˇti⁄_m™agî
, &
t›ic_li°íî
, &
id
);

266 
	`ASSERT_NOT_EQUAL
(
îr
, 
KAA_ERR_NONE
);

268 
îr
 = 
	`kØ_add_t›ic_li°_li°íî
(
c⁄ãxt
->
nŸifiˇti⁄_m™agî
, &
t›ic_li°íî_2
, &
id2
);

269 
	`ASSERT_EQUAL
(
îr
, 
KAA_ERR_NONE
);

271 
îr
 = 
	`kØ_ªmove_t›ic_li°_li°íî
(
c⁄ãxt
->
nŸifiˇti⁄_m™agî
, &
id
);

272 
	`ASSERT_EQUAL
(
îr
, 
KAA_ERR_NONE
);

274 
îr
 = 
	`kØ_ªmove_t›ic_li°_li°íî
(
c⁄ãxt
->
nŸifiˇti⁄_m™agî
, &
id
);

275 
	`ASSERT_NOT_EQUAL
(
îr
, 
KAA_ERR_NONE
);

277 
îr
 = 
	`kØ_ªmove_t›ic_li°_li°íî
(
c⁄ãxt
->
nŸifiˇti⁄_m™agî
, &
id2
);

278 
	`ASSERT_EQUAL
(
îr
, 
KAA_ERR_NONE
);

279 
	}
}

281 
	$ã°_ªåõvög_t›ic_li°
(**
°©e
)

283 ()
°©e
;

285 
îr
 = 
	`kØ_gë_t›ics
(
c⁄ãxt
->
nŸifiˇti⁄_m™agî
, &
t›ics
);

286 
	`ASSERT_EQUAL
(
îr
, 
KAA_ERR_NONE
);

288 
size_t
 
t›ics_size
 = 
	`kØ_li°_gë_size
(
t›ics
);

289 
	`ASSERT_EQUAL
(
t›ics_size
, 1);

290 
	}
}

292 
	$ã°_£rülizög
(**
°©e
)

294 ()
°©e
;

296 
kØ_exãnsi⁄_id
 
£rvi˚
[] = { 
KAA_EXTENSION_NOTIFICATION
 };

298 
îr
 = 
	`kØ_∂©f‹m_¥Ÿocﬁ_Æloc_£rülize_˛õ¡_sync
(
c⁄ãxt
->
∂©f‹m_¥Ÿocﬁ
, 
£rvi˚
, 1,

299 &
buf„r
, &
buf„r_size
);

300 
	`ASSERT_EQUAL
(
îr
, 
KAA_ERR_NONE
);

302 
	`KAA_FREE
(
buf„r
);

303 
	}
}

305 
	$ã°_subs¸ùti⁄s
(**
°©e
)

307 ()
°©e
;

309 
îr
 = 
	`kØ_subs¸ibe_to_t›ic
(
c⁄ãxt
->
nŸifiˇti⁄_m™agî
, &
t›ic_id
, 
Ál£
);

310 
	`ASSERT_EQUAL
(
îr
, 
KAA_ERR_NONE
);

312 
îr
 = 
	`kØ_unsubs¸ibe_‰om_t›ic
(
c⁄ãxt
->
nŸifiˇti⁄_m™agî
, &
t›ic_id
, 
Ál£
);

313 
	`ASSERT_EQUAL
(
îr
, 
KAA_ERR_NONE
);

315 
uöt64_t
 
Áke_ids
[2] = { 22, 11 };

316 
îr
 = 
	`kØ_subs¸ibe_to_t›ics
(
c⁄ãxt
->
nŸifiˇti⁄_m™agî
, 
Áke_ids
, 2, 
Ál£
);

317 
	`ASSERT_NOT_EQUAL
(
îr
, 
KAA_ERR_NONE
);

319 
îr
 = 
	`kØ_unsubs¸ibe_‰om_t›ics
(
c⁄ãxt
->
nŸifiˇti⁄_m™agî
, 
Áke_ids
, 2, 
Ál£
);

320 
	`ASSERT_NOT_EQUAL
(
îr
, 
KAA_ERR_NONE
);

322 
uöt64_t
 
exi°ög_ids
[1] = { 22 };

323 
îr
 = 
	`kØ_subs¸ibe_to_t›ics
(
c⁄ãxt
->
nŸifiˇti⁄_m™agî
, 
exi°ög_ids
, 1, 
Ál£
);

324 
	`ASSERT_EQUAL
(
îr
, 
KAA_ERR_NONE
);

326 
îr
 = 
	`kØ_unsubs¸ibe_‰om_t›ics
(
c⁄ãxt
->
nŸifiˇti⁄_m™agî
, 
exi°ög_ids
, 1, 
Ál£
);

327 
	`ASSERT_EQUAL
(
îr
, 
KAA_ERR_NONE
);

328 
	}
}

330 
KAA_SUITE_MAIN
(
NŸifiˇti⁄
, 
ã°_öô
, 
ã°_deöô
,

331 
	$KAA_TEST_CASE
(
de£rülizög
, 
ã°_de£rülizög
)

332 
	$KAA_TEST_CASE
(
ªmovög_™d_addög_nŸifiˇti⁄s_li°íîs
, 
ã°_nŸifiˇti⁄_li°íîs_addög_™d_ªmovög
)

333 
	$KAA_TEST_CASE
(
ªmovög_™d_addög_t›ic_li°_li°íîs
, 
ã°_t›ic_li°_li°íîs_addög_™d_ªmovög
)

334 
	$KAA_TEST_CASE
(
t›ic_li°_ªåõvög
, 
ã°_ªåõvög_t›ic_li°
)

335 
	$KAA_TEST_CASE
(
£rülizög
, 
ã°_£rülizög
)

336 
	`KAA_TEST_CASE
(
subs¸ùti⁄s
, 
ã°_subs¸ùti⁄s
))

	@/var/www/html/debian/gateway/kaa/src/extensions/profile/kaa_profile.c

17 
	~<kØ_¥ofûe.h
>

18 
	~"kØ_¥ofûe_¥iv©e.h
"

20 
	~"kØ_¥iv©e.h
"

22 
	~<°rög.h
>

23 
	~<°dboﬁ.h
>

24 
	~<öây≥s.h
>

25 
	~<sys/ty≥s.h
>

26 
	~"∂©f‹m/sock.h
"

27 
	~"avro_§c/avro/io.h
"

28 
	~"∂©f‹m/ext_sha.h
"

29 
	~"∂©f‹m/ext_key_utûs.h
"

30 
	~"kØ_°©us.h
"

31 
	~"utûôõs/kØ_mem.h
"

32 
	~"utûôõs/kØ_log.h
"

33 
	~"kØ_deÁu…s.h
"

34 
	~"kØ_ch™√l_m™agî.h
"

35 
	~"kØ_∂©f‹m_comm⁄.h
"

36 
	~"kØ_∂©f‹m_utûs.h
"

40 
	#KAA_PROFILE_RESYNC_OPTION
 0x1

	)

42 
kØ_exãnsi⁄_id
 
	g¥ofûe_sync_£rvi˚s
[] = { 
KAA_EXTENSION_PROFILE
 };

45 
size_t
 
	m∑ylﬂd_size
;

46 
kØ_byãs_t
 
	mpublic_key
;

47 
kØ_byãs_t
 
	mac˚ss_tokí
;

48 } 
	tkØ_¥ofûe_exãnsi⁄_d©a_t
;

50 
	skØ_¥ofûe_m™agî_t
 {

51 
boﬁ
 
	m√ed_ªsync
;

52 
kØ_byãs_t
 
	m¥ofûe_body
;

53 
kØ_dige°
 
	m¥ofûe_hash
;

54 
kØ_ch™√l_m™agî_t
 *
	mch™√l_m™agî
;

55 
kØ_°©us_t
 *
	m°©us
;

56 
kØ_loggî_t
 *
	mloggî
;

57 
kØ_¥ofûe_exãnsi⁄_d©a_t
 *
	mexãnsi⁄_d©a
;

60 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_¥ofûe_öô
(
kØ_c⁄ãxt_t
 *
kØ_c⁄ãxt
, **
c⁄ãxt
)

62 
kØ_îr‹_t
 
ªsu…
 = 
	`kØ_¥ofûe_m™agî_¸óã
(&
kØ_c⁄ãxt
->
¥ofûe_m™agî
,

63 
kØ_c⁄ãxt
->
°©us
->
°©us_ö°™˚
,

64 
kØ_c⁄ãxt
->
ch™√l_m™agî
, kØ_c⁄ãxt->
loggî
);

65 *
c⁄ãxt
 = 
kØ_c⁄ãxt
->
¥ofûe_m™agî
;

66  
ªsu…
;

67 
	}
}

69 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_¥ofûe_deöô
(*
c⁄ãxt
)

71 
	`kØ_¥ofûe_m™agî_de°roy
(
c⁄ãxt
);

72  
KAA_ERR_NONE
;

73 
	}
}

75 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_¥ofûe_ªque°_gë_size
(*
c⁄ãxt
,

76 
size_t
 *
ex≥˘ed_size
)

78  
	`kØ_¥ofûe_ªque°_gë_size
(
c⁄ãxt
, 
ex≥˘ed_size
);

79 
	}
}

81 
boﬁ
 
	$ªsync_is_ªquúed
(
kØ_¥ofûe_m™agî_t
 *
£lf
)

83  
£lf
->
√ed_ªsync
 || sñf->
°©us
->
¥ofûe_√eds_ªsync
;

84 
	}
}

86 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_¥ofûe_ªque°_£rülize
(*
c⁄ãxt
, 
uöt32_t
 
ªque°_id
,

87 
uöt8_t
 *
buf„r
, 
size_t
 *
size
, 
boﬁ
 *
√ed_ªsync
)

89 ()
ªque°_id
;

92 i‡(!
c⁄ãxt
 || !
size
 || !
√ed_ªsync
) {

93  
KAA_ERR_BADPARAM
;

96 *
√ed_ªsync
 = 
	`ªsync_is_ªquúed
(
c⁄ãxt
);

97 i‡(!*
√ed_ªsync
) {

98 *
size
 = 0;

99  
KAA_ERR_NONE
;

102 
size_t
 
size_√eded
;

103 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_¥ofûe_ªque°_gë_size
(
c⁄ãxt
, &
size_√eded
);

104 i‡(
îr‹
) {

105  
îr‹
;

108 i‡(!
buf„r
 || *
size
 < 
size_√eded
) {

109 *
size
 = 
size_√eded
;

110  
KAA_ERR_BUFFER_IS_NOT_ENOUGH
;

113 *
size
 = 
size_√eded
;

115 
kØ_∂©f‹m_mesßge_wrôî_t
 
wrôî
 = 
	`KAA_MESSAGE_WRITER
(
buf„r
, *
size
);

116 
îr‹
 = 
	`kØ_¥ofûe_ªque°_£rülize
(
c⁄ãxt
, &
wrôî
);

117 i‡(
îr‹
) {

118  
îr‹
;

121 *
size
 = 
wrôî
.
cuºít
 - 
buf„r
;

122  
KAA_ERR_NONE
;

123 
	}
}

125 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_¥ofûe_£rvî_sync
(*
c⁄ãxt
, 
uöt32_t
 
ªque°_id
,

126 
uöt16_t
 
exãnsi⁄_›ti⁄s
, c⁄° 
uöt8_t
 *
buf„r
, 
size_t
 
size
)

128 ()
ªque°_id
;

131 i‡(!
c⁄ãxt
 || !
buf„r
) {

132  
KAA_ERR_BADPARAM
;

135 
kØ_∂©f‹m_mesßge_ªadî_t
 
ªadî
 = 
	`KAA_MESSAGE_READER
(
buf„r
, 
size
);

136  
	`kØ_¥ofûe_h™dÀ_£rvî_sync
(
c⁄ãxt
, &
ªadî
, 
exãnsi⁄_›ti⁄s
, 
size
);

137 
	}
}

143 
kØ_îr‹_t
 
	$kØ_¥ofûe_m™agî_¸óã
(
kØ_¥ofûe_m™agî_t
 **
¥ofûe_m™agî_p
, 
kØ_°©us_t
 *
°©us


144 , 
kØ_ch™√l_m™agî_t
 *
ch™√l_m™agî
, 
kØ_loggî_t
 *
loggî
)

146 i‡(!
¥ofûe_m™agî_p
 || !
ch™√l_m™agî
 || !
°©us
) {

147  
KAA_ERR_BADPARAM
;

150 
kØ_¥ofûe_m™agî_t
 *
¥ofûe_m™agî
 = 
	`KAA_MALLOC
((kaa_profile_manager_t));

151 i‡(!
¥ofûe_m™agî
) {

152  
KAA_ERR_NOMEM
;

158 
¥ofûe_m™agî
->
exãnsi⁄_d©a
 = 
	`KAA_CALLOC
(1, (
kØ_¥ofûe_exãnsi⁄_d©a_t
));

159 i‡(!
¥ofûe_m™agî
->
exãnsi⁄_d©a
) {

160 
	`KAA_FREE
(
¥ofûe_m™agî
);

161  
KAA_ERR_NOMEM
;

164 
¥ofûe_m™agî
->
√ed_ªsync
 = 
åue
;

166 
¥ofûe_m™agî
->
¥ofûe_body
.
size
 = 0;

167 
¥ofûe_m™agî
->
¥ofûe_body
.
buf„r
 = 
NULL
;

168 
¥ofûe_m™agî
->
ch™√l_m™agî
 = channel_manager;

169 
¥ofûe_m™agî
->
°©us
 = status;

170 
¥ofûe_m™agî
->
loggî
 =Üogger;

172 
	`ext_ˇlcuœã_sha_hash
(
NULL
, 0, 
¥ofûe_m™agî
->
¥ofûe_hash
);

173 
	`ext_c›y_sha_hash
(
¥ofûe_m™agî
->
°©us
->
¥ofûe_hash
,Örofile_manager->profile_hash);

175 *
¥ofûe_m™agî_p
 = 
¥ofûe_m™agî
;

176  
KAA_ERR_NONE
;

177 
	}
}

179 
kØ_îr‹_t
 
	$kØ_¥ofûe_f‹˚_sync
(
kØ_¥ofûe_m™agî_t
 *
£lf
)

181 i‡(!
£lf
)

182  
KAA_ERR_BADPARAM
;

184 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√l
 =

185 
	`kØ_ch™√l_m™agî_gë_å™•‹t_ch™√l
(

186 
£lf
->
ch™√l_m™agî
, 
KAA_EXTENSION_PROFILE
);

187 i‡(!
ch™√l
) {

188  
KAA_ERR_NOT_FOUND
;

191 
ch™√l
->
	`sync_h™dÀr
(ch™√l->
c⁄ãxt
, 
¥ofûe_sync_£rvi˚s
, 1);

192  
KAA_ERR_NONE
;

193 
	}
}

195 
boﬁ
 
	$kØ_¥ofûe_m™agî_is_¥ofûe_£t
(
kØ_¥ofûe_m™agî_t
 *
£lf
)

197 #i‡
KAA_PROFILE_SCHEMA_VERSION
 > 0

198  
£lf
->
¥ofûe_body
.
buf„r
 !
NULL
 && sñf->¥ofûe_body.
size
 != 0;

200  
åue
;

202 
	}
}

207 
	$kØ_¥ofûe_m™agî_de°roy
(
kØ_¥ofûe_m™agî_t
 *
£lf
)

209 i‡(
£lf
) {

210 i‡(
£lf
->
¥ofûe_body
.
buf„r
 && sñf->¥ofûe_body.
size
 > 0) {

211 
	`KAA_FREE
(
£lf
->
¥ofûe_body
.
buf„r
);

213 i‡(
£lf
->
exãnsi⁄_d©a
) {

214 i‡(
£lf
->
exãnsi⁄_d©a
->
public_key
.
buf„r
 && sñf->exãnsi⁄_d©a->public_key.
de°roy
) {

215 
£lf
->
exãnsi⁄_d©a
->
public_key
.
	`de°roy
(£lf->exãnsi⁄_d©a->public_key.
buf„r
);

217 
	`KAA_FREE
(
£lf
->
exãnsi⁄_d©a
);

219 
	`KAA_FREE
(
£lf
);

221 
	}
}

225 
kØ_îr‹_t
 
	$kØ_¥ofûe_√ed_¥ofûe_ªsync
(
kØ_¥ofûe_m™agî_t
 *
£lf
, 
boﬁ
 *
ªsu…
)

227 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
ªsu…
, 
KAA_ERR_BADPARAM
);

228 *
ªsu…
 = 
	`ªsync_is_ªquúed
(
£lf
);

229  
KAA_ERR_NONE
;

230 
	}
}

232 
kØ_îr‹_t
 
	$kØ_¥ofûe_ªque°_gë_size
(
kØ_¥ofûe_m™agî_t
 *
£lf
, 
size_t
 *
ex≥˘ed_size
)

235 i‡(!
£lf
 || !
ex≥˘ed_size
) {

236  
KAA_ERR_BADPARAM
;

239 i‡(!
	`ªsync_is_ªquúed
(
£lf
)) {

240 *
ex≥˘ed_size
 = 0;

241  
KAA_ERR_NONE
;

244 *
ex≥˘ed_size
 = 
KAA_EXTENSION_HEADER_SIZE
;

245 *
ex≥˘ed_size
 +(
uöt32_t
);

246 #i‡
KAA_PROFILE_SCHEMA_VERSION
 > 0

247 i‡(
	`ªsync_is_ªquúed
(
£lf
))

248 *
ex≥˘ed_size
 +
	`kØ_Æig√d_size_gë
(
£lf
->
¥ofûe_body
.
size
);

251 i‡(!
£lf
->
°©us
->
is_ªgi°îed
) {

252 i‡(!
£lf
->
exãnsi⁄_d©a
->
public_key
.
buf„r
) {

253 
	`ext_gë_ídpoöt_public_key
((c⁄° 
uöt8_t
 **)&
£lf
->
exãnsi⁄_d©a
->
public_key
.
buf„r
,

254 (
size_t
 *)&
£lf
->
exãnsi⁄_d©a
->
public_key
.
size
);

257 i‡(
£lf
->
exãnsi⁄_d©a
->
public_key
.
buf„r
 && sñf->exãnsi⁄_d©a->public_key.
size
 > 0) {

258 *
ex≥˘ed_size
 +(
uöt32_t
);

259 *
ex≥˘ed_size
 +
	`kØ_Æig√d_size_gë
(
£lf
->
exãnsi⁄_d©a
->
public_key
.
size
);

262  
KAA_ERR_BADDATA
;

266 
£lf
->
exãnsi⁄_d©a
->
ac˚ss_tokí
.
buf„r
 = (
uöt8_t
 *Ë£lf->
°©us
->
ídpoöt_ac˚ss_tokí
;

267 i‡(
£lf
->
exãnsi⁄_d©a
->
ac˚ss_tokí
.
buf„r
) {

268 
£lf
->
exãnsi⁄_d©a
->
ac˚ss_tokí
.
size
 = 
	`°æí
((c⁄° *)£lf->exãnsi⁄_d©a->ac˚ss_tokí.
buf„r
);

269 *
ex≥˘ed_size
 +(
uöt32_t
);

270 *
ex≥˘ed_size
 +
	`kØ_Æig√d_size_gë
(
£lf
->
exãnsi⁄_d©a
->
ac˚ss_tokí
.
size
);

272 
£lf
->
exãnsi⁄_d©a
->
∑ylﬂd_size
 = *
ex≥˘ed_size
 - 
KAA_EXTENSION_HEADER_SIZE
;

274  
KAA_ERR_NONE
;

275 
	}
}

277 
kØ_îr‹_t
 
	$kØ_¥ofûe_ªque°_£rülize
(
kØ_¥ofûe_m™agî_t
 *
£lf
, 
kØ_∂©f‹m_mesßge_wrôî_t
 *
wrôî
)

279 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
wrôî
, 
KAA_ERR_BADPARAM
);

281 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "GoingÅo compileÖrofile client sync");

283 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe_exãnsi⁄_hódî
(
wrôî


284 , 
KAA_EXTENSION_PROFILE


286 , 
£lf
->
exãnsi⁄_d©a
->
∑ylﬂd_size
);

287 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

289 
uöt32_t
 
√tw‹k_‹dî_32
 = 
	`KAA_HTONL
(0);

290 #i‡
KAA_PROFILE_SCHEMA_VERSION
 > 0

291 i‡(
	`ªsync_is_ªquúed
(
£lf
)) {

292 
√tw‹k_‹dî_32
 = 
	`KAA_HTONL
(
£lf
->
¥ofûe_body
.
size
);

293 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
wrôî
, &
√tw‹k_‹dî_32
, (
uöt32_t
));

294 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

295 i‡(
£lf
->
¥ofûe_body
.
size
) {

296 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "WrôögÖrofûêbody (sizê%u)...", sñf->
¥ofûe_body
.
size
);

297 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe_Æig√d
(
wrôî
, 
£lf
->
¥ofûe_body
.
buf„r
, sñf->¥ofûe_body.
size
);

298 i‡(
îr‹_code
) {

299 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹_code
, "FailedÅo writeÖrofile body");

300  
îr‹_code
;

304 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
wrôî
, &
√tw‹k_‹dî_32
, (
uöt32_t
));

305 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

308 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
wrôî
, &
√tw‹k_‹dî_32
, (
uöt32_t
));

309 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

312 
uöt16_t
 
√tw‹k_‹dî_16
 = 0;

313 
uöt16_t
 
fõld_numbî_wôh_ª£rved
 = 0;

315 i‡(!
£lf
->
°©us
->
is_ªgi°îed
) {

316 
fõld_numbî_wôh_ª£rved
 = 
	`KAA_HTONS
(
PUB_KEY_VALUE
 << 8);

317 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
wrôî


318 , &
fõld_numbî_wôh_ª£rved


319 , (
uöt16_t
));

320 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

322 
√tw‹k_‹dî_16
 = 
	`KAA_HTONS
(
£lf
->
exãnsi⁄_d©a
->
public_key
.
size
);

323 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
wrôî
, &
√tw‹k_‹dî_16
, (
uöt16_t
));

324 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

326 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "WrôögÖubli¯key (sizê%u)...", sñf->
exãnsi⁄_d©a
->
public_key
.
size
);

327 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe_Æig√d
(
wrôî


328 , (*)
£lf
->
exãnsi⁄_d©a
->
public_key
.
buf„r


329 , 
£lf
->
exãnsi⁄_d©a
->
public_key
.
size
);

330 i‡(
îr‹_code
) {

331 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹_code
, "FailedÅo writeÖublic key");

332  
îr‹_code
;

336 i‡(
£lf
->
exãnsi⁄_d©a
->
ac˚ss_tokí
.
buf„r
) {

337 
fõld_numbî_wôh_ª£rved
 = 
	`KAA_HTONS
(
ACCESS_TOKEN_VALUE
 << 8);

338 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
wrôî


339 , &
fõld_numbî_wôh_ª£rved


340 , (
uöt16_t
));

341 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

343 
√tw‹k_‹dî_16
 = 
	`KAA_HTONS
(
£lf
->
exãnsi⁄_d©a
->
ac˚ss_tokí
.
size
);

344 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
wrôî
, &
√tw‹k_‹dî_16
, (
uöt16_t
));

345 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

347 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Wrôögác˚s†tokí (sizê%u)...", sñf->
exãnsi⁄_d©a
->
ac˚ss_tokí
.
size
);

348 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe_Æig√d
(
wrôî


349 , (*)
£lf
->
exãnsi⁄_d©a
->
ac˚ss_tokí
.
buf„r


350 , 
£lf
->
exãnsi⁄_d©a
->
ac˚ss_tokí
.
size
);

351 i‡(
îr‹_code
) {

352 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹_code
, "FailedÅo writeáccessÅoken");

353  
îr‹_code
;

357  
îr‹_code
;

358 
	}
}

362 
kØ_îr‹_t
 
	$kØ_¥ofûe_h™dÀ_£rvî_sync
(
kØ_¥ofûe_m™agî_t
 *
£lf


363 , 
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî


364 , 
uöt16_t
 
exãnsi⁄_›ti⁄s


365 , 
size_t
 
exãnsi⁄_Àngth
)

368 ()
exãnsi⁄_›ti⁄s
;

369 ()
exãnsi⁄_Àngth
;

370 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
ªadî
, 
KAA_ERR_BADPARAM
);

372 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Re˚ivedÖrofûê£rvî sync: o±i⁄†%u,Öaylﬂd sizê%zu", 
exãnsi⁄_›ti⁄s
, 
exãnsi⁄_Àngth
);

374 
kØ_îr‹_t
 
îr‹_code
 = 
KAA_ERR_NONE
;

376 
£lf
->
√ed_ªsync
 = 
Ál£
;

377 i‡(
exãnsi⁄_›ti⁄s
 & 
KAA_PROFILE_RESYNC_OPTION
) {

378 
£lf
->
√ed_ªsync
 = 
åue
;

379 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "GoingÅoÑesyncÖrofile...");

382 ()
	`kØ_¥ofûe_f‹˚_sync
(
£lf
);

386 i‡(!
£lf
->
°©us
->
is_ªgi°îed
) {

387 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Endpoint has beenÑegistered");

388 
£lf
->
°©us
->
is_ªgi°îed
 = 
åue
;

391  
îr‹_code
;

392 
	}
}

394 
kØ_îr‹_t
 
	$kØ_¥ofûe_m™agî_upd©e_¥ofûe
(
kØ_¥ofûe_m™agî_t
 *
£lf
, 
kØ_¥ofûe_t
 *
¥ofûe_body
)

396 #i‡
KAA_PROFILE_SCHEMA_VERSION
 > 0

397 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
¥ofûe_body
, 
KAA_ERR_BADPARAM
);

399 
size_t
 
£rülized_¥ofûe_size
 = 
¥ofûe_body
->
	`gë_size
(profile_body);

400 i‡(!
£rülized_¥ofûe_size
) {

401 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
KAA_ERR_BADDATA
,

403  
KAA_ERR_BADDATA
;

406 *
£rülized_¥ofûe
 = (*Ë
	`KAA_MALLOC
(
£rülized_¥ofûe_size
 * ());

407 
	`KAA_RETURN_IF_NIL
(
£rülized_¥ofûe
, 
KAA_ERR_NOMEM
);

409 
avro_wrôî_t
 
wrôî
 = 
	`avro_wrôî_mem‹y
(
£rülized_¥ofûe
, 
£rülized_¥ofûe_size
);

410 i‡(!
wrôî
) {

411 
	`KAA_FREE
(
£rülized_¥ofûe
);

412  
KAA_ERR_NOMEM
;

414 
¥ofûe_body
->
	`£rülize
(
wrôî
,Örofile_body);

415 
	`avro_wrôî_‰ì
(
wrôî
);

417 
kØ_dige°
 
√w_hash
;

418 
	`ext_ˇlcuœã_sha_hash
(
£rülized_¥ofûe
, 
£rülized_¥ofûe_size
, 
√w_hash
);

420 i‡(!
	`memcmp
(
√w_hash
, 
£lf
->
°©us
->
¥ofûe_hash
, 
SHA_1_DIGEST_LENGTH
)) {

421 
£lf
->
√ed_ªsync
 = 
Ál£
;

422 
	`KAA_FREE
(
£rülized_¥ofûe
);

423  
KAA_ERR_NONE
;

426 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "EndpointÖrofile is updated");

428 i‡(
	`ext_c›y_sha_hash
(
£lf
->
°©us
->
¥ofûe_hash
, 
√w_hash
)) {

429 
	`KAA_FREE
(
£rülized_¥ofûe
);

430  
KAA_ERR_BAD_STATE
;

433 i‡(
£lf
->
¥ofûe_body
.
size
 > 0) {

434 
	`KAA_FREE
(
£lf
->
¥ofûe_body
.
buf„r
);

435 
£lf
->
¥ofûe_body
.
buf„r
 = 
NULL
;

438 
£lf
->
¥ofûe_body
.
buf„r
 = (
uöt8_t
*)
£rülized_¥ofûe
;

439 
£lf
->
¥ofûe_body
.
size
 = 
£rülized_¥ofûe_size
;

441 
£lf
->
√ed_ªsync
 = 
åue
;

444 ()
	`kØ_¥ofûe_f‹˚_sync
(
£lf
);

446  
KAA_ERR_NONE
;

447 
	}
}

449 
kØ_îr‹_t
 
	$kØ_¥ofûe_m™agî_£t_ídpoöt_ac˚ss_tokí
(
kØ_¥ofûe_m™agî_t
 *
£lf
, c⁄° *
tokí
)

451 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
tokí
, 
KAA_ERR_BADPARAM
);

453 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_°©us_£t_ídpoöt_ac˚ss_tokí
(
£lf
->
°©us
, 
tokí
);

454 i‡(
îr‹
 =
KAA_ERR_NONE
) {

455 
£lf
->
√ed_ªsync
 = 
åue
;

457 ()
	`kØ_¥ofûe_f‹˚_sync
(
£lf
);

460  
îr‹
;

461 
	}
}

463 
kØ_îr‹_t
 
	$kØ_¥ofûe_m™agî_gë_ídpoöt_id
(
kØ_¥ofûe_m™agî_t
 *
£lf
, 
kØ_ídpoöt_id_p
 
ªsu…_id
)

465 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
ªsu…_id
, 
KAA_ERR_BADPARAM
);

466  
	`ext_c›y_sha_hash
((
kØ_dige°_p
Ë
ªsu…_id
, 
£lf
->
°©us
->
ídpoöt_public_key_hash
);

467 
	}
}

	@/var/www/html/debian/gateway/kaa/src/extensions/profile/kaa_profile.h

24 #i‚de‡
KAA_PROFILE_H_


25 
	#KAA_PROFILE_H_


	)

27 #ifde‡
__˝lu•lus


31 
	~<°dboﬁ.h
>

32 
	~"kØ_îr‹.h
"

33 
	~"kØ_comm⁄.h
"

34 
	~"gí/kØ_¥ofûe_deföôi⁄s.h
"

38 #i‚de‡
KAA_PROFILE_MANAGER_T


39 
	#KAA_PROFILE_MANAGER_T


	)

43 
kØ_¥ofûe_m™agî_t
 
	tkØ_¥ofûe_m™agî_t
;

59 
kØ_îr‹_t
 
kØ_¥ofûe_m™agî_upd©e_¥ofûe
(
kØ_¥ofûe_m™agî_t
 *
£lf
, 
kØ_¥ofûe_t
 *
¥ofûe
);

71 
kØ_îr‹_t
 
kØ_¥ofûe_m™agî_£t_ídpoöt_ac˚ss_tokí
(
kØ_¥ofûe_m™agî_t
 *
£lf
, c⁄° *
tokí
);

83 
kØ_îr‹_t
 
kØ_¥ofûe_m™agî_gë_ídpoöt_id
(
kØ_¥ofûe_m™agî_t
 *
£lf
, 
kØ_ídpoöt_id_p
 
ªsu…_id
);

85 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/extensions/profile/kaa_profile_private.h

16 #i‚de‡
KAA_PROFILE_PRIVATE_H


17 
	#KAA_PROFILE_PRIVATE_H


	)

19 
	~<kØ_¥ofûe.h
>

20 
	~<kØ_°©us.h
>

21 
	~<kØ_ch™√l_m™agî.h
>

22 
	~<utûôõs/kØ_log.h
>

23 
	~<kØ_∂©f‹m_utûs.h
>

25 
kØ_îr‹_t
 
kØ_¥ofûe_m™agî_¸óã
(
kØ_¥ofûe_m™agî_t
 **
¥ofûe_m™agî_p
, 
kØ_°©us_t
 *
°©us
,

26 
kØ_ch™√l_m™agî_t
 *
ch™√l_m™agî
, 
kØ_loggî_t
 *
loggî
);

27 
kØ_¥ofûe_m™agî_de°roy
(
kØ_¥ofûe_m™agî_t
 *
£lf
);

28 
boﬁ
 
kØ_¥ofûe_m™agî_is_¥ofûe_£t
(
kØ_¥ofûe_m™agî_t
 *
£lf
);

30 
kØ_îr‹_t
 
kØ_¥ofûe_√ed_¥ofûe_ªsync
(
kØ_¥ofûe_m™agî_t
 *
kØ_c⁄ãxt
, 
boﬁ
 *
ªsu…
);

32 
kØ_îr‹_t
 
kØ_¥ofûe_f‹˚_sync
(
kØ_¥ofûe_m™agî_t
 *
£lf
);

33 
kØ_îr‹_t
 
kØ_¥ofûe_ªque°_gë_size
(
kØ_¥ofûe_m™agî_t
 *
£lf
, 
size_t
 *
ex≥˘ed_size
);

34 
kØ_îr‹_t
 
kØ_¥ofûe_ªque°_£rülize
(
kØ_¥ofûe_m™agî_t
 *
£lf
,

35 
kØ_∂©f‹m_mesßge_wrôî_t
* 
wrôî
);

36 
kØ_îr‹_t
 
kØ_¥ofûe_h™dÀ_£rvî_sync
(
kØ_¥ofûe_m™agî_t
 *
£lf
, 
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî
, 
uöt16_t
 
exãnsi⁄_›ti⁄s
, 
size_t
 
exãnsi⁄_Àngth
);

	@/var/www/html/debian/gateway/kaa/src/extensions/profile/test/test_kaa_profile.c

17 
	~<°rög.h
>

18 
	~<°dboﬁ.h
>

19 
	~<°döt.h
>

20 
	~<°dio.h
>

22 
	~"kØ_¥ofûe.h
"

23 
	~"kØ_¥ofûe_¥iv©e.h
"

25 
	~"kØ_°©us.h
"

26 
	~"kØ_ã°.h
"

28 
	~"kØ_c⁄ãxt.h
"

29 
	~"kØ_°©us.h
"

30 
	~"utûôõs/kØ_mem.h
"

31 
	~"utûôõs/kØ_log.h
"

32 
	~"kØ_c⁄ãxt.h
"

33 
	~"kØ_deÁu…s.h
"

34 
	~"gí/kØ_¥ofûe_gí.h
"

35 
	~"kØ_∂©f‹m_utûs.h
"

36 
	~"∂©f‹m/ext_°©us.h
"

37 
	~"∂©f‹m/ext_sha.h
"

38 
	~"∂©f‹m/ext_key_utûs.h
"

39 
	~"∂©f‹m/sock.h
"

40 
	~"∂©f‹m/ext_å™•‹t_ch™√l.h
"

41 
	~"kØ_ch™√l_m™agî.h
"

43 
	~"kØ_¥iv©e.h
"

45 
kØ_c⁄ãxt_t
 
	gkØ_c⁄ãxt
;

46 
kØ_loggî_t
 *
	gloggî
 = 
NULL
;

47 
kØ_°©us_t
 *
	g°©us
 = 
NULL
;

48 
kØ_ch™√l_m™agî_t
 *
	gch™√l_m™agî
 = 
NULL
;

49 
kØ_¥ofûe_m™agî_t
 *
	g¥ofûe_m™agî
 = 
NULL
;

52 
	#TEST_PUB_KEY_SIZE
 20

	)

53 c⁄° 
uöt8_t
 
	gã°_ï_key
[
TEST_PUB_KEY_SIZE
] = {0x1, 0x2, 0x3, 0x4, 0x5, 0x6, 0x7, 0x8, 0x9, 0xA, 0xB, 0xC, 0xD, 0xE, 0xF, 0x10, 0x11, 0x12, 0x13, 0x14};

57 
	$kØ_ªad_°©us_ext
(**
buf„r
, 
size_t
 *
buf„r_size
, 
boﬁ
 *
√eds_dóŒoˇti⁄
)

59 ()
buf„r
;

60 ()
buf„r_size
;

61 ()
√eds_dóŒoˇti⁄
;

62 
	}
}

64 
	$kØ_°‹e_°©us_ext
(c⁄° *
buf„r
, 
size_t
 
buf„r_size
)

66 ()
buf„r
;

67 ()
buf„r_size
;

68 
	}
}

70 
	$kØ_gë_ídpoöt_public_key
(**
buf„r
, 
size_t
 *
buf„r_size
, 
boﬁ
 *
√eds_dóŒoˇti⁄
)

72 *
buf„r
 = (*Ë
	`KAA_MALLOC
(
TEST_PUB_KEY_SIZE
 * ());

73 i‡(*
buf„r
) {

74 
	`mem˝y
(*
buf„r
, 
ã°_ï_key
, 
TEST_PUB_KEY_SIZE
);

75 *
buf„r_size
 = 
TEST_PUB_KEY_SIZE
;

76 *
√eds_dóŒoˇti⁄
 = 
åue
;

78 *
buf„r_size
 = 0;

79 *
√eds_dóŒoˇti⁄
 = 
Ál£
;

81 
	}
}

88 
	gmock_sync_h™dÀr_ˇŒed
;

90 
kØ_îr‹_t
 
	$öô_ch™√l
(*
˘x
, 
kØ_å™•‹t_c⁄ãxt_t
 *
t˘x
)

92 ()
˘x
;

93 ()
t˘x
;

94  
KAA_ERR_NONE
;

95 
	}
}

96 
kØ_îr‹_t
 
	$£t_ac˚ss_poöt
(*
˘x
, 
kØ_ac˚ss_poöt_t
 *
≠
)

98 ()
˘x
;

99 ()
≠
;

100  
KAA_ERR_NONE
;

101 
	}
}

102 
kØ_îr‹_t
 
	$gë_¥Ÿocﬁ_id
(*
˘x
, 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 *
id
)

104 ()
˘x
;

105 
id
->id = 0;

106 
id
->
vîsi⁄
 = 0;

107  
KAA_ERR_NONE
;

108 
	}
}

109 
kØ_îr‹_t
 
	$gë_£rvi˚s
(*
˘x
,

110 c⁄° 
kØ_exãnsi⁄_id
 **
suµ‹ãd_li°
,

111 
size_t
 *
cou¡
)

113 ()
˘x
;

115 c⁄° 
kØ_exãnsi⁄_id
 
£rvi˚s
[] = { 
KAA_EXTENSION_PROFILE
 };

116 *
suµ‹ãd_li°
 = 
£rvi˚s
;

117 *
cou¡
 = 1;

118  
KAA_ERR_NONE
;

119 
	}
}

121 
kØ_îr‹_t
 
	$sync_h™dÀr
(*
˘x
,

122 c⁄° 
kØ_exãnsi⁄_id
 
£rvi˚s
[],

123 
size_t
 
cou¡
)

125 ()
˘x
;

127 
	`ASSERT_EQUAL
(1, 
cou¡
);

128 
	`ASSERT_EQUAL
(
KAA_EXTENSION_PROFILE
, 
£rvi˚s
[0]);

130 
mock_sync_h™dÀr_ˇŒed
 = 1;

132  
KAA_ERR_NONE
;

133 
	}
}

135 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 
	gch™√l
 = {

136 .
c⁄ãxt
 = 
NULL
,

137 .
	gde°roy
 = 
NULL
,

138 .
	gsync_h™dÀr
 = 
sync_h™dÀr
,

139 .
	göô
 = 
öô_ch™√l
,

140 .
	g£t_ac˚ss_poöt
 = 
£t_ac˚ss_poöt
,

141 .
	ggë_¥Ÿocﬁ_id
 = 
gë_¥Ÿocﬁ_id
,

142 .
	ggë_suµ‹ãd_£rvi˚s
 = 
gë_£rvi˚s
,

147 
	$ã°_¥ofûe_is_£t
(**
°©e
)

149 ()
°©e
;

151 #i‡
KAA_PROFILE_SCHEMA_VERSION
 > 0

152 
	`ASSERT_FALSE
(
	`kØ_¥ofûe_m™agî_is_¥ofûe_£t
(
¥ofûe_m™agî
));

153 
kØ_¥ofûe_t
 *
¥ofûe
 = 
	`kØ_¥ofûe_basic_ídpoöt_¥ofûe_ã°_¸óã
();

154 
¥ofûe
->
¥ofûe_body
 = 
	`kØ_°rög_c›y_¸óã
("test");

155 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_¥ofûe_m™agî_upd©e_¥ofûe
(
¥ofûe_m™agî
, 
¥ofûe
);

156 
¥ofûe
->
	`de°roy
(profile);

157 
	`ASSERT_EQUAL
(
îr‹
, 
KAA_ERR_NONE
);

158 
	`ASSERT_TRUE
(
	`kØ_¥ofûe_m™agî_is_¥ofûe_£t
(
¥ofûe_m™agî
));

160 
	`ASSERT_TRUE
(
	`kØ_¥ofûe_m™agî_is_¥ofûe_£t
(
¥ofûe_m™agî
));

162 
	}
}

164 
	$ã°_¥ofûe_upd©e
(**
°©e
)

166 ()
°©e
;

168 
kØ_¥ofûe_t
 *
¥ofûe1
 = 
	`kØ_¥ofûe_basic_ídpoöt_¥ofûe_ã°_¸óã
();

169 
¥ofûe1
->
¥ofûe_body
 = 
	`kØ_°rög_c›y_¸óã
("dummy");

170 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_¥ofûe_m™agî_upd©e_¥ofûe
(
¥ofûe_m™agî
, 
¥ofûe1
);

171 
	`ASSERT_EQUAL
(
îr‹
, 
KAA_ERR_NONE
);

173 
boﬁ
 
√ed_ªsync
 = 
Ál£
;

174 
îr‹
 = 
	`kØ_¥ofûe_√ed_¥ofûe_ªsync
(
¥ofûe_m™agî
, &
√ed_ªsync
);

175 
	`ASSERT_EQUAL
(
îr‹
, 
KAA_ERR_NONE
);

176 
	`ASSERT_TRUE
(
√ed_ªsync
);

178 
îr‹
 = 
	`kØ_¥ofûe_m™agî_upd©e_¥ofûe
(
¥ofûe_m™agî
, 
¥ofûe1
);

179 
	`ASSERT_EQUAL
(
îr‹
, 
KAA_ERR_NONE
);

181 
îr‹
 = 
	`kØ_¥ofûe_√ed_¥ofûe_ªsync
(
¥ofûe_m™agî
, &
√ed_ªsync
);

182 
	`ASSERT_EQUAL
(
îr‹
, 
KAA_ERR_NONE
);

183 
	`ASSERT_FALSE
(
√ed_ªsync
);

185 
¥ofûe1
->
	`de°roy
(profile1);

187 
kØ_¥ofûe_t
 *
¥ofûe2
 = 
	`kØ_¥ofûe_basic_ídpoöt_¥ofûe_ã°_¸óã
();

188 
¥ofûe2
->
¥ofûe_body
 = 
	`kØ_°rög_c›y_¸óã
("new_dummy");

189 
îr‹
 = 
	`kØ_¥ofûe_m™agî_upd©e_¥ofûe
(
¥ofûe_m™agî
, 
¥ofûe2
);

190 
	`ASSERT_EQUAL
(
îr‹
, 
KAA_ERR_NONE
);

192 
îr‹
 = 
	`kØ_¥ofûe_√ed_¥ofûe_ªsync
(
¥ofûe_m™agî
, &
√ed_ªsync
);

193 
	`ASSERT_EQUAL
(
îr‹
, 
KAA_ERR_NONE
);

194 
	`ASSERT_TRUE
(
√ed_ªsync
);

196 
¥ofûe2
->
	`de°roy
(profile2);

197 
	}
}

199 
	$ã°_¥ofûe_sync_gë_size
(**
°©e
)

201 ()
°©e
;

203 
kØ_¥ofûe_t
 *
¥ofûe
 = 
	`kØ_¥ofûe_basic_ídpoöt_¥ofûe_ã°_¸óã
();

204 
¥ofûe
->
¥ofûe_body
 = 
	`kØ_°rög_c›y_¸óã
("dummy");

206 
size_t
 
£rülized_¥ofûe_size
 = 
¥ofûe
->
	`gë_size
(profile);

207 *
£rülized_¥ofûe
 = (*Ë
	`KAA_MALLOC
(
£rülized_¥ofûe_size
 * ());

208 
avro_wrôî_t
 
wrôî
 = 
	`avro_wrôî_mem‹y
(
£rülized_¥ofûe
, 
£rülized_¥ofûe_size
);

209 
¥ofûe
->
	`£rülize
(
wrôî
,Örofile);

211 
size_t
 
ex≥˘ed_size
 = 
KAA_EXTENSION_HEADER_SIZE


212 + (
uöt32_t
)

213 + 
	`kØ_Æig√d_size_gë
(
£rülized_¥ofûe_size
);

215 
size_t
 
¥ofûe_sync_size
 = 0;

217 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_¥ofûe_m™agî_upd©e_¥ofûe
(
¥ofûe_m™agî
, 
¥ofûe
);

218 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

220 
°©us
->
is_ªgi°îed
 = 
åue
;

222 
îr‹_code
 = 
	`kØ_¥ofûe_ªque°_gë_size
(
¥ofûe_m™agî
, &
¥ofûe_sync_size
);

223 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

224 
	`ASSERT_EQUAL
(
ex≥˘ed_size
, 
¥ofûe_sync_size
);

226 
°©us
->
is_ªgi°îed
 = 
Ál£
;

228 
ex≥˘ed_size
 +(
uöt32_t
)

229 + 
TEST_PUB_KEY_SIZE
;

231 
îr‹_code
 = 
	`kØ_¥ofûe_ªque°_gë_size
(
¥ofûe_m™agî
, &
¥ofûe_sync_size
);

232 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

233 
	`ASSERT_EQUAL
(
ex≥˘ed_size
, 
¥ofûe_sync_size
);

235 c⁄° *
ac˚ss_tokí
 = "accessÅoken";

236 
îr‹_code
 = 
	`kØ_¥ofûe_m™agî_£t_ídpoöt_ac˚ss_tokí
(
¥ofûe_m™agî
, 
ac˚ss_tokí
);

237 
	`as£π_öt_equÆ
(
KAA_ERR_NONE
, 
îr‹_code
);

239 
ex≥˘ed_size
 +(
uöt32_t
)

240 + 
	`°æí
(
ac˚ss_tokí
);

242 
îr‹_code
 = 
	`kØ_¥ofûe_ªque°_gë_size
(
¥ofûe_m™agî
, &
¥ofûe_sync_size
);

243 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

244 
	`ASSERT_EQUAL
(
ex≥˘ed_size
, 
¥ofûe_sync_size
);

246 
	`avro_wrôî_‰ì
(
wrôî
);

247 
	`KAA_FREE
(
£rülized_¥ofûe
);

248 
¥ofûe
->
	`de°roy
(profile);

249 
	}
}

251 
	$ã°_¥ofûe_sync_£rülize
(**
°©e
)

253 ()
°©e
;

255 
kØ_îr‹_t
 
îr‹_code
;

256 
kØ_∂©f‹m_mesßge_wrôî_t
 *
m™uÆ_wrôî
;

257 
kØ_∂©f‹m_mesßge_wrôî_t
 *
auto_wrôî
;

259 c⁄° *
ac˚ss_tokí
 = "accessÅoken";

260 c⁄° 
size_t
 
ac˚ss_tokí_size
 = 
	`°æí
(
ac˚ss_tokí
);

261 
kØ_¥ofûe_t
 *
¥ofûe
 = 
	`kØ_¥ofûe_basic_ídpoöt_¥ofûe_ã°_¸óã
();

262 
¥ofûe
->
¥ofûe_body
 = 
	`kØ_°rög_c›y_¸óã
("dummy");

263 
size_t
 
£rülized_¥ofûe_size
 = 
¥ofûe
->
	`gë_size
(profile);

264 *
£rülized_¥ofûe
 = (*Ë
	`KAA_MALLOC
(
£rülized_¥ofûe_size
 * ());

265 
avro_wrôî_t
 
avro_wrôî
 = 
	`avro_wrôî_mem‹y
(
£rülized_¥ofûe
, 
£rülized_¥ofûe_size
);

267 
¥ofûe
->
	`£rülize
(
avro_wrôî
,Örofile);

269 
îr‹_code
 = 
	`kØ_¥ofûe_m™agî_upd©e_¥ofûe
(
¥ofûe_m™agî
, 
¥ofûe
);

270 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

271 
°©us
->
is_ªgi°îed
 = 
Ál£
;

272 
îr‹_code
 = 
	`kØ_¥ofûe_m™agî_£t_ídpoöt_ac˚ss_tokí
(
¥ofûe_m™agî
, 
ac˚ss_tokí
);

273 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

275 
size_t
 
¥ofûe_sync_size
;

276 
îr‹_code
 = 
	`kØ_¥ofûe_ªque°_gë_size
(
¥ofûe_m™agî
, &
¥ofûe_sync_size
);

277 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

279 
uöt8_t
 
buf„r
[
¥ofûe_sync_size
];

280 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôî_¸óã
(&
m™uÆ_wrôî
, 
buf„r
, 
¥ofûe_sync_size
);

281 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

283 
uöt32_t
 
√tw‹k_‹dî_32
;

285 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe_exãnsi⁄_hódî
(
m™uÆ_wrôî


286 , 
KAA_EXTENSION_PROFILE


288 , 
¥ofûe_sync_size
 - 
KAA_EXTENSION_HEADER_SIZE
);

289 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

291 
boﬁ
 
√ed_ªsync
 = 
åue
;

292 
	`ASSERT_EQUAL
(
	`kØ_¥ofûe_√ed_¥ofûe_ªsync
(
¥ofûe_m™agî
, &
√ed_ªsync
), 
KAA_ERR_NONE
);

294 
√tw‹k_‹dî_32
 = 
	`KAA_HTONL
(0);

295 i‡(
√ed_ªsync
)

296 
√tw‹k_‹dî_32
 = 
	`KAA_HTONL
(
£rülized_¥ofûe_size
);

297 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
m™uÆ_wrôî
, &
√tw‹k_‹dî_32
, (
uöt32_t
));

298 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

300 i‡(
√ed_ªsync
) {

301 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe_Æig√d
(
m™uÆ_wrôî
, 
£rülized_¥ofûe
, 
£rülized_¥ofûe_size
);

302 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

305 
uöt16_t
 
√tw‹k_‹dî_16
 = 
	`KAA_HTONS
(
PUB_KEY_VALUE
 << 8);

306 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
m™uÆ_wrôî
, &
√tw‹k_‹dî_16
, (network_order_16));

307 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

309 
√tw‹k_‹dî_16
 = 
	`KAA_HTONS
(
TEST_PUB_KEY_SIZE
);

310 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
m™uÆ_wrôî
, &
√tw‹k_‹dî_16
, (network_order_16));

311 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

313 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe_Æig√d
(
m™uÆ_wrôî
, 
ã°_ï_key
, 
TEST_PUB_KEY_SIZE
);

314 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

316 
√tw‹k_‹dî_16
 = 
	`KAA_HTONS
(
ACCESS_TOKEN_VALUE
 << 8);

317 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
m™uÆ_wrôî
, &
√tw‹k_‹dî_16
, (network_order_16));

318 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

320 
√tw‹k_‹dî_16
 = 
	`KAA_HTONS
(
ac˚ss_tokí_size
);

321 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
m™uÆ_wrôî
, &
√tw‹k_‹dî_16
, (network_order_16));

322 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

324 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe_Æig√d
(
m™uÆ_wrôî
, 
ac˚ss_tokí
, 
ac˚ss_tokí_size
);

325 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

327 
uöt8_t
 
buf„r2
[
¥ofûe_sync_size
];

328 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôî_¸óã
(&
auto_wrôî
, 
buf„r2
, 
¥ofûe_sync_size
);

329 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

331 
îr‹_code
 = 
	`kØ_¥ofûe_ªque°_£rülize
(
¥ofûe_m™agî
, 
auto_wrôî
);

332 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

334 
îr‹_code
 = (
	`memcmp
(
buf„r
, 
buf„r2
, 
¥ofûe_sync_size
Ë=0 ? 
KAA_ERR_NONE
 : 
KAA_ERR_BADDATA
);

335 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

337 
	`KAA_FREE
(
£rülized_¥ofûe
);

338 
	`avro_wrôî_‰ì
(
avro_wrôî
);

339 
¥ofûe
->
	`de°roy
(profile);

340 
	`kØ_∂©f‹m_mesßge_wrôî_de°roy
(
auto_wrôî
);

341 
	`kØ_∂©f‹m_mesßge_wrôî_de°roy
(
m™uÆ_wrôî
);

342 
	}
}

344 
	$ã°_¥ofûe_h™dÀ_sync
(**
°©e
)

346 ()
°©e
;

348 
boﬁ
 
√ed_ªsync
 = 
Ál£
;

349 
uöt16_t
 
exãnsi⁄_›ti⁄s
 = 0x1;

351 c⁄° 
size_t
 
buf„r_size
 = 6;

352 
uöt8_t
 
buf„r
[
buf„r_size
];

353 
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî
;

354 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªadî_¸óã
(&
ªadî
, 
buf„r
, 
buf„r_size
);

355 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

357 
îr‹_code
 = 
	`kØ_¥ofûe_h™dÀ_£rvî_sync
(
¥ofûe_m™agî
, 
ªadî
, 
exãnsi⁄_›ti⁄s
, 0);

358 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

359 
îr‹_code
 = 
	`kØ_¥ofûe_√ed_¥ofûe_ªsync
(
¥ofûe_m™agî
, &
√ed_ªsync
);

360 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

361 
	`ASSERT_TRUE
(
√ed_ªsync
);

363 
exãnsi⁄_›ti⁄s
 = 0x0;

364 
îr‹_code
 = 
	`kØ_¥ofûe_h™dÀ_£rvî_sync
(
¥ofûe_m™agî
, 
ªadî
, 
exãnsi⁄_›ti⁄s
, 0);

365 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

366 
îr‹_code
 = 
	`kØ_¥ofûe_√ed_¥ofûe_ªsync
(
¥ofûe_m™agî
, &
√ed_ªsync
);

367 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

368 
	`ASSERT_FALSE
(
√ed_ªsync
);

370 
	`kØ_∂©f‹m_mesßge_ªadî_de°roy
(
ªadî
);

371 
	}
}

373 
	$ã°_¥ofûe_f‹˚_sync
(**
°©e
)

375 ()
°©e
;

376 
kØ_îr‹_t
 
rc
 = 
	`kØ_¥ofûe_f‹˚_sync
(
¥ofûe_m™agî
);

377 
	`ASSERT_EQUAL
(
KAA_ERR_NONE
, 
rc
);

379 
	`ASSERT_TRUE
(
mock_sync_h™dÀr_ˇŒed
);

380 
	}
}

382 
	$ã°_öô
(**
°©e
)

384 ()
°©e
;

386 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_log_¸óã
(&
loggî
,

387 
KAA_MAX_LOG_MESSAGE_LENGTH
,

388 
KAA_MAX_LOG_LEVEL
,

389 
NULL
);

390 i‡(
îr‹
 || !
loggî
) {

391  
îr‹
;

394 
kØ_c⁄ãxt
.
loggî
 =Üogger;

396 
îr‹
 = 
	`kØ_°©us_¸óã
(&
°©us
);

397 i‡(
îr‹
 || !
°©us
) {

398  
îr‹
;

401 
îr‹
 = 
	`kØ_ch™√l_m™agî_¸óã
(&
ch™√l_m™agî
, &
kØ_c⁄ãxt
);

402 i‡(
îr‹
 || !
ch™√l_m™agî
) {

403  
îr‹
;

407 
	`kØ_ch™√l_m™agî_add_å™•‹t_ch™√l
(
ch™√l_m™agî
, &
ch™√l
, 
NULL
);

409 
îr‹
 = 
	`kØ_¥ofûe_m™agî_¸óã
(&
¥ofûe_m™agî
,

410 
°©us
, 
ch™√l_m™agî
, 
loggî
);

411 i‡(
îr‹
 || !
¥ofûe_m™agî
) {

412  
îr‹
;

416 
	}
}

418 
	$ã°_deöô
(**
°©e
)

420 ()
°©e
;

422 
	`kØ_¥ofûe_m™agî_de°roy
(
¥ofûe_m™agî
);

423 
	`kØ_ch™√l_m™agî_de°roy
(
ch™√l_m™agî
);

424 
	`kØ_°©us_de°roy
(
°©us
);

425 
	`kØ_log_de°roy
(
loggî
);

427 
	}
}

429 
	$maö
()

431 c⁄° 
CMUnôTe°
 
ã°s
[] = {

432 
	`cmocka_unô_ã°_£tup_ã¨down
(
ã°_¥ofûe_is_£t
, 
ã°_öô
, 
ã°_deöô
),

433 
	`cmocka_unô_ã°_£tup_ã¨down
(
ã°_¥ofûe_upd©e
, 
ã°_öô
, 
ã°_deöô
),

434 
	`cmocka_unô_ã°_£tup_ã¨down
(
ã°_¥ofûe_sync_gë_size
, 
ã°_öô
, 
ã°_deöô
),

435 
	`cmocka_unô_ã°_£tup_ã¨down
(
ã°_¥ofûe_sync_£rülize
, 
ã°_öô
, 
ã°_deöô
),

436 
	`cmocka_unô_ã°_£tup_ã¨down
(
ã°_¥ofûe_h™dÀ_sync
, 
ã°_öô
, 
ã°_deöô
),

437 
	`cmocka_unô_ã°_£tup_ã¨down
(
ã°_¥ofûe_f‹˚_sync
, 
ã°_öô
, 
ã°_deöô
),

439  
	`cmocka_run_group_ã°s
(
ã°s
, 
NULL
, NULL);

440 
	}
}

	@/var/www/html/debian/gateway/kaa/src/extensions/user/kaa_user.c

17 
	~"kØ_¥iv©e.h
"

19 
	~"kØ_u£r.h
"

20 
	~"kØ_u£r_¥iv©e.h
"

22 
	~<°döt.h
>

23 
	~<°rög.h
>

24 
	~"∂©f‹m/°dio.h
"

25 
	~"∂©f‹m/sock.h
"

26 
	~"kØ_deÁu…s.h
"

27 
	~"∂©f‹m/ext_sha.h
"

28 
	~"kØ_°©us.h
"

29 
	~"kØ_ch™√l_m™agî.h
"

30 
	~"kØ_∂©f‹m_comm⁄.h
"

31 
	~"kØ_∂©f‹m_utûs.h
"

32 
	~"utûôõs/kØ_mem.h
"

33 
	~"utûôõs/kØ_log.h
"

34 
	~"cﬁÀ˘i⁄s/kØ_li°.h
"

35 
	~"kØ_comm⁄.h
"

39 
	#KAA_USER_RECEIVE_UPDATES_FLAG
 0x01

	)

41 
	#EXTERNAL_SYSTEM_AUTH_FIELD
 0x00

	)

42 
	#EXTERNAL_SYSTEM_ENDPOINT_ATTACH_FIELD
 0x01

	)

43 
	#EXTERNAL_SYSTEM_ENDPOINT_DETACH_FIELD
 0x02

	)

45 
	#USER_SYNC_ENDPOINT_ID_OPTION
 0x01

	)

49 *
	mu£r_exã∫Æ_id
;

50 
size_t
 
	mu£r_exã∫Æ_id_Àn
;

51 *
	mu£r_ac˚ss_tokí
;

52 
size_t
 
	mu£r_ac˚ss_tokí_Àn
;

53 *
	mu£r_vîifõr_tokí
;

54 
size_t
 
	mu£r_vîifõr_tokí_Àn
;

55 } 
	tu£r_öfo_t
;

58 
uöt16_t
 
	mªque°_id
;

59 *
	mac˚ss_tokí
;

60 
size_t
 
	mac˚ss_tokí_Àngth
;

61 
kØ_ídpoöt_id
 
	mídpoöt_tokí
;

62 
boﬁ
 
	mis_waôög_ª•⁄£
;

63 
kØ_ídpoöt_°©us_li°íî_t
 *
	mli°íî
;

64 } 
	tkØ_ídpoöt_öfo_t
;

66 
	skØ_u£r_m™agî_t
 {

67 
kØ_©èchmít_°©us_li°íîs_t
 
	m©èchmít_li°íîs
;

68 
u£r_öfo_t
 *
	mu£r_öfo
;

69 
boﬁ
 
	mis_waôög_u£r_©èch_ª•⁄£
;

70 
kØ_li°_t
 *
	m©èch_ídpoöts
;

71 
kØ_li°_t
 *
	mdëach_ídpoöts
;

72 
uöt16_t
 
	mídpoöt_ªque°_cou¡î
;

73 
kØ_°©us_t
 *
	m°©us
;

74 
kØ_ch™√l_m™agî_t
 *
	mch™√l_m™agî
;

75 
kØ_loggî_t
 *
	mloggî
;

79 
	mUSER_RESULT_SUCCESS
 = 0x00,

80 
	mUSER_RESULT_FAILURE
 = 0x01

81 } 
	tu£r_sync_ªsu…_t
;

84 
	mUSER_ATTACH_RESPONSE_FIELD
 = 0,

85 
	mUSER_ATTACH_NOTIFICATION_FIELD
 = 1,

86 
	mUSER_DETACH_NOTIFICATION_FIELD
 = 2,

87 
	mENDPOINT_ATTACH_RESPONSES_FIELD
 = 3,

88 
	mENDPOINT_DETACH_RESPONSES_FIELD
 = 4

89 } 
	tu£r_£rvî_sync_fõld_t
;

93 
kØ_exãnsi⁄_id
 
	gu£r_sync_£rvi˚s
[1] = {
KAA_EXTENSION_USER
};

95 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_u£r_öô
(
kØ_c⁄ãxt_t
 *
kØ_c⁄ãxt
, **
c⁄ãxt
)

97 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_u£r_m™agî_¸óã
(&
kØ_c⁄ãxt
->
u£r_m™agî
, kØ_c⁄ãxt->
°©us
->
°©us_ö°™˚
,

98 
kØ_c⁄ãxt
->
ch™√l_m™agî
, kØ_c⁄ãxt->
loggî
);

99 *
c⁄ãxt
 = 
kØ_c⁄ãxt
->
u£r_m™agî
;

100  
îr‹
;

101 
	}
}

103 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_u£r_deöô
(*
c⁄ãxt
)

105 
	`kØ_u£r_m™agî_de°roy
(
c⁄ãxt
);

106  
KAA_ERR_NONE
;

107 
	}
}

109 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_u£r_ªque°_gë_size
(*
c⁄ãxt
, 
size_t
 *
ex≥˘ed_size
)

111  
	`kØ_u£r_ªque°_gë_size
(
c⁄ãxt
, 
ex≥˘ed_size
);

112 
	}
}

114 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_u£r_ªque°_£rülize
(*
c⁄ãxt
, 
uöt32_t
 
ªque°_id
,

115 
uöt8_t
 *
buf„r
, 
size_t
 *
size
, 
boﬁ
 *
√ed_ªsync
)

117 ()
ªque°_id
;

120 i‡(!
c⁄ãxt
 || !
size
 || !
√ed_ªsync
) {

121  
KAA_ERR_BADPARAM
;

124 *
√ed_ªsync
 = 
åue
;

126 
size_t
 
size_√eded
;

127 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_u£r_ªque°_gë_size
(
c⁄ãxt
, &
size_√eded
);

128 i‡(
îr‹
) {

129  
îr‹
;

132 i‡(!
buf„r
 || *
size
 < 
size_√eded
) {

133 *
size
 = 
size_√eded
;

134  
KAA_ERR_BUFFER_IS_NOT_ENOUGH
;

137 *
size
 = 
size_√eded
;

139 
kØ_∂©f‹m_mesßge_wrôî_t
 
wrôî
 = 
	`KAA_MESSAGE_WRITER
(
buf„r
, *
size
);

140 
îr‹
 = 
	`kØ_u£r_ªque°_£rülize
(
c⁄ãxt
, &
wrôî
);

141 i‡(
îr‹
) {

142  
îr‹
;

145 *
size
 = 
wrôî
.
cuºít
 - 
buf„r
;

146  
KAA_ERR_NONE
;

147 
	}
}

149 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_u£r_£rvî_sync
(*
c⁄ãxt
, 
uöt32_t
 
ªque°_id
,

150 
uöt16_t
 
exãnsi⁄_›ti⁄s
, c⁄° 
uöt8_t
 *
buf„r
, 
size_t
 
size
)

152 ()
ªque°_id
;

155 i‡(!
c⁄ãxt
 || !
buf„r
) {

156  
KAA_ERR_BADPARAM
;

159 
kØ_∂©f‹m_mesßge_ªadî_t
 
ªadî
 = 
	`KAA_MESSAGE_READER
(
buf„r
, 
size
);

160  
	`kØ_u£r_h™dÀ_£rvî_sync
(
c⁄ãxt
, &
ªadî
, 
exãnsi⁄_›ti⁄s
, 
size
);

161 
	}
}

163 
	$dt‹_ídpoöt_öfo
(*
d©a
)

165 
	`KAA_RETURN_IF_NIL
(
d©a
, );

166 
kØ_ídpoöt_öfo_t
 *
ídpoöt_öfo
 = (kØ_ídpoöt_öfo_t*)
d©a
;

167 if(
ídpoöt_öfo
->
ac˚ss_tokí
)

168 
	`KAA_FREE
(
ídpoöt_öfo
->
ac˚ss_tokí
);

169 
	`KAA_FREE
(
ídpoöt_öfo
);

170 
	}
}

172 
boﬁ
 
	$m©ch_¥ediˇã_ídpoöt_öfo
(*
d©a
, *
c⁄ãxt
)

174 
	`KAA_RETURN_IF_NIL2
(
d©a
, 
c⁄ãxt
, 
Ál£
);

176 
kØ_ídpoöt_öfo_t
 *
ídpoöt_ôem
 = (kØ_ídpoöt_öfo_t*)
d©a
;

177 
uöt16_t
 
ªque°_id
 = *(uöt16_t*)
c⁄ãxt
;

179  
ªque°_id
 =
ídpoöt_ôem
->request_id;

180 
	}
}

182 
	$de°roy_u£r_öfo
(
u£r_öfo_t
 *
u£r_öfo
)

184 
	`KAA_RETURN_IF_NIL
(
u£r_öfo
, );

186 i‡(
u£r_öfo
->
u£r_exã∫Æ_id
)

187 
	`KAA_FREE
(
u£r_öfo
->
u£r_exã∫Æ_id
);

188 i‡(
u£r_öfo
->
u£r_ac˚ss_tokí
)

189 
	`KAA_FREE
(
u£r_öfo
->
u£r_ac˚ss_tokí
);

190 i‡(
u£r_öfo
->
u£r_vîifõr_tokí
)

191 
	`KAA_FREE
(
u£r_öfo
->
u£r_vîifõr_tokí
);

193 
	`KAA_FREE
(
u£r_öfo
);

194 
	}
}

196 
u£r_öfo_t
 *
	$¸óã_u£r_öfo
(c⁄° *
exã∫Æ_id
, c⁄° *
u£r_ac˚ss_tokí
, c⁄° *
u£r_vîifõr_tokí
)

198 
	`KAA_RETURN_IF_NIL3
(
exã∫Æ_id
, 
u£r_ac˚ss_tokí
, 
u£r_vîifõr_tokí
, 
NULL
);

200 
u£r_öfo_t
 *
u£r_öfo
 = (u£r_öfo_à*Ë
	`KAA_CALLOC
(1, (user_info_t));

201 
	`KAA_RETURN_IF_NIL
(
u£r_öfo
, 
NULL
);

203 
u£r_öfo
->
u£r_exã∫Æ_id_Àn
 = 
	`°æí
(
exã∫Æ_id
);

204 
u£r_öfo
->
u£r_ac˚ss_tokí_Àn
 = 
	`°æí
(
u£r_ac˚ss_tokí
);

205 
u£r_öfo
->
u£r_vîifõr_tokí_Àn
 = 
	`°æí
(
u£r_vîifõr_tokí
);

207 
u£r_öfo
->
u£r_exã∫Æ_id
 = (*Ë
	`KAA_MALLOC
((u£r_öfo->
u£r_exã∫Æ_id_Àn
 + 1) * ());

208 i‡(!
u£r_öfo
->
u£r_exã∫Æ_id
) {

209 
	`de°roy_u£r_öfo
(
u£r_öfo
);

210  
NULL
;

212 
	`°r˝y
(
u£r_öfo
->
u£r_exã∫Æ_id
, 
exã∫Æ_id
);

214 
u£r_öfo
->
u£r_ac˚ss_tokí
 = (*Ë
	`KAA_MALLOC
((u£r_öfo->
u£r_ac˚ss_tokí_Àn
 + 1) * ());

215 i‡(!
u£r_öfo
->
u£r_ac˚ss_tokí
) {

216 
	`de°roy_u£r_öfo
(
u£r_öfo
);

217  
NULL
;

219 
	`°r˝y
(
u£r_öfo
->
u£r_ac˚ss_tokí
, user_access_token);

221 
u£r_öfo
->
u£r_vîifõr_tokí
 = (*Ë
	`KAA_MALLOC
((u£r_öfo->
u£r_vîifõr_tokí_Àn
 + 1) * ());

222 i‡(!
u£r_öfo
->
u£r_vîifõr_tokí
) {

223 
	`de°roy_u£r_öfo
(
u£r_öfo
);

224  
NULL
;

226 
	`°r˝y
(
u£r_öfo
->
u£r_vîifõr_tokí
, user_verifier_token);

228  
u£r_öfo
;

229 
	}
}

232 
kØ_îr‹_t
 
	$kØ_u£r_m™agî_¸óã
(
kØ_u£r_m™agî_t
 **
u£r_m™agî_p


233 , 
kØ_°©us_t
 *
°©us


234 , 
kØ_ch™√l_m™agî_t
 *
ch™√l_m™agî


235 , 
kØ_loggî_t
 *
loggî
)

237 
	`KAA_RETURN_IF_NIL2
(
u£r_m™agî_p
, 
°©us
, 
KAA_ERR_BADPARAM
);

239 *
u£r_m™agî_p
 = (
kØ_u£r_m™agî_t
 *Ë
	`KAA_MALLOC
((kaa_user_manager_t));

240 
	`KAA_RETURN_IF_NIL
((*
u£r_m™agî_p
), 
KAA_ERR_NOMEM
);

242 (*
u£r_m™agî_p
)->
©èchmít_li°íîs
.
⁄_©èched
 = 
NULL
;

243 (*
u£r_m™agî_p
)->
©èchmít_li°íîs
.
⁄_dëached
 = 
NULL
;

244 (*
u£r_m™agî_p
)->
©èchmít_li°íîs
.
⁄_©èch_suc˚ss
 = 
NULL
;

245 (*
u£r_m™agî_p
)->
©èchmít_li°íîs
.
⁄_©èch_Áûed
 = 
NULL
;

246 (*
u£r_m™agî_p
)->
u£r_öfo
 = 
NULL
;

247 (*
u£r_m™agî_p
)->
is_waôög_u£r_©èch_ª•⁄£
 = 
Ál£
;

248 (*
u£r_m™agî_p
)->
©èch_ídpoöts
 = 
	`kØ_li°_¸óã
();

249 (*
u£r_m™agî_p
)->
dëach_ídpoöts
 = 
	`kØ_li°_¸óã
();

250 (*
u£r_m™agî_p
)->
ídpoöt_ªque°_cou¡î
 = 0;

251 (*
u£r_m™agî_p
)->
°©us
 = status;

252 (*
u£r_m™agî_p
)->
ch™√l_m™agî
 = channel_manager;

253 (*
u£r_m™agî_p
)->
loggî
 =Üogger;

255  
KAA_ERR_NONE
;

256 
	}
}

259 
	$kØ_u£r_m™agî_de°roy
(
kØ_u£r_m™agî_t
 *
£lf
)

261 i‡(
£lf
) {

262 
	`kØ_li°_de°roy
(
£lf
->
©èch_ídpoöts
, 
dt‹_ídpoöt_öfo
);

263 
	`kØ_li°_de°roy
(
£lf
->
dëach_ídpoöts
, 
dt‹_ídpoöt_öfo
);

264 
	`de°roy_u£r_öfo
(
£lf
->
u£r_öfo
);

265 
	`KAA_FREE
(
£lf
);

267 
	}
}

269 
boﬁ
 
	$kØ_u£r_m™agî_is_©èched_to_u£r
(
kØ_u£r_m™agî_t
 *
£lf
)

271 
	`KAA_RETURN_IF_NIL2
(
£lf
, sñf->
°©us
, 
Ál£
);

272  
£lf
->
°©us
->
is_©èched
;

273 
	}
}

275 
kØ_îr‹_t
 
	$kØ_u£r_m™agî_©èch_to_u£r
(
kØ_u£r_m™agî_t
 *
£lf


276 , c⁄° *
u£r_exã∫Æ_id


277 , c⁄° *
ac˚ss_tokí


278 , c⁄° *
u£r_vîifõr_tokí
)

280 
	`KAA_RETURN_IF_NIL3
(
£lf
, 
u£r_exã∫Æ_id
, 
ac˚ss_tokí
, 
KAA_ERR_BADPARAM
);

282 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "GoingÅoáttachÅo user "

284 , 
u£r_exã∫Æ_id
, 
ac˚ss_tokí
, 
u£r_vîifõr_tokí
);

286 i‡(
£lf
->
is_waôög_u£r_©èch_ª•⁄£
) {

287 
	`de°roy_u£r_öfo
(
£lf
->
u£r_öfo
);

288 
£lf
->
u£r_öfo
 = 
NULL
;

289 
£lf
->
is_waôög_u£r_©èch_ª•⁄£
 = 
Ál£
;

292 
£lf
->
u£r_öfo
 = 
	`¸óã_u£r_öfo
(
u£r_exã∫Æ_id
, 
ac˚ss_tokí
, 
u£r_vîifõr_tokí
);

293 i‡(!
£lf
->
u£r_öfo
)

294  
KAA_ERR_NOMEM
;

296 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√l
 =

297 
	`kØ_ch™√l_m™agî_gë_å™•‹t_ch™√l
(
£lf
->
ch™√l_m™agî
, 
u£r_sync_£rvi˚s
[0]);

298 i‡(
ch™√l
)

299 
ch™√l
->
	`sync_h™dÀr
(ch™√l->
c⁄ãxt
, 
u£r_sync_£rvi˚s
, 1);

301  
KAA_ERR_NONE
;

302 
	}
}

304 
kØ_îr‹_t
 
	$kØ_u£r_m™agî_©èch_ídpoöt
(
kØ_u£r_m™agî_t
 *
£lf
, c⁄° *
ídpoöt_ac˚ss_tokí
, 
kØ_ídpoöt_°©us_li°íî_t
 *
li°íî
)

306 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
ídpoöt_ac˚ss_tokí
, 
KAA_ERR_BADPARAM
);

308 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "GoingÅoáttachÉndpoint byáccessÅoken "

310 , 
ídpoöt_ac˚ss_tokí
);

312 
kØ_ídpoöt_öfo_t
 *
öfo
 = 
	`KAA_CALLOC
(1, (kaa_endpoint_info_t));

313 
	`KAA_RETURN_IF_NIL
(
öfo
, 
KAA_ERR_NOMEM
);

316 
öfo
->
ac˚ss_tokí_Àngth
 = 
	`°æí
(
ídpoöt_ac˚ss_tokí
);

317 
öfo
->
ac˚ss_tokí
 = 
	`KAA_MALLOC
(öfo->
ac˚ss_tokí_Àngth
);

319 i‡(!
öfo
->
ac˚ss_tokí
) {

320 
	`dt‹_ídpoöt_öfo
((*)
öfo
);

321  
KAA_ERR_NOMEM
;

324 
	`mem˝y
(
öfo
->
ac˚ss_tokí
, 
ídpoöt_ac˚ss_tokí
, info->
ac˚ss_tokí_Àngth
);

326 i‡(
li°íî
)

327 
öfo
->
li°íî
 =Üistener;

329 
öfo
->
ªque°_id
 = ++
£lf
->
ídpoöt_ªque°_cou¡î
;

331 i‡(!
	`kØ_li°_push_back
(
£lf
->
©èch_ídpoöts
, (*)
öfo
)) {

332 
	`dt‹_ídpoöt_öfo
((*)
öfo
);

333  
KAA_ERR_NOMEM
;

336 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√l
 =

337 
	`kØ_ch™√l_m™agî_gë_å™•‹t_ch™√l
(
£lf
->
ch™√l_m™agî
, 
u£r_sync_£rvi˚s
[0]);

338 i‡(
ch™√l
)

339 
ch™√l
->
	`sync_h™dÀr
(ch™√l->
c⁄ãxt
, 
u£r_sync_£rvi˚s
, 1);

341  
KAA_ERR_NONE
;

342 
	}
}

344 
kØ_îr‹_t
 
	$kØ_u£r_m™agî_dëach_ídpoöt
(
kØ_u£r_m™agî_t
 *
£lf
, c⁄° 
kØ_ídpoöt_id_p
 
ídpoöt_hash_key
, 
kØ_ídpoöt_°©us_li°íî_t
 *
li°íî
)

346 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
ídpoöt_hash_key
, 
KAA_ERR_BADPARAM
);

348 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "GoingÅo detachÉndpoint");

351 
kØ_ídpoöt_öfo_t
 *
öfo
 = 
	`KAA_CALLOC
(1, (kaa_endpoint_info_t));

352 
	`KAA_RETURN_IF_NIL
(
öfo
, 
KAA_ERR_NOMEM
);

354 
	`mem˝y
(
öfo
->
ídpoöt_tokí
, 
ídpoöt_hash_key
, 
KAA_ENDPOINT_ID_LENGTH
);

356 i‡(
li°íî
)

357 
öfo
->
li°íî
 =Üistener;

359 
öfo
->
ªque°_id
 = ++
£lf
->
ídpoöt_ªque°_cou¡î
;

361 i‡(!
	`kØ_li°_push_back
(
£lf
->
dëach_ídpoöts
, (*)
öfo
)) {

362 
	`dt‹_ídpoöt_öfo
((*)
öfo
);

363  
KAA_ERR_NOMEM
;

366 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√l
 =

367 
	`kØ_ch™√l_m™agî_gë_å™•‹t_ch™√l
(
£lf
->
ch™√l_m™agî
, 
u£r_sync_£rvi˚s
[0]);

368 i‡(
ch™√l
)

369 
ch™√l
->
	`sync_h™dÀr
(ch™√l->
c⁄ãxt
, 
u£r_sync_£rvi˚s
, 1);

372  
KAA_ERR_NONE
;

373 
	}
}

375 #ifde‡
DEFAULT_USER_VERIFIER_TOKEN


376 
kØ_îr‹_t
 
	$kØ_u£r_m™agî_deÁu…_©èch_to_u£r
(
kØ_u£r_m™agî_t
 *
£lf


377 , c⁄° *
u£r_exã∫Æ_id


378 , c⁄° *
ac˚ss_tokí
)

380 
	`KAA_RETURN_IF_NIL3
(
£lf
, 
u£r_exã∫Æ_id
, 
ac˚ss_tokí
, 
KAA_ERR_BADPARAM
);

381  
	`kØ_u£r_m™agî_©èch_to_u£r
(
£lf
, 
u£r_exã∫Æ_id
, 
ac˚ss_tokí
, 
DEFAULT_USER_VERIFIER_TOKEN
);

382 
	}
}

385 
kØ_îr‹_t
 
	$kØ_u£r_m™agî_£t_©èchmít_li°íîs
(
kØ_u£r_m™agî_t
 *
£lf


386 , c⁄° 
kØ_©èchmít_°©us_li°íîs_t
 *
li°íîs
)

388 
	`KAA_RETURN_IF_NIL
(
£lf
, 
KAA_ERR_BADPARAM
);

389 
£lf
->
©èchmít_li°íîs
 = *
li°íîs
;

390  
KAA_ERR_NONE
;

391 
	}
}

393 
size_t
 
	$kØ_u£r_ªque°_gë_size_no_hódî
(
kØ_u£r_m™agî_t
 *
£lf
)

395 
size_t
 
ex≥˘ed_size
 = 0;

396 i‡(
£lf
->
u£r_öfo
 && !£lf->
is_waôög_u£r_©èch_ª•⁄£
) {

397 
ex≥˘ed_size
 +(
uöt32_t
)

398 + (
uöt32_t
);

399 
ex≥˘ed_size
 +
	`kØ_Æig√d_size_gë
(
£lf
->
u£r_öfo
->
u£r_exã∫Æ_id_Àn
);

400 
ex≥˘ed_size
 +
	`kØ_Æig√d_size_gë
(
£lf
->
u£r_öfo
->
u£r_ac˚ss_tokí_Àn
);

401 
ex≥˘ed_size
 +
	`kØ_Æig√d_size_gë
(
£lf
->
u£r_öfo
->
u£r_vîifõr_tokí_Àn
);

404 i‡(
	`kØ_li°_gë_size
(
£lf
->
©èch_ídpoöts
)) {

406 
ex≥˘ed_size
 +(
uöt32_t
);

408 
kØ_li°_node_t
 *
node
 = 
	`kØ_li°_begö
(
£lf
->
©èch_ídpoöts
);

409 
node
) {

410 
kØ_ídpoöt_öfo_t
 *
öfo
 = (kØ_ídpoöt_öfo_t*)
	`kØ_li°_gë_d©a
(
node
);

411 
ex≥˘ed_size
 +(
uöt32_t
Ë+ 
	`kØ_Æig√d_size_gë
(
öfo
->
ac˚ss_tokí_Àngth
);

412 
node
 = 
	`kØ_li°_√xt
(node);

416 i‡(
	`kØ_li°_gë_size
(
£lf
->
dëach_ídpoöts
)) {

418 
ex≥˘ed_size
 +(
uöt32_t
Ë+ 
	`kØ_li°_gë_size
(
£lf
->
dëach_ídpoöts
Ë* ((uöt32_tË+ 
KAA_ENDPOINT_ID_LENGTH
);

421  
ex≥˘ed_size
;

422 
	}
}

424 
kØ_îr‹_t
 
	$kØ_u£r_ªque°_gë_size
(
kØ_u£r_m™agî_t
 *
£lf
, 
size_t
 *
ex≥˘ed_size
)

426 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
ex≥˘ed_size
, 
KAA_ERR_BADPARAM
);

427 *
ex≥˘ed_size
 = 
KAA_EXTENSION_HEADER_SIZE
 + 
	`kØ_u£r_ªque°_gë_size_no_hódî
(
£lf
);

428  
KAA_ERR_NONE
;

429 
	}
}

431 
kØ_îr‹_t
 
	$kØ_u£r_ªque°_£rülize
(
kØ_u£r_m™agî_t
 *
£lf
, 
kØ_∂©f‹m_mesßge_wrôî_t
* 
wrôî
)

433 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
wrôî
, 
KAA_ERR_BADPARAM
);

435 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "GoingÅo serialize client user sync");

437 
size_t
 
size
 = 
	`kØ_u£r_ªque°_gë_size_no_hódî
(
£lf
);

438 i‡(
	`kØ_∂©f‹m_mesßge_wrôe_exãnsi⁄_hódî
(
wrôî
, 
KAA_EXTENSION_USER
, 
KAA_USER_RECEIVE_UPDATES_FLAG
, 
size
)) {

439 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
KAA_ERR_WRITE_FAILED
, "FailedÅo writeÅhe userÉxtension header");

440  
KAA_ERR_WRITE_FAILED
;

443 i‡(
£lf
->
u£r_öfo
 && !£lf->
is_waôög_u£r_©èch_ª•⁄£
) {

444 *(
wrôî
->
cuºít
++Ë
EXTERNAL_SYSTEM_AUTH_FIELD
;

445 *(
wrôî
->
cuºít
++Ë(
uöt8_t
Ë
£lf
->
u£r_öfo
->
u£r_exã∫Æ_id_Àn
;

446 *((
uöt16_t
 *Ë
wrôî
->
cuºít
Ë
	`KAA_HTONS
((uöt16_tË
£lf
->
u£r_öfo
->
u£r_ac˚ss_tokí_Àn
);

447 
wrôî
->
cuºít
 +(
uöt16_t
);

448 *((
uöt16_t
 *Ë
wrôî
->
cuºít
Ë
	`KAA_HTONS
((uöt16_tË
£lf
->
u£r_öfo
->
u£r_vîifõr_tokí_Àn
);

449 
wrôî
->
cuºít
 +(
uöt32_t
);

450 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "SerializingÉxternal systemáuthenticationÖarameters: userÉxternal id '%s',áccessÅoken '%s', verifierÅoken '%s'"

451 , 
£lf
->
u£r_öfo
->
u£r_exã∫Æ_id
, sñf->u£r_öfo->
u£r_ac˚ss_tokí
, sñf->u£r_öfo->
u£r_vîifõr_tokí
);

453 i‡(
£lf
->
u£r_öfo
->
u£r_exã∫Æ_id_Àn
) {

454 i‡(
	`kØ_∂©f‹m_mesßge_wrôe_Æig√d
(
wrôî


455 , 
£lf
->
u£r_öfo
->
u£r_exã∫Æ_id


456 , 
£lf
->
u£r_öfo
->
u£r_exã∫Æ_id_Àn
))

458 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
KAA_ERR_WRITE_FAILED
, "FailedÅo writeÅhe userÉxternal id \"%s\""

459 , 
£lf
->
u£r_öfo
->
u£r_exã∫Æ_id
);

460  
KAA_ERR_WRITE_FAILED
;

463 i‡(
£lf
->
u£r_öfo
->
u£r_ac˚ss_tokí_Àn
) {

464 i‡(
	`kØ_∂©f‹m_mesßge_wrôe_Æig√d
(
wrôî


465 , 
£lf
->
u£r_öfo
->
u£r_ac˚ss_tokí


466 , 
£lf
->
u£r_öfo
->
u£r_ac˚ss_tokí_Àn
))

468 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
KAA_ERR_WRITE_FAILED
, "FailedÅo writeÅhe useráccessÅoken \"%s\""

469 , 
£lf
->
u£r_öfo
->
u£r_ac˚ss_tokí
);

470  
KAA_ERR_WRITE_FAILED
;

473 i‡(
£lf
->
u£r_öfo
->
u£r_vîifõr_tokí_Àn
) {

474 i‡(
	`kØ_∂©f‹m_mesßge_wrôe_Æig√d
(
wrôî


475 , 
£lf
->
u£r_öfo
->
u£r_vîifõr_tokí


476 , 
£lf
->
u£r_öfo
->
u£r_vîifõr_tokí_Àn
))

478 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
KAA_ERR_WRITE_FAILED
, "FailedÅo writeÅhe user verifierÅoken \"%s\""

479 , 
£lf
->
u£r_öfo
->
u£r_vîifõr_tokí
);

480  
KAA_ERR_WRITE_FAILED
;

484 
£lf
->
is_waôög_u£r_©èch_ª•⁄£
 = 
åue
;

487 i‡(
	`kØ_li°_gë_size
(
£lf
->
©èch_ídpoöts
)) {

488 
kØ_li°_node_t
 *
node
 = 
	`kØ_li°_begö
(
£lf
->
©èch_ídpoöts
);

489 *(
wrôî
->
cuºít
Ë
EXTERNAL_SYSTEM_ENDPOINT_ATTACH_FIELD
;

490 
wrôî
->
cuºít
 +(
uöt16_t
);

491 *((
uöt16_t
*)
wrôî
->
cuºít
Ë
	`KAA_HTONS
((uöt16_t)
	`kØ_li°_gë_size
(
£lf
->
©èch_ídpoöts
));

492 
wrôî
->
cuºít
 +(
uöt16_t
);

494 
node
) {

495 
kØ_ídpoöt_öfo_t
 *
öfo
 = (kØ_ídpoöt_öfo_t*)
	`kØ_li°_gë_d©a
(
node
);

497 i‡(!
öfo
->
is_waôög_ª•⁄£
) {

498 *((
uöt16_t
*)
wrôî
->
cuºít
Ë
	`KAA_HTONS
(
öfo
->
ªque°_id
);

499 
wrôî
->
cuºít
 +(
uöt16_t
);

500 *((
uöt16_t
*)
wrôî
->
cuºít
Ë
	`KAA_HTONS
((uöt16_t)
öfo
->
ac˚ss_tokí_Àngth
);

501 
wrôî
->
cuºít
 +(
uöt16_t
);

502 i‡(
	`kØ_∂©f‹m_mesßge_wrôe_Æig√d
(
wrôî


503 , 
öfo
->
ac˚ss_tokí


504 , 
öfo
->
ac˚ss_tokí_Àngth
))

506 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
KAA_ERR_WRITE_FAILED
, "FailedÅo writeÅhe user EndpointáccessÅoken");

507  
KAA_ERR_WRITE_FAILED
;

510 
öfo
->
is_waôög_ª•⁄£
 = 
åue
;

513 
node
 = 
	`kØ_li°_√xt
(node);

517 i‡(
	`kØ_li°_gë_size
(
£lf
->
dëach_ídpoöts
)) {

518 
kØ_li°_node_t
 *
node
 = 
	`kØ_li°_begö
(
£lf
->
dëach_ídpoöts
);

519 *(
wrôî
->
cuºít
Ë
EXTERNAL_SYSTEM_ENDPOINT_DETACH_FIELD
;

520 
wrôî
->
cuºít
 +(
uöt16_t
);

521 *((
uöt16_t
*)
wrôî
->
cuºít
Ë
	`KAA_HTONS
((uöt16_t)
	`kØ_li°_gë_size
(
£lf
->
dëach_ídpoöts
));

522 
wrôî
->
cuºít
 +(
uöt16_t
);

524 
node
) {

525 
kØ_ídpoöt_öfo_t
 *
öfo
 = (kØ_ídpoöt_öfo_t*)
	`kØ_li°_gë_d©a
(
node
);

527 i‡(!
öfo
->
is_waôög_ª•⁄£
) {

528 *((
uöt16_t
*)
wrôî
->
cuºít
Ë
	`KAA_HTONS
(
öfo
->
ªque°_id
);

529 
wrôî
->
cuºít
 +(
uöt32_t
);

531 
	`mem˝y
(
wrôî
->
cuºít
, 
öfo
->
ídpoöt_tokí
, 
KAA_ENDPOINT_ID_LENGTH
);

532 
wrôî
->
cuºít
 +
KAA_ENDPOINT_ID_LENGTH
;

534 
öfo
->
is_waôög_ª•⁄£
 = 
åue
;

537 
node
 = 
	`kØ_li°_√xt
(node);

541  
KAA_ERR_NONE
;

542 
	}
}

544 
kØ_îr‹_t
 
	$kØ_u£r_h™dÀ_£rvî_sync
(
kØ_u£r_m™agî_t
 *
£lf


545 , 
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî


546 , 
uöt16_t
 
exãnsi⁄_›ti⁄s


547 , 
size_t
 
exãnsi⁄_Àngth
)

550 ()
exãnsi⁄_›ti⁄s
;

551 ()
exãnsi⁄_Àngth
;

552 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
ªadî
, 
KAA_ERR_BADPARAM
);

554 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Re˚ived u£∏£rvî sync: o±i⁄†%u,Öaylﬂd sizê%u", 
exãnsi⁄_›ti⁄s
, 
exãnsi⁄_Àngth
);

556 
size_t
 
ªmaöög_Àngth
 = 
exãnsi⁄_Àngth
;

558 
ªmaöög_Àngth
 > 0) {

559 
uöt32_t
 
fõld_hódî
 = 
	`KAA_NTOHL
(*(uöt32_à*)
ªadî
->
cuºít
);

560 
ªadî
->
cuºít
 +(
uöt32_t
);

561 
ªmaöög_Àngth
 -(
uöt32_t
);

563 
u£r_£rvî_sync_fõld_t
 
fõld
 = (
fõld_hódî
 >> 24) & 0xFF;

564 
fõld
) {

565 
USER_ATTACH_RESPONSE_FIELD
: {

566 
u£r_sync_ªsu…_t
 
ªsu…
 = (
uöt8_t
Ë(
fõld_hódî
 >> 8) & 0xFF;

567 
	`de°roy_u£r_öfo
(
£lf
->
u£r_öfo
);

568 
£lf
->
u£r_öfo
 = 
NULL
;

569 
£lf
->
is_waôög_u£r_©èch_ª•⁄£
 = 
Ál£
;

571 i‡(
ªsu…
 =
USER_RESULT_SUCCESS
) {

572 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Endpoint was successfullyáttachedÅo user");

573 
	`kØ_°©us_£t_©èched
(
£lf
->
°©us
, 
åue
);

574 i‡(
£lf
->
©èchmít_li°íîs
.
⁄_©èch_suc˚ss
)

575 (
£lf
->
©èchmít_li°íîs
.
⁄_©èch_suc˚ss
)(£lf->©èchmít_li°íîs.
c⁄ãxt
);

578 
uöt16_t
 
u£r_vîifõr_îr‹_code
;

579 i‡(
	`kØ_∂©f‹m_mesßge_ªad
(
ªadî
, &
u£r_vîifõr_îr‹_code
, (
uöt16_t
))) {

580 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
KAA_ERR_READ_FAILED
, "FailedÅoÑead user verifierÉrror code");

581  
KAA_ERR_READ_FAILED
;

584 
u£r_vîifõr_îr‹_code
 = 
	`KAA_NTOHS
(user_verifier_error_code);

585 
ªmaöög_Àngth
 -(
uöt16_t
);

587 
uöt16_t
 
ªas⁄_Àngth
;

588 i‡(
	`kØ_∂©f‹m_mesßge_ªad
(
ªadî
, &
ªas⁄_Àngth
, (
uöt16_t
))) {

589 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
KAA_ERR_READ_FAILED
, "FailedÅoÑeadÑeasonÜength");

590  
KAA_ERR_READ_FAILED
;

593 
ªas⁄_Àngth
 = 
	`KAA_NTOHS
(reason_length);

594 
ªmaöög_Àngth
 -(
uöt16_t
);

596 i‡(
ªas⁄_Àngth
) {

597 
ªas⁄
[
ªas⁄_Àngth
 + 1];

598 i‡(
	`kØ_∂©f‹m_mesßge_ªad_Æig√d
(
ªadî
, 
ªas⁄
, 
ªas⁄_Àngth
)) {

599 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
KAA_ERR_READ_FAILED
, "FailedÅoÑeadÉrrorÑeason");

600  
KAA_ERR_READ_FAILED
;

603 
ªas⁄
[
ªas⁄_Àngth
] = '\0';

604 
ªmaöög_Àngth
 -
	`kØ_Æig√d_size_gë
(
ªas⁄_Àngth
);

606 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
KAA_ERR_EVENT_NOT_ATTACHED
, "FaûedÅÿ©èchÅÿu£r:Éº‹ %d,Ñós⁄ '%s'", 
u£r_vîifõr_îr‹_code
, 
ªas⁄
);

608 i‡(
£lf
->
©èchmít_li°íîs
.
⁄_©èch_Áûed
) {

609 (
£lf
->
©èchmít_li°íîs
.
⁄_©èch_Áûed
)(£lf->©èchmít_li°íîs.
c⁄ãxt


610 , (
u£r_vîifõr_îr‹_code_t
)
u£r_vîifõr_îr‹_code


611 , 
ªas⁄
);

614 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
KAA_ERR_EVENT_NOT_ATTACHED
, "FaûedÅÿ©èchÅÿu£r:Éº‹ %d,Ñós⁄ 'unknown'", 
u£r_vîifõr_îr‹_code
);

615 i‡(
£lf
->
©èchmít_li°íîs
.
⁄_©èch_Áûed
) {

616 (
£lf
->
©èchmít_li°íîs
.
⁄_©èch_Áûed
)(£lf->©èchmít_li°íîs.
c⁄ãxt


617 , (
u£r_vîifõr_îr‹_code_t
)
u£r_vîifõr_îr‹_code


618 , 
NULL
);

625 
USER_ATTACH_NOTIFICATION_FIELD
: {

626 
uöt8_t
 
exã∫Æ_id_Àngth
 = (
fõld_hódî
 >> 16) & 0xFF;

627 
uöt16_t
 
ac˚ss_tokí_Àngth
 = (
fõld_hódî
) & 0xFFFF;

628 i‡(
exã∫Æ_id_Àngth
 + 
ac˚ss_tokí_Àngth
 > 
ªmaöög_Àngth
)

629  
KAA_ERR_INVALID_BUFFER_SIZE
;

631 
exã∫Æ_id
[
exã∫Æ_id_Àngth
 + 1];

632 
ac˚ss_tokí
[
ac˚ss_tokí_Àngth
 + 1];

634 i‡(
	`kØ_∂©f‹m_mesßge_ªad_Æig√d
(
ªadî
, 
exã∫Æ_id
, 
exã∫Æ_id_Àngth
)) {

635 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
KAA_ERR_READ_FAILED
, "FailedÅoÑeadÅheÉxternal ID (length %u)"

636 , 
exã∫Æ_id_Àngth
);

637  
KAA_ERR_READ_FAILED
;

639 
exã∫Æ_id
[
exã∫Æ_id_Àngth
] = '\0';

640 
ªmaöög_Àngth
 -
	`kØ_Æig√d_size_gë
(
exã∫Æ_id_Àngth
);

642 i‡(
	`kØ_∂©f‹m_mesßge_ªad_Æig√d
(
ªadî
, 
ac˚ss_tokí
, 
ac˚ss_tokí_Àngth
)) {

643 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
KAA_ERR_READ_FAILED
, "FailedÅoÑeadÅheáccessÅoken (length %u)"

644 , 
ac˚ss_tokí_Àngth
);

645  
KAA_ERR_READ_FAILED
;

647 
ac˚ss_tokí
[
ac˚ss_tokí_Àngth
] = '\0';

648 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Received useráttachÇotification:ÉndpointÉxternal id '%s' (length %u),áccessÅoken '%s' (length %u)"

649 , 
exã∫Æ_id
, 
exã∫Æ_id_Àngth
, 
ac˚ss_tokí
, 
ac˚ss_tokí_Àngth
);

650 
ªmaöög_Àngth
 -
	`kØ_Æig√d_size_gë
(
ac˚ss_tokí_Àngth
);

652 
	`kØ_°©us_£t_©èched
(
£lf
->
°©us
, 
åue
);

654 i‡(
£lf
->
©èchmít_li°íîs
.
⁄_©èched
)

655 (
£lf
->
©èchmít_li°íîs
.
⁄_©èched
)(£lf->©èchmít_li°íîs.
c⁄ãxt


656 , 
exã∫Æ_id
, 
ac˚ss_tokí
);

659 
USER_DETACH_NOTIFICATION_FIELD
: {

660 
uöt16_t
 
ac˚ss_tokí_Àngth
 = (
fõld_hódî
) & 0xFFFF;

661 i‡(
ac˚ss_tokí_Àngth
 > 
ªmaöög_Àngth
)

662  
KAA_ERR_INVALID_BUFFER_SIZE
;

664 
ac˚ss_tokí
[
ac˚ss_tokí_Àngth
 + 1];

665 i‡(
	`kØ_∂©f‹m_mesßge_ªad_Æig√d
(
ªadî
, 
ac˚ss_tokí
, 
ac˚ss_tokí_Àngth
)) {

666 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
KAA_ERR_READ_FAILED
, "FailedÅoÑeadÅheáccessÅoken (length %u)"

667 , 
ac˚ss_tokí_Àngth
);

668  
KAA_ERR_READ_FAILED
;

670 
ac˚ss_tokí
[
ac˚ss_tokí_Àngth
] = '\0';

671 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Received user detachÇotification:ÉndpointáccessÅoken '%s' (length %u)"

672 , 
ac˚ss_tokí
, 
ac˚ss_tokí_Àngth
);

673 
ªmaöög_Àngth
 -
	`kØ_Æig√d_size_gë
(
ac˚ss_tokí_Àngth
);

675 
	`kØ_°©us_£t_©èched
(
£lf
->
°©us
, 
Ál£
);

677 i‡(
£lf
->
©èchmít_li°íîs
.
⁄_dëached
)

678 (
£lf
->
©èchmít_li°íîs
.
⁄_dëached
)(£lf->©èchmít_li°íîs.
c⁄ãxt
, 
ac˚ss_tokí
);

681 
ENDPOINT_ATTACH_RESPONSES_FIELD
: {

682 
uöt16_t
 
©èch_ª•⁄£s_cou¡
 = (
fõld_hódî
) & 0xFFFF;

684 i‡((
uöt32_t
Ë> 
ªmaöög_Àngth
) {

685  
KAA_ERR_INVALID_BUFFER_SIZE
;

688 
uöt32_t
 
i
 = 0; i < 
©èch_ª•⁄£s_cou¡
; ++i) {

689 
uöt8_t
 
ªsu…_code
 = *(
ªadî
->
cuºít
++);

690 
uöt8_t
 
›ti⁄s
 = *(
ªadî
->
cuºít
++);

691 
uöt16_t
 
ªque°_id
 = 
	`KAA_NTOHS
(*(uöt16_t*)
ªadî
->
cuºít
);

693 
ªadî
->
cuºít
 +(
uöt16_t
);

694 
ªmaöög_Àngth
 -(
uöt32_t
);

696 i‡(
ªsu…_code
 =
USER_RESULT_FAILURE
) {

697 
kØ_li°_node_t
 *
node
 = 
	`kØ_li°_föd_√xt
(
	`kØ_li°_begö
(
£lf
->
©èch_ídpoöts
), 
m©ch_¥ediˇã_ídpoöt_öfo
, (*)&
ªque°_id
);

698 i‡(
node
) {

699 
kØ_ídpoöt_öfo_t
 *
öfo
 = (kØ_ídpoöt_öfo_t*)
	`kØ_li°_gë_d©a
(
node
);

700 i‡(
öfo
->
li°íî
 && info->li°íî->
⁄_©èch_Áûed
)

701 
öfo
->
li°íî
->
	`⁄_©èch_Áûed
(öfo->li°íî->
c⁄ãxt
);

702 
	`kØ_li°_ªmove_©
(
£lf
->
©èch_ídpoöts
, 
node
, 
dt‹_ídpoöt_öfo
);

707 i‡(
›ti⁄s
 & 
USER_SYNC_ENDPOINT_ID_OPTION
) {

708 
kØ_ídpoöt_id
 
ídpoöt_id
;

709 
	`mem˝y
(
ídpoöt_id
, 
ªadî
->
cuºít
, 
KAA_ENDPOINT_ID_LENGTH
);

710 
ªadî
->
cuºít
 +
KAA_ENDPOINT_ID_LENGTH
;

711 
ªmaöög_Àngth
 -
KAA_ENDPOINT_ID_LENGTH
;

713 
kØ_li°_node_t
 *
node
 = 
	`kØ_li°_föd_√xt
(
	`kØ_li°_begö
(
£lf
->
©èch_ídpoöts
), 
m©ch_¥ediˇã_ídpoöt_öfo
, (*)&
ªque°_id
);

714 i‡(
node
) {

715 
kØ_ídpoöt_öfo_t
 *
öfo
 = (kØ_ídpoöt_öfo_t*)
	`kØ_li°_gë_d©a
(
node
);

716 i‡(
öfo
->
li°íî
 && info->li°íî->
⁄_©èched
)

717 
öfo
->
li°íî
->
	`⁄_©èched
(öfo->li°íî->
c⁄ãxt
, 
ídpoöt_id
);

718 
	`kØ_li°_ªmove_©
(
£lf
->
©èch_ídpoöts
, 
node
, 
dt‹_ídpoöt_öfo
);

725 
ENDPOINT_DETACH_RESPONSES_FIELD
: {

726 
uöt16_t
 
dëach_ª•⁄£s_cou¡
 = 
fõld_hódî
 & 0xFFFF;

728 i‡((
uöt32_t
Ë> 
ªmaöög_Àngth
) {

729  
KAA_ERR_INVALID_BUFFER_SIZE
;

732 
uöt32_t
 
i
 = 0; i < 
dëach_ª•⁄£s_cou¡
; ++i) {

733 
uöt8_t
 
ªsu…_code
 = *(
ªadî
->
cuºít
++);

734 
ªadî
->
cuºít
++;

735 
uöt16_t
 
ªque°_id
 = 
	`KAA_NTOHS
(*(uöt16_t*)
ªadî
->
cuºít
);

736 
ªadî
->
cuºít
 +(
uöt16_t
);

737 
ªmaöög_Àngth
 -(
uöt32_t
);

739 i‡(
ªsu…_code
 =
USER_RESULT_FAILURE
) {

740 
kØ_li°_node_t
 *
node
 = 
	`kØ_li°_föd_√xt
(
	`kØ_li°_begö
(
£lf
->
dëach_ídpoöts
), 
m©ch_¥ediˇã_ídpoöt_öfo
, (*)&
ªque°_id
);

741 i‡(
node
) {

742 
kØ_ídpoöt_öfo_t
 *
öfo
 = (kØ_ídpoöt_öfo_t*)
	`kØ_li°_gë_d©a
(
node
);

743 i‡(
öfo
->
li°íî
 && info->li°íî->
⁄_dëach_Áûed
)

744 
öfo
->
li°íî
->
	`⁄_dëach_Áûed
(öfo->li°íî->
c⁄ãxt
);

745 
	`kØ_li°_ªmove_©
(
£lf
->
dëach_ídpoöts
, 
node
, 
dt‹_ídpoöt_öfo
);

750 
kØ_li°_node_t
 *
node
 = 
	`kØ_li°_föd_√xt
(
	`kØ_li°_begö
(
£lf
->
dëach_ídpoöts
), 
m©ch_¥ediˇã_ídpoöt_öfo
, (*)&
ªque°_id
);

751 i‡(
node
) {

752 
kØ_ídpoöt_öfo_t
 *
öfo
 = (kØ_ídpoöt_öfo_t*)
	`kØ_li°_gë_d©a
(
node
);

753 i‡(
öfo
->
li°íî
 && info->li°íî->
⁄_dëached
)

754 
öfo
->
li°íî
->
	`⁄_dëached
(öfo->li°íî->
c⁄ãxt
);

755 
	`kØ_li°_ªmove_©
(
£lf
->
dëach_ídpoöts
, 
node
, 
dt‹_ídpoöt_öfo
);

762 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
KAA_ERR_READ_FAILED
, "InvÆid fõld %u", 
fõld
);

763  
KAA_ERR_READ_FAILED
;

766  
KAA_ERR_NONE
;

767 
	}
}

	@/var/www/html/debian/gateway/kaa/src/extensions/user/kaa_user.h

24 #i‚de‡
KAA_USER_H_


25 
	#KAA_USER_H_


	)

27 
	~<°dboﬁ.h
>

29 
	~"kØ_îr‹.h
"

30 
	~"kØ_deÁu…s.h
"

31 
	~"∂©f‹m/ext_u£r_ˇŒback.h
"

33 #ifde‡
__˝lu•lus


42 #i‚de‡
KAA_USER_MANAGER_T


43 
	#KAA_USER_MANAGER_T


	)

44 
kØ_u£r_m™agî_t
 
	tkØ_u£r_m™agî_t
;

61 #ifde‡
DEFAULT_USER_VERIFIER_TOKEN


62 
kØ_îr‹_t
 
kØ_u£r_m™agî_deÁu…_©èch_to_u£r
(
kØ_u£r_m™agî_t
 *
£lf


63 , c⁄° *
u£r_exã∫Æ_id


64 , c⁄° *
ac˚ss_tokí
);

82 
kØ_îr‹_t
 
kØ_u£r_m™agî_©èch_to_u£r
(
kØ_u£r_m™agî_t
 *
£lf


83 , c⁄° *
u£r_exã∫Æ_id


84 , c⁄° *
ac˚ss_tokí


85 , c⁄° *
u£r_vîifõr_tokí
);

96 
boﬁ
 
kØ_u£r_m™agî_is_©èched_to_u£r
(
kØ_u£r_m™agî_t
 *
£lf
);

107 
kØ_îr‹_t
 
kØ_u£r_m™agî_£t_©èchmít_li°íîs
(
kØ_u£r_m™agî_t
 *
£lf


108 , c⁄° 
kØ_©èchmít_°©us_li°íîs_t
 *
li°íîs
);

119 
kØ_îr‹_t
 
kØ_u£r_m™agî_©èch_ídpoöt
(
kØ_u£r_m™agî_t
 *
£lf
, c⁄° *
ídpoöt_ac˚ss_tokí
, 
kØ_ídpoöt_°©us_li°íî_t
 *
li°íî
);

131 
kØ_îr‹_t
 
kØ_u£r_m™agî_dëach_ídpoöt
(
kØ_u£r_m™agî_t
 *
£lf
, c⁄° 
kØ_ídpoöt_id_p
 
ídpoöt_hash_key
, 
kØ_ídpoöt_°©us_li°íî_t
 *
li°íî
);

133 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/extensions/user/kaa_user_private.h

17 #i‚de‡
KAA_USER_PRIVATE_H


18 
	#KAA_USER_PRIVATE_H


	)

20 
	~<kØ_u£r.h
>

21 
	~<kØ_°©us.h
>

22 
	~<kØ_ch™√l_m™agî.h
>

23 
	~<utûôõs/kØ_log.h
>

24 
	~<kØ_∂©f‹m_utûs.h
>

26 
kØ_îr‹_t
 
kØ_u£r_m™agî_¸óã
(
kØ_u£r_m™agî_t
 **
u£r_m™agî_p
, 
kØ_°©us_t
 *
°©us
,

27 
kØ_ch™√l_m™agî_t
 *
ch™√l_m™agî
, 
kØ_loggî_t
 *
loggî
);

29 
kØ_u£r_m™agî_de°roy
(
kØ_u£r_m™agî_t
 *
u£r_m™agî
);

31 
kØ_îr‹_t
 
kØ_u£r_ªque°_gë_size
(
kØ_u£r_m™agî_t
 *
£lf
, 
size_t
 *
ex≥˘ed_size
);

32 
kØ_îr‹_t
 
kØ_u£r_ªque°_£rülize
(
kØ_u£r_m™agî_t
 *
£lf
, 
kØ_∂©f‹m_mesßge_wrôî_t
* 
wrôî
);

33 
kØ_îr‹_t
 
kØ_u£r_h™dÀ_£rvî_sync
(
kØ_u£r_m™agî_t
 *
£lf
, 
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî
, 
uöt16_t
 
exãnsi⁄_›ti⁄s
, 
size_t
 
exãnsi⁄_Àngth
);

	@/var/www/html/debian/gateway/kaa/src/extensions/user/test/test_kaa_user.c

17 
	~<°döt.h
>

18 
	~<°dio.h
>

19 
	~<°rög.h
>

20 
	~"∂©f‹m/ext_sha.h
"

22 
	~"kØ_u£r.h
"

23 
	~"kØ_u£r_¥iv©e.h
"

25 
	~"kØ_ã°.h
"

27 
	~"kØ.h
"

28 
	~"kØ_c⁄ãxt.h
"

29 
	~"kØ_∂©f‹m_¥Ÿocﬁ.h
"

30 
	~"kØ_ch™√l_m™agî.h
"

31 
	~"kØ_°©us.h
"

32 
	~"kØ_∂©f‹m_utûs.h
"

33 
	~"utûôõs/kØ_mem.h
"

34 
	~"utûôõs/kØ_log.h
"

35 
	~"∂©f‹m/sock.h
"

37 
	~"kØ_¥iv©e.h
"

39 
	#USER_EXTERNAL_ID
 "u£r@id"

	)

40 
	#ACCESS_TOKEN
 "tokí"

	)

41 
	#USER_VERIFIER
 "u£r_vîifõr"

	)

43 
	#ATTACH_ERROR_REASON
 "Bad u£∏¸edítüls"

	)

45 
kØ_c⁄ãxt_t
 
	gkØ_c⁄ãxt
;

46 
kØ_u£r_m™agî_t
 *
	gu£r_m™agî
 = 
NULL
;

47 
kØ_loggî_t
 *
	gloggî
 = 
NULL
;

48 
kØ_°©us_t
 *
	g°©us
 = 
NULL
;

49 
kØ_ch™√l_m™agî_t
 *
	gch™√l_m™agî
 = 
NULL
;

51 
boﬁ
 
	gis_⁄_©èched_övoked
 = 
Ál£
;

52 
boﬁ
 
	gis_⁄_dëached_övoked
 = 
Ál£
;

53 
boﬁ
 
	gis_©èch_suc˚ss_övoked
 = 
Ál£
;

54 
boﬁ
 
	gis_©èch_Áûed_övoked
 = 
Ál£
;

55 
boﬁ
 
	gœ°_is_©èched_ªsu…
 = 
Ál£
;

59 
kØ_îr‹_t
 
	$⁄_©èched
(*
c⁄ãxt
, c⁄° *
u£r_exã∫Æ_id
, c⁄° *
ídpoöt_ac˚ss_tokí
)

61 ()
c⁄ãxt
;

63 
	`ASSERT_EQUAL
(
	`°rcmp
(
ACCESS_TOKEN
, 
ídpoöt_ac˚ss_tokí
), 0);

64 
	`ASSERT_EQUAL
(
	`°rcmp
(
USER_EXTERNAL_ID
, 
u£r_exã∫Æ_id
), 0);

65 
is_⁄_©èched_övoked
 = 
åue
;

66  
KAA_ERR_NONE
;

67 
	}
}

69 
kØ_îr‹_t
 
	$⁄_dëached
(*
c⁄ãxt
, c⁄° *
ídpoöt_ac˚ss_tokí
)

71 ()
c⁄ãxt
;

73 
	`ASSERT_EQUAL
(
	`°rcmp
(
ACCESS_TOKEN
, 
ídpoöt_ac˚ss_tokí
), 0);

74 
is_⁄_dëached_övoked
 = 
åue
;

75  
KAA_ERR_NONE
;

76 
	}
}

78 
kØ_îr‹_t
 
	$⁄_©èch_suc˚ss
(*
c⁄ãxt
)

80 ()
c⁄ãxt
;

82 
œ°_is_©èched_ªsu…
 = 
åue
;

83 
is_©èch_suc˚ss_övoked
 = 
åue
;

84  
KAA_ERR_NONE
;

85 
	}
}

87 
kØ_îr‹_t
 
	$⁄_©èch_Áûed
(*
c⁄ãxt
, 
u£r_vîifõr_îr‹_code_t
 
îr‹_code
, c⁄° *
ªas⁄
)

89 ()
c⁄ãxt
;

90 
is_©èch_Áûed_övoked
 = 
åue
;

91 
	`ASSERT_EQUAL
(
îr‹_code
, 
CONNECTION_ERROR
);

92 
	`ASSERT_EQUAL
(
	`memcmp
(
ªas⁄
, 
ATTACH_ERROR_REASON
, 
	`°æí
(ATTACH_ERROR_REASON)), 0);

93  
KAA_ERR_NONE
;

94 
	}
}

96 
	$ã°_•ecifõd_u£r_vîifõr
(**
°©e
)

98 ()
°©e
;

100 
	`ASSERT_EQUAL
(
	`kØ_u£r_m™agî_©èch_to_u£r
(
u£r_m™agî
, 
USER_EXTERNAL_ID
, 
ACCESS_TOKEN
, 
USER_VERIFIER
), 
KAA_ERR_NONE
);

102 
size_t
 
ex≥˘ed_size
 = 0;

103 
	`ASSERT_EQUAL
(
	`kØ_u£r_ªque°_gë_size
(
u£r_m™agî
, &
ex≥˘ed_size
), 
KAA_ERR_NONE
);

105 
uöt8_t
 
buf„r
[
ex≥˘ed_size
];

106 
kØ_∂©f‹m_mesßge_wrôî_t
 *
wrôî
 = 
NULL
;

107 
	`ASSERT_EQUAL
(
	`kØ_∂©f‹m_mesßge_wrôî_¸óã
(&
wrôî
, 
buf„r
, 
ex≥˘ed_size
), 
KAA_ERR_NONE
);

108 
	`ASSERT_NOT_NULL
(
wrôî
);

110 
	`ASSERT_EQUAL
(
	`kØ_u£r_ªque°_£rülize
(
u£r_m™agî
, 
wrôî
), 
KAA_ERR_NONE
);

112 
uöt8_t
 *
buf_curs‹
 = 
buf„r
;

113 
	`ASSERT_EQUAL
(
KAA_EXTENSION_USER
, 
	`KAA_HTONS
(*(
uöt16_t
*)
buf_curs‹
));

114 
buf_curs‹
 +(
uöt16_t
);

116 
›ti⁄s
[] = { 0x00, 0x01 };

117 
	`ASSERT_EQUAL
(
	`memcmp
(
buf_curs‹
, 
›ti⁄s
, 2), 0);

118 
buf_curs‹
 += 2;

120 
	`ASSERT_EQUAL
(*(
uöt32_t
 * ) 
buf_curs‹
, 
	`KAA_HTONL
(2 * (uint32_t)

121 + 
	`kØ_Æig√d_size_gë
(
	`°æí
(
USER_EXTERNAL_ID
))

122 + 
	`kØ_Æig√d_size_gë
(
	`°æí
(
ACCESS_TOKEN
)

123 + 
	`kØ_Æig√d_size_gë
(
	`°æí
(
USER_VERIFIER
)))));

124 
buf_curs‹
 +(
uöt32_t
);

126 
	`ASSERT_EQUAL
(0, *
buf_curs‹
);

127 ++
buf_curs‹
;

129 
	`ASSERT_EQUAL
(
	`°æí
(
USER_EXTERNAL_ID
), *
buf_curs‹
);

130 ++
buf_curs‹
;

132 
	`ASSERT_EQUAL
(
	`KAA_HTONS
(
	`°æí
(
ACCESS_TOKEN
)), *(
uöt16_t
 *Ë
buf_curs‹
);

133 
buf_curs‹
 +(
uöt16_t
);

135 
	`ASSERT_EQUAL
(
	`KAA_HTONS
(
	`°æí
(
USER_VERIFIER
)), *(
uöt16_t
 *Ë
buf_curs‹
);

136 
buf_curs‹
 +(
uöt32_t
);

138 
	`ASSERT_EQUAL
(
	`memcmp
(
buf_curs‹
, 
USER_EXTERNAL_ID
, 
	`°æí
(USER_EXTERNAL_ID)), 0);

139 
buf_curs‹
 +
	`kØ_Æig√d_size_gë
(
	`°æí
(
USER_EXTERNAL_ID
));

141 
	`ASSERT_EQUAL
(
	`memcmp
(
buf_curs‹
, 
ACCESS_TOKEN
, 
	`°æí
(ACCESS_TOKEN)), 0);

142 
buf_curs‹
 +
	`kØ_Æig√d_size_gë
(
	`°æí
(
ACCESS_TOKEN
));

144 
	`ASSERT_EQUAL
(
	`memcmp
(
buf_curs‹
, 
USER_VERIFIER
, 
	`°æí
(USER_VERIFIER)), 0);

145 
buf_curs‹
 +
	`kØ_Æig√d_size_gë
(
	`°æí
(
USER_VERIFIER
));

147 
	`kØ_∂©f‹m_mesßge_wrôî_de°roy
(
wrôî
);

148 
	}
}

150 
	$ã°_suc˚ss_ª•⁄£
(**
°©e
)

152 ()
°©e
;

154 
uöt8_t
 
suc˚ss_ª•⁄£
[] = {

167 
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî
 = 
NULL
;

168 
	`ASSERT_EQUAL
(
	`kØ_∂©f‹m_mesßge_ªadî_¸óã
(&
ªadî
, 
suc˚ss_ª•⁄£
, 36), 
KAA_ERR_NONE
);

169 
	`ASSERT_NOT_NULL
(
ªadî
);

171 
	`ASSERT_EQUAL
(
	`kØ_u£r_h™dÀ_£rvî_sync
(
u£r_m™agî
, 
ªadî
, 0, 36), 
KAA_ERR_NONE
);

172 
	`ASSERT_TRUE
(
is_⁄_©èched_övoked
);

173 
	`ASSERT_TRUE
(
is_⁄_dëached_övoked
);

174 
	`ASSERT_TRUE
(
is_©èch_suc˚ss_övoked
);

175 
	`ASSERT_TRUE
(
œ°_is_©èched_ªsu…
);

177 
	`kØ_∂©f‹m_mesßge_ªadî_de°roy
(
ªadî
);

178 
	}
}

180 
	$ã°_Áûed_ª•⁄£
(**
°©e
)

182 ()
°©e
;

184 
uöt8_t
 
Áûed_ª•⁄£
[] = {

194 
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî
 = 
NULL
;

195 
	`ASSERT_EQUAL
(
	`kØ_∂©f‹m_mesßge_ªadî_¸óã
(&
ªadî
, 
Áûed_ª•⁄£
, 28), 
KAA_ERR_NONE
);

196 
	`ASSERT_NOT_NULL
(
ªadî
);

198 
	`ASSERT_EQUAL
(
	`kØ_u£r_h™dÀ_£rvî_sync
(
u£r_m™agî
, 
ªadî
, 0, 28), 
KAA_ERR_NONE
);

199 
	`ASSERT_TRUE
(
is_©èch_Áûed_övoked
);

201 
	`kØ_∂©f‹m_mesßge_ªadî_de°roy
(
ªadî
);

202 
	}
}

206 
	$ã°_öô
()

208 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_log_¸óã
(&
loggî
, 
KAA_MAX_LOG_MESSAGE_LENGTH
, 
KAA_MAX_LOG_LEVEL
, 
NULL
);

209 i‡(
îr‹
 || !
loggî
) {

210  
îr‹
;

213 
kØ_c⁄ãxt
.
loggî
 =Üogger;

215 
îr‹
 = 
	`kØ_°©us_¸óã
(&
°©us
);

216 i‡(
îr‹
 || !
°©us
) {

217  
îr‹
;

220 
îr‹
 = 
	`kØ_ch™√l_m™agî_¸óã
(&
ch™√l_m™agî
, &
kØ_c⁄ãxt
);

221 i‡(
îr‹
 || !
ch™√l_m™agî
) {

222  
îr‹
;

225 
îr‹
 = 
	`kØ_u£r_m™agî_¸óã
(&
u£r_m™agî
, 
°©us
, 
ch™√l_m™agî
, 
loggî
);

226 i‡(
îr‹
 || !
u£r_m™agî
) {

227  
îr‹
;

230 
kØ_©èchmít_°©us_li°íîs_t
 
li°íîs
 = { 
NULL
, &
⁄_©èched
, &
⁄_dëached
, &
⁄_©èch_suc˚ss
, &
⁄_©èch_Áûed
 };

231 
îr‹
 = 
	`kØ_u£r_m™agî_£t_©èchmít_li°íîs
(
u£r_m™agî
, &
li°íîs
);

232 i‡(
îr‹
) {

233  
îr‹
;

237 
	}
}

239 
	$ã°_deöô
()

241 
	`kØ_u£r_m™agî_de°roy
(
u£r_m™agî
);

242 
	`kØ_ch™√l_m™agî_de°roy
(
ch™√l_m™agî
);

243 
	`kØ_°©us_de°roy
(
°©us
);

244 
	`kØ_log_de°roy
(
loggî
);

247 
	}
}

249 
KAA_SUITE_MAIN
(
Log
, 
ã°_öô
, 
ã°_deöô


251 
	$KAA_TEST_CASE
(
•ecifõd_u£r_vîifõr
, 
ã°_•ecifõd_u£r_vîifõr
)

252 
	$KAA_TEST_CASE
(
¥o˚ss_suc˚ss_ª•⁄£
, 
ã°_suc˚ss_ª•⁄£
)

253 
	`KAA_TEST_CASE
(
¥o˚ss_Áûed_ª•⁄£
, 
ã°_Áûed_ª•⁄£
)

	@/var/www/html/debian/gateway/kaa/src/kaa/avro_src/avro/io.h

18 #i‚de‡
AVRO_IO_H


19 
	#AVRO_IO_H


	)

20 #ifde‡
__˝lu•lus


24 
	~"∂©f‹m.h
"

25 
	~<°döt.h
>

27 
	savro_ªadî_t_
 {

28 c⁄° *
buf
;

29 
öt64_t
 
Àn
;

30 
öt64_t
 
ªad
;

33 
	savro_wrôî_t_
 {

34 c⁄° *
buf
;

35 
öt64_t
 
Àn
;

36 
öt64_t
 
wrôãn
;

39 
avro_ªadî_t_
 *
	tavro_ªadî_t
;

40 
avro_wrôî_t_
 *
	tavro_wrôî_t
;

42 
avro_ªadî_t
 
avro_ªadî_mem‹y
(c⁄° *
buf
, 
öt64_t
 
Àn
);

43 
avro_wrôî_t
 
avro_wrôî_mem‹y
(c⁄° *
buf
, 
öt64_t
 
Àn
);

45 
avro_ªad
(
avro_ªadî_t
 
ªadî
, *
buf
, 
öt64_t
 
Àn
);

46 
avro_skù
(
avro_ªadî_t
 
ªadî
, 
öt64_t
 
Àn
);

47 
avro_wrôe
(
avro_wrôî_t
 
wrôî
, *
buf
, 
öt64_t
 
Àn
);

49 
avro_ªadî_‰ì
(
avro_ªadî_t
 
ªadî
);

50 
avro_wrôî_‰ì
(
avro_wrôî_t
 
wrôî
);

52 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/avro_src/avro/platform.h

18 #i‚de‡
AVRO_PLATFORM_H


19 
	#AVRO_PLATFORM_H


	)

20 #ifde‡
__˝lu•lus


26 #ifde‡
_WIN32


27 
	~<avro/msöây≥s.h
>

31 #i‡
deföed
(
_WIN64
)

32 
	#PRIsz
 
PRIu64


	)

33 #ñi‡
deföed
(
_WIN32
)

34 
	#PRIsz
 
PRIu32


	)

36 
	#PRIsz
 "zu"

	)

39 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/avro_src/avro_private.h

17 #i‚de‡
AVRO_PRIVATE_H


18 
	#AVRO_PRIVATE_H


	)

19 #ifde‡
__˝lu•lus


23 
	~<î∫o.h
>

25 
	~"avro/∂©f‹m.h
"

27 #ifde‡
HAVE_CONFIG_H


29 
	~"c⁄fig.h
"

32 #ifde‡
_WIN32


33 
	#¢¥ötf
 
_¢¥ötf


	)

39 #ifde‡
_WIN32


40 
	#AVRO_PLATFORM_IS_BIG_ENDIAN
 (0)

	)

42 
	~<sys/∑øm.h
>

43 #i‡
BYTE_ORDER
 =
BIG_ENDIAN


44 
	#AVRO_PLATFORM_IS_BIG_ENDIAN
 (1)

	)

46 
	#AVRO_PLATFORM_IS_BIG_ENDIAN
 (0)

	)

51 
	~<î∫o.h
>

52 #i‚de‡
EILSEQ


53 
	#EILSEQ
 138

	)

57 
	#check
(
rvÆ
, 
ˇŒ
Ë{ÑvÆ = cÆl; if‘vÆËÑvÆ; }

	)

59 
	#check_£t
(
rvÆ
, 
ˇŒ
, ...) \

61 
rvÆ
 = 
ˇŒ
; \

62 i‡(
rvÆ
) { \

63  
rvÆ
; \

65 }

	)

67 
	#check_¥efix
(
rvÆ
, 
ˇŒ
, ...) \

69 
rvÆ
 = 
ˇŒ
; \

70 i‡(
rvÆ
) { \

71  
rvÆ
; \

73 }

	)

75 
	#check_∑øm
(
ªsu…
, 
ã°
, 
«me
) \

77 i‡(!(
ã°
)) { \

78  
ªsu…
; \

80 }

	)

82 
	#AVRO_UNUSED
(
v¨
Ë()v¨;

	)

84 
	#c⁄èöî_of
(
±r_
, 
ty≥_
, 
membî_
) \

85 ((
ty≥_
 *)((*)
±r_
 - (
size_t
)&(—y≥_ *)0)->
membî_
))

	)

87 
	#nuŒ°rcmp
(
s1
, 
s2
) \

88 (((
s1
Ë&& (
s2
)Ë? 
	`°rcmp
(s1, s2Ë: ((s1Ë|| (s2)))

	)

90 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/avro_src/encoding.h

17 #i‚de‡
AVRO_ENCODING_H


18 
	#AVRO_ENCODING_H


	)

19 #ifde‡
__˝lu•lus


23 
	~"avro/∂©f‹m.h
"

24 
	~"avro/io.h
"

29 
	savro_ícodög_t
 {

30 c⁄° *
des¸ùti⁄
;

34 (*
ªad_°rög
Ë(
avro_ªadî_t
 
ªadî
, **
s
, 
öt64_t
 *
Àn
);

35 (*
wrôe_°rög
Ë(
avro_wrôî_t
 
wrôî
, c⁄° *
s
);

39 (*
ªad_byãs
Ë(
avro_ªadî_t
 
ªadî
, **
byãs
, 
öt64_t
 * 
Àn
);

40 (*
wrôe_byãs
Ë(
avro_wrôî_t
 
wrôî
,

41 c⁄° *
byãs
, c⁄° 
öt64_t
 
Àn
);

45 (*
ªad_öt
Ë(
avro_ªadî_t
 
ªadî
, 
öt32_t
 * 
i
);

46 (*
wrôe_öt
Ë(
avro_wrôî_t
 
wrôî
, c⁄° 
öt32_t
 
i
);

50 (*
ªad_l⁄g
Ë(
avro_ªadî_t
 
ªadî
, 
öt64_t
 * 
l
);

51 (*
wrôe_l⁄g
Ë(
avro_wrôî_t
 
wrôî
, c⁄° 
öt64_t
 
l
);

55 (*
ªad_Êﬂt
Ë(
avro_ªadî_t
 
ªadî
, *
f
);

56 (*
wrôe_Êﬂt
Ë(
avro_wrôî_t
 
wrôî
, c⁄° 
f
);

60 (*
ªad_doubÀ
Ë(
avro_ªadî_t
 
ªadî
, *
d
);

61 (*
wrôe_doubÀ
Ë(
avro_wrôî_t
 
wrôî
, c⁄° 
d
);

65 (*
ªad_boﬁón
Ë(
avro_ªadî_t
 
ªadî
, 
öt8_t
 * 
b
);

66 (*
wrôe_boﬁón
Ë(
avro_wrôî_t
 
wrôî
, c⁄° 
öt8_t
 
b
);

70 (*
ªad_nuŒ
Ë(
avro_ªadî_t
 
ªadî
);

71 (*
wrôe_nuŒ
Ë(
avro_wrôî_t
 
wrôî
);

73 
avro_ícodög_t
 
	tavro_ícodög_t
;

75 
	#AVRO_WRITE
(
wrôî
, 
buf
, 
Àn
) \

76 { 
rvÆ
 = 
	`avro_wrôe
–
wrôî
, 
buf
, 
Àn
 ); if‘vÆËÑvÆ; }

	)

77 
	#AVRO_READ
(
ªadî
, 
buf
, 
Àn
) \

78 { 
rvÆ
 = 
	`avro_ªad
–
ªadî
, 
buf
, 
Àn
 ); if‘vÆËÑvÆ; }

	)

80 c⁄° 
avro_ícodög_t
 
avro_bö¨y_ícodög
;

83 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/avro_src/encoding_binary.c

17 
	~<öây≥s.h
>

18 
	~"ícodög.h
"

20 
	~<°dlib.h
>

21 
	~<limôs.h
>

22 
	~<î∫o.h
>

23 
	~<°rög.h
>

24 
	~"utûôõs/kØ_mem.h
"

25 
	~"avro_¥iv©e.h
"

27 
	#MAX_VARINT_BUF_SIZE
 10

	)

29 
	$ªad_l⁄g
(
avro_ªadî_t
 
ªadî
, 
öt64_t
 * 
l
)

31 
uöt64_t
 
vÆue
 = 0;

32 
uöt8_t
 
b
;

33 
off£t
 = 0;

35 i‡(
off£t
 =
MAX_VARINT_BUF_SIZE
) {

36  
EILSEQ
;

38 
	`AVRO_READ
(
ªadî
, &
b
, 1);

39 
vÆue
 |(
öt64_t
Ë(
b
 & 0x7FË<< (7 * 
off£t
);

40 ++
off£t
;

42 
b
 & 0x80);

43 *
l
 = ((
vÆue
 >> 1) ^ -(value & 1));

45 
	}
}

47 
	$wrôe_l⁄g
(
avro_wrôî_t
 
wrôî
, 
öt64_t
 
l
)

49 
buf
[
MAX_VARINT_BUF_SIZE
];

50 
uöt8_t
 
byãs_wrôãn
 = 0;

51 
uöt64_t
 
n
 = (
l
 << 1) ^ (l >> 63);

52 
n
 & ~0x7F) {

53 
buf
[
byãs_wrôãn
++] = ()((((
uöt8_t
Ë
n
) & 0x7F) | 0x80);

54 
n
 >>= 7;

56 
buf
[
byãs_wrôãn
++] = ()
n
;

57 
	`AVRO_WRITE
(
wrôî
, 
buf
, 
byãs_wrôãn
);

59 
	}
}

61 
	$ªad_öt
(
avro_ªadî_t
 
ªadî
, 
öt32_t
 * 
i
)

63 
öt64_t
 
l
;

64 
rvÆ
;

65 
	`check
(
rvÆ
, 
	`ªad_l⁄g
(
ªadî
, &
l
));

66 i‡(!(
INT_MIN
 <
l
 &&Ü <
INT_MAX
)) {

67  
ERANGE
;

69 *
i
 = 
l
;

71 
	}
}

73 
	$wrôe_öt
(
avro_wrôî_t
 
wrôî
, c⁄° 
öt32_t
 
i
)

75 
öt64_t
 
l
 = 
i
;

76  
	`wrôe_l⁄g
(
wrôî
, 
l
);

77 
	}
}

79 
	$ªad_byãs
(
avro_ªadî_t
 
ªadî
, **
byãs
, 
öt64_t
 * 
Àn
)

81 
rvÆ
;

82 
	`check_¥efix
(
rvÆ
, 
	`ªad_l⁄g
(
ªadî
, 
Àn
),

84 *
byãs
 = (*Ë
	`KAA_MALLOC
(*
Àn
);

85 i‡(!*
byãs
) {

86  
ENOMEM
;

88 
	`AVRO_READ
(
ªadî
, *
byãs
, *
Àn
);

90 
	}
}

93 
	$wrôe_byãs
(
avro_wrôî_t
 
wrôî
, c⁄° *
byãs
, c⁄° 
öt64_t
 
Àn
)

95 
rvÆ
;

96 i‡(
Àn
 < 0) {

97  
EINVAL
;

99 
	`check_¥efix
(
rvÆ
, 
	`wrôe_l⁄g
(
wrôî
, 
Àn
),

101 
	`AVRO_WRITE
(
wrôî
, (*)
byãs
, 
Àn
);

103 
	}
}

105 
	$ªad_°rög
(
avro_ªadî_t
 
ªadî
, **
s
, 
öt64_t
 *
Àn
)

107 ()
Àn
;

108 
öt64_t
 
°r_Àn
 = 0;

109 
rvÆ
;

110 
	`check_¥efix
(
rvÆ
, 
	`ªad_l⁄g
(
ªadî
, &
°r_Àn
),

112 *
s
 = (*Ë
	`KAA_MALLOC
(
°r_Àn
 + 1);

113 i‡(!*
s
) {

114  
ENOMEM
;

116 (*
s
)[
°r_Àn
] = '\0';

117 
	`AVRO_READ
(
ªadî
, *
s
, 
°r_Àn
);

119 
	}
}

121 
	$wrôe_°rög
(
avro_wrôî_t
 
wrôî
, c⁄° *
s
)

123 
öt64_t
 
Àn
 = 
	`°æí
(
s
);

124  
	`wrôe_byãs
(
wrôî
, 
s
, 
Àn
);

125 
	}
}

127 
	$ªad_Êﬂt
(
avro_ªadî_t
 
ªadî
, *
f
)

129 #i‡
AVRO_PLATFORM_IS_BIG_ENDIAN


130 
uöt8_t
 
buf
[4];

133 
f
;

134 
öt32_t
 
i
;

135 } 
v
;

136 #i‡
AVRO_PLATFORM_IS_BIG_ENDIAN


137 
	`AVRO_READ
(
ªadî
, 
buf
, 4);

138 
v
.
i
 = ((
öt32_t
Ë
buf
[0] << 0)

139 | ((
öt32_t
Ë
buf
[1] << 8)

140 | ((
öt32_t
Ë
buf
[2] << 16) | ((int32_t) buf[3] << 24);

142 
	`AVRO_READ
(
ªadî
, (*)&
v
.
i
, 4);

144 *
f
 = 
v
.f;

146 
	}
}

148 
	$wrôe_Êﬂt
(
avro_wrôî_t
 
wrôî
, c⁄° 
f
)

150 #i‡
AVRO_PLATFORM_IS_BIG_ENDIAN


151 
uöt8_t
 
buf
[4];

154 
f
;

155 
öt32_t
 
i
;

156 } 
v
;

158 
v
.
f
 = f;

159 #i‡
AVRO_PLATFORM_IS_BIG_ENDIAN


160 
buf
[0] = (
uöt8_t
Ë(
v
.
i
 >> 0);

161 
buf
[1] = (
uöt8_t
Ë(
v
.
i
 >> 8);

162 
buf
[2] = (
uöt8_t
Ë(
v
.
i
 >> 16);

163 
buf
[3] = (
uöt8_t
Ë(
v
.
i
 >> 24);

164 
	`AVRO_WRITE
(
wrôî
, 
buf
, 4);

166 
	`AVRO_WRITE
(
wrôî
, (*)&
v
.
i
, 4);

169 
	}
}

171 
	$ªad_doubÀ
(
avro_ªadî_t
 
ªadî
, *
d
)

173 #i‡
AVRO_PLATFORM_IS_BIG_ENDIAN


174 
uöt8_t
 
buf
[8];

177 
d
;

178 
öt64_t
 
l
;

179 } 
v
;

181 #i‡
AVRO_PLATFORM_IS_BIG_ENDIAN


182 
	`AVRO_READ
(
ªadî
, 
buf
, 8);

183 
v
.
l
 = ((
öt64_t
Ë
buf
[0] << 0)

184 | ((
öt64_t
Ë
buf
[1] << 8)

185 | ((
öt64_t
Ë
buf
[2] << 16)

186 | ((
öt64_t
Ë
buf
[3] << 24)

187 | ((
öt64_t
Ë
buf
[4] << 32)

188 | ((
öt64_t
Ë
buf
[5] << 40)

189 | ((
öt64_t
Ë
buf
[6] << 48) | ((int64_t) buf[7] << 56);

191 
	`AVRO_READ
(
ªadî
, (*)&
v
.
l
, 8);

193 *
d
 = 
v
.d;

195 
	}
}

197 
	$wrôe_doubÀ
(
avro_wrôî_t
 
wrôî
, c⁄° 
d
)

199 #i‡
AVRO_PLATFORM_IS_BIG_ENDIAN


200 
uöt8_t
 
buf
[8];

203 
d
;

204 
öt64_t
 
l
;

205 } 
v
;

207 
v
.
d
 = d;

208 #i‡
AVRO_PLATFORM_IS_BIG_ENDIAN


209 
buf
[0] = (
uöt8_t
Ë(
v
.
l
 >> 0);

210 
buf
[1] = (
uöt8_t
Ë(
v
.
l
 >> 8);

211 
buf
[2] = (
uöt8_t
Ë(
v
.
l
 >> 16);

212 
buf
[3] = (
uöt8_t
Ë(
v
.
l
 >> 24);

213 
buf
[4] = (
uöt8_t
Ë(
v
.
l
 >> 32);

214 
buf
[5] = (
uöt8_t
Ë(
v
.
l
 >> 40);

215 
buf
[6] = (
uöt8_t
Ë(
v
.
l
 >> 48);

216 
buf
[7] = (
uöt8_t
Ë(
v
.
l
 >> 56);

217 
	`AVRO_WRITE
(
wrôî
, 
buf
, 8);

219 
	`AVRO_WRITE
(
wrôî
, (*)&
v
.
l
, 8);

222 
	}
}

224 
	$ªad_boﬁón
(
avro_ªadî_t
 
ªadî
, 
öt8_t
 * 
b
)

226 
	`AVRO_READ
(
ªadî
, 
b
, 1);

228 
	}
}

230 
	$wrôe_boﬁón
(
avro_wrôî_t
 
wrôî
, c⁄° 
öt8_t
 
b
)

232 
	`AVRO_WRITE
(
wrôî
, (*)&
b
, 1);

234 
	}
}

236 
	$ªad_skù_nuŒ
(
avro_ªadî_t
 
ªadî
)

241 
	`AVRO_UNUSED
(
ªadî
);

244 
	}
}

246 
	$wrôe_nuŒ
(
avro_wrôî_t
 
wrôî
)

251 
	`AVRO_UNUSED
(
wrôî
);

254 
	}
}

260 c⁄° 
avro_ícodög_t
 
	gavro_bö¨y_ícodög
 = {

265  
ªad_°rög
,

266  
wrôe_°rög
,

270  
ªad_byãs
,

271  
wrôe_byãs
,

275  
ªad_öt
,

276  
wrôe_öt
,

280  
ªad_l⁄g
,

281  
wrôe_l⁄g
,

285  
ªad_Êﬂt
,

286  
wrôe_Êﬂt
,

290  
ªad_doubÀ
,

291  
wrôe_doubÀ
,

295  
ªad_boﬁón
,

296  
wrôe_boﬁón
,

300  
ªad_skù_nuŒ
,

301  
wrôe_nuŒ
,

	@/var/www/html/debian/gateway/kaa/src/kaa/avro_src/io.c

17 
	~<öây≥s.h
>

18 
	~"avro/io.h
"

20 
	~<°dio.h
>

21 
	~<°dlib.h
>

22 
	~<î∫o.h
>

23 
	~<°rög.h
>

24 
	~"utûôõs/kØ_mem.h
"

26 
	~"avro_¥iv©e.h
"

28 
avro_ªadî_t
 
	$avro_ªadî_mem‹y
(c⁄° *
buf
, 
öt64_t
 
Àn
)

30 
avro_ªadî_t_
 *
mem_ªadî
 = (avro_ªadî_t_ *Ë
	`KAA_CALLOC
(1,

31 (
avro_ªadî_t_
));

32 i‡(!
mem_ªadî
) {

33  
NULL
;

35 
mem_ªadî
->
buf
 = buf;

36 
mem_ªadî
->
Àn
 =Üen;

37 
mem_ªadî
->
ªad
 = 0;

38  
mem_ªadî
;

39 
	}
}

41 
avro_wrôî_t
 
	$avro_wrôî_mem‹y
(c⁄° *
buf
, 
öt64_t
 
Àn
)

43 
avro_wrôî_t_
 *
mem_wrôî
 = (avro_wrôî_t_ *Ë
	`KAA_CALLOC
(1,

44 (
avro_wrôî_t_
));

45 i‡(!
mem_wrôî
) {

46  
NULL
;

48 
mem_wrôî
->
buf
 = buf;

49 
mem_wrôî
->
Àn
 =Üen;

50 
mem_wrôî
->
wrôãn
 = 0;

51  
mem_wrôî
;

52 
	}
}

54 
	$avro_ªad_mem‹y
(
avro_ªadî_t_
 *
ªadî
, *
buf
, 
öt64_t
 
Àn
)

56 i‡(
Àn
 > 0) {

57 i‡((
ªadî
->
Àn
 -Ñódî->
ªad
) <Üen) {

58  
ENOSPC
;

60 
	`mem˝y
(
buf
, 
ªadî
->bu‡+Ñódî->
ªad
, 
Àn
);

61 
ªadî
->
ªad
 +
Àn
;

64 
	}
}

66 
	#byãs_avaûabÀ
(
ªadî
Ë‘ódî->
íd
 -Ñódî->
cur
)

	)

67 
	#buf„r_ª£t
(
ªadî
Ë{ªadî->
cur
 =Ñódî->
íd
 =Ñódî->
buf„r
;}

	)

69 
	$avro_ªad
(
avro_ªadî_t
 
ªadî
, *
buf
, 
öt64_t
 
Àn
)

71 i‡(
buf
 && 
Àn
 >= 0) {

72  
	`avro_ªad_mem‹y
(
ªadî
, 
buf
, 
Àn
);

74  
EINVAL
;

75 
	}
}

77 
	$avro_skù_mem‹y
(
avro_ªadî_t_
 *
ªadî
, 
öt64_t
 
Àn
)

79 i‡(
Àn
 > 0) {

80 i‡((
ªadî
->
Àn
 -Ñódî->
ªad
) <Üen) {

81  
ENOSPC
;

83 
ªadî
->
ªad
 +
Àn
;

86 
	}
}

88 
	$avro_skù
(
avro_ªadî_t
 
ªadî
, 
öt64_t
 
Àn
)

90 i‡(
Àn
 >= 0) {

91  
	`avro_skù_mem‹y
(
ªadî
, 
Àn
);

94 
	}
}

96 
	$avro_wrôe_mem‹y
(
avro_wrôî_t_
 *
wrôî
, *
buf
, 
öt64_t
 
Àn
)

98 i‡(
Àn
) {

99 i‡((
wrôî
->
Àn
 - wrôî->
wrôãn
) <Üen) {

100  
ENOSPC
;

102 
	`mem˝y
((*Ë(
wrôî
->
buf
 + wrôî->
wrôãn
), buf, 
Àn
);

103 
wrôî
->
wrôãn
 +
Àn
;

106 
	}
}

108 
	$avro_wrôe
(
avro_wrôî_t
 
wrôî
, *
buf
, 
öt64_t
 
Àn
)

110 i‡(
buf
 && 
Àn
 >= 0) {

111  
	`avro_wrôe_mem‹y
(
wrôî
, 
buf
, 
Àn
);

113  
EINVAL
;

114 
	}
}

116 
	$avro_ªadî_‰ì
(
avro_ªadî_t
 
ªadî
)

118 i‡(
ªadî
) {

119 
	`KAA_FREE
(
ªadî
);

121 
	}
}

123 
	$avro_wrôî_‰ì
(
avro_wrôî_t
 
wrôî
)

125 i‡(
wrôî
) {

126 
	`KAA_FREE
(
wrôî
);

128 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/collections/kaa_list.c

17 
	~<°ddef.h
>

18 
	~<°döt.h
>

20 
	~"kØ_li°.h
"

21 
	~"kØ_comm⁄.h
"

22 
	~"utûôõs/kØ_mem.h
"

26 
	skØ_li°_node_t
 {

27 *
	md©a
;

28 
kØ_li°_node_t
 *
	m√xt
;

29 
kØ_li°_node_t
 *
	m¥ev
;

32 
	skØ_li°_t
 {

33 
kØ_li°_node_t
 *
	mhód
;

34 
kØ_li°_node_t
 *
	mèû
;

35 
size_t
 
	msize
;

38 
kØ_li°_node_t
 *
	$£t_√xt_√ighb‹
(
kØ_li°_node_t
 *
whom
, kØ_li°_node_à*
√ighb‹
)

40 i‡(
√ighb‹
) {

41 
√ighb‹
->
¥ev
 = 
whom
;

44 i‡(
whom
) {

45 
whom
->
√xt
 = 
√ighb‹
;

48  
√ighb‹
;

49 
	}
}

51 
kØ_li°_node_t
 *
	$¸óã_node
(*
d©a
)

53 
	`KAA_RETURN_IF_NIL
(
d©a
, 
NULL
);

54 
kØ_li°_node_t
 *
node
 = (kØ_li°_node_à*)
	`KAA_MALLOC
((kaa_list_node_t));

55 
	`KAA_RETURN_IF_NIL
(
node
, 
NULL
);

56 
node
->
d©a
 = data;

57 
node
->
√xt
 =Çode->
¥ev
 = 
NULL
;

58  
node
;

59 
	}
}

61 
	$de°roy_node
(
kØ_li°_node_t
 *
ô
, 
dóŒoˇã_li°_d©a
 
dóŒoˇt‹
)

63 
	`KAA_RETURN_IF_NIL
(
ô
, );

64 i‡(
dóŒoˇt‹
) {

65 (*
dóŒoˇt‹
)(
ô
->
d©a
);

67 
	`KAA_FREE
(
ô
->
d©a
);

69 
	`KAA_FREE
(
ô
);

70 
	}
}

72 
	$ª£t_li°
(
kØ_li°_t
 *
li°
)

74 
	`KAA_RETURN_IF_NIL
(
li°
, );

75 
li°
->
hód
 =Üi°->
èû
 = 
NULL
;

76 
li°
->
size
 = 0;

77 
	}
}

79 *
	$kØ_li°_gë_d©a
(
kØ_li°_node_t
 *
ô
)

81  (
ô
 ? it->
d©a
 : 
NULL
);

82 
	}
}

84 
kØ_li°_node_t
 *
	$kØ_li°_√xt
(
kØ_li°_node_t
 *
ô
)

86  (
ô
 ? it->
√xt
 : 
NULL
);

87 
	}
}

89 
kØ_li°_node_t
 *
	$kØ_li°_¥ev
(
kØ_li°_node_t
 *
ô
)

91  (
ô
 ? it->
¥ev
 : 
NULL
);

92 
	}
}

94 
kØ_li°_t
 *
	$kØ_li°s_mîge
(
kØ_li°_t
 *
de°ö©i⁄_hód
, kØ_li°_à*
èû
)

96 
	`KAA_RETURN_IF_NIL
(
de°ö©i⁄_hód
, 
èû
);

97 
	`KAA_RETURN_IF_NIL
(
èû
, 
de°ö©i⁄_hód
);

99 i‡(!
de°ö©i⁄_hód
->
hód
) {

100 
de°ö©i⁄_hód
->
hód
 = 
èû
->head;

102 
	`£t_√xt_√ighb‹
(
de°ö©i⁄_hód
->
èû
,Åaû->
hód
);

105 
de°ö©i⁄_hód
->
èû
 =Åail->tail;

106 
de°ö©i⁄_hód
->
size
 +
èû
->size;

108 
	`ª£t_li°
(
èû
);

110  
de°ö©i⁄_hód
;

111 
	}
}

113 
size_t
 
	$kØ_li°_gë_size
(
kØ_li°_t
 *
li°
)

115 
	`KAA_RETURN_IF_NIL
(
li°
, 0);

116  
li°
->
size
;

117 
	}
}

119 
kØ_li°_t
 *
	$kØ_li°_¸óã
()

121  (
kØ_li°_t
 *Ë
	`KAA_CALLOC
(1, (kaa_list_t));

122 
	}
}

124 
kØ_li°_node_t
 *
	$kØ_li°_push_‰⁄t
(
kØ_li°_t
 *
li°
, *
d©a
)

126 
	`KAA_RETURN_IF_NIL2
(
li°
, 
d©a
, 
NULL
);

127 
kØ_li°_node_t
 *
node
 = 
	`¸óã_node
(
d©a
);

128 
	`KAA_RETURN_IF_NIL
(
node
, 
NULL
);

130 ++
li°
->
size
;

131 
	`£t_√xt_√ighb‹
(
node
, 
li°
->
hód
);

133 
li°
->
hód
 = 
node
;

134 i‡(!
li°
->
èû
) {

135 
li°
->
èû
 = 
node
;

138  
node
;

139 
	}
}

141 
kØ_li°_node_t
 *
	$kØ_li°_push_back
(
kØ_li°_t
 *
li°
, *
d©a
)

143 
	`KAA_RETURN_IF_NIL
(
li°
, 
NULL
);

144 
kØ_li°_node_t
 *
node
 = 
	`¸óã_node
(
d©a
);

145 
	`KAA_RETURN_IF_NIL
(
node
, 
NULL
);

147 ++
li°
->
size
;

148 
	`£t_√xt_√ighb‹
(
li°
->
èû
, 
node
);

150 
li°
->
èû
 = 
node
;

151 i‡(!
li°
->
hód
) {

152 
li°
->
hód
 = 
node
;

155  
node
;

156 
	}
}

158 
kØ_li°_node_t
 *
	$kØ_li°_begö
(
kØ_li°_t
 *
li°
)

160 
	`KAA_RETURN_IF_NIL
(
li°
, 
NULL
);

161  
li°
->
hód
;

162 
	}
}

164 
kØ_li°_node_t
 *
	$kØ_li°_back
(
kØ_li°_t
 *
li°
)

166 
	`KAA_RETURN_IF_NIL
(
li°
, 
NULL
);

167  
li°
->
èû
;

168 
	}
}

170 
	$kØ_li°_˛ór
(
kØ_li°_t
 *
li°
, 
dóŒoˇã_li°_d©a
 
dóŒoˇt‹
)

172 
	`KAA_RETURN_IF_NIL2
(
li°
,Üi°->
size
, );

173 
kØ_li°_node_t
 *
ô
 = 
li°
->
hód
;

174 
ô
) {

175 
kØ_li°_node_t
 *
√xt
 = 
ô
->next;

176 
	`de°roy_node
(
ô
, 
dóŒoˇt‹
);

177 
ô
 = 
√xt
;

180 
	`ª£t_li°
(
li°
);

181 
	}
}

183 
	$kØ_li°_de°roy
(
kØ_li°_t
 *
li°
, 
dóŒoˇã_li°_d©a
 
dóŒoˇt‹
)

185 
	`KAA_RETURN_IF_NIL
(
li°
, );

186 
	`kØ_li°_˛ór
(
li°
, 
dóŒoˇt‹
);

187 
	`KAA_FREE
(
li°
);

188 
	}
}

190 
kØ_li°_node_t
 *
	$kØ_li°_ªmove_©
(
kØ_li°_t
 *
li°
, 
kØ_li°_node_t
 *
ô
, 
dóŒoˇã_li°_d©a
 
dóŒoˇt‹
)

192 
	`KAA_RETURN_IF_NIL3
(
li°
, 
ô
,Üi°->
size
, 
NULL
);

194 
kØ_li°_node_t
 *
√xt
 = 
ô
->next;

195 i‡(
li°
->
hód
 =
ô
) {

196 
li°
->
hód
 = 
√xt
;

198 i‡(
li°
->
èû
 =
ô
) {

199 
li°
->
èû
 = 
ô
->
¥ev
;

202 
	`£t_√xt_√ighb‹
(
ô
->
¥ev
, 
√xt
);

203 
	`de°roy_node
(
ô
, 
dóŒoˇt‹
);

204 --
li°
->
size
;

206  
√xt
;

207 
	}
}

209 
kØ_îr‹_t
 
	$kØ_li°_ªmove_fú°
(
kØ_li°_t
 *
li°
, 
m©ch_¥ediˇã
 
¥ed
, *
c⁄ãxt
, 
dóŒoˇã_li°_d©a
 
dóŒoˇt‹
)

211 
	`KAA_RETURN_IF_NIL3
(
li°
, 
¥ed
,Üi°->
size
, 
KAA_ERR_BADPARAM
);

213 
kØ_li°_node_t
 *
ô
 = 
	`kØ_li°_föd_√xt
(
	`kØ_li°_begö
(
li°
), 
¥ed
, 
c⁄ãxt
);

214 
	`kØ_li°_ªmove_©
(
li°
, 
ô
, 
dóŒoˇt‹
);

215  
ô
 ? 
KAA_ERR_NONE
 : 
KAA_ERR_NOT_FOUND
;

216 
	}
}

218 
	$kØ_li°_£t_d©a_©
(
kØ_li°_node_t
 *
ô
, *
d©a
, 
dóŒoˇã_li°_d©a
 
dóŒoˇt‹
)

220 
	`KAA_RETURN_IF_NIL
(
ô
, );

221 i‡(
dóŒoˇt‹
) {

222 
	`dóŒoˇt‹
(
ô
->
d©a
);

224 
	`KAA_FREE
(
ô
->
d©a
);

226 
ô
->
d©a
 = data;

227 
	}
}

229 
kØ_li°_node_t
 *
	$kØ_li°_föd_√xt
(
kØ_li°_node_t
 *
‰om
, 
m©ch_¥ediˇã
 
¥ed
, *
c⁄ãxt
)

231 
	`KAA_RETURN_IF_NIL2
(
‰om
, 
¥ed
, 
NULL
);

232 
‰om
) {

233 i‡(
	`¥ed
(
‰om
->
d©a
, 
c⁄ãxt
)) {

234  
‰om
;

236 
‰om
 = from->
√xt
;

238  
NULL
;

239 
	}
}

241 
	$kØ_li°_f‹_óch
(
kØ_li°_node_t
 *
fú°
, kØ_li°_node_à*
œ°
, 
¥o˚ss_d©a
 
¥o˚ss
, *
c⁄ãxt
)

243 
	`KAA_RETURN_IF_NIL3
(
fú°
, 
œ°
, 
¥o˚ss
, );

244 
fú°
) {

245 
	`¥o˚ss
(
fú°
->
d©a
, 
c⁄ãxt
);

246 i‡(
fú°
 =
œ°
) {

250 
fú°
 = 
	`kØ_li°_√xt
(first);

252 
	}
}

254 
kØ_li°_node_t
 *
kØ_•lô_utû
(kØ_li°_node_à*
hód
);

257 
kØ_li°_node_t
 *
	$kØ_mîge_utû
(
kØ_li°_node_t
 *
fú°
, kØ_li°_node_à*
£c⁄d
, 
m©ch_¥ediˇã
 
¥ed
)

259 
	`KAA_RETURN_IF_NIL
(
fú°
, 
£c⁄d
);

260 
	`KAA_RETURN_IF_NIL
(
£c⁄d
, 
fú°
);

262 i‡(
	`¥ed
(
fú°
->
d©a
, 
£c⁄d
->data)) {

264 
fú°
->
√xt
 = 
	`kØ_mîge_utû
(fú°->√xt, 
£c⁄d
, 
¥ed
);

265 
fú°
->
√xt
->
¥ev
 = first;

266 
fú°
->
¥ev
 = 
NULL
;

268  
fú°
;

270 
£c⁄d
->
√xt
 = 
	`kØ_mîge_utû
(
fú°
, sec⁄d->√xt, 
¥ed
);

271 
£c⁄d
->
√xt
->
¥ev
 = second;

272 
£c⁄d
->
¥ev
 = 
NULL
;

273  
£c⁄d
;

275 
	}
}

277 
kØ_li°_node_t
 *
	$kØ_mîge_s‹t
(
kØ_li°_node_t
 *
hód
, 
m©ch_¥ediˇã
 
¥ed
)

279 
	`KAA_RETURN_IF_NIL2
(
hód
, hód->
√xt
, head);

281 
kØ_li°_node_t
 *
£c⁄d
 = 
	`kØ_•lô_utû
(
hód
);

283 
hód
 = 
	`kØ_mîge_s‹t
(hód, 
¥ed
);

284 
£c⁄d
 = 
	`kØ_mîge_s‹t
(£c⁄d, 
¥ed
);

286 
hód
 = 
	`kØ_mîge_utû
(hód, 
£c⁄d
, 
¥ed
);

287  
hód
;

288 
	}
}

290 
kØ_li°_node_t
 *
	$kØ_•lô_utû
–
kØ_li°_node_t
 *
hód
)

292 
kØ_li°_node_t
 *
Á°
 = 
hód
;

293 
kØ_li°_node_t
 *
¶ow
 = 
hód
;

294 
Á°
->
√xt
 && fast->next->next) {

295 
Á°
 = fa°->
√xt
->next;

296 
¶ow
 = slow->
√xt
;

298 
kØ_li°_node_t
 *
ãmp
 = 
¶ow
->
√xt
;

299 
¶ow
->
√xt
 = 
NULL
;

300  
ãmp
;

301 
	}
}

303 
	$kØ_li°_s‹t
(
kØ_li°_t
 *
li°
, 
m©ch_¥ediˇã
 
¥ed
)

305 
	`KAA_RETURN_IF_NIL
(
li°
->
size
,);

306 
kØ_li°_node_t
 *
node
 = 
	`kØ_mîge_s‹t
(
	`kØ_li°_begö
(
li°
), 
¥ed
);

307 
li°
->
hód
 = 
node
;

308 
node
->
√xt
) {

309 
node
 =Çode->
√xt
;

311 
li°
->
èû
 = 
node
;

312 
	}
}

314 
öt32_t
 
	$kØ_li°_hash
(
kØ_li°_t
 *
li°
, 
li°_node_hash
 
¥ed
)

316 
	`KAA_RETURN_IF_NIL2
(
li°
, 
¥ed
, 0);

317 
uöt32_t
 
ªsu…
 = 1;

318 
kØ_li°_node_t
 *
node
 = 
	`kØ_li°_begö
(
li°
);

319 
node
) {

320 
uöt64_t
 
ñemít
 = 
	`¥ed
(
node
->
d©a
);

321 
ªsu…
 = 31 *Ñesu… + (
uöt32_t
Ë(
ñemít
 ^ (element >> 32));

322 
node
 =Çode->
√xt
;

324  (
öt32_t
Ë
ªsu…
;

325 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/collections/kaa_list.h

17 #i‚de‡
KAA_LIST_H_


18 
	#KAA_LIST_H_


	)

20 #ifde‡
__˝lu•lus


24 
	~<°dboﬁ.h
>

25 
	~<°ddef.h
>

27 
	~"kØ_îr‹.h
"

29 
kØ_li°_node_t
 
	tkØ_li°_node_t
;

30 
kØ_li°_t
 
	tkØ_li°_t
;

35 
boﬁ
 (*
	tm©ch_¥ediˇã
)(*
	td©a
, *
	tc⁄ãxt
);

40 (*
dóŒoˇã_li°_d©a
)(*);

45 
uöt64_t
 
	tli°_node_hash
(* 
	tôem
);

50 (*
¥o˚ss_d©a
)(*
	td©a
, *
	tc⁄ãxt
);

56 
kØ_li°_t
 *
kØ_li°_¸óã
();

61 
kØ_li°_de°roy
(
kØ_li°_t
 *
li°
, 
dóŒoˇã_li°_d©a
 
dóŒoˇt‹
);

66 
kØ_li°_˛ór
(
kØ_li°_t
 *
li°
, 
dóŒoˇã_li°_d©a
 
dóŒoˇt‹
);

73 
size_t
 
kØ_li°_gë_size
(
kØ_li°_t
 *
li°
);

80 
kØ_li°_node_t
 *
kØ_li°_push_‰⁄t
(
kØ_li°_t
 *
li°
, *
d©a
);

87 
kØ_li°_node_t
 *
kØ_li°_push_back
(
kØ_li°_t
 *
li°
, *
d©a
);

94 
kØ_li°_node_t
 *
kØ_li°_begö
(
kØ_li°_t
 *
li°
);

101 
kØ_li°_node_t
 *
kØ_li°_back
(
kØ_li°_t
 *
li°
);

108 
kØ_li°_node_t
 *
kØ_li°_√xt
(kØ_li°_node_à*
ô
);

115 
kØ_li°_node_t
 *
kØ_li°_¥ev
(kØ_li°_node_à*
ô
);

122 *
kØ_li°_gë_d©a
(
kØ_li°_node_t
 *
ô
);

127 
kØ_li°_£t_d©a_©
(
kØ_li°_node_t
 *
ô
, *
d©a
, 
dóŒoˇã_li°_d©a
 
dóŒoˇt‹
);

133 
kØ_li°_node_t
 *
kØ_li°_föd_√xt
(kØ_li°_node_à*
‰om
, 
m©ch_¥ediˇã
 
¥ed
, *
c⁄ãxt
);

140 
kØ_li°_t
 *
kØ_li°s_mîge
(kØ_li°_à*
de°ö©i⁄
, kØ_li°_à*
sour˚
);

146 
kØ_li°_node_t
 *
kØ_li°_ªmove_©
(
kØ_li°_t
 *
li°
, kØ_li°_node_à*
ô
, 
dóŒoˇã_li°_d©a
 
dóŒoˇt‹
);

152 
kØ_îr‹_t
 
kØ_li°_ªmove_fú°
(
kØ_li°_t
 *
li°
, 
m©ch_¥ediˇã
 
¥ed
, *
c⁄ãxt
, 
dóŒoˇã_li°_d©a
 
dóŒoˇt‹
);

157 
kØ_li°_f‹_óch
(
kØ_li°_node_t
 *
fú°
, kØ_li°_node_à*
œ°
, 
¥o˚ss_d©a
 
¥o˚ss
, *
c⁄ãxt
);

164 
kØ_li°_s‹t
(
kØ_li°_t
 *
li°
, 
m©ch_¥ediˇã
 
¥ed
);

171 
öt32_t
 
kØ_li°_hash
(
kØ_li°_t
 *
li°
, 
li°_node_hash
 
¥ed
);

173 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/gen/kaa_configuration_definitions.h

17 #i‚de‡
KAA_CONFIGURATION_DEFINITIONS_H_


18 
	#KAA_CONFIGURATION_DEFINITIONS_H_


	)

20 
	~"kØ_c⁄figuøti⁄_gí.h
"

22 #ifde‡
__˝lu•lus


26 
kØ_c⁄figuøti⁄_c⁄figuøti⁄_t
 
	tkØ_roŸ_c⁄figuøti⁄_t
;

27 
	#KAA_CONFIGURATION_DESERIALIZE
(
ªadî
Ë
	`kØ_c⁄figuøti⁄_c⁄figuøti⁄_de£rülize
‘ódî)

	)

29 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/gen/kaa_configuration_gen.c

17 
	~<öây≥s.h
>

18 
	~<°rög.h
>

19 
	~"∂©f‹m/°dio.h
"

20 
	~"kØ_c⁄figuøti⁄_gí.h
"

21 
	~"avro_§c/avro/io.h
"

22 
	~"avro_§c/ícodög.h
"

23 
	~"utûôõs/kØ_mem.h
"

32 
	$kØ_c⁄figuøti⁄_c⁄figuøti⁄_£rülize
(
avro_wrôî_t
 
wrôî
, *
d©a
)

34 i‡(
d©a
) {

35 
kØ_c⁄figuøti⁄_c⁄figuøti⁄_t
 *
ªc‹d
 = (kØ_c⁄figuøti⁄_c⁄figuøti⁄_à*)
d©a
;

37 
	`kØ_öt_£rülize
(
wrôî
, &
ªc‹d
->
ßm∂e_≥riod
);

39 
	}
}

41 
size_t
 
	$kØ_c⁄figuøti⁄_c⁄figuøti⁄_gë_size
(*
d©a
)

43 i‡(
d©a
) {

44 
size_t
 
ªc‹d_size
 = 0;

45 
kØ_c⁄figuøti⁄_c⁄figuøti⁄_t
 *
ªc‹d
 = (kØ_c⁄figuøti⁄_c⁄figuøti⁄_à*)
d©a
;

47 
ªc‹d_size
 +
	`kØ_öt_gë_size
(&
ªc‹d
->
ßm∂e_≥riod
);

49  
ªc‹d_size
;

53 
	}
}

55 
kØ_c⁄figuøti⁄_c⁄figuøti⁄_t
 *
	$kØ_c⁄figuøti⁄_c⁄figuøti⁄_¸óã
()

57 
kØ_c⁄figuøti⁄_c⁄figuøti⁄_t
 *
ªc‹d
 =

58 (
kØ_c⁄figuøti⁄_c⁄figuøti⁄_t
 *)
	`KAA_CALLOC
(1, (kaa_configuration_configuration_t));

60 i‡(
ªc‹d
) {

61 
ªc‹d
->
£rülize
 = 
kØ_c⁄figuøti⁄_c⁄figuøti⁄_£rülize
;

62 
ªc‹d
->
gë_size
 = 
kØ_c⁄figuøti⁄_c⁄figuøti⁄_gë_size
;

63 
ªc‹d
->
de°roy
 = 
kØ_d©a_de°roy
;

66  
ªc‹d
;

67 
	}
}

69 
kØ_c⁄figuøti⁄_c⁄figuøti⁄_t
 *
	$kØ_c⁄figuøti⁄_c⁄figuøti⁄_de£rülize
(
avro_ªadî_t
 
ªadî
)

71 
kØ_c⁄figuøti⁄_c⁄figuøti⁄_t
 *
ªc‹d
 =

72 (
kØ_c⁄figuøti⁄_c⁄figuøti⁄_t
 *)
	`KAA_MALLOC
((kaa_configuration_configuration_t));

74 i‡(
ªc‹d
) {

75 
ªc‹d
->
£rülize
 = 
kØ_c⁄figuøti⁄_c⁄figuøti⁄_£rülize
;

76 
ªc‹d
->
gë_size
 = 
kØ_c⁄figuøti⁄_c⁄figuøti⁄_gë_size
;

77 
ªc‹d
->
de°roy
 = 
kØ_d©a_de°roy
;

79 
avro_bö¨y_ícodög
.
	`ªad_öt
(
ªadî
, &
ªc‹d
->
ßm∂e_≥riod
);

82  
ªc‹d
;

83 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/gen/kaa_configuration_gen.h

17 #i‚de‡
KAA_CONFIGURATION_GEN_H_


18 
	#KAA_CONFIGURATION_GEN_H_


	)

20 
	~"kØ_comm⁄_schema.h
"

21 
	~"cﬁÀ˘i⁄s/kØ_li°.h
"

23 #ifde‡
__˝lu•lus


30 
öt32_t
 
ßm∂e_≥riod
;

32 
£rülize_‚
 
£rülize
;

33 
gë_size_‚
 
gë_size
;

34 
de°roy_‚
 
de°roy
;

35 } 
	tkØ_c⁄figuøti⁄_c⁄figuøti⁄_t
;

37 
kØ_c⁄figuøti⁄_c⁄figuøti⁄_t
 *
kØ_c⁄figuøti⁄_c⁄figuøti⁄_¸óã
();

38 
kØ_c⁄figuøti⁄_c⁄figuøti⁄_t
 *
kØ_c⁄figuøti⁄_c⁄figuøti⁄_de£rülize
(
avro_ªadî_t
 
ªadî
);

40 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/gen/kaa_event_fqn_definitions.h

23 #i‚de‡
KAA_FQN_DEFINITIONS_


24 
	#KAA_FQN_DEFINITIONS_


	)

27 *
	mecf_«me
;

28 
size_t
 
	msuµ‹ãd_öcomög_fqns_cou¡
;

29 **
	msuµ‹ãd_öcomög_fqns
;

30 } 
	tevít_˛ass_Ámûy_t
;

32 c⁄° *
	gTe°EvítFamûyFQNS
[8] = {

43 
	#SUPPORTED_EVENT_CLASS_FAMILIES_SIZE
 1

	)

45 c⁄° 
evít_˛ass_Ámûy_t
 
	gSUPPORTED_EVENT_CLASS_FAMILIES
[
SUPPORTED_EVENT_CLASS_FAMILIES_SIZE
] =

50  (**)
Te°EvítFamûyFQNS


	@/var/www/html/debian/gateway/kaa/src/kaa/gen/kaa_logging_definitions.h

17 #i‚de‡
KAA_LOGGING_DEFINITIONS_H_


18 
	#KAA_LOGGING_DEFINITIONS_H_


	)

20 
	~"kØ_loggög_gí.h
"

22 #ifde‡
__˝lu•lus


29 
kØ_loggög_d©a_cﬁÀ˘i⁄_t
 
	tkØ_u£r_log_ªc‹d_t
;

31 
	#KAA_LOGGING_DESERIALIZE
(
ªadî
Ë
	`kØ_loggög_d©a_cﬁÀ˘i⁄_de£rülize
‘ódî)

	)

33 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/gen/kaa_logging_gen.c

17 
	~<öây≥s.h
>

18 
	~<°rög.h
>

19 
	~"∂©f‹m/°dio.h
"

20 
	~"kØ_loggög_gí.h
"

21 
	~"avro_§c/avro/io.h
"

22 
	~"avro_§c/ícodög.h
"

23 
	~"utûôõs/kØ_mem.h
"

32 
	$kØ_loggög_d©a_cﬁÀ˘i⁄_£rülize
(
avro_wrôî_t
 
wrôî
, *
d©a
)

34 i‡(
d©a
) {

35 
kØ_loggög_d©a_cﬁÀ˘i⁄_t
 *
ªc‹d
 = (kØ_loggög_d©a_cﬁÀ˘i⁄_à*)
d©a
;

37 
	`kØ_öt_£rülize
(
wrôî
, &
ªc‹d
->
ãm≥øtuª
);

39 
	}
}

41 
size_t
 
	$kØ_loggög_d©a_cﬁÀ˘i⁄_gë_size
(*
d©a
)

43 i‡(
d©a
) {

44 
size_t
 
ªc‹d_size
 = 0;

45 
kØ_loggög_d©a_cﬁÀ˘i⁄_t
 *
ªc‹d
 = (kØ_loggög_d©a_cﬁÀ˘i⁄_à*)
d©a
;

47 
ªc‹d_size
 +
	`kØ_öt_gë_size
(&
ªc‹d
->
ãm≥øtuª
);

49  
ªc‹d_size
;

53 
	}
}

55 
kØ_loggög_d©a_cﬁÀ˘i⁄_t
 *
	$kØ_loggög_d©a_cﬁÀ˘i⁄_¸óã
()

57 
kØ_loggög_d©a_cﬁÀ˘i⁄_t
 *
ªc‹d
 =

58 (
kØ_loggög_d©a_cﬁÀ˘i⁄_t
 *)
	`KAA_CALLOC
(1, (kaa_logging_data_collection_t));

60 i‡(
ªc‹d
) {

61 
ªc‹d
->
£rülize
 = 
kØ_loggög_d©a_cﬁÀ˘i⁄_£rülize
;

62 
ªc‹d
->
gë_size
 = 
kØ_loggög_d©a_cﬁÀ˘i⁄_gë_size
;

63 
ªc‹d
->
de°roy
 = 
kØ_d©a_de°roy
;

66  
ªc‹d
;

67 
	}
}

69 
kØ_loggög_d©a_cﬁÀ˘i⁄_t
 *
	$kØ_loggög_d©a_cﬁÀ˘i⁄_de£rülize
(
avro_ªadî_t
 
ªadî
)

71 
kØ_loggög_d©a_cﬁÀ˘i⁄_t
 *
ªc‹d
 =

72 (
kØ_loggög_d©a_cﬁÀ˘i⁄_t
 *)
	`KAA_MALLOC
((kaa_logging_data_collection_t));

74 i‡(
ªc‹d
) {

75 
ªc‹d
->
£rülize
 = 
kØ_loggög_d©a_cﬁÀ˘i⁄_£rülize
;

76 
ªc‹d
->
gë_size
 = 
kØ_loggög_d©a_cﬁÀ˘i⁄_gë_size
;

77 
ªc‹d
->
de°roy
 = 
kØ_d©a_de°roy
;

79 
avro_bö¨y_ícodög
.
	`ªad_öt
(
ªadî
, &
ªc‹d
->
ãm≥øtuª
);

82  
ªc‹d
;

83 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/gen/kaa_logging_gen.h

17 #i‚de‡
KAA_LOGGING_GEN_H_


18 
	#KAA_LOGGING_GEN_H_


	)

20 
	~"kØ_comm⁄_schema.h
"

21 
	~"cﬁÀ˘i⁄s/kØ_li°.h
"

23 #ifde‡
__˝lu•lus


30 
öt32_t
 
ãm≥øtuª
;

32 
£rülize_‚
 
£rülize
;

33 
gë_size_‚
 
gë_size
;

34 
de°roy_‚
 
de°roy
;

35 } 
	tkØ_loggög_d©a_cﬁÀ˘i⁄_t
;

37 
kØ_loggög_d©a_cﬁÀ˘i⁄_t
 *
kØ_loggög_d©a_cﬁÀ˘i⁄_¸óã
();

38 
kØ_loggög_d©a_cﬁÀ˘i⁄_t
 *
kØ_loggög_d©a_cﬁÀ˘i⁄_de£rülize
(
avro_ªadî_t
 
ªadî
);

40 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/gen/kaa_notification_definitions.h

17 #i‚de‡
KAA_NOTIFICATION_DEFINITIONS_H_


18 
	#KAA_NOTIFICATION_DEFINITIONS_H_


	)

20 
	~"kØ_nŸifiˇti⁄_gí.h
"

22 #ifde‡
__˝lu•lus


26 
kØ_nŸifiˇti⁄_em±y_d©a_t
 
	tkØ_nŸifiˇti⁄_t
;

27 
	#KAA_NOTIFICATION_DESERIALIZE
(
ªadî
Ë
	`kØ_nŸifiˇti⁄_em±y_d©a_de£rülize
‘ódî)

	)

29 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/gen/kaa_notification_gen.c

17 
	~<öây≥s.h
>

18 
	~<°rög.h
>

19 
	~"∂©f‹m/°dio.h
"

20 
	~"kØ_nŸifiˇti⁄_gí.h
"

21 
	~"avro_§c/avro/io.h
"

22 
	~"avro_§c/ícodög.h
"

23 
	~"utûôõs/kØ_mem.h
"

33 
kØ_nŸifiˇti⁄_em±y_d©a_t
 *
	$kØ_nŸifiˇti⁄_em±y_d©a_¸óã
()

35 
kØ_nŸifiˇti⁄_em±y_d©a_t
 *
ªc‹d
 =

36 (
kØ_nŸifiˇti⁄_em±y_d©a_t
 *)
	`KAA_CALLOC
(1, (kaa_notification_empty_data_t));

38 i‡(
ªc‹d
) {

39 
ªc‹d
->
£rülize
 = 
kØ_nuŒ_£rülize
;

40 
ªc‹d
->
gë_size
 = 
kØ_nuŒ_gë_size
;

41 
ªc‹d
->
de°roy
 = 
kØ_d©a_de°roy
;

44  
ªc‹d
;

45 
	}
}

47 
kØ_nŸifiˇti⁄_em±y_d©a_t
 *
	$kØ_nŸifiˇti⁄_em±y_d©a_de£rülize
(
avro_ªadî_t
 
ªadî
)

49 
kØ_nŸifiˇti⁄_em±y_d©a_t
 *
ªc‹d
 =

50 (
kØ_nŸifiˇti⁄_em±y_d©a_t
 *)
	`KAA_MALLOC
((kaa_notification_empty_data_t));

52 i‡(
ªc‹d
) {

53 
ªc‹d
->
£rülize
 = 
kØ_nuŒ_£rülize
;

54 
ªc‹d
->
gë_size
 = 
kØ_nuŒ_gë_size
;

55 
ªc‹d
->
de°roy
 = 
kØ_d©a_de°roy
;

59  
ªc‹d
;

60 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/gen/kaa_notification_gen.h

17 #i‚de‡
KAA_NOTIFICATION_GEN_H_


18 
	#KAA_NOTIFICATION_GEN_H_


	)

20 
	~"kØ_comm⁄_schema.h
"

21 
	~"cﬁÀ˘i⁄s/kØ_li°.h
"

23 #ifde‡
__˝lu•lus


31 
£rülize_‚
 
£rülize
;

32 
gë_size_‚
 
gë_size
;

33 
de°roy_‚
 
de°roy
;

34 } 
	tkØ_nŸifiˇti⁄_em±y_d©a_t
;

36 
kØ_nŸifiˇti⁄_em±y_d©a_t
 *
kØ_nŸifiˇti⁄_em±y_d©a_¸óã
();

37 
kØ_nŸifiˇti⁄_em±y_d©a_t
 *
kØ_nŸifiˇti⁄_em±y_d©a_de£rülize
(
avro_ªadî_t
 
ªadî
);

39 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/gen/kaa_profile_definitions.h

17 #i‚de‡
KAA_PROFILE_DEFINITIONS_H_


18 
	#KAA_PROFILE_DEFINITIONS_H_


	)

20 
	~"kØ_¥ofûe_gí.h
"

22 #ifde‡
__˝lu•lus


29 
kØ_¥ofûe_em±y_d©a_t
 
	tkØ_¥ofûe_t
;

31 
	#KAA_PROFILE_DESERIALIZE
(
ªadî
Ë
	`kØ_¥ofûe_em±y_d©a_de£rülize
‘ódî)

	)

33 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/gen/kaa_profile_gen.c

17 
	~<öây≥s.h
>

18 
	~<°rög.h
>

19 
	~"∂©f‹m/°dio.h
"

20 
	~"kØ_¥ofûe_gí.h
"

21 
	~"avro_§c/avro/io.h
"

22 
	~"avro_§c/ícodög.h
"

23 
	~"utûôõs/kØ_mem.h
"

33 
kØ_¥ofûe_em±y_d©a_t
 *
	$kØ_¥ofûe_em±y_d©a_¸óã
()

35 
kØ_¥ofûe_em±y_d©a_t
 *
ªc‹d
 =

36 (
kØ_¥ofûe_em±y_d©a_t
 *)
	`KAA_CALLOC
(1, (kaa_profile_empty_data_t));

38 i‡(
ªc‹d
) {

39 
ªc‹d
->
£rülize
 = 
kØ_nuŒ_£rülize
;

40 
ªc‹d
->
gë_size
 = 
kØ_nuŒ_gë_size
;

41 
ªc‹d
->
de°roy
 = 
kØ_d©a_de°roy
;

44  
ªc‹d
;

45 
	}
}

47 
kØ_¥ofûe_em±y_d©a_t
 *
	$kØ_¥ofûe_em±y_d©a_de£rülize
(
avro_ªadî_t
 
ªadî
)

49 
kØ_¥ofûe_em±y_d©a_t
 *
ªc‹d
 =

50 (
kØ_¥ofûe_em±y_d©a_t
 *)
	`KAA_MALLOC
((kaa_profile_empty_data_t));

52 i‡(
ªc‹d
) {

53 
ªc‹d
->
£rülize
 = 
kØ_nuŒ_£rülize
;

54 
ªc‹d
->
gë_size
 = 
kØ_nuŒ_gë_size
;

55 
ªc‹d
->
de°roy
 = 
kØ_d©a_de°roy
;

59  
ªc‹d
;

60 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/gen/kaa_profile_gen.h

17 #i‚de‡
KAA_PROFILE_GEN_H_


18 
	#KAA_PROFILE_GEN_H_


	)

20 
	~"kØ_comm⁄_schema.h
"

21 
	~"cﬁÀ˘i⁄s/kØ_li°.h
"

23 #ifde‡
__˝lu•lus


31 
£rülize_‚
 
£rülize
;

32 
gë_size_‚
 
gë_size
;

33 
de°roy_‚
 
de°roy
;

34 } 
	tkØ_¥ofûe_em±y_d©a_t
;

36 
kØ_¥ofûe_em±y_d©a_t
 *
kØ_¥ofûe_em±y_d©a_¸óã
();

37 
kØ_¥ofûe_em±y_d©a_t
 *
kØ_¥ofûe_em±y_d©a_de£rülize
(
avro_ªadî_t
 
ªadî
);

39 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/kaa.c

17 
	~"kØ_¥iv©e.h
"

19 
	~<°ddef.h
>

20 
	~<°dboﬁ.h
>

21 
	~<°döt.h
>

22 
	~"∂©f‹m/°dio.h
"

23 
	~"∂©f‹m/ext_sha.h
"

24 
	~"kØ_°©us.h
"

25 
	~"kØ.h
"

26 
	~"utûôõs/kØ_mem.h
"

27 
	~"utûôõs/kØ_log.h
"

29 
	~"kØ_ch™√l_m™agî.h
"

30 
	~"kØ_deÁu…s.h
"

31 
	~"∂©f‹m/ext_key_utûs.h
"

33 #ifde‡
KAA_ENCRYPTION


34 
	~"∂©f‹m/ext_í¸y±i⁄_utûs.h
"

37 
	~<kØ_exãnsi⁄.h
>

39 #i‚de‡
KAA_DISABLE_FEATURE_PROFILE


40 
	~"kØ_¥ofûe_¥iv©e.h
"

43 
kØ_îr‹_t
 
kØ_c⁄ãxt_de°roy
(
kØ_c⁄ãxt_t
 *
c⁄ãxt
);

45 
kØ_îr‹_t
 
	$kØ_c⁄ãxt_¸óã
(
kØ_c⁄ãxt_t
 **
c⁄ãxt_p
, 
kØ_loggî_t
 *
loggî
)

48 i‡(!
c⁄ãxt_p
 || !
loggî
) {

49  
KAA_ERR_BADPARAM
;

52 
kØ_c⁄ãxt_t
 *
c⁄ãxt
 = 
	`KAA_CALLOC
(1, (*context));

53 i‡(!
c⁄ãxt
) {

54  
KAA_ERR_NOMEM
;

57 
c⁄ãxt
->
loggî
 =Üogger;

59 
kØ_îr‹_t
 
îr‹
 = 
KAA_ERR_NONE
;

60 
c⁄ãxt
->
°©us
 = 
	`KAA_CALLOC
(1, (*context->status));

61 i‡(!
c⁄ãxt
->
°©us
) {

62 
îr‹
 = 
KAA_ERR_NOMEM
;

63 
exô
;

66 
îr‹
 = 
	`kØ_°©us_¸óã
(&
c⁄ãxt
->
°©us
->
°©us_ö°™˚
);

67 i‡(
îr‹
) {

68 
exô
;

71 
îr‹
 = 
	`kØ_∂©f‹m_¥Ÿocﬁ_¸óã
(&
c⁄ãxt
->
∂©f‹m_¥Ÿocﬁ
, c⁄ãxt->
loggî
,

72 
c⁄ãxt
->
°©us
->
°©us_ö°™˚
);

73 i‡(
îr‹
) {

74 
exô
;

77 
îr‹
 = 
	`kØ_ch™√l_m™agî_¸óã
(&
c⁄ãxt
->
ch™√l_m™agî
, context);

78 i‡(
îr‹
) {

79 
exô
;

82 
îr‹
 = 
	`kØ_exãnsi⁄_öô_Æl
(
c⁄ãxt
);

83 i‡(
îr‹
) {

84 
exô
;

87 
îr‹
 = 
	`kØ_Áûovî_°øãgy_¸óã
(&
c⁄ãxt
->
Áûovî_°øãgy
, 
loggî
);

88 i‡(
îr‹
) {

89 
exãnsi⁄s_deöô
;

92 *
c⁄ãxt_p
 = 
c⁄ãxt
;

94  
KAA_ERR_NONE
;

96 
exãnsi⁄s_deöô
:

97 
	`kØ_exãnsi⁄_deöô_Æl
();

99 
exô
:

100 
	`kØ_c⁄ãxt_de°roy
(
c⁄ãxt
);

102  
îr‹
;

103 
	}
}

105 
kØ_îr‹_t
 
	$kØ_c⁄ãxt_de°roy
(
kØ_c⁄ãxt_t
 *
c⁄ãxt
)

107 
	`KAA_RETURN_IF_NIL
(
c⁄ãxt
, 
KAA_ERR_BADPARAM
);

109 
	`kØ_ch™√l_m™agî_de°roy
(
c⁄ãxt
->
ch™√l_m™agî
);

110 
	`kØ_°©us_de°roy
(
c⁄ãxt
->
°©us
->
°©us_ö°™˚
);

111 
	`kØ_Áûovî_°øãgy_de°roy
(
c⁄ãxt
->
Áûovî_°øãgy
);

112 
	`KAA_FREE
(
c⁄ãxt
->
°©us
);

113 
	`kØ_∂©f‹m_¥Ÿocﬁ_de°roy
(
c⁄ãxt
->
∂©f‹m_¥Ÿocﬁ
);

114 
	`KAA_FREE
(
c⁄ãxt
);

115  
KAA_ERR_NONE
;

116 
	}
}

118 
kØ_îr‹_t
 
	$kØ_öô_keys
()

120 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_öô_rß_key∑ú
();

121 i‡(
îr‹
) {

122  
îr‹
;

124 #ifde‡
KAA_ENCRYPTION


125 
îr‹
 = 
	`kØ_öô_£ssi⁄_key
();

126 i‡(
îr‹
) {

127  
îr‹
;

130  
îr‹
;

131 
	}
}

133 
	$kØ_deöô_keys
()

135 
	`kØ_deöô_rß_key∑ú
();

136 
	}
}

138 
kØ_îr‹_t
 
	$kØ_öô
(
kØ_c⁄ãxt_t
 **
kØ_c⁄ãxt_p
)

140 
	`KAA_RETURN_IF_NIL
(
kØ_c⁄ãxt_p
, 
KAA_ERR_BADPARAM
);

143 
kØ_loggî_t
 *
loggî
 = 
NULL
;

144 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_log_¸óã
(&
loggî
, 
KAA_MAX_LOG_MESSAGE_LENGTH
, 
KAA_MAX_LOG_LEVEL
, 
NULL
);

145 i‡(
îr‹
) {

146  
îr‹
;

149 
	`KAA_LOG_INFO
(
loggî
, 
KAA_ERR_NONE
, "KØ SDK vîsi⁄ %s, commô hash %s", 
KAA_BUILD_VERSION
, 
KAA_BUILD_COMMIT_HASH
);

152 
îr‹
 = 
	`kØ_c⁄ãxt_¸óã
(
kØ_c⁄ãxt_p
, 
loggî
);

153 i‡(
îr‹
) {

154 
	`KAA_LOG_FATAL
(
loggî
, 
îr‹
, "FailedÅo create Kaa context");

155 *
kØ_c⁄ãxt_p
 = 
NULL
;

156  
îr‹
;

160 
uöt8_t
 *
sha1
 = 
NULL
;

161 
size_t
 
sha1_size
 = 0;

163 
îr‹
 = 
	`kØ_öô_keys
();

164 i‡(
îr‹
) {

165 
	`KAA_LOG_ERROR
(
loggî
, 
îr‹
, "FailedÅo initialize keys");

166  
îr‹
;

169 
	`ext_gë_sha1_public
(&
sha1
, &
sha1_size
);

170 
	`ext_c›y_sha_hash
((*
kØ_c⁄ãxt_p
)->
°©us
->
°©us_ö°™˚
->
ídpoöt_public_key_hash
, 
sha1
);

172  
	`kØ_°©us_£t_upd©ed
((*
kØ_c⁄ãxt_p
)->
°©us
->
°©us_ö°™˚
, 
åue
);

173 
	}
}

175 
kØ_îr‹_t
 
	$kØ_°¨t
(
kØ_c⁄ãxt_t
 *
kØ_c⁄ãxt
)

177 
	`KAA_RETURN_IF_NIL
(
kØ_c⁄ãxt
, 
KAA_ERR_BADPARAM
);

179 
	`KAA_LOG_INFO
(
kØ_c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
, "GoingÅo start KaaÉndpoint");

181 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
boŸ°øp_ch™√l
 = 
	`kØ_ch™√l_m™agî_gë_å™•‹t_ch™√l
(

182 
kØ_c⁄ãxt
->
ch™√l_m™agî
, 
KAA_EXTENSION_BOOTSTRAP
);

183 i‡(
boŸ°øp_ch™√l
) {

184 c⁄° 
kØ_exãnsi⁄_id
 
boŸ°øp_£rvi˚
[] = { 
KAA_EXTENSION_BOOTSTRAP
 };

185 
kØ_îr‹_t
 
îr‹
 = 
boŸ°øp_ch™√l
->
	`sync_h™dÀr
(boŸ°øp_ch™√l->
c⁄ãxt
, 
boŸ°øp_£rvi˚
, 1);

186 i‡(
îr‹
) {

187 
	`KAA_LOG_ERROR
(
kØ_c⁄ãxt
->
loggî
, 
îr‹
, "FailedÅo sync Bootstrap service. TryágainÜater");

188  
îr‹
;

191 
	`KAA_LOG_FATAL
(
kØ_c⁄ãxt
->
loggî
, 
KAA_ERR_NOT_FOUND
, "CouldÇot find BootstrapÅransport channel");

192  
KAA_ERR_NOT_FOUND
;

195  
KAA_ERR_NONE
;

196 
	}
}

198 
kØ_îr‹_t
 
	$kØ_°›
(
kØ_c⁄ãxt_t
 *
kØ_c⁄ãxt
)

200 
	`KAA_RETURN_IF_NIL
(
kØ_c⁄ãxt
, 
KAA_ERR_BADPARAM
);

201  
	`kØ_°©us_ßve
(
kØ_c⁄ãxt
->
°©us
->
°©us_ö°™˚
);

202 
	}
}

204 
kØ_îr‹_t
 
	$kØ_deöô
(
kØ_c⁄ãxt_t
 *
kØ_c⁄ãxt
)

206 
	`KAA_RETURN_IF_NIL
(
kØ_c⁄ãxt
, 
KAA_ERR_BADPARAM
);

208 
kØ_loggî_t
 *
loggî
 = 
kØ_c⁄ãxt
->logger;

209 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_c⁄ãxt_de°roy
(
kØ_c⁄ãxt
);

210 i‡(
îr‹
) {

211 
	`KAA_LOG_ERROR
(
loggî
, 
îr‹
, "FailedÅo destroy Kaa context");

213 
	`kØ_log_de°roy
(
loggî
);

214 
	`kØ_deöô_keys
();

215  
îr‹
;

216 
	}
}

218 
boﬁ
 
	$kØ_¥o˚ss_Áûovî
(
kØ_c⁄ãxt_t
 *
kØ_c⁄ãxt
)

220 
	`KAA_RETURN_IF_NIL
(
kØ_c⁄ãxt
, 
Ál£
);

221  
	`kØ_boŸ°øp_m™agî_¥o˚ss_Áûovî
(
kØ_c⁄ãxt
->
boŸ°øp_m™agî
);

222 
	}
}

224 
kØ_îr‹_t
 
	$kØ_c⁄ãxt_£t_°©us_ªgi°îed
(
kØ_c⁄ãxt_t
 *
kØ_c⁄ãxt
, 
boﬁ
 
is_ªgi°îed
)

226 
	`KAA_RETURN_IF_NIL
(
kØ_c⁄ãxt
, 
KAA_ERR_BADPARAM
);

227  
	`kØ_°©us_£t_ªgi°îed
(
kØ_c⁄ãxt
->
°©us
->
°©us_ö°™˚
, 
is_ªgi°îed
);

228 
	}
}

230 
kØ_îr‹_t
 
	$kØ_check_ªadöess
(
kØ_c⁄ãxt_t
 *
kØ_c⁄ãxt
)

232 
	`KAA_RETURN_IF_NIL
(
kØ_c⁄ãxt
, 
KAA_ERR_BADPARAM
);

234 #i‚de‡
KAA_DISABLE_FEATURE_PROFILE


235 i‡(!
	`kØ_¥ofûe_m™agî_is_¥ofûe_£t
(
kØ_c⁄ãxt
->
¥ofûe_m™agî
)) {

236 
	`KAA_LOG_ERROR
(
kØ_c⁄ãxt
->
loggî
, 
KAA_ERR_PROFILE_IS_NOT_SET
, "Profile isn't set");

237  
KAA_ERR_PROFILE_IS_NOT_SET
;

241  
KAA_ERR_NONE
;

242 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/kaa.h

24 #i‚de‡
KAA_H_


25 
	#KAA_H_


	)

27 
	~<°dboﬁ.h
>

28 
	~"kØ_c⁄ãxt.h
"

29 
	~"kØ_îr‹.h
"

31 #ifde‡
__˝lu•lus


46 
kØ_îr‹_t
 
kØ_öô
(
kØ_c⁄ãxt_t
 **
kØ_c⁄ãxt_p
);

59 
kØ_îr‹_t
 
kØ_°¨t
(
kØ_c⁄ãxt_t
 *
kØ_c⁄ãxt
);

70 
kØ_îr‹_t
 
kØ_°›
(
kØ_c⁄ãxt_t
 *
kØ_c⁄ãxt
);

82 
kØ_îr‹_t
 
kØ_deöô
(
kØ_c⁄ãxt_t
 *
kØ_c⁄ãxt
);

93 
boﬁ
 
kØ_¥o˚ss_Áûovî
(
kØ_c⁄ãxt_t
 *
kØ_c⁄ãxt
);

104 
kØ_îr‹_t
 
kØ_check_ªadöess
(
kØ_c⁄ãxt_t
 *
kØ_c⁄ãxt
);

106 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/kaa_channel_manager.c

17 
	~"kØ_¥iv©e.h
"

19 
	~<°ddef.h
>

20 
	~<°döt.h
>

22 
	~"kØ_ch™√l_m™agî.h
"

23 
	~"cﬁÀ˘i⁄s/kØ_li°.h
"

24 
	~"utûôõs/kØ_log.h
"

25 
	~"utûôõs/kØ_mem.h
"

26 
	~"kØ_∂©f‹m_comm⁄.h
"

27 
	~"kØ_∂©f‹m_utûs.h
"

29 
	~"∂©f‹m/sock.h
"

32 
uöt32_t
 
	mch™√l_id
;

33 
kØ_£rvî_ty≥_t
 
	m£rvî_ty≥
;

34 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 
	mch™√l
;

35 } 
	tkØ_å™•‹t_ch™√l_wøµî_t
;

38 
boﬁ
 
	mis_up_to_d©e
;

39 
uöt16_t
 
	mªque°_id
;

40 
uöt32_t
 
	m∑ylﬂd_size
;

41 
uöt16_t
 
	mch™√l_cou¡
;

42 } 
	tkØ_sync_öfo_t
;

45 
kØ_auth_Áûuª_‚
 
	mˇŒback
;

46 *
	mc⁄ãxt
;

47 } 
	tkØ_auth_Áûuª_h™dÀr
;

49 
	skØ_ch™√l_m™agî_t
 {

50 
kØ_li°_t
 *
	må™•‹t_ch™√ls
;

51 
kØ_c⁄ãxt_t
 *
	mkØ_c⁄ãxt
;

52 
kØ_loggî_t
 *
	mloggî
;

53 
kØ_sync_öfo_t
 
	msync_öfo
;

54 
kØ_auth_Áûuª_h™dÀr
 
	mauth_Áûuª_h™dÀr
;

59 
	$de°roy_ch™√l
(*
d©a
)

61 
	`KAA_RETURN_IF_NIL
(
d©a
,);

63 
kØ_å™•‹t_ch™√l_wøµî_t
 *
ch™√l_wøµî
 = (kØ_å™•‹t_ch™√l_wøµî_à*)
d©a
;

65 i‡(
ch™√l_wøµî
->
ch™√l
.
de°roy
) {

66 
ch™√l_wøµî
->
ch™√l
.
	`de°roy
(ch™√l_wøµî->ch™√l.
c⁄ãxt
);

69 
	`KAA_FREE
(
ch™√l_wøµî
);

70 
	}
}

72 
boﬁ
 
	$föd_ch™√l_by_ch™√l_id
–*
d©a
, *
c⁄ãxt
)

74 
	`KAA_RETURN_IF_NIL2
(
d©a
, 
c⁄ãxt
, 
Ál£
);

75  (((
kØ_å™•‹t_ch™√l_wøµî_t
 *)
d©a
)->
ch™√l_id
 =*((
uöt32_t
 *)
c⁄ãxt
));

76 
	}
}

78 
boﬁ
 
	$föd_ch™√l_by_¥Ÿocﬁ_id
–*
d©a
, *
c⁄ãxt
)

80 
	`KAA_RETURN_IF_NIL2
(
d©a
, 
c⁄ãxt
, 
Ál£
);

82 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 
ch™√l_öfo
;

83 
kØ_îr‹_t
 
îr‹_code
 = ((
kØ_å™•‹t_ch™√l_wøµî_t
 *)
d©a
)->
ch™√l
.

84 
	`gë_¥Ÿocﬁ_id
(((
kØ_å™•‹t_ch™√l_wøµî_t
 *)
d©a
)->
ch™√l
.
c⁄ãxt
, &
ch™√l_öfo
);

85 i‡(
îr‹_code
)

86  
Ál£
;

88  
	`kØ_å™•‹t_¥Ÿocﬁ_id_equÆs
((
kØ_å™•‹t_¥Ÿocﬁ_id_t
 *)
c⁄ãxt
, &
ch™√l_öfo
);

89 
	}
}

91 
kØ_îr‹_t
 
	$kØ_ch™√l_m™agî_¸óã
(
kØ_ch™√l_m™agî_t
 **
ch™√l_m™agî_p
,

92 
kØ_c⁄ãxt_t
 *
c⁄ãxt
)

94 i‡(!
ch™√l_m™agî_p
 || !
c⁄ãxt
) {

95  
KAA_ERR_BADPARAM
;

98 
kØ_ch™√l_m™agî_t
 *
ch™√l_m™agî
 = 
	`KAA_MALLOC
((kaa_channel_manager_t));

99 i‡(!
ch™√l_m™agî
) {

100  
KAA_ERR_NOMEM
;

103 
ch™√l_m™agî
->
å™•‹t_ch™√ls
 = 
	`kØ_li°_¸óã
();

104 i‡(!
ch™√l_m™agî
->
å™•‹t_ch™√ls
) {

105 
	`KAA_FREE
(
ch™√l_m™agî
);

106  
KAA_ERR_NOMEM
;

109 
ch™√l_m™agî
->
kØ_c⁄ãxt
 = 
c⁄ãxt
;

110 
ch™√l_m™agî
->
sync_öfo
.
ªque°_id
 = 0;

111 
ch™√l_m™agî
->
sync_öfo
.
is_up_to_d©e
 = 
Ál£
;

112 
ch™√l_m™agî
->
loggî
 = 
c⁄ãxt
->logger;

113 
ch™√l_m™agî
->
auth_Áûuª_h™dÀr
.
ˇŒback
 = 
NULL
;

114 
ch™√l_m™agî
->
auth_Áûuª_h™dÀr
.
c⁄ãxt
 = 
NULL
;

116 *
ch™√l_m™agî_p
 = 
ch™√l_m™agî
;

117  
KAA_ERR_NONE
;

118 
	}
}

120 
kØ_îr‹_t
 
	$kØ_å™•‹t_ch™√l_id_ˇlcuœã
(
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√l


121 , 
uöt32_t
 *
ch™√l_id
)

123 
	`KAA_RETURN_IF_NIL2
(
ch™√l
, 
ch™√l_id
, 
KAA_ERR_BADPARAM
);

125 c⁄° 
uöt32_t
 
¥ime
 = 31;

127 *
ch™√l_id
 = 1;

128 *
ch™√l_id
 = 
¥ime
 * (*ch™√l_idË+ (
±rdiff_t
)
ch™√l
->
c⁄ãxt
;

129 *
ch™√l_id
 = 
¥ime
 * (*ch™√l_idË+ (
±rdiff_t
)
ch™√l
->
de°roy
;

130 *
ch™√l_id
 = 
¥ime
 * (*ch™√l_idË+ (
±rdiff_t
)
ch™√l
->
öô
;

131 *
ch™√l_id
 = 
¥ime
 * (*ch™√l_idË+ (
±rdiff_t
)
ch™√l
->
£t_ac˚ss_poöt
;

132 *
ch™√l_id
 = 
¥ime
 * (*ch™√l_idË+ (
±rdiff_t
)
ch™√l
->
sync_h™dÀr
;

133 *
ch™√l_id
 = 
¥ime
 * (*ch™√l_idË+ (
±rdiff_t
)
ch™√l
->
gë_¥Ÿocﬁ_id
;

134 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 
¥Ÿoco_id
 = { 0, 0 };

135 
ch™√l
->
	`gë_¥Ÿocﬁ_id
(ch™√l->
c⁄ãxt
, &
¥Ÿoco_id
);

136 *
ch™√l_id
 = 
¥ime
 * (*ch™√l_idË+ 
¥Ÿoco_id
.
id
;

137 *
ch™√l_id
 = 
¥ime
 * (*ch™√l_idË+ 
¥Ÿoco_id
.
vîsi⁄
;

139 *
ch™√l_id
 = 
¥ime
 * (*ch™√l_idË+ (
±rdiff_t
)
ch™√l
->
gë_suµ‹ãd_£rvi˚s
;

140 
size_t
 
£rvi˚s_cou¡
 = 0;

141 c⁄° 
kØ_exãnsi⁄_id
 *
£rvi˚s
 = 
NULL
;

142 
ch™√l
->
	`gë_suµ‹ãd_£rvi˚s
(ch™√l->
c⁄ãxt
, &
£rvi˚s
, &
£rvi˚s_cou¡
);

143 i‡(
£rvi˚s
) {

144 
size_t
 
i
 = 0;

145 ; 
i
 < 
£rvi˚s_cou¡
; ++i)

146 *
ch™√l_id
 = 
¥ime
 * (*ch™√l_idË+ (Ë
£rvi˚s
[
i
];

149  
KAA_ERR_NONE
;

150 
	}
}

152 
	$kØ_ch™√l_m™agî_de°roy
(
kØ_ch™√l_m™agî_t
 *
£lf
)

154 i‡(
£lf
) {

155 
	`kØ_li°_de°roy
(
£lf
->
å™•‹t_ch™√ls
, 
de°roy_ch™√l
);

156 
	`KAA_FREE
(
£lf
);

158 
	}
}

160 
boﬁ
 
	$is_boŸ°øp_£rvi˚_suµ‹ãd
(
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√l
)

162 
	`KAA_RETURN_IF_NIL
(
ch™√l
, 
Ál£
);

164 c⁄° 
kØ_exãnsi⁄_id
 *
£rvi˚s
;

165 
size_t
 
£rvi˚_cou¡
;

166 
kØ_îr‹_t
 
îr‹_code
 = 
ch™√l
->
	`gë_suµ‹ãd_£rvi˚s
(ch™√l->
c⁄ãxt


167 , &
£rvi˚s


168 , &
£rvi˚_cou¡
);

170 i‡(!
îr‹_code
) {

171 
size_t
 
i
 = 0;

172 ; 
i
 < 
£rvi˚_cou¡
; ++i) {

173 i‡(
£rvi˚s
[
i
] =
KAA_EXTENSION_BOOTSTRAP
) {

174  
åue
;

179  
Ál£
;

180 
	}
}

182 
kØ_îr‹_t
 
	$add_ch™√l
(
kØ_ch™√l_m™agî_t
 *
£lf


183 , 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√l


184 , 
uöt32_t
 *
ch™√l_id
)

186 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
ch™√l
, 
KAA_ERR_BADPARAM
);

188 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 
¥Ÿocﬁ_id
 = { 0, 0 };

189 
ch™√l
->
	`gë_¥Ÿocﬁ_id
(ch™√l->
c⁄ãxt
, &
¥Ÿocﬁ_id
);

191 
uöt32_t
 
id
;

192 
	`kØ_å™•‹t_ch™√l_id_ˇlcuœã
(
ch™√l
, &
id
);

194 
kØ_li°_node_t
 *
ô
 = 
	`kØ_li°_föd_√xt
(
	`kØ_li°_begö
(
£lf
->
å™•‹t_ch™√ls
), &
föd_ch™√l_by_ch™√l_id
, &
id
);

195 i‡(
ô
) {

196 
	`KAA_LOG_WARN
(
£lf
->
kØ_c⁄ãxt
->
loggî
, 
KAA_ERR_ALREADY_EXISTS
,

198 , 
id
, 
¥Ÿocﬁ_id
.id,ÖrŸocﬁ_id.
vîsi⁄
);

199  
KAA_ERR_ALREADY_EXISTS
;

202 
kØ_å™•‹t_ch™√l_wøµî_t
 *
wøµî
 =

203 (
kØ_å™•‹t_ch™√l_wøµî_t
 *)
	`KAA_MALLOC
((kaa_transport_channel_wrapper_t));

204 
	`KAA_RETURN_IF_NIL
(
wøµî
, 
KAA_ERR_NOMEM
);

206 
wøµî
->
ch™√l_id
 = 
id
;

207 
wøµî
->
ch™√l
 = *channel;

208 
wøµî
->
£rvî_ty≥
 = 
	`is_boŸ°øp_£rvi˚_suµ‹ãd
(
ch™√l
Ë? 
KAA_SERVER_BOOTSTRAP
 : 
KAA_SERVER_OPERATIONS
;

210 
ô
 = 
	`kØ_li°_push_‰⁄t
(
£lf
->
å™•‹t_ch™√ls
, 
wøµî
);

211 i‡(!
ô
) {

212 
	`KAA_LOG_ERROR
(
£lf
->
kØ_c⁄ãxt
->
loggî
, 
KAA_ERR_NOMEM
,

214 , 
id
, 
¥Ÿocﬁ_id
.id,ÖrŸocﬁ_id.
vîsi⁄
);

215 
	`KAA_FREE
(
wøµî
);

216  
KAA_ERR_NOMEM
;

219 i‡(
ch™√l_id
) {

220 *
ch™√l_id
 = 
id
;

223 
£lf
->
sync_öfo
.
is_up_to_d©e
 = 
Ál£
;

225 
	`KAA_LOG_INFO
(
£lf
->
kØ_c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
,

227 , (
wøµî
->
£rvî_ty≥
 =
KAA_SERVER_BOOTSTRAP
) ? "Bootstrap" : "Operations"

228 , 
id
, 
¥Ÿocﬁ_id
.id,ÖrŸocﬁ_id.
vîsi⁄
);

230  
KAA_ERR_NONE
;

231 
	}
}

233 
kØ_îr‹_t
 
	$öô_ch™√l
(
kØ_ch™√l_m™agî_t
 *
£lf


234 , 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√l
)

236 
	`KAA_RETURN_IF_NIL3
(
£lf
, sñf->
kØ_c⁄ãxt
, 
ch™√l
, 
KAA_ERR_BADPARAM
);

238 
kØ_å™•‹t_c⁄ãxt_t
 
å™•‹t_c⁄ãxt
 = { 
NULL
 };

239 
å™•‹t_c⁄ãxt
.
kØ_c⁄ãxt
 = 
£lf
->kaa_context;

241 
ch™√l
->
	`öô
(ch™√l->
c⁄ãxt
, &
å™•‹t_c⁄ãxt
);

243 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 
¥Ÿocﬁ_id
 = { 0, 0 };

244 
kØ_îr‹_t
 
îr‹_code
 = 
ch™√l
->
	`gë_¥Ÿocﬁ_id
(ch™√l->
c⁄ãxt
, &
¥Ÿocﬁ_id
);

246 i‡(!
îr‹_code
) {

247 
kØ_ac˚ss_poöt_t
 *
ac˚ss_poöt
;

249 
uöt32_t
 
id
;

250 
	`kØ_å™•‹t_ch™√l_id_ˇlcuœã
(
ch™√l
, &
id
);

252 
kØ_li°_node_t
 *
ô
 = 
	`kØ_li°_föd_√xt
(
	`kØ_li°_begö
(
£lf
->
å™•‹t_ch™√ls
), &
föd_ch™√l_by_ch™√l_id
, &
id
);

253 
	`KAA_RETURN_IF_NIL
(
ô
, 
KAA_ERR_NOT_FOUND
);

255 
boﬁ
 
is_boŸ°øp_ch™√l
 = ((
kØ_å™•‹t_ch™√l_wøµî_t
 *)
	`kØ_li°_gë_d©a
(
ô
))->

256 
£rvî_ty≥
 =
KAA_SERVER_BOOTSTRAP
;

258 i‡(
is_boŸ°øp_ch™√l
) {

259 
ac˚ss_poöt
 = 
	`kØ_boŸ°øp_m™agî_gë_boŸ°øp_ac˚ss_poöt
(
£lf
->
kØ_c⁄ãxt
->
boŸ°øp_m™agî
, &
¥Ÿocﬁ_id
);

261 
ac˚ss_poöt
 = 
	`kØ_boŸ°øp_m™agî_gë_›î©i⁄s_ac˚ss_poöt
(
£lf
->
kØ_c⁄ãxt
->
boŸ°øp_m™agî
, &
¥Ÿocﬁ_id
);

264 i‡(
ac˚ss_poöt
) {

265 
	`KAA_LOG_TRACE
(
£lf
->
kØ_c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
, "Found %sáccessÖoint [0x%08X] for channel [0x%08X] "

266 "’rŸocﬁ: id=0x%08X, vîsi⁄=%u)", (
is_boŸ°øp_ch™√l
 ? "Bootstrap" : "Operations")

267 , 
ac˚ss_poöt
->
id
, id, 
¥Ÿocﬁ_id
.id,ÖrŸocﬁ_id.
vîsi⁄
);

269 
ch™√l
->
	`£t_ac˚ss_poöt
(ch™√l->
c⁄ãxt
, 
ac˚ss_poöt
);

271 i‡(
is_boŸ°øp_ch™√l
) {

272 
	`KAA_LOG_WARN
(
£lf
->
kØ_c⁄ãxt
->
loggî
, 
KAA_ERR_NOT_FOUND
, "CouldÇot findáccessÖoint for Bootstrap channel [0x%08X] "

273 "’rŸocﬁ: id=0x%08X, vîsi⁄=%u)", 
id
, 
¥Ÿocﬁ_id
.id,ÖrŸocﬁ_id.
vîsi⁄
);

275 
	`KAA_LOG_INFO
(
£lf
->
kØ_c⁄ãxt
->
loggî
, 
KAA_ERR_NOT_FOUND
, "CouldÇot findáccessÖoint for Operations channel [0x%08X] "

276 "’rŸocﬁ: id=0x%08X, vîsi⁄=%u)", 
id
, 
¥Ÿocﬁ_id
.id,ÖrŸocﬁ_id.
vîsi⁄
);

278  
KAA_ERR_BAD_STATE
;

282  
KAA_ERR_NONE
;

283 
	}
}

285 
kØ_îr‹_t
 
	$kØ_ch™√l_m™agî_add_å™•‹t_ch™√l
(
kØ_ch™√l_m™agî_t
 *
£lf


286 , 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√l


287 , 
uöt32_t
 *
ch™√l_id
)

289 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
ch™√l
, 
KAA_ERR_BADPARAM
);

291 
kØ_îr‹_t
 
îr‹_code
 = 
	`add_ch™√l
(
£lf
, 
ch™√l
, 
ch™√l_id
);

292 i‡(!
îr‹_code
) {

293 
îr‹_code
 = 
	`öô_ch™√l
(
£lf
, 
ch™√l
);

296  
îr‹_code
;

297 
	}
}

299 
kØ_îr‹_t
 
	$kØ_ch™√l_m™agî_ªmove_å™•‹t_ch™√l
(
kØ_ch™√l_m™agî_t
 *
£lf


300 , 
uöt32_t
 
ch™√l_id
)

302 
	`KAA_RETURN_IF_NIL
(
£lf
, 
KAA_ERR_BADPARAM
);

304 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_li°_ªmove_fú°
(
£lf
->
å™•‹t_ch™√ls


305 , &
föd_ch™√l_by_ch™√l_id


306 , &
ch™√l_id


307 , &
de°roy_ch™√l
);

309 i‡(!
îr‹_code
) {

310 
£lf
->
sync_öfo
.
is_up_to_d©e
 = 
Ál£
;

311 
	`KAA_LOG_INFO
(
£lf
->
kØ_c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
, "Tøn•‹àch™√»[0x%08X] wa†ªmoved", 
ch™√l_id
);

312  
KAA_ERR_NONE
;

315 
	`KAA_LOG_WARN
(
£lf
->
kØ_c⁄ãxt
->
loggî
, 
îr‹_code
, "Tøn•‹àch™√»[0x%08X] wa†nŸ found", 
ch™√l_id
);

317  
îr‹_code
;

318 
	}
}

320 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
	$kØ_ch™√l_m™agî_gë_å™•‹t_ch™√l
(
kØ_ch™√l_m™agî_t
 *
£lf


321 , 
kØ_exãnsi⁄_id
 
£rvi˚_ty≥
)

323 
	`KAA_RETURN_IF_NIL
(
£lf
, 
NULL
);

325 
kØ_å™•‹t_ch™√l_wøµî_t
 *
ch™√l_wøµî
;

326 c⁄° 
kØ_exãnsi⁄_id
 *
£rvi˚s
;

327 
size_t
 
£rvi˚_cou¡
;

329 
kØ_li°_node_t
 *
ô
 = 
	`kØ_li°_begö
(
£lf
->
å™•‹t_ch™√ls
);

330 
ô
) {

331 
ch™√l_wøµî
 = 
	`kØ_li°_gë_d©a
(
ô
);

333 
kØ_îr‹_t
 
îr‹_code
 = 
ch™√l_wøµî
->
ch™√l
.
	`gë_suµ‹ãd_£rvi˚s
(ch™√l_wøµî->ch™√l.
c⁄ãxt
,

334 &
£rvi˚s
,

335 &
£rvi˚_cou¡
);

336 i‡(
îr‹_code
 || !
£rvi˚s
 || !
£rvi˚_cou¡
) {

337 
	`KAA_LOG_WARN
(
£lf
->
kØ_c⁄ãxt
->
loggî
, 
îr‹_code
, "FailedÅoÑetrieveÜist of supported services "

338 "f‹Åøn•‹àch™√»[0x%08X]", 
ch™√l_wøµî
->
ch™√l_id
);

342 
£rvi˚_cou¡
--) {

343 i‡(*
£rvi˚s
++ =
£rvi˚_ty≥
) {

344 
	`KAA_LOG_TRACE
(
£lf
->
kØ_c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
, "Transport channel "

346 , 
ch™√l_wøµî
->
ch™√l_id
, 
£rvi˚_ty≥
);

347  &
ch™√l_wøµî
->
ch™√l
;

351 
ô
 = 
	`kØ_li°_√xt
(it);

354 
	`KAA_LOG_DEBUG
(
£lf
->
kØ_c⁄ãxt
->
loggî
, 
KAA_ERR_NOT_FOUND
,

355 "FaûedÅÿfödÅøn•‹àch™√»f‹ sîvi˚ %u", 
£rvi˚_ty≥
);

357  
NULL
;

358 
	}
}

360 
kØ_îr‹_t
 
	$kØ_ch™√l_m™agî_boŸ°øp_ªque°_gë_size
(
kØ_ch™√l_m™agî_t
 *
£lf


361 , 
size_t
 *
ex≥˘ed_size
)

363 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
ex≥˘ed_size
, 
KAA_ERR_BADPARAM
);

365 *
ex≥˘ed_size
 = 0;

367 i‡(!
£lf
->
sync_öfo
.
is_up_to_d©e
) {

368 
size_t
 
ch™√l_cou¡
 = 
	`kØ_li°_gë_size
(
£lf
->
å™•‹t_ch™√ls
);

370 i‡(
ch™√l_cou¡
 > 0) {

371 *
ex≥˘ed_size
 +
KAA_EXTENSION_HEADER_SIZE


372 + (
uöt16_t
)

373 + (
uöt16_t
)

374 + 
ch™√l_cou¡
 * ((
uöt32_t
)

375 + (
uöt16_t
)

376 + (
uöt16_t
) );

378 
£lf
->
sync_öfo
.
∑ylﬂd_size
 = *
ex≥˘ed_size
 - 
KAA_EXTENSION_HEADER_SIZE
;

379 
£lf
->
sync_öfo
.
ch™√l_cou¡
 = channel_count;

380 
£lf
->
sync_öfo
.
is_up_to_d©e
 = 
åue
;

383 *
ex≥˘ed_size
 = 
£lf
->
sync_öfo
.
∑ylﬂd_size
 + 
KAA_EXTENSION_HEADER_SIZE
;

386  
KAA_ERR_NONE
;

387 
	}
}

389 
kØ_îr‹_t
 
	$kØ_ch™√l_m™agî_boŸ°øp_ªque°_£rülize
(
kØ_ch™√l_m™agî_t
 *
£lf


390 , 
kØ_∂©f‹m_mesßge_wrôî_t
* 
wrôî
)

392 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
wrôî
, 
KAA_ERR_BADPARAM
);

393 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "GoingÅo serialize client bootstrap sync");

395 
kØ_îr‹_t
 
îr‹_code
 = 
KAA_ERR_NONE
;

397 i‡(
£lf
->
sync_öfo
.
∑ylﬂd_size
 > 0 && sñf->sync_öfo.
ch™√l_cou¡
 > 0) {

398 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe_exãnsi⁄_hódî
(
wrôî


399 , 
KAA_EXTENSION_BOOTSTRAP


401 , 
£lf
->
sync_öfo
.
∑ylﬂd_size
);

402 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

404 
uöt16_t
 
√tw‹k_‹dî_16
;

405 
uöt32_t
 
√tw‹k_‹dî_32
;

407 ++
£lf
->
sync_öfo
.
ªque°_id
;

408 
√tw‹k_‹dî_16
 = 
	`KAA_HTONS
(
£lf
->
sync_öfo
.
ªque°_id
);

409 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
wrôî
, &
√tw‹k_‹dî_16
, (
uöt16_t
));

410 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

412 
√tw‹k_‹dî_16
 = 
	`KAA_HTONS
(
£lf
->
sync_öfo
.
ch™√l_cou¡
);

413 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
wrôî
, &
√tw‹k_‹dî_16
, (
uöt16_t
));

414 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

416 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Sîülizög %u suµ‹ãdÖrŸocﬁ(s),Ñeque° id %u", sñf->
sync_öfo
.
ch™√l_cou¡
, sñf->sync_öfo.
ªque°_id
);

417 
kØ_å™•‹t_ch™√l_wøµî_t
 *
ch™√l_wøµî
;

418 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 
¥Ÿocﬁ_öfo
;

420 
kØ_li°_node_t
 *
ô
 = 
	`kØ_li°_begö
(
£lf
->
å™•‹t_ch™√ls
);

421 
ô
) {

422 
ch™√l_wøµî
 = (
kØ_å™•‹t_ch™√l_wøµî_t
 *)
	`kØ_li°_gë_d©a
(
ô
);

424 
îr‹_code
 = 
ch™√l_wøµî
->
ch™√l
.
	`gë_¥Ÿocﬁ_id
(ch™√l_wøµî->ch™√l.
c⁄ãxt


425 , &
¥Ÿocﬁ_öfo
);

426 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

428 
√tw‹k_‹dî_32
 = 
	`KAA_HTONL
(
¥Ÿocﬁ_öfo
.
id
);

429 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
wrôî
, &
√tw‹k_‹dî_32
, (
uöt32_t
));

430 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

432 
√tw‹k_‹dî_16
 = 
	`KAA_HTONS
(
¥Ÿocﬁ_öfo
.
vîsi⁄
);

433 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
wrôî
, &
√tw‹k_‹dî_16
, (
uöt16_t
));

434 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

436 
√tw‹k_‹dî_16
 = 0;

437 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
wrôî
, &
√tw‹k_‹dî_16
, (
uöt16_t
));

438 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

440 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "SîülizedÖrŸocﬁ: id '%u', vîsi⁄ '%u'", 
¥Ÿocﬁ_öfo
.
id
,ÖrŸocﬁ_öfo.
vîsi⁄
);

441 
ô
 = 
	`kØ_li°_√xt
(it);

445  
îr‹_code
;

446 
	}
}

448 
kØ_îr‹_t
 
	$kØ_ch™√l_m™agî_⁄_√w_ac˚ss_poöt
(
kØ_ch™√l_m™agî_t
 *
£lf


449 , 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 *
¥Ÿocﬁ_id


450 , 
kØ_£rvî_ty≥_t
 
£rvî_ty≥


451 , 
kØ_ac˚ss_poöt_t
 *
ac˚ss_poöt
)

453 
	`KAA_RETURN_IF_NIL3
(
£lf
, 
¥Ÿocﬁ_id
, 
ac˚ss_poöt
, 
KAA_ERR_BADPARAM
);

455 
kØ_li°_node_t
 *
ch™√l_ô
 = 
	`kØ_li°_föd_√xt
(
	`kØ_li°_begö
(
£lf
->
å™•‹t_ch™√ls
)

456 , &
föd_ch™√l_by_¥Ÿocﬁ_id


457 , 
¥Ÿocﬁ_id
);

459 
ch™√l_ô
) {

460 
kØ_å™•‹t_ch™√l_wøµî_t
 *
ch™√l_wøµî
 = 
	`kØ_li°_gë_d©a
(
ch™√l_ô
);

461 i‡(
ch™√l_wøµî
->
£rvî_ty≥
 == server_type) {

462 
	`KAA_LOG_TRACE
(
£lf
->
kØ_c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
, "SetÇew %sáccessÖoint [0x%08X] for channel [0x%08X] "

464 , (
ch™√l_wøµî
->
£rvî_ty≥
 =
KAA_SERVER_BOOTSTRAP
 ? "Bootstrap" : "Operations")

465 , 
ac˚ss_poöt
->
id
, 
ch™√l_wøµî
->
ch™√l_id
, 
¥Ÿocﬁ_id
->id,ÖrŸocﬁ_id->
vîsi⁄
);

466 
ch™√l_wøµî
->
ch™√l
.
	`£t_ac˚ss_poöt
(

467 
ch™√l_wøµî
->
ch™√l
.
c⁄ãxt
, 
ac˚ss_poöt
);

470 
ch™√l_ô
 = 
	`kØ_li°_föd_√xt
(
	`kØ_li°_√xt
(channel_it)

471 , &
föd_ch™√l_by_¥Ÿocﬁ_id


472 , 
¥Ÿocﬁ_id
);

475  
KAA_ERR_NONE
;

476 
	}
}

478 
	$kØ_ch™√l_m™agî_£t_auth_Áûuª_h™dÀr
(
kØ_ch™√l_m™agî_t
 *
£lf
,

479 
kØ_auth_Áûuª_‚
 
h™dÀr
, *
c⁄ãxt
)

481 i‡(!
£lf
) {

485 
£lf
->
auth_Áûuª_h™dÀr
.
ˇŒback
 = 
h™dÀr
;

486 
£lf
->
auth_Áûuª_h™dÀr
.
c⁄ãxt
 = context;

487 
	}
}

489 
	$kØ_ch™√l_m™agî_¥o˚ss_auth_Áûuª
(
kØ_ch™√l_m™agî_t
 *
£lf
,

490 
kØ_auth_Áûuª_ªas⁄
 
ªas⁄
)

492 i‡(!
£lf
 || !£lf->
auth_Áûuª_h™dÀr
.
ˇŒback
) {

496 
£lf
->
auth_Áûuª_h™dÀr
.
	`ˇŒback
(
ªas⁄
, sñf->auth_Áûuª_h™dÀr.
c⁄ãxt
);

497 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/kaa_channel_manager.h

27 #i‚de‡
KAA_CHANNEL_MANAGER_H_


28 
	#KAA_CHANNEL_MANAGER_H_


	)

30 
	~"kØ_comm⁄.h
"

31 
	~"∂©f‹m/ext_å™•‹t_ch™√l.h
"

33 #ifde‡
__˝lu•lus


40 #i‚de‡
KAA_CHANNEL_MANAGER_T


41 
	#KAA_CHANNEL_MANAGER_T


	)

42 
kØ_ch™√l_m™agî_t
 
	tkØ_ch™√l_m™agî_t
;

55 
kØ_îr‹_t
 
kØ_å™•‹t_ch™√l_id_ˇlcuœã
(
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√l
,

56 
uöt32_t
 *
ch™√l_id
);

75 
kØ_îr‹_t
 
kØ_ch™√l_m™agî_add_å™•‹t_ch™√l
(
kØ_ch™√l_m™agî_t
 *
£lf
,

76 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√l
,

77 
uöt32_t
 *
ch™√l_id
);

86 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
kØ_ch™√l_m™agî_gë_å™•‹t_ch™√l
(
kØ_ch™√l_m™agî_t
 *
£lf
,

87 
kØ_exãnsi⁄_id
 
£rvi˚_ty≥
);

102 
kØ_îr‹_t
 
kØ_ch™√l_m™agî_ªmove_å™•‹t_ch™√l
(
kØ_ch™√l_m™agî_t
 *
£lf
,

103 
uöt32_t
 
ch™√l_id
);

112 
	gKAA_AUTH_STATUS_UNKNOWN
,

113 
	gKAA_AUTH_STATUS_BAD_CREDENTIALS
,

114 
	gKAA_AUTH_STATUS_VERIFICATION_FAILED
,

115 } 
	tkØ_auth_Áûuª_ªas⁄
;

125 (*
	gkØ_auth_Áûuª_‚
)(
	tkØ_auth_Áûuª_ªas⁄
 
	tªas⁄
, *
	tc⁄ãxt
);

136 
kØ_ch™√l_m™agî_£t_auth_Áûuª_h™dÀr
(
kØ_ch™√l_m™agî_t
 *
£lf
,

137 
kØ_auth_Áûuª_‚
 
h™dÀr
, *
c⁄ãxt
);

146 
kØ_ch™√l_m™agî_¥o˚ss_auth_Áûuª
(
kØ_ch™√l_m™agî_t
 *
£lf
,

147 
kØ_auth_Áûuª_ªas⁄
 
ªas⁄
);

149 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/kaa_common.h

22 #i‚de‡
KAA_COMMON_H_


23 
	#KAA_COMMON_H_


	)

25 
	~<°döt.h
>

26 
	~"kØ_îr‹.h
"

28 #ifde‡
__˝lu•lus


37 
KAA_EXTENSION_BOOTSTRAP
 = 0,

38 
KAA_EXTENSION_META_DATA
 = 1,

39 
KAA_EXTENSION_PROFILE
 = 2,

40 
KAA_EXTENSION_USER
 = 3,

41 
KAA_EXTENSION_LOGGING
 = 4,

42 
KAA_EXTENSION_CONFIGURATION
 = 5,

43 
KAA_EXTENSION_EVENT
 = 7,

44 
KAA_EXTENSION_NOTIFICATION
 = 6,

45 } 
	tkØ_exãnsi⁄_id
;

50 
	#KAA_RETURN_IF_ERR
(
E
) \

51 dÿ{ i‡(
E
Ë E; } 0)

	)

53 
	#KAA_RETURN_IF_NIL
(
p
, 
E
) \

54 dÿ{ i‡(!(
p
)Ë 
E
; } 0)

	)

56 
	#KAA_RETURN_IF_NIL2
(
p1
, 
p2
, 
E
) \

57 dÿ{ i‡(!(
p1
Ë|| !(
p2
)Ë 
E
; } 0)

	)

59 
	#KAA_RETURN_IF_NIL3
(
p1
, 
p2
, 
p3
, 
E
) \

60 dÿ{ i‡(!(
p1
Ë|| !(
p2
Ë|| !(
p3
)Ë 
E
; } 0)

	)

62 
	#KAA_RETURN_IF_NIL4
(
p1
, 
p2
, 
p3
, 
p4
, 
E
) \

63 dÿ{ i‡(!(
p1
Ë|| !(
p2
Ë|| !(
p3
Ë|| !(
p4
)Ë 
E
; } 0)

	)

65 
	#KAA_RETURN_IF_NIL5
(
p1
, 
p2
, 
p3
, 
p4
, 
p5
,
E
) \

66 dÿ{ i‡(!(
p1
Ë|| !(
p2
Ë|| !(
p3
Ë|| !(
p4
Ë|| !(
p5
)Ë 
E
; } 0)

	)

72 
uöt32_t
 
id
;

73 
uöt16_t
 
vîsi⁄
;

74 } 
	tkØ_å™•‹t_¥Ÿocﬁ_id_t
;

76 
ölöe
 
kØ_å™•‹t_¥Ÿocﬁ_id_equÆs
(c⁄° 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 *
fú°
, c⁄° kØ_å™•‹t_¥Ÿocﬁ_id_à*
£c⁄d
)

78  
fú°
 && 
£c⁄d
 && fú°->
id
 =£c⁄d->id && fú°->
vîsi⁄
 == second->version;

86 
uöt32_t
 
id
;

87 
uöt16_t
 
c⁄√˘i⁄_d©a_Àn
;

88 *
c⁄√˘i⁄_d©a
;

89 } 
	tkØ_ac˚ss_poöt_t
;

94 
	#KAA_ENDPOINT_ID_LENGTH
 20

	)

95 
uöt8_t
 
	tkØ_ídpoöt_id
[
KAA_ENDPOINT_ID_LENGTH
];

96 c⁄° 
	tuöt8_t
 *
	tkØ_ídpoöt_id_p
;

100 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/kaa_common_schema.c

17 
	~"kØ_¥iv©e.h
"

19 
	~<°döt.h
>

20 
	~<°rög.h
>

22 
	~"kØ_comm⁄.h
"

23 
	~"∂©f‹m/°dio.h
"

24 
	~"kØ_comm⁄_schema.h
"

25 
	~"avro_§c/avro/io.h
"

26 
	~"avro_§c/ícodög.h
"

27 
	~"utûôõs/kØ_mem.h
"

28 
	~"kØ_îr‹.h
"

32 
size_t
 
	$avro_l⁄g_gë_size
(
öt64_t
 
l
)

34 
öt64_t
 
Àn
 = 0;

35 
uöt64_t
 
n
 = (
l
 << 1) ^ (l >> 63);

36 
n
 & ~0x7F) {

37 
Àn
++;

38 
n
 >>= 7;

40 
Àn
++;

41  
Àn
;

42 
	}
}

44 
	$kØ_°rög_£rülize
(
avro_wrôî_t
 
wrôî
, *
d©a
)

46 
	`KAA_RETURN_IF_NIL2
(
wrôî
, 
d©a
,);

48 
kØ_°rög_t
 *
°r
 = (kØ_°rög_à*)
d©a
;

49 i‡(
°r
->
d©a
) {

50 
avro_bö¨y_ícodög
.
	`wrôe_°rög
(
wrôî
, 
°r
->
d©a
);

52 
	}
}

54 
kØ_°rög_t
 *
	$kØ_°rög_move_¸óã
(c⁄° *
d©a
, 
de°roy_‚
 
de°roy
)

56 
	`KAA_RETURN_IF_NIL
(
d©a
, 
NULL
);

58 
kØ_°rög_t
 *
°r
 = (kØ_°rög_à*)
	`KAA_MALLOC
((kaa_string_t));

59 
	`KAA_RETURN_IF_NIL
(
°r
, 
NULL
);

61 
°r
->
d©a
 = (*)data;

62 
°r
->
de°roy
 = destroy;

64  
°r
;

65 
	}
}

67 
kØ_°rög_t
 *
	$kØ_°rög_c›y_¸óã
(c⁄° *
d©a
)

69 
	`KAA_RETURN_IF_NIL
(
d©a
, 
NULL
);

71 
kØ_°rög_t
 *
°r
 = (kØ_°rög_à*)
	`KAA_MALLOC
((kaa_string_t));

72 
	`KAA_RETURN_IF_NIL
(
°r
, 
NULL
);

74 
size_t
 
Àn
 = 
	`°æí
(
d©a
) + 1;

75 
°r
->
d©a
 = (*)
	`KAA_MALLOC
(
Àn
 * ());

76 i‡(!
°r
->
d©a
) {

77 
	`KAA_FREE
(
°r
);

78  
NULL
;

81 
	`mem˝y
(
°r
->
d©a
, d©a, 
Àn
);

82 
°r
->
de°roy
 = &
kØ_d©a_de°roy
;

84  
°r
;

85 
	}
}

87 
	$kØ_°rög_de°roy
(*
d©a
)

89 
	`KAA_RETURN_IF_NIL
(
d©a
,);

91 
kØ_°rög_t
 *
°r
 = (kØ_°rög_à*)
d©a
;

92 i‡(
°r
->
d©a
 && så->
de°roy
) {

93 
°r
->
	`de°roy
(°r->
d©a
);

95 
	`KAA_FREE
(
°r
);

96 
	}
}

98 
kØ_°rög_t
 *
	$kØ_°rög_de£rülize
(
avro_ªadî_t
 
ªadî
)

100 
	`KAA_RETURN_IF_NIL
(
ªadî
, 
NULL
);

102 
kØ_°rög_t
 *
°r
 = (kØ_°rög_à*)
	`KAA_MALLOC
((kaa_string_t));

103 
	`KAA_RETURN_IF_NIL
(
°r
, 
NULL
);

105 
avro_bö¨y_ícodög
.
	`ªad_°rög
(
ªadî
, &
°r
->
d©a
, 
NULL
);

106 
°r
->
de°roy
 = 
kØ_d©a_de°roy
;

108  
°r
;

109 
	}
}

111 
size_t
 
	$kØ_°rög_gë_size
(*
d©a
)

113 
	`KAA_RETURN_IF_NIL
(
d©a
, 0);

115 
kØ_°rög_t
 *
°r
 = (kØ_°rög_à*)
d©a
;

116 i‡(
°r
->
d©a
) {

117 
size_t
 
Àn
 = 
	`°æí
(
°r
->
d©a
);

118  
	`avro_l⁄g_gë_size
(
Àn
) +Üen;

121 
	}
}

123 
kØ_byãs_t
 *
	$kØ_byãs_move_¸óã
(c⁄° 
uöt8_t
 *
d©a
, 
size_t
 
d©a_Àn
, 
de°roy_‚
 
de°roy
)

125 
	`KAA_RETURN_IF_NIL2
(
d©a
, 
d©a_Àn
, 
NULL
);

127 
kØ_byãs_t
 *
byãs_¨øy
 = (kØ_byãs_à*)
	`KAA_MALLOC
((kaa_bytes_t));

128 
	`KAA_RETURN_IF_NIL
(
byãs_¨øy
, 
NULL
);

130 
byãs_¨øy
->
buf„r
 = (
uöt8_t
 *)
d©a
;

131 
byãs_¨øy
->
size
 = 
d©a_Àn
;

132 
byãs_¨øy
->
de°roy
 = destroy;

134  
byãs_¨øy
;

135 
	}
}

137 
kØ_byãs_t
 *
	$kØ_byãs_c›y_¸óã
(c⁄° 
uöt8_t
 *
d©a
, 
size_t
 
d©a_Àn
)

139 
	`KAA_RETURN_IF_NIL2
(
d©a
, 
d©a_Àn
, 
NULL
);

141 
kØ_byãs_t
 *
byãs_¨øy
 = (kØ_byãs_à*)
	`KAA_MALLOC
((kaa_bytes_t));

142 
	`KAA_RETURN_IF_NIL
(
byãs_¨øy
, 
NULL
);

144 
byãs_¨øy
->
buf„r
 = (
uöt8_t
 *)
	`KAA_MALLOC
((uöt8_tË* 
d©a_Àn
);

145 i‡(!
byãs_¨øy
->
buf„r
) {

146 
	`KAA_FREE
(
byãs_¨øy
);

147  
NULL
;

150 
	`mem˝y
(
byãs_¨øy
->
buf„r
, 
d©a
, 
d©a_Àn
);

151 
byãs_¨øy
->
size
 = 
d©a_Àn
;

152 
byãs_¨øy
->
de°roy
 = &
kØ_d©a_de°roy
;

154  
byãs_¨øy
;

155 
	}
}

157 
	$kØ_byãs_de°roy
(*
d©a
)

159 
	`KAA_RETURN_IF_NIL
(
d©a
, );

161 
kØ_byãs_t
 *
byãs
 = (kØ_byãs_à*)
d©a
;

162 i‡(
byãs
->
buf„r
 && byãs->
de°roy
) {

163 
byãs
->
	`de°roy
(byãs->
buf„r
);

165 
	`KAA_FREE
(
byãs
);

166 
	}
}

168 
kØ_byãs_t
 *
	$kØ_byãs_de£rülize
(
avro_ªadî_t
 
ªadî
)

170 
	`KAA_RETURN_IF_NIL
(
ªadî
, 
NULL
);

172 
kØ_byãs_t
 *
byãs
 = (kØ_byãs_à*)
	`KAA_MALLOC
((kaa_bytes_t));

173 
	`KAA_RETURN_IF_NIL
(
byãs
, 
NULL
);

175 
öt64_t
 
size
;

176 
avro_bö¨y_ícodög
.
	`ªad_byãs
(
ªadî
, (**)&
byãs
->
buf„r
, &
size
);

177 
byãs
->
size
 = size;

178 
byãs
->
de°roy
 = 
kØ_d©a_de°roy
;

180  
byãs
;

181 
	}
}

183 
	$kØ_byãs_£rülize
(
avro_wrôî_t
 
wrôî
, *
d©a
)

185 
kØ_byãs_t
 *
byãs
 = (kØ_byãs_à*)
d©a
;

186 
	`KAA_RETURN_IF_NIL4
(
wrôî
, 
byãs
, byãs->
buf„r
, byãs->
size
, );

188 
avro_bö¨y_ícodög
.
	`wrôe_byãs
(
wrôî
, (*)
byãs
->
buf„r
, byãs->
size
);

189 
	}
}

191 
size_t
 
	$kØ_byãs_gë_size
(*
d©a
)

193 
kØ_byãs_t
 *
byãs
 = (kØ_byãs_à*)
d©a
;

194 
	`KAA_RETURN_IF_NIL3
(
byãs
, byãs->
buf„r
, byãs->
size
, 0);

195  
	`avro_l⁄g_gë_size
(
byãs
->
size
) + bytes->size;

197 
	}
}

199 
kØ_byãs_t
 *
	$kØ_fixed_move_¸óã
(c⁄° 
uöt8_t
 *
d©a
, 
size_t
 
d©a_Àn
, 
de°roy_‚
 
de°roy
)

201  
	`kØ_byãs_move_¸óã
(
d©a
, 
d©a_Àn
, 
de°roy
);

202 
	}
}

204 
kØ_byãs_t
 *
	$kØ_fixed_c›y_¸óã
(c⁄° 
uöt8_t
 *
d©a
, 
size_t
 
d©a_Àn
)

206  
	`kØ_byãs_c›y_¸óã
(
d©a
, 
d©a_Àn
);

207 
	}
}

209 
	$kØ_fixed_de°roy
(*
d©a
)

211 
	`kØ_byãs_de°roy
(
d©a
);

212 
	}
}

214 
	$kØ_fixed_£rülize
(
avro_wrôî_t
 
wrôî
, *
d©a
)

216 
kØ_byãs_t
 *
byãs
 = (kØ_byãs_à*)
d©a
;

217 
	`KAA_RETURN_IF_NIL4
(
wrôî
, 
byãs
, byãs->
buf„r
, byãs->
size
, );

219 
	`avro_wrôe
(
wrôî
, (*)
byãs
->
buf„r
, byãs->
size
);

220 
	}
}

222 
kØ_byãs_t
 *
	$kØ_fixed_de£rülize
(
avro_ªadî_t
 
ªadî
, *
c⁄ãxt
)

224 
	`KAA_RETURN_IF_NIL2
(
ªadî
, 
c⁄ãxt
, 
NULL
);

226 
kØ_byãs_t
 *
byãs
 = (kØ_byãs_à*)
	`KAA_MALLOC
((kaa_bytes_t));

227 
	`KAA_RETURN_IF_NIL
(
byãs
, 
NULL
);

228 
byãs
->
buf„r
 = (
uöt8_t
*)
	`KAA_MALLOC
((*(
size_t
 *)
c⁄ãxt
) * (uint8_t));

229 i‡(!
byãs
->
buf„r
) {

230 
	`KAA_FREE
(
byãs
);

231  
NULL
;

234 
	`avro_ªad
(
ªadî
, (*)
byãs
->
buf„r
, (*(
size_t
 *)
c⁄ãxt
));

235 
byãs
->
size
 = (*(
size_t
 *)
c⁄ãxt
);

236 
byãs
->
de°roy
 = 
kØ_d©a_de°roy
;

238  
byãs
;

239 
	}
}

241 
size_t
 
	$kØ_fixed_gë_size
(*
d©a
)

243 
kØ_byãs_t
 *
byãs
 = (kØ_byãs_à*)
d©a
;

244 
	`KAA_RETURN_IF_NIL3
(
byãs
, byãs->
buf„r
, byãs->
size
, 0);

245  
byãs
->
size
;

246 
	}
}

248 
	$kØ_boﬁón_£rülize
(
avro_wrôî_t
 
wrôî
, *
d©a
)

250 
	`KAA_RETURN_IF_NIL2
(
wrôî
, 
d©a
,);

251 
avro_bö¨y_ícodög
.
	`wrôe_boﬁón
(
wrôî
, *((
öt8_t
 *)
d©a
));

252 
	}
}

254 
öt8_t
* 
	$kØ_boﬁón_de£rülize
(
avro_ªadî_t
 
ªadî
)

256 
	`KAA_RETURN_IF_NIL
(
ªadî
, 
NULL
);

258 
öt8_t
* 
d©a
 = (öt8_t*)
	`KAA_MALLOC
((int8_t));

259 
	`KAA_RETURN_IF_NIL
(
d©a
, 
NULL
);

260 
avro_bö¨y_ícodög
.
	`ªad_boﬁón
(
ªadî
, 
d©a
);

261  
d©a
;

262 
	}
}

264 
size_t
 
	$kØ_boﬁón_gë_size
(*
d©a
)

266 
	`KAA_RETURN_IF_NIL
(
d©a
, 0);

267  
	`avro_l⁄g_gë_size
(*((
öt8_t
 *)
d©a
));

268 
	}
}

270 
	$kØ_öt_£rülize
(
avro_wrôî_t
 
wrôî
, *
d©a
)

272 
	`KAA_RETURN_IF_NIL2
(
wrôî
, 
d©a
,);

273 
avro_bö¨y_ícodög
.
	`wrôe_öt
(
wrôî
, *((
öt32_t
 *)
d©a
));

274 
	}
}

276 
öt32_t
 *
	$kØ_öt_de£rülize
(
avro_ªadî_t
 
ªadî
)

278 
	`KAA_RETURN_IF_NIL
(
ªadî
, 
NULL
);

280 
öt32_t
 *
d©a
 = (öt32_à*)
	`KAA_MALLOC
((int32_t));

281 
	`KAA_RETURN_IF_NIL
(
d©a
, 
NULL
);

282 
avro_bö¨y_ícodög
.
	`ªad_öt
(
ªadî
, 
d©a
);

283  
d©a
;

284 
	}
}

286 
size_t
 
	$kØ_öt_gë_size
(*
d©a
)

288 
	`KAA_RETURN_IF_NIL
(
d©a
, 0);

289  
	`avro_l⁄g_gë_size
(*((
öt32_t
 *)
d©a
));

290 
	}
}

292 
	$kØ_l⁄g_£rülize
(
avro_wrôî_t
 
wrôî
, *
d©a
)

294 
	`KAA_RETURN_IF_NIL2
(
wrôî
, 
d©a
,);

295 
avro_bö¨y_ícodög
.
	`wrôe_l⁄g
(
wrôî
, *((
öt64_t
 *)
d©a
));

296 
	}
}

298 
öt64_t
 *
	$kØ_l⁄g_de£rülize
(
avro_ªadî_t
 
ªadî
)

300 
	`KAA_RETURN_IF_NIL
(
ªadî
, 
NULL
);

302 
öt64_t
 *
d©a
 = (öt64_à*)
	`KAA_MALLOC
((int64_t));

303 
	`KAA_RETURN_IF_NIL
(
d©a
, 
NULL
);

304 
avro_bö¨y_ícodög
.
	`ªad_l⁄g
(
ªadî
, 
d©a
);

305  
d©a
;

306 
	}
}

308 
size_t
 
	$kØ_l⁄g_gë_size
(*
d©a
)

310 
	`KAA_RETURN_IF_NIL
(
d©a
, 0);

311  
	`avro_l⁄g_gë_size
(*((
öt64_t
 *)
d©a
));

312 
	}
}

314 
	$kØ_íum_£rülize
(
avro_wrôî_t
 
wrôî
, *
d©a
)

316 
	`KAA_RETURN_IF_NIL2
(
wrôî
, 
d©a
,);

317 
avro_bö¨y_ícodög
.
	`wrôe_l⁄g
(
wrôî
, *((*)
d©a
));

318 
	}
}

320 *
	$kØ_íum_de£rülize
(
avro_ªadî_t
 
ªadî
)

322 
	`KAA_RETURN_IF_NIL
(
ªadî
, 
NULL
);

324 *
d©a
 = (*)
	`KAA_MALLOC
(());

325 
	`KAA_RETURN_IF_NIL
(
d©a
, 
NULL
);

326 
öt64_t
 
vÆue
;

327 
avro_bö¨y_ícodög
.
	`ªad_l⁄g
(
ªadî
, &
vÆue
);

328 *
d©a
 = 
vÆue
;

329  
d©a
;

330 
	}
}

332 
size_t
 
	$kØ_íum_gë_size
(*
d©a
)

334 
	`KAA_RETURN_IF_NIL
(
d©a
, 0);

335  
	`avro_l⁄g_gë_size
(*((*)
d©a
));

336 
	}
}

338 
	$kØ_Êﬂt_£rülize
(
avro_wrôî_t
 
wrôî
, *
d©a
)

340 
	`KAA_RETURN_IF_NIL2
(
wrôî
, 
d©a
, );

341 
avro_bö¨y_ícodög
.
	`wrôe_Êﬂt
(
wrôî
, *((*)
d©a
));

342 
	}
}

344 *
	$kØ_Êﬂt_de£rülize
(
avro_ªadî_t
 
ªadî
)

346 
	`KAA_RETURN_IF_NIL
(
ªadî
, 
NULL
);

348 *
d©a
 = (*)
	`KAA_MALLOC
(());

349 
	`KAA_RETURN_IF_NIL
(
d©a
, 
NULL
);

350 
avro_bö¨y_ícodög
.
	`ªad_Êﬂt
(
ªadî
, 
d©a
);

351  
d©a
;

352 
	}
}

354 
size_t
 
	$kØ_Êﬂt_gë_size
(*
d©a
)

356 
	`KAA_RETURN_IF_NIL
(
d©a
, 0);

357  
AVRO_FLOAT_SIZE
;

358 
	}
}

360 
	$kØ_doubÀ_£rülize
(
avro_wrôî_t
 
wrôî
, *
d©a
)

362 
	`KAA_RETURN_IF_NIL2
(
wrôî
, 
d©a
,);

363 
avro_bö¨y_ícodög
.
	`wrôe_doubÀ
(
wrôî
, *((*)
d©a
));

364 
	}
}

366 *
	$kØ_doubÀ_de£rülize
(
avro_ªadî_t
 
ªadî
)

368 
	`KAA_RETURN_IF_NIL
(
ªadî
, 
NULL
);

370 * 
d©a
 = (*)
	`KAA_MALLOC
(());

371 
	`KAA_RETURN_IF_NIL
(
d©a
, 
NULL
);

372 
avro_bö¨y_ícodög
.
	`ªad_doubÀ
(
ªadî
, 
d©a
);

373  
d©a
;

374 
	}
}

376 
size_t
 
	$kØ_doubÀ_gë_size
(*
d©a
)

378 
	`KAA_RETURN_IF_NIL
(
d©a
, 0);

379  
AVRO_DOUBLE_SIZE
;

380 
	}
}

382 
	$kØ_¨øy_£rülize
(
avro_wrôî_t
 
wrôî
, 
kØ_li°_t
 *
¨øy
, 
£rülize_‚
 
£rülize
)

384 
	`KAA_RETURN_IF_NIL
(
wrôî
, );

386 
size_t
 
ñemít_cou¡
 = 
	`kØ_li°_gë_size
(
¨øy
);

388 i‡(
ñemít_cou¡
 > 0) {

389 
avro_bö¨y_ícodög
.
	`wrôe_l⁄g
(
wrôî
, 
ñemít_cou¡
);

390 i‡(
£rülize
) {

391 
kØ_li°_node_t
 *
ô
 = 
	`kØ_li°_begö
(
¨øy
);

392 
ô
) {

393 
	`£rülize
(
wrôî
, 
	`kØ_li°_gë_d©a
(
ô
));

394 
ô
 = 
	`kØ_li°_√xt
(it);

399 
avro_bö¨y_ícodög
.
	`wrôe_l⁄g
(
wrôî
, 0);

400 
	}
}

402 *
	$do_de£rülize
(
avro_ªadî_t
 
ªadî
, 
de£rülize_‚
 
de£rülize
, *
c⁄ãxt
)

404 i‡(
c⁄ãxt
) {

405  ((
de£rülize_w_˘x_‚
)
de£rülize
)(
ªadî
, 
c⁄ãxt
);

408  ((
de£rülize_wo_˘x_‚
)
de£rülize
)(
ªadî
);

409 
	}
}

411 
kØ_li°_t
 *
	$kØ_¨øy_de£rülize
(
avro_ªadî_t
 
ªadî
, 
de£rülize_‚
 
de£rülize
, *
c⁄ãxt
)

413 
	`KAA_RETURN_IF_NIL2
(
ªadî
, 
de£rülize
, 
NULL
);

415 
kØ_li°_t
 *
¨øy
 = 
	`kØ_li°_¸óã
();

416 
	`KAA_RETURN_IF_NIL
(
¨øy
, 
NULL
);

418 
öt64_t
 
ñemít_cou¡
;

419 
avro_bö¨y_ícodög
.
	`ªad_l⁄g
(
ªadî
, &
ñemít_cou¡
);

421 
ñemít_cou¡
 != 0) {

422 i‡(
ñemít_cou¡
 < 0) {

423 
öt64_t
 
ãmp
;

424 
ñemít_cou¡
 *= (-1);

425 
avro_bö¨y_ícodög
.
	`ªad_l⁄g
(
ªadî
, &
ãmp
);

428 
ñemít_cou¡
-- > 0) {

429 
	`kØ_li°_push_back
(
¨øy
, 
	`do_de£rülize
(
ªadî
, 
de£rülize
, 
c⁄ãxt
));

432 
avro_bö¨y_ícodög
.
	`ªad_l⁄g
(
ªadî
, &
ñemít_cou¡
);

435  
¨øy
;

436 
	}
}

438 
kØ_li°_t
 *
	$kØ_¨øy_de£rülize_wo_˘x
(
avro_ªadî_t
 
ªadî
, 
de£rülize_wo_˘x_‚
 
de£rülize
)

440 
	`KAA_RETURN_IF_NIL2
(
ªadî
, 
de£rülize
, 
NULL
);

441  
	`kØ_¨øy_de£rülize
(
ªadî
, 
de£rülize
, 
NULL
);

442 
	}
}

444 
kØ_li°_t
 *
	$kØ_¨øy_de£rülize_w_˘x
(
avro_ªadî_t
 
ªadî
, 
de£rülize_w_˘x_‚
 
de£rülize
, *
c⁄ãxt
)

446 
	`KAA_RETURN_IF_NIL3
(
ªadî
, 
de£rülize
, 
c⁄ãxt
, 
NULL
);

447  
	`kØ_¨øy_de£rülize
(
ªadî
, 
de£rülize
, 
c⁄ãxt
);

448 
	}
}

450 
size_t
 
	$kØ_¨øy_gë_size
(
kØ_li°_t
 *
¨øy
, 
gë_size_‚
 
gë_size
)

452 
	`KAA_RETURN_IF_NIL
(
gë_size
, 0);

454 
size_t
 
¨øy_size
 = 0;

456 i‡(
¨øy
) {

457 
kØ_li°_node_t
 *
ô
 = 
	`kØ_li°_begö
(
¨øy
);

458 
ô
) {

459 
¨øy_size
 +
	`gë_size
(
	`kØ_li°_gë_d©a
(
ô
));

460 
ô
 = 
	`kØ_li°_√xt
(it);

463 
¨øy_size
 +
	`avro_l⁄g_gë_size
(
	`kØ_li°_gë_size
(
¨øy
));

466 
¨øy_size
 +
	`avro_l⁄g_gë_size
(0);

468  
¨øy_size
;

469 
	}
}

471 
	$kØ_nuŒ_£rülize
(
avro_wrôî_t
 
wrôî
, *
d©a
)

473 ()
wrôî
;

474 ()
d©a
;

475 
	}
}

477 *
	$kØ_nuŒ_de£rülize
(
avro_ªadî_t
 
ªadî
)

479 ()
ªadî
;

480  
NULL
;

481 
	}
}

483 
	$kØ_nuŒ_de°roy
(*
d©a
)

485 ()
d©a
;

486 
	}
}

488 
size_t
 
	$kØ_nuŒ_gë_size
(* 
d©a
)

490 ()
d©a
;

491  
AVRO_NULL_SIZE
;

492 
	}
}

494 
	$kØ_d©a_de°roy
(*
d©a
)

496 
	`KAA_RETURN_IF_NIL
(
d©a
,);

497 
	`KAA_FREE
(
d©a
);

498 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/kaa_common_schema.h

17 #i‚de‡
KAA_COMMON_SCHEMA_H_


18 
	#KAA_COMMON_SCHEMA_H_


	)

20 #ifde‡
__˝lu•lus


24 
	~<°ddef.h
>

26 
	~"avro_§c/avro/io.h
"

27 
	~"cﬁÀ˘i⁄s/kØ_li°.h
"

34 
	#AVRO_NULL_SIZE
 0

	)

35 
	#AVRO_FLOAT_SIZE
 4

	)

36 
	#AVRO_DOUBLE_SIZE
 8

	)

40 (*
£rülize_‚
)(
	tavro_wrôî_t
 
	twrôî
, *
	td©a
);

51 *(*
	tde£rülize_‚
)();

56 *(*
	tde£rülize_wo_˘x_‚
)(
	tavro_ªadî_t
 
	tªadî
);

61 *(*
	tde£rülize_w_˘x_‚
)(
	tavro_ªadî_t
 
	tªadî
, *
	tc⁄ãxt
);

63 
size_t
 (*
	tgë_size_‚
)(*
	td©a
);

64 (*
de°roy_‚
)(*
	td©a
);

69 
uöt8_t
* 
buf„r
;

70 
öt32_t
 
size
;

72 
de°roy_‚
 
de°roy
;

73 } 
	tkØ_byãs_t
;

76 * 
d©a
;

78 
de°roy_‚
 
de°roy
;

79 } 
	tkØ_°rög_t
;

82 
uöt8_t
 
ty≥
;

83 *
d©a
;

85 
£rülize_‚
 
£rülize
;

86 
gë_size_‚
 
gë_size
;

87 
de°roy_‚
 
de°roy
;

88 } 
	tkØ_uni⁄_t
;

92 
kØ_°rög_t
 *
kØ_°rög_move_¸óã
(c⁄° *
d©a
, 
de°roy_‚
 
de°roy
);

93 
kØ_°rög_t
 *
kØ_°rög_c›y_¸óã
(c⁄° *
d©a
);

95 
kØ_°rög_de°roy
(*
d©a
);

96 
kØ_°rög_£rülize
(
avro_wrôî_t
 
wrôî
, *
d©a
);

97 
kØ_°rög_t
 *
kØ_°rög_de£rülize
(
avro_ªadî_t
 
ªadî
);

98 
size_t
 
kØ_°rög_gë_size
(*
d©a
);

102 
kØ_byãs_t
 *
kØ_byãs_move_¸óã
(c⁄° 
uöt8_t
 *
d©a
, 
size_t
 
d©a_Àn
, 
de°roy_‚
 
de°roy
);

103 
kØ_byãs_t
 *
kØ_byãs_c›y_¸óã
(c⁄° 
uöt8_t
 *
d©a
, 
size_t
 
d©a_Àn
);

105 
kØ_byãs_de°roy
(*
d©a
);

106 
kØ_byãs_£rülize
(
avro_wrôî_t
 
wrôî
, *
d©a
);

107 
kØ_byãs_t
 *
kØ_byãs_de£rülize
(
avro_ªadî_t
 
ªadî
);

108 
size_t
 
kØ_byãs_gë_size
(*
d©a
);

112 
kØ_byãs_t
 *
kØ_fixed_move_¸óã
(c⁄° 
uöt8_t
 *
d©a
, 
size_t
 
d©a_Àn
, 
de°roy_‚
 
de°roy
);

113 
kØ_byãs_t
 *
kØ_fixed_c›y_¸óã
(c⁄° 
uöt8_t
 *
d©a
, 
size_t
 
d©a_Àn
);

115 
kØ_fixed_de°roy
(*
d©a
);

116 
kØ_fixed_£rülize
(
avro_wrôî_t
 
wrôî
, *
d©a
);

117 
kØ_byãs_t
 *
kØ_fixed_de£rülize
(
avro_ªadî_t
 
ªadî
, *
c⁄ãxt
);

118 
size_t
 
kØ_fixed_gë_size
(*
d©a
);

122 
kØ_boﬁón_£rülize
(
avro_wrôî_t
 
wrôî
, *
d©a
);

123 
öt8_t
 *
kØ_boﬁón_de£rülize
(
avro_ªadî_t
 
ªadî
);

124 
size_t
 
kØ_boﬁón_gë_size
(*
d©a
);

128 
kØ_öt_£rülize
(
avro_wrôî_t
 
wrôî
, *
d©a
);

129 
öt32_t
 *
kØ_öt_de£rülize
(
avro_ªadî_t
 
ªadî
);

130 
size_t
 
kØ_öt_gë_size
(*
d©a
);

134 
kØ_l⁄g_£rülize
(
avro_wrôî_t
 
wrôî
, *
d©a
);

135 
öt64_t
 *
kØ_l⁄g_de£rülize
(
avro_ªadî_t
 
ªadî
);

136 
size_t
 
kØ_l⁄g_gë_size
(*
d©a
);

140 
kØ_íum_£rülize
(
avro_wrôî_t
 
wrôî
, *
d©a
);

141 *
kØ_íum_de£rülize
(
avro_ªadî_t
 
ªadî
);

142 
size_t
 
kØ_íum_gë_size
(*
d©a
);

146 
kØ_Êﬂt_£rülize
(
avro_wrôî_t
 
wrôî
, *
d©a
);

147 *
kØ_Êﬂt_de£rülize
(
avro_ªadî_t
 
ªadî
);

148 
size_t
 
kØ_Êﬂt_gë_size
(*
d©a
);

152 
kØ_doubÀ_£rülize
(
avro_wrôî_t
 
wrôî
, *
d©a
);

153 *
kØ_doubÀ_de£rülize
(
avro_ªadî_t
 
ªadî
);

154 
size_t
 
kØ_doubÀ_gë_size
(*
d©a
);

158 
kØ_¨øy_£rülize
(
avro_wrôî_t
 
wrôî
, 
kØ_li°_t
 *
¨øy
, 
£rülize_‚
 
£rülize
);

159 
kØ_li°_t
 *
kØ_¨øy_de£rülize_wo_˘x
(
avro_ªadî_t
 
ªadî
, 
de£rülize_wo_˘x_‚
 
de£rülize
);

160 
kØ_li°_t
 *
kØ_¨øy_de£rülize_w_˘x
(
avro_ªadî_t
 
ªadî
, 
de£rülize_w_˘x_‚
 
de£rülize
, *
de£rülize_c⁄ãxt
);

161 
size_t
 
kØ_¨øy_gë_size
(
kØ_li°_t
 *
¨øy
, 
gë_size_‚
 
gë_size
);

165 
kØ_nuŒ_£rülize
(
avro_wrôî_t
 
wrôî
, *
d©a
);

166 *
kØ_nuŒ_de£rülize
(
avro_ªadî_t
 
ªadî
);

167 
kØ_nuŒ_de°roy
(*
d©a
);

168 
size_t
 
kØ_nuŒ_gë_size
(* 
d©a
);

170 
kØ_d©a_de°roy
(*
d©a
);

172 
size_t
 
avro_l⁄g_gë_size
(
öt64_t
 
l
);

174 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/kaa_context.h

24 #i‚de‡
KAA_CONTEXT_H_


25 
	#KAA_CONTEXT_H_


	)

27 #ifde‡
__˝lu•lus


32 
kØ_°©us_t
;

33 
kØ_∂©f‹m_¥Ÿocﬁ_t
;

34 
kØ_°©us_hﬁdî_t
;

35 
kØ_boŸ°øp_m™agî_t
;

36 
kØ_ch™√l_m™agî_t
;

37 
kØ_¥ofûe_m™agî_t
;

38 
kØ_u£r_m™agî_t
;

39 
kØ_evít_m™agî_t
;

40 
kØ_log_cﬁÀ˘‹
;

41 
kØ_c⁄figuøti⁄_m™agî
;

42 
kØ_nŸifiˇti⁄_m™agî_t
;

43 
kØ_loggî_t
;

44 
kØ_Áûovî_°øãgy_t
;

50 
	skØ_c⁄ãxt_s
 {

51 
kØ_°©us_hﬁdî_t
 *
°©us
;

52 
kØ_∂©f‹m_¥Ÿocﬁ_t
 *
∂©f‹m_¥Ÿocﬁ
;

53 
kØ_boŸ°øp_m™agî_t
 *
boŸ°øp_m™agî
;

54 
kØ_ch™√l_m™agî_t
 *
ch™√l_m™agî
;

55 
kØ_¥ofûe_m™agî_t
 *
¥ofûe_m™agî
;

56 
kØ_u£r_m™agî_t
 *
u£r_m™agî
;

57 
kØ_evít_m™agî_t
 *
evít_m™agî
;

58 
kØ_log_cﬁÀ˘‹_t
 *
log_cﬁÀ˘‹
;

59 
kØ_c⁄figuøti⁄_m™agî_t
 *
c⁄figuøti⁄_m™agî
;

60 
kØ_loggî_t
 *
loggî
;

61 
kØ_nŸifiˇti⁄_m™agî_t
 *
nŸifiˇti⁄_m™agî
;

62 
kØ_Áûovî_°øãgy_t
 *
Áûovî_°øãgy
;

63 } 
	tkØ_c⁄ãxt_t
;

65 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/kaa_defaults.h

17 #i‚de‡
KAA_DEFAULTS_H_


18 
	#KAA_DEFAULTS_H_


	)

26 
	~"kØ_comm⁄.h
"

28 #ifde‡
__˝lu•lus


32 
	#KAA_BUILD_VERSION
 "0.10.0"

	)

33 
	#KAA_BUILD_COMMIT_HASH
 ""

	)

35 
	#KAA_SDK_TOKEN
 "Ik72lyuZez-SN9kj27tOAn9qsBc"

	)

37 
	#KAA_PROFILE_SCHEMA_VERSION
 0

	)

39 
	#DEFAULT_USER_VERIFIER_TOKEN
 "75573328582256784833"

	)

41 
	#KAA_SYNC_TIMEOUT
 60000L

	)

52 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 
¥Ÿocﬁ_id
;

53 
kØ_ac˚ss_poöt_t
 
ac˚ss_poöt
;

54 } 
	tkØ_boŸ°øp_£rvî_c⁄√˘i⁄_d©a_t
;

56 
	#KAA_BOOTSTRAP_ACCESS_POINT_COUNT
 2

	)

58 c⁄° 
kØ_boŸ°øp_£rvî_c⁄√˘i⁄_d©a_t
 
KAA_BOOTSTRAP_ACCESS_POINTS
[
KAA_BOOTSTRAP_ACCESS_POINT_COUNT
] =

81 
	#KAA_CONFIGURATION_DATA_LENGTH
 1

	)

83 c⁄° 
KAA_CONFIGURATION_DATA
[
KAA_CONFIGURATION_DATA_LENGTH
] =

87 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/kaa_error.h

24 #i‚de‡
KAA_ERROR_H_


25 
	#KAA_ERROR_H_


	)

27 #ifde‡
__˝lu•lus


32 
KAA_ERR_NONE
 = 0,

35 
KAA_ERR_GENERIC
 = -1,

36 
KAA_ERR_NOMEM
 = -2,

37 
KAA_ERR_BADDATA
 = -3,

38 
KAA_ERR_BADPARAM
 = -4,

39 
KAA_ERR_READ_FAILED
 = -5,

40 
KAA_ERR_WRITE_FAILED
 = -6,

41 
KAA_ERR_NOT_FOUND
 = -7,

42 
KAA_ERR_NOT_INITIALIZED
 = -8,

43 
KAA_ERR_BAD_STATE
 = -9,

44 
KAA_ERR_INVALID_PUB_KEY
 = -10,

45 
KAA_ERR_INVALID_BUFFER_SIZE
 = -11,

46 
KAA_ERR_UNSUPPORTED
 = -12,

47 
KAA_ERR_BAD_PROTOCOL_ID
 = -13,

48 
KAA_ERR_BAD_PROTOCOL_VERSION
 = -14,

49 
KAA_ERR_INSUFFICIENT_BUFFER
 = -15,

50 
KAA_ERR_ALREADY_EXISTS
 = -16,

51 
KAA_ERR_TIMEOUT
 = -17,

52 
KAA_ERR_PROFILE_IS_NOT_SET
 = -18,

54 
KAA_ERR_SDK_STOP
 = -19,

56 
KAA_ERR_EVENT_NOT_ATTACHED
 = -41,

57 
KAA_ERR_EVENT_BAD_FQN
 = -42,

58 
KAA_ERR_EVENT_TRX_NOT_FOUND
 = -43,

60 
KAA_ERR_BUFFER_IS_NOT_ENOUGH
 = -51,

61 
KAA_ERR_BUFFER_INVALID_SIZE
 = -52,

63 
KAA_ERR_SOCKET_ERROR
 = -91,

64 
KAA_ERR_SOCKET_CONNECT_ERROR
 = -92,

65 
KAA_ERR_SOCKET_INVALID_FAMILY
 = -93,

67 
KAA_ERR_TCPCHANNEL_AP_RESOLVE_FAILED
 = -101,

68 
KAA_ERR_TCPCHANNEL_PARSER_INIT_FAILED
 = -102,

69 
KAA_ERR_TCPCHANNEL_PARSER_ERROR
 = -103,

70 } 
	tkØ_îr‹_t
;

72 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/kaa_extension.c

17 
	~"kØ_exãnsi⁄.h
"

19 
	~<kØ_exãnsi⁄_¥iv©e.h
>

21 
	~<°ddef.h
>

23 
	#EXTENSION_COUNT
 ((
kØ_exãnsi⁄s
)/(*kØ_exãnsi⁄s))

	)

25 
	#EXTENSION_NOT_FOUND
 ((
size_t
)-1)

	)

30 *
	gkØ_exãnsi⁄_c⁄ãxts
[
EXTENSION_COUNT
] = { 
NULL
 };

35 
size_t
 
	$exãnsi⁄_id_to_idx
(
kØ_exãnsi⁄_id
 
id
)

37 
size_t
 
i
 = 0; i < 
EXTENSION_COUNT
; ++i) {

38 i‡(
kØ_exãnsi⁄s
[
i
]->
id
 == id) {

39  
i
;

42  
EXTENSION_NOT_FOUND
;

43 
	}
}

45 c⁄° 
kØ_exãnsi⁄
 *
	$kØ_exãnsi⁄_gë
(
kØ_exãnsi⁄_id
 
id
)

47 
size_t
 
idx
 = 
	`exãnsi⁄_id_to_idx
(
id
);

48  
idx
 =
EXTENSION_NOT_FOUND
 ? 
NULL
 : 
kØ_exãnsi⁄s
[idx];

49 
	}
}

51 *
	$kØ_exãnsi⁄_gë_c⁄ãxt
(
kØ_exãnsi⁄_id
 
id
)

53 
size_t
 
idx
 = 
	`exãnsi⁄_id_to_idx
(
id
);

54  
idx
 =
EXTENSION_NOT_FOUND
 ? 
NULL
 : 
kØ_exãnsi⁄_c⁄ãxts
[idx];

55 
	}
}

57 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_£t_c⁄ãxt
(
kØ_exãnsi⁄_id
 
id
, *
c⁄ãxt
)

59 
size_t
 
idx
 = 
	`exãnsi⁄_id_to_idx
(
id
);

60 i‡(
idx
 =
EXTENSION_NOT_FOUND
) {

61  
KAA_ERR_NOT_FOUND
;

64 
kØ_exãnsi⁄_c⁄ãxts
[
idx
] = 
c⁄ãxt
;

65  
KAA_ERR_NONE
;

66 
	}
}

68 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_öô_Æl
(
kØ_c⁄ãxt_s
 *
kØ_c⁄ãxt
)

70 
kØ_îr‹_t
 
ªsu…
 = 
KAA_ERR_NONE
;

72 
size_t
 
i
 = 0;

73 ; 
i
 < 
EXTENSION_COUNT
; ++i) {

74 
ªsu…
 = 
kØ_exãnsi⁄s
[
i
]->
	`öô
(
kØ_c⁄ãxt
, &
kØ_exãnsi⁄_c⁄ãxts
[i]);

75 i‡(
ªsu…
 !
KAA_ERR_NONE
) {

80 i‡(
ªsu…
 !
KAA_ERR_NONE
) {

81 
i
 > 0) {

82 --
i
;

83 
kØ_exãnsi⁄s
[
i
]->
	`deöô
(
kØ_exãnsi⁄_c⁄ãxts
[i]);

87  
ªsu…
;

88 
	}
}

90 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_deöô_Æl
()

92 
kØ_îr‹_t
 
ªsu…
 = 
KAA_ERR_NONE
;

94 
size_t
 
i
 = 
EXTENSION_COUNT
; i > 0;) {

95 --
i
;

97 
kØ_îr‹_t
 
ªs
 = 
kØ_exãnsi⁄s
[
i
]->
	`deöô
(
kØ_exãnsi⁄_c⁄ãxts
[i]);

98 i‡(
ªs
 !
KAA_ERR_NONE
) {

99 
ªsu…
 = 
ªs
;

103  
ªsu…
;

104 
	}
}

106 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_ªque°_£rülize
(
kØ_exãnsi⁄_id
 
id
, 
uöt32_t
 
ªque°_id
,

107 
uöt8_t
 *
buf„r
, 
size_t
 *
size
, 
boﬁ
 *
sync_√eded
)

109 
size_t
 
idx
 = 
	`exãnsi⁄_id_to_idx
(
id
);

110 i‡(
idx
 =
EXTENSION_NOT_FOUND
) {

111  
KAA_ERR_NOT_FOUND
;

114  
kØ_exãnsi⁄s
[
idx
]->
	`ªque°_£rülize
(
kØ_exãnsi⁄_c⁄ãxts
[idx], 
ªque°_id
,

115 
buf„r
, 
size
, 
sync_√eded
);

116 
	}
}

118 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_£rvî_sync
(
kØ_exãnsi⁄_id
 
id
, 
uöt32_t
 
ªque°_id
,

119 
uöt16_t
 
exãnsi⁄_›ti⁄s
, c⁄° 
uöt8_t
 *
buf„r
, 
size_t
 
size
)

121 
size_t
 
idx
 = 
	`exãnsi⁄_id_to_idx
(
id
);

122 i‡(
idx
 =
EXTENSION_NOT_FOUND
) {

123  
KAA_ERR_NOT_FOUND
;

126  
kØ_exãnsi⁄s
[
idx
]->
	`£rvî_sync
(
kØ_exãnsi⁄_c⁄ãxts
[idx], 
ªque°_id
,

127 
exãnsi⁄_›ti⁄s
, 
buf„r
, 
size
);

128 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/kaa_extension.h

22 #i‚de‡
KAA_EXTENSION_H


23 
	#KAA_EXTENSION_H


	)

25 
	~<kØ_comm⁄.h
>

26 
	~<kØ_îr‹.h
>

27 
	~<°ddef.h
>

28 
	~<°dboﬁ.h
>

30 #ifde‡
__˝lu•lus


35 
kØ_c⁄ãxt_s
;

40 
	skØ_exãnsi⁄
 {

41 
kØ_exãnsi⁄_id
 
id
;

50 
kØ_îr‹_t
 (*
öô
)(
kØ_c⁄ãxt_s
 *
kØ_c⁄ãxt
, **
c⁄ãxt
);

60 
kØ_îr‹_t
 (*
deöô
)(*
c⁄ãxt
);

92 
kØ_îr‹_t
 (*
ªque°_£rülize
)(*
c⁄ãxt
, 
uöt32_t
 
ªque°_id
,

93 
uöt8_t
 *
buf„r
, 
size_t
 *
size
, 
boﬁ
 *
sync_√eded
);

115 
kØ_îr‹_t
 (*
£rvî_sync
)(*
c⁄ãxt
, 
uöt32_t
 
ªque°_id
,

116 
uöt16_t
 
exãnsi⁄_›ti⁄s
, c⁄° 
uöt8_t
 *
buf„r
, 
size_t
 
size
);

124 c⁄° 
kØ_exãnsi⁄
 *
kØ_exãnsi⁄_gë
(
kØ_exãnsi⁄_id
 
id
);

131 *
kØ_exãnsi⁄_gë_c⁄ãxt
(
kØ_exãnsi⁄_id
 
id
);

140 
kØ_îr‹_t
 
kØ_exãnsi⁄_£t_c⁄ãxt
(
kØ_exãnsi⁄_id
 
id
, *
c⁄ãxt
);

148 
kØ_îr‹_t
 
kØ_exãnsi⁄_öô_Æl
(
kØ_c⁄ãxt_s
 *
kØ_c⁄ãxt
);

165 
kØ_îr‹_t
 
kØ_exãnsi⁄_deöô_Æl
();

172 
kØ_îr‹_t
 
kØ_exãnsi⁄_ªque°_£rülize
(
kØ_exãnsi⁄_id
 
id
, 
uöt32_t
 
ªque°_id
,

173 
uöt8_t
 *
buf„r
, 
size_t
 *
size
, 
boﬁ
 *
sync_√eded
);

180 
kØ_îr‹_t
 
kØ_exãnsi⁄_£rvî_sync
(
kØ_exãnsi⁄_id
 
id
, 
uöt32_t
 
ªque°_id
,

181 
uöt16_t
 
exãnsi⁄_›ti⁄s
, c⁄° 
uöt8_t
 *
buf„r
, 
size_t
 
size
);

183 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/kaa_extension_private.h

30 
	~<kØ_comm⁄.h
>

32 
	~"kØ_¥iv©e.h
"

38 
kØ_exãnsi⁄
 
	gkØ_exãnsi⁄_boŸ°øp
 = {

39 .
id
 = 
KAA_EXTENSION_BOOTSTRAP
,

40 .
	göô
 = 
kØ_exãnsi⁄_boŸ°øp_öô
,

41 .
	gdeöô
 = 
kØ_exãnsi⁄_boŸ°øp_deöô
,

42 .
	gªque°_£rülize
 = 
kØ_exãnsi⁄_boŸ°øp_ªque°_£rülize
,

43 .
	g£rvî_sync
 = 
kØ_exãnsi⁄_boŸ°øp_£rvî_sync
,

46 #i‚de‡
KAA_DISABLE_FEATURE_PROFILE


47 
kØ_exãnsi⁄
 
	gkØ_exãnsi⁄_¥ofûe
 = {

48 .
id
 = 
KAA_EXTENSION_PROFILE
,

49 .
	göô
 = 
kØ_exãnsi⁄_¥ofûe_öô
,

50 .
	gdeöô
 = 
kØ_exãnsi⁄_¥ofûe_deöô
,

51 .
	gªque°_£rülize
 = 
kØ_exãnsi⁄_¥ofûe_ªque°_£rülize
,

52 .
	g£rvî_sync
 = 
kØ_exãnsi⁄_¥ofûe_£rvî_sync
,

56 #i‚de‡
KAA_DISABLE_FEATURE_EVENTS


57 
kØ_exãnsi⁄
 
	gkØ_exãnsi⁄_evít
 = {

58 .
id
 = 
KAA_EXTENSION_EVENT
,

59 .
	göô
 = 
kØ_exãnsi⁄_evít_öô
,

60 .
	gdeöô
 = 
kØ_exãnsi⁄_evít_deöô
,

61 .
	gªque°_£rülize
 = 
kØ_exãnsi⁄_evít_ªque°_£rülize
,

62 .
	g£rvî_sync
 = 
kØ_exãnsi⁄_evít_£rvî_sync
,

66 #i‚de‡
KAA_DISABLE_FEATURE_LOGGING


67 
kØ_exãnsi⁄
 
	gkØ_exãnsi⁄_loggög
 = {

68 .
id
 = 
KAA_EXTENSION_LOGGING
,

69 .
	göô
 = 
kØ_exãnsi⁄_loggög_öô
,

70 .
	gdeöô
 = 
kØ_exãnsi⁄_loggög_deöô
,

71 .
	gªque°_£rülize
 = 
kØ_exãnsi⁄_loggög_ªque°_£rülize
,

72 .
	g£rvî_sync
 = 
kØ_exãnsi⁄_loggög_£rvî_sync
,

76 #i‚de‡
KAA_DISABLE_FEATURE_CONFIGURATION


77 
kØ_exãnsi⁄
 
	gkØ_exãnsi⁄_c⁄figuøti⁄
 = {

78 .
id
 = 
KAA_EXTENSION_CONFIGURATION
,

79 .
	göô
 = 
kØ_exãnsi⁄_c⁄figuøti⁄_öô
,

80 .
	gdeöô
 = 
kØ_exãnsi⁄_c⁄figuøti⁄_deöô
,

81 .
	gªque°_£rülize
 = 
kØ_exãnsi⁄_c⁄figuøti⁄_ªque°_£rülize
,

82 .
	g£rvî_sync
 = 
kØ_exãnsi⁄_c⁄figuøti⁄_£rvî_sync
,

86 #i‚de‡
KAA_DISABLE_FEATURE_NOTIFICATION


87 
kØ_exãnsi⁄
 
	gkØ_exãnsi⁄_nŸifiˇti⁄
 = {

88 .
id
 = 
KAA_EXTENSION_NOTIFICATION
,

89 .
	göô
 = 
kØ_exãnsi⁄_nŸifiˇti⁄_öô
,

90 .
	gdeöô
 = 
kØ_exãnsi⁄_nŸifiˇti⁄_deöô
,

91 .
	gªque°_£rülize
 = 
kØ_exãnsi⁄_nŸifiˇti⁄_ªque°_£rülize
,

92 .
	g£rvî_sync
 = 
kØ_exãnsi⁄_nŸifiˇti⁄_£rvî_sync
,

96 #i‚de‡
KAA_DISABLE_FEATURE_USER


97 
kØ_exãnsi⁄
 
	gkØ_exãnsi⁄_u£r
 = {

98 .
id
 = 
KAA_EXTENSION_USER
,

99 .
	göô
 = 
kØ_exãnsi⁄_u£r_öô
,

100 .
	gdeöô
 = 
kØ_exãnsi⁄_u£r_deöô
,

101 .
	gªque°_£rülize
 = 
kØ_exãnsi⁄_u£r_ªque°_£rülize
,

102 .
	g£rvî_sync
 = 
kØ_exãnsi⁄_u£r_£rvî_sync
,

108 c⁄° 
kØ_exãnsi⁄
 *
	gkØ_exãnsi⁄s
[] = {

109 &
kØ_exãnsi⁄_boŸ°øp
,

111 #i‚de‡
KAA_DISABLE_FEATURE_PROFILE


112 &
kØ_exãnsi⁄_¥ofûe
,

115 #i‚de‡
KAA_DISABLE_FEATURE_EVENTS


116 &
kØ_exãnsi⁄_evít
,

119 #i‚de‡
KAA_DISABLE_FEATURE_LOGGING


120 &
kØ_exãnsi⁄_loggög
,

123 #i‚de‡
KAA_DISABLE_FEATURE_CONFIGURATION


124 &
kØ_exãnsi⁄_c⁄figuøti⁄
,

127 #i‚de‡
KAA_DISABLE_FEATURE_NOTIFICATION


128 &
kØ_exãnsi⁄_nŸifiˇti⁄
,

131 #i‚de‡
KAA_DISABLE_FEATURE_USER


132 &
kØ_exãnsi⁄_u£r
,

	@/var/www/html/debian/gateway/kaa/src/kaa/kaa_platform_common.h

17 #i‚de‡
KAA_PLATFORM_COMMON_H_


18 
	#KAA_PLATFORM_COMMON_H_


	)

20 #ifde‡
__˝lu•lus


24 
	#KAA_PLATFORM_PROTOCOL_VERSION
 1

	)

25 
	#KAA_PLATFORM_PROTOCOL_ID
 0x3553c66f

	)

27 
	#KAA_ALIGNMENT
 4

	)

32 
	#KAA_PROTOCOL_ID_SIZE
 4

	)

33 
	#KAA_PROTOCOL_VERSION_SIZE
 2

	)

34 
	#KAA_PROTOCOL_EXTENSIONS_COUNT_SIZE
 2

	)

35 
	#KAA_PROTOCOL_MESSAGE_HEADER_SIZE
 (
KAA_PROTOCOL_ID_SIZE
 + 
KAA_PROTOCOL_VERSION_SIZE
 + 
KAA_PROTOCOL_EXTENSIONS_COUNT_SIZE
)

	)

37 
	#KAA_EXTENSION_TYPE_SIZE
 2

	)

38 
	#KAA_EXTENSION_OPTIONS_SIZE
 2

	)

39 
	#KAA_EXTENSION_PAYLOAD_LENGTH_SIZE
 4

	)

40 
	#KAA_EXTENSION_HEADER_SIZE
 (
KAA_EXTENSION_TYPE_SIZE
 + 
KAA_EXTENSION_OPTIONS_SIZE
 + 
KAA_EXTENSION_PAYLOAD_LENGTH_SIZE
)

	)

43 
	#KAA_SDK_TOKEN_LENGTH
 27

	)

49 
TIMEOUT_VALUE
 = 0x1,

50 
PUBLIC_KEY_HASH_VALUE
 = 0x2,

51 
PROFILE_HASH_VALUE
 = 0x4,

52 
APP_TOKEN_VALUE
 = 0x8

53 } 
	tkØ_mëa_d©a_exãnsi⁄_›ti⁄s_t
;

59 
CONFIG_SCHEMA_VERSION_VALUE
 = 0x0,

60 
PROFILE_SCHEMA_VERSION_VALUE
 = 0x1,

61 
SYS_NF_VERSION_VALUE
 = 0x2,

62 
USER_NF_VERSION_VALUE
 = 0x3,

63 
LOG_SCHEMA_VERSION_VALUE
 = 0x4,

64 
EVENT_FAMILY_VERSIONS_COUNT_VALUE
 = 0x5,

65 
PUB_KEY_VALUE
 = 0x6,

66 
ACCESS_TOKEN_VALUE
 = 0x7

67 } 
	tkØ_¥ofûe_exãnsi⁄_›ti⁄s_t
;

71 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/kaa_platform_protocol.c

17 
	~"kØ_¥iv©e.h
"

19 
	~<°döt.h
>

20 
	~<°dboﬁ.h
>

21 
	~<°rög.h
>

22 
	~"∂©f‹m/°dio.h
"

23 
	~"∂©f‹m/ext_sha.h
"

24 
	~"∂©f‹m/sock.h
"

25 
	~"kØ_°©us.h
"

26 
	~"kØ_∂©f‹m_¥Ÿocﬁ.h
"

27 
	~"utûôõs/kØ_mem.h
"

28 
	~"utûôõs/kØ_log.h
"

29 
	~"kØ_deÁu…s.h
"

31 
	~"kØ_∂©f‹m_comm⁄.h
"

32 
	~"kØ_∂©f‹m_utûs.h
"

34 
	~<kØ_exãnsi⁄.h
>

36 #i‚de‡
KAA_DISABLE_FEATURE_PROFILE


37 
	~"kØ_¥ofûe_¥iv©e.h
"

41 
	#KAA_PROFILE_RESYNC_FLAG
 0x1

	)

43 c⁄° 
size_t
 
	gkØ_mëa_d©a_ªque°_size
 =

44 
KAA_EXTENSION_HEADER_SIZE
 +

45 (
uöt32_t
) +

46 (
uöt32_t
) +

47 
KAA_ALIGNED_SIZE
(
SHA_1_DIGEST_LENGTH
) +

48 
KAA_ALIGNED_SIZE
(
SHA_1_DIGEST_LENGTH
) +

49 
KAA_ALIGNED_SIZE
(
KAA_SDK_TOKEN_LENGTH
);

51 
	skØ_∂©f‹m_¥Ÿocﬁ_t


53 
kØ_°©us_t
 *
	m°©us
;

54 
kØ_loggî_t
 *
	mloggî
;

55 
uöt32_t
 
	mªque°_id
;

62 
kØ_îr‹_t
 
gë_exãnsi⁄_ªque°_size
(
kØ_exãnsi⁄_id
 
id
, 
size_t
 *
size
);

64 
kØ_îr‹_t
 
	$kØ_mëa_d©a_ªque°_£rülize
(
kØ_∂©f‹m_¥Ÿocﬁ_t
 *
£lf
,

65 
kØ_∂©f‹m_mesßge_wrôî_t
 *
wrôî
, 
uöt32_t
 
ªque°_id
)

68 i‡(!
£lf
 || !£lf->
°©us
 || !
wrôî
) {

69  
KAA_ERR_BADPARAM
;

72 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "GoingÅo serialize client meta sync");

74 
uöt16_t
 
›ti⁄s
 = 
TIMEOUT_VALUE
 | 
PUBLIC_KEY_HASH_VALUE
 | 
PROFILE_HASH_VALUE
 | 
APP_TOKEN_VALUE
;

76 c⁄° 
size_t
 
∑ylﬂd_Àngth
 = 
kØ_mëa_d©a_ªque°_size
 - 
KAA_EXTENSION_HEADER_SIZE
;

78 
kØ_îr‹_t
 
îr_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe_exãnsi⁄_hódî
(
wrôî
,

79 
KAA_EXTENSION_META_DATA
, 
›ti⁄s
, 
∑ylﬂd_Àngth
);

80 i‡(
îr_code
) {

81  
îr_code
;

84 
uöt32_t
 
ªque°_id_√tw‹k
 = 
	`KAA_HTONL
(
ªque°_id
);

85 
îr_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
wrôî
, &
ªque°_id_√tw‹k
, (
uöt32_t
));

86 i‡(
îr_code
) {

87  
îr_code
;

90 
uöt32_t
 
timeout
 = 
	`KAA_HTONL
(
KAA_SYNC_TIMEOUT
);

91 
îr_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
wrôî
, &
timeout
, (timeout));

92 i‡(
îr_code
) {

93  
îr_code
;

96 
îr_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe_Æig√d
(
wrôî
,

97 
£lf
->
°©us
->
ídpoöt_public_key_hash
, 
SHA_1_DIGEST_LENGTH
);

98 i‡(
îr_code
) {

99  
îr_code
;

102 
îr_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe_Æig√d
(
wrôî
,

103 
£lf
->
°©us
->
¥ofûe_hash
, 
SHA_1_DIGEST_LENGTH
);

104 i‡(
îr_code
) {

105  
îr_code
;

108 
îr_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe_Æig√d
(
wrôî
, 
KAA_SDK_TOKEN
, 
KAA_SDK_TOKEN_LENGTH
);

110 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
,

111 "Më®sync:ÖaylﬂdÜígth '%u',Ñeque° id '%u'", 
∑ylﬂd_Àngth
, 
ªque°_id
);

113  
îr_code
;

114 
	}
}

116 
kØ_îr‹_t
 
	$kØ_∂©f‹m_¥Ÿocﬁ_¸óã
(
kØ_∂©f‹m_¥Ÿocﬁ_t
 **
∂©f‹m_¥Ÿocﬁ_p
,

117 
kØ_loggî_t
 *
loggî
, 
kØ_°©us_t
 *
°©us
)

119 i‡(!
∂©f‹m_¥Ÿocﬁ_p
 || !
loggî
 || !
°©us
) {

120  
KAA_ERR_BADPARAM
;

123 *
∂©f‹m_¥Ÿocﬁ_p
 = 
	`KAA_MALLOC
((**platform_protocol_p));

124 i‡(!*
∂©f‹m_¥Ÿocﬁ_p
) {

125  
KAA_ERR_NOMEM
;

128 **
∂©f‹m_¥Ÿocﬁ_p
 = (
kØ_∂©f‹m_¥Ÿocﬁ_t
){

129 .
ªque°_id
 = 0,

130 .
°©us
 = status,

131 .
loggî
 =Üogger,

134  
KAA_ERR_NONE
;

135 
	}
}

137 
	$kØ_∂©f‹m_¥Ÿocﬁ_de°roy
(
kØ_∂©f‹m_¥Ÿocﬁ_t
 *
£lf
)

139 
	`KAA_FREE
(
£lf
);

140 
	}
}

142 
kØ_îr‹_t
 
	$kØ_˛õ¡_sync_gë_size
(
kØ_∂©f‹m_¥Ÿocﬁ_t
 *
£lf
,

143 c⁄° 
kØ_exãnsi⁄_id
 *
exãnsi⁄s
,

144 c⁄° 
size_t
 
exãnsi⁄_cou¡
,

145 
size_t
 *
ex≥˘ed_size
)

148 i‡(!
£lf
 || !
exãnsi⁄s
 || !
ex≥˘ed_size
 || 
exãnsi⁄_cou¡
 == 0) {

149  
KAA_ERR_BADPARAM
;

152 *
ex≥˘ed_size
 = 
KAA_PROTOCOL_MESSAGE_HEADER_SIZE
 + 
kØ_mëa_d©a_ªque°_size
;

154 
size_t
 
i
 = 0; i < 
exãnsi⁄_cou¡
; ++i) {

155 
size_t
 
exãnsi⁄_size
 = 0;

157 
kØ_îr‹_t
 
îr‹
 = 
	`gë_exãnsi⁄_ªque°_size
(
exãnsi⁄s
[
i
], &
exãnsi⁄_size
);

158 i‡(
îr‹
 &&Éº‹ !
KAA_ERR_NOT_FOUND
) {

159 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹
,

160 "FaûedÅÿquîyÉxãnsi⁄ sizêf‹ %u", 
exãnsi⁄s
[
i
]);

161  
îr‹
;

164 *
ex≥˘ed_size
 +
exãnsi⁄_size
;

167  
KAA_ERR_NONE
;

168 
	}
}

170 
kØ_îr‹_t
 
	$kØ_˛õ¡_sync_£rülize
(
kØ_∂©f‹m_¥Ÿocﬁ_t
 *
£lf
,

171 c⁄° 
kØ_exãnsi⁄_id
 
£rvi˚s
[], 
size_t
 
£rvi˚s_cou¡
, 
uöt8_t
 *
buf„r
, size_à*
size
)

173 
kØ_∂©f‹m_mesßge_wrôî_t
 
wrôî
 = 
	`KAA_MESSAGE_WRITER
(
buf„r
, *
size
);

175 
uöt16_t
 
tŸÆ_£rvi˚s_cou¡
 = 
£rvi˚s_cou¡
 + 1 ;

177 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_hódî_wrôe
(&
wrôî
,

178 
KAA_PLATFORM_PROTOCOL_ID
, 
KAA_PLATFORM_PROTOCOL_VERSION
);

179 i‡(
îr‹_code
) {

180 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹_code
, "FailedÅo writeÅhe client sync header");

181 
Áû
;

184 
uöt16_t
 *
exãnsi⁄_cou¡_p
 = (uöt16_à*)
wrôî
.
cuºít
;

185 
wrôî
.
cuºít
 +
KAA_PROTOCOL_EXTENSIONS_COUNT_SIZE
;

188 
îr‹_code
 = 
	`kØ_mëa_d©a_ªque°_£rülize
(
£lf
, &
wrôî
, sñf->
ªque°_id
);

189 i‡(
îr‹_code
) {

190 
Áû
;

193 !
îr‹_code
 && 
£rvi˚s_cou¡
--) {

194 
size_t
 
size_ªquúed
 = 
wrôî
.
íd
 - wrôî.
cuºít
;

195 
boﬁ
 
√ed_ªsync
 = 
Ál£
;

196 
îr‹_code
 = 
	`kØ_exãnsi⁄_ªque°_£rülize
(
£rvi˚s
[
£rvi˚s_cou¡
],

197 
£lf
->
ªque°_id
, 
wrôî
.
cuºít
, &
size_ªquúed
, &
√ed_ªsync
);

198 i‡(
îr‹_code
) {

199 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹_code
,

200 "FaûedÅÿ£rülizêthê'%d'Éxãnsi⁄", 
£rvi˚s
[
£rvi˚s_cou¡
]);

204 i‡(!
√ed_ªsync
) {

205 --
tŸÆ_£rvi˚s_cou¡
;

209 
wrôî
.
cuºít
 +
size_ªquúed
;

212 *
exãnsi⁄_cou¡_p
 = 
	`KAA_HTONS
(
tŸÆ_£rvi˚s_cou¡
);

213 *
size
 = 
wrôî
.
cuºít
 - wrôî.
begö
;

215 
Áû
:

216  
îr‹_code
;

217 
	}
}

219 
kØ_îr‹_t
 
	$kØ_∂©f‹m_¥Ÿocﬁ_£rülize_˛õ¡_sync
(
kØ_∂©f‹m_¥Ÿocﬁ_t
 *
£lf
,

220 c⁄° 
kØ_exãnsi⁄_id
 *
£rvi˚s
, 
size_t
 
£rvi˚s_cou¡
,

221 
uöt8_t
 *
buf„r
, 
size_t
 *
buf„r_size
)

223 i‡(!
£lf
 || !
buf„r_size
) {

224  
KAA_ERR_BADPARAM
;

227 i‡(!
£rvi˚s
 || 
£rvi˚s_cou¡
 == 0) {

228  
KAA_ERR_BADDATA
;

231 
size_t
 
ªquúed_buf„r_size
 = 0;

232 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_˛õ¡_sync_gë_size
(
£lf
, 
£rvi˚s
, 
£rvi˚s_cou¡
,

233 &
ªquúed_buf„r_size
);

234 i‡(
îr‹
) {

235 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹
, "FailedÅo getÑequired buffer size");

236  
îr‹
;

239 i‡(*
buf„r_size
 < 
ªquúed_buf„r_size
 || !
buf„r
) {

240 *
buf„r_size
 = 
ªquúed_buf„r_size
;

241  
KAA_ERR_BUFFER_IS_NOT_ENOUGH
;

243 *
buf„r_size
 = 
ªquúed_buf„r_size
;

245 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Serializing client sync...");

247 
£lf
->
ªque°_id
++;

248 
îr‹
 = 
	`kØ_˛õ¡_sync_£rülize
(
£lf
, 
£rvi˚s
, 
£rvi˚s_cou¡
, 
buf„r
, 
buf„r_size
);

249 i‡(
îr‹
) {

250 
£lf
->
ªque°_id
--;

251  
îr‹
;

254 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
,

256 
£lf
->
ªque°_id
, *
buf„r_size
);

258  
KAA_ERR_NONE
;

259 
	}
}

262 
__©åibuã__
((
wók
))

263 
kØ_îr‹_t
 
	$kØ_∂©f‹m_¥Ÿocﬁ_¥o˚ss_£rvî_sync
(
kØ_∂©f‹m_¥Ÿocﬁ_t
 *
£lf
,

264 c⁄° 
uöt8_t
 *
buf„r
, 
size_t
 
buf„r_size
)

266 i‡(!
£lf
 || !
buf„r
 || 
buf„r_size
 == 0) {

267  
KAA_ERR_BADPARAM
;

270 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
,

271 "Sîvî syn¯ª˚ived:Öaylﬂd sizê'%zu'", 
buf„r_size
);

273 
kØ_∂©f‹m_mesßge_ªadî_t
 
ªadî
 = 
	`KAA_MESSAGE_READER
(
buf„r
, 
buf„r_size
);

275 
uöt32_t
 
¥Ÿocﬁ_id
 = 0;

276 
uöt16_t
 
¥Ÿocﬁ_vîsi⁄
 = 0;

277 
uöt16_t
 
exãnsi⁄_cou¡
 = 0;

279 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_hódî_ªad
(&
ªadî
,

280 &
¥Ÿocﬁ_id
, &
¥Ÿocﬁ_vîsi⁄
, &
exãnsi⁄_cou¡
);

281 i‡(
îr‹_code
) {

282 
Áû
;

285 i‡(
¥Ÿocﬁ_id
 !
KAA_PLATFORM_PROTOCOL_ID
) {

286 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
KAA_ERR_BAD_PROTOCOL_ID
,

287 "Unsuµ‹ãdÖrŸocﬁ ID %x", 
¥Ÿocﬁ_id
);

288 
îr‹_code
 = 
KAA_ERR_BAD_PROTOCOL_ID
;

289 
Áû
;

292 i‡(
¥Ÿocﬁ_vîsi⁄
 !
KAA_PLATFORM_PROTOCOL_VERSION
) {

293 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
KAA_ERR_BAD_PROTOCOL_VERSION
,

294 "Unsuµ‹ãdÖrŸocﬁ vîsi⁄ %u", 
¥Ÿocﬁ_vîsi⁄
);

295 
îr‹_code
 = 
KAA_ERR_BAD_PROTOCOL_VERSION
;

296 
Áû
;

299 
uöt32_t
 
ªque°_id
 = 0;

301 
	`kØ_∂©f‹m_mesßge_is_buf„r_œrge_íough
(&
ªadî
, 
KAA_PROTOCOL_MESSAGE_HEADER_SIZE
)) {

303 
uöt16_t
 
exãnsi⁄_ty≥
;

304 
uöt16_t
 
exãnsi⁄_›ti⁄s
;

305 
uöt32_t
 
exãnsi⁄_Àngth
;

306 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªad_exãnsi⁄_hódî
(&
ªadî
, &
exãnsi⁄_ty≥
,

307 &
exãnsi⁄_›ti⁄s
, &
exãnsi⁄_Àngth
);

308 i‡(
îr‹_code
) {

309 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹_code
, "FailedÅoÑeadÉxtension header");

310 
Áû
;

316 
£lf
->
°©us
->
¥ofûe_√eds_ªsync
 = 
Ál£
;

318 i‡(
exãnsi⁄_ty≥
 =
KAA_EXTENSION_META_DATA
) {

319 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªad
(&
ªadî
, &
ªque°_id
, (request_id));

320 i‡(
îr‹_code
) {

321 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹_code
, "FailedÅoÑead meta data (request_id)");

322 
Áû
;

325 
ªque°_id
 = 
	`KAA_NTOHL
(request_id);

326 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Sîvî syn¯ªque° id %u", 
ªque°_id
);

330 
uöt32_t
 
ªsync_ªque°
;

331 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªad
(&
ªadî
,

332 &
ªsync_ªque°
, (resync_request));

333 i‡(
îr‹_code
) {

334 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹_code
, "FailedÅoÑead meta data (resync_request)");

335 
Áû
;

338 
ªsync_ªque°
 = 
	`KAA_NTOHL
(resync_request);

339 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
,

340 "SîvîÑesyn¯ªque° %u", 
ªsync_ªque°
);

342 i‡(
ªsync_ªque°
 & 
KAA_PROFILE_RESYNC_FLAG
) {

343 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "ProfileÑesync isÑequested");

344 
£lf
->
°©us
->
¥ofûe_√eds_ªsync
 = 
åue
;

346 #i‚de‡
KAA_DISABLE_FEATURE_PROFILE


347 *
¥ofûe_˘x
 = 
	`kØ_exãnsi⁄_gë_c⁄ãxt
(
KAA_EXTENSION_PROFILE
);

348 i‡(!
¥ofûe_˘x
) {

349 
îr‹_code
 = 
KAA_ERR_NOT_FOUND
;

350 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹_code
,

352 
Áû
;

355 
îr‹_code
 = 
	`kØ_¥ofûe_f‹˚_sync
(
¥ofûe_˘x
);

356 i‡(
îr‹_code
) {

357 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹_code
, "FailedÅo force-syncÖrofile");

358 
Áû
;

363 
îr‹_code
 = 
	`kØ_exãnsi⁄_£rvî_sync
(
exãnsi⁄_ty≥
, 
ªque°_id
,

364 
exãnsi⁄_›ti⁄s
, 
ªadî
.
cuºít
, 
exãnsi⁄_Àngth
);

365 
ªadî
.
cuºít
 +
exãnsi⁄_Àngth
;

367 i‡(
îr‹_code
 =
KAA_ERR_NOT_FOUND
) {

368 
	`KAA_LOG_WARN
(
£lf
->
loggî
, 
KAA_ERR_UNSUPPORTED
,

369 "Unsuµ‹ãdÉxãnsi⁄Ñe˚ived (ty≥ = %u)", 
exãnsi⁄_ty≥
);

370 
îr‹_code
 = 
KAA_ERR_NONE
;

371 } i‡(
îr‹_code
) {

372 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹_code
,

374 
exãnsi⁄_ty≥
);

375 
Áû
;

380 
îr‹_code
 = 
	`kØ_°©us_ßve
(
£lf
->
°©us
);

381 i‡(
îr‹_code
) {

382 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹_code
, "FailedÅo save status");

383 
Áû
;

386 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Server sync successfullyÖrocessed");

388 
Áû
:

389  
îr‹_code
;

390 
	}
}

393 
__©åibuã__
((
wók
))

394 
kØ_îr‹_t
 
	$kØ_∂©f‹m_¥Ÿocﬁ_Æloc_£rülize_˛õ¡_sync
(
kØ_∂©f‹m_¥Ÿocﬁ_t
 *
£lf
,

395 c⁄° 
kØ_exãnsi⁄_id
 *
£rvi˚s
, 
size_t
 
£rvi˚s_cou¡
,

396 
uöt8_t
 **
buf„r
, 
size_t
 *
buf„r_size
)

398 i‡(!
£lf
 || !
buf„r
 || !
buf„r_size
) {

399  
KAA_ERR_BADPARAM
;

402 i‡(!
£rvi˚s
 || 
£rvi˚s_cou¡
 == 0) {

403  
KAA_ERR_BADDATA
;

406 *
buf„r_size
 = 0;

407 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_∂©f‹m_¥Ÿocﬁ_£rülize_˛õ¡_sync
(
£lf
, 
£rvi˚s
, 
£rvi˚s_cou¡
,

408 
NULL
, 
buf„r_size
);

410 i‡(
îr‹
 !
KAA_ERR_BUFFER_IS_NOT_ENOUGH
) {

411  
îr‹
;

414 *
buf„r
 = 
	`KAA_MALLOC
(*
buf„r_size
);

415 i‡(!*
buf„r
) {

416 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
KAA_ERR_NOMEM
, "No memory for buffer");

417  
KAA_ERR_NOMEM
;

420  
	`kØ_∂©f‹m_¥Ÿocﬁ_£rülize_˛õ¡_sync
(
£lf
, 
£rvi˚s
, 
£rvi˚s_cou¡
,

421 *
buf„r
, 
buf„r_size
);

422 
	}
}

424 
kØ_îr‹_t
 
	$gë_exãnsi⁄_ªque°_size
(
kØ_exãnsi⁄_id
 
id
, 
size_t
 *
size
)

426 
boﬁ
 
√ed_ªsync
;

427 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_exãnsi⁄_ªque°_£rülize
(
id
, 0, 
NULL
, 
size
, &
√ed_ªsync
);

428 i‡(
îr‹
 =
KAA_ERR_BUFFER_IS_NOT_ENOUGH
) {

429 
îr‹
 = 
KAA_ERR_NONE
;

432 i‡(!
√ed_ªsync
) {

433 *
size
 = 0;

436  
îr‹
;

437 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/kaa_platform_protocol.h

25 #i‚de‡
KAA_PLATFORM_PROTOCOL_H_


26 
	#KAA_PLATFORM_PROTOCOL_H_


	)

28 
	~<°döt.h
>

29 
	~<°ddef.h
>

31 
	~"kØ_îr‹.h
"

32 
	~"kØ_c⁄ãxt.h
"

33 
	~"kØ_comm⁄.h
"

35 #ifde‡
__˝lu•lus


39 #i‚de‡
KAA_PLATFORM_PRTOCOL_T


40 
	#KAA_PLATFORM_PRTOCOL_T


	)

44 
kØ_∂©f‹m_¥Ÿocﬁ_t
 
	tkØ_∂©f‹m_¥Ÿocﬁ_t
;

51 
kØ_exãnsi⁄_id
 *
	g£rvi˚s
;

52 
size_t
 
	g£rvi˚s_cou¡
;

53 } 
	tkØ_£rülize_öfo_t
;

75 
kØ_îr‹_t
 
kØ_∂©f‹m_¥Ÿocﬁ_£rülize_˛õ¡_sync
(
kØ_∂©f‹m_¥Ÿocﬁ_t
 *
£lf
,

76 c⁄° 
kØ_exãnsi⁄_id
 *
£rvi˚s
, 
size_t
 
£rvi˚s_cou¡
,

77 
uöt8_t
 *
buf„r
, 
size_t
 *
buf„r_size
);

89 
kØ_îr‹_t
 
kØ_∂©f‹m_¥Ÿocﬁ_Æloc_£rülize_˛õ¡_sync
(
kØ_∂©f‹m_¥Ÿocﬁ_t
 *
£lf
,

90 c⁄° 
kØ_exãnsi⁄_id
 *
£rvi˚s
, 
size_t
 
£rvi˚s_cou¡
,

91 
uöt8_t
 **
buf„r
, 
size_t
 *
buf„r_size
);

102 
kØ_îr‹_t
 
kØ_∂©f‹m_¥Ÿocﬁ_¥o˚ss_£rvî_sync
(
kØ_∂©f‹m_¥Ÿocﬁ_t
 *
£lf
,

103 c⁄° 
uöt8_t
 *
buf„r
, 
size_t
 
buf„r_size
);

105 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/kaa_platform_utils.c

17 
	~"kØ_¥iv©e.h
"

19 
	~<°döt.h
>

20 
	~<°rög.h
>

21 
	~"∂©f‹m/sock.h
"

22 
	~<°dboﬁ.h
>

23 
	~"kØ_∂©f‹m_utûs.h
"

25 
	~"kØ_comm⁄.h
"

26 
	~"utûôõs/kØ_mem.h
"

28 
kØ_îr‹_t
 
	$kØ_∂©f‹m_mesßge_wrôî_¸óã
(
kØ_∂©f‹m_mesßge_wrôî_t
** 
wrôî_p


29 , 
uöt8_t
 *
buf


30 , 
size_t
 
Àn
)

32 
	`KAA_RETURN_IF_NIL3
(
wrôî_p
, 
buf
, 
Àn
, 
KAA_ERR_BADPARAM
);

34 *
wrôî_p
 = (
kØ_∂©f‹m_mesßge_wrôî_t
*)
	`KAA_MALLOC
((kaa_platform_message_writer_t));

35 
	`KAA_RETURN_IF_NIL
(*
wrôî_p
, 
KAA_ERR_NOMEM
);

37 (*
wrôî_p
)->
begö
 = 
buf
;

38 (*
wrôî_p
)->
íd
 = 
buf
 + 
Àn
;

39 (*
wrôî_p
)->
cuºít
 = 
buf
;

41  
KAA_ERR_NONE
;

42 
	}
}

46 
	$kØ_∂©f‹m_mesßge_wrôî_de°roy
(
kØ_∂©f‹m_mesßge_wrôî_t
* 
wrôî
)

48 i‡(
wrôî
) {

49 
	`KAA_FREE
(
wrôî
);

51 
	}
}

55 
kØ_îr‹_t
 
	$kØ_∂©f‹m_mesßge_wrôe
(
kØ_∂©f‹m_mesßge_wrôî_t
* 
wrôî


56 , c⁄° *
d©a


57 , 
size_t
 
d©a_size
)

59 
	`KAA_RETURN_IF_NIL3
(
wrôî
, 
d©a
, 
d©a_size
, 
KAA_ERR_BADPARAM
);

61 i‡((
wrôî
->
cuºít
 + 
d©a_size
Ë<wrôî->
íd
) {

62 
	`mem˝y
((*)
wrôî
->
cuºít
, 
d©a
, 
d©a_size
);

63 
wrôî
->
cuºít
 +
d©a_size
;

64  
KAA_ERR_NONE
;

67  
KAA_ERR_WRITE_FAILED
;

68 
	}
}

72 
kØ_îr‹_t
 
	$kØ_∂©f‹m_mesßge_wrôe_Æignmít
(
kØ_∂©f‹m_mesßge_wrôî_t
* 
wrôî
)

74 
	`KAA_RETURN_IF_NIL
(
wrôî
, 
KAA_ERR_BADPARAM
);

76 
size_t
 
Æignmít_size
 = (
KAA_ALIGNMENT
 - ((
wrôî
->
cuºít
 - wrôî->
begö
) % KAA_ALIGNMENT)) % KAA_ALIGNMENT;

77 i‡(!
Æignmít_size
)

78  
KAA_ERR_NONE
;

80 i‡(
wrôî
->
cuºít
 + 
Æignmít_size
 <wrôî->
íd
) {

81 
	`mem£t
((*)
wrôî
->
cuºít
, 0, 
Æignmít_size
);

82 
wrôî
->
cuºít
 +
Æignmít_size
;

83  
KAA_ERR_NONE
;

86  
KAA_ERR_WRITE_FAILED
;

87 
	}
}

90 
kØ_îr‹_t
 
	$kØ_∂©f‹m_mesßge_wrôe_Æig√d
(
kØ_∂©f‹m_mesßge_wrôî_t
* 
wrôî


91 , c⁄° *
d©a


92 , 
size_t
 
d©a_size
)

94 
	`KAA_RETURN_IF_NIL3
(
wrôî
, 
d©a
, 
d©a_size
, 
KAA_ERR_BADPARAM
);

96 
size_t
 
Æig√d_size
 = 
	`kØ_Æig√d_size_gë
(
d©a_size
);

98 i‡((
wrôî
->
cuºít
 + 
Æig√d_size
Ë<wrôî->
íd
) {

99 
	`mem˝y
((*)
wrôî
->
cuºít
, 
d©a
, 
d©a_size
);

100 
	`mem£t
((*)(
wrôî
->
cuºít
 + 
d©a_size
), 0, (
Æig√d_size
 - data_size));

101 
wrôî
->
cuºít
 +
Æig√d_size
;

102  
KAA_ERR_NONE
;

105  
KAA_ERR_WRITE_FAILED
;

106 
	}
}

109 
kØ_îr‹_t
 
	$kØ_∂©f‹m_mesßge_hódî_wrôe
(
kØ_∂©f‹m_mesßge_wrôî_t
* 
wrôî


110 , 
uöt32_t
 
¥Ÿocﬁ_id


111 , 
uöt16_t
 
¥Ÿocﬁ_vîsi⁄
)

113 
	`KAA_RETURN_IF_NIL
(
wrôî
, 
KAA_ERR_BADPARAM
);

115 i‡((
wrôî
->
cuºít
 + 
KAA_PROTOCOL_ID_SIZE
 + 
KAA_PROTOCOL_VERSION_SIZE
Ë<wrôî->
íd
) {

116 *(
uöt32_t
 *Ë
wrôî
->
cuºít
 = 
	`KAA_HTONL
(
¥Ÿocﬁ_id
);

117 
wrôî
->
cuºít
 +
KAA_PROTOCOL_ID_SIZE
;

118 *(
uöt16_t
 *Ë
wrôî
->
cuºít
 = 
	`KAA_HTONS
(
¥Ÿocﬁ_vîsi⁄
);

119 
wrôî
->
cuºít
 +
KAA_PROTOCOL_VERSION_SIZE
;

120  
KAA_ERR_NONE
;

123  
KAA_ERR_WRITE_FAILED
;

124 
	}
}

126 
kØ_îr‹_t
 
	$kØ_∂©f‹m_mesßge_wrôe_exãnsi⁄_hódî
(
kØ_∂©f‹m_mesßge_wrôî_t
* 
wrôî


127 , 
uöt16_t
 
exãnsi⁄_ty≥


128 , 
uöt16_t
 
›ti⁄s


129 , 
uöt32_t
 
∑ylﬂd_size
)

131 
	`KAA_RETURN_IF_NIL
(
wrôî
, 
KAA_ERR_BADPARAM
);

133 i‡((
wrôî
->
cuºít
 + 
KAA_EXTENSION_HEADER_SIZE
Ë<wrôî->
íd
) {

134 
exãnsi⁄_ty≥
 = 
	`KAA_HTONS
(extension_type);

135 
›ti⁄s
 = 
	`KAA_HTONS
(options);

136 
∑ylﬂd_size
 = 
	`KAA_HTONL
(payload_size);

138 
	`mem˝y
((*)
wrôî
->
cuºít
, &
exãnsi⁄_ty≥
, 
KAA_EXTENSION_TYPE_SIZE
);

139 
wrôî
->
cuºít
 +
KAA_EXTENSION_TYPE_SIZE
;

140 
	`mem˝y
((*)
wrôî
->
cuºít
, &
›ti⁄s
, 
KAA_EXTENSION_OPTIONS_SIZE
);

141 
wrôî
->
cuºít
 +
KAA_EXTENSION_OPTIONS_SIZE
;

142 
	`mem˝y
((*)
wrôî
->
cuºít
, &
∑ylﬂd_size
, 
KAA_EXTENSION_PAYLOAD_LENGTH_SIZE
);

143 
wrôî
->
cuºít
 +
KAA_EXTENSION_PAYLOAD_LENGTH_SIZE
;

145  
KAA_ERR_NONE
;

148  
KAA_ERR_WRITE_FAILED
;

149 
	}
}

151 
kØ_îr‹_t
 
	$kØ_∂©f‹m_mesßge_ªadî_¸óã
(
kØ_∂©f‹m_mesßge_ªadî_t
 **
ªadî_p


152 , c⁄° 
uöt8_t
 *
buf„r


153 , 
size_t
 
Àn
)

155 
	`KAA_RETURN_IF_NIL3
(
ªadî_p
, 
buf„r
, 
Àn
, 
KAA_ERR_BADPARAM
);

157 *
ªadî_p
 = (
kØ_∂©f‹m_mesßge_ªadî_t
 *Ë
	`KAA_MALLOC
((kaa_platform_message_reader_t));

158 
	`KAA_RETURN_IF_NIL
(*
ªadî_p
, 
KAA_ERR_NOMEM
);

160 (*
ªadî_p
)->
begö
 = 
buf„r
;

161 (*
ªadî_p
)->
cuºít
 = 
buf„r
;

162 (*
ªadî_p
)->
íd
 = 
buf„r
 + 
Àn
;

164  
KAA_ERR_NONE
;

165 
	}
}

167 
	$kØ_∂©f‹m_mesßge_ªadî_de°roy
(
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî
)

169 i‡(
ªadî
) {

170 
	`KAA_FREE
(
ªadî
);

172 
	}
}

174 
kØ_îr‹_t
 
	$kØ_∂©f‹m_mesßge_ªad
(
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî
, *
buf„r
, 
size_t
 
ex≥˘ed_size
)

176 
	`KAA_RETURN_IF_NIL3
(
ªadî
, 
buf„r
, 
ex≥˘ed_size
, 
KAA_ERR_BADPARAM
);

177 i‡(
ªadî
->
cuºít
 + 
ex≥˘ed_size
 <ªadî->
íd
) {

178 
	`mem˝y
(
buf„r
, 
ªadî
->
cuºít
, 
ex≥˘ed_size
);

179 
ªadî
->
cuºít
 +
ex≥˘ed_size
;

180  
KAA_ERR_NONE
;

182  
KAA_ERR_READ_FAILED
;

183 
	}
}

185 
kØ_îr‹_t
 
	$kØ_∂©f‹m_mesßge_ªad_Æig√d
(
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî


186 , *
buf„r


187 , 
size_t
 
ex≥˘ed_size
)

189 
	`KAA_RETURN_IF_NIL3
(
ªadî
, 
buf„r
, 
ex≥˘ed_size
, 
KAA_ERR_BADPARAM
);

190 
size_t
 
Æig√d_size
 = 
	`kØ_Æig√d_size_gë
(
ex≥˘ed_size
);

191 i‡(
ªadî
->
cuºít
 + 
Æig√d_size
 <ªadî->
íd
) {

192 
	`mem˝y
(
buf„r
, 
ªadî
->
cuºít
, 
ex≥˘ed_size
);

193 
ªadî
->
cuºít
 +
Æig√d_size
;

194  
KAA_ERR_NONE
;

196  
KAA_ERR_READ_FAILED
;

197 
	}
}

201 
kØ_îr‹_t
 
	$kØ_∂©f‹m_mesßge_hódî_ªad
(
kØ_∂©f‹m_mesßge_ªadî_t
* 
ªadî


202 , 
uöt32_t
 *
¥Ÿocﬁ_id


203 , 
uöt16_t
 *
¥Ÿocﬁ_vîsi⁄


204 , 
uöt16_t
 *
exãnsi⁄_cou¡
)

206 
	`KAA_RETURN_IF_NIL4
(
ªadî
, 
¥Ÿocﬁ_id
, 
¥Ÿocﬁ_vîsi⁄
, 
exãnsi⁄_cou¡
, 
KAA_ERR_BADPARAM
);

208 i‡(
ªadî
->
cuºít
 + 
KAA_PROTOCOL_MESSAGE_HEADER_SIZE
 <ªadî->
íd
) {

209 *
¥Ÿocﬁ_id
 = 
	`KAA_NTOHL
(*((c⁄° 
uöt32_t
 *)
ªadî
->
cuºít
));

210 
ªadî
->
cuºít
 +(
uöt32_t
);

211 *
¥Ÿocﬁ_vîsi⁄
 = 
	`KAA_NTOHS
(*((c⁄° 
uöt16_t
 *)
ªadî
->
cuºít
));

212 
ªadî
->
cuºít
 +(
uöt16_t
);

213 *
exãnsi⁄_cou¡
 = 
	`KAA_NTOHS
(*((c⁄° 
uöt16_t
 *)
ªadî
->
cuºít
));

214 
ªadî
->
cuºít
 +(
uöt16_t
);

215  
KAA_ERR_NONE
;

218  
KAA_ERR_READ_FAILED
;

219 
	}
}

223 
kØ_îr‹_t
 
	$kØ_∂©f‹m_mesßge_ªad_exãnsi⁄_hódî
(
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî


224 , 
uöt16_t
 *
exãnsi⁄_ty≥


225 , 
uöt16_t
 *
exãnsi⁄_›ti⁄s


226 , 
uöt32_t
 *
exãnsi⁄_∑ylﬂd_Àngth
)

228 
	`KAA_RETURN_IF_NIL4
(
ªadî
, 
exãnsi⁄_ty≥
, 
exãnsi⁄_›ti⁄s
, 
exãnsi⁄_∑ylﬂd_Àngth
, 
KAA_ERR_BADPARAM
);

230 i‡(
ªadî
->
cuºít
 + 
KAA_EXTENSION_HEADER_SIZE
 <ªadî->
íd
) {

231 
	`mem˝y
(
exãnsi⁄_ty≥
, 
ªadî
->
cuºít
, 
KAA_EXTENSION_OPTIONS_SIZE
);

232 *
exãnsi⁄_ty≥
 = 
	`KAA_NTOHS
(*extension_type);

233 
ªadî
->
cuºít
 +
KAA_EXTENSION_TYPE_SIZE
;

234 
	`mem˝y
(
exãnsi⁄_›ti⁄s
, 
ªadî
->
cuºít
, 
KAA_EXTENSION_OPTIONS_SIZE
);

235 *
exãnsi⁄_›ti⁄s
 = 
	`KAA_NTOHS
(*extension_options);

236 
ªadî
->
cuºít
 +
KAA_EXTENSION_OPTIONS_SIZE
;

237 *
exãnsi⁄_∑ylﬂd_Àngth
 = 
	`KAA_NTOHL
(*((c⁄° 
uöt32_t
 *)
ªadî
->
cuºít
));

238 
ªadî
->
cuºít
 +
KAA_EXTENSION_PAYLOAD_LENGTH_SIZE
;

239  
KAA_ERR_NONE
;

242  
KAA_ERR_READ_FAILED
;

243 
	}
}

245 
boﬁ
 
	$kØ_∂©f‹m_mesßge_is_buf„r_œrge_íough
(
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî


246 , 
size_t
 
size
)

248 i‡(!
ªadî
) {

249  
Ál£
;

252 i‡(!
size
) {

253  
åue
;

256  (
ªadî
->
cuºít
 + 
size
 <ªadî->
íd
);

257 
	}
}

259 
kØ_îr‹_t
 
	$kØ_∂©f‹m_mesßge_skù
(
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî
, 
size_t
 
size
)

261 
	`KAA_RETURN_IF_NIL2
(
ªadî
, 
size
, 
KAA_ERR_BADPARAM
);

263 i‡(
ªadî
->
cuºít
 + 
size
 <ªadî->
íd
) {

264 
ªadî
->
cuºít
 +
size
;

265  
KAA_ERR_NONE
;

268  
KAA_ERR_READ_FAILED
;

269 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/kaa_platform_utils.h

18 #i‚de‡
KAA_PLATFORM_UTILS_H_


19 
	#KAA_PLATFORM_UTILS_H_


	)

21 
	~<°ddef.h
>

22 
	~<°döt.h
>

23 
	~<°dboﬁ.h
>

25 
	~"kØ_îr‹.h
"

26 
	~"kØ_∂©f‹m_comm⁄.h
"

28 #ifde‡
__˝lu•lus


34 
uöt8_t
 *
begö
;

35 
uöt8_t
 *
cuºít
;

36 
uöt8_t
 *
íd
;

37 } 
	tkØ_∂©f‹m_mesßge_wrôî_t
;

41 c⁄° 
uöt8_t
 *
begö
;

42 c⁄° 
uöt8_t
 *
cuºít
;

43 c⁄° 
uöt8_t
 *
íd
;

44 } 
	tkØ_∂©f‹m_mesßge_ªadî_t
;

46 
	#KAA_MESSAGE_WRITER
(
buf„r
, 
Àn
) \

47 (
kØ_∂©f‹m_mesßge_wrôî_t
){ (
buf„r
), (buf„r), (buf„rË+ (
Àn
Ë}

	)

49 
	#KAA_MESSAGE_READER
(
buf„r
, 
Àn
) \

50 (
kØ_∂©f‹m_mesßge_ªadî_t
){ (
buf„r
), (buf„r), (buf„rË+ (
Àn
Ë}

	)

55 
kØ_îr‹_t
 
kØ_∂©f‹m_mesßge_wrôî_¸óã
(
kØ_∂©f‹m_mesßge_wrôî_t
** 
wrôî_p
,

56 
uöt8_t
 *
buf
, 
size_t
 
Àn
);

58 
kØ_∂©f‹m_mesßge_wrôî_de°roy
(
kØ_∂©f‹m_mesßge_wrôî_t
* 
wrôî
);

60 
kØ_îr‹_t
 
kØ_∂©f‹m_mesßge_wrôe
(
kØ_∂©f‹m_mesßge_wrôî_t
* 
wrôî


61 , c⁄° *
d©a


62 , 
size_t
 
d©a_size
);

64 
kØ_îr‹_t
 
kØ_∂©f‹m_mesßge_wrôe_Æignmít
(
kØ_∂©f‹m_mesßge_wrôî_t
* 
wrôî
);

66 
kØ_îr‹_t
 
kØ_∂©f‹m_mesßge_wrôe_Æig√d
(
kØ_∂©f‹m_mesßge_wrôî_t
* 
wrôî


67 , c⁄° *
d©a


68 , 
size_t
 
d©a_size
);

70 
kØ_îr‹_t
 
kØ_∂©f‹m_mesßge_hódî_wrôe
(
kØ_∂©f‹m_mesßge_wrôî_t
* 
wrôî


71 , 
uöt32_t
 
¥Ÿocﬁ_id


72 , 
uöt16_t
 
¥Ÿocﬁ_vîsi⁄
);

74 
kØ_îr‹_t
 
kØ_∂©f‹m_mesßge_wrôe_exãnsi⁄_hódî
(
kØ_∂©f‹m_mesßge_wrôî_t
* 
wrôî


75 , 
uöt16_t
 
exãnsi⁄_ty≥


76 , 
uöt16_t
 
›ti⁄s


77 , 
uöt32_t
 
∑ylﬂd_size
);

84 
kØ_îr‹_t
 
kØ_∂©f‹m_mesßge_ªadî_¸óã
(
kØ_∂©f‹m_mesßge_ªadî_t
 **
ªadî_p


85 , c⁄° 
uöt8_t
 *
buf„r


86 , 
size_t
 
Àn
);

88 
kØ_∂©f‹m_mesßge_ªadî_de°roy
(
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî
);

90 
kØ_îr‹_t
 
kØ_∂©f‹m_mesßge_ªad
(
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî


91 , *
buf„r


92 , 
size_t
 
ex≥˘ed_size
);

94 
kØ_îr‹_t
 
kØ_∂©f‹m_mesßge_ªad_Æig√d
(
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî


95 , *
buf„r


96 , 
size_t
 
ex≥˘ed_size
);

98 
kØ_îr‹_t
 
kØ_∂©f‹m_mesßge_hódî_ªad
(
kØ_∂©f‹m_mesßge_ªadî_t
* 
ªadî


99 , 
uöt32_t
 *
¥Ÿocﬁ_id


100 , 
uöt16_t
 *
¥Ÿocﬁ_vîsi⁄


101 , 
uöt16_t
 *
exãnsi⁄_cou¡
);

103 
kØ_îr‹_t
 
kØ_∂©f‹m_mesßge_ªad_exãnsi⁄_hódî
(
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî


104 , 
uöt16_t
 *
exãnsi⁄_ty≥


105 , 
uöt16_t
 *
exãnsi⁄_›ti⁄s


106 , 
uöt32_t
 *
exãnsi⁄_∑ylﬂd_Àngth
);

108 
boﬁ
 
kØ_∂©f‹m_mesßge_is_buf„r_œrge_íough
(
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî


109 , 
size_t
 
size
);

111 
kØ_îr‹_t
 
kØ_∂©f‹m_mesßge_skù
(
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî
, 
size_t
 
size
);

113 
	#KAA_ALIGNED_SIZE
(
s
Ë((sË+ (
KAA_ALIGNMENT
 - (sË% KAA_ALIGNMENTË% KAA_ALIGNMENT)

	)

115 
ölöe
 
size_t
 
kØ_Æig√d_size_gë
(size_à
size
)

117  (
size
 + (
KAA_ALIGNMENT
 - (size % KAA_ALIGNMENT)) % KAA_ALIGNMENT);

120 
	#KAA_STATIC_ASSERT
(
«me
, 
ex¥
) \

121 
°©ic_as£πi⁄_
##
«me
[
ex¥
] 
	`__©åibuã__
((
unu£d
))

	)

123 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/kaa_private.h

24 #i‚de‡
KAA_PRIVATE_H


25 
	#KAA_PRIVATE_H


	)

27 
	~<kØ_îr‹.h
>

28 
	~<kØ_°©us.h
>

29 
	~<kØ_ch™√l_m™agî.h
>

30 
	~<kØ_∂©f‹m_utûs.h
>

31 
	~<∂©f‹m/kØ_˛õ¡.h
>

32 
	~<kØ_∂©f‹m_comm⁄.h
>

33 
	~<°döt.h
>

34 
	~<kØ_c⁄ãxt.h
>

35 
	~<∂©f‹m/ext_kØ_Áûovî_°øãgy.h
>

36 
	~<utûôõs/kØ_log.h
>

37 
	~<kØ_boŸ°øp_m™agî.h
>

39 #ifde‡
__˝lu•lus


43 
kØ_îr‹_t
 
kØ_°©us_¸óã
(
kØ_°©us_t
 **
kØ_°©us_p
);

44 
kØ_îr‹_t
 
kØ_°©us_ßve
(
kØ_°©us_t
 *
kØ_°©us_p
);

45 
kØ_°©us_de°roy
(
kØ_°©us_t
 *
£lf
);

47 
kØ_îr‹_t
 
kØ_ch™√l_m™agî_¸óã
(
kØ_ch™√l_m™agî_t
 **
ch™√l_m™agî_p
, 
kØ_c⁄ãxt_t
 *
c⁄ãxt
);

48 
kØ_ch™√l_m™agî_de°roy
(
kØ_ch™√l_m™agî_t
 *
£lf
);

49 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
kØ_ch™√l_m™agî_gë_å™•‹t_ch™√l
(
kØ_ch™√l_m™agî_t
 *
£lf
,

50 
kØ_exãnsi⁄_id
 
£rvi˚_ty≥
);

52 
kØ_îr‹_t
 
kØ_boŸ°øp_m™agî_¸óã
(
kØ_boŸ°øp_m™agî_t
 **
boŸ°øp_m™agî_p
, 
kØ_c⁄ãxt_t
 *
kØ_c⁄ãxt
);

54 
kØ_boŸ°øp_m™agî_de°roy
(
kØ_boŸ°øp_m™agî_t
 *
£lf
);

56 
kØ_îr‹_t
 
kØ_∂©f‹m_¥Ÿocﬁ_¸óã
(
kØ_∂©f‹m_¥Ÿocﬁ_t
 **
∂©f‹m_¥Ÿocﬁ_p
,

57 
kØ_loggî_t
 *
loggî
, 
kØ_°©us_t
 *
°©us
);

58 
kØ_∂©f‹m_¥Ÿocﬁ_de°roy
(
kØ_∂©f‹m_¥Ÿocﬁ_t
 *
£lf
);

60 
kØ_îr‹_t
 
kØ_°©us_£t_ªgi°îed
(
kØ_°©us_t
 *
£lf
, 
boﬁ
 
is_ªgi°îed
);

62 
kØ_îr‹_t
 
kØ_Áûovî_°øãgy_¸óã
(
kØ_Áûovî_°øãgy_t
** 
°øãgy
, 
kØ_loggî_t
 *
loggî
);

63 
kØ_Áûovî_°øãgy_de°roy
(
kØ_Áûovî_°øãgy_t
* 
°øãgy
);

64 
boﬁ
 
kØ_boŸ°øp_m™agî_¥o˚ss_Áûovî
(
kØ_boŸ°øp_m™agî_t
 *
£lf
);

66 
kØ_îr‹_t
 
kØ_ch™√l_m™agî_⁄_√w_ac˚ss_poöt
(
kØ_ch™√l_m™agî_t
 *
£lf


67 , 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 *
¥Ÿocﬁ_id


68 , 
kØ_£rvî_ty≥_t
 
£rvî_ty≥


69 , 
kØ_ac˚ss_poöt_t
 *
ac˚ss_poöt
);

71 
kØ_ac˚ss_poöt_t
 *
kØ_boŸ°øp_m™agî_gë_›î©i⁄s_ac˚ss_poöt
(
kØ_boŸ°øp_m™agî_t
 *
£lf


72 , 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 *
¥Ÿocﬁ_öfo
);

74 
kØ_ac˚ss_poöt_t
 *
kØ_boŸ°øp_m™agî_gë_boŸ°øp_ac˚ss_poöt
(

75 
kØ_boŸ°øp_m™agî_t
 *
£lf
,

76 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 *
¥Ÿocﬁ_id
);

79 
kØ_îr‹_t
 
kØ_°©us_£t_ídpoöt_ac˚ss_tokí
(
kØ_°©us_t
 *
£lf
, c⁄° *
tokí
);

82 
kØ_îr‹_t
 
kØ_°©us_£t_upd©ed
(
kØ_°©us_t
 *
£lf
, 
boﬁ
 
is_upd©ed
);

84 
kØ_îr‹_t
 
kØ_°©us_£t_©èched
(
kØ_°©us_t
 *
£lf
, 
boﬁ
 
is_©èched
);

86 
kØ_îr‹_t
 
kØ_c⁄ãxt_£t_°©us_ªgi°îed
(
kØ_c⁄ãxt_t
 *
kØ_c⁄ãxt
, 
boﬁ
 
is_ªgi°îed
);

88 
	skØ_°©us_hﬁdî_t
 {

89 
kØ_°©us_t
 *
°©us_ö°™˚
;

92 
kØ_îr‹_t
 
kØ_exãnsi⁄_boŸ°øp_öô
(
kØ_c⁄ãxt_t
 *
kØ_c⁄ãxt
, **
c⁄ãxt
);

93 
kØ_îr‹_t
 
kØ_exãnsi⁄_¥ofûe_öô
(
kØ_c⁄ãxt_t
 *
kØ_c⁄ãxt
, **
c⁄ãxt
);

94 
kØ_îr‹_t
 
kØ_exãnsi⁄_evít_öô
(
kØ_c⁄ãxt_t
 *
kØ_c⁄ãxt
, **
c⁄ãxt
);

95 
kØ_îr‹_t
 
kØ_exãnsi⁄_loggög_öô
(
kØ_c⁄ãxt_t
 *
kØ_c⁄ãxt
, **
c⁄ãxt
);

96 
kØ_îr‹_t
 
kØ_exãnsi⁄_c⁄figuøti⁄_öô
(
kØ_c⁄ãxt_t
 *
kØ_c⁄ãxt
, **
c⁄ãxt
);

97 
kØ_îr‹_t
 
kØ_exãnsi⁄_nŸifiˇti⁄_öô
(
kØ_c⁄ãxt_t
 *
kØ_c⁄ãxt
, **
c⁄ãxt
);

98 
kØ_îr‹_t
 
kØ_exãnsi⁄_u£r_öô
(
kØ_c⁄ãxt_t
 *
kØ_c⁄ãxt
, **
c⁄ãxt
);

100 
kØ_îr‹_t
 
kØ_exãnsi⁄_boŸ°øp_deöô
(*
c⁄ãxt
);

101 
kØ_îr‹_t
 
kØ_exãnsi⁄_¥ofûe_deöô
(*
c⁄ãxt
);

102 
kØ_îr‹_t
 
kØ_exãnsi⁄_evít_deöô
(*
c⁄ãxt
);

103 
kØ_îr‹_t
 
kØ_exãnsi⁄_loggög_deöô
(*
c⁄ãxt
);

104 
kØ_îr‹_t
 
kØ_exãnsi⁄_c⁄figuøti⁄_deöô
(*
c⁄ãxt
);

105 
kØ_îr‹_t
 
kØ_exãnsi⁄_nŸifiˇti⁄_deöô
(*
c⁄ãxt
);

106 
kØ_îr‹_t
 
kØ_exãnsi⁄_u£r_deöô
(*
c⁄ãxt
);

108 
kØ_îr‹_t
 
kØ_exãnsi⁄_boŸ°øp_ªque°_£rülize
(*
c⁄ãxt
, 
uöt32_t
 
ªque°_id
,

109 
uöt8_t
 *
buf„r
, 
size_t
 *
size
, 
boﬁ
 *
√ed_ªsync
);

110 
kØ_îr‹_t
 
kØ_exãnsi⁄_¥ofûe_ªque°_£rülize
(*
c⁄ãxt
, 
uöt32_t
 
ªque°_id
,

111 
uöt8_t
 *
buf„r
, 
size_t
 *
size
, 
boﬁ
 *
√ed_ªsync
);

112 
kØ_îr‹_t
 
kØ_exãnsi⁄_evít_ªque°_£rülize
(*
c⁄ãxt
, 
uöt32_t
 
ªque°_id
,

113 
uöt8_t
 *
buf„r
, 
size_t
 *
size
, 
boﬁ
 *
√ed_ªsync
);

114 
kØ_îr‹_t
 
kØ_exãnsi⁄_loggög_ªque°_£rülize
(*
c⁄ãxt
, 
uöt32_t
 
ªque°_id
,

115 
uöt8_t
 *
buf„r
, 
size_t
 *
size
, 
boﬁ
 *
√ed_ªsync
);

116 
kØ_îr‹_t
 
kØ_exãnsi⁄_c⁄figuøti⁄_ªque°_£rülize
(*
c⁄ãxt
, 
uöt32_t
 
ªque°_id
,

117 
uöt8_t
 *
buf„r
, 
size_t
 *
size
, 
boﬁ
 *
√ed_ªsync
);

118 
kØ_îr‹_t
 
kØ_exãnsi⁄_nŸifiˇti⁄_ªque°_£rülize
(*
c⁄ãxt
, 
uöt32_t
 
ªque°_id
,

119 
uöt8_t
 *
buf„r
, 
size_t
 *
size
, 
boﬁ
 *
√ed_ªsync
);

120 
kØ_îr‹_t
 
kØ_exãnsi⁄_u£r_ªque°_£rülize
(*
c⁄ãxt
, 
uöt32_t
 
ªque°_id
,

121 
uöt8_t
 *
buf„r
, 
size_t
 *
size
, 
boﬁ
 *
√ed_ªsync
);

123 
kØ_îr‹_t
 
kØ_exãnsi⁄_boŸ°øp_£rvî_sync
(*
c⁄ãxt
, 
uöt32_t
 
ªque°_id
,

124 
uöt16_t
 
exãnsi⁄_›ti⁄s
, c⁄° 
uöt8_t
 *
buf„r
, 
size_t
 
size
);

125 
kØ_îr‹_t
 
kØ_exãnsi⁄_¥ofûe_£rvî_sync
(*
c⁄ãxt
, 
uöt32_t
 
ªque°_id
,

126 
uöt16_t
 
exãnsi⁄_›ti⁄s
, c⁄° 
uöt8_t
 *
buf„r
, 
size_t
 
size
);

127 
kØ_îr‹_t
 
kØ_exãnsi⁄_evít_£rvî_sync
(*
c⁄ãxt
, 
uöt32_t
 
ªque°_id
,

128 
uöt16_t
 
exãnsi⁄_›ti⁄s
, c⁄° 
uöt8_t
 *
buf„r
, 
size_t
 
size
);

129 
kØ_îr‹_t
 
kØ_exãnsi⁄_loggög_£rvî_sync
(*
c⁄ãxt
, 
uöt32_t
 
ªque°_id
,

130 
uöt16_t
 
exãnsi⁄_›ti⁄s
, c⁄° 
uöt8_t
 *
buf„r
, 
size_t
 
size
);

131 
kØ_îr‹_t
 
kØ_exãnsi⁄_c⁄figuøti⁄_£rvî_sync
(*
c⁄ãxt
, 
uöt32_t
 
ªque°_id
,

132 
uöt16_t
 
exãnsi⁄_›ti⁄s
, c⁄° 
uöt8_t
 *
buf„r
, 
size_t
 
size
);

133 
kØ_îr‹_t
 
kØ_exãnsi⁄_nŸifiˇti⁄_£rvî_sync
(*
c⁄ãxt
, 
uöt32_t
 
ªque°_id
,

134 
uöt16_t
 
exãnsi⁄_›ti⁄s
, c⁄° 
uöt8_t
 *
buf„r
, 
size_t
 
size
);

135 
kØ_îr‹_t
 
kØ_exãnsi⁄_u£r_£rvî_sync
(*
c⁄ãxt
, 
uöt32_t
 
ªque°_id
,

136 
uöt16_t
 
exãnsi⁄_›ti⁄s
, c⁄° 
uöt8_t
 *
buf„r
, 
size_t
 
size
);

143 
kØ_îr‹_t
 
kØ_ch™√l_m™agî_boŸ°øp_ªque°_gë_size
(
kØ_ch™√l_m™agî_t
 *
£lf
, 
size_t
 *
ex≥˘ed_size
);

145 
kØ_îr‹_t
 
kØ_ch™√l_m™agî_boŸ°øp_ªque°_£rülize
(
kØ_ch™√l_m™agî_t
 *
£lf
,

146 
kØ_∂©f‹m_mesßge_wrôî_t
* 
wrôî
);

147 
kØ_îr‹_t
 
kØ_boŸ°øp_m™agî_boŸ°øp_ªque°_£rülize
(
kØ_boŸ°øp_m™agî_t
 *
£lf
,

148 
kØ_∂©f‹m_mesßge_wrôî_t
* 
wrôî
);

149 
kØ_îr‹_t
 
kØ_mëa_d©a_ªque°_£rülize
(
kØ_∂©f‹m_¥Ÿocﬁ_t
 *
°©us
,

150 
kØ_∂©f‹m_mesßge_wrôî_t
* 
wrôî
, 
uöt32_t
 
ªque°_id
);

152 
kØ_îr‹_t
 
kØ_boŸ°øp_m™agî_h™dÀ_£rvî_sync
(
kØ_boŸ°øp_m™agî_t
 *
£lf
, 
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî
, 
uöt16_t
 
exãnsi⁄_›ti⁄s
, 
size_t
 
exãnsi⁄_Àngth
);

153 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/kaa_protocols/kaa_tcp/kaatcp.h

17 #i‚de‡
KAATCP_H_


18 
	#KAATCP_H_


	)

20 #ifde‡
__˝lu•lus


24 
	~"kØt˝_∑r£r.h
"

25 
	~"kØt˝_ªque°.h
"

28 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/kaa_protocols/kaa_tcp/kaatcp_common.h

17 #i‚de‡
KAATCP_COMMON_H_


18 
	#KAATCP_COMMON_H_


	)

20 #ifde‡
__˝lu•lus


24 
	~<∂©f‹m/deÁu…s.h
>

26 
	#KAATCP_PROTOCOL_NAME_MAX_SIZE
 10

	)

28 
	#FIRST_BIT
 0x80

	)

29 
	#MAX_MESSAGE_TYPE_LENGTH
 0x0F

	)

30 
	#MAX_MESSAGE_LENGTH
 0x0FFFFFFF

	)

31 
	#PROTOCOL_VERSION
 0x01

	)

33 
	#KAA_SYNC_HEADER_LENGTH
 12

	)

34 
	#KAA_SYNC_ZIPPED_BIT
 0x02

	)

35 
	#KAA_SYNC_ENCRYPTED_BIT
 0x04

	)

36 
	#KAA_SYNC_REQUEST_BIT
 0x01

	)

37 
	#KAA_SYNC_SYNC_BIT
 0x10

	)

38 
	#KAA_SYNC_BOOTSTRAP_BIT
 0x20

	)

40 
	#KAA_BOOTSTRAP_RSA_PKSC8
 0x01

	)

41 
	#KAA_BOOTSTRAP_CHANNEL_HTTP
 0x01

	)

42 
	#KAA_BOOTSTRAP_CHANNEL_HTTPLP
 0x02

	)

43 
	#KAA_BOOTSTRAP_CHANNEL_KAATCP
 0x03

	)

45 
	#KAA_CONNECT_FLAGS
 0x02

	)

46 
	#KAA_CONNECT_HEADER_LENGTH
 18

	)

48 
	#KAA_CONNECT_KEY_AES_RSA
 0x11

	)

49 
	#KAA_CONNECT_SIGNATURE_SHA1
 0x01

	)

51 
	#KAA_TCP_NAME
 "KØt˝"

	)

52 
	#KAA_TCP_NAME_LENGTH
 6

	)

54 
	#KAA_PING_MESSAGE_SIZE
 2

	)

55 
	#KAA_DISCONNECT_MESSAGE_SIZE
 4

	)

58 
KAATCP_ERR_NONE
 = 0,

59 
KAATCP_ERR_NOMEM
 = -1,

60 
KAATCP_ERR_BUFFER_NOT_ENOUGH
 = -2,

61 
KAATCP_ERR_BAD_PARAM
 = -3,

62 
KAATCP_ERR_INVALID_STATE
 = -4,

63 
KAATCP_ERR_INVALID_PROTOCOL
 = -5

64 } 
	tkØt˝_îr‹_t
;

67 
KAATCP_MESSAGE_UNKNOWN
 = 0x00,

68 
KAATCP_MESSAGE_CONNECT
 = 0x01,

69 
KAATCP_MESSAGE_CONNACK
 = 0x02,

70 
KAATCP_MESSAGE_PINGREQ
 = 0x0C,

71 
KAATCP_MESSAGE_PINGRESP
 = 0x0D,

72 
KAATCP_MESSAGE_DISCONNECT
 = 0x0E,

73 
KAATCP_MESSAGE_KAASYNC
 = 0x0F

74 } 
	tkØt˝_mesßge_ty≥_t
;

77 
uöt16_t
 
¥Ÿocﬁ_«me_Àngth
;

78 
¥Ÿocﬁ_«me
[
KAATCP_PROTOCOL_NAME_MAX_SIZE
];

80 
uöt8_t
 
¥Ÿocﬁ_vîsi⁄
;

82 
uöt8_t
 
c⁄√˘_Êags
;

84 
uöt32_t
 
√xt_±‹ocﬁ_id
;

86 
uöt8_t
 
£ssi⁄_key_Êags
;

87 
uöt8_t
 
sig«tuª_Êags
;

89 
uöt16_t
 
kìp_Æive
;

91 
size_t
 
£ssi⁄_key_size
;

92 *
£ssi⁄_key
;

94 
size_t
 
sig«tuª_size
;

95 *
sig«tuª
;

97 
size_t
 
sync_ªque°_size
;

98 *
sync_ªque°
;

100 } 
	tkØt˝_c⁄√˘_t
;

103 
KAATCP_CONNACK_UNKNOWN
 = 0x00,

104 
KAATCP_CONNACK_SUCCESS
 = 0x01,

105 
KAATCP_CONNACK_UNACCEPTABLE_VERSION
 = 0x02,

106 
KAATCP_CONNACK_IDENTIFIER_REJECTED
 = 0x03,

107 
KAATCP_CONNACK_SERVER_UNAVAILABLE
 = 0x04,

108 
KAATCP_CONNACK_REFUSE_BAD_CREDENTIALS
 = 0x05,

109 
KAATCP_CONNACK_NOT_AUTHORIZED
 = 0x06,

110 
KAATCP_CONNACK_REFUSE_VERIFICATION_FAILED
 = 0x10,

111 } 
	tkØt˝_c⁄«ck_code_t
;

114 
uöt16_t
 
ªtu∫_code
;

115 } 
	tkØt˝_c⁄«ck_t
;

118 
KAATCP_DISCONNECT_NONE
 = 0x00,

119 
KAATCP_DISCONNECT_BAD_REQUEST
 = 0x01,

120 
KAATCP_DISCONNECT_INTERNAL_ERROR
 = 0x02,

121 
KAATCP_DISCONNECT_CREDENTIALS_REVOKED
 = 0x03,

122 } 
	tkØt˝_disc⁄√˘_ªas⁄_t
;

125 
uöt16_t
 
ªas⁄
;

126 } 
	tkØt˝_disc⁄√˘_t
;

129 
uöt16_t
 
¥Ÿocﬁ_«me_Àngth
;

130 
¥Ÿocﬁ_«me
[
KAATCP_PROTOCOL_NAME_MAX_SIZE
];

132 
uöt8_t
 
¥Ÿocﬁ_vîsi⁄
;

133 
uöt16_t
 
mesßge_id
;

134 
uöt8_t
 
Êags
;

135 } 
	tkØt˝_kØsync_hódî_t
;

138 
kØt˝_kØsync_hódî_t
 
sync_hódî
;

140 
size_t
 
sync_ªque°_size
;

141 *
sync_ªque°
;

142 } 
	tkØt˝_kØsync_t
;

144 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/kaa_protocols/kaa_tcp/kaatcp_parser.c

17 
	~<°rög.h
>

18 
	~<°dlib.h
>

19 
	~<°ddef.h
>

20 
	~<°döt.h
>

21 
	~<sys/ty≥s.h
>

23 
	~"kØt˝_∑r£r.h
"

25 
	~"kØ_comm⁄.h
"

26 
	~<∂©f‹m/sock.h
>

27 
	~"utûôõs/kØ_mem.h
"

31 
kØt˝_îr‹_t
 
	$kØt˝_∑r£r_mesßge_d⁄e
(
kØt˝_∑r£r_t
 *
∑r£r
)

33 
	`KAA_RETURN_IF_NIL
(
∑r£r
, 
KAATCP_ERR_BAD_PARAM
);

35 
∑r£r
->
mesßge_ty≥
) {

36 
KAATCP_MESSAGE_CONNACK
:

37 i‡(
∑r£r
->
h™dÀrs
.
c⁄«ck_h™dÀr
) {

38 
kØt˝_c⁄«ck_t
 
c⁄«ck
 = { *(
∑r£r
->
∑ylﬂd
 + 1) };

39 
∑r£r
->
h™dÀrs
.
	`c⁄«ck_h™dÀr
’¨£r->h™dÀrs.
h™dÀrs_c⁄ãxt
, 
c⁄«ck
);

42 
KAATCP_MESSAGE_DISCONNECT
:

43 i‡(
∑r£r
->
h™dÀrs
.
disc⁄√˘_h™dÀr
) {

44 
kØt˝_disc⁄√˘_t
 
disc⁄√˘
 = { *(
∑r£r
->
∑ylﬂd
 + 1) };

45 
∑r£r
->
h™dÀrs
.
	`disc⁄√˘_h™dÀr
’¨£r->h™dÀrs.
h™dÀrs_c⁄ãxt
, 
disc⁄√˘
);

48 
KAATCP_MESSAGE_PINGRESP
:

49 i‡(
∑r£r
->
h™dÀrs
.
pögª•_h™dÀr
) {

50 
∑r£r
->
h™dÀrs
.
	`pögª•_h™dÀr
’¨£r->h™dÀrs.
h™dÀrs_c⁄ãxt
);

53 
KAATCP_MESSAGE_KAASYNC
:

55 
kØt˝_kØsync_hódî_t
 
sync_hódî
;

56 c⁄° *
curs‹
 = 
∑r£r
->
∑ylﬂd
;

58 
sync_hódî
.
¥Ÿocﬁ_«me_Àngth
 = 
	`KAA_NTOHS
(*((
uöt16_t
 *Ë
curs‹
));

59 i‡(
sync_hódî
.
¥Ÿocﬁ_«me_Àngth
 > 
KAATCP_PROTOCOL_NAME_MAX_SIZE
) {

60  
KAATCP_ERR_INVALID_PROTOCOL
;

63 
curs‹
 +(
uöt16_t
);

65 i‡(
	`memcmp
(
curs‹
, 
KAA_TCP_NAME
, 
KAA_TCP_NAME_LENGTH
)) {

66  
KAATCP_ERR_INVALID_PROTOCOL
;

69 
	`mem˝y
(
sync_hódî
.
¥Ÿocﬁ_«me
, 
curs‹
, sync_hódî.
¥Ÿocﬁ_«me_Àngth
);

70 
sync_hódî
.
¥Ÿocﬁ_«me
[sync_hódî.
¥Ÿocﬁ_«me_Àngth
] = '\0';

71 
curs‹
 +
sync_hódî
.
¥Ÿocﬁ_«me_Àngth
;

73 
sync_hódî
.
¥Ÿocﬁ_vîsi⁄
 = *(
curs‹
++);

74 i‡(
sync_hódî
.
¥Ÿocﬁ_vîsi⁄
 !
PROTOCOL_VERSION
) {

75  
KAATCP_ERR_INVALID_PROTOCOL
;

78 
uöt16_t
 
msg_id
;

79 
	`mem˝y
(&
msg_id
, 
curs‹
, (
uöt16_t
));

80 
curs‹
 +(
uöt16_t
);

81 
sync_hódî
.
mesßge_id
 = 
	`KAA_NTOHS
(
msg_id
);

82 
sync_hódî
.
Êags
 = *(
curs‹
++);

84 i‡((
sync_hódî
.
Êags
 & 
KAA_SYNC_SYNC_BIT
Ë&& 
∑r£r
->
h™dÀrs
.
kØsync_h™dÀr
) {

85 
kØt˝_kØsync_t
 *
kØsync
 = (kØt˝_kØsync_à*Ë
	`KAA_MALLOC
((kaatcp_kaasync_t));

86 
	`KAA_RETURN_IF_NIL
(
kØsync
, 
KAATCP_ERR_NOMEM
);

88 
kØsync
->
sync_hódî
 = sync_header;

89 
kØsync
->
sync_ªque°_size
 = 
∑r£r
->
mesßge_Àngth
 - 
KAA_SYNC_HEADER_LENGTH
;

91 i‡(
kØsync
->
sync_ªque°_size
) {

92 
kØsync
->
sync_ªque°
 = (*Ë
	`KAA_MALLOC
(kØsync->
sync_ªque°_size
);

93 i‡(!
kØsync
->
sync_ªque°
) {

94 
	`KAA_FREE
(
kØsync
);

95  
KAATCP_ERR_NOMEM
;

97 
	`mem˝y
(
kØsync
->
sync_ªque°
, 
curs‹
, kØsync->
sync_ªque°_size
);

99 
kØsync
->
sync_ªque°
 = 
NULL
;

102 
∑r£r
->
h™dÀrs
.
	`kØsync_h™dÀr
’¨£r->h™dÀrs.
h™dÀrs_c⁄ãxt
, 
kØsync
);

109  
	`kØt˝_∑r£r_ª£t
(
∑r£r
);

110 
	}
}

112 
	$kØt˝_∑r£r_ªåõve_mesßge_ty≥
(
kØt˝_∑r£r_t
 *
∑r£r
, 
uöt8_t
 
byã
)

114 
	`KAA_RETURN_IF_NIL
(
∑r£r
, );

115 
∑r£r
->
mesßge_ty≥
 = ((
byã
 & 0xFF) >> 4);

116 
	}
}

118 
kØt˝_îr‹_t
 
	$kØt˝_∑r£r_¥o˚ss_byã
(
kØt˝_∑r£r_t
 *
∑r£r
, 
uöt8_t
 
byã
)

120 
	`KAA_RETURN_IF_NIL
(
∑r£r
, 
KAATCP_ERR_BAD_PARAM
);

122 
∑r£r
->
°©e
) {

123 
KAATCP_PARSER_STATE_NONE
:

124 
	`kØt˝_∑r£r_ªåõve_mesßge_ty≥
(
∑r£r
, 
byã
);

125 
∑r£r
->
°©e
 = 
KAATCP_PARSER_STATE_PROCESSING_LENGTH
;

127 
KAATCP_PARSER_STATE_PROCESSING_LENGTH
:

128 
∑r£r
->
mesßge_Àngth
 +((
byã
 & ~
FIRST_BIT
Ë*Ö¨£r->
Àngth_mu…ùlõr
);

129 
∑r£r
->
Àngth_mu…ùlõr
 *
FIRST_BIT
;

130 i‡(!(
byã
 & 
FIRST_BIT
)) {

131 i‡(
∑r£r
->
mesßge_Àngth
) {

132 
∑r£r
->
°©e
 = 
KAATCP_PARSER_STATE_PROCESSING_PAYLOAD
;

134  
	`kØt˝_∑r£r_mesßge_d⁄e
(
∑r£r
);

139  
KAATCP_ERR_INVALID_STATE
;

142 i‡(
∑r£r
->
°©e
 =
KAATCP_PARSER_STATE_PROCESSING_PAYLOAD
 &&Ö¨£r->
mesßge_Àngth
 >Ö¨£r->
∑ylﬂd_buf„r_size
) {

143 *
±r
 = 
	`KAA_REALLOC
(
∑r£r
->
∑ylﬂd
,Ö¨£r->
mesßge_Àngth
);

144 i‡(
±r
) {

145 
∑r£r
->
∑ylﬂd
 = 
±r
;

146 
∑r£r
->
∑ylﬂd_buf„r_size
 =Ö¨£r->
mesßge_Àngth
;

148  (
kØt˝_îr‹_t
)
KAA_ERR_NOMEM
;

151  
KAATCP_ERR_NONE
;

152 
	}
}

154 
kØt˝_îr‹_t
 
	$kØt˝_∑r£r_ª£t
(
kØt˝_∑r£r_t
 *
∑r£r
)

156 
	`KAA_RETURN_IF_NIL
(
∑r£r
, 
KAATCP_ERR_BAD_PARAM
);

158 
∑r£r
->
°©e
 = 
KAATCP_PARSER_STATE_NONE
;

159 
∑r£r
->
mesßge_ty≥
 = 
KAATCP_MESSAGE_UNKNOWN
;

160 
∑r£r
->
mesßge_Àngth
 = 0;

161 
∑r£r
->
¥o˚s£d_∑ylﬂd_Àngth
 = 0;

162 
∑r£r
->
Àngth_mu…ùlõr
 = 1;

164  
KAATCP_ERR_NONE
;

165 
	}
}

167 
kØt˝_îr‹_t
 
	$kØt˝_∑r£r_öô
(
kØt˝_∑r£r_t
 *
∑r£r


168 , c⁄° 
kØt˝_∑r£r_h™dÀrs_t
 *
h™dÀrs
)

170 
	`KAA_RETURN_IF_NIL2
(
∑r£r
, 
h™dÀrs
, 
KAATCP_ERR_BAD_PARAM
);

172 
kØt˝_îr‹_t
 
rvÆ
 = 
	`kØt˝_∑r£r_ª£t
(
∑r£r
);

173 
	`KAA_RETURN_IF_ERR
(
rvÆ
);

175 
∑r£r
->
h™dÀrs
 = *handlers;

176  
rvÆ
;

177 
	}
}

179 
kØt˝_îr‹_t
 
	$kØt˝_∑r£r_¥o˚ss_buf„r
(
kØt˝_∑r£r_t
 *
∑r£r
, c⁄° *
buf
, 
size_t
 
buf_size
)

181 
	`KAA_RETURN_IF_NIL3
(
∑r£r
, 
buf
, 
buf_size
, 
KAATCP_ERR_BAD_PARAM
);

183 
kØt˝_îr‹_t
 
rvÆ
 = 
KAATCP_ERR_NONE
;

184 c⁄° *
buf_curs‹
 = 
buf
;

186 
buf_curs‹
 !
buf
 + 
buf_size
) {

187 i‡(
∑r£r
->
°©e
 =
KAATCP_PARSER_STATE_PROCESSING_PAYLOAD
) {

188 
uöt32_t
 
ªmaöög_size
 = 
∑r£r
->
mesßge_Àngth
 -Ö¨£r->
¥o˚s£d_∑ylﬂd_Àngth
;

189 
uöt32_t
 
buf„r_ªmaöög_size
 = 
buf
 + 
buf_size
 - 
buf_curs‹
;

190 
uöt32_t
 
byãs_to_ªad
 = (
ªmaöög_size
 > 
buf„r_ªmaöög_size
) ? buffer_remaining_size :Ñemaining_size;

192 
	`mem˝y
(
∑r£r
->
∑ylﬂd
 +Ö¨£r->
¥o˚s£d_∑ylﬂd_Àngth
, 
buf_curs‹
, 
byãs_to_ªad
);

193 
∑r£r
->
¥o˚s£d_∑ylﬂd_Àngth
 +
byãs_to_ªad
;

194 
buf_curs‹
 +
byãs_to_ªad
;

196 i‡(
∑r£r
->
mesßge_Àngth
 =∑r£r->
¥o˚s£d_∑ylﬂd_Àngth
) {

197 
rvÆ
 = 
	`kØt˝_∑r£r_mesßge_d⁄e
(
∑r£r
);

198 
	`KAA_RETURN_IF_ERR
(
rvÆ
);

201 
rvÆ
 = 
	`kØt˝_∑r£r_¥o˚ss_byã
(
∑r£r
, *(
buf_curs‹
++));

202 
	`KAA_RETURN_IF_ERR
(
rvÆ
);

206  
rvÆ
;

207 
	}
}

209 
	$kØt˝_∑r£r_kØsync_de°roy
(
kØt˝_kØsync_t
 *
mesßge
)

211 
	`KAA_RETURN_IF_NIL
(
mesßge
,);

213 i‡(
mesßge
->
sync_ªque°
) {

214 
	`KAA_FREE
(
mesßge
->
sync_ªque°
);

217 
	`KAA_FREE
(
mesßge
);

218 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/kaa_protocols/kaa_tcp/kaatcp_parser.h

17 #i‚de‡
KAATCP_PARSER_H_


18 
	#KAATCP_PARSER_H_


	)

20 #ifde‡
__˝lu•lus


24 
	~"kØt˝_comm⁄.h
"

27 (*
⁄_c⁄«ck_mesßge_‚
)(*
	tc⁄ãxt
, 
	tkØt˝_c⁄«ck_t
 
	tmesßge
);

28 (*
⁄_disc⁄√˘_mesßge_‚
)(*
	tc⁄ãxt
, 
	tkØt˝_disc⁄√˘_t
 
	tmesßge
);

29 (*
⁄_kØsync_mesßge_‚
)(*
	tc⁄ãxt
, 
	tkØt˝_kØsync_t
 *
	tmesßge
);

30 (*
⁄_pögª•_mesßge_‚
)(*
	tc⁄ãxt
);

35 
KAATCP_PARSER_STATE_NONE
 = 0x00,

36 
KAATCP_PARSER_STATE_PROCESSING_LENGTH
 = 0x01,

37 
KAATCP_PARSER_STATE_PROCESSING_PAYLOAD
 = 0x02,

38 } 
	tkØt˝_∑r£r_°©e_t
;

41 *
h™dÀrs_c⁄ãxt
;

42 
⁄_c⁄«ck_mesßge_‚
 
c⁄«ck_h™dÀr
;

43 
⁄_disc⁄√˘_mesßge_‚
 
disc⁄√˘_h™dÀr
;

44 
⁄_kØsync_mesßge_‚
 
kØsync_h™dÀr
;

45 
⁄_pögª•_mesßge_‚
 
pögª•_h™dÀr
;

46 } 
	tkØt˝_∑r£r_h™dÀrs_t
;

49 
kØt˝_∑r£r_°©e_t
 
°©e
;

50 
kØt˝_mesßge_ty≥_t
 
mesßge_ty≥
;

51 
uöt32_t
 
mesßge_Àngth
;

52 
uöt32_t
 
¥o˚s£d_∑ylﬂd_Àngth
;

53 
uöt32_t
 
Àngth_mu…ùlõr
;

54 
uöt32_t
 
∑ylﬂd_buf„r_size
;

55 *
∑ylﬂd
;

57 
kØt˝_∑r£r_h™dÀrs_t
 
h™dÀrs
;

58 } 
	tkØt˝_∑r£r_t
;

62 
kØt˝_îr‹_t
 
kØt˝_∑r£r_öô
(
kØt˝_∑r£r_t
 *
∑r£r


63 , c⁄° 
kØt˝_∑r£r_h™dÀrs_t
 *
h™dÀrs
);

65 
kØt˝_îr‹_t
 
kØt˝_∑r£r_ª£t
(
kØt˝_∑r£r_t
 *
∑r£r
);

67 
kØt˝_îr‹_t
 
kØt˝_∑r£r_¥o˚ss_buf„r
(
kØt˝_∑r£r_t
 *
∑r£r


68 , c⁄° *
buf


69 , 
size_t
 
buf_size
);

71 
kØt˝_∑r£r_kØsync_de°roy
(
kØt˝_kØsync_t
 *
mesßge
);

73 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/kaa_protocols/kaa_tcp/kaatcp_request.c

17 
	~<°rög.h
>

18 
	~<°ddef.h
>

19 
	~<°döt.h
>

20 
	~<sys/ty≥s.h
>

22 
	~"kØt˝_ªque°.h
"

24 
	~"kØ_comm⁄.h
"

25 
	~<∂©f‹m/sock.h
>

29 
uöt8_t
 
	$¸óã_basic_hódî
(
uöt8_t
 
mesßge_ty≥
, 
size_t
 
Àngth
, *
mesßge
)

31 i‡(
Àngth
 <
MAX_MESSAGE_LENGTH
 && 
mesßge_ty≥
 <
MAX_MESSAGE_TYPE_LENGTH
) {

32 
uöt8_t
 
size
 = 1;

33 *(
mesßge
++Ë(Ë(
mesßge_ty≥
 << 4);

35 
uöt8_t
 
byã
 = 
Àngth
 % 
FIRST_BIT
;

36 
Àngth
 /
FIRST_BIT
;

37 i‡(
Àngth
) {

38 
byã
 |
FIRST_BIT
;

40 *(
mesßge
++Ë(Ë
byã
;

41 ++
size
;

42 } 
Àngth
);

43  
size
;

46 
	}
}

49 
__©åibuã__
((
wók
))

50 
kØt˝_îr‹_t
 
	$kØt˝_fûl_c⁄√˘_mesßge
(
uöt16_t
 
kì∑live
, 
uöt32_t
 
√xt_¥Ÿocﬁ_id


51 , *
sync_ªque°
, 
size_t
 
sync_ªque°_size


52 , *
£ssi⁄_key
, 
size_t
 
£ssi⁄_key_size


53 , *
sig«tuª
, 
size_t
 
sig«tuª_size


54 , 
kØt˝_c⁄√˘_t
 *
mesßge
)

56 
	`KAA_RETURN_IF_NIL2
(
sync_ªque°
, 
sync_ªque°_size
, 
KAATCP_ERR_BAD_PARAM
);

57 i‡((
£ssi⁄_key_size
 > 0 && !
£ssi⁄_key
Ë|| (
sig«tuª_size
 > 0 && !
sig«tuª
))

58  
KAATCP_ERR_BAD_PARAM
;

59 
	`KAA_RETURN_IF_NIL
(
mesßge
, 
KAATCP_ERR_BAD_PARAM
);

61 
	`mem£t
(
mesßge
, 0, (
kØt˝_c⁄√˘_t
));

63 
mesßge
->
¥Ÿocﬁ_«me_Àngth
 = 
KAA_TCP_NAME_LENGTH
;

64 
	`mem˝y
(
mesßge
->
¥Ÿocﬁ_«me
, 
KAA_TCP_NAME
, 
KAA_TCP_NAME_LENGTH
);

66 
mesßge
->
¥Ÿocﬁ_vîsi⁄
 = 
PROTOCOL_VERSION
;

67 
mesßge
->
c⁄√˘_Êags
 = 
KAA_CONNECT_FLAGS
;

69 
mesßge
->
√xt_±‹ocﬁ_id
 = 
√xt_¥Ÿocﬁ_id
;

71 i‡(
£ssi⁄_key
) {

72 
mesßge
->
£ssi⁄_key
 = session_key;

73 
mesßge
->
£ssi⁄_key_size
 = session_key_size;

74 
mesßge
->
£ssi⁄_key_Êags
 = 
KAA_CONNECT_KEY_AES_RSA
;

76 i‡(
sig«tuª
) {

77 
mesßge
->
sig«tuª
 = signature;

78 
mesßge
->
sig«tuª_size
 = signature_size;

79 
mesßge
->
sig«tuª_Êags
 = 
KAA_CONNECT_SIGNATURE_SHA1
;

82 
mesßge
->
kìp_Æive
 = 
kì∑live
;

84 
mesßge
->
sync_ªque°_size
 = sync_request_size;

85 
mesßge
->
sync_ªque°
 = sync_request;

87  
KAATCP_ERR_NONE
;

88 
	}
}

90 
kØt˝_îr‹_t
 
	$kØt˝_gë_ªque°_size
(c⁄° 
kØt˝_c⁄√˘_t
 *
mesßge
, 
kØt˝_mesßge_ty≥_t
 
ty≥
, 
size_t
 *
size
)

92 
	`KAA_RETURN_IF_NIL2
(
mesßge
, 
size
, 
KAATCP_ERR_BAD_PARAM
);

94 
size_t
 
∑ylﬂd_size
 = 
mesßge
->
sync_ªque°_size


95 + 
mesßge
->
£ssi⁄_key_size


96 + 
mesßge
->
sig«tuª_size


97 + 
KAA_CONNECT_HEADER_LENGTH
;

99 i‡(
∑ylﬂd_size
 <
MAX_MESSAGE_LENGTH
 && 
ty≥
 <
MAX_MESSAGE_TYPE_LENGTH
) {

100 
uöt8_t
 
hódî_size
 = 1;

102 
∑ylﬂd_size
 /
FIRST_BIT
;

103 ++
hódî_size
;

104 } 
∑ylﬂd_size
);

106 *
size
 = 
∑ylﬂd_size
 + 
hódî_size
;

107  (
kØt˝_îr‹_t
)
KAA_ERR_NONE
;

110  (
kØt˝_îr‹_t
)
KAA_ERR_BADPARAM
;

112 
	}
}

115 
__©åibuã__
((
wók
))

116 
kØt˝_îr‹_t
 
	$kØt˝_gë_ªque°_c⁄√˘
(c⁄° 
kØt˝_c⁄√˘_t
 *
mesßge


117 , *
buf


118 , 
size_t
 *
buf_size
)

120 
	`KAA_RETURN_IF_NIL3
(
mesßge
, 
buf
, 
buf_size
, 
KAATCP_ERR_BAD_PARAM
);

122 
hódî
[6];

123 
size_t
 
∑ylﬂd_size
 = 
mesßge
->
sync_ªque°_size


124 + 
mesßge
->
£ssi⁄_key_size


125 + 
mesßge
->
sig«tuª_size


126 + 
KAA_CONNECT_HEADER_LENGTH
;

128 
uöt8_t
 
hódî_size
 = 
	`¸óã_basic_hódî
(
KAATCP_MESSAGE_CONNECT


129 , 
∑ylﬂd_size


130 , 
hódî
);

132 i‡((*
buf_size
Ë< 
∑ylﬂd_size
 + 
hódî_size
) {

133  
KAATCP_ERR_BUFFER_NOT_ENOUGH
;

136 *
curs‹
 = 
buf
;

138 
	`mem˝y
(
curs‹
, 
hódî
, 
hódî_size
);

139 
curs‹
 +
hódî_size
;

141 
uöt16_t
 
«me_Àngth
 = 
	`KAA_HTONS
(
mesßge
->
¥Ÿocﬁ_«me_Àngth
);

142 
	`mem˝y
(
curs‹
, &
«me_Àngth
, (
uöt16_t
));

143 
curs‹
 +(
uöt16_t
);

145 
	`mem˝y
(
curs‹
, 
mesßge
->
¥Ÿocﬁ_«me
, mesßge->
¥Ÿocﬁ_«me_Àngth
);

146 
curs‹
 +
mesßge
->
¥Ÿocﬁ_«me_Àngth
;

148 *(
curs‹
++Ë
PROTOCOL_VERSION
;

149 *(
curs‹
++Ë
mesßge
->
c⁄√˘_Êags
;

151 
uöt32_t
 
√xt_¥Ÿocﬁ_id
 = 
	`KAA_HTONL
(
mesßge
->
√xt_±‹ocﬁ_id
);

152 
	`mem˝y
(
curs‹
, &
√xt_¥Ÿocﬁ_id
, (
uöt32_t
));

153 
curs‹
 +(
uöt32_t
);

155 *(
curs‹
++Ë
mesßge
->
£ssi⁄_key_Êags
;

156 *(
curs‹
++Ë
mesßge
->
sig«tuª_Êags
;

158 
uöt16_t
 
kìp_Æive
 = 
	`KAA_HTONS
(
mesßge
->keep_alive);

159 
	`mem˝y
(
curs‹
, &
kìp_Æive
, (
uöt16_t
));

160 
curs‹
 +(
uöt16_t
);

162 i‡(
mesßge
->
£ssi⁄_key
 && mesßge->
£ssi⁄_key_Êags
) {

163 
	`mem˝y
(
curs‹
, 
mesßge
->
£ssi⁄_key
, mesßge->
£ssi⁄_key_size
);

164 
curs‹
 +
mesßge
->
£ssi⁄_key_size
;

166 i‡(
mesßge
->
sig«tuª
 && mesßge->
sig«tuª_Êags
) {

167 
	`mem˝y
(
curs‹
, 
mesßge
->
sig«tuª
, mesßge->
sig«tuª_size
);

168 
curs‹
 +
mesßge
->
sig«tuª_size
;

171 i‡(
mesßge
->
sync_ªque°
) {

172 
	`mem˝y
(
curs‹
, 
mesßge
->
sync_ªque°
, mesßge->
sync_ªque°_size
);

173 
curs‹
 +
mesßge
->
sync_ªque°_size
;

175 *
buf_size
 = 
curs‹
 - 
buf
;

176  
KAATCP_ERR_NONE
;

177 
	}
}

179 
kØt˝_îr‹_t
 
	$kØt˝_fûl_disc⁄√˘_mesßge
(
kØt˝_disc⁄√˘_ªas⁄_t
 
ªtu∫_code
, 
kØt˝_disc⁄√˘_t
 *
mesßge
)

181 
	`KAA_RETURN_IF_NIL
(
mesßge
, 
KAATCP_ERR_BAD_PARAM
);

182 
mesßge
->
ªas⁄
 = 
ªtu∫_code
;

183  
KAATCP_ERR_NONE
;

184 
	}
}

186 
kØt˝_îr‹_t
 
	$kØt˝_gë_ªque°_disc⁄√˘
(c⁄° 
kØt˝_disc⁄√˘_t
 *
mesßge
, *
buf
, 
size_t
 *
buf_size
)

188 
	`KAA_RETURN_IF_NIL3
(
mesßge
, 
buf
, 
buf_size
, 
KAATCP_ERR_BAD_PARAM
);

190 i‡(*
buf_size
 < 
KAA_DISCONNECT_MESSAGE_SIZE
) {

191  
KAATCP_ERR_BUFFER_NOT_ENOUGH
;

193 *
curs‹
 = 
buf
;

194 
	`¸óã_basic_hódî
(
KAATCP_MESSAGE_DISCONNECT
, 2, 
curs‹
);

195 
curs‹
 += 2;

197 *(
curs‹
++) = 0;

198 *(
curs‹
++Ë(
mesßge
->
ªas⁄
 & 0xFF);

200 *
buf_size
 = 
KAA_DISCONNECT_MESSAGE_SIZE
;

201  
KAATCP_ERR_NONE
;

202 
	}
}

204 
	$kØt˝_fûl_kØsync_hódî
(
uöt16_t
 
mesßge_id
, 
uöt8_t
 
zù≥d
, uöt8_à
í¸y±ed
, 
kØt˝_kØsync_hódî_t
 *
hódî
)

206 
	`KAA_RETURN_IF_NIL
(
hódî
,);

208 
hódî
->
¥Ÿocﬁ_«me_Àngth
 = 
KAA_TCP_NAME_LENGTH
;

209 
	`mem˝y
(
hódî
->
¥Ÿocﬁ_«me
, 
KAA_TCP_NAME
, 
KAA_TCP_NAME_LENGTH
);

211 
hódî
->
¥Ÿocﬁ_vîsi⁄
 = 
PROTOCOL_VERSION
;

213 
hódî
->
mesßge_id
 = message_id;

215 
hódî
->
Êags
 |
KAA_SYNC_REQUEST_BIT
;

216 i‡(
zù≥d
) {

217 
hódî
->
Êags
 |
KAA_SYNC_ZIPPED_BIT
;

219 i‡(
í¸y±ed
) {

220 
hódî
->
Êags
 |
KAA_SYNC_ENCRYPTED_BIT
;

222 
	}
}

224 
kØt˝_îr‹_t
 
	$kØt˝_gë_kØsync_hódî
(c⁄° 
kØt˝_kØsync_hódî_t
 *
sync_hódî


225 , 
size_t
 
∑ylﬂd_Àngth


226 , *
buf


227 , 
size_t
 *
buf_size


228 , **
íd
)

230 
	`KAA_RETURN_IF_NIL5
(
sync_hódî
, 
∑ylﬂd_Àngth
, 
buf
, 
buf_size
, 
íd
, 
KAATCP_ERR_BAD_PARAM
);

232 
hódî
[6];

233 
size_t
 
∑ylﬂd_size
 = 
∑ylﬂd_Àngth
 + 
KAA_SYNC_HEADER_LENGTH
;

234 
uöt8_t
 
hódî_size
 = 
	`¸óã_basic_hódî
(
KAATCP_MESSAGE_KAASYNC
, 
∑ylﬂd_size
, 
hódî
);

236 i‡((*
buf_size
Ë< 
∑ylﬂd_size
 + 
hódî_size
) {

237  
KAATCP_ERR_BUFFER_NOT_ENOUGH
;

240 *
curs‹
 = 
buf
;

242 
	`mem˝y
(
curs‹
, 
hódî
, 
hódî_size
);

243 
curs‹
 +
hódî_size
;

245 
uöt16_t
 
«me_Àngth
 = 
	`KAA_HTONS
(
sync_hódî
->
¥Ÿocﬁ_«me_Àngth
);

246 
	`mem˝y
(
curs‹
, &
«me_Àngth
, (
uöt16_t
));

247 
curs‹
 +(
uöt16_t
);

249 
	`mem˝y
(
curs‹
, 
sync_hódî
->
¥Ÿocﬁ_«me
, sync_hódî->
¥Ÿocﬁ_«me_Àngth
);

250 
curs‹
 +
sync_hódî
->
¥Ÿocﬁ_«me_Àngth
;

252 *(
curs‹
++Ë
PROTOCOL_VERSION
;

254 
uöt16_t
 
mesßge_id
 = 
	`KAA_HTONS
(
sync_hódî
->message_id);

255 
	`mem˝y
(
curs‹
, &
mesßge_id
, (
uöt16_t
));

256 
curs‹
 +(
uöt16_t
);

258 *(
curs‹
++Ë
sync_hódî
->
Êags
;

259 *
íd
 = 
curs‹
;

260  
KAATCP_ERR_NONE
;

261 
	}
}

263 
kØt˝_îr‹_t
 
	$kØt˝_fûl_kØsync_mesßge
(*
sync_ªque°
, 
size_t
 
sync_ªque°_size


264 , 
uöt16_t
 
mesßge_id
, 
uöt8_t
 
zù≥d
, uöt8_à
í¸y±ed


265 , 
kØt˝_kØsync_t
 *
mesßge
)

267 
	`KAA_RETURN_IF_NIL3
(
sync_ªque°
, 
sync_ªque°_size
, 
mesßge
, 
KAATCP_ERR_BAD_PARAM
);

269 
	`mem£t
(
mesßge
, 0, (
kØt˝_kØsync_t
));

270 
	`kØt˝_fûl_kØsync_hódî
(
mesßge_id
, 
zù≥d
, 
í¸y±ed
, &
mesßge
->
sync_hódî
);

271 
mesßge
->
sync_hódî
.
Êags
 |
KAA_SYNC_SYNC_BIT
;

272 
mesßge
->
sync_ªque°
 = sync_request;

273 
mesßge
->
sync_ªque°_size
 = sync_request_size;

275  
KAATCP_ERR_NONE
;

276 
	}
}

278 
kØt˝_îr‹_t
 
	$kØt˝_gë_ªque°_kØsync
(c⁄° 
kØt˝_kØsync_t
 *
mesßge
, *
buf
, 
size_t
 *
buf_size
)

280 
	`KAA_RETURN_IF_NIL3
(
mesßge
, 
buf
, 
buf_size
, 
KAATCP_ERR_BAD_PARAM
);

282 
size_t
 
fú°_buf_size
 = *
buf_size
;

283 *
curs‹
 = 
NULL
;

284 
kØt˝_îr‹_t
 
rvÆ
 = 
	`kØt˝_gë_kØsync_hódî
(&
mesßge
->
sync_hódî


285 , 
mesßge
->
sync_ªque°_size


286 , 
buf


287 , 
buf_size


288 , &
curs‹
);

289 
	`KAA_RETURN_IF_ERR
(
rvÆ
);

291 i‡(
mesßge
->
sync_ªque°
) {

292 i‡(
curs‹
 + 
mesßge
->
sync_ªque°_size
 <
buf
 + 
fú°_buf_size
) {

293 
	`mem˝y
(
curs‹
, 
mesßge
->
sync_ªque°
, mesßge->
sync_ªque°_size
);

294 
curs‹
 +
mesßge
->
sync_ªque°_size
;

297 *
buf_size
 = 
curs‹
 - 
buf
;

298  
fú°_buf_size
 < *
buf_size
 ? 
KAATCP_ERR_BUFFER_NOT_ENOUGH
 : 
KAATCP_ERR_NONE
;

299 
	}
}

302 
kØt˝_îr‹_t
 
	$kØt˝_gë_ªque°_pög
(*
buf
, 
size_t
 *
buf_size
)

304 
	`KAA_RETURN_IF_NIL2
(
buf
, 
buf_size
, 
KAATCP_ERR_BAD_PARAM
);

306 i‡(*
buf_size
 < 
KAA_PING_MESSAGE_SIZE
) {

307  
KAATCP_ERR_BUFFER_NOT_ENOUGH
;

309 
	`¸óã_basic_hódî
(
KAATCP_MESSAGE_PINGREQ
, 0, 
buf
);

310 *
buf_size
 = 
KAA_PING_MESSAGE_SIZE
;

311  
KAATCP_ERR_NONE
;

312 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/kaa_protocols/kaa_tcp/kaatcp_request.h

17 #i‚de‡
KAATCP_REQUEST_H_


18 
	#KAATCP_REQUEST_H_


	)

20 #ifde‡
__˝lu•lus


24 
	~"kØt˝_comm⁄.h
"

28 
kØt˝_îr‹_t
 
kØt˝_fûl_c⁄√˘_mesßge
(
uöt16_t
 
kì∑live
, 
uöt32_t
 
√xt_¥Ÿocﬁ_id


29 , *
sync_ªque°
, 
size_t
 
sync_ªque°_size


30 , *
£ssi⁄_key
, 
size_t
 
£ssi⁄_key_size


31 , *
sig«tuª
, 
size_t
 
sig«tuª_size


32 , 
kØt˝_c⁄√˘_t
 *
mesßge
);

34 
kØt˝_îr‹_t
 
kØt˝_gë_ªque°_c⁄√˘
(c⁄° 
kØt˝_c⁄√˘_t
 *
mesßge


35 , *
buf


36 , 
size_t
 *
buf_size
);

38 
kØt˝_îr‹_t
 
kØt˝_fûl_disc⁄√˘_mesßge
(
kØt˝_disc⁄√˘_ªas⁄_t
 
ªas⁄


39 , 
kØt˝_disc⁄√˘_t
 *
mesßge
);

41 
kØt˝_îr‹_t
 
kØt˝_gë_ªque°_disc⁄√˘
(c⁄° 
kØt˝_disc⁄√˘_t
 *
mesßge


42 , *
buf


43 , 
size_t
 *
buf_size
);

45 
kØt˝_îr‹_t
 
kØt˝_fûl_kØsync_mesßge
(*
sync_ªque°
, 
size_t
 
sync_ªque°_size


46 , 
uöt16_t
 
mesßge_id
, 
uöt8_t
 
zù≥d
, uöt8_à
í¸y±ed


47 , 
kØt˝_kØsync_t
 *
mesßge
);

49 
kØt˝_îr‹_t
 
kØt˝_gë_ªque°_kØsync
(c⁄° 
kØt˝_kØsync_t
 *
mesßge


50 , *
buf


51 , 
size_t
 *
buf_size
);

53 
kØt˝_îr‹_t
 
kØt˝_gë_ªque°_pög
(*
buf
, 
size_t
 *
buf_size
);

55 
kØt˝_îr‹_t
 
kØt˝_gë_ªque°_size
(c⁄° 
kØt˝_c⁄√˘_t
 *
mesßge
, 
kØt˝_mesßge_ty≥_t
 
ty≥
, 
size_t
 *
size
);

57 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/kaa_status.c

17 
	~"kØ_¥iv©e.h
"

19 
	~<°ddef.h
>

20 
	~<°döt.h
>

21 
	~<°dboﬁ.h
>

22 
	~<°rög.h
>

24 
	~"∂©f‹m/ext_nŸifiˇti⁄_ª˚ivî.h
"

25 
	~"∂©f‹m/ext_sha.h
"

26 
	~"∂©f‹m/ext_°©us.h
"

27 
	~"kØ_°©us.h
"

28 
	~"kØ_deÁu…s.h
"

29 
	~"utûôõs/kØ_mem.h
"

55 
	#KAA_STATUS_STATIC_SIZE
 ((
boﬁ
Ë+ (boﬁË+ (
size_t
Ë+ (boﬁË+ (
uöt32_t
Ë+ (size_tË+ 
SHA_1_DIGEST_LENGTH
 * (Ë* 2 + (
KAA_SDK_TOKEN
))

	)

57 
	#READ_BUFFER
(
FROM
, 
TO
, 
SIZE
) \

58 
	`mem˝y
(
TO
, 
FROM
, 
SIZE
); \

59 
FROM
 +
SIZE


	)

61 
	#WRITE_BUFFER
(
FROM
, 
TO
, 
SIZE
) \

62 
	`mem˝y
(
TO
, 
FROM
, 
SIZE
); \

63 
TO
 +
SIZE


	)

66 
kØ_îr‹_t
 
	$kØ_°©us_¸óã
(
kØ_°©us_t
 ** 
kØ_°©us_p
)

68 
	`KAA_RETURN_IF_NIL
(
kØ_°©us_p
, 
KAA_ERR_BADPARAM
);

70 
kØ_°©us_t
 *
kØ_°©us
 = 
	`KAA_CALLOC
(1, (*kaa_status));

71 
	`KAA_RETURN_IF_NIL
(
kØ_°©us
, 
KAA_ERR_NOMEM
);

73 
kØ_°©us
->
t›ic_°©es
 = 
	`kØ_li°_¸óã
();

74 
	`KAA_RETURN_IF_NIL
(
kØ_°©us
->
t›ic_°©es
, 
KAA_ERR_NOMEM
);

75 
kØ_°©us
->
t›ics
 = 
	`kØ_li°_¸óã
();

76 
	`KAA_RETURN_IF_NIL
(
kØ_°©us
->
t›ics
, 
KAA_ERR_NOMEM
);

78 * 
ªad_buf
 = 
NULL
;

79 * 
ªad_buf_hód
 = 
NULL
;

80 
size_t
 
ªad_size
 = 0;

81 
boﬁ
 
√eds_dóŒoˇti⁄
 = 
Ál£
;

82 
	`ext_°©us_ªad
(&
ªad_buf
, &
ªad_size
, &
√eds_dóŒoˇti⁄
);

83 
ªad_buf_hód
 = 
ªad_buf
;

85 i‡(
ªad_size
 >
KAA_STATUS_STATIC_SIZE
 + (
size_t
)) {

86 
	`READ_BUFFER
(
ªad_buf
, &
kØ_°©us
->
is_ªgi°îed
, (kaa_status->is_registered));

87 
	`READ_BUFFER
(
ªad_buf
, &
kØ_°©us
->
is_©èched
, (kaa_status->is_attached));

88 
	`READ_BUFFER
(
ªad_buf
, &
kØ_°©us
->
evít_£q_n
, (kaa_status->event_seq_n));

89 
	`READ_BUFFER
(
ªad_buf
, 
kØ_°©us
->
ídpoöt_public_key_hash
, 
SHA_1_DIGEST_LENGTH
);

90 
	`READ_BUFFER
(
ªad_buf
, 
kØ_°©us
->
¥ofûe_hash
, 
SHA_1_DIGEST_LENGTH
);

91 
	`READ_BUFFER
(
ªad_buf
, &
kØ_°©us
->
¥ofûe_√eds_ªsync
, (kaa_status->profile_needs_resync));

93 
size_t
 
ídpoöt_ac˚ss_tokí_Àngth
 = 0;

94 
	`READ_BUFFER
(
ªad_buf
, &
ídpoöt_ac˚ss_tokí_Àngth
, (endpoint_access_token_length));

96 i‡(
ídpoöt_ac˚ss_tokí_Àngth
 > 0) {

97 
kØ_°©us
->
ídpoöt_ac˚ss_tokí
 = 
	`KAA_MALLOC
((
ídpoöt_ac˚ss_tokí_Àngth
 + 1) * ());

98 i‡(!
kØ_°©us
->
ídpoöt_ac˚ss_tokí
) {

99 
	`KAA_FREE
(
kØ_°©us
);

100  
KAA_ERR_NOMEM
;

102 
	`READ_BUFFER
(
ªad_buf
, 
kØ_°©us
->
ídpoöt_ac˚ss_tokí
, 
ídpoöt_ac˚ss_tokí_Àngth
);

103 
kØ_°©us
->
ídpoöt_ac˚ss_tokí
[
ídpoöt_ac˚ss_tokí_Àngth
] = '\0';

106 
size_t
 
°©es_cou¡
 = 0;

107 
	`READ_BUFFER
(
ªad_buf
, &
°©es_cou¡
, (
size_t
));

108 
°©es_cou¡
--) {

109 
kØ_t›ic_°©e_t
 *
°©e
 = 
	`KAA_MALLOC
((kaa_topic_state_t));

110 
	`KAA_RETURN_IF_NIL
(
°©e
, 
KAA_ERR_NOMEM
);

111 
	`READ_BUFFER
(
ªad_buf
, &
°©e
->
t›ic_id
, (
uöt64_t
));

112 
	`READ_BUFFER
(
ªad_buf
, &
°©e
->
sqn_numbî
, (
uöt32_t
));

114 i‡(!
	`kØ_li°_push_back
(
kØ_°©us
->
t›ic_°©es
, 
°©e
)) {

115 
	`KAA_FREE
(
°©e
);

116  
KAA_ERR_NOMEM
;

122 
size_t
 
t›ics_cou¡
;

123 
	`READ_BUFFER
(
ªad_buf
, &
t›ics_cou¡
, (topics_count));

125 
t›ics_cou¡
--) {

126 
kØ_t›ic_t
 *
t›ic
 = 
	`KAA_MALLOC
((*topic));

127 
	`KAA_RETURN_IF_NIL
(
t›ic
, 
KAA_ERR_NOMEM
);

129 
	`READ_BUFFER
(
ªad_buf
, &
t›ic
->
id
, (topic->id));

130 
	`READ_BUFFER
(
ªad_buf
, &
t›ic
->
subs¸ùti⁄_ty≥
,

131 (
t›ic
->
subs¸ùti⁄_ty≥
));

132 
	`READ_BUFFER
(
ªad_buf
, &
t›ic
->
«me_Àngth
, (topic->name_length));

134 i‡(
t›ic
->
«me_Àngth
) {

135 
t›ic
->
«me
 = 
	`KAA_CALLOC
—›ic->
«me_Àngth
 + 1, 1);

136 
	`KAA_RETURN_IF_NIL
(
t›ic
->
«me
, 
KAA_ERR_NOMEM
);

137 
	`READ_BUFFER
(
ªad_buf
, 
t›ic
->
«me
,Å›ic->
«me_Àngth
);

140 i‡(!
	`kØ_li°_push_back
(
kØ_°©us
->
t›ics
, 
t›ic
)) {

141 
	`KAA_FREE
(
t›ic
);

142  
KAA_ERR_NOMEM
;

146 
	`READ_BUFFER
(
ªad_buf
, &
kØ_°©us
->
t›ic_li°_hash
, (kaa_status->topic_list_hash));

147 
tokí_buf
[(
KAA_SDK_TOKEN
)];

148 
	`READ_BUFFER
(
ªad_buf
, 
tokí_buf
, (token_buf));

151 i‡(
	`°rcmp
(
tokí_buf
, 
KAA_SDK_TOKEN
)) {

152 
kØ_°©us
->
is_ªgi°îed
 = 
Ál£
;

154 
	`kØ_°©us_£t_upd©ed
(
kØ_°©us
, 
åue
);

158 i‡(
√eds_dóŒoˇti⁄
) {

159 
	`KAA_FREE
(
ªad_buf_hód
);

162 *
kØ_°©us_p
 = 
kØ_°©us
;

163  
KAA_ERR_NONE
;

164 
	}
}

166 
	$kØ_°©us_de°roy
(
kØ_°©us_t
 *
£lf
)

168 i‡(
£lf
) {

169 
	`KAA_FREE
(
£lf
->
ídpoöt_ac˚ss_tokí
);

170 
	`kØ_li°_de°roy
(
£lf
->
t›ic_°©es
, 
NULL
);

171 
	`kØ_li°_de°roy
(
£lf
->
t›ics
, 
NULL
);

172 
	`KAA_FREE
(
£lf
);

174 
	}
}

176 
kØ_îr‹_t
 
	$kØ_°©us_£t_ídpoöt_ac˚ss_tokí
(
kØ_°©us_t
 * 
£lf
, c⁄° *
tokí
)

178 
	`KAA_RETURN_IF_NIL
(
£lf
, 
KAA_ERR_BADPARAM
);

180 *
√w_tokí
;

181 
size_t
 
Àn
 = 
	`°æí
(
tokí
);

185 
√w_tokí
 = 
	`KAA_MALLOC
((
Àn
 + 1) * ());

186 i‡(!
√w_tokí
)

187  
KAA_ERR_NOMEM
;

189 
	`°r˝y
(
√w_tokí
, 
tokí
);

191 i‡(
£lf
->
ídpoöt_ac˚ss_tokí
)

192 
	`KAA_FREE
(
£lf
->
ídpoöt_ac˚ss_tokí
);

194 
£lf
->
ídpoöt_ac˚ss_tokí
 = 
√w_tokí
;

195 
£lf
->
has_upd©e
 = 
åue
;

197  
KAA_ERR_NONE
;

198 
	}
}

200 
kØ_îr‹_t
 
	$kØ_°©us_£t_ªgi°îed
(
kØ_°©us_t
 *
£lf
, 
boﬁ
 
is_ªgi°îed
)

202 
	`KAA_RETURN_IF_NIL
(
£lf
, 
KAA_ERR_BADPARAM
);

203 
£lf
->
is_ªgi°îed
 = is_registered;

204 
£lf
->
has_upd©e
 = 
åue
;

205  
KAA_ERR_NONE
;

206 
	}
}

208 
kØ_îr‹_t
 
	$kØ_°©us_£t_©èched
(
kØ_°©us_t
 *
£lf
, 
boﬁ
 
is_©èched
)

210 
	`KAA_RETURN_IF_NIL
(
£lf
, 
KAA_ERR_BADPARAM
);

211 
£lf
->
is_©èched
 = is_attached;

212 
£lf
->
has_upd©e
 = 
åue
;

213  
KAA_ERR_NONE
;

214 
	}
}

216 
kØ_îr‹_t
 
	$kØ_°©us_£t_upd©ed
(
kØ_°©us_t
 *
£lf
, 
boﬁ
 
is_upd©ed
)

218 
	`KAA_RETURN_IF_NIL
(
£lf
, 
KAA_ERR_BADPARAM
);

219 
£lf
->
is_upd©ed
 = is_updated;

220 
£lf
->
has_upd©e
 = 
åue
;

221  
KAA_ERR_NONE
;

222 
	}
}

224 
kØ_îr‹_t
 
	$kØ_°©us_ßve
(
kØ_°©us_t
 *
£lf
)

226 
	`KAA_RETURN_IF_NIL
(
£lf
, 
KAA_ERR_BADPARAM
);

228 i‡(!
£lf
->
has_upd©e
)

229  
KAA_ERR_NONE
;

231 
size_t
 
ídpoöt_ac˚ss_tokí_Àngth
 = 
£lf
->
ídpoöt_ac˚ss_tokí
 ? 
	`°æí
(self->endpoint_access_token) : 0;

232 
size_t
 
°©es_cou¡
 = 
	`kØ_li°_gë_size
(
£lf
->
t›ic_°©es
);

233 
size_t
 
t›ics_cou¡
 = 
	`kØ_li°_gë_size
(
£lf
->
t›ics
);

236 
kØ_li°_node_t
 *
t›ic_node
 = 
	`kØ_li°_begö
(
£lf
->
t›ics
);

237 
size_t
 
t›ics_size
 = 0;

238 
t›ic_node
) {

239 
kØ_t›ic_t
 *
t›ic
 = 
	`kØ_li°_gë_d©a
(
t›ic_node
);

241 
t›ics_size
 +(
t›ic
->
id
)

242 + (
t›ic
->
subs¸ùti⁄_ty≥
)

243 + (
t›ic
->
«me_Àngth
)

244 + 
t›ic
->
«me_Àngth
;

246 
t›ic_node
 = 
	`kØ_li°_√xt
(topic_node);

250 
size_t
 
buf„r_size
 = 
KAA_STATUS_STATIC_SIZE


251 + (
ídpoöt_ac˚ss_tokí_Àngth
)

252 + 
ídpoöt_ac˚ss_tokí_Àngth


254 + 
°©es_cou¡
 * ((
uöt32_t
Ë+ (
uöt64_t
))

255 + 
t›ics_size


256 + (
öt32_t
);

258 *
buf„r_hód
 = 
	`KAA_MALLOC
(
buf„r_size
 * ());

259 
	`KAA_RETURN_IF_NIL
(
buf„r_hód
, 
KAA_ERR_NOMEM
);

261 *
buf„r
 = 
buf„r_hód
;

263 
	`WRITE_BUFFER
(&
£lf
->
is_ªgi°îed
, 
buf„r
, (self->is_registered));

264 
	`WRITE_BUFFER
(&
£lf
->
is_©èched
, 
buf„r
, (self->is_attached));

265 
	`WRITE_BUFFER
(&
£lf
->
evít_£q_n
, 
buf„r
, (self->event_seq_n));

266 
	`WRITE_BUFFER
(
£lf
->
ídpoöt_public_key_hash
, 
buf„r
, 
SHA_1_DIGEST_LENGTH
);

267 
	`WRITE_BUFFER
(
£lf
->
¥ofûe_hash
, 
buf„r
, 
SHA_1_DIGEST_LENGTH
);

268 
	`WRITE_BUFFER
(&
£lf
->
¥ofûe_√eds_ªsync
, 
buf„r
, (self->profile_needs_resync));

269 
	`WRITE_BUFFER
(&
ídpoöt_ac˚ss_tokí_Àngth
, 
buf„r
,

270 (
ídpoöt_ac˚ss_tokí_Àngth
));

271 i‡(
ídpoöt_ac˚ss_tokí_Àngth
) {

272 
	`WRITE_BUFFER
(
£lf
->
ídpoöt_ac˚ss_tokí
, 
buf„r
, 
ídpoöt_ac˚ss_tokí_Àngth
);

275 
kØ_li°_node_t
 *
°©e_node
 = 
	`kØ_li°_begö
(
£lf
->
t›ic_°©es
);

276 
	`WRITE_BUFFER
(&
°©es_cou¡
, 
buf„r
, (
size_t
));

277 
°©e_node
) {

278 
kØ_t›ic_°©e_t
 *
°©e
 = 
	`kØ_li°_gë_d©a
(
°©e_node
);

279 
	`WRITE_BUFFER
(&
°©e
->
t›ic_id
, 
buf„r
, (
uöt64_t
));

280 
	`WRITE_BUFFER
(&
°©e
->
sqn_numbî
, 
buf„r
, (
uöt32_t
));

281 
°©e_node
 = 
	`kØ_li°_√xt
(state_node);

284 
t›ic_node
 = 
	`kØ_li°_begö
(
£lf
->
t›ics
);

285 
	`WRITE_BUFFER
(&
t›ics_cou¡
, 
buf„r
, (topics_count));

286 
t›ic_node
) {

287 
kØ_t›ic_t
 *
t›ic
 = 
	`kØ_li°_gë_d©a
(
t›ic_node
);

289 
	`WRITE_BUFFER
(&
t›ic
->
id
, 
buf„r
, (topic->id));

290 
	`WRITE_BUFFER
(&
t›ic
->
subs¸ùti⁄_ty≥
, 
buf„r
, (topic->subscription_type));

291 
	`WRITE_BUFFER
(&
t›ic
->
«me_Àngth
, 
buf„r
, (topic->name_length));

292 
	`WRITE_BUFFER
(
t›ic
->
«me
, 
buf„r
,Å›ic->
«me_Àngth
);

293 
t›ic_node
 = 
	`kØ_li°_√xt
(topic_node);

296 
	`WRITE_BUFFER
(&
£lf
->
t›ic_li°_hash
, 
buf„r
, (self->topic_list_hash));

297 
	`WRITE_BUFFER
(
KAA_SDK_TOKEN
, 
buf„r
, (KAA_SDK_TOKEN));

299 
	`ext_°©us_°‹e
(
buf„r_hód
, 
buf„r_size
);

301 
	`KAA_FREE
(
buf„r_hód
);

303 
£lf
->
has_upd©e
 = 
Ál£
;

305  
KAA_ERR_NONE
;

306 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/kaa_status.h

17 #i‚de‡
KAA_STATUS_H_


18 
	#KAA_STATUS_H_


	)

20 #ifde‡
__˝lu•lus


24 
	~"kØ_îr‹.h
"

25 
	~"kØ_comm⁄.h
"

26 
	~"cﬁÀ˘i⁄s/kØ_li°.h
"

27 
	~"∂©f‹m/ext_sha.h
"

30 
uöt64_t
 
t›ic_id
;

31 
uöt32_t
 
sqn_numbî
;

32 } 
	tkØ_t›ic_°©e_t
;

34 #i‚de‡
KAA_STATUS_T


35 
	#KAA_STATUS_T


	)

38 
uöt32_t
 
evít_£q_n
;

39 
boﬁ
 
is_ªgi°îed
;

40 
boﬁ
 
is_©èched
;

41 
boﬁ
 
is_upd©ed
;

42 
kØ_dige°
 
ídpoöt_public_key_hash
;

43 
kØ_dige°
 
¥ofûe_hash
;

44 
boﬁ
 
¥ofûe_√eds_ªsync
;

46 
kØ_li°_t
 *
t›ic_°©es
;

47 
kØ_li°_t
 *
t›ics
;

48 
öt32_t
 
t›ic_li°_hash
;

49 *
ídpoöt_ac˚ss_tokí
;

50 
boﬁ
 
has_upd©e
;

51 } 
	tkØ_°©us_t
;

56 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/Econais/EC19D/__ashldi3.c

17 
	~<öây≥s.h
>

19 
uöt64_t
 
	$__ashldi3
(
uöt64_t
 
a
, 
b
)

21 i‡(
b
 <= 0) {

22  
a
;

24 i‡(
b
 >= 64) {

27 
uöt32_t
 
aLow
 = (uöt32_t)
a
;

28 
uöt32_t
 
aHigh
 = (uöt32_t)(
a
 >> 32);

29 i‡(
b
 >= 32) {

30 
aHigh
 = (
aLow
 << (
b
 - 32));

31 
aLow
 = 0;

33 
aHigh
 = (aHigh << 
b
Ë+ (
aLow
 >> (32 - b));

34 
aLow
 = (aLow << 
b
);

36  ((
uöt64_t
Ë
aHigh
 << 32Ë+ 
aLow
;

37 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/Econais/EC19D/econais_ec19d_configuration_persistence.c

24 
	~<°dboﬁ.h
>

25 
	~<°ddef.h
>

26 
	~"∂©f‹m/ext_c⁄figuøti⁄_≥rsi°í˚.h
"

27 
	~"ec⁄ais_ec19d_fûe_utûs.h
"

29 
	#KAA_CONFIGURATION_STORAGE
 "kØ_c⁄figuøti⁄.bö"

	)

31 
	$ext_c⁄figuøti⁄_ªad
(**
buf„r
, 
size_t
 *
buf„r_size
, 
boﬁ
 *
√eds_dóŒoˇti⁄
)

33 
	`ec⁄ais_ec19d_bö¨y_fûe_ªad
(
KAA_CONFIGURATION_STORAGE
, 
buf„r
, 
buf„r_size
, 
√eds_dóŒoˇti⁄
);

34 
	}
}

36 
	$ext_c⁄figuøti⁄_°‹e
(c⁄° *
buf„r
, 
size_t
 
buf„r_size
)

38 
	`ec⁄ais_ec19d_bö¨y_fûe_°‹e
(
KAA_CONFIGURATION_STORAGE
, 
buf„r
, 
buf„r_size
);

39 
	}
}

41 
	$ext_c⁄figuøti⁄_dñëe
()

43 
	`ec⁄ais_ec19d_bö¨y_fûe_dñëe
(
KAA_CONFIGURATION_STORAGE
);

44 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/Econais/EC19D/econais_ec19d_defaults.h

23 #i‚de‡
ECONAIS_EC19D_DEFAULTS_H_


24 
	#ECONAIS_EC19D_DEFAULTS_H_


	)

26 
	#KAA_TCP_CHANNEL_IN_BUFFER_SIZE
 246

	)

27 
	#KAA_TCP_CHANNEL_OUT_BUFFER_SIZE
 1015

	)

29 
	#KAA_TCP_CHANNEL_MAX_TIMEOUT
 200u

	)

30 
	#KAA_TCP_CHANNEL_PING_TIMEOUT
 (
KAA_TCP_CHANNEL_MAX_TIMEOUT
 / 2)

	)

32 
	#KAATCP_PARSER_MAX_MESSAGE_LENGTH
 999

	)

34 
	#KAA_MAX_LOG_MESSAGE_LENGTH
 247

	)

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/Econais/EC19D/econais_ec19d_file_utils.c

20 
	~<¢dc_sdk_≠i.h
>

21 
	~<¢dc_fûe_≠i.h
>

22 
	~"ec⁄ais_ec19d_fûe_utûs.h
"

23 
	~"kØ_comm⁄.h
"

25 
	$ec⁄ais_ec19d_bö¨y_fûe_ªad
(c⁄° *
fûe_«me
, **
buf„r
, 
size_t
 *
buf„r_size
, 
boﬁ
 *
√eds_dóŒoˇti⁄
)

27 
	`KAA_RETURN_IF_NIL4
(
fûe_«me
, 
buf„r
, 
buf„r_size
, 
√eds_dóŒoˇti⁄
, -1);

29 *
buf„r
 = 
NULL
;

30 *
buf„r_size
 = 0;

31 *
√eds_dóŒoˇti⁄
 = 
Ál£
;

33 
¢dc_fûe_ªf_t
 
°©us_fûe
 = 
	`¢dc_fûe_›í
(
fûe_«me
, 
DE_FRDONLY
);

34 
	`KAA_RETURN_IF_NIL
(
°©us_fûe
, -1);

36 
	`¢dc_fûe_£ek
(
°©us_fûe
, 0, 
SEEK_END
);

37 *
buf„r_size
 = 
	`¢dc_fûe_ãŒ
(
°©us_fûe
);

38 *
buf„r
 = (*)
	`¢dc_mem_ˇŒoc
(*
buf„r_size
, ());

39 
	`KAA_RETURN_IF_NIL
(*
buf„r
, -1);

42 
	`¢dc_fûe_£ek
(
°©us_fûe
, 0, 
SEEK_SET
);

43 i‡(
	`¢dc_fûe_ªad
(
°©us_fûe
, *
buf„r
, *
buf„r_size
) == 0) {

44 
	`¢dc_mem_‰ì
(*
buf„r
);

47 *
√eds_dóŒoˇti⁄
 = 
åue
;

48 
	`¢dc_fûe_˛o£
(
°©us_fûe
);

50 
	}
}

52 
	$ec⁄ais_ec19d_bö¨y_fûe_°‹e
(c⁄° *
fûe_«me
, c⁄° *
buf„r
, 
size_t
 
buf„r_size
)

54 
	`KAA_RETURN_IF_NIL3
(
fûe_«me
, 
buf„r
, 
buf„r_size
, -1);

55 
¢dc_fûe_ªf_t
 
°©us_fûe
 = 
	`¢dc_fûe_›í
(
fûe_«me
, 
DE_FCREATE
|
DE_FWRONLY
|
DE_FTRUNC
);

57 i‡(
°©us_fûe
) {

58 
i
 = 
	`¢dc_fûe_wrôe
(
°©us_fûe
, (*)
buf„r
, 
buf„r_size
);

59 
	`¢dc_fûe_˛o£
(
°©us_fûe
);

60  0 ? (
i
 >= 0) : -1;

63 
	}
}

65 
	$ec⁄ais_ec19d_bö¨y_fûe_dñëe
(c⁄° *
fûe_«me
)

67  
	`¢dc_fûe_dñëe
(
fûe_«me
);

68 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/Econais/EC19D/econais_ec19d_file_utils.h

21 #i‚de‡
ECONAIS_EC19D_FILE_UTILS_H_


22 
	#ECONAIS_EC19D_FILE_UTILS_H_


	)

24 
	~<°ddef.h
>

25 
	~<°dboﬁ.h
>

27 #ifde‡
__˝lu•lus


31 
ec⁄ais_ec19d_bö¨y_fûe_ªad
(c⁄° *
fûe_«me
, **
buf„r
, 
size_t
 *
buf„r_size
, 
boﬁ
 *
√eds_dóŒoˇti⁄
);

34 
ec⁄ais_ec19d_bö¨y_fûe_°‹e
(c⁄° *
fûe_«me
, c⁄° *
buf„r
, 
size_t
 
buf„r_size
);

37 
ec⁄ais_ec19d_bö¨y_fûe_dñëe
(c⁄° *
fûe_«me
);

39 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/Econais/EC19D/econais_ec19d_kaa_client.c

20 
	~<¢dc_sdk_≠i.h
>

21 
	~<¢dc_sock_≠i.h
>

22 
	~<¢dc_fûe_≠i.h
>

24 
	~<°dboﬁ.h
>

25 
	töt64_t
;

27 
	~"kØ_îr‹.h
"

28 
	~"kØ_comm⁄.h
"

29 
	~"kØ.h
"

30 
	~"utûôõs/kØ_log.h
"

31 
	~"∂©f‹m/ext_sha.h
"

32 
	~"∂©f‹m/ext_å™•‹t_ch™√l.h
"

33 
	~"∂©f‹m/ext_sy°em_loggî.h
"

34 
	~"∂©f‹m/time.h
"

35 
	~"∂©f‹m-im∂/comm⁄/kØ_t˝_ch™√l.h
"

36 
	~"∂©f‹m-im∂/comm⁄/ext_log_u∂ﬂd_°øãgõs.h
"

37 
	~"kØ_boŸ°øp_m™agî.h
"

38 
	~"kØ_ch™√l_m™agî.h
"

39 
	~"kØ_c⁄figuøti⁄_m™agî.h
"

40 
	~"kØ_loggög.h
"

41 
	~"∂©f‹m/ext_log_°‹age.h
"

42 
	~"∂©f‹m/ext_log_u∂ﬂd_°øãgy.h
"

43 
	~"ec⁄ais_ec19d_fûe_utûs.h
"

45 
	~"kØ_c⁄ãxt.h
"

47 
	#KAA_CLIENT_T


	)

50 
	mBOOTSRAP_UNDEF
,

51 
	mBOOTSRAP_STARTED
,

52 
	mBOOTSRAP_FINISHED


53 } 
	tboŸ°øp_˛õ¡_°©e_t
;

55 
	skØ_˛õ¡_t
 {

56 *
	mthªad_«me
;

57 
boﬁ_t
 
	m›î©e
;

58 
¢dc_£m_t
 
	m°¨t_£m›h‹e
;

59 
¢dc_£m_t
 
	mloggög_£m›h‹e
;

60 
	mmax_upd©e_time
;

61 
¢dc_timevÆ
 
	mtimevÆ
;

62 
kØ_c⁄ãxt_t
 *
	mkØ_c⁄ãxt
;

63 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 
	mboŸ°øp_ch™√l
;

64 
	mboŸ°øp_ch™√l_id
;

65 
boŸ°øp_˛õ¡_°©e_t
 
	mboŸ°øp_°©e
;

66 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 
	m›î©i⁄s_ch™√l
;

67 
	m›î©i⁄s_ch™√l_id
;

68 *
	mlog_°‹age_c⁄ãxt
;

69 *
	mlog_u∂ﬂd_°øãgy_c⁄ãxt
;

70 
¢dc_mem_°©s_t
 
	mmem_°©
;

73 
	#KAA_DEMO_UPLOAD_COUNT_THRESHOLD
 1

	)

75 
	#KAA_DEMO_LOG_GENERATION_FREQUENCY
 3

	)

77 
	~"∂©f‹m/kØ_˛õ¡.h
"

80 
kØ_îr‹_t
 
kØ_öô_£curôy_°uff
();

84 
¥öt_mem_°©
(
kØ_˛õ¡_t
 *
kØ_˛õ¡
);

88 
	#KAA_DEMO_MAX_UPLOAD_THRESHOLD
 15

	)

90 
	#KAA_DEMO_MAX_LOG_BUCKET_SIZE
 (
KAA_TCP_CHANNEL_OUT_BUFFER_SIZE
 >> 3)

	)

91 
	#KAA_DEMO_MAX_LOGS_IN_BUCKET
 16

	)

92 
	#KAA_DEMO_MAX_CLEANUP_THRESHOLD
 100

	)

94 
	#KAA_DEMO_LOG_GENERATION_FREQUENCY
 3

	)

96 
_Sètic_as£π
(
KAA_DEMO_MAX_LOG_BUCKET_SIZE
, "Maximum bucket size cannot be 0!");

101 
	#KAA_KEY_STORAGE
 "key.txt"

	)

102 
	#KAA_STATUS_STORAGE
 "°©us.c⁄f"

	)

104 
size_t
 
	gkØ_public_key_Àngth
;

105 *
	gkØ_public_key
;

106 
kØ_dige°
 
	gkØ_public_key_hash
;

108 
kØ_exãnsi⁄_id
 
	gBOOTSTRAP_SERVICE
[] = { 
KAA_EXTENSION_BOOTSTRAP
 };

109 c⁄° 
	gBOOTSTRAP_SERVICE_COUNT
 = (
BOOTSTRAP_SERVICE
Ë/ (
kØ_exãnsi⁄_id
);

115 
kØ_exãnsi⁄_id
 
	gOPERATIONS_SERVICES
[] = { 
KAA_EXTENSION_PROFILE


116 , 
KAA_EXTENSION_CONFIGURATION


117 , 
KAA_EXTENSION_USER


118 , 
KAA_EXTENSION_EVENT


119 , 
KAA_EXTENSION_LOGGING
};

120 c⁄° 
	gOPERATIONS_SERVICES_COUNT
 = (
OPERATIONS_SERVICES
Ë/ (
kØ_exãnsi⁄_id
);

122 
thªad_run_‚
(
uöçå_t
 
¨g
);

124 
kØ_îr‹_t
 
	$kØ_˛õ¡_¸óã
(
kØ_˛õ¡_t
 **
kØ_˛õ¡
, 
kØ_˛õ¡_¥›s_t
 *
¥›s
)

126 
	`KAA_RETURN_IF_NIL2
(
kØ_˛õ¡
, 
¥›s
, 
KAA_ERR_BADPARAM
);

128 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_öô_£curôy_°uff
();

129 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

131 
kØ_˛õ¡_t
 *
£lf
 = 
	`¢dc_mem_ˇŒoc
(1,(kaa_client_t));

132 
	`KAA_RETURN_IF_NIL
(
£lf
,
KAA_ERR_NOMEM
);

134 
£lf
->
thªad_«me
 = 
	`¢dc_mem_°rdup
("Kaa-Client-Thread");

135 
£lf
->
›î©e
 = 
åue
;

136 
£lf
->
max_upd©e_time
 = 
¥›s
->max_update_time;

138 
	`¥öt_mem_°©
(
£lf
);

139 
	`¢dc_¥ötf
("Initializing Kaa SDK...\n");

140 
	`¢dc_thrd_dñay
(
TRACE_DELAY
 * 
SNDC_MILLISECOND
);

142 
îr‹_code
 = 
	`kØ_öô
(&
£lf
->
kØ_c⁄ãxt
);

143 i‡(
îr‹_code
) {

144 
	`¢dc_¥ötf
("Eº‹ durög KØ c⁄ãxà¸óti⁄ %d\n", 
îr‹_code
);

145 
	`¢dc_thrd_dñay
(
TRACE_DELAY
 * 
SNDC_MILLISECOND
);

146 
îr‹
;

149 
	`KAA_LOG_INFO
(
£lf
->
kØ_c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
, "Kaa framework initialized.");

151 
	`¥öt_mem_°©
(
£lf
);

152 
îr‹_code
 = 
	`kØ_log_cﬁÀ˘‹_öô
(
£lf
);

153 i‡(
îr‹_code
) {

154 
	`¢dc_¥ötf
("FaûedÅÿöô KØÜog cﬁÀ˘‹ %d\n", 
îr‹_code
);

155 
	`¢dc_thrd_dñay
(
TRACE_DELAY
 * 
SNDC_MILLISECOND
);

156 
îr‹
;

159 
	`KAA_LOG_INFO
(
£lf
->
kØ_c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
, "KaaÜog collector initialized.");

161 *
kØ_˛õ¡
 = 
£lf
;

164 
	`¢dc_£m_öô
(&
£lf
->
°¨t_£m›h‹e
, 0);

165 
	`¢dc_£m_öô
(&
£lf
->
loggög_£m›h‹e
, 0);

167 
°©us
 = 
	`¢dc_thrd_¸óã
(

168 
£lf
->
thªad_«me
,

169 
thªad_run_‚
,

170 (
uöçå_t
)
£lf
,

171 
SNDC_THRD_PRIORITY_DEFAULT
,

172 
THREAD_STACKSIZE_DMR_START
);

174 
°©us
) {

178 -
EINVAL
:

179 
îr‹_code
 = 
KAA_ERR_BADPARAM
;

181 -
ENOMEM
:

182 
îr‹_code
 = 
KAA_ERR_NOMEM
;

185 
îr‹_code
 = 
KAA_ERR_BADDATA
;

189  
îr‹_code
;

191 
îr‹
:

193 
	`¢dc_¥ötf
("KØ inôüliz©i⁄ faûed.Éº‹_codê%d\n", 
îr‹_code
);

194 
	`¢dc_thrd_dñay
(
TRACE_DELAY
 * 
SNDC_MILLISECOND
);

195 
	`kØ_˛õ¡_de°roy
(
£lf
);

197  
îr‹_code
;

198 
	}
}

200 
kØ_îr‹_t
 
	$kØ_˛õ¡_°›
(
kØ_˛õ¡_t
 *
kØ_˛õ¡
)

202 
	`KAA_RETURN_IF_NIL
(
kØ_˛õ¡
, 
KAA_ERR_BADPARAM
);

203 
kØ_˛õ¡
->
›î©e
 = 
Ál£
;

204  
	`kØ_°›
(
kØ_˛õ¡
->
kØ_c⁄ãxt
);

205 
	}
}

207 
	$kØ_˛õ¡_de°roy
(
kØ_˛õ¡_t
 *
kØ_˛õ¡
)

209 if(!
kØ_˛õ¡
)

212 i‡(
kØ_˛õ¡
->
°¨t_£m›h‹e
) {

213 
	`¢dc_£m_de°roy
(
kØ_˛õ¡
->
°¨t_£m›h‹e
);

214 
kØ_˛õ¡
->
°¨t_£m›h‹e
 = 
NULL
;

217 i‡(
kØ_˛õ¡
->
loggög_£m›h‹e
) {

218 
	`¢dc_£m_de°roy
(
kØ_˛õ¡
->
loggög_£m›h‹e
);

219 
kØ_˛õ¡
->
loggög_£m›h‹e
 = 
NULL
;

222 i‡(
kØ_˛õ¡
->
›î©i⁄s_ch™√l
.
c⁄ãxt
) {

223 
kØ_˛õ¡
->
›î©i⁄s_ch™√l
.
	`de°roy
(kØ_˛õ¡->›î©i⁄s_ch™√l.
c⁄ãxt
);

224 
kØ_˛õ¡
->
›î©i⁄s_ch™√l
.
c⁄ãxt
 = 
NULL
;

227 i‡(
kØ_˛õ¡
->
boŸ°øp_ch™√l
.
c⁄ãxt
) {

228 
kØ_˛õ¡
->
boŸ°øp_ch™√l
.
	`de°roy
(kØ_˛õ¡->boŸ°øp_ch™√l.
c⁄ãxt
);

229 
kØ_˛õ¡
->
boŸ°øp_ch™√l
.
c⁄ãxt
 = 
NULL
;

232 i‡(
kØ_˛õ¡
->
log_°‹age_c⁄ãxt
) {

233 
	`ext_log_°‹age_de°roy
(
kØ_˛õ¡
->
log_°‹age_c⁄ãxt
);

234 
kØ_˛õ¡
->
log_°‹age_c⁄ãxt
 = 
NULL
;

237 i‡(
kØ_˛õ¡
->
kØ_c⁄ãxt
) {

238 
	`kØ_deöô
(
kØ_˛õ¡
->
kØ_c⁄ãxt
);

239 
kØ_˛õ¡
->
kØ_c⁄ãxt
 = 
NULL
;

242 i‡(
kØ_˛õ¡
->
thªad_«me
) {

243 
	`¢dc_mem_‰ì
(
kØ_˛õ¡
->
thªad_«me
);

245 
	`¢dc_mem_‰ì
(
kØ_˛õ¡
);

246 
	}
}

248 
kØ_c⁄ãxt_t
* 
	$kØ_˛õ¡_gë_c⁄ãxt
(
kØ_˛õ¡_t
 *
kØ_˛õ¡
)

250 
	`KAA_RETURN_IF_NIL
(
kØ_˛õ¡
,
NULL
);

251  
kØ_˛õ¡
->
kØ_c⁄ãxt
;

252 
	}
}

254 
kØ_îr‹_t
 
	$kØ_˛õ¡_öô_›î©i⁄s_ch™√l
(
kØ_˛õ¡_t
 *
kØ_˛õ¡
)

256 
	`KAA_RETURN_IF_NIL
(
kØ_˛õ¡
, 
KAA_ERR_BADPARAM
);

257 
	`KAA_LOG_TRACE
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
, "Start operations channel initialization");

258 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_t˝_ch™√l_¸óã
(&
kØ_˛õ¡
->
›î©i⁄s_ch™√l
,

259 
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
, 
OPERATIONS_SERVICES
, 
OPERATIONS_SERVICES_COUNT
);

260 i‡(
îr‹_code
) {

261 
	`KAA_LOG_ERROR
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
, 
îr‹_code
, "Operations channel initialization failed");

262  
îr‹_code
;

265 
	`KAA_LOG_TRACE
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
, "Initializing Kaa SDK Operations channeláddedÅoÅransport channel manager");

267 
îr‹_code
 = 
	`kØ_ch™√l_m™agî_add_å™•‹t_ch™√l
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
ch™√l_m™agî
,

268 &
kØ_˛õ¡
->
›î©i⁄s_ch™√l
, &kØ_˛õ¡->
›î©i⁄s_ch™√l_id
);

269 i‡(
îr‹_code
) {

270 
	`KAA_LOG_ERROR
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
, 
îr‹_code
, "Error during Kaa operations channel settingásÅransport");

271  
îr‹_code
;

274 
	`KAA_LOG_INFO
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
, "Operations channel initialized successfully");

275 
	`¥öt_mem_°©
(
kØ_˛õ¡
);

276  
îr‹_code
;

277 
	}
}

279 
kØ_îr‹_t
 
	$⁄_kØ_t˝_ch™√l_evít
(*
c⁄ãxt


280 , 
kØ_t˝_ch™√l_evít_t
 
evít_ty≥


281 , 
kØ_fd_t
 
fd
)

283 
	`KAA_RETURN_IF_NIL
(
c⁄ãxt
, 
KAA_ERR_BADPARAM
);

284 
kØ_˛õ¡_t
 *
£lf
 = (kØ_˛õ¡_à*)
c⁄ãxt
;

286 
evít_ty≥
) {

287 
SOCKET_CONNECTED
:

288 
	`KAA_LOG_INFO
(
£lf
->
kØ_c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
, "BoŸ°ø∞sockë(%dËC⁄√˘ed", 
fd
);

289 i‡(
£lf
->
boŸ°øp_°©e
 =
BOOTSRAP_UNDEF
)

290 
£lf
->
boŸ°øp_°©e
 = 
BOOTSRAP_STARTED
;

292 
SOCKET_DISCONNECTED
:

293 
	`KAA_LOG_INFO
(
£lf
->
kØ_c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
, "Bootstrap socket Disconnected");

294 i‡(
£lf
->
boŸ°øp_°©e
 =
BOOTSRAP_STARTED
)

295 
£lf
->
boŸ°øp_°©e
 = 
BOOTSRAP_FINISHED
;

298 
	`KAA_LOG_ERROR
(
£lf
->
kØ_c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
, "Bootstrap socket Error");

299 
£lf
->
boŸ°øp_°©e
 = 
BOOTSRAP_UNDEF
;

303  
KAA_ERR_NONE
;

304 
	}
}

306 
kØ_îr‹_t
 
	$kØ_˛õ¡_deöô_boŸ°øp_ch™√l
(
kØ_˛õ¡_t
 *
kØ_˛õ¡
)

308 
	`KAA_RETURN_IF_NIL
(
kØ_˛õ¡
, 
KAA_ERR_BADPARAM
);

309 
	`KAA_LOG_TRACE
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
, "Bootstrap channel deinitialization starting ....");

310 
	`¥öt_mem_°©
(
kØ_˛õ¡
);

312 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_ch™√l_m™agî_ªmove_å™•‹t_ch™√l
(

313 
kØ_˛õ¡
->
kØ_c⁄ãxt
->
ch™√l_m™agî
,kØ_˛õ¡->
boŸ°øp_ch™√l_id
);

315 i‡(
îr‹_code
) {

316 
	`KAA_LOG_TRACE
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
, 
îr‹_code
, "Bootstrap channelÉrrorÑemoving from channel manager");

317  
îr‹_code
;

320 
kØ_˛õ¡
->
boŸ°øp_ch™√l
.
c⁄ãxt
 = 
NULL
;

321 
kØ_˛õ¡
->
boŸ°øp_ch™√l
.
de°roy
 = 
NULL
;

322 
kØ_˛õ¡
->
boŸ°øp_ch™√l
.
gë_¥Ÿocﬁ_id
 = 
NULL
;

323 
kØ_˛õ¡
->
boŸ°øp_ch™√l
.
gë_suµ‹ãd_£rvi˚s
 = 
NULL
;

324 
kØ_˛õ¡
->
boŸ°øp_ch™√l
.
öô
 = 
NULL
;

325 
kØ_˛õ¡
->
boŸ°øp_ch™√l
.
£t_ac˚ss_poöt
 = 
NULL
;

326 
kØ_˛õ¡
->
boŸ°øp_ch™√l
.
sync_h™dÀr
 = 
NULL
;

328 
kØ_˛õ¡
->
boŸ°øp_°©e
 = 
BOOTSRAP_UNDEF
;

329 
	`KAA_LOG_INFO
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
, "Bootstrap channel deinitialized");

331  
îr‹_code
;

332 
	}
}

335 
kØ_îr‹_t
 
	$kØ_˛õ¡_°¨t
(
kØ_˛õ¡_t
 *
kØ_˛õ¡


336 , 
exã∫Æ_¥o˚ss_‚
 
exã∫Æ_¥o˚ss


337 , *
exã∫Æ_¥o˚ss_c⁄ãxt


338 , 
kØ_time_t
 
max_dñay
)

340 
	`KAA_RETURN_IF_NIL
(
kØ_˛õ¡
, 
KAA_ERR_BADPARAM
);

341 
	`KAA_LOG_TRACE
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
, "Kaa client starting ...");

342 
	`¥öt_mem_°©
(
kØ_˛õ¡
);

344 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_check_ªadöess
(
kØ_˛õ¡
->
kØ_c⁄ãxt
);

345 i‡(
îr‹_code
 !
KAA_ERR_NONE
) {

346 
	`KAA_LOG_ERROR
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
, 
îr‹_code
, "Cannot start Kaa client: Kaa context isÇot fully initialized");

347  
îr‹_code
;

350 
îr‹_code
 = 
	`kØ_t˝_ch™√l_¸óã
(&
kØ_˛õ¡
->
boŸ°øp_ch™√l


351 , 
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî


352 , 
BOOTSTRAP_SERVICE


353 , 
BOOTSTRAP_SERVICE_COUNT
);

354 i‡(
îr‹_code
) {

355 
	`KAA_LOG_ERROR
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
, 
îr‹_code
, "Error during Kaa bootstrap channel creation");

356  
îr‹_code
;

359 
îr‹_code
 = 
	`kØ_t˝_ch™√l_£t_sockë_evíts_ˇŒback
(&
kØ_˛õ¡
->
boŸ°øp_ch™√l
,

360 
⁄_kØ_t˝_ch™√l_evít
, (*)
kØ_˛õ¡
);

361 i‡(
îr‹_code
) {

362 
	`KAA_LOG_ERROR
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
, 
îr‹_code
, "Error setting callback bootstrap channel");

363  
îr‹_code
;

367 
	`KAA_LOG_TRACE
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
, "Kaa client - bootstrap channel initialized");

368 
	`¥öt_mem_°©
(
kØ_˛õ¡
);

370 
îr‹_code
 = 
	`kØ_ch™√l_m™agî_add_å™•‹t_ch™√l
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
ch™√l_m™agî


371 , &
kØ_˛õ¡
->
boŸ°øp_ch™√l


372 , &
kØ_˛õ¡
->
boŸ°øp_ch™√l_id
);

374 i‡(
îr‹_code
) {

375 
	`KAA_LOG_ERROR
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
, 
îr‹_code
, "Error setting bootstrap channel settingásÅransport");

376  
îr‹_code
;

380 
	`¢dc_£m_po°
(&
kØ_˛õ¡
->
°¨t_£m›h‹e
);

381 
	`KAA_LOG_INFO
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
, "Kaa client started");

383  
KAA_ERR_NONE
;

384 
	}
}

386 
	$thªad_run_‚
(
uöçå_t
 
¨g
)

388 if(!
¨g
) {

389 
	`¢dc_¥ötf
("Kaa clientÅhread function Error,Çoárgs\n");

393 
kØ_˛õ¡_t
 *
£lf
 = (kØ_˛õ¡_à*)
¨g
;

394 
	`KAA_LOG_TRACE
(
£lf
->
kØ_c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
, "Kaa client workingÅhread started....");

395 
	`¢dc_£m_po°
(&
£lf
->
loggög_£m›h‹e
);

397 
¢dc_sock_fd£t
 
r_£t
;

398 
¢dc_sock_fd£t
 
w_£t
;

399 
¢dc_sock_fd£t
 
x_£t
;

400 
›s_fd
 = -1, 
boŸ°øp_fd
 = -1;

401 
boﬁ_t
 
fd£t
 = 
Ál£
;

402 
uöt16_t
 
timeout
 = 
£lf
->
max_upd©e_time
;

403 
kØ_îr‹_t
 
îr‹_code
;

404 
	`KAA_LOG_TRACE
(
£lf
->
kØ_c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
, "KØ clõ¡ w‹kögÅhªad(%sËwaô sèπög...", sñf->
thªad_«me
);

405 
	`¢dc_£m_waô
(&
£lf
->
°¨t_£m›h‹e
);

406 
	`KAA_LOG_INFO
(
£lf
->
kØ_c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
, "KØ clõ¡ w‹kögÅhªad(%sË°¨ãd", sñf->
thªad_«me
);

408 
£lf
->
›î©e
) {

409 
max_fd
 = 0;

410 
	`SNDC_FD_ZERO
(&
r_£t
);

411 
	`SNDC_FD_ZERO
(&
w_£t
);

412 
	`SNDC_FD_ZERO
(&
x_£t
);

416 
	`¢dc_£m_åyWaô
(&
£lf
->
loggög_£m›h‹e
);

418 i‡(
£lf
->
›î©i⁄s_ch™√l
.
c⁄ãxt
)

419 
	`kØ_t˝_ch™√l_gë_des¸ùt‹
(&
£lf
->
›î©i⁄s_ch™√l
, &
›s_fd
);

420 if(
£lf
->
boŸ°øp_ch™√l
.
c⁄ãxt
)

421 
	`kØ_t˝_ch™√l_gë_des¸ùt‹
(&
£lf
->
boŸ°øp_ch™√l
, &
boŸ°øp_fd
);

422 
	`KAA_LOG_DEBUG
(
£lf
->
kØ_c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
, "IO LOOP: des¸ùt‹s: boŸ°øp(%d), o≥øti⁄s(%d)", 
boŸ°øp_fd
, 
›s_fd
);

424 
	`¥öt_mem_°©
(
£lf
);

426 i‡(
boŸ°øp_fd
 >= 0) {

427 
fd£t
 = 
Ál£
;

428 i‡(
	`kØ_t˝_ch™√l_is_ªady
(&
£lf
->
boŸ°øp_ch™√l
, 
FD_READ
)) {

429 
	`SNDC_FD_SET
(
boŸ°øp_fd
, &
r_£t
);

430 
	`KAA_LOG_DEBUG
(
£lf
->
kØ_c⁄ãxt
->
loggî
,

431 
KAA_ERR_NONE
,

433 
fd£t
 = 
åue
;

435 i‡(
	`kØ_t˝_ch™√l_is_ªady
(&
£lf
->
boŸ°øp_ch™√l
, 
FD_WRITE
)) {

436 
	`SNDC_FD_SET
(
boŸ°øp_fd
, &
w_£t
);

437 
	`KAA_LOG_DEBUG
(
£lf
->
kØ_c⁄ãxt
->
loggî
,

438 
KAA_ERR_NONE
,

440 
fd£t
 = 
åue
;

442 i‡(
fd£t
) {

443 
max_fd
 = 
	`MAX
(max_fd, 
boŸ°øp_fd
);

444 
	`SNDC_FD_SET
(
boŸ°øp_fd
, &
x_£t
);

447 i‡(
›s_fd
 >= 0) {

448 
fd£t
 = 
Ál£
;

449 i‡(
	`kØ_t˝_ch™√l_is_ªady
(&
£lf
->
›î©i⁄s_ch™√l
, 
FD_READ
)) {

450 
	`SNDC_FD_SET
(
›s_fd
, &
r_£t
);

451 
	`KAA_LOG_DEBUG
(
£lf
->
kØ_c⁄ãxt
->
loggî
,

452 
KAA_ERR_NONE
,

454 
fd£t
 = 
åue
;

456 i‡(
	`kØ_t˝_ch™√l_is_ªady
(&
£lf
->
›î©i⁄s_ch™√l
, 
FD_WRITE
)) {

457 
	`SNDC_FD_SET
(
›s_fd
, &
w_£t
);

458 
	`KAA_LOG_DEBUG
(
£lf
->
kØ_c⁄ãxt
->
loggî
,

459 
KAA_ERR_NONE
,

461 
fd£t
 = 
åue
;

463 i‡(
fd£t
) {

464 
max_fd
 = 
	`MAX
(max_fd, 
›s_fd
);

465 
	`SNDC_FD_SET
(
›s_fd
, &
x_£t
);

469 
	`kØ_t˝_ch™√l_gë_max_timeout
(&
£lf
->
›î©i⁄s_ch™√l
, &
timeout
);

470 
£lf
->
timevÆ
.
tv_£c
 = 
timeout
;

471 i‡(
timeout
 > 
£lf
->
max_upd©e_time
)

472 
£lf
->
timevÆ
.
tv_£c
 = sñf->
max_upd©e_time
;

474 
£lf
->
timevÆ
.
tv_u£c
 = 0;

475 
	`¢dc_£m_po°
(&
£lf
->
loggög_£m›h‹e
);

476 
r
 = 
	`¢dc_sock_£À˘
(
max_fd
+1,&
r_£t
,&
w_£t
,&
x_£t
,&
£lf
->
timevÆ
);

477 
	`¢dc_£m_åyWaô
(&
£lf
->
loggög_£m›h‹e
);

478 i‡(
r
 == 0) {

479 
uöt32_t
 
m£c
 = 
	`¢dc_sys_gëTime°amp_m£c
();

480 
	`KAA_LOG_DEBUG
(
£lf
->
kØ_c⁄ãxt
->
loggî
,

481 
KAA_ERR_NONE
,

483 
£lf
->
timevÆ
.
tv_£c
);

486 ()
m£c
;

488 i‡(
£lf
->
boŸ°øp_°©e
 =
BOOTSRAP_FINISHED
 && 
boŸ°øp_fd
 == -1) {

489 
	`¢dc_¥ötf
("BoŸ°ø∞ch™√»deöô, O≥øti⁄†ch™√»öô %d\n", 
boŸ°øp_fd
);

490 
	`KAA_LOG_INFO
(
£lf
->
kØ_c⁄ãxt
->
loggî
,

491 
KAA_ERR_NONE
,

493 
	`kØ_˛õ¡_deöô_boŸ°øp_ch™√l
(
£lf
);

494 
	`kØ_˛õ¡_öô_›î©i⁄s_ch™√l
(
£lf
);

497 i‡(
£lf
->
boŸ°øp_ch™√l
.
c⁄ãxt
) {

498 
îr‹_code
 = 
	`kØ_t˝_ch™√l_check_kì∑live
(&
£lf
->
boŸ°øp_ch™√l
);

499 i‡(
îr‹_code
) {

500 
	`KAA_LOG_ERROR
(
£lf
->
kØ_c⁄ãxt
->
loggî
,

501 
KAA_ERR_NONE
,

503 
boŸ°øp_fd
);

506 i‡(
£lf
->
›î©i⁄s_ch™√l
.
c⁄ãxt
) {

507 
îr‹_code
 = 
	`kØ_t˝_ch™√l_check_kì∑live
(&
£lf
->
›î©i⁄s_ch™√l
);

508 i‡(
îr‹_code
) {

509 
	`KAA_LOG_ERROR
(
£lf
->
kØ_c⁄ãxt
->
loggî
,

510 
KAA_ERR_NONE
,

512 
›s_fd
);

515 } i‡(
r
 > 0) {

516 
	`¢dc_¥ötf
("FD SETÑëu∫ %dÉvíts\n", 
r
);

517 
	`KAA_LOG_DEBUG
(
£lf
->
kØ_c⁄ãxt
->
loggî
,

518 
KAA_ERR_NONE
,

519 "IO LOOP: sñe˘(Ëªtu∫ %dÉvíts", 
r
);

520 i‡(
boŸ°øp_fd
 >= 0) {

521 
fd£t
 = 
Ál£
;

522 i‡(
	`SNDC_FD_ISSET
(
boŸ°øp_fd
, &
r_£t
)) {

523 
fd£t
 = 
åue
;

524 
	`KAA_LOG_DEBUG
(
£lf
->
kØ_c⁄ãxt
->
loggî
,

525 
KAA_ERR_NONE
,

526 "IO LOOP: Ród EvíàBoŸ°øp(%d)", 
boŸ°øp_fd
);

527 
îr‹_code
 = 
	`kØ_t˝_ch™√l_¥o˚ss_evít
(&
£lf
->
boŸ°øp_ch™√l
, 
FD_READ
);

528 i‡(
îr‹_code
) {

529 
	`KAA_LOG_ERROR
(
£lf
->
kØ_c⁄ãxt
->
loggî
,

530 
îr‹_code
,

531 "IO LOOP: Faûed Ród EvíàBoŸ°øp(%d)", 
boŸ°øp_fd
);

534 i‡(
fd£t
)

535 
r
--;

536 i‡(
r
 > 0) {

537 
fd£t
 = 
Ál£
;

538 i‡(
	`SNDC_FD_ISSET
(
boŸ°øp_fd
, &
w_£t
)) {

539 
fd£t
 = 
åue
;

540 
	`KAA_LOG_DEBUG
(
£lf
->
kØ_c⁄ãxt
->
loggî
,

541 
KAA_ERR_NONE
,

542 "IO LOOP: WrôêEvíàBoŸ°øp(%d)", 
boŸ°øp_fd
);

543 
îr‹_code
 = 
	`kØ_t˝_ch™√l_¥o˚ss_evít
(&
£lf
->
boŸ°øp_ch™√l
, 
FD_WRITE
);

544 i‡(
îr‹_code
) {

545 
	`KAA_LOG_ERROR
(
£lf
->
kØ_c⁄ãxt
->
loggî
,

546 
îr‹_code
,

547 "IO LOOP: Faûed WrôêEvíàBoŸ°øp(%d)", 
boŸ°øp_fd
);

550 i‡(
fd£t
)

551 
r
--;

553 i‡(
r
 > 0) {

554 
fd£t
 = 
Ál£
;

555 i‡(
	`SNDC_FD_ISSET
(
boŸ°øp_fd
, &
x_£t
)) {

556 
fd£t
 = 
åue
;

557 
	`¢dc_¥ötf
("Ex˚±i⁄ EvíàBoŸ°ø∞%d\n", 
boŸ°øp_fd
);

558 
	`KAA_LOG_DEBUG
(
£lf
->
kØ_c⁄ãxt
->
loggî
,

559 
KAA_ERR_NONE
,

560 "IO LOOP: Ex˚±i⁄ EvíàBoŸ°øp(%d)", 
boŸ°øp_fd
);

561 
îr‹_code
 = 
	`kØ_t˝_ch™√l_¥o˚ss_evít
(&
£lf
->
boŸ°øp_ch™√l
, 
FD_EXCEPTION
);

562 i‡(
îr‹_code
) {

563 
	`KAA_LOG_ERROR
(
£lf
->
kØ_c⁄ãxt
->
loggî
,

564 
îr‹_code
,

565 "IO LOOP: Faûed Ex˚±i⁄ EvíàBoŸ°øp(%d)", 
boŸ°øp_fd
);

568 i‡(
fd£t
)

569 
r
--;

572 i‡(
r
 > 0 && 
›s_fd
 >= 0) {

573 
fd£t
 = 
Ál£
;

574 i‡(
	`SNDC_FD_ISSET
(
›s_fd
, &
r_£t
)) {

575 
fd£t
 = 
åue
;

576 
	`KAA_LOG_DEBUG
(
£lf
->
kØ_c⁄ãxt
->
loggî
,

577 
KAA_ERR_NONE
,

578 "IO LOOP: Ród EvíàO≥øti⁄s(%d)", 
›s_fd
);

579 
îr‹_code
 = 
	`kØ_t˝_ch™√l_¥o˚ss_evít
(&
£lf
->
›î©i⁄s_ch™√l
, 
FD_READ
);

580 i‡(
îr‹_code
) {

581 
	`KAA_LOG_ERROR
(
£lf
->
kØ_c⁄ãxt
->
loggî
,

582 
îr‹_code
,

583 "IO LOOP: Faûed Ród EvíàO≥øti⁄s(%d)", 
›s_fd
);

586 i‡(
fd£t
)

587 
r
--;

588 i‡(
r
 > 0) {

589 
fd£t
 = 
Ál£
;

590 i‡(
	`SNDC_FD_ISSET
(
›s_fd
, &
w_£t
)) {

591 
fd£t
 = 
åue
;

592 
	`KAA_LOG_DEBUG
(
£lf
->
kØ_c⁄ãxt
->
loggî
,

593 
KAA_ERR_NONE
,

594 "IO LOOP: WrôêEvíàO≥øti⁄s(%d)", 
›s_fd
);

595 
îr‹_code
 = 
	`kØ_t˝_ch™√l_¥o˚ss_evít
(&
£lf
->
›î©i⁄s_ch™√l
, 
FD_WRITE
);

596 i‡(
îr‹_code
) {

597 
	`KAA_LOG_ERROR
(
£lf
->
kØ_c⁄ãxt
->
loggî
,

598 
îr‹_code
,

599 "IO LOOP: Faûed WrôêEvíàO≥øti⁄s(%d)", 
›s_fd
);

603 i‡(
fd£t
)

604 
r
--;

605 i‡(
r
 > 0) {

606 
fd£t
 = 
Ál£
;

607 i‡(
	`SNDC_FD_ISSET
(
›s_fd
, &
x_£t
)) {

608 
fd£t
 = 
åue
;

609 
	`¢dc_¥ötf
("Ex˚±i⁄ EvíàO≥øti⁄†%d\n", 
›s_fd
);

610 
	`KAA_LOG_DEBUG
(
£lf
->
kØ_c⁄ãxt
->
loggî
,

611 
KAA_ERR_NONE
,

612 "IO LOOP: Ex˚±i⁄ EvíàO≥øti⁄s(%d)", 
›s_fd
);

613 
îr‹_code
 = 
	`kØ_t˝_ch™√l_¥o˚ss_evít
(&
£lf
->
›î©i⁄s_ch™√l
, 
FD_EXCEPTION
);

614 i‡(
îr‹_code
) {

615 
	`KAA_LOG_ERROR
(
£lf
->
kØ_c⁄ãxt
->
loggî
,

616 
îr‹_code
,

617 "IO LOOP: Faûed Ex˚±i⁄ EvíàO≥øti⁄s(%d)", 
›s_fd
);

623 
	`KAA_LOG_ERROR
(
£lf
->
kØ_c⁄ãxt
->
loggî
,

624 
KAA_ERR_BAD_STATE
,

625 "IO LOOP: Eº‹ %dÑëu∫ed from sñe˘()", 
r
);

629 
	`KAA_LOG_INFO
(
£lf
->
kØ_c⁄ãxt
->
loggî
,

630 
KAA_ERR_NONE
,

632 
	}
}

640 
	$ext_°©us_ªad
(**
buf„r
, 
size_t
 *
buf„r_size
, 
boﬁ
 *
√eds_dóŒoˇti⁄
)

642 
	`ec⁄ais_ec19d_bö¨y_fûe_ªad
(
KAA_STATUS_STORAGE
, 
buf„r
, 
buf„r_size
, 
√eds_dóŒoˇti⁄
);

643 
	}
}

645 
	$ext_°©us_°‹e
(c⁄° *
buf„r
, 
size_t
 
buf„r_size
)

647 
	`ec⁄ais_ec19d_bö¨y_fûe_°‹e
(
KAA_STATUS_STORAGE
, 
buf„r
, 
buf„r_size
);

648 
	}
}

654 
	$ext_gë_ídpoöt_public_key
(**
buf„r
, 
size_t
 *
buf„r_size
, 
boﬁ
 *
√eds_dóŒoˇti⁄
)

656 *
buf„r
 = 
kØ_public_key
;

657 *
buf„r_size
 = 
kØ_public_key_Àngth
;

658 *
√eds_dóŒoˇti⁄
 = 
Ál£
;

659 
	}
}

662 
kØ_îr‹_t
 
	$kØ_öô_£curôy_°uff
()

664 
¢dc_fûe_ªf_t
 
key_fûe
 = 
	`¢dc_fûe_›í
(
KAA_KEY_STORAGE
, 
DE_FRDONLY
);

666 i‡(
key_fûe
) {

667 
	`¢dc_fûe_£ek
(
key_fûe
, 0, 
SEEK_END
);

668 
kØ_public_key_Àngth
 = 
	`¢dc_fûe_ãŒ
(
key_fûe
);

669 
kØ_public_key
 = (*)
	`¢dc_mem_ˇŒoc
(
kØ_public_key_Àngth
, ());

671 i‡(
kØ_public_key
 =
NULL
) {

672 
	`¢dc_¥ötf
("FaûedÅÿÆloˇã %u byã†f‹Öubli¯key\n", 
kØ_public_key_Àngth
);

673  
KAA_ERR_NOMEM
;

676 
	`¢dc_fûe_£ek
(
key_fûe
, 0, 
SEEK_SET
);

677 i‡(
	`¢dc_fûe_ªad
(
key_fûe
, 
kØ_public_key
, 
kØ_public_key_Àngth
) == 0) {

678 
	`¢dc_mem_‰ì
(
kØ_public_key
);

679 
	`¢dc_¥ötf
("FaûedÅÿªadÖubli¯key (sizê%u)\n", 
kØ_public_key_Àngth
);

680  
KAA_ERR_INVALID_PUB_KEY
;

682 
	`¢dc_fûe_˛o£
(
key_fûe
);

683 
	`¢dc_¥ötf
("Re°‹edÖubli¯key (sizê%u)\n", 
kØ_public_key_Àngth
);

685 
	`¢dc_¥ötf
("NÿRSA key fûê%†found\n", 
KAA_KEY_STORAGE
);

688 
	`ext_ˇlcuœã_sha_hash
(
kØ_public_key
, 
kØ_public_key_Àngth
, 
kØ_public_key_hash
);

689 
	`¢dc_¥ötf
("SHA calculated\n");

690  
KAA_ERR_NONE
;

691 
	}
}

696 
kØ_îr‹_t
 
	$kØ_log_cﬁÀ˘‹_öô
(
kØ_˛õ¡_t
 *
kØ_˛õ¡
)

698 
	`KAA_RETURN_IF_NIL
(
kØ_˛õ¡
, 
KAA_ERR_BADPARAM
);

700 
kØ_îr‹_t
 
îr‹_code
 = 
	`ext_u∆imôed_log_°‹age_¸óã
(

701 &
kØ_˛õ¡
->
log_°‹age_c⁄ãxt
,

702 
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
);

703 i‡(
îr‹_code
) {

704 
	`KAA_LOG_ERROR
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
,

705 
îr‹_code
,

707  
îr‹_code
;

710 
îr‹_code
 = 
	`ext_log_u∂ﬂd_°øãgy_¸óã
(
kØ_˛õ¡
->
kØ_c⁄ãxt


711 ,&
kØ_˛õ¡
->
log_u∂ﬂd_°øãgy_c⁄ãxt


712 , 
KAA_LOG_UPLOAD_VOLUME_STRATEGY
);

714 i‡(
îr‹_code
) {

715 
	`KAA_LOG_ERROR
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
,

716 
îr‹_code
,

718  
îr‹_code
;

721 
îr‹_code
 = 
	`ext_log_u∂ﬂd_°øãgy_£t_thªshﬁd_cou¡
(
kØ_˛õ¡
->
log_u∂ﬂd_°øãgy_c⁄ãxt


722 , 
KAA_DEMO_UPLOAD_COUNT_THRESHOLD
);

723 i‡(
îr‹_code
) {

724 
	`KAA_LOG_ERROR
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
,

725 
îr‹_code
,

727 
KAA_DEMO_UPLOAD_COUNT_THRESHOLD
);

728  
îr‹_code
;

731 
kØ_log_buckë_c⁄°øöts_t
 
buckë_sizes
 = {

732 .
max_buckë_size
 = 
KAA_DEMO_MAX_LOG_BUCKET_SIZE
,

733 .
max_buckë_log_cou¡
 = 
KAA_DEMO_MAX_LOGS_IN_BUCKET
,

736 
îr‹_code
 = 
	`kØ_loggög_öô
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
log_cﬁÀ˘‹


737 , 
kØ_˛õ¡
->
log_°‹age_c⁄ãxt


738 , 
kØ_˛õ¡
->
log_u∂ﬂd_°øãgy_c⁄ãxt


739 , &
buckë_sizes
);

741 i‡(
îr‹_code
) {

742 
	`KAA_LOG_ERROR
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
,

743 
îr‹_code
,

745  
îr‹_code
;

747 
	`KAA_LOG_INFO
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
,

748 
KAA_ERR_NONE
,

750  
îr‹_code
;

752 
	}
}

808 
	$ext_wrôe_log
(
FILE
 * 
sök
, c⁄° * 
buf„r
, 
size_t
 
mesßge_size
)

810 i‡(!
buf„r
) {

813 
	`¢dc_¥ötf
(
buf„r
);

814 
	`¢dc_thrd_dñay
(
TRACE_DELAY
 * 
SNDC_MILLISECOND
);

815 
	}
}

817 
kØ_time_t
 
	$ext_gë_sy°ime
()

819  (
time_t
Ë
	`¢dc_sys_gëTime°amp_m£c
() / 1000;

820 
	}
}

822 
	$¥öt_mem_°©
(
kØ_˛õ¡_t
 *
kØ_˛õ¡
)

824 i‡(!
kØ_˛õ¡
)

826 
	`¢dc_mem_gëSèts
(&
kØ_˛õ¡
->
mem_°©
);

827 
	`KAA_LOG_DEBUG
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
,

828 
KAA_ERR_NONE
,

830 
kØ_˛õ¡
->
mem_°©
.
tŸÆ
,

831 
kØ_˛õ¡
->
mem_°©
.
Æloˇãd
);

832 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/Econais/EC19D/econais_ec19d_kaa_client_properies.h

24 #i‚de‡
ECONAIS_EC19D_KAA_CLIENT_PROPERIES_H_


25 
	#ECONAIS_EC19D_KAA_CLIENT_PROPERIES_H_


	)

28 
	mmax_upd©e_time
;

29 } 
	tkØ_˛õ¡_¥›s_t
;

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/Econais/EC19D/econais_ec19d_mem.h

17 #i‚de‡
ECONAIS_EC19D_MEM_H_


18 
	#ECONAIS_EC19D_MEM_H_


	)

20 
	~<¢dc_mem_≠i.h
>

22 #i‚de‡
__KAA_MALLOC


23 
	#__KAA_MALLOC
(
S
Ë
	`¢dc_mem_mÆloc
(S)

	)

26 #i‚de‡
__KAA_CALLOC


27 
	#__KAA_CALLOC
(
N
,
S
Ë
	`¢dc_mem_ˇŒoc
(N, S)

	)

30 #i‚de‡
__KAA_REALLOC


31 
	#__KAA_REALLOC
(
P
, 
S
Ë
	`¢dc_mem_ªÆloc
(P, S)

	)

34 #i‚de‡
__KAA_FREE


35 
	#__KAA_FREE
(
P
Ë
	`¢dc_mem_‰ì
(P)

	)

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/Econais/EC19D/econais_ec19d_platform.h

23 #i‚de‡
ECONAIS_EC19D_PLATFORM_H_


24 
	#ECONAIS_EC19D_PLATFORM_H_


	)

26 
	~"¢dc_sdk_≠i.h
"

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/Econais/EC19D/econais_ec19d_sock.h

23 #i‚de‡
ECONAIS_EC19D_SOCK_H_


24 
	#ECONAIS_EC19D_SOCK_H_


	)

26 
	~<sys/ty≥s.h
>

27 
	~<¢dc_sock_≠i.h
>

29 
	tkØ_fd_t
;

31 
¢dc_sockaddr
 
	tkØ_sockaddr_t
;

32 
¢dc_sockaddr_ö
 
	tkØ_sockaddr_°‹age_t
;

33 
¢dc_sockÀn_t
 
	tkØ_sockÀn_t
;

36 
	#KAA_HTONS
(
ho°sh‹t
Ë
	`¢dc_ht⁄s
((ho°sh‹t))

	)

37 
	#KAA_HTONL
(
ho°l⁄g
Ë
	`¢dc_ht⁄l
((ho°l⁄g))

	)

38 
	#KAA_HTONLL
(
ho°l⁄gl⁄g
Ë
	`kØ_ht⁄Œ
((ho°l⁄gl⁄g))

	)

40 
	#KAA_NTOHS
(
√tsh‹t
Ë
	`¢dc_¡ohs
(“ësh‹t))

	)

41 
	#KAA_NTOHL
(
√é⁄g
Ë
	`¢dc_¡ohl
(“ël⁄g))

	)

42 
	#KAA_NTOHLL
(
√é⁄gl⁄g
Ë
	`kØ_¡ohŒ
(“ël⁄gl⁄g))

	)

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/Econais/EC19D/econais_ec19d_stdio.h

17 #i‚de‡
ECONAIS_EC19D_STDIO_H_


18 
	#ECONAIS_EC19D_STDIO_H_


	)

20 
	~<°dio.h
>

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/Econais/EC19D/econais_ec19d_tcp_utils.c

21 
	~<¢dc_dns_≠i.h
>

22 
	~<¢dc_sock_≠i.h
>

23 
	~<¢dc_sdk_≠i.h
>

25 
	~"∂©f‹m/sock.h
"

27 
	~"∂©f‹m/ext_t˝_utûs.h
"

28 
	~"utûôõs/kØ_log.h
"

29 
	~"kØ_îr‹.h
"

30 
	~"kØ_comm⁄.h
"

32 
	#START_BASE_PORT
 49500

	)

33 
	#PORT_RANG
 10000

	)

36 
kØ_îr‹_t
 
	$gë_sock_îr‹
(
kØ_fd_t
 
sockid
, *
sockîr‹
)

38 
	`KAA_RETURN_IF_NIL
(
sockîr‹
, 
KAA_ERR_BADPARAM
);

39 i‡(
sockid
 < 0)

40  
KAA_ERR_BADPARAM
;

42 
sockîæí
 = (*
sockîr‹
);

45 i‡(
	`¢dc_sock_gësock›t
(
sockid
, 
SNDC_SOL_SOCKET
, 
SNDC_SO_ERROR
,

46 (*)
sockîr‹
, &
sockîæí
) != 0) {

47  
KAA_ERR_BADDATA
;

50  
KAA_ERR_NONE
;

51 
	}
}

53 
ext_t˝_utûs_fun˘i⁄_ªtu∫_°©e_t
 
	$ext_t˝_utûs_gëaddrbyho°
(
kØ_dns_ªsﬁve_li°íî_t
 *
ªsﬁve_li°íî


54 , c⁄° 
kØ_dns_ªsﬁve_öfo_t
 *
ªsﬁve_¥›s


55 , 
kØ_sockaddr_t
 *
ªsu…


56 , 
kØ_sockÀn_t
 *
ªsu…_size
)

58 
	`KAA_RETURN_IF_NIL4
(
ªsﬁve_¥›s
, 
ªsu…
, 
ªsu…_size
,Ñesﬁve_¥›s->
ho°«me
, 
RET_STATE_VALUE_ERROR
);

60 
¢dc_ho°ít
 *
ho°ít
;

62 
ho°«me_°r
[
ªsﬁve_¥›s
->
ho°«me_Àngth
 + 1];

63 
	`mem˝y
(
ho°«me_°r
, 
ªsﬁve_¥›s
->
ho°«me
,Ñesﬁve_¥›s->
ho°«me_Àngth
);

64 
ho°«me_°r
[
ªsﬁve_¥›s
->
ho°«me_Àngth
] = '\0';

66 
ho°ít
 = 
	`¢dc_dns_gëho°by«me
(
ho°«me_°r
);

67 
	`KAA_RETURN_IF_NIL
(
ho°ít
, 
RET_STATE_VALUE_ERROR
);

69 
	`KAA_RETURN_IF_NIL4
(

70 
ho°ít
->
h_«me
,

71 
ho°ít
->
h_Àngth
,

72 
ho°ít
->
h_addr_li°
,

73 *
ho°ít
->
h_addr_li°
,

74 
RET_STATE_VALUE_ERROR
);

76 
kØ_sockaddr_°‹age_t
 *
ªsu…_sockaddr
 = (kØ_sockaddr_°‹age_à*)
ªsu…
;

77 
	`mem£t
(
ªsu…_sockaddr
,0,(
kØ_sockaddr_°‹age_t
));

79 
¢dc_ö_addr_t
 *
addr
 = (¢dc_ö_addr_à*Ë*
ho°ít
->
h_addr_li°
;

81 
ªsu…_sockaddr
->
sö_Ámûy
 = 
SNDC_AF_INET
;

82 
ªsu…_sockaddr
->
sö_p‹t
 = 
	`¢dc_ht⁄s
(
ªsﬁve_¥›s
->
p‹t
);

83 
ªsu…_sockaddr
->
sö_addr
.
s_addr
 = *
addr
;

84 
ªsu…_sockaddr
->
sö_Àn
 = 
ho°ít
->
h_Àngth
;

86 *
ªsu…_size
 = (
kØ_sockaddr_°‹age_t
);

88  
RET_STATE_VALUE_READY
;

89 
	}
}

91 
kØ_îr‹_t
 
	$ext_t˝_utûs_£t_sockaddr_p‹t
(
kØ_sockaddr_t
 *
addr
, 
uöt16_t
 
p‹t
)

93 
	`KAA_RETURN_IF_NIL2
(
addr
,
p‹t
,
KAA_ERR_BADPARAM
);

95 i‡(
addr
->
ß_Ámûy
 =
SNDC_AF_INET
) {

96 ((
¢dc_sockaddr_ö
 *)
addr
)->
sö_p‹t
 = 
	`¢dc_ht⁄s
(
p‹t
);

97  
KAA_ERR_NONE
;

99  
KAA_ERR_SOCKET_INVALID_FAMILY
;

101 
	}
}

103 
kØ_îr‹_t
 
	$ext_t˝_utûs_›í_t˝_sockë
(
kØ_fd_t
 *
fd


104 , c⁄° 
kØ_sockaddr_t
 *
de°ö©i⁄


105 , 
kØ_sockÀn_t
 
de°ö©i⁄_size
)

107 
	`KAA_RETURN_IF_NIL3
(
fd
, 
de°ö©i⁄
, 
de°ö©i⁄_size
, 
KAA_ERR_BADPARAM
);

109 *
fd
 = -1;

111 i‡(
de°ö©i⁄
->
ß_Ámûy
 !
SNDC_AF_INET
) {

112  
KAA_ERR_SOCKET_INVALID_FAMILY
;

115 
kØ_fd_t
 
sock
 = 
	`¢dc_sock_sockë
(
SNDC_PF_INET
, 
SNDC_SOCK_STREAM
, 
SNDC_IPPROTO_TCP
);

116 i‡(
sock
 < 0)

117  
KAA_ERR_SOCKET_ERROR
;

118 
°©us
 = 0;

119 
ôî©i⁄
 = 10;

120 
¢dc_sockaddr_ö
 
böd_sockaddr
;

122 
	`mem£t
(&
böd_sockaddr
, 0, (bind_sockaddr));

124 
böd_sockaddr
.
sö_Ámûy
 = 
SNDC_AF_INET
;

125 
böd_sockaddr
.
sö_Àn
 = (bind_sockaddr);

126 
böd_sockaddr
.
sö_addr
.
s_addr
 = 
SNDC_INADDR_ANY
;

128 
uöt16_t
 
böd_p‹t
 = 
START_BASE_PORT
 + 
	`¢dc_sys_gëR™dom
(Ë% 
PORT_RANG
;

129 
böd_sockaddr
.
sö_p‹t
 = 
	`¢dc_ht⁄s
(
böd_p‹t
);

131 
°©us
 = 
	`¢dc_sock_böd
(
sock
, (
¢dc_sockaddr
*Ë&
böd_sockaddr
, (bind_sockaddr));

132 
ôî©i⁄
--;

133 } 
°©us
 && 
ôî©i⁄
);

135 
boﬁ_t
 
t
 = 
åue
;

136 i‡(
	`¢dc_sock_io˘l
(
sock
, 
SNDC_FIONBIO
, (*)&
t
) < 0) {

137 
	`ext_t˝_utûs_t˝_sockë_˛o£
(
sock
);

138  
KAA_ERR_SOCKET_ERROR
;

141 i‡(
	`¢dc_sock_f˙é
(
sock
, 
SNDC_F_SETFL
, 
SNDC_O_NONBLOCK
) < 0) {

142 
	`ext_t˝_utûs_t˝_sockë_˛o£
(
sock
);

143  
KAA_ERR_SOCKET_ERROR
;

146 
°©us
 = 
	`¢dc_sock_c⁄√˘
(
sock
, 
de°ö©i⁄
, 
de°ö©i⁄_size
);

148 i‡(
°©us
) {

149 i‡(
	`gë_sock_îr‹
(
sock
, &
°©us
)) {

150 
	`ext_t˝_utûs_t˝_sockë_˛o£
(
sock
);

151  
KAA_ERR_SOCKET_ERROR
;

153 i‡(!(
°©us
 =
EINPROGRESS


154 || 
°©us
 =
EAGAIN
)) {

155 
	`¢dc_¥ötf
("Sockë %d c⁄√˘Éº‹ %d\n", 
sock
, 
°©us
);

156 
	`ext_t˝_utûs_t˝_sockë_˛o£
(
sock
);

157  
KAA_ERR_SOCKET_CONNECT_ERROR
;

160 *
fd
 = 
sock
;

161  
KAA_ERR_NONE
;

162 
	}
}

164 
ext_t˝_sockë_°©e_t
 
	$ext_t˝_utûs_t˝_sockë_check
(
kØ_fd_t
 
fd


165 , c⁄° 
kØ_sockaddr_t
 *
de°ö©i⁄


166 , 
kØ_sockÀn_t
 
de°ö©i⁄_size
)

168 
°©us
 = 0;

169 
kØ_îr‹_t
 
îr‹
 = 
	`gë_sock_îr‹
(
fd
, &
°©us
);

170 i‡(
îr‹
) {

171  
KAA_TCP_SOCK_ERROR
;

173 
°©us
) {

174 
EINPROGRESS
:

175 
EALREADY
:

176  
KAA_TCP_SOCK_CONNECTING
;

178 
EISCONN
:

179  
KAA_TCP_SOCK_CONNECTED
;

181  
KAA_TCP_SOCK_ERROR
;

183  
KAA_TCP_SOCK_CONNECTED
;

184 
	}
}

186 
ext_t˝_sockë_io_îr‹s_t
 
	$ext_t˝_utûs_t˝_sockë_wrôe
(
kØ_fd_t
 
fd


187 , c⁄° *
buf„r


188 , 
size_t
 
buf„r_size


189 , 
size_t
 *
byãs_wrôãn
)

191 
	`KAA_RETURN_IF_NIL2
(
buf„r
, 
buf„r_size
, 
KAA_TCP_SOCK_IO_ERROR
);

192 
wrôe_ªsu…
 = 
	`¢dc_sock_wrôe
(
fd
, (*)
buf„r
, 
buf„r_size
);

193 i‡(
wrôe_ªsu…
 < 0) {

194 
°©us
 = 0;

195 
kØ_îr‹_t
 
îr‹
 = 
	`gë_sock_îr‹
(
fd
, &
°©us
);

196 
	`KAA_RETURN_IF_ERR
(
îr‹
);

197 i‡(
°©us
 !
EAGAIN
)

198  
KAA_TCP_SOCK_IO_ERROR
;

200 i‡(
byãs_wrôãn
)

201 *
byãs_wrôãn
 = (
wrôe_ªsu…
 > 0) ? write_result : 0;

202  
KAA_TCP_SOCK_IO_OK
;

203 
	}
}

205 
ext_t˝_sockë_io_îr‹s_t
 
	$ext_t˝_utûs_t˝_sockë_ªad
(
kØ_fd_t
 
fd


206 , *
buf„r


207 , 
size_t
 
buf„r_size


208 , 
size_t
 *
byãs_ªad
)

210 
	`KAA_RETURN_IF_NIL2
(
buf„r
, 
buf„r_size
, 
KAA_TCP_SOCK_IO_ERROR
);

211 
ªad_ªsu…
 = 
	`¢dc_sock_ªad
(
fd
, 
buf„r
, 
buf„r_size
);

212 i‡(!
ªad_ªsu…
)

213  
KAA_TCP_SOCK_IO_EOF
;

214 i‡(
ªad_ªsu…
 < 0) {

215 
°©us
 = 0;

216 
kØ_îr‹_t
 
îr‹
 = 
	`gë_sock_îr‹
(
fd
, &
°©us
);

217 
	`KAA_RETURN_IF_ERR
(
îr‹
);

218 i‡(
°©us
 !
EAGAIN
)

219  
KAA_TCP_SOCK_IO_ERROR
;

221 i‡(
byãs_ªad
)

222 *
byãs_ªad
 = (
ªad_ªsu…
 > 0) ?Ñead_result : 0;

223  
KAA_TCP_SOCK_IO_OK
;

224 
	}
}

228 
kØ_îr‹_t
 
	$ext_t˝_utûs_t˝_sockë_˛o£
(
kØ_fd_t
 
fd
)

230  (
	`¢dc_sock_˛o£
(
fd
Ë< 0Ë? 
KAA_ERR_SOCKET_ERROR
 : 
KAA_ERR_NONE
;

231 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/Econais/EC19D/econais_ec19d_time.h

18 #i‚de‡
ECONAIS_EC19D_TIME_H_


19 
	#ECONAIS_EC19D_TIME_H_


	)

21 
uöt32_t
 
	tkØ_time_t
;

23 
kØ_time_t
 
ext_gë_sy°ime
();

25 
	#KAA_TIME
(Ë
	`ext_gë_sy°ime
()

	)

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/Econais/EC19D/logger.c

17 
	~<¢dc_sdk_≠i.h
>

19 
	~"ec⁄ais_ec19d_time.h
"

20 
	~"∂©f‹m/ext_sy°em_loggî.h
"

37 
	$ext_f‹m©_•rötf
(* 
buf„r
, 
size_t
 
buf„r_size
, c⁄° * 
f‹m©
,

38 c⁄° * 
log_Àvñ_«me
, c⁄° * 
åunˇãd_«me
, 
löío
,

39 
kØ_îr‹_t
 
îr‹_code
)

41 
time_t
 
t
 = 
	`ext_gë_sy°ime
();

42 
tm
* 
ç
 = 
	`gmtime
(&
t
);

44  
	`¢¥ötf
(
buf„r
, 
buf„r_size
, 
f‹m©
, 1900 + 
ç
->
tm_yór
,

45 
ç
->
tm_m⁄
 + 1,Åp->
tm_mday
,Åp->
tm_hour
,Åp->
tm_mö
,Åp->
tm_£c
,

46 
log_Àvñ_«me
, 
åunˇãd_«me
, 
löío
, 
îr‹_code
);

47 
	}
}

49 
	$ext_¢pötf
(* 
buf„r
, 
size_t
 
buf„r_size
, c⁄° * 
f‹m©
, ...)

51 
va_li°
 
¨gs
;

52 
	`va_°¨t
(
¨gs
, 
f‹m©
);

53 
ªs_Àn
 = 
	`ext_loggî_•rötf
(
buf„r
, 
buf„r_size
, 
f‹m©
, 
¨gs
);

54 
	`va_íd
(
¨gs
);

55  
ªs_Àn
;

56 
	}
}

59 
	mDEFAULT
, 
	mPERCENT_FIRST_FOUND
, 
	mPERCENT_FOUND


60 } 
	t•rötfSèã
;

61 * 
	tch¨_p
;

62 * 
	tvoid_p
;

63 
	tuöt
;

64 
	tl⁄gI¡
;

65 
	tl⁄gL⁄gI¡
;

66 
	tuL⁄gI¡
;

67 
	tuL⁄gL⁄gI¡
;

69 
	#_INT_SPRINTF
(
ty≥
) \

70 
ty≥
 
ˇrg
 = (ty≥)
	`va_¨g
(
¨gs
,Åype); \

71 
˝
 = 
	`¢¥ötf
(
buf„r_p
, 
buf„r_size_l
, 
p_f‹m©
, 
ˇrg
); \

72 
ªs_Àn
 +
˝
; \

73 
buf„r_p
 +
˝
; \

74 i‡(
buf„r_size_l
 <
˝
) { \

75 
buf„r_size_l
 = 0; \

76 
no_m‹e_•a˚_ö_buf„r
 = 
åue
; \

78 
buf„r_size_l
 -
˝
; \

80 
œ°_f‹m©
 = 
p
 + 1; \

81 
	`¢dc_mem_‰ì
(
p_f‹m©
); \

82 
≥r˚¡_pos
 = 
NULL
; \

83 
°©e
 = 
DEFAULT
;

	)

85 
	#SPRNTF
(
ty≥
) \

86 
size_t
 
p_f‹m©_size
 = (
p
 - 
œ°_f‹m©
)+2; \

87 *
p_f‹m©
 = 
	`¢dc_mem_mÆloc
(
p_f‹m©_size
); \

88 i‡(
p_f‹m©
 =
NULL
) { \

89 
no_m‹e_•a˚_ö_buf„r
 = 
åue
; \

92 
	`°∫˝y
(
p_f‹m©
,
œ°_f‹m©
,
p_f‹m©_size
-1);\

93 
	`_INT_SPRINTF
(
ty≥
)

	)

95 
	#SPRINTF_SUBST
(
ty≥
,
symbﬁs
) \

96 
size_t
 
f‹m©ed_size
 = 
≥r˚¡_pos
 - 
œ°_f‹m©
; \

97 
size_t
 
symbﬁs_size
 = 
	`°æí
(
symbﬁs
); \

98 
size_t
 
p_f‹m©_size
 = 
f‹m©ed_size
 + 
symbﬁs_size
 +2;\

99 *
p_f‹m©
 = 
	`¢dc_mem_mÆloc
(
p_f‹m©_size
); \

100 i‡(
p_f‹m©
 =
NULL
) { \

101 
no_m‹e_•a˚_ö_buf„r
 = 
åue
; \

104 
	`°∫˝y
(
p_f‹m©
,
œ°_f‹m©
,
f‹m©ed_size
);\

105 
	`°∫˝y
(
p_f‹m©
 + 
f‹m©ed_size
, 
symbﬁs
, 
symbﬁs_size
); \

106 
	`_INT_SPRINTF
(
ty≥
)

	)

108 
	$ext_loggî_•rötf
(* 
buf„r
, 
size_t
 
buf„r_size
, c⁄° * 
f‹m©
, 
va_li°
 
¨gs
)

110 
f‹m©_Àngth
 = 
	`°∫Àn
(
f‹m©
, 
buf„r_size
);

111 
i
 = 0, 
ªs_Àn
 = 0;

112 c⁄° *
zu_symbﬁs
 = "%lu";

113 c⁄° *
p_symbﬁs
 = "0x%08X";

114 *
p
 = (*Ë
f‹m©
;

115 
ch
 = *
p
;

116 *
œ°_f‹m©
 = 
p
;

117 *
buf„r_p
 = 
buf„r
;

118 *
≥r˚¡_pos
 = 
NULL
;

119 
size_t
 
buf„r_size_l
 = 
buf„r_size
;

120 
boﬁ_t
 
no_m‹e_•a˚_ö_buf„r
 = 
Ál£
;

121 
•rötfSèã
 
°©e
 = 
DEFAULT
;

122 
boﬁ_t
 
l⁄gU£d
 = 
Ál£
;

123 
boﬁ_t
 
doubÀL⁄gU£d
 = 
Ál£
;

124 
boﬁ_t
 
zuFound
 = 
Ál£
;

125 
i
 = 0; i < 
f‹m©_Àngth
; i++) {

126 
ch
 = *
p
;

127 
°©e
) {

128 
PERCENT_FIRST_FOUND
:

129 i‡(
ch
 == '%') {

131 
°©e
 = 
DEFAULT
;

134 
°©e
 = 
PERCENT_FOUND
;

135 
PERCENT_FOUND
:

136 i‡(
ch
 == 'd') {

138 i‡(
doubÀL⁄gU£d
) {

139 
	`SPRNTF
(
l⁄gL⁄gI¡
);

140 } i‡(
l⁄gU£d
) {

141 
	`SPRNTF
(
l⁄gI¡
);

143 
	`SPRNTF
();

145 } i‡(
ch
 == 'u' || ch == 'x' || ch == 'X') {

147 i‡(
doubÀL⁄gU£d
) {

148 
	`SPRNTF
(
uL⁄gL⁄gI¡
);

149 } i‡(
l⁄gU£d
) {

150 
	`SPRNTF
(
uL⁄gI¡
);

151 } i‡(
zuFound
) {

152 
	`SPRINTF_SUBST
(
uL⁄gI¡
, 
zu_symbﬁs
);

154 
	`SPRNTF
(
uöt
);

156 } i‡(
ch
 == 's') {

158 
	`SPRNTF
(
ch¨_p
);

159 } i‡(
ch
 == 'z') {

160 
zuFound
 = 
åue
;

161 } i‡(
ch
 == 'p') {

162 
	`SPRINTF_SUBST
(
void_p
, 
p_symbﬁs
);

163 } i‡(
ch
 == 'l') {

164 i‡(
l⁄gU£d
) {

165 
doubÀL⁄gU£d
 = 
åue
;

167 
l⁄gU£d
 = 
åue
;

172 i‡(
ch
 == '%') {

173 
°©e
 = 
PERCENT_FIRST_FOUND
;

174 
≥r˚¡_pos
 = 
p
;

178 
p
++;

179 i‡(
no_m‹e_•a˚_ö_buf„r
)

182 i‡(!
no_m‹e_•a˚_ö_buf„r
) {

183 i‡(
p
 >
œ°_f‹m©
) {

185 
size_t
 
toc›y
 = 
buf„r_size_l
;

186 i‡(
toc›y
 > (
p
 - 
œ°_f‹m©
)) {

187 
toc›y
 = 
p
 - 
œ°_f‹m©
;

189 
	`°∫˝y
(
buf„r_p
, 
œ°_f‹m©
, 
toc›y
);

190 
ªs_Àn
 +
toc›y
;

193  
ªs_Àn
;

194 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/Econais/EC19D/sha.c

18 
	~<¢dc_sdk_≠i.h
>

19 
	~<¢dc_¸y±o_≠i.h
>

20 
	~"kØ_comm⁄.h
"

21 
	~"∂©f‹m/ext_sha.h
"

25 
kØ_îr‹_t
 
	$ext_ˇlcuœã_sha_hash
(c⁄° *
d©a
, 
size_t
 
d©a_size
, 
kØ_dige°
 
dige°
)

27 
	`KAA_RETURN_IF_NIL
(
dige°
, 
KAA_ERR_BADPARAM
);

29 
	`¢dc_¸y±o_sha1
(1, (
uöt8_t
 **)&
d©a
, &
d©a_size
, 
dige°
);

31  
KAA_ERR_NONE
;

32 
	}
}

34 
kØ_îr‹_t
 
	$ext_c›y_sha_hash
(
kØ_dige°_p
 
d°
, c⁄° kØ_dige°_∞
§c
)

36 
	`KAA_RETURN_IF_NIL2
(
d°
, 
§c
, 
KAA_ERR_BADPARAM
);

37 
	`mem˝y
(
d°
, 
§c
, 
SHA_1_DIGEST_LENGTH
);

38  
KAA_ERR_NONE
;

39 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/cc32xx/configuration_persistence.c

18 
	~<°dboﬁ.h
>

19 
	~<°ddef.h
>

20 
	~<∂©f‹m/ext_c⁄figuøti⁄_≥rsi°í˚.h
>

21 
	~<∂©f‹m/fûe_utûs.h
>

23 
	#KAA_CONFIGURATION_STORAGE
 "kØ_c⁄figuøti⁄.bö"

	)

25 
	$ext_c⁄figuøti⁄_ªad
(**
buf„r
, 
size_t
 *
buf„r_size
, 
boﬁ
 *
√eds_dóŒoˇti⁄
)

27 
	`cc32xx_bö¨y_fûe_ªad
(
KAA_CONFIGURATION_STORAGE
, 
buf„r
, 
buf„r_size
, 
√eds_dóŒoˇti⁄
);

28 
	}
}

30 
	$ext_c⁄figuøti⁄_°‹e
(c⁄° *
buf„r
, 
size_t
 
buf„r_size
)

32 
	`cc32xx_bö¨y_fûe_°‹e
(
KAA_CONFIGURATION_STORAGE
, 
buf„r
, 
buf„r_size
);

33 
	}
}

35 
	$ext_c⁄figuøti⁄_dñëe
()

37 
	`cc32xx_bö¨y_fûe_dñëe
(
KAA_CONFIGURATION_STORAGE
);

38 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/cc32xx/file_utils.c

17 
	~<∂©f‹m/fûe_utûs.h
>

18 
	~<°döt.h
>

19 
	~<∂©f‹m/°dio.h
>

20 
	~"utûôõs/kØ_mem.h
"

21 
	~"kØ_comm⁄.h
"

23 
	~<∂©f‹m/sock.h
>

26 
	~"hw_ty≥s.h
"

27 
	~"hw_öts.h
"

28 
	~"rom.h
"

29 
	~"rom_m≠.h
"

30 
	~"öãºu±.h
"

31 
	~"¥cm.h
"

34 
	~"comm⁄.h
"

35 
	~"u¨t_if.h
"

37 
	#MAX_FILE_SIZE
 8L*1024L

	)

43 
boﬁ
 
	$fûe_is_exi°
(c⁄° *
fûíame
)

45 
uöt32_t
 
ul_tokí
;

46 
öt32_t
 
l_fûe_h™dÀ
;

47 
öt32_t
 
l_ªt_vÆ
 = 
	`¶_FsO≥n
((*)
fûíame
, 
FS_MODE_OPEN_WRITE
, &
ul_tokí
, &
l_fûe_h™dÀ
);

49 i‡(
l_ªt_vÆ
 < 0) {

50 
	`¶_FsClo£
(
l_fûe_h™dÀ
, 0, 0, 0);

51  
Ál£
;

54 
	`¶_FsClo£
(
l_fûe_h™dÀ
, 0, 0, 0);

55  
åue
;

56 
	}
}

58 
boﬁ
 
	$¸óã_fûe
(c⁄° *
fûíame
)

60 
uöt32_t
 
ul_tokí
;

61 
öt32_t
 
l_fûe_h™dÀ
;

62 
öt32_t
 
l_ªt_vÆ
;

64 
l_ªt_vÆ
 = 
	`¶_FsO≥n
((*)
fûíame
,
	`FS_MODE_OPEN_CREATE
(
MAX_FILE_SIZE
, 
_FS_FILE_OPEN_FLAG_COMMIT
|
_FS_FILE_PUBLIC_WRITE
|
_FS_FILE_PUBLIC_READ
), &
ul_tokí
, &
l_fûe_h™dÀ
);

65 i‡(
l_ªt_vÆ
 < 0) {

66 
	`¶_FsClo£
(
l_fûe_h™dÀ
, 0, 0, 0);

67  
Ál£
;

69 
l_ªt_vÆ
 = 
	`¶_FsClo£
(
l_fûe_h™dÀ
, 0, 0, 0);

70 i‡(
SL_RET_CODE_OK
 !
l_ªt_vÆ
)

71  
Ál£
;

73  
åue
;

74 
	}
}

77 
	$cc32xx_bö¨y_fûe_ªad
(c⁄° *
fûe_«me
, **
buf„r
, 
size_t
 *
buf„r_size
, 
boﬁ
 *
√eds_dóŒoˇti⁄
)

83 
	`KAA_RETURN_IF_NIL4
(
fûe_«me
, 
buf„r
, 
buf„r_size
, 
√eds_dóŒoˇti⁄
, -1);

84 *
buf„r
 = 
NULL
;

85 *
buf„r_size
 = 0;

87 
öt32_t
 
ªt
 = -1;

88 
uöt32_t
 
ul_tokí
;

89 
öt32_t
 
l_fûe_h™dÀ
;

90 
SlFsFûeInfo_t
 
fûe_öfo
;

92 
	`mem£t
(&
fûe_öfo
, 0, (file_info));

94 
ªt
 = 
	`¶_FsO≥n
((*)
fûe_«me
, 
FS_MODE_OPEN_READ
, &
ul_tokí
, &
l_fûe_h™dÀ
);

96 i‡(
ªt
 < 0) {

97 
	`¶_FsClo£
(
l_fûe_h™dÀ
, 0, 0, 0);

101 
	`¶_FsGëInfo
((*)
fûe_«me
, 
ul_tokí
, &
fûe_öfo
);

103 i‡(
fûe_öfo
.
FûeLí
 <= 0) {

104 
	`¶_FsClo£
(
l_fûe_h™dÀ
, 0, 0, 0);

108 
uöt8_t
 *
ªsu…_buf„r
 = (uöt8_t*Ë
	`KAA_MALLOC
(
fûe_öfo
.
FûeLí
 * (uint8_t));

109 i‡(!
ªsu…_buf„r
) {

110 
	`¶_FsClo£
(
l_fûe_h™dÀ
, 0, 0, 0);

114 i‡–
	`¶_FsRód
(
l_fûe_h™dÀ
, 0, 
ªsu…_buf„r
, 
fûe_öfo
.
FûeLí
) == 0 ) {

115 
	`KAA_FREE
(
ªsu…_buf„r
);

116 
	`¶_FsClo£
(
l_fûe_h™dÀ
, 0, 0, 0);

120 *
buf„r
 = (*Ë
ªsu…_buf„r
;

121 *
buf„r_size
 = 
fûe_öfo
.
FûeLí
;

122 *
√eds_dóŒoˇti⁄
 = 
åue
;

124 
	`¶_FsClo£
(
l_fûe_h™dÀ
, 0, 0, 0);

127 ()
fûe_«me
;

128 ()
buf„r
;

129 ()
buf„r_size
;

130 ()
√eds_dóŒoˇti⁄
;

133 
	}
}

135 
	$cc32xx_bö¨y_fûe_°‹e
(c⁄° *
fûe_«me
, c⁄° *
buf„r
, 
size_t
 
buf„r_size
)

141 
	`KAA_RETURN_IF_NIL3
(
fûe_«me
, 
buf„r
, 
buf„r_size
, -1);

143 
öt32_t
 
ªt
 = -1;

144 
uöt32_t
 
ul_tokí
;

145 
öt32_t
 
l_fûe_h™dÀ
;

147 i‡(
MAX_FILE_SIZE
 < 
buf„r_size
)

148  
ªt
;

150 i‡(!
	`fûe_is_exi°
(
fûe_«me
Ë&& !
	`¸óã_fûe
(file_name))

151  
ªt
;

153 
ªt
 = 
	`¶_FsO≥n
((*)
fûe_«me
, 
FS_MODE_OPEN_WRITE
, &
ul_tokí
, &
l_fûe_h™dÀ
);

154 i‡(
ªt
 == 0) {

155 if(
	`¶_FsWrôe
(
l_fûe_h™dÀ
, 0, (*)
buf„r
, 
buf„r_size
))

156 
ªt
 = 0;

157 
	`¶_FsClo£
(
l_fûe_h™dÀ
, 0, 0, 0);

159  
ªt
;

161 ()
fûe_«me
;

162 ()
buf„r
;

163 ()
buf„r_size
;

166 
	}
}

168 
	$cc32xx_bö¨y_fûe_dñëe
(c⁄° *
fûe_«me
)

174 
öt32_t
 
ªt
 = 0;

175 
uöt32_t
 
ul_tokí
;

176 
öt32_t
 
l_fûe_h™dÀ
;

178 
ªt
 = 
	`¶_FsO≥n
((*)
fûe_«me
, 
FS_MODE_OPEN_READ
, &
ul_tokí
, &
l_fûe_h™dÀ
);

179 
	`¶_FsClo£
(
l_fûe_h™dÀ
, 0, 0, 0);

180 i‡(
ªt
 < 0)

183 
ªt
 = 
	`¶_FsDñ
(
fûe_«me
, 0);

184 i‡(
ªt
 < 0)

189 ()
fûe_«me
;

192 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/cc32xx/logger.c

17 
	~<∂©f‹m/°dio.h
>

18 
	~<°d¨g.h
>

19 
	~<∂©f‹m/time.h
>

20 
	~<∂©f‹m/ext_sy°em_loggî.h
>

22 
	~"comm⁄.h
"

23 
	~"u¨t_if.h
"

25 
	$ext_wrôe_log
(
FILE
 * 
sök
, c⁄° * 
buf„r
, 
size_t
 
mesßge_size
)

27 ()
mesßge_size
;

28 i‡(!
buf„r
 || !
sök
) {

32 
	`Rï‹t
("%s\r",
buf„r
);

33 
	}
}

35 
kØ_time_t
 
	$ext_gë_sy°ime
()

37  
	`KAA_TIME
();

38 
	}
}

40 
	$ext_f‹m©_•rötf
(* 
buf„r
, 
size_t
 
buf„r_size
, c⁄° * 
f‹m©
,

41 c⁄° * 
log_Àvñ_«me
, c⁄° * 
åunˇãd_«me
, 
löío
,

42 
kØ_îr‹_t
 
îr‹_code
)

44 
time_t
 
t
 = 
	`ext_gë_sy°ime
();

45 
tm
 *
ç
 = 
	`gmtime
(&
t
);

47  
	`¢¥ötf
(
buf„r
, 
buf„r_size
, 
f‹m©
, 1900 + 
ç
->
tm_yór
,

48 
ç
->
tm_m⁄
 + 1,Åp->
tm_mday
,Åp->
tm_hour
,Åp->
tm_mö
,Åp->
tm_£c
,

49 
log_Àvñ_«me
, 
åunˇãd_«me
, 
löío
, 
îr‹_code
);

50 
	}
}

52 
	$ext_¢pötf
(* 
buf„r
, 
size_t
 
buf„r_size
, c⁄° * 
f‹m©
, ...)

54 
va_li°
 
¨gs
;

55 
	`va_°¨t
(
¨gs
, 
f‹m©
);

56 
ªs_Àn
 = 
	`v¢¥ötf
(
buf„r
, 
buf„r_size
, 
f‹m©
, 
¨gs
);

57 
	`va_íd
(
¨gs
);

58  
ªs_Àn
;

59 
	}
}

61 
	$ext_loggî_•rötf
(* 
buf„r
, 
size_t
 
buf„r_size
, c⁄° * 
f‹m©
, 
va_li°
 
¨gs
)

63  
	`v¢¥ötf
(
buf„r
, 
buf„r_size
, 
f‹m©
, 
¨gs
);

64 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/cc32xx/platform/defaults.h

18 #i‚de‡
CC32XX_DEFAULTS_H_


19 
	#CC32XX_DEFAULTS_H_


	)

21 
	#KAA_TCP_CHANNEL_IN_BUFFER_SIZE
 2048

	)

22 
	#KAA_TCP_CHANNEL_OUT_BUFFER_SIZE
 8192

	)

24 
	#KAA_TCP_CHANNEL_MAX_TIMEOUT
 200u

	)

25 
	#KAA_TCP_CHANNEL_PING_TIMEOUT
 (
KAA_TCP_CHANNEL_MAX_TIMEOUT
 / 2)

	)

27 
	#KAATCP_PARSER_MAX_MESSAGE_LENGTH
 1024

	)

28 
	#KAA_MAX_LOG_MESSAGE_LENGTH
 512

	)

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/cc32xx/platform/file_utils.h

17 #i‚de‡
CC32XX_FILE_UTILS_H_


18 
	#CC32XX_FILE_UTILS_H_


	)

20 
	~<°ddef.h
>

21 
	~<°dboﬁ.h
>

23 #ifde‡
__˝lu•lus


27 
cc32xx_bö¨y_fûe_ªad
(c⁄° *
fûe_«me
, **
buf„r
, 
size_t
 *
buf„r_size
, 
boﬁ
 *
√eds_dóŒoˇti⁄
);

29 
cc32xx_bö¨y_fûe_°‹e
(c⁄° *
fûe_«me
, c⁄° *
buf„r
, 
size_t
 
buf„r_size
);

31 
cc32xx_bö¨y_fûe_dñëe
(c⁄° *
fûe_«me
);

33 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/cc32xx/platform/mem.h

17 #i‚de‡
CC32XX_MEM_H_


18 
	#CC32XX_MEM_H_


	)

20 
	~<°dlib.h
>

22 #i‚de‡
__KAA_MALLOC


23 
	#__KAA_MALLOC
(
S
Ë
	`mÆloc
(S)

	)

26 #i‚de‡
__KAA_CALLOC


27 
	#__KAA_CALLOC
(
N
,
S
Ë
	`ˇŒoc
(N, S)

	)

30 #i‚de‡
__KAA_REALLOC


31 
	#__KAA_REALLOC
(
P
, 
S
Ë
	`ªÆloc
(P, S)

	)

34 #i‚de‡
__KAA_FREE


35 
	#__KAA_FREE
(
P
Ë
	`‰ì
(P)

	)

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/cc32xx/platform/sock.h

17 #i‚de‡
CC32XX_SOCK_H_


18 
	#CC32XX_SOCK_H_


	)

21 #unde‡
__CONCAT


22 #unde‡
FD_SETSIZE


23 #unde‡
FD_SET


24 #unde‡
FD_CLR


25 #unde‡
FD_ISSET


26 #unde‡
FD_ZERO


27 #unde‡
fd_£t


28 #unde‡
EBADF


29 #unde‡
EAGAIN


30 #unde‡
EWOULDBLOCK


31 #unde‡
ENOMEM


32 #unde‡
EACCES


33 #unde‡
EFAULT


34 #unde‡
EINVAL


35 #unde‡
EDESTADDRREQ


36 #unde‡
EPROTOTYPE


37 #unde‡
ENOPROTOOPT


38 #unde‡
EPROTONOSUPPORT


39 #unde‡
EOPNOTSUPP


40 #unde‡
EAFNOSUPPORT


41 #unde‡
EADDRINUSE


42 #unde‡
EADDRNOTAVAIL


43 #unde‡
ENETUNREACH


44 #unde‡
ENOBUFS


45 #unde‡
EISCONN


46 #unde‡
ENOTCONN


47 #unde‡
ETIMEDOUT


48 #unde‡
ECONNREFUSED


50 
	~"sim∂ñök.h
"

51 
	~"sockë.h
"

52 
	~"∂©f‹m-im∂/comm⁄/kØ_ht⁄Œ.h
"

54 
	saddröfo


56 
	mai_Êags
;

57 
	mai_Ámûy
;

58 
	mai_sockty≥
;

59 
	mai_¥Ÿocﬁ
;

60 
sockÀn_t
 
	mai_addæí
;

61 
sockaddr
 *
	mai_addr
;

62 *
	mai_ˇn⁄«me
;

63 
addröfo
 *
	mai_√xt
;

66 
	#_SS_PADSIZE
 (128 - (2 *  ()))

	)

67 
	ssockaddr_°‹age


69 
	mss_Ámûy
;

70 
	m__ss_Æign
;

71 
	m__ss_∑ddög
[
_SS_PADSIZE
];

74 
	tkØ_fd_t
;

76 
sockaddr
 
	tkØ_sockaddr_t
;

77 
sockaddr_°‹age
 
	tkØ_sockaddr_°‹age_t
;

78 
sockÀn_t
 
	tkØ_sockÀn_t
;

80 
	#KAA_HTONS
(
ho°sh‹t
Ë
	`ht⁄s
((ho°sh‹t))

	)

81 
	#KAA_HTONL
(
ho°l⁄g
Ë
	`ht⁄l
((ho°l⁄g))

	)

82 
	#KAA_HTONLL
(
ho°l⁄gl⁄g
Ë
	`kØ_ht⁄Œ
((ho°l⁄gl⁄g))

	)

84 
	#KAA_NTOHS
(
√tsh‹t
Ë
	`¡ohs
(“ësh‹t))

	)

85 
	#KAA_NTOHL
(
√é⁄g
Ë
	`¡ohl
(“ël⁄g))

	)

86 
	#KAA_NTOHLL
(
√é⁄gl⁄g
Ë
	`kØ_¡ohŒ
(“ël⁄gl⁄g))

	)

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/cc32xx/platform/stdio.h

17 #i‚de‡
CC32XX_STDIO_H_


18 
	#CC32XX_STDIO_H_


	)

20 
	~<°dio.h
>

22 
cc32xx_ªboŸ
();

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/cc32xx/platform/time.h

18 #i‚de‡
CC32XX_TIME_H_


19 
	#CC32XX_TIME_H_


	)

21 
	~<time.h
>

23 
	tkØ_time_t
;

25 
	#KAA_TIME
(Ë((
kØ_time_t
)
	`cc32xx_time
())

	)

27 
cc32xx_time
();

28 
cc32xx_˛ock_gëms
();

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/cc32xx/reboot.c

17 
	~"hw_ty≥s.h
"

18 
	~"devi˚.h
"

19 
	~"¥cm.h
"

20 
	~"utûs_if.h
"

22 
	$cc32xx_ªboŸ
()

24 
	`¶_St›
(30);

25 
	`PRCMHibî«ãI¡îvÆSë
(330);

26 
	`PRCMHibî«ãWakeupSour˚E«bÀ
(
PRCM_HIB_SLOW_CLK_CTR
);

27 
	`PRCMHibî«ãE¡î
();

29 
	`PRCMMCURe£t
(
åue
);

30 
	`Utûs_TriggîHibCy˛e
();

31 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/cc32xx/status.c

17 
	~<°dboﬁ.h
>

18 
	~<°ddef.h
>

19 
	~<∂©f‹m/ext_°©us.h
>

20 
	~<∂©f‹m/fûe_utûs.h
>

22 
	#KAA_STATUS_STORAGE
 "kØ_°©us.bö"

	)

24 
	$ext_°©us_ªad
(**
buf„r
, 
size_t
 *
buf„r_size
, 
boﬁ
 *
√eds_dóŒoˇti⁄
)

26 
	`cc32xx_bö¨y_fûe_ªad
(
KAA_STATUS_STORAGE
, 
buf„r
, 
buf„r_size
, 
√eds_dóŒoˇti⁄
);

27 
	}
}

29 
	$ext_°©us_°‹e
(c⁄° *
buf„r
, 
size_t
 
buf„r_size
)

31 
	`cc32xx_bö¨y_fûe_°‹e
(
KAA_STATUS_STORAGE
, 
buf„r
, 
buf„r_size
);

32 
	}
}

34 
	$ext_°©us_dñëe
()

36 
	`cc32xx_bö¨y_fûe_dñëe
(
KAA_STATUS_STORAGE
);

37 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/cc32xx/tcp_utils.c

17 
	~"∂©f‹m/ext_t˝_utûs.h
"

18 
	~<∂©f‹m/°dio.h
>

19 
	~"kØ_comm⁄.h
"

20 
	~<î∫o.h
>

23 
	~"hw_ty≥s.h
"

24 
	~"hw_öts.h
"

25 
	~"rom.h
"

26 
	~"rom_m≠.h
"

27 
	~"öãºu±.h
"

28 
	~"¥cm.h
"

31 
	~"comm⁄.h
"

32 
	~"u¨t_if.h
"

34 
kØ_îr‹_t
 
	$ext_t˝_utûs_£t_sockaddr_p‹t
(
kØ_sockaddr_t
 *
addr
, 
uöt16_t
 
p‹t
)

36 
	`KAA_RETURN_IF_NIL2
(
addr
, 
p‹t
, 
KAA_ERR_BADPARAM
);

37 
addr
->
ß_Ámûy
) {

38 
AF_INET
: {

39 
sockaddr_ö
 *
s_ö
 = (sockaddr_ö *Ë
addr
;

40 
s_ö
->
sö_p‹t
 = 
	`KAA_HTONS
(
p‹t
);

44  
KAA_ERR_SOCKET_INVALID_FAMILY
;

46  
KAA_ERR_NONE
;

47 
	}
}

51 
ext_t˝_utûs_fun˘i⁄_ªtu∫_°©e_t
 
	$ext_t˝_utûs_gëaddrbyho°
(
kØ_dns_ªsﬁve_li°íî_t
 *
ªsﬁve_li°íî


52 , c⁄° 
kØ_dns_ªsﬁve_öfo_t
 *
ªsﬁve_¥›s


53 , 
kØ_sockaddr_t
 *
ªsu…


54 , 
kØ_sockÀn_t
 *
ªsu…_size
)

56 ()
ªsﬁve_li°íî
;

57 
	`KAA_RETURN_IF_NIL4
(
ªsﬁve_¥›s
,Ñesﬁve_¥›s->
ho°«me
, 
ªsu…
, 
ªsu…_size
, 
RET_STATE_VALUE_ERROR
);

58 i‡(*
ªsu…_size
 < (
sockaddr_ö
))

59  
RET_STATE_BUFFER_NOT_ENOUGH
;

61 
out_ù
 = 0;

62 
ai_Ámûy
;

63 
ªsﬁve_îr‹
 = 0;

64 
sockaddr_ö
 
tmp_addr
;

66 
ai_Ámûy
 = 
AF_INET
;

67 *
ªsu…_size
 = (
sockaddr_ö
);

69 
ho°«me_°r
[
ªsﬁve_¥›s
->
ho°«me_Àngth
 + 1];

70 
	`mem˝y
(
ho°«me_°r
, 
ªsﬁve_¥›s
->
ho°«me
,Ñesﬁve_¥›s->
ho°«me_Àngth
);

71 
ho°«me_°r
[
ªsﬁve_¥›s
->
ho°«me_Àngth
] = '\0';

73 i‡(
	`°rcmp
(
ho°«me_°r
, "localhost"))

74 
ªsﬁve_îr‹
 = 
	`¶_NëAµDnsGëHo°ByName
((sig√d *)
ho°«me_°r
, 
ªsﬁve_¥›s
->
ho°«me_Àngth
, &
out_ù
, 
ai_Ámûy
);

76 
out_ù
 = 0x7F000001;

78 
	`mem£t
(&
tmp_addr
, 0, *
ªsu…_size
);

79 
tmp_addr
.
sö_Ámûy
 = 
ai_Ámûy
;

80 
tmp_addr
.
sö_addr
.
s_addr
 = 
	`¶_Ht⁄l
(()
out_ù
);

81 
tmp_addr
.
sö_p‹t
 = 
	`¶_Ht⁄s
(()
ªsﬁve_¥›s
->
p‹t
);

83 i‡(
ªsﬁve_îr‹
 || !
out_ù
)

84  
RET_STATE_VALUE_ERROR
;

86 
	`mem˝y
(
ªsu…
, (
sockaddr
*)&
tmp_addr
, *
ªsu…_size
);

87  
RET_STATE_VALUE_READY
;

88 
	}
}

92 
kØ_îr‹_t
 
	$ext_t˝_utûs_›í_t˝_sockë
(
kØ_fd_t
 *
fd


93 , c⁄° 
kØ_sockaddr_t
 *
de°ö©i⁄


94 , 
kØ_sockÀn_t
 
de°ö©i⁄_size
)

96 
	`KAA_RETURN_IF_NIL3
(
fd
, 
de°ö©i⁄
, 
de°ö©i⁄_size
, 
KAA_ERR_BADPARAM
);

98 
lN⁄Blockög
 = 1;

99 
°©us
;

101 
kØ_fd_t
 
sock
 = 
	`sockë
(
de°ö©i⁄
->
ß_Ámûy
, 
SOCK_STREAM
, 0);

102 i‡(
sock
 < 0)

103  
KAA_ERR_SOCKET_ERROR
;

105 
°©us
 = 
	`£tsock›t
(
sock
, 
SL_SOL_SOCKET
, 
SL_SO_NONBLOCKING
,

106 &
lN⁄Blockög
, (lNonBlocking));

107 i‡–
°©us
 < 0 ) {

108 
	`ext_t˝_utûs_t˝_sockë_˛o£
(
sock
);

109  
KAA_ERR_SOCKET_ERROR
;

112 
îr
 = 
	`c⁄√˘
(
sock
, 
de°ö©i⁄
, 
de°ö©i⁄_size
);

113 i‡–(
îr
 < 0 &&Éº !
SL_EALREADY
Ë&& 
î∫o
 !
EINPROGRESS
) {

114 
	`ext_t˝_utûs_t˝_sockë_˛o£
(
sock
);

115  
KAA_ERR_SOCKET_CONNECT_ERROR
;

118 *
fd
 = 
sock
;

119  
KAA_ERR_NONE
;

120 
	}
}

124 
ext_t˝_sockë_°©e_t
 
	$ext_t˝_utûs_t˝_sockë_check
(
kØ_fd_t
 
fd


125 , c⁄° 
kØ_sockaddr_t
 *
de°ö©i⁄


126 , 
kØ_sockÀn_t
 
de°ö©i⁄_size
)

128 i‡(
	`c⁄√˘
(
fd
, 
de°ö©i⁄
, 
de°ö©i⁄_size
) < 0 ) {

129 
î∫o
) {

130 
EINPROGRESS
:

131 
EALREADY
:

132  
KAA_TCP_SOCK_CONNECTING
;

133 
EISCONN
:

134  
KAA_TCP_SOCK_CONNECTED
;

136  
KAA_TCP_SOCK_ERROR
;

139  
KAA_TCP_SOCK_CONNECTED
;

140 
	}
}

144 
ext_t˝_sockë_io_îr‹s_t
 
	$ext_t˝_utûs_t˝_sockë_wrôe
(
kØ_fd_t
 
fd


145 , c⁄° *
buf„r


146 , 
size_t
 
buf„r_size


147 , 
size_t
 *
byãs_wrôãn
)

149 
	`KAA_RETURN_IF_NIL2
(
buf„r
, 
buf„r_size
, 
KAA_TCP_SOCK_IO_ERROR
);

150 
ssize_t
 
wrôe_ªsu…
 = 
	`£nd
(
fd
, 
buf„r
, 
buf„r_size
, 0);

151 i‡(
wrôe_ªsu…
 < 0 && 
î∫o
 !
EAGAIN
)

152  
KAA_TCP_SOCK_IO_ERROR
;

153 i‡(
byãs_wrôãn
)

154 *
byãs_wrôãn
 = (
wrôe_ªsu…
 > 0) ? write_result : 0;

155  
KAA_TCP_SOCK_IO_OK
;

156 
	}
}

160 
ext_t˝_sockë_io_îr‹s_t
 
	$ext_t˝_utûs_t˝_sockë_ªad
(
kØ_fd_t
 
fd


161 , *
buf„r


162 , 
size_t
 
buf„r_size


163 , 
size_t
 *
byãs_ªad
)

165 
	`KAA_RETURN_IF_NIL2
(
buf„r
, 
buf„r_size
, 
KAA_TCP_SOCK_IO_ERROR
);

166 
ssize_t
 
ªad_ªsu…
 = 
	`ªcv
(
fd
, 
buf„r
, 
buf„r_size
, 0);

167 i‡(!
ªad_ªsu…
)

168  
KAA_TCP_SOCK_IO_EOF
;

169 i‡(
ªad_ªsu…
 < 0 && 
î∫o
 !
EAGAIN
)

170  
KAA_TCP_SOCK_IO_ERROR
;

171 i‡(
byãs_ªad
)

172 *
byãs_ªad
 = (
ªad_ªsu…
 > 0) ?Ñead_result : 0;

173  
KAA_TCP_SOCK_IO_OK
;

174 
	}
}

178 
kØ_îr‹_t
 
	$ext_t˝_utûs_t˝_sockë_˛o£
(
kØ_fd_t
 
fd
)

180  (
	`˛o£
(
fd
Ë< 0Ë? 
KAA_ERR_SOCKET_ERROR
 : 
KAA_ERR_NONE
;

181 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/cc32xx/time.c

17 
	~<∂©f‹m/time.h
>

19 
	~"sy°ick.h
"

21 
	#MPU_FREQUENCY
 80000000

	)

23 
	gmûliTimî
 = 1;

25 
	$sysTickI¡H™dÀr
()

27 ++
mûliTimî
;

28 
	}
}

30 
	$cc32xx_öô_timî
()

32 
öô
 = 0;

34 i‡(!
öô
) {

35 
	`SysTickE«bÀ
();

36 
	`SysTickI¡E«bÀ
();

37 
	`SysTickI¡Regi°î
(
sysTickI¡H™dÀr
);

38 
	`SysTickPîiodSë
(
MPU_FREQUENCY
 / 1000);

39 
öô
 = 1;

41 
	}
}

43 
	$cc32xx_˛ock_gëms
()

45 
	`cc32xx_öô_timî
();

46  
mûliTimî
;

47 
	}
}

49 
	$cc32xx_time
()

51 
	`cc32xx_öô_timî
();

52  
mûliTimî
 / 1000;

53 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/common/encryption_utils.c

17 
	~"∂©f‹m/ext_í¸y±i⁄_utûs.h
"

18 
	~"∂©f‹m/ext_key_utûs.h
"

20 
	~<°dboﬁ.h
>

21 
	~<°rög.h
>

23 
	~<utûôõs/kØ_´s_rß.h
>

25 
	~<mbedés/pk.h
>

26 
	~<mbedés/íå›y.h
>

27 
	~<mbedés/˘r_drbg.h
>

28 
	~<mbedés/md.h
>

30 
	#ENCRYPTED_SESSION_KEY_LENGTH
 256

	)

31 
	#KAA_SIGNATURE_LENGTH
 256

	)

32 
	#AES_ECB_ENCRYPTION_CHUNK_SIZE
 16

	)

34 
mbedés_pk_c⁄ãxt
 
kØ_pk_c⁄ãxt_
;

43 
uöt8_t
 
	m£ssi⁄_key
[
KAA_SESSION_KEY_LENGTH
];

44 
uöt8_t
 
	mí¸y±ed_£ssi⁄_key
[
ENCRYPTED_SESSION_KEY_LENGTH
];

45 
uöt8_t
 
	msig«tuª
[
KAA_SIGNATURE_LENGTH
];

46 
size_t
 
	m£ssi⁄_key_Àngth
;

47 } 
	gkeys
;

49 
kØ_îr‹_t
 
	$kØ_öô_£ssi⁄_key
()

52 
boﬁ
 
öôülized
 = 
Ál£
;

53 i‡(!
öôülized
) {

55 i‡(
	`öô_´s_key
(
keys
.
£ssi⁄_key
, 
KAA_SESSION_KEY_LENGTH
)) {

56  
KAA_ERR_BADDATA
;

59 
keys
.
£ssi⁄_key_Àngth
 = 
KAA_SESSION_KEY_LENGTH
;

60 
öôülized
 = 
åue
;

63  
KAA_ERR_NONE
;

64 
	}
}

66 
	$ext_gë_ídpoöt_£ssi⁄_key
(c⁄° 
uöt8_t
 **
buf„r
, 
size_t
 *
buf„r_size
)

68 i‡(
buf„r
 =
NULL
 || 
buf„r_size
 == 0) {

71 *
buf„r
 = 
keys
.
£ssi⁄_key
;

72 *
buf„r_size
 = 
keys
.
£ssi⁄_key_Àngth
;

73 
	}
}

76 
kØ_îr‹_t
 
	$ext_gë_í¸y±ed_£ssi⁄_key
(
uöt8_t
 **
buf„r
, 
size_t
 *
buf„r_size
,

77 c⁄° 
uöt8_t
 *
ªmŸe_key
, 
size_t
 
ªmŸe_key_size
)

79 i‡(
buf„r
 =
NULL
 || 
buf„r_size
 =NULL || 
ªmŸe_key
 =NULL || 
ªmŸe_key_size
 == 0) {

80  
KAA_ERR_BADPARAM
;

83 
kØ_îr‹_t
 
îr
 = 
	`rß_í¸y±
(
ªmŸe_key
, 
ªmŸe_key_size
, 
keys
.
£ssi⁄_key
,

84 
KAA_SESSION_KEY_LENGTH
, 
keys
.
í¸y±ed_£ssi⁄_key
);

85 i‡(
îr
) {

86  
îr
;

89 *
buf„r
 = 
keys
.
í¸y±ed_£ssi⁄_key
;

90 *
buf„r_size
 = 
ENCRYPTED_SESSION_KEY_LENGTH
;

92  
îr
;

93 
	}
}

94 
size_t
 
	$ext_gë_í¸y±ed_d©a_size
(
size_t
 
öput_size
)

96 i‡(
öput_size
 == 0) {

100  
öput_size
 + 
AES_ECB_ENCRYPTION_CHUNK_SIZE
 -

101 (
öput_size
 % 
AES_ECB_ENCRYPTION_CHUNK_SIZE
);

102 
	}
}

104 
kØ_îr‹_t
 
	$ext_í¸y±_d©a
(c⁄° 
uöt8_t
 *
öput
, 
size_t
 
∑ylﬂd_size
, uöt8_à*
ouçut
)

106 i‡(
öput
 =
NULL
 || 
∑ylﬂd_size
 =0 || 
ouçut
 == NULL) {

107  
KAA_ERR_BADPARAM
;

111 
size_t
 
íc_d©a_size
 = 
	`ext_gë_í¸y±ed_d©a_size
(
∑ylﬂd_size
);

112 
uöt8_t
 
∑ddög
 = 
íc_d©a_size
 - 
∑ylﬂd_size
;

113 
	`mem£t
(
ouçut
 + 
∑ylﬂd_size
, 
∑ddög
,Öadding);

115  
	`´s_í¸y±_de¸y±
(
MBEDTLS_AES_ENCRYPT
, 
öput
, 
íc_d©a_size
,

116 
ouçut
, 
keys
.
£ssi⁄_key
);

117 
	}
}

119 
kØ_îr‹_t
 
	$ext_de¸y±_d©a
(c⁄° 
uöt8_t
 *
öput
, 
size_t
 
öput_size
,

120 
uöt8_t
 *
ouçut
, 
size_t
 *
ouçut_size
)

122 i‡(
öput
 =
NULL
 || 
öput_size
 =0 || 
ouçut
 =NULL || 
ouçut_size
 == 0) {

123  
KAA_ERR_BADPARAM
;

126 i‡(
	`´s_í¸y±_de¸y±
(
MBEDTLS_AES_DECRYPT
, 
öput
, 
öput_size
,

127 
ouçut
, 
keys
.
£ssi⁄_key
)) {

128  
KAA_ERR_BADPARAM
;

132 
uöt8_t
 
∑ddög_Àngth
 = *(
ouçut
+
öput_size
 - 1);

133 *
ouçut_size
 = 
öput_size
 - 
∑ddög_Àngth
;

135  
KAA_ERR_NONE
;

136 
	}
}

138 
kØ_îr‹_t
 
	$ext_gë_sig«tuª
(c⁄° 
uöt8_t
 *
öput
, 
size_t
 
öput_size
,

139 
uöt8_t
 **
ouçut
, 
size_t
 *
ouçut_size
)

141 i‡(!
öput
 || !
öput_size
 || !
ouçut
 || !
ouçut_size
) {

142  
KAA_ERR_BADPARAM
;

145 
kØ_îr‹_t
 
îr‹
 = 
	`rß_sign
(&
kØ_pk_c⁄ãxt_
, 
öput
, 
öput_size
, 
keys
.
sig«tuª
, 
ouçut_size
);

147 i‡(
îr‹
) {

148  
KAA_ERR_BADDATA
;

150 *
ouçut
 = 
keys
.
sig«tuª
;

151 *
ouçut_size
 = 
KAA_SIGNATURE_LENGTH
;

153  
KAA_ERR_NONE
;

154 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/common/ext_log_storage_memory.c

17 #i‚de‡
KAA_DISABLE_FEATURE_LOGGING


19 
	~<°döt.h
>

20 
	~<°rög.h
>

21 
	~<∂©f‹m/ext_log_°‹age.h
>

23 
	~"kØ_comm⁄.h
"

24 
	~"cﬁÀ˘i⁄s/kØ_li°.h
"

25 
	~"utûôõs/kØ_mem.h
"

26 
	~"utûôõs/kØ_log.h
"

28 
	~<as£π.h
>

33 *
	md©a
;

34 
size_t
 
	msize
;

35 
uöt16_t
 
	mbuckë_id
;

36 
boﬁ
 
	mm¨k
;

37 } 
	text_log_ªc‹d_t
;

40 
kØ_li°_t
 *
	mlogs
;

41 
kØ_li°_node_t
 *
	mfú°_unm¨ked
;

42 
size_t
 
	mmax_°‹age_size
;

43 
size_t
 
	mtŸÆ_occupõd_size
;

44 
size_t
 
	munm¨ked_occupõd_size
 ;

45 
size_t
 
	munm¨ked_ªc‹d_cou¡
;

46 
size_t
 
	mshröked_size
;

47 
kØ_loggî_t
 *
	mloggî
;

48 } 
	text_log_°‹age_mem‹y_t
;

60 
kØ_îr‹_t
 
ext_u∆imôed_log_°‹age_¸óã
(**
log_°‹age_c⁄ãxt_p
, 
kØ_loggî_t
 *
loggî
);

74 
kØ_îr‹_t
 
ext_limôed_log_°‹age_¸óã
(**
log_°‹age_c⁄ãxt_p


75 , 
kØ_loggî_t
 *
loggî


76 , 
size_t
 
°‹age_size


77 , 
size_t
 
≥r˚¡_to_dñëe
);

87 
kØ_îr‹_t
 
ext_log_°‹age_de°roy
(*
c⁄ãxt
);

91 
	$log_ªc‹d_de°roy
(*
ªc‹d_p
)

93 
	`KAA_RETURN_IF_NIL
(
ªc‹d_p
, );

94 
	`KAA_FREE
(((
ext_log_ªc‹d_t
*)
ªc‹d_p
)->
d©a
);

95 
	`KAA_FREE
(
ªc‹d_p
);

96 
	}
}

100 
kØ_îr‹_t
 
	$ext_u∆imôed_log_°‹age_¸óã
(**
log_°‹age_c⁄ãxt_p
, 
kØ_loggî_t
 *
loggî
)

102 
	`KAA_RETURN_IF_NIL2
(
log_°‹age_c⁄ãxt_p
, 
loggî
, 
KAA_ERR_BADPARAM
);

104 
ext_log_°‹age_mem‹y_t
 *
log_°‹age
 = 
	`KAA_MALLOC
((ext_log_storage_memory_t));

105 
	`KAA_RETURN_IF_NIL
(
log_°‹age
, 
KAA_ERR_NOMEM
);

107 
log_°‹age
->
loggî
 =Üogger;

108 
log_°‹age
->
fú°_unm¨ked
 = 
NULL
;

109 
log_°‹age
->
max_°‹age_size
 = 0;

110 
log_°‹age
->
tŸÆ_occupõd_size
 = 0;

111 
log_°‹age
->
unm¨ked_occupõd_size
 = 0;

112 
log_°‹age
->
unm¨ked_ªc‹d_cou¡
 = 0;

113 
log_°‹age
->
shröked_size
 = 0;

115 
log_°‹age
->
logs
 = 
	`kØ_li°_¸óã
();

116 i‡(!
log_°‹age
->
logs
) {

117 
	`ext_log_°‹age_de°roy
(
log_°‹age
);

118  
KAA_ERR_NOMEM
;

121 *
log_°‹age_c⁄ãxt_p
 = (*)
log_°‹age
;

122  
KAA_ERR_NONE
;

123 
	}
}

127 
kØ_îr‹_t
 
	$ext_limôed_log_°‹age_¸óã
(**
log_°‹age_c⁄ãxt_p


128 , 
kØ_loggî_t
 *
loggî


129 , 
size_t
 
°‹age_size


130 , 
size_t
 
≥r˚¡_to_dñëe
)

132 
	`KAA_RETURN_IF_NIL4
(
log_°‹age_c⁄ãxt_p
, 
loggî
, 
°‹age_size
, 
≥r˚¡_to_dñëe
, 
KAA_ERR_BADPARAM
);

134 i‡(
≥r˚¡_to_dñëe
 > 100) {

135 
	`KAA_LOG_WARN
(
loggî
, 
KAA_ERR_BADPARAM
, "FailedÅo createÜog storage:Öercentage ofÜogs "

136 "tÿªmovêi†m‹êth™ 100%% (%u%%)", 
≥r˚¡_to_dñëe
);

137  
KAA_ERR_BADPARAM
;

140 
kØ_îr‹_t
 
îr‹_code
 = 
	`ext_u∆imôed_log_°‹age_¸óã
(
log_°‹age_c⁄ãxt_p
, 
loggî
);

141 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

143 
ext_log_°‹age_mem‹y_t
 *
log_°‹age
 = (ext_log_°‹age_mem‹y_à*)*
log_°‹age_c⁄ãxt_p
;

145 
log_°‹age
->
max_°‹age_size
 = 
°‹age_size
;

146 
log_°‹age
->
shröked_size
 = (log_°‹age->
max_°‹age_size
 * (100 - 
≥r˚¡_to_dñëe
)) / 100;

148  
KAA_ERR_NONE
;

149 
	}
}

153 
kØ_îr‹_t
 
	$ext_log_°‹age_Æloˇã_log_ªc‹d_buf„r
(*
c⁄ãxt
, 
kØ_log_ªc‹d_t
 *
ªc‹d
)

155 ()
c⁄ãxt
;

156 
	`KAA_RETURN_IF_NIL2
(
ªc‹d
,Ñec‹d->
size
, 
KAA_ERR_BADPARAM
);

158 
ªc‹d
->
d©a
 = (*Ë
	`KAA_MALLOC
‘ec‹d->
size
 * ());

159 
	`KAA_RETURN_IF_NIL
(
ªc‹d
->
d©a
, 
KAA_ERR_NOMEM
);

161  
KAA_ERR_NONE
;

162 
	}
}

166 
kØ_îr‹_t
 
	$shrök_to_size
(*
c⁄ãxt
, 
size_t
 
size
)

168 
	`KAA_RETURN_IF_NIL
(
c⁄ãxt
, 
KAA_ERR_BADPARAM
);

169 
ext_log_°‹age_mem‹y_t
 *
£lf
 = (ext_log_°‹age_mem‹y_à*)
c⁄ãxt
;

170 
size_t
 
ªmoved_ªc‹d_cou¡
 = 0;

172 
kØ_li°_node_t
 *
ô
 = 
	`kØ_li°_begö
(
£lf
->
logs
);

173 
ô
 && 
£lf
->
tŸÆ_occupõd_size
 > 
size
) {

175 
ext_log_ªc‹d_t
 *
log_ªc‹d
 = 
	`kØ_li°_gë_d©a
(
ô
);

177 
£lf
->
tŸÆ_occupõd_size
 -
log_ªc‹d
->
size
;

178 ++
ªmoved_ªc‹d_cou¡
;

180 
kØ_li°_node_t
 *
√xt_ô
 = 
	`kØ_li°_√xt
(
ô
);

181 i‡(!
log_ªc‹d
->
m¨k
) {

182 
£lf
->
unm¨ked_occupõd_size
 -
log_ªc‹d
->
size
;

183 --
£lf
->
unm¨ked_ªc‹d_cou¡
;

184 
£lf
->
fú°_unm¨ked
 = 
√xt_ô
;

187 
	`kØ_li°_ªmove_©
(
£lf
->
logs
, 
ô
, &
log_ªc‹d_de°roy
);

188 
ô
 = 
√xt_ô
;

191 i‡(
	`kØ_li°_gë_size
(
£lf
->
logs
) > 0) {

192 
£lf
->
fú°_unm¨ked
 = 
NULL
;

195 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "%zuÑec‹d†f‹ciblyÑemoved", 
ªmoved_ªc‹d_cou¡
);

197  
KAA_ERR_NONE
;

198 
	}
}

202 
kØ_îr‹_t
 
	$ext_log_°‹age_add_log_ªc‹d
(*
c⁄ãxt
, 
kØ_log_ªc‹d_t
 *
ªc‹d
)

204 
	`KAA_RETURN_IF_NIL2
(
c⁄ãxt
, 
ªc‹d
, 
KAA_ERR_BADPARAM
);

205 
ext_log_°‹age_mem‹y_t
 *
£lf
 = (ext_log_°‹age_mem‹y_à*)
c⁄ãxt
;

207 i‡(
£lf
->
max_°‹age_size
 && (£lf->
tŸÆ_occupõd_size
 + 
ªc‹d
->
size
) > self->max_storage_size) {

208 
	`KAA_LOG_INFO
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Log storage is full (occupied %zu, max %zu,Ñecord size %zu). "

209 "GoögÅÿdñëêñdîÜogs", 
£lf
->
tŸÆ_occupõd_size
, sñf->
max_°‹age_size
, 
ªc‹d
->
size
);

211 
	`shrök_to_size
(
£lf
, sñf->
shröked_size
);

214 
ext_log_ªc‹d_t
 *
√w_ªc‹d
 = 
	`KAA_MALLOC
((*new_record));

215 
	`KAA_RETURN_IF_NIL
(
√w_ªc‹d
, 
KAA_ERR_NOMEM
);

217 
√w_ªc‹d
->
d©a
 = 
ªc‹d
->data;

218 
√w_ªc‹d
->
size
 = 
ªc‹d
->size;

219 
√w_ªc‹d
->
buckë_id
 = 
ªc‹d
->bucket_id;

220 
	`as£π
(
ªc‹d
->
buckë_id
);

221 
√w_ªc‹d
->
m¨k
 = 
Ál£
;

223 i‡(!
	`kØ_li°_push_back
(
£lf
->
logs
, 
√w_ªc‹d
)) {

224 
	`KAA_FREE
(
√w_ªc‹d
);

225  
KAA_ERR_NOMEM
;

228 
£lf
->
tŸÆ_occupõd_size
 +
√w_ªc‹d
->
size
;

229 
£lf
->
unm¨ked_occupõd_size
 +
√w_ªc‹d
->
size
;

230 
£lf
->
unm¨ked_ªc‹d_cou¡
++;

232 
ªc‹d
->
d©a
 = 
NULL
;

233 
ªc‹d
->
size
 = 0;

235  
KAA_ERR_NONE
;

236 
	}
}

240 
kØ_îr‹_t
 
	$ext_log_°‹age_dóŒoˇã_log_ªc‹d_buf„r
(*
c⁄ãxt
, 
kØ_log_ªc‹d_t
 *
ªc‹d
)

242 ()
c⁄ãxt
;

243 
	`KAA_RETURN_IF_NIL2
(
ªc‹d
,Ñec‹d->
d©a
, 
KAA_ERR_BADPARAM
);

245 
	`KAA_FREE
(
ªc‹d
->
d©a
);

246 
ªc‹d
->
d©a
 = 
NULL
;

247  
KAA_ERR_NONE
;

248 
	}
}

250 
boﬁ
 
	$föd_by_buckë_id
(*
log_ªc‹d_p
, *
buckë_id_p
)

252 
	`KAA_RETURN_IF_NIL2
(
log_ªc‹d_p
, 
buckë_id_p
, 
Ál£
);

253 
ext_log_ªc‹d_t
 *
ªc‹d
 = 
log_ªc‹d_p
;

256  
ªc‹d
->
m¨k
 &&Ñec‹d->
buckë_id
 =*(
uöt16_t
 *)
buckë_id_p
;

257 
	}
}

259 
boﬁ
 
	$föd_m¨ked
(*
log_ªc‹d_p
, *
m¨k
)

261  ((
ext_log_ªc‹d_t
 *)
log_ªc‹d_p
)->
m¨k
 =*(
boﬁ
 *)mark;

262 
	}
}

264 
kØ_îr‹_t
 
	$ext_log_°‹age_wrôe_√xt_ªc‹d
(*
c⁄ãxt


265 , *
buf„r


266 , 
size_t
 
buf„r_Àn


267 , 
uöt16_t
 *
buckë_id


268 , 
size_t
 *
ªc‹d_Àn
)

270 
	`KAA_RETURN_IF_NIL4
(
c⁄ãxt
, 
buf„r
, 
buf„r_Àn
, 
ªc‹d_Àn
, 
KAA_ERR_BADPARAM
);

271 
ext_log_°‹age_mem‹y_t
 *
£lf
 = 
c⁄ãxt
;

273 
kØ_li°_node_t
 *
ô
 = 
£lf
->
fú°_unm¨ked
;

274 i‡(!
ô
) {

275 
boﬁ
 
m¨k
 = 
Ál£
;

276 
ô
 = 
	`kØ_li°_föd_√xt
(
	`kØ_li°_begö
(
£lf
->
logs
), 
föd_m¨ked
, &
m¨k
);

279 i‡(!
ô
) {

280 *
ªc‹d_Àn
 = 0;

281  
KAA_ERR_NOT_FOUND
;

284 
ext_log_ªc‹d_t
 *
ªc‹d
 = 
	`kØ_li°_gë_d©a
(
ô
);

285 *
ªc‹d_Àn
 = 
ªc‹d
->
size
;

286 i‡(*
ªc‹d_Àn
 > 
buf„r_Àn
)

287  
KAA_ERR_INSUFFICIENT_BUFFER
;

290 
	`as£π
(
ªc‹d
->
buckë_id
);

291 
	`as£π
(!
ªc‹d
->
m¨k
);

293 
	`mem˝y
(
buf„r
, 
ªc‹d
->
d©a
,Ñec‹d->
size
);

295 i‡(
buckë_id
) {

296 *
buckë_id
 = 
ªc‹d
->bucket_id;

299 
ªc‹d
->
m¨k
 = 
åue
;

301 
£lf
->
fú°_unm¨ked
 = 
	`kØ_li°_√xt
(
ô
);

302 
£lf
->
unm¨ked_ªc‹d_cou¡
--;

303 
£lf
->
unm¨ked_occupõd_size
 -
ªc‹d
->
size
;

305  
KAA_ERR_NONE
;

306 
	}
}

310 
kØ_îr‹_t
 
	$ext_log_°‹age_ªmove_by_buckë_id
(*
c⁄ãxt
, 
uöt16_t
 
buckë_id
)

312 
	`KAA_RETURN_IF_NIL
(
c⁄ãxt
, 
KAA_ERR_BADPARAM
);

313 
ext_log_°‹age_mem‹y_t
 *
£lf
 = 
c⁄ãxt
;

315 
kØ_li°_node_t
 *
ô
 = 
	`kØ_li°_föd_√xt
(
	`kØ_li°_begö
(
£lf
->
logs
), 
föd_by_buckë_id
, &
buckë_id
);

316 
	`KAA_RETURN_IF_NIL
(
ô
, 
KAA_ERR_NOT_FOUND
);

318 
ô
) {

319 
£lf
->
tŸÆ_occupõd_size
 -((
ext_log_ªc‹d_t
 *)
	`kØ_li°_gë_d©a
(
ô
))->
size
;

321 
ô
 = 
	`kØ_li°_ªmove_©
(
£lf
->
logs
, it, &
log_ªc‹d_de°roy
);

322 
ô
 = 
	`kØ_li°_föd_√xt
(ô, &
föd_by_buckë_id
, &
buckë_id
);

325 i‡(!
	`kØ_li°_gë_size
(
£lf
->
logs
)) {

326 
£lf
->
fú°_unm¨ked
 = 
NULL
;

329  
KAA_ERR_NONE
;

330 
	}
}

334 
kØ_îr‹_t
 
	$ext_log_°‹age_unm¨k_by_buckë_id
(*
c⁄ãxt
, 
uöt16_t
 
buckë_id
)

336 
	`KAA_RETURN_IF_NIL
(
c⁄ãxt
, 
KAA_ERR_BADPARAM
);

337 
ext_log_°‹age_mem‹y_t
 *
£lf
 = 
c⁄ãxt
;

339 
kØ_li°_node_t
 *
ô
 = 
	`kØ_li°_föd_√xt
(
	`kØ_li°_begö
(
£lf
->
logs
), 
föd_by_buckë_id
, &
buckë_id
);

340 
	`KAA_RETURN_IF_NIL
(
ô
, 
KAA_ERR_NOT_FOUND
);

342 
ô
) {

343 
ext_log_ªc‹d_t
 *
log_ªc‹d
 = 
	`kØ_li°_gë_d©a
(
ô
);

345 
log_ªc‹d
->
m¨k
 = 
Ál£
;

346 
£lf
->
unm¨ked_ªc‹d_cou¡
++;

347 
£lf
->
unm¨ked_occupõd_size
 +
log_ªc‹d
->
size
;

349 
ô
 = 
	`kØ_li°_föd_√xt
(ô, &
föd_by_buckë_id
, &
buckë_id
);

352 
£lf
->
fú°_unm¨ked
 = 
NULL
;

354  
KAA_ERR_NONE
;

355 
	}
}

359 
size_t
 
	$ext_log_°‹age_gë_tŸÆ_size
(c⁄° *
c⁄ãxt
)

361 
	`KAA_RETURN_IF_NIL
(
c⁄ãxt
, 0);

362  ((
ext_log_°‹age_mem‹y_t
 *)
c⁄ãxt
)->
unm¨ked_occupõd_size
;

363 
	}
}

367 
size_t
 
	$ext_log_°‹age_gë_ªc‹ds_cou¡
(c⁄° *
c⁄ãxt
)

369 
	`KAA_RETURN_IF_NIL
(
c⁄ãxt
, 0);

370  ((
ext_log_°‹age_mem‹y_t
 *)
c⁄ãxt
)->
unm¨ked_ªc‹d_cou¡
;

371 
	}
}

375 
kØ_îr‹_t
 
	$ext_log_°‹age_de°roy
(*
c⁄ãxt
)

377 
	`KAA_RETURN_IF_NIL
(
c⁄ãxt
, 
KAA_ERR_BADPARAM
);

378 
ext_log_°‹age_mem‹y_t
 *
£lf
 = 
c⁄ãxt
;

379 
	`kØ_li°_de°roy
(
£lf
->
logs
, &
log_ªc‹d_de°roy
);

380 
	`KAA_FREE
(
£lf
);

381  
KAA_ERR_NONE
;

382 
	}
}

387 
	tmake_iso_compûîs_h≠py
;

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/common/ext_log_upload_strategies.c

17 #i‚de‡
KAA_DISABLE_FEATURE_LOGGING


19 
	~"kØ_¥iv©e.h
"

20 
	~"ext_log_u∂ﬂd_°øãgõs.h
"

21 
	~<∂©f‹m/ext_log_u∂ﬂd_°øãgy.h
>

22 
	~<∂©f‹m/ext_å™•‹t_ch™√l.h
>

23 
	~<∂©f‹m/time.h
>

24 
	~"utûôõs/kØ_mem.h
"

25 
	~"kØ_ch™√l_m™agî.h
"

30 
	#KAA_DEFAULT_UPLOAD_TIMEOUT
 2 * 60

	)

35 
	#KAA_DEFAULT_RETRY_PERIOD
 5 * 60

	)

40 
	#KAA_DEFAULT_UPLOAD_VOLUME_THRESHOLD
 8 * 1024

	)

45 
	#KAA_DEFAULT_UPLOAD_COUNT_THRESHOLD
 64

	)

50 
	#KAA_DEFAULT_MAX_PARALLEL_UPLOADS
 
INT32_MAX


	)

55 
uöt8_t
 
	mty≥
;

56 
size_t
 
	mthªshﬁd_vﬁume
;

57 
size_t
 
	mthªshﬁd_cou¡
;

58 
size_t
 
	mu∂ﬂd_timeout
;

59 
size_t
 
	mmax_∑øŒñ_u∂ﬂds
;

60 
size_t
 
	mtimeout
;

62 
size_t
 
	mlog_b©ch_size
;

63 
size_t
 
	mu∂ﬂd_ªåy_≥riod
;

65 
time_t
 
	mu∂ﬂd_ªåy_ts
;

67 
kØ_ch™√l_m™agî_t
 *
	mch™√l_m™agî
;

68 
kØ_boŸ°øp_m™agî_t
 *
	mboŸ°øp_m™agî
;

69 } 
	text_log_u∂ﬂd_°øãgy_t
;

75 
kØ_îr‹_t
 
	$ext_log_u∂ﬂd_°øãgy_¸óã
(
kØ_c⁄ãxt_s
 *
c⁄ãxt
, **
°øãgy_p
, 
uöt8_t
 
ty≥
)

77 
	`KAA_RETURN_IF_NIL5
(
°øãgy_p
, 
c⁄ãxt
, c⁄ãxt->
ch™√l_m™agî
, c⁄ãxt->
boŸ°øp_m™agî
, 
ty≥
, 
KAA_ERR_BADPARAM
);

79 
ext_log_u∂ﬂd_°øãgy_t
 *
°øãgy
 = (ext_log_u∂ﬂd_°øãgy_à*Ë
	`KAA_MALLOC
((ext_log_upload_strategy_t));

80 
	`KAA_RETURN_IF_NIL
(
°øãgy
, 
KAA_ERR_NOMEM
);

82 
	`KAA_RETURN_IF_ERR
–
	`ext_log_u∂ﬂd_°øãgy_£t_thªshﬁd_vﬁume
(
°øãgy
, 
KAA_DEFAULT_UPLOAD_VOLUME_THRESHOLD
) );

83 
	`KAA_RETURN_IF_ERR
–
	`ext_log_u∂ﬂd_°øãgy_£t_thªshﬁd_cou¡
(
°øãgy
, 
KAA_DEFAULT_UPLOAD_COUNT_THRESHOLD
) );

84 
	`KAA_RETURN_IF_ERR
–
	`ext_log_u∂ﬂd_°øãgy_£t_u∂ﬂd_timeout
(
°øãgy
, 
KAA_DEFAULT_UPLOAD_TIMEOUT
) );

85 
	`KAA_RETURN_IF_ERR
–
	`ext_log_u∂ﬂd_°øãgy_£t_u∂ﬂd_ªåy_≥riod
(
°øãgy
, 
KAA_DEFAULT_RETRY_PERIOD
) );

86 
	`KAA_RETURN_IF_ERR
–
	`ext_log_u∂ﬂd_°øãgy_£t_max_∑øŒñ_u∂ﬂds
(
°øãgy
, 
KAA_DEFAULT_MAX_PARALLEL_UPLOADS
) );

88 
°øãgy
->
ty≥
 =Åype;

89 
°øãgy
->
u∂ﬂd_ªåy_ts
 = 0;

90 
°øãgy
->
timeout
 = 
	`KAA_TIME
(Ë+ så©egy->
u∂ﬂd_timeout
;

92 
°øãgy
->
boŸ°øp_m™agî
 = 
c⁄ãxt
->bootstrap_manager;

93 
°øãgy
->
ch™√l_m™agî
 = 
c⁄ãxt
->channel_manager;

95 *
°øãgy_p
 = 
°øãgy
;

97  
KAA_ERR_NONE
;

98 
	}
}

102 
	$ext_log_u∂ﬂd_°øãgy_de°roy
(*
£lf
)

104 i‡(
£lf
)

105 
	`KAA_FREE
((
ext_log_u∂ﬂd_°øãgy_t
 *)
£lf
);

106 
	}
}

110 
ext_log_u∂ﬂd_decisi⁄_t
 
	$ext_log_u∂ﬂd_°øãgy_decide
(*
c⁄ãxt
, c⁄° *
log_°‹age_c⁄ãxt
)

112 
	`KAA_RETURN_IF_NIL2
(
c⁄ãxt
, 
log_°‹age_c⁄ãxt
, 
NOOP
);

114 
ext_log_u∂ﬂd_decisi⁄_t
 
decisi⁄
 = 
NOOP
;

115 
ext_log_u∂ﬂd_°øãgy_t
 *
£lf
 = (ext_log_u∂ﬂd_°øãgy_à*)
c⁄ãxt
;

117 i‡(
£lf
->
u∂ﬂd_ªåy_ts
) {

118 i‡(
	`KAA_TIME
(Ë>(
kØ_time_t
)
£lf
->
u∂ﬂd_ªåy_ts
) {

120 
£lf
->
u∂ﬂd_ªåy_ts
 = 0;

121 
decisi⁄
 = 
UPLOAD
;

123  
decisi⁄
;

126 i‡((
£lf
->
ty≥
 & 0x04Ë&& 
	`KAA_TIME
(Ë>(
kØ_time_t
)£lf->
timeout
) {

127 
decisi⁄
 = 
UPLOAD
;

128 
£lf
->
timeout
 = 
	`KAA_TIME
(Ë+ sñf->
u∂ﬂd_timeout
;

129 } i‡((
£lf
->
ty≥
 & 0x01Ë&& 
	`ext_log_°‹age_gë_tŸÆ_size
(
log_°‹age_c⁄ãxt
Ë>£lf->
thªshﬁd_vﬁume
) {

130 
decisi⁄
 = 
UPLOAD
;

131 } i‡((
£lf
->
ty≥
 & 0x02Ë&& 
	`ext_log_°‹age_gë_ªc‹ds_cou¡
(
log_°‹age_c⁄ãxt
Ë>£lf->
thªshﬁd_cou¡
) {

132 
decisi⁄
 = 
UPLOAD
;

135  
decisi⁄
;

136 
	}
}

138 
size_t
 
	$ext_log_u∂ﬂd_°øãgy_gë_timeout
(*
c⁄ãxt
)

140 
	`KAA_RETURN_IF_NIL
(
c⁄ãxt
, 0);

141  ((
ext_log_u∂ﬂd_°øãgy_t
 *)
c⁄ãxt
)->
u∂ﬂd_timeout
;

142 
	}
}

146 
size_t
 
	$ext_log_u∂ﬂd_°øãgy_gë_max_∑øŒñ_u∂ﬂds
(*
c⁄ãxt
)

148 
	`KAA_RETURN_IF_NIL
(
c⁄ãxt
, 0);

149  ((
ext_log_u∂ﬂd_°øãgy_t
 *)
c⁄ãxt
)->
max_∑øŒñ_u∂ﬂds
;

150 
	}
}

154 
kØ_îr‹_t
 
	$ext_log_u∂ﬂd_°øãgy_⁄_timeout
(*
c⁄ãxt
)

156 
	`KAA_RETURN_IF_NIL
(
c⁄ãxt
, 
KAA_ERR_BADPARAM
);

158 
ext_log_u∂ﬂd_°øãgy_t
 *
£lf
 = (ext_log_u∂ﬂd_°øãgy_à*)
c⁄ãxt
;

159 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√l
 = 
	`kØ_ch™√l_m™agî_gë_å™•‹t_ch™√l
(
£lf
->
ch™√l_m™agî


160 , 
KAA_EXTENSION_LOGGING
);

161 i‡(
ch™√l
) {

162 
£lf
->
u∂ﬂd_ªåy_ts
 = 0;

163 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 
¥Ÿocﬁ_id
;

164 
kØ_îr‹_t
 
îr‹_code
 = 
ch™√l
->
	`gë_¥Ÿocﬁ_id
(ch™√l->
c⁄ãxt
, &
¥Ÿocﬁ_id
);

165 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

166 
îr‹_code
 = 
	`kØ_boŸ°øp_m™agî_⁄_ac˚ss_poöt_Áûed
(
£lf
->
boŸ°øp_m™agî
,

167 &
¥Ÿocﬁ_id
,

168 
KAA_SERVER_OPERATIONS
,

169 
KAA_OPERATION_SERVERS_NA
);

170  
îr‹_code
;

173  
KAA_ERR_NOT_FOUND
;

174 
	}
}

178 
kØ_îr‹_t
 
	$ext_log_u∂ﬂd_°øãgy_⁄_Áûuª
(*
c⁄ãxt
, 
loggög_dñivîy_îr‹_code_t
 
îr‹_code
)

180 
	`KAA_RETURN_IF_NIL
(
c⁄ãxt
, 
KAA_ERR_BADPARAM
);

181 
ext_log_u∂ﬂd_°øãgy_t
 *
£lf
 = (ext_log_u∂ﬂd_°øãgy_à*)
c⁄ãxt
;

183 
îr‹_code
) {

184 
NO_APPENDERS_CONFIGURED
:

185 
APPENDER_INTERNAL_ERROR
:

186 
REMOTE_CONNECTION_ERROR
:

187 
REMOTE_INTERNAL_ERROR
:

188 
£lf
->
u∂ﬂd_ªåy_ts
 = 
	`KAA_TIME
(Ë+ sñf->
u∂ﬂd_ªåy_≥riod
;

194  
KAA_ERR_NONE
;

195 
	}
}

199 
kØ_îr‹_t
 
	$ext_log_u∂ﬂd_°øãgy_ch™ge_°øãgy
(*
°øãgy
, 
uöt8_t
 
ty≥
)

201 
	`KAA_RETURN_IF_NIL2
(
°øãgy
, 
ty≥
, 
KAA_ERR_BADPARAM
);

202 ((
ext_log_u∂ﬂd_°øãgy_t
 *)
°øãgy
)->
ty≥
 =Åype;

203  
KAA_ERR_NONE
;

204 
	}
}

206 
boﬁ
 
	$ext_log_u∂ﬂd_°øãgy_is_timeout_°øãgy
(*
°øãgy
)

208 
	`KAA_RETURN_IF_NIL
(
°øãgy
, 
KAA_ERR_BADPARAM
);

209 
ext_log_u∂ﬂd_°øãgy_t
 *
£lf
 = (ext_log_u∂ﬂd_°øãgy_à*)
°øãgy
;

210 i‡(
£lf
->
ty≥
 & 
TIMEOUT_FLAG
)

211  
åue
;

212  
Ál£
;

213 
	}
}

215 
kØ_îr‹_t
 
	$ext_log_u∂ﬂd_°øãgy_£t_thªshﬁd_vﬁume
(*
°øãgy
, 
size_t
 
thªshﬁd_vﬁume
)

217 
	`KAA_RETURN_IF_NIL2
(
°øãgy
, 
thªshﬁd_vﬁume
, 
KAA_ERR_BADPARAM
);

218 ((
ext_log_u∂ﬂd_°øãgy_t
 *)
°øãgy
)->
thªshﬁd_vﬁume
 =Åhreshold_volume;

219  
KAA_ERR_NONE
;

220 
	}
}

224 
kØ_îr‹_t
 
	$ext_log_u∂ﬂd_°øãgy_£t_thªshﬁd_cou¡
(*
°øãgy
, 
size_t
 
thªshﬁd_cou¡
)

226 
	`KAA_RETURN_IF_NIL2
(
°øãgy
, 
thªshﬁd_cou¡
, 
KAA_ERR_BADPARAM
);

227 ((
ext_log_u∂ﬂd_°øãgy_t
 *)
°øãgy
)->
thªshﬁd_cou¡
 =Åhreshold_count;

228  
KAA_ERR_NONE
;

229 
	}
}

233 
kØ_îr‹_t
 
	$ext_log_u∂ﬂd_°øãgy_£t_b©ch_size
(*
°øãgy
, 
size_t
 
log_b©ch_size
)

235 
	`KAA_RETURN_IF_NIL2
(
°øãgy
, 
log_b©ch_size
, 
KAA_ERR_BADPARAM
);

236 ((
ext_log_u∂ﬂd_°øãgy_t
 *)
°øãgy
)->
log_b©ch_size
 =Üog_batch_size;

237  
KAA_ERR_NONE
;

238 
	}
}

242 
kØ_îr‹_t
 
	$ext_log_u∂ﬂd_°øãgy_£t_u∂ﬂd_timeout
(*
°øãgy
, 
size_t
 
u∂ﬂd_timeout
)

244 
	`KAA_RETURN_IF_NIL2
(
°øãgy
, 
u∂ﬂd_timeout
, 
KAA_ERR_BADPARAM
);

245 ((
ext_log_u∂ﬂd_°øãgy_t
 *)
°øãgy
)->
u∂ﬂd_timeout
 = upload_timeout;

246 ((
ext_log_u∂ﬂd_°øãgy_t
 *)
°øãgy
)->
timeout
 = 
	`KAA_TIME
(Ë+ 
u∂ﬂd_timeout
;

247  
KAA_ERR_NONE
;

248 
	}
}

252 
kØ_îr‹_t
 
	$ext_log_u∂ﬂd_°øãgy_£t_max_∑øŒñ_u∂ﬂds
(*
°øãgy
, 
size_t
 
cou¡
)

254 
	`KAA_RETURN_IF_NIL2
(
°øãgy
, 
cou¡
, 
KAA_ERR_BADPARAM
);

255 ((
ext_log_u∂ﬂd_°øãgy_t
 *)
°øãgy
)->
max_∑øŒñ_u∂ﬂds
 = 
cou¡
;

256  
KAA_ERR_NONE
;

257 
	}
}

261 
kØ_îr‹_t
 
	$ext_log_u∂ﬂd_°øãgy_£t_u∂ﬂd_ªåy_≥riod
(*
°øãgy
, 
size_t
 
u∂ﬂd_ªåy_≥riod
)

263 
	`KAA_RETURN_IF_NIL2
(
°øãgy
, 
u∂ﬂd_ªåy_≥riod
, 
KAA_ERR_BADPARAM
);

264 ((
ext_log_u∂ﬂd_°øãgy_t
 *)
°øãgy
)->
u∂ﬂd_ªåy_≥riod
 = upload_retry_period;

265  
KAA_ERR_NONE
;

266 
	}
}

271 
	tmake_iso_compûîs_h≠py
;

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/common/ext_log_upload_strategies.h

17 #i‚de‡
KAA_EXT_LOG_UPLOAD_STRATEGIES_H_


18 
	#KAA_EXT_LOG_UPLOAD_STRATEGIES_H_


	)

20 
	~<°döt.h
>

21 
	~"kØ_comm⁄.h
"

23 #ifde‡
__˝lu•lus


27 
	#THRESHOLD_VOLUME_FLAG
 0x01

	)

28 
	#THRESHOLD_COUNT_FLAG
 0x02

	)

29 
	#TIMEOUT_FLAG
 0x04

	)

31 
	#KAA_LOG_UPLOAD_VOLUME_STRATEGY
 (
THRESHOLD_VOLUME_FLAG
 | 
THRESHOLD_COUNT_FLAG
)

	)

32 
	#KAA_LOG_UPLOAD_BY_TIMEOUT_STRATEGY
 (
TIMEOUT_FLAG
)

	)

33 
	#KAA_LOG_UPLOAD_BY_RECORD_COUNT
 (
THRESHOLD_COUNT_FLAG
)

	)

34 
	#KAA_LOG_UPLOAD_BY_RECORD_COUNT_AND_TIMELIMIT
 (
THRESHOLD_COUNT_FLAG
 | 
TIMEOUT_FLAG
)

	)

35 
	#KAA_LOG_UPLOAD_BY_STORAGE_SIZE
 (
THRESHOLD_VOLUME_FLAG
)

	)

36 
	#KAA_LOG_UPLOAD_BY_STORAGE_SIZE_AND_TIMELIMIT
 (
THRESHOLD_VOLUME_FLAG
 | 
TIMEOUT_FLAG
)

	)

39 
kØ_îr‹_t
 
ext_log_u∂ﬂd_°øãgy_ch™ge_°øãgy
(*
°øãgy
, 
uöt8_t
 
ty≥
);

48 
kØ_îr‹_t
 
ext_log_u∂ﬂd_°øãgy_£t_thªshﬁd_vﬁume
(*
°øãgy
, 
size_t
 
thªshﬁd_vﬁume
);

59 
kØ_îr‹_t
 
ext_log_u∂ﬂd_°øãgy_£t_thªshﬁd_cou¡
(*
°øãgy
, 
size_t
 
thªshﬁd_cou¡
);

70 
kØ_îr‹_t
 
ext_log_u∂ﬂd_°øãgy_£t_u∂ﬂd_timeout
(*
°øãgy
, 
size_t
 
u∂ﬂd_timeout
);

81 
kØ_îr‹_t
 
ext_log_u∂ﬂd_°øãgy_£t_max_∑øŒñ_u∂ﬂds
(*
°øãgy
, 
size_t
 
cou¡
);

91 
kØ_îr‹_t
 
ext_log_u∂ﬂd_°øãgy_£t_u∂ﬂd_ªåy_≥riod
(*
°øãgy
, 
size_t
 
u∂ﬂd_ªåy_≥riod
);

93 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/common/kaa_failover_strategy.c

17 
	~<time.h
>

18 
	~<°döt.h
>

19 
	~<°dio.h
>

20 
	~"kØ_comm⁄.h
"

21 
	~"utûôõs/kØ_mem.h
"

22 
	~"utûôõs/kØ_log.h
"

23 
	~"kØ_boŸ°øp_m™agî.h
"

24 
	~"∂©f‹m/ext_kØ_Áûovî_°øãgy.h
"

25 
	~"kØ_¥Ÿocﬁs/kØ_t˝/kØt˝_comm⁄.h
"

26 
	~"∂©f‹m/ext_kØ_Áûovî_°øãgy.h
"

27 
	~"kØ_c⁄ãxt.h
"

30 
	skØ_Áûovî_°øãgy_t
 {

31 
kØ_Áûovî_decisi⁄_t
 
	mdecisi⁄
;

32 
kØ_loggî_t
 *
	mloggî
;

35 
kØ_îr‹_t
 
	$kØ_Áûovî_°øãgy_¸óã
(
kØ_Áûovî_°øãgy_t
** 
°øãgy
, 
kØ_loggî_t
 *
loggî
)

37 
	`KAA_RETURN_IF_NIL2
(
°øãgy
, 
loggî
, 
KAA_ERR_BADPARAM
);

38 *
°øãgy
 = (
kØ_Áûovî_°øãgy_t
 *Ë
	`KAA_MALLOC
((kaa_failover_strategy_t));

39 
	`KAA_RETURN_IF_NIL
(*
°øãgy
, 
KAA_ERR_NOMEM
);

40 (*
°øãgy
)->
decisi⁄
.
a˘i⁄
 = 
KAA_USE_NEXT_BOOTSTRAP
;

41 (*
°øãgy
)->
decisi⁄
.
ªåy_≥riod
 = 
KAA_FAILOVER_RETRY_PERIOD
;

42 (*
°øãgy
)->
loggî
 =Üogger;

44  
KAA_ERR_NONE
;

45 
	}
}

47 
	$kØ_Áûovî_°øãgy_de°roy
(
kØ_Áûovî_°øãgy_t
* 
°øãgy
)

49 
	`KAA_RETURN_IF_NIL
(
°øãgy
,);

50 
	`KAA_FREE
(
°øãgy
);

51 
	}
}

53 
kØ_Áûovî_decisi⁄_t
 
	$kØ_Áûovî_°øãgy_⁄_Áûovî
(*
£lf
, 
kØ_Áûovî_ªas⁄
 
ªas⁄
)

55 
kØ_Áûovî_°øãgy_t
 *
°øãgy
 = 
£lf
;

57 
ªas⁄
) {

58 
KAA_BOOTSTRAP_SERVERS_NA
:

59 
°øãgy
->
decisi⁄
.
a˘i⁄
 = 
KAA_RETRY
;

62 
KAA_NO_OPERATION_SERVERS_RECEIVED
:

63 
°øãgy
->
decisi⁄
.
a˘i⁄
 = 
KAA_USE_NEXT_BOOTSTRAP
;

66 
KAA_OPERATION_SERVERS_NA
:

67 
°øãgy
->
decisi⁄
.
a˘i⁄
 = 
KAA_USE_NEXT_OPERATIONS
;

70 
KAA_NO_CONNECTIVITY
:

71 
°øãgy
->
decisi⁄
.
a˘i⁄
 = 
KAA_RETRY
;

74 
KAA_CHANNEL_NA
:

75 
KAA_CREDENTIALS_REVOKED
:

76 
KAA_ENDPOINT_NOT_REGISTERED
:

77 
°øãgy
->
decisi⁄
.
a˘i⁄
 = 
KAA_RETRY
;

81 
°øãgy
->
decisi⁄
.
a˘i⁄
 = 
KAA_NOOP
;

83  
°øãgy
->
decisi⁄
;

84 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/common/kaa_htonll.c

17 
	~"kØ_ht⁄Œ.h
"

19 
	#TYP_INIT
 0

	)

20 
	#TYP_SMLE
 1

	)

21 
	#TYP_BIGE
 2

	)

23 
uöt64_t
 
	$kØ_ht⁄Œ
(
uöt64_t
 
ho°l⁄gl⁄g
) {

24 
typ
 = 
TYP_INIT
;

25 
c
;

27 
uöt64_t
 
uŒ
;

28 
c
[8];

29 } 
x
;

30 i‡(
typ
 =
TYP_INIT
) {

31 
x
.
uŒ
 = 0x01;

32 
typ
 = (
x
.
c
[7] =0x01ULLË? 
TYP_BIGE
 : 
TYP_SMLE
;

34 i‡(
typ
 =
TYP_BIGE
)

35  
ho°l⁄gl⁄g
;

36 
x
.
uŒ
 = 
ho°l⁄gl⁄g
;

37 
c
 = 
x
.c[0]; x.c[0] = x.c[7]; x.c[7] = c;

38 
c
 = 
x
.c[1]; x.c[1] = x.c[6]; x.c[6] = c;

39 
c
 = 
x
.c[2]; x.c[2] = x.c[5]; x.c[5] = c;

40 
c
 = 
x
.c[3]; x.c[3] = x.c[4]; x.c[4] = c;

41  
x
.
uŒ
;

42 
	}
}

44 
uöt64_t
 
	$kØ_¡ohŒ
(
uöt64_t
 
√é⁄gl⁄g
)

46  
	`kØ_ht⁄Œ
(
√é⁄gl⁄g
);

47 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/common/kaa_htonll.h

17 #i‚de‡
KAA_HTONLL_H_


18 
	#KAA_HTONLL_H_


	)

20 
	~<°döt.h
>

22 #ifde‡
__˝lu•lus


26 
uöt64_t
 
kØ_ht⁄Œ
(uöt64_à
ho°l⁄gl⁄g
);

28 
uöt64_t
 
kØ_¡ohŒ
(uöt64_à
√é⁄gl⁄g
);

30 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/common/kaa_tcp_channel.c

17 
	~"kØ_¥iv©e.h
"

19 
	~<°dboﬁ.h
>

20 
	~<°döt.h
>

21 
	~<°ddef.h
>

22 
	~<°rög.h
>

23 
	~<time.h
>

24 
	~<°d¨g.h
>

26 
	~<∂©f‹m/°dio.h
>

28 
	~"kØ_comm⁄.h
"

29 
	~"utûôõs/kØ_mem.h
"

30 
	~"utûôõs/kØ_buf„r.h
"

31 
	~"utûôõs/kØ_log.h
"

32 
	~"kØ_¥Ÿocﬁs/kØ_t˝/kØt˝.h
"

33 
	~"∂©f‹m/ext_sy°em_loggî.h
"

34 
	~<∂©f‹m/time.h
>

35 
	~"kØ_∂©f‹m_comm⁄.h
"

36 
	~"∂©f‹m/ext_í¸y±i⁄_utûs.h
"

37 
	~"kØ_t˝_ch™√l.h
"

38 
	~"kØ_c⁄ãxt.h
"

39 
	~"kØ_ch™√l_m™agî.h
"

42 
	#KAA_TCP_CHANNEL_TRANSPORT_PROTOCOL_ID
 0x56c8ff92

	)

43 
	#KAA_TCP_CHANNEL_TRANSPORT_PROTOCOL_VERSION
 1

	)

49 
	mAP_UNDEFINED
 = 0,

50 
	mAP_NOT_SET
,

51 
	mAP_SET
,

52 
	mAP_IN_PROGRESS
,

53 
	mAP_RESOLVED
,

54 
	mAP_CONNECTING
,

55 
	mAP_CONNECTED
,

56 
	mAP_DISCONNECTED


57 } 
	tac˚ss_poöt_°©e_t
;

60 
	mKAA_TCP_CHANNEL_UNDEFINED
 = 0,

61 
	mKAA_TCP_CHANNEL_AUTHORIZING
,

62 
	mKAA_TCP_CHANNEL_AUTHORIZED
,

63 
	mKAA_TCP_CHANNEL_DISCONNECTING


64 } 
	tkØ_t˝_ch™√l_°©e_t
;

67 
	mKAA_TCP_CHANNEL_SYNC_OP_UNDEFINED
 = 0,

68 
	mKAA_TCP_CHANNEL_SYNC_OP_STARTED
,

69 
	mKAA_TCP_CHANNEL_SYNC_OP_FINISHED


70 } 
	tkØ_t˝_ch™√l_sync_°©e_t
;

73 
ac˚ss_poöt_°©e_t
 
	m°©e
;

74 
uöt32_t
 
	mid
;

75 
uöt8_t
 *
	mpublic_key
;

76 
uöt32_t
 
	mpublic_key_Àngth
;

77 *
	mho°«me
;

78 
uöt32_t
 
	mho°«me_Àngth
;

79 
uöt16_t
 
	mp‹t
;

80 
kØ_sockaddr_°‹age_t
 
	msockaddr
;

81 
kØ_sockÀn_t
 
	msockaddr_Àngth
;

82 
kØ_fd_t
 
	msockë_des¸ùt‹
;

83 } 
	tkØ_t˝_ac˚ss_poöt_t
;

86 
kØ_time_t
 
	mœ°_£¡_kì∑live
;

87 
kØ_time_t
 
	mœ°_ª˚ive_kì∑live
;

88 } 
	tkØ_t˝_kì∑live_t
 ;

91 
uöt8_t
 *
	m´s_£ssi⁄_key
;

92 
size_t
 
	m´s_£ssi⁄_key_size
;

93 
uöt8_t
 *
	msig«tuª
;

94 
size_t
 
	msig«tuª_size
;

95 } 
	tkØ_t˝_í¸y±_t
;

98 
kØ_loggî_t
 *
	mloggî
;

99 
kØ_t˝_ch™√l_°©e_t
 
	mch™√l_°©e
;

100 
kØ_t˝_ch™√l_sync_°©e_t
 
	msync_°©e
;

101 
kØ_£rvî_ty≥_t
 
	mch™√l_›î©i⁄_ty≥
;

102 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 
	m¥Ÿocﬁ_id
;

103 
kØ_å™•‹t_c⁄ãxt_t
 
	må™•‹t_c⁄ãxt
;

104 
⁄_kØ_t˝_ch™√l_evít_‚
 
	mevít_ˇŒback
;

105 *
	mevít_c⁄ãxt
;

106 
kØ_t˝_ac˚ss_poöt_t
 
	mac˚ss_poöt
;

107 
kØ_exãnsi⁄_id
 *
	m≥ndög_ªque°_£rvi˚s
;

108 
size_t
 
	m≥ndög_ªque°_£rvi˚_cou¡
;

109 
kØ_exãnsi⁄_id
 *
	msuµ‹ãd_£rvi˚s
;

110 
size_t
 
	msuµ‹ãd_£rvi˚_cou¡
;

111 
kØ_buf„r_t
 *
	mö_buf„r
;

112 
kØ_buf„r_t
 *
	mout_buf„r
;

113 
kØt˝_∑r£r_t
 *
	m∑r£r
;

114 
uöt16_t
 
	mmesßge_id
;

115 
kØ_t˝_kì∑live_t
 
	mkì∑live
;

116 
kØ_t˝_í¸y±_t
 
	mí¸y±i⁄
;

117 } 
	tkØ_t˝_ch™√l_t
;

119 
kØ_îr‹_t
 
kØ_t˝_ch™√l_gë_å™•‹t_¥Ÿocﬁ_öfo
(*
c⁄ãxt
, 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 *
¥Ÿocﬁ_öfo
);

120 
kØ_îr‹_t
 
kØ_t˝_ch™√l_gë_suµ‹ãd_£rvi˚s
(*
c⁄ãxt
, c⁄° 
kØ_exãnsi⁄_id
 **
suµ‹ãd_£rvi˚s
, 
size_t
 *
£rvi˚_cou¡
);

121 
kØ_îr‹_t
 
kØ_t˝_ch™√l_sync_h™dÀr
(*
c⁄ãxt
, c⁄° 
kØ_exãnsi⁄_id
 
£rvi˚s
[], 
size_t
 
£rvi˚_cou¡
);

122 
kØ_îr‹_t
 
kØ_t˝_ch™√l_de°roy_c⁄ãxt
(*
c⁄ãxt
);

123 
kØ_îr‹_t
 
kØ_t˝_ch™√l_öô
(*
c⁄ãxt
, 
kØ_å™•‹t_c⁄ãxt_t
 *
å™•‹t_c⁄ãxt
);

124 
kØ_îr‹_t
 
kØ_t˝_ch™√l_£t_ac˚ss_poöt
(*
c⁄ãxt
, 
kØ_ac˚ss_poöt_t
 *
ac˚ss_poöt
);

129 
kØ_t˝_ch™√l_c⁄«ck_mesßge_ˇŒback
(*
c⁄ãxt
, 
kØt˝_c⁄«ck_t
 
mesßge
);

130 
kØ_t˝_ch™√l_disc⁄√˘_mesßge_ˇŒback
(*
c⁄ãxt
, 
kØt˝_disc⁄√˘_t
 
mesßge
);

131 
kØ_t˝_ch™√l_kØsync_mesßge_ˇŒback
(*
c⁄ãxt
, 
kØt˝_kØsync_t
 *
mesßge
);

132 
kØ_t˝_ch™√l_pögª•_mesßge_ˇŒback
(*
c⁄ãxt
);

137 
kØ_îr‹_t
 
kØ_t˝_ch™√l_sockë_io_îr‹
(
kØ_t˝_ch™√l_t
 *
£lf
, 
kØ_Áûovî_ªas⁄
 
ªas⁄_code
);

138 
kØ_îr‹_t
 
kØ_t˝_ch™√l_auth‹ize
(
kØ_t˝_ch™√l_t
 *
£lf
);

139 
boﬁ
 
is_£rvi˚_≥ndög
(
kØ_t˝_ch™√l_t
 *
£lf
, c⁄° 
kØ_exãnsi⁄_id
 
£rvi˚
);

140 
kØ_îr‹_t
 
kØ_t˝_ch™√l_dñëe_≥ndög_£rvi˚s
(
kØ_t˝_ch™√l_t
 *
£lf
, c⁄° 
kØ_exãnsi⁄_id
 
£rvi˚s
[], 
size_t
 
£rvi˚_cou¡
);

141 
kØ_îr‹_t
 
kØ_t˝_ch™√l_upd©e_≥ndög_£rvi˚s
(
kØ_t˝_ch™√l_t
 *
£lf
, c⁄° 
kØ_exãnsi⁄_id
 
£rvi˚s
[], 
size_t
 
£rvi˚_cou¡
);

142 
kØ_îr‹_t
 
kØ_t˝_ch™√l_£t_ac˚ss_poöt_ho°«me_ªsﬁved
(*
c⁄ãxt
, c⁄° 
kØ_sockaddr_t
 *
addr
, 
kØ_sockÀn_t
 
addr_size
);

143 
kØ_îr‹_t
 
kØ_t˝_ch™√l_£t_ac˚ss_poöt_ho°«me_ªsﬁve_Áûed
(*
c⁄ãxt
);

144 
ölöe
 
uöt32_t
 
gë_uöt32_t
(c⁄° 
uöt8_t
 *
buf„r
);

145 
kØ_îr‹_t
 
kØ_t˝_ch™√l_c⁄√˘_ac˚ss_poöt
(
kØ_t˝_ch™√l_t
 *
£lf
);

146 
kØ_îr‹_t
 
kØ_t˝_ch™√l_ªÀa£_ac˚ss_poöt
(
kØ_t˝_ch™√l_t
 *
£lf
);

147 
kØ_îr‹_t
 
kØ_t˝_ch™√l_wrôe_≥ndög_£rvi˚s
(
kØ_t˝_ch™√l_t
 *
£lf
, 
kØ_exãnsi⁄_id
 *
£rvi˚
, 
size_t
 
£rvi˚s_cou¡
);

148 
kØ_îr‹_t
 
kØ_t˝_wrôe_buf„r
(
kØ_t˝_ch™√l_t
 *
£lf
);

149 
kØ_îr‹_t
 
kØ_t˝_ch™√l_pög
(
kØ_t˝_ch™√l_t
 *
£lf
);

150 
kØ_îr‹_t
 
kØ_t˝_ch™√l_disc⁄√˘_öã∫Æ
(
kØ_t˝_ch™√l_t
 *
£lf
, 
kØt˝_disc⁄√˘_ªas⁄_t
 
ªtu∫_code
);

155 
kØ_îr‹_t
 
	$kØ_t˝_ch™√l_¸óã
(
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
£lf
,

156 
kØ_loggî_t
 *
loggî
, 
kØ_exãnsi⁄_id
 *
suµ‹ãd_£rvi˚s
,

157 
size_t
 
suµ‹ãd_£rvi˚_cou¡
)

159 
	`KAA_RETURN_IF_NIL4
(
£lf
, 
loggî
, 
suµ‹ãd_£rvi˚s
, 
suµ‹ãd_£rvi˚_cou¡
, 
KAA_ERR_BADPARAM
);

161 
	`KAA_LOG_TRACE
(
loggî
, 
KAA_ERR_NONE
, "Kaa TCP channel creating....");

163 
kØ_îr‹_t
 
îr‹_code
 = 
KAA_ERR_NONE
;

167 
boﬁ
 
boŸ°øp_found
 = 
Ál£
;

169 
size_t
 
i
 = 0; i < 
suµ‹ãd_£rvi˚_cou¡
; i++) {

170 i‡(
suµ‹ãd_£rvi˚s
[
i
] =
KAA_EXTENSION_BOOTSTRAP
) {

171 
boŸ°øp_found
 = 
åue
;

176 i‡(
boŸ°øp_found
 && 
suµ‹ãd_£rvi˚_cou¡
 > 1) {

178 
	`KAA_LOG_ERROR
(
loggî
,
KAA_ERR_BADPARAM
,"Kaa TCP channel creating,Érror unsupported configuration, "

180 
	`KAA_RETURN_IF_ERR
(
KAA_ERR_BADPARAM
);

183 
kØ_t˝_ch™√l_t
 *
kØ_t˝_ch™√l
 = (kØ_t˝_ch™√l_à*Ë
	`KAA_CALLOC
(1, (kaa_tcp_channel_t));

184 
	`KAA_RETURN_IF_NIL
(
kØ_t˝_ch™√l
, 
KAA_ERR_NOMEM
);

186 
kØ_t˝_ch™√l
->
loggî
 =Üogger;

188 
kØ_t˝_ch™√l
->
ch™√l_°©e
 = 
KAA_TCP_CHANNEL_UNDEFINED
;

189 
kØ_t˝_ch™√l
->
ac˚ss_poöt
.
°©e
 = 
AP_NOT_SET
;

190 
kØ_t˝_ch™√l
->
ac˚ss_poöt
.
sockë_des¸ùt‹
 = 
KAA_TCP_SOCKET_NOT_SET
;

195 
kØ_t˝_ch™√l
->
suµ‹ãd_£rvi˚s
 = 
	`KAA_MALLOC
(
suµ‹ãd_£rvi˚_cou¡
 * (
kØ_exãnsi⁄_id
));

196 i‡(!
kØ_t˝_ch™√l
->
suµ‹ãd_£rvi˚s
) {

197 
	`KAA_LOG_ERROR
(
loggî
, 
KAA_ERR_NOMEM
, "FailedÅo copy supported services");

198 
	`kØ_t˝_ch™√l_de°roy_c⁄ãxt
(
kØ_t˝_ch™√l
);

199  
KAA_ERR_NOMEM
;

202 
kØ_t˝_ch™√l
->
suµ‹ãd_£rvi˚_cou¡
 = supported_service_count;

204 
	`mem˝y
(
kØ_t˝_ch™√l
->
suµ‹ãd_£rvi˚s
, suµ‹ãd_£rvi˚s, (
kØ_exãnsi⁄_id
Ë* 
suµ‹ãd_£rvi˚_cou¡
);

209 
kØ_t˝_ch™√l
->
ch™√l_›î©i⁄_ty≥
 = 
KAA_SERVER_OPERATIONS
;

210 i‡(
boŸ°øp_found
) {

211 
kØ_t˝_ch™√l
->
ch™√l_›î©i⁄_ty≥
 = 
KAA_SERVER_BOOTSTRAP
;

217 
îr‹_code
 = 
	`kØ_buf„r_¸óã_buf„r
(&
kØ_t˝_ch™√l
->
ö_buf„r
,

218 
KAA_TCP_CHANNEL_IN_BUFFER_SIZE
);

219 i‡(
îr‹_code
) {

220 
	`KAA_LOG_ERROR
(
loggî
, 
îr‹_code
, "FailedÅo create IN buffer for channel");

221 
	`kØ_t˝_ch™√l_de°roy_c⁄ãxt
(
kØ_t˝_ch™√l
);

222  
îr‹_code
;

224 
îr‹_code
 = 
	`kØ_buf„r_¸óã_buf„r
(&
kØ_t˝_ch™√l
->
out_buf„r
,

225 
KAA_TCP_CHANNEL_OUT_BUFFER_SIZE
);

226 i‡(
îr‹_code
) {

227 
	`KAA_LOG_ERROR
(
loggî
, 
îr‹_code
, "FailedÅo create OUT buffer for channel");

228 
	`kØ_t˝_ch™√l_de°roy_c⁄ãxt
(
kØ_t˝_ch™√l
);

229  
îr‹_code
;

235 
kØ_t˝_ch™√l
->
kì∑live
.
œ°_£¡_kì∑live
 = 
	`KAA_TIME
();

236 
kØ_t˝_ch™√l
->
kì∑live
.
œ°_ª˚ive_kì∑live
 = kØ_t˝_ch™√l->kì∑live.
œ°_£¡_kì∑live
;

238 
	`KAA_LOG_TRACE
(
loggî
, 
KAA_ERR_NONE
, "Kaa TCP channel keepalive is %u",

239 
KAA_TCP_CHANNEL_MAX_TIMEOUT
);

244 
kØ_t˝_ch™√l
->
¥Ÿocﬁ_id
.
id
 = 
KAA_TCP_CHANNEL_TRANSPORT_PROTOCOL_ID
;

245 
kØ_t˝_ch™√l
->
¥Ÿocﬁ_id
.
vîsi⁄
 = 
KAA_TCP_CHANNEL_TRANSPORT_PROTOCOL_VERSION
;

247 
	`KAA_LOG_TRACE
(
loggî
, 
KAA_ERR_NONE
, "Kaa TCP channel (protocol: id=0x%08X, version=%u)",

248 
kØ_t˝_ch™√l
->
¥Ÿocﬁ_id
.
id
, kØ_t˝_ch™√l->¥Ÿocﬁ_id.
vîsi⁄
);

253 
kØ_t˝_ch™√l
->
∑r£r
 = 
	`KAA_MALLOC
((
kØt˝_∑r£r_t
));

255 i‡(
kØ_t˝_ch™√l
->
∑r£r
) {

256 
kØ_t˝_ch™√l
->
∑r£r
->
∑ylﬂd_buf„r_size
 = 
KAATCP_PARSER_MAX_MESSAGE_LENGTH
;

257 
kØ_t˝_ch™√l
->
∑r£r
->
∑ylﬂd
 = 
	`KAA_MALLOC
(kØ_t˝_ch™√l->∑r£r->
∑ylﬂd_buf„r_size
);

260 i‡(!
kØ_t˝_ch™√l
->
∑r£r
 || !kØ_t˝_ch™√l->∑r£r->
∑ylﬂd
) {

261 
	`KAA_LOG_ERROR
(
loggî
, 
KAA_ERR_NOMEM
, "FailedÅo create Kaa TCPÖarser");

262 
	`kØ_t˝_ch™√l_de°roy_c⁄ãxt
(
kØ_t˝_ch™√l
);

263  
KAA_ERR_NOMEM
;

266 
kØt˝_∑r£r_h™dÀrs_t
 
∑r£r_h™dÀr
;

268 
∑r£r_h™dÀr
.
c⁄«ck_h™dÀr
 = 
kØ_t˝_ch™√l_c⁄«ck_mesßge_ˇŒback
;

269 
∑r£r_h™dÀr
.
disc⁄√˘_h™dÀr
 = 
kØ_t˝_ch™√l_disc⁄√˘_mesßge_ˇŒback
;

270 
∑r£r_h™dÀr
.
kØsync_h™dÀr
 = 
kØ_t˝_ch™√l_kØsync_mesßge_ˇŒback
;

271 
∑r£r_h™dÀr
.
pögª•_h™dÀr
 = 
kØ_t˝_ch™√l_pögª•_mesßge_ˇŒback
;

272 
∑r£r_h™dÀr
.
h™dÀrs_c⁄ãxt
 = 
kØ_t˝_ch™√l
;

274 
kØt˝_îr‹_t
 
∑r£r_îr‹_code
 = 
	`kØt˝_∑r£r_öô
(
kØ_t˝_ch™√l
->
∑r£r
, &
∑r£r_h™dÀr
);

275 i‡(
∑r£r_îr‹_code
) {

276 
	`KAA_LOG_ERROR
(
loggî
, 
KAA_ERR_TCPCHANNEL_PARSER_INIT_FAILED
, "FaûedÅÿöôülizêKØ TCPÖ¨£∏”º‹_codê%d)", 
∑r£r_îr‹_code
);

277 
	`kØ_t˝_ch™√l_de°roy_c⁄ãxt
(
kØ_t˝_ch™√l
);

278  
KAA_ERR_TCPCHANNEL_PARSER_INIT_FAILED
;

284 
£lf
->
c⁄ãxt
 = 
kØ_t˝_ch™√l
;

285 
£lf
->
gë_¥Ÿocﬁ_id
 = 
kØ_t˝_ch™√l_gë_å™•‹t_¥Ÿocﬁ_öfo
;

286 
£lf
->
gë_suµ‹ãd_£rvi˚s
 = 
kØ_t˝_ch™√l_gë_suµ‹ãd_£rvi˚s
;

287 
£lf
->
de°roy
 = 
kØ_t˝_ch™√l_de°roy_c⁄ãxt
;

288 
£lf
->
sync_h™dÀr
 = 
kØ_t˝_ch™√l_sync_h™dÀr
;

289 
£lf
->
öô
 = 
kØ_t˝_ch™√l_öô
;

290 
£lf
->
£t_ac˚ss_poöt
 = 
kØ_t˝_ch™√l_£t_ac˚ss_poöt
;

292 
	`KAA_LOG_TRACE
(
loggî
, 
KAA_ERR_NONE
, "Kaa TCP channel created");

294  
îr‹_code
;

295 
	}
}

299 
kØ_îr‹_t
 
	$kØ_t˝_ch™√l_⁄_ac˚ss_poöt_Áûed
(
kØ_t˝_ch™√l_t
 *
£lf
, 
kØ_Áûovî_ªas⁄
 
ªas⁄_code
)

301 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_boŸ°øp_m™agî_⁄_ac˚ss_poöt_Áûed
(
£lf
->
å™•‹t_c⁄ãxt
.
kØ_c⁄ãxt
->
boŸ°øp_m™agî
,

302 &
£lf
->
¥Ÿocﬁ_id
, sñf->
ch™√l_›î©i⁄_ty≥
, 
ªas⁄_code
);

304 i‡(
îr‹_code
 !
KAA_ERR_EVENT_NOT_ATTACHED
) {

305 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹_code
, "Kaa TCP channel [0x%08X] "

307 
£lf
->
ac˚ss_poöt
.
id
);

309  
îr‹_code
;

310 
	}
}

317 
kØ_îr‹_t
 
	$kØ_t˝_ch™√l_gë_å™•‹t_¥Ÿocﬁ_öfo
(*
c⁄ãxt
, 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 *
¥Ÿocﬁ_öfo
)

319 
	`KAA_RETURN_IF_NIL2
(
c⁄ãxt
, 
¥Ÿocﬁ_öfo
, 
KAA_ERR_BADPARAM
);

320 
kØ_t˝_ch™√l_t
 *
ch™√l
 = (kØ_t˝_ch™√l_à*Ë
c⁄ãxt
;

321 *
¥Ÿocﬁ_öfo
 = 
ch™√l
->
¥Ÿocﬁ_id
;

322  
KAA_ERR_NONE
;

323 
	}
}

330 
kØ_îr‹_t
 
	$kØ_t˝_ch™√l_gë_suµ‹ãd_£rvi˚s
(*
c⁄ãxt
, c⁄° 
kØ_exãnsi⁄_id
 **
suµ‹ãd_£rvi˚s
, 
size_t
 *
£rvi˚_cou¡
)

332 
	`KAA_RETURN_IF_NIL3
(
c⁄ãxt
, 
suµ‹ãd_£rvi˚s
, 
£rvi˚_cou¡
, 
KAA_ERR_BADPARAM
);

333 
kØ_t˝_ch™√l_t
 *
ch™√l
 = (kØ_t˝_ch™√l_à*Ë
c⁄ãxt
;

335 *
suµ‹ãd_£rvi˚s
 = 
ch™√l
->supported_services;

336 *
£rvi˚_cou¡
 = 
ch™√l
->
suµ‹ãd_£rvi˚_cou¡
;

338  
KAA_ERR_NONE
;

339 
	}
}

346 
kØ_îr‹_t
 
	$kØ_t˝_ch™√l_sync_h™dÀr
(*
c⁄ãxt
, c⁄° 
kØ_exãnsi⁄_id
 
£rvi˚s
[], 
size_t
 
£rvi˚_cou¡
)

348 
	`KAA_RETURN_IF_NIL
(
c⁄ãxt
, 
KAA_ERR_BADPARAM
);

349 
kØ_îr‹_t
 
îr‹_code
 = 
KAA_ERR_NONE
;

351 
	`KAA_LOG_TRACE
(((
kØ_t˝_ch™√l_t
 *Ë
c⁄ãxt
)->
loggî
, 
KAA_ERR_NONE
, "Kaa TCP channel [0x%08X] sync for %zu services",

352 ((
kØ_t˝_ch™√l_t
 *Ë
c⁄ãxt
)->
ac˚ss_poöt
.
id
, 
£rvi˚_cou¡
);

354 i‡(
£rvi˚s
 && 
£rvi˚_cou¡
 > 0) {

355 
îr‹_code
 = 
	`kØ_t˝_ch™√l_upd©e_≥ndög_£rvi˚s
((
kØ_t˝_ch™√l_t
 *Ë
c⁄ãxt
, 
£rvi˚s
, 
£rvi˚_cou¡
);

356 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

360 i‡(((
kØ_t˝_ch™√l_t
 *Ë
c⁄ãxt
)->
ac˚ss_poöt
.
°©e
 =
AP_RESOLVED


361 && ((
kØ_t˝_ch™√l_t
 *Ë
c⁄ãxt
)->
≥ndög_ªque°_£rvi˚_cou¡
 > 0

362 && ((
kØ_t˝_ch™√l_t
 *Ë
c⁄ãxt
)->
ch™√l_°©e
 =
KAA_TCP_CHANNEL_UNDEFINED
) {

363 
	`KAA_LOG_INFO
(((
kØ_t˝_ch™√l_t
 *Ë
c⁄ãxt
)->
loggî
, 
KAA_ERR_NONE
, "Kaa TCP channel [0x%08X] connection down butáccessÖointÑesolved,ÅryingÅo connect....",

364 ((
kØ_t˝_ch™√l_t
 *Ë
c⁄ãxt
)->
ac˚ss_poöt
.
id
);

365 
îr‹_code
 = 
	`kØ_t˝_ch™√l_c⁄√˘_ac˚ss_poöt
(((
kØ_t˝_ch™√l_t
 *Ë
c⁄ãxt
));

366 i‡(
îr‹_code
) {

367 
	`KAA_LOG_ERROR
(((
kØ_t˝_ch™√l_t
 *Ë
c⁄ãxt
)->
loggî
, 
îr‹_code
, "Kaa TCP channel [0x%08X] failedÅo connect",

368 ((
kØ_t˝_ch™√l_t
 *Ë
c⁄ãxt
)->
ac˚ss_poöt
.
id
);

369 i‡(((
kØ_t˝_ch™√l_t
 *Ë
c⁄ãxt
)->
evít_ˇŒback
)

370 ((
kØ_t˝_ch™√l_t
 *Ë
c⁄ãxt
)->
	`evít_ˇŒback
(((kØ_t˝_ch™√l_à*Ëc⁄ãxt)->
evít_c⁄ãxt
,

371 
SOCKET_CONNECTION_ERROR
,((
kØ_t˝_ch™√l_t
 *Ë
c⁄ãxt
)->
ac˚ss_poöt
.
sockë_des¸ùt‹
);

373 
îr‹_code
 = 
	`kØ_t˝_ch™√l_⁄_ac˚ss_poöt_Áûed
(
c⁄ãxt
, 
KAA_CHANNEL_NA
);

377  
îr‹_code
;

378 
	}
}

385 
kØ_îr‹_t
 
	$kØ_t˝_ch™√l_de°roy_c⁄ãxt
(*
c⁄ãxt
)

387 
	`KAA_RETURN_IF_NIL
(
c⁄ãxt
, 
KAA_ERR_BADPARAM
);

389 
kØ_t˝_ch™√l_t
 *
ch™√l
 = (kØ_t˝_ch™√l_à*Ë
c⁄ãxt
;

390 
kØ_îr‹_t
 
îr‹_code
 = 
KAA_ERR_NONE
;

392 i‡(
ch™√l
->
∑r£r
) {

393 
	`KAA_FREE
(
ch™√l
->
∑r£r
->
∑ylﬂd
);

394 
	`KAA_FREE
(
ch™√l
->
∑r£r
);

395 
ch™√l
->
∑r£r
 = 
NULL
;

398 
	`kØ_t˝_ch™√l_ªÀa£_ac˚ss_poöt
(
ch™√l
);

400 
	`kØ_buf„r_de°roy
(
ch™√l
->
ö_buf„r
);

401 
	`kØ_buf„r_de°roy
(
ch™√l
->
out_buf„r
);

403 
	`KAA_FREE
(
ch™√l
->
≥ndög_ªque°_£rvi˚s
);

404 
ch™√l
->
≥ndög_ªque°_£rvi˚s
 = 
NULL
;

406 
	`KAA_FREE
(
ch™√l
->
suµ‹ãd_£rvi˚s
);

407 
ch™√l
->
suµ‹ãd_£rvi˚s
 = 
NULL
;

408 
ch™√l
->
suµ‹ãd_£rvi˚_cou¡
 = 0;

410 i‡(
ch™√l
->
í¸y±i⁄
.
´s_£ssi⁄_key
) {

411 
ch™√l
->
í¸y±i⁄
.
´s_£ssi⁄_key
 = 
NULL
;

412 
ch™√l
->
í¸y±i⁄
.
´s_£ssi⁄_key_size
 = 0;

415 i‡(
ch™√l
->
í¸y±i⁄
.
sig«tuª
) {

416 
ch™√l
->
í¸y±i⁄
.
sig«tuª
 = 
NULL
;

417 
ch™√l
->
í¸y±i⁄
.
sig«tuª_size
 = 0;

420 
ch™√l
->
ac˚ss_poöt
.
°©e
 = 
AP_UNDEFINED
;

422 
	`KAA_FREE
(
c⁄ãxt
);

424  
îr‹_code
;

425 
	}
}

432 
kØ_îr‹_t
 
	$kØ_t˝_ch™√l_öô
(*
c⁄ãxt
, 
kØ_å™•‹t_c⁄ãxt_t
 *
å™•‹t_c⁄ãxt
)

434 
	`KAA_RETURN_IF_NIL3
(
c⁄ãxt
, 
å™•‹t_c⁄ãxt
,Åøn•‹t_c⁄ãxt->
kØ_c⁄ãxt
, 
KAA_ERR_BADPARAM
);

435 
kØ_t˝_ch™√l_t
 *
ch™√l
 = (kØ_t˝_ch™√l_à*Ë
c⁄ãxt
;

436 
ch™√l
->
å™•‹t_c⁄ãxt
 = *transport_context;

437  
KAA_ERR_NONE
;

438 
	}
}

447 
kØ_îr‹_t
 
	$kØ_t˝_ch™√l_£t_ac˚ss_poöt
(*
c⁄ãxt
, 
kØ_ac˚ss_poöt_t
 *
ac˚ss_poöt
)

449 i‡(!
c⁄ãxt
 || !
ac˚ss_poöt
) {

450  
KAA_ERR_BADPARAM
;

453 
kØ_t˝_ch™√l_t
 *
ch™√l
 = (kØ_t˝_ch™√l_à*Ë
c⁄ãxt
;

455 
kØ_îr‹_t
 
îr‹
 = 
KAA_ERR_NONE
;

457 
	`KAA_LOG_TRACE
(
ch™√l
->
loggî
, 
KAA_ERR_NONE
, "Kaa TCP channel settingáccessÖoint...");

458 i‡(
ch™√l
->
ac˚ss_poöt
.
°©e
 !
AP_NOT_SET
) {

459 
	`KAA_LOG_TRACE
(
ch™√l
->
loggî
, 
KAA_ERR_NONE
, "KØ TCP ch™√»ªmovögÖªviou†ac˚s†poöà[0x%08X] ", ch™√l->
ac˚ss_poöt
.
id
);

460 
îr‹
 = 
	`kØ_t˝_ch™√l_ªÀa£_ac˚ss_poöt
(
ch™√l
);

461 i‡(
îr‹
) {

462  
îr‹
;

466 
ch™√l
->
ac˚ss_poöt
.
°©e
 = 
AP_SET
;

467 
ch™√l
->
ac˚ss_poöt
.
id
 =áccess_point->id;

469 
ch™√l
->
ac˚ss_poöt
.
public_key
 = 
NULL
;

470 
ch™√l
->
ac˚ss_poöt
.
ho°«me
 = 
NULL
;

472 
	`KAA_LOG_TRACE
(
ch™√l
->
loggî
, 
KAA_ERR_NONE
, "Kaa TCP channelÇewáccessÖoint [0x%08X], connection dataÜength %u",

473 
ch™√l
->
ac˚ss_poöt
.
id
,ác˚ss_poöt->
c⁄√˘i⁄_d©a_Àn
);

475 
uöt8_t
 *
c⁄√˘i⁄_d©a
 = (uöt8_à*)
ac˚ss_poöt
->connection_data;

476 
size_t
 
c⁄√˘i⁄_d©a_Àn
 = 
ac˚ss_poöt
->connection_data_len;

477 
size_t
 
posôi⁄
 = 0;

480 
size_t
 
ªmaöög_to_ªad
 = (
uöt32_t
);

483 i‡((
posôi⁄
 + 
ªmaöög_to_ªad
Ë> 
c⁄√˘i⁄_d©a_Àn
) {

484 
îr‹
 = 
KAA_ERR_INSUFFICIENT_BUFFER
;

485 
˛ónup
;

487 
ch™√l
->
ac˚ss_poöt
.
public_key_Àngth
 = 
	`gë_uöt32_t
(
c⁄√˘i⁄_d©a
);

488 
posôi⁄
 +
ªmaöög_to_ªad
;

491 
ªmaöög_to_ªad
 = 
ch™√l
->
ac˚ss_poöt
.
public_key_Àngth
;

492 i‡((
posôi⁄
 + 
ªmaöög_to_ªad
Ë> 
c⁄√˘i⁄_d©a_Àn
) {

493 
îr‹
 = 
KAA_ERR_INSUFFICIENT_BUFFER
;

494 
˛ónup
;

496 
ch™√l
->
ac˚ss_poöt
.
public_key
 = 
	`KAA_MALLOC
(ch™√l->ac˚ss_poöt.
public_key_Àngth
);

497 i‡(!
ch™√l
->
ac˚ss_poöt
.
public_key
) {

498 
îr‹
 = 
KAA_ERR_NOMEM
;

499 
˛ónup
;

501 
	`mem˝y
(
ch™√l
->
ac˚ss_poöt
.
public_key
, 
c⁄√˘i⁄_d©a
 + 
posôi⁄
, 
ªmaöög_to_ªad
);

502 
posôi⁄
 +
ªmaöög_to_ªad
;

505 
ªmaöög_to_ªad
 = (
uöt32_t
);

506 i‡((
posôi⁄
 + 
ªmaöög_to_ªad
Ë> 
c⁄√˘i⁄_d©a_Àn
) {

507 
îr‹
 = 
KAA_ERR_INSUFFICIENT_BUFFER
;

508 
˛ónup
;

510 
ch™√l
->
ac˚ss_poöt
.
ho°«me_Àngth
 = 
	`gë_uöt32_t
(
c⁄√˘i⁄_d©a
 + 
posôi⁄
);

511 
posôi⁄
 +
ªmaöög_to_ªad
;

514 
ªmaöög_to_ªad
 = 
ch™√l
->
ac˚ss_poöt
.
ho°«me_Àngth
;

515 i‡((
posôi⁄
 + 
ªmaöög_to_ªad
Ë> 
c⁄√˘i⁄_d©a_Àn
) {

516 
îr‹
 = 
KAA_ERR_INSUFFICIENT_BUFFER
;

517 
˛ónup
;

519 
ch™√l
->
ac˚ss_poöt
.
ho°«me
 = 
	`KAA_MALLOC
(ch™√l->ac˚ss_poöt.
ho°«me_Àngth
);

520 i‡(!
ch™√l
->
ac˚ss_poöt
.
ho°«me
) {

521 
îr‹
 = 
KAA_ERR_NOMEM
;

522 
˛ónup
;

525 
	`mem˝y
(
ch™√l
->
ac˚ss_poöt
.
ho°«me
, 
c⁄√˘i⁄_d©a
 + 
posôi⁄
, 
ªmaöög_to_ªad
);

526 
posôi⁄
 +
ªmaöög_to_ªad
;

529 
ªmaöög_to_ªad
 = (
uöt32_t
);

530 
ac˚ss_poöt_sockë_p‹t
 = 0;

531 i‡((
posôi⁄
 + 
ªmaöög_to_ªad
Ë> 
c⁄√˘i⁄_d©a_Àn
) {

532 
îr‹
 = 
KAA_ERR_INSUFFICIENT_BUFFER
;

533 
˛ónup
;

535 
ac˚ss_poöt_sockë_p‹t
 = (
uöt16_t
Ë
	`gë_uöt32_t
(
c⁄√˘i⁄_d©a
 + 
posôi⁄
);

536 
posôi⁄
 +
ªmaöög_to_ªad
;

537 
ch™√l
->
ac˚ss_poöt
.
p‹t
 = (
uöt16_t
Ë
ac˚ss_poöt_sockë_p‹t
;

539 
	`KAA_LOG_TRACE
(
ch™√l
->
loggî
, 
KAA_ERR_NONE
, "Kaa TCP channelÇewáccessÖoint [0x%08X] destination %.*s:%d",

540 
ch™√l
->
ac˚ss_poöt
.
id
, ch™√l->ac˚ss_poöt.
ho°«me_Àngth
,

541 
ch™√l
->
ac˚ss_poöt
.
ho°«me
, 
ac˚ss_poöt_sockë_p‹t
);

543 #ifde‡
KAA_ENCRYPTION


545 
îr‹
 = 
	`ext_gë_í¸y±ed_£ssi⁄_key
(&
ch™√l
->
í¸y±i⁄
.
´s_£ssi⁄_key
,

546 &
ch™√l
->
í¸y±i⁄
.
´s_£ssi⁄_key_size
,

547 
ch™√l
->
ac˚ss_poöt
.
public_key
,

548 
ch™√l
->
ac˚ss_poöt
.
public_key_Àngth
);

550 i‡(
îr‹
) {

551 
	`KAA_LOG_ERROR
(
ch™√l
->
loggî
, 
îr‹
, "Can't get session key");

552 
˛ónup
;

556 i‡(*
ch™√l
->
suµ‹ãd_£rvi˚s
 !
KAA_EXTENSION_BOOTSTRAP
) {

557 
îr‹
 = 
	`ext_gë_sig«tuª
(
ch™√l
->
í¸y±i⁄
.
´s_£ssi⁄_key
, ch™√l->í¸y±i⁄.
´s_£ssi⁄_key_size
,

558 &
ch™√l
->
í¸y±i⁄
.
sig«tuª
, &ch™√l->í¸y±i⁄.
sig«tuª_size
);

559 i‡(
îr‹
) {

560 
	`KAA_LOG_ERROR
(
ch™√l
->
loggî
, 
îr‹
, "Can't get signature");

561 
˛ónup
;

565  
îr‹
;

567 
˛ónup
:

568 
	`KAA_FREE
(
ch™√l
->
ac˚ss_poöt
.
public_key
);

569 
	`KAA_FREE
(
ch™√l
->
ac˚ss_poöt
.
ho°«me
);

570  
îr‹
;

571 
	}
}

575 
kØ_îr‹_t
 
	$kØ_t˝_ch™√l_gë_des¸ùt‹
(
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
£lf
,

576 
kØ_fd_t
 *
fd_p
)

578 
	`KAA_RETURN_IF_NIL3
(
£lf
, 
fd_p
, sñf->
c⁄ãxt
, 
KAA_ERR_BADPARAM
);

579 
kØ_t˝_ch™√l_t
 *
t˝_ch™√l
 = (kØ_t˝_ch™√l_à*Ë
£lf
->
c⁄ãxt
;

581 *
fd_p
 = 
t˝_ch™√l
->
ac˚ss_poöt
.
sockë_des¸ùt‹
;

583  
KAA_ERR_NONE
;

584 
	}
}

588 
boﬁ
 
	$kØ_t˝_ch™√l_is_ªady
(
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
£lf
,

589 
fd_evít_t
 
evít_ty≥
)

591 
	`KAA_RETURN_IF_NIL2
(
£lf
, sñf->
c⁄ãxt
, 
Ál£
);

592 
kØ_t˝_ch™√l_t
 *
t˝_ch™√l
 = (kØ_t˝_ch™√l_à*Ë
£lf
->
c⁄ãxt
;

594 
kØ_îr‹_t
 
îr‹_code
 = 
KAA_ERR_NONE
;

596 
evít_ty≥
) {

597 
FD_READ
:

598 
	`KAA_LOG_TRACE_LDB
(
t˝_ch™√l
->
loggî
, 
KAA_ERR_NONE
, "Kaa TCP channel [0x%08X] checking socket forÉvent READ, AP=%d, CH=%d"

599 , 
t˝_ch™√l
->
ac˚ss_poöt
.
id


600 , 
t˝_ch™√l
->
ac˚ss_poöt
.
°©e


601 , 
t˝_ch™√l
->
ch™√l_°©e
);

602 i‡(
t˝_ch™√l
->
ac˚ss_poöt
.
°©e
 =
AP_CONNECTED
) {

603 *
buf
 = 
NULL
;

604 
size_t
 
buf_size
 = 0;

605 
îr‹_code
 = 
	`kØ_buf„r_Æloˇã_•a˚
(
t˝_ch™√l
->
ö_buf„r
, &
buf
, &
buf_size
);

606 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

607 i‡(
buf_size
 > 0) {

608  
åue
;

612 
FD_WRITE
:

613 
	`KAA_LOG_TRACE_LDB
(
t˝_ch™√l
->
loggî
, 
KAA_ERR_NONE
, "Kaa TCP channel [0x%08X] checking socket forÉvent WRITE"

614 , 
t˝_ch™√l
->
ac˚ss_poöt
.
id
);

615 i‡(
t˝_ch™√l
->
ac˚ss_poöt
.
°©e
 =
AP_CONNECTING
) {

616  
åue
;

617 } i‡(
t˝_ch™√l
->
ac˚ss_poöt
.
°©e
 =
AP_CONNECTED
) {

619 i‡(
t˝_ch™√l
->
≥ndög_ªque°_£rvi˚_cou¡
 > 0) {

620 i‡(
	`is_£rvi˚_≥ndög
(
t˝_ch™√l
, 
KAA_EXTENSION_BOOTSTRAP
)

621 || 
t˝_ch™√l
->
ch™√l_°©e
 =
KAA_TCP_CHANNEL_AUTHORIZED
) {

622  
åue
;

626 *
buf
 = 
NULL
;

627 
size_t
 
buf_size
 = 0;

628 
îr‹_code
 = 
	`kØ_buf„r_gë_u≈ro˚s£d_•a˚
(
t˝_ch™√l
->
out_buf„r
, &
buf
, &
buf_size
);

629 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

630 i‡(
buf_size
 > 0) {

631  
åue
;

635 
FD_EXCEPTION
:

636 
	`KAA_LOG_TRACE_LDB
(
t˝_ch™√l
->
loggî
, 
KAA_ERR_NONE
, "Kaa TCP channel [0x%08X] checking socket forÉvent EXCEPTION"

637 , 
t˝_ch™√l
->
ac˚ss_poöt
.
id
);

638 i‡(
t˝_ch™√l
->
ac˚ss_poöt
.
sockë_des¸ùt‹
 > 
KAA_TCP_SOCKET_NOT_SET
) {

639  
åue
;

644  
Ál£
;

645 
	}
}

647 
kØ_îr‹_t
 
	$kØ_t˝_ch™√l_¥o˚ss_evít
(
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
£lf
,

648 
fd_evít_t
 
evít_ty≥
)

650 
	`KAA_RETURN_IF_NIL2
(
£lf
, sñf->
c⁄ãxt
, 
KAA_ERR_BADPARAM
);

652 
kØ_t˝_ch™√l_t
 *
t˝_ch™√l
 = (kØ_t˝_ch™√l_à*Ë
£lf
->
c⁄ãxt
;

654 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_t˝_ch™√l_check_kì∑live
(
£lf
);

655 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

657 
kØ_fd_t
 
fd
 = 
t˝_ch™√l
->
ac˚ss_poöt
.
sockë_des¸ùt‹
;

659 
evít_ty≥
) {

660 
FD_READ
:

661 
	`KAA_LOG_TRACE_LDB
(
t˝_ch™√l
->
loggî
, 
KAA_ERR_NONE
, "Kaa TCP channel [0x%08X]ÖrocessingÉvent READ"

662 , 
t˝_ch™√l
->
ac˚ss_poöt
.
id
);

663 i‡(
t˝_ch™√l
->
ac˚ss_poöt
.
°©e
 =
AP_CONNECTED
) {

664 *
buf
 = 
NULL
;

665 
size_t
 
buf_size
 = 0;

666 
size_t
 
byãs_ªad
 = 0;

667 
îr‹_code
 = 
	`kØ_buf„r_Æloˇã_•a˚
(
t˝_ch™√l
->
ö_buf„r
, &
buf
, &
buf_size
);

668 i‡(
îr‹_code
) {

669 
	`KAA_LOG_ERROR
(
t˝_ch™√l
->
loggî
, 
îr‹_code
, "Kaa TCP channel [0x%08X]Érrorállocate space %zu"

670 , 
t˝_ch™√l
->
ac˚ss_poöt
.
id
, 
buf_size
);

672 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

673 i‡(
buf_size
 > 0) {

675 
ext_t˝_sockë_io_îr‹s_t
 
io_îr‹
 = 
	`ext_t˝_utûs_t˝_sockë_ªad
(
fd
, 
buf
, 
buf_size
, &
byãs_ªad
);

677 
io_îr‹
) {

678 
KAA_TCP_SOCK_IO_OK
:

679 
	`KAA_LOG_TRACE
(
t˝_ch™√l
->
loggî
, 
KAA_ERR_NONE
, "Kaa TCP channel [0x%08X] successfullyÑead %zu bytes"

680 , 
t˝_ch™√l
->
ac˚ss_poöt
.
id
, 
byãs_ªad
);

681 
îr‹_code
 = 
	`kØ_buf„r_lock_•a˚
(
t˝_ch™√l
->
ö_buf„r
, 
byãs_ªad
);

682 i‡(
îr‹_code
) {

683 
	`KAA_LOG_ERROR
(
t˝_ch™√l
->
loggî
, 
îr‹_code
, "Kaa TCP channel [0x%08X]ÉrrorÜock %zu bytes in buffer"

684 , 
t˝_ch™√l
->
ac˚ss_poöt
.
id
, 
byãs_ªad
);

686 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

688 
îr‹_code
 = 
	`kØ_buf„r_gë_u≈ro˚s£d_•a˚
(
t˝_ch™√l
->
ö_buf„r
, &
buf
, &
buf_size
);

689 i‡(
îr‹_code
) {

690 
	`KAA_LOG_ERROR
(
t˝_ch™√l
->
loggî
, 
îr‹_code
, "Kaa TCP channel [0x%08X]Érror get unprocessed %zu bytes"

691 , 
t˝_ch™√l
->
ac˚ss_poöt
.
id
, 
byãs_ªad
);

693 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

695 
kØt˝_îr‹_t
 
kØt˝_îr‹_code
 = 
	`kØt˝_∑r£r_¥o˚ss_buf„r
(
t˝_ch™√l
->
∑r£r
, 
buf
, 
buf_size
);

696 i‡(
kØt˝_îr‹_code
) {

697 
îr‹_code
 = 
KAA_ERR_TCPCHANNEL_PARSER_ERROR
;

698 
	`KAA_LOG_ERROR
(
t˝_ch™√l
->
loggî
, 
îr‹_code
, "Kaa TCP channel [0x%08X] failedÅoÖarseÅhe buffer (kaatcp_error_code=%d)"

699 , 
t˝_ch™√l
->
ac˚ss_poöt
.
id
, 
kØt˝_îr‹_code
);

700 
	`kØ_t˝_ch™√l_sockë_io_îr‹
(
t˝_ch™√l
, 
KAA_CHANNEL_NA
);

703 i‡(
t˝_ch™√l
->
ac˚ss_poöt
.
°©e
 =
AP_CONNECTED
) {

704 
îr‹_code
 = 
	`kØ_buf„r_‰ì_Æloˇãd_•a˚
(
t˝_ch™√l
->
ö_buf„r
, 
buf_size
);

705 i‡(
îr‹_code
) {

706 
	`KAA_LOG_ERROR
(
t˝_ch™√l
->
loggî
, 
îr‹_code
, "Kaa TCP channel [0x%08X]Érror freeállocated buffer %zu bytes"

707 , 
t˝_ch™√l
->
ac˚ss_poöt
.
id
, 
buf_size
);

713 
îr‹_code
 = 
	`kØ_t˝_ch™√l_sockë_io_îr‹
(
t˝_ch™√l
, 
KAA_CHANNEL_NA
);

719 
FD_WRITE
:

720 
	`KAA_LOG_TRACE_LDB
(
t˝_ch™√l
->
loggî
, 
KAA_ERR_NONE
, "Kaa TCP channel [0x%08X]ÖrocessingÉvent WRITE"

721 , 
t˝_ch™√l
->
ac˚ss_poöt
.
id
);

722 i‡(
t˝_ch™√l
->
ac˚ss_poöt
.
°©e
 =
AP_CONNECTING
) {

723 
ext_t˝_sockë_°©e_t
 
sockë_°©e
 =

724 
	`ext_t˝_utûs_t˝_sockë_check
(
fd


725 , (
kØ_sockaddr_t
 *Ë&
t˝_ch™√l
->
ac˚ss_poöt
.
sockaddr


726 , 
t˝_ch™√l
->
ac˚ss_poöt
.
sockaddr_Àngth
);

728 
sockë_°©e
) {

729 
KAA_TCP_SOCK_ERROR
:

730 
	`KAA_LOG_TRACE
(
t˝_ch™√l
->
loggî
, 
KAA_ERR_NONE
, "Kaa TCP channel [0x%08X] connection failed"

731 , 
t˝_ch™√l
->
ac˚ss_poöt
.
id
);

732 
t˝_ch™√l
->
ac˚ss_poöt
.
°©e
 = 
AP_RESOLVED
;

733 i‡(
t˝_ch™√l
->
evít_ˇŒback
) {

734 
t˝_ch™√l
->
	`evít_ˇŒback
—˝_ch™√l->
evít_c⁄ãxt
, 
SOCKET_CONNECTION_ERROR
, 
fd
);

736 
îr‹_code
 = 
	`kØ_t˝_ch™√l_sockë_io_îr‹
(
t˝_ch™√l
, 
KAA_CHANNEL_NA
);

738 
KAA_TCP_SOCK_CONNECTED
:

739 
	`KAA_LOG_TRACE
(
t˝_ch™√l
->
loggî
, 
KAA_ERR_NONE
, "Kaa TCP channel [0x%08X] socket was successfully connected"

740 , 
t˝_ch™√l
->
ac˚ss_poöt
.
id
);

741 
t˝_ch™√l
->
ac˚ss_poöt
.
°©e
 = 
AP_CONNECTED
;

743 i‡(
t˝_ch™√l
->
evít_ˇŒback
) {

744 
t˝_ch™√l
->
	`evít_ˇŒback
—˝_ch™√l->
evít_c⁄ãxt
, 
SOCKET_CONNECTED
, 
fd
);

747 
îr‹_code
 = 
	`kØ_t˝_ch™√l_auth‹ize
(
t˝_ch™√l
);

749 
KAA_TCP_SOCK_CONNECTING
:

750 
	`KAA_LOG_TRACE
(
t˝_ch™√l
->
loggî
, 
KAA_ERR_NONE
, "Kaa TCP channel [0x%08X] socket is still connecting..."

751 , 
t˝_ch™√l
->
ac˚ss_poöt
.
id
);

754 } i‡(
t˝_ch™√l
->
ac˚ss_poöt
.
°©e
 =
AP_CONNECTED
) {

755 
îr‹_code
 = 
	`kØ_t˝_wrôe_buf„r
(
t˝_ch™√l
);

756 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

758 i‡(
t˝_ch™√l
->
ch™√l_°©e
 =
KAA_TCP_CHANNEL_DISCONNECTING
) {

759 
	`KAA_LOG_TRACE
(
t˝_ch™√l
->
loggî
, 
KAA_ERR_NONE
, "Kaa TCP channel [0x%08X] disconnecting..."

760 , 
t˝_ch™√l
->
ac˚ss_poöt
.
id
);

762 *
buf
 = 
NULL
;

763 
size_t
 
buf_size
 = 0;

764 
îr‹_code
 = 
	`kØ_buf„r_gë_u≈ro˚s£d_•a˚
(
t˝_ch™√l
->
out_buf„r
, &
buf
, &
buf_size
);

765 i‡(
îr‹_code
 || !
buf_size
) {

766 
îr‹_code
 = 
	`kØ_t˝_ch™√l_sockë_io_îr‹
(
t˝_ch™√l
, 
KAA_CHANNEL_NA
);

768 
	`KAA_LOG_TRACE
(
t˝_ch™√l
->
loggî
, 
îr‹_code
, "Kaa TCP channel [0x%08X] can't disconnectÑightÇow (%d bytesáre unprocessed)"

769 , 
t˝_ch™√l
->
ac˚ss_poöt
.
id
, 
buf_size
);

771 } i‡(
t˝_ch™√l
->
≥ndög_ªque°_£rvi˚_cou¡
 > 0) {

772 i‡(
t˝_ch™√l
->
ch™√l_›î©i⁄_ty≥
 =
KAA_SERVER_BOOTSTRAP
) {

773 
	`KAA_LOG_TRACE
(
t˝_ch™√l
->
loggî
, 
KAA_ERR_NONE
, "Kaa TCP channel [0x%08X] goingÅo sync Bootstrap service"

774 , 
t˝_ch™√l
->
ac˚ss_poöt
.
id
);

775 
îr‹_code
 = 
	`kØ_t˝_ch™√l_auth‹ize
(
t˝_ch™√l
);

776 } i‡(
t˝_ch™√l
->
ch™√l_°©e
 =
KAA_TCP_CHANNEL_AUTHORIZED
) {

777 
	`KAA_LOG_TRACE
(
t˝_ch™√l
->
loggî
, 
KAA_ERR_NONE
, "Kaa TCP channel [0x%08X] goingÅo syncáll services"

778 , 
t˝_ch™√l
->
ac˚ss_poöt
.
id
);

779 
îr‹_code
 = 
	`kØ_t˝_ch™√l_wrôe_≥ndög_£rvi˚s
(
t˝_ch™√l


780 , 
t˝_ch™√l
->
≥ndög_ªque°_£rvi˚s


781 , 
t˝_ch™√l
->
≥ndög_ªque°_£rvi˚_cou¡
);

783 
	`KAA_LOG_TRACE
(
t˝_ch™√l
->
loggî
, 
KAA_ERR_NONE
, "Kaa TCP channel [0x%08X]áuthorizing channel"

784 , 
t˝_ch™√l
->
ac˚ss_poöt
.
id
);

785 
îr‹_code
 = 
	`kØ_t˝_ch™√l_auth‹ize
(
t˝_ch™√l
);

788 
	`KAA_LOG_TRACE_LDB
(
t˝_ch™√l
->
loggî
, 
KAA_ERR_NONE
, "Kaa TCP channel [0x%08X]Åhere isÇoÖending servicesÅo sync"

789 , 
t˝_ch™√l
->
ac˚ss_poöt
.
id
);

793 
FD_EXCEPTION
:

794 
	`KAA_LOG_TRACE
(
t˝_ch™√l
->
loggî
, 
KAA_ERR_NONE
, "Kaa TCP channel [0x%08X]ÖrocessingÉvent EXCEPTION"

795 , 
t˝_ch™√l
->
ac˚ss_poöt
.
id
);

796 
îr‹_code
 = 
	`kØ_t˝_ch™√l_sockë_io_îr‹
(
t˝_ch™√l
, 
KAA_CHANNEL_NA
);

799 
	`KAA_LOG_TRACE_LDB
(
t˝_ch™√l
->
loggî
, 
îr‹_code
, "Kaa TCP channel [0x%08X]ÉventÖrocessing complete"

800 , 
t˝_ch™√l
->
ac˚ss_poöt
.
id
);

801  
îr‹_code
;

802 
	}
}

806 
kØ_îr‹_t
 
	$kØ_t˝_ch™√l_gë_max_timeout
(
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
£lf
,

807 
uöt16_t
 *
max_timeout
)

809 
	`KAA_RETURN_IF_NIL3
(
£lf
, sñf->
c⁄ãxt
, 
max_timeout
, 
KAA_ERR_BADPARAM
);

811 *
max_timeout
 = 
KAA_TCP_CHANNEL_PING_TIMEOUT
;

813  
KAA_ERR_NONE
;

814 
	}
}

816 
kØ_îr‹_t
 
	$kØ_t˝_ch™√l_check_kì∑live
(
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
£lf
)

818 
	`KAA_RETURN_IF_NIL2
(
£lf
, sñf->
c⁄ãxt
, 
KAA_ERR_BADPARAM
);

820 
kØ_îr‹_t
 
îr‹_code
 = 
KAA_ERR_NONE
;

821 
kØ_t˝_ch™√l_t
 *
t˝_ch™√l
 = (kØ_t˝_ch™√l_à*Ë
£lf
->
c⁄ãxt
;

823 i‡(
t˝_ch™√l
->
ac˚ss_poöt
.
°©e
 =
AP_SET
) {

824 
kØ_dns_ªsﬁve_li°íî_t
 
ªsﬁve_li°íî
;

825 
ªsﬁve_li°íî
.
c⁄ãxt
 = (*Ë
t˝_ch™√l
;

826 
ªsﬁve_li°íî
.
⁄_ho°_ªsﬁved
 = 
kØ_t˝_ch™√l_£t_ac˚ss_poöt_ho°«me_ªsﬁved
;

827 
ªsﬁve_li°íî
.
⁄_ªsﬁve_Áûed
 = 
kØ_t˝_ch™√l_£t_ac˚ss_poöt_ho°«me_ªsﬁve_Áûed
;

829 
kØ_dns_ªsﬁve_öfo_t
 
ªsﬁve_¥›s
;

830 
ªsﬁve_¥›s
.
ho°«me
 = 
t˝_ch™√l
->
ac˚ss_poöt
.hostname;

831 
ªsﬁve_¥›s
.
ho°«me_Àngth
 = 
t˝_ch™√l
->
ac˚ss_poöt
.hostname_length;

832 
ªsﬁve_¥›s
.
p‹t
 = 
t˝_ch™√l
->
ac˚ss_poöt
.port;

834 
t˝_ch™√l
->
ac˚ss_poöt
.
sockaddr_Àngth
 = (
kØ_sockaddr_°‹age_t
);

835 
ext_t˝_utûs_fun˘i⁄_ªtu∫_°©e_t
 
ªsﬁve_°©e
 =

836 
	`ext_t˝_utûs_gëaddrbyho°
(&
ªsﬁve_li°íî
,

837 &
ªsﬁve_¥›s
,

838 (
kØ_sockaddr_t
 *Ë&
t˝_ch™√l
->
ac˚ss_poöt
.
sockaddr
,

839 &
t˝_ch™√l
->
ac˚ss_poöt
.
sockaddr_Àngth
);

841 
ªsﬁve_°©e
) {

842 
RET_STATE_VALUE_IN_PROGRESS
:

843 
	`KAA_LOG_TRACE
(
t˝_ch™√l
->
loggî
, 
KAA_ERR_NONE
, "Kaa TCP channelÇewáccessÖoint [0x%08X] destinationÇameÑesolveÖending...",

844 
t˝_ch™√l
->
ac˚ss_poöt
.
id
);

845 
t˝_ch™√l
->
ac˚ss_poöt
.
°©e
 = 
AP_IN_PROGRESS
;

847 
RET_STATE_VALUE_READY
:

848 
t˝_ch™√l
->
ac˚ss_poöt
.
°©e
 = 
AP_RESOLVED
;

849 
	`KAA_LOG_TRACE
(
t˝_ch™√l
->
loggî
, 
KAA_ERR_NONE
, "Kaa TCP channelÇewáccessÖoint [0x%08X] destinationÑesolved",

850 
t˝_ch™√l
->
ac˚ss_poöt
.
id
);

851 
îr‹_code
 = 
	`kØ_t˝_ch™√l_c⁄√˘_ac˚ss_poöt
(
t˝_ch™√l
);

852 i‡(
îr‹_code
) {

853 
	`KAA_LOG_ERROR
(
t˝_ch™√l
->
loggî
, 
îr‹_code
, "Kaa TCP channelÇewáccessÖoint [0x%08X] failedÅo connect",

854 
t˝_ch™√l
->
ac˚ss_poöt
.
id
);

855 i‡(
t˝_ch™√l
->
evít_ˇŒback
)

856 
t˝_ch™√l
->
	`evít_ˇŒback
—˝_ch™√l->
evít_c⁄ãxt
,

857 
SOCKET_CONNECTION_ERROR
,

858 
t˝_ch™√l
->
ac˚ss_poöt
.
sockë_des¸ùt‹
);

860 
îr‹_code
 = 
	`kØ_t˝_ch™√l_⁄_ac˚ss_poöt_Áûed
(
t˝_ch™√l
, 
KAA_CHANNEL_NA
);

863 
RET_STATE_VALUE_ERROR
:

864 
t˝_ch™√l
->
ac˚ss_poöt
.
°©e
 = 
AP_NOT_SET
;

865 
îr‹_code
 = 
KAA_ERR_TCPCHANNEL_AP_RESOLVE_FAILED
;

866 
	`KAA_LOG_ERROR
(
t˝_ch™√l
->
loggî
, 
îr‹_code
, "Kaa TCP channelÇewáccessÖoint [0x%08X] hostnameÑesolve failed",

867 
t˝_ch™√l
->
ac˚ss_poöt
.
id
);

868 
îr‹_code
 = 
	`kØ_t˝_ch™√l_⁄_ac˚ss_poöt_Áûed
(
t˝_ch™√l
, 
KAA_CHANNEL_NA
);

870 
RET_STATE_BUFFER_NOT_ENOUGH
:

871 
t˝_ch™√l
->
ac˚ss_poöt
.
°©e
 = 
AP_NOT_SET
;

872 
îr‹_code
 = 
KAA_ERR_TCPCHANNEL_AP_RESOLVE_FAILED
;

873 
	`KAA_LOG_ERROR
(
t˝_ch™√l
->
loggî
, 
îr‹_code
, "Kaa TCP channelÇewáccessÖoint [0x%08X] hostnameÑesolve failed. "

874 "Addªs†buf„∏i†nŸÉnough", 
t˝_ch™√l
->
ac˚ss_poöt
.
id
);

878 
	`KAA_LOG_TRACE_LDB
(
t˝_ch™√l
->
loggî
, 
KAA_ERR_NONE
, "Kaa TCP channel [0x%08X] checking keepalive",

879 
t˝_ch™√l
->
ac˚ss_poöt
.
id
);

881 i‡(
t˝_ch™√l
->
ch™√l_°©e
 !
KAA_TCP_CHANNEL_AUTHORIZED
) {

882  
îr‹_code
;

885 
kØ_time_t
 
öãrvÆ
 = 
	`KAA_TIME
(Ë- 
t˝_ch™√l
->
kì∑live
.
œ°_£¡_kì∑live
;

887 i‡(
öãrvÆ
 >(
kØ_time_t
)
KAA_TCP_CHANNEL_PING_TIMEOUT
) {

890 i‡(
t˝_ch™√l
->
kì∑live
.
œ°_£¡_kì∑live
 >Å˝_ch™√l->kì∑live.
œ°_ª˚ive_kì∑live
) {

891 i‡(
t˝_ch™√l
->
ch™√l_›î©i⁄_ty≥
 =
KAA_SERVER_BOOTSTRAP
) {

892 
îr‹_code
 = 
	`kØ_boŸ°øp_m™agî_⁄_ac˚ss_poöt_Áûed
(
t˝_ch™√l
->
å™•‹t_c⁄ãxt
.
kØ_c⁄ãxt
->
boŸ°øp_m™agî
,

893 &
t˝_ch™√l
->
¥Ÿocﬁ_id
,Å˝_ch™√l->
ch™√l_›î©i⁄_ty≥
,

894 
KAA_BOOTSTRAP_SERVERS_NA
);

896 
îr‹_code
 = 
	`kØ_boŸ°øp_m™agî_⁄_ac˚ss_poöt_Áûed
(
t˝_ch™√l
->
å™•‹t_c⁄ãxt
.
kØ_c⁄ãxt
->
boŸ°øp_m™agî
,

897 &
t˝_ch™√l
->
¥Ÿocﬁ_id
,Å˝_ch™√l->
ch™√l_›î©i⁄_ty≥
,

898 
KAA_OPERATION_SERVERS_NA
);

901 i‡(
îr‹_code
) {

902  
îr‹_code
;

905  
KAA_ERR_TIMEOUT
;

908 
îr‹_code
 = 
	`kØ_t˝_ch™√l_pög
(
t˝_ch™√l
);

912  
îr‹_code
;

913 
	}
}

920 
kØ_îr‹_t
 
	$kØ_t˝_ch™√l_£t_sockë_evíts_ˇŒback
(
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
£lf
,

921 
⁄_kØ_t˝_ch™√l_evít_‚
 
ˇŒback
, *
c⁄ãxt
)

923 
	`KAA_RETURN_IF_NIL2
(
£lf
, sñf->
c⁄ãxt
, 
KAA_ERR_BADPARAM
);

924 
kØ_t˝_ch™√l_t
 *
t˝_ch™√l
 = (kØ_t˝_ch™√l_à*Ë
£lf
->
c⁄ãxt
;

926 
t˝_ch™√l
->
evít_ˇŒback
 = 
ˇŒback
;

927 
t˝_ch™√l
->
evít_c⁄ãxt
 = 
c⁄ãxt
;

929 
	`KAA_LOG_TRACE
(
t˝_ch™√l
->
loggî
, 
KAA_ERR_NONE
, "Kaa TCP channel [0x%08X] set socketÉvents callbacks",

930 
t˝_ch™√l
->
ac˚ss_poöt
.
id
);

932  
KAA_ERR_NONE
;

934 
	}
}

936 
kØ_îr‹_t
 
	$kØ_t˝_ch™√l_disc⁄√˘
(
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
£lf
)

938 
	`KAA_RETURN_IF_NIL2
(
£lf
, sñf->
c⁄ãxt
, 
KAA_ERR_BADPARAM
);

939  
	`kØ_t˝_ch™√l_disc⁄√˘_öã∫Æ
((
kØ_t˝_ch™√l_t
 *)
£lf
, 
KAATCP_DISCONNECT_NONE
);

940 
	}
}

944 
	$kØ_t˝_ch™√l_c⁄«ck_mesßge_ˇŒback
(*
c⁄ãxt
, 
kØt˝_c⁄«ck_t
 
mesßge
)

946 
	`KAA_RETURN_IF_NIL
(
c⁄ãxt
,);

947 
kØ_t˝_ch™√l_t
 *
ch™√l
 = (kØ_t˝_ch™√l_à*Ë
c⁄ãxt
;

949 i‡(
ch™√l
->
ch™√l_°©e
 =
KAA_TCP_CHANNEL_AUTHORIZING
) {

950 i‡(
mesßge
.
ªtu∫_code
 =
KAATCP_CONNACK_SUCCESS
) {

951 
ch™√l
->
ch™√l_°©e
 = 
KAA_TCP_CHANNEL_AUTHORIZED
;

952 
	`KAA_LOG_TRACE
(
ch™√l
->
loggî
, 
KAA_ERR_NONE
,

954 
ch™√l
->
ac˚ss_poöt
.
id
);

956 
ch™√l
->
kì∑live
.
œ°_ª˚ive_kì∑live
 = 
	`KAA_TIME
();

957 
ch™√l
->
kì∑live
.
œ°_£¡_kì∑live


958 
ch™√l
->
kì∑live
.
œ°_ª˚ive_kì∑live
;

960 } i‡(
mesßge
.
ªtu∫_code
 =
KAATCP_CONNACK_REFUSE_BAD_CREDENTIALS
) {

961 
	`kØ_c⁄ãxt_£t_°©us_ªgi°îed
(
ch™√l
->
å™•‹t_c⁄ãxt
.
kØ_c⁄ãxt
, 
Ál£
);

962 
	`KAA_LOG_WARN
(
ch™√l
->
loggî
, 
KAA_ERR_NONE
,

964 
ch™√l
->
ac˚ss_poöt
.
id
);

965 
ch™√l
->
ch™√l_°©e
 = 
KAA_TCP_CHANNEL_UNDEFINED
;

966 
	`kØ_ch™√l_m™agî_¥o˚ss_auth_Áûuª
(
ch™√l
->
å™•‹t_c⁄ãxt
.
kØ_c⁄ãxt
->
ch™√l_m™agî
,

967 
KAA_AUTH_STATUS_BAD_CREDENTIALS
);

968 } i‡(
mesßge
.
ªtu∫_code
 =
KAATCP_CONNACK_REFUSE_VERIFICATION_FAILED
) {

969 
	`KAA_LOG_WARN
(
ch™√l
->
loggî
, 
KAA_ERR_NONE
,

971 
ch™√l
->
ac˚ss_poöt
.
id
);

972 
	`kØ_ch™√l_m™agî_¥o˚ss_auth_Áûuª
(
ch™√l
->
å™•‹t_c⁄ãxt
.
kØ_c⁄ãxt
->
ch™√l_m™agî
,

973 
KAA_AUTH_STATUS_VERIFICATION_FAILED
);

974 
	`kØ_t˝_ch™√l_sockë_io_îr‹
(
ch™√l
, 
KAA_ENDPOINT_NOT_REGISTERED
);

976 
	`KAA_LOG_ERROR
(
ch™√l
->
loggî
, 
KAA_ERR_BAD_STATE
,

978 
ch™√l
->
ac˚ss_poöt
.
id
, 
mesßge
.
ªtu∫_code
);

979 
	`kØ_ch™√l_m™agî_¥o˚ss_auth_Áûuª
(
ch™√l
->
å™•‹t_c⁄ãxt
.
kØ_c⁄ãxt
->
ch™√l_m™agî
,

980 
KAA_AUTH_STATUS_UNKNOWN
);

981 
	`kØ_t˝_ch™√l_sockë_io_îr‹
(
ch™√l
, 
KAA_CHANNEL_NA
);

984 
	`KAA_LOG_WARN
(
ch™√l
->
loggî
, 
KAA_ERR_NONE
, "Kaa TCP channel [0x%08X] CONACK messageÑeceived in incorrect state",

985 
ch™√l
->
ac˚ss_poöt
.
id
);

986 
	`kØ_t˝_ch™√l_sockë_io_îr‹
(
ch™√l
, 
KAA_CHANNEL_NA
);

988 
	}
}

992 
	$kØ_t˝_ch™√l_disc⁄√˘_mesßge_ˇŒback
(*
c⁄ãxt
, 
kØt˝_disc⁄√˘_t
 
mesßge
)

994 
	`KAA_RETURN_IF_NIL
(
c⁄ãxt
,);

996 
	`KAA_LOG_TRACE
(((
kØ_t˝_ch™√l_t
 *Ë
c⁄ãxt
)->
loggî
, 
KAA_ERR_NONE
,"Kaa TCP channel [0x%08X] DISCONNECT messageÑeceived",

997 ((
kØ_t˝_ch™√l_t
 *Ë
c⁄ãxt
)->
ac˚ss_poöt
.
id
);

998 i‡(
mesßge
.
ªas⁄
 =
KAATCP_DISCONNECT_CREDENTIALS_REVOKED
) {

999 
	`kØ_t˝_ch™√l_sockë_io_îr‹
(
c⁄ãxt
, 
KAA_CREDENTIALS_REVOKED
);

1001 i‡(
mesßge
.
ªas⁄
 !
KAATCP_DISCONNECT_INTERNAL_ERROR
 && mesßge.ªas⁄ !
KAATCP_DISCONNECT_CREDENTIALS_REVOKED
) {

1002 ((
kØ_t˝_ch™√l_t
 *Ë
c⁄ãxt
)->
sync_°©e
 = 
KAA_TCP_CHANNEL_SYNC_OP_STARTED
;

1004 
	`kØ_t˝_ch™√l_sockë_io_îr‹
(
c⁄ãxt
, 
KAA_CHANNEL_NA
);

1005 
	}
}

1009 
	$kØ_t˝_ch™√l_kØsync_mesßge_ˇŒback
(*
c⁄ãxt
, 
kØt˝_kØsync_t
 *
mesßge
)

1011 
	`KAA_RETURN_IF_NIL2
(
c⁄ãxt
, 
mesßge
, );

1012 
kØ_t˝_ch™√l_t
 *
ch™√l
 = (kØ_t˝_ch™√l_à*Ë
c⁄ãxt
;

1014 
	`KAA_LOG_TRACE
(
ch™√l
->
loggî
, 
KAA_ERR_NONE
, "Kaa TCP channel [0x%08X] KAASYNC messageÑeceived",

1015 
ch™√l
->
ac˚ss_poöt
.
id
);

1017 
uöt8_t
 
zù≥d
 = 
mesßge
->
sync_hódî
.
Êags
 & 
KAA_SYNC_ZIPPED_BIT
;

1018 
uöt8_t
 
í¸y±ed
 = 
mesßge
->
sync_hódî
.
Êags
 & 
KAA_SYNC_ENCRYPTED_BIT
;

1019 ()
í¸y±ed
;

1021 #ifde‡
KAA_ENCRYPTION


1022 i‡(
í¸y±ed
) {

1023 
	`ext_de¸y±_d©a
((
uöt8_t
 *)
mesßge
->
sync_ªque°
, mesßge->
sync_ªque°_size
,

1024 (
uöt8_t
 *)
mesßge
->
sync_ªque°
, &mesßge->
sync_ªque°_size
);

1028 i‡(!
zù≥d
) {

1029 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_∂©f‹m_¥Ÿocﬁ_¥o˚ss_£rvî_sync
(
ch™√l
->
å™•‹t_c⁄ãxt
.
kØ_c⁄ãxt
->
∂©f‹m_¥Ÿocﬁ
,

1030 (c⁄° 
uöt8_t
 *)
mesßge
->
sync_ªque°
,

1031 
mesßge
->
sync_ªque°_size
);

1032 i‡(
îr‹_code
)

1033 
	`KAA_LOG_ERROR
(
ch™√l
->
loggî
, 
îr‹_code
, "Kaa TCP channel [0x%08X] failedÅoÖrocess server sync",

1034 
ch™√l
->
ac˚ss_poöt
.
id
);

1036 
	`KAA_LOG_WARN
(
ch™√l
->
loggî
, 
KAA_ERR_NONE
, "Kaa TCP channel [0x%08X]Ñeceived unsupported flags: zipped %d,Éncrypted %d",

1037 
ch™√l
->
ac˚ss_poöt
.
id
, 
zù≥d
, 
í¸y±ed
);

1040 
	`kØt˝_∑r£r_kØsync_de°roy
(
mesßge
);

1043 i‡(
ch™√l
->
ch™√l_›î©i⁄_ty≥
 =
KAA_SERVER_BOOTSTRAP
) {

1044 
ch™√l
->
sync_°©e
 = 
KAA_TCP_CHANNEL_SYNC_OP_FINISHED
;

1045 
	`kØ_t˝_ch™√l_disc⁄√˘_öã∫Æ
(
ch™√l
, 
KAATCP_DISCONNECT_NONE
);

1047 
	}
}

1051 
	$kØ_t˝_ch™√l_pögª•_mesßge_ˇŒback
(*
c⁄ãxt
)

1053 
	`KAA_RETURN_IF_NIL
(
c⁄ãxt
,);

1054 
kØ_t˝_ch™√l_t
 *
ch™√l
 = (kØ_t˝_ch™√l_à*)
c⁄ãxt
;

1056 
ch™√l
->
kì∑live
.
œ°_ª˚ive_kì∑live
 = 
	`KAA_TIME
();

1058 
	`KAA_LOG_INFO
(
ch™√l
->
loggî
, 
KAA_ERR_NONE
, "Kaa TCP channel [0x%08X] PING messageÑeceived",

1059 
ch™√l
->
ac˚ss_poöt
.
id
);

1060 
	}
}

1067 
kØ_îr‹_t
 
	$kØ_t˝_ch™√l_sockë_io_îr‹
(
kØ_t˝_ch™√l_t
 *
£lf
, 
kØ_Áûovî_ªas⁄
 
ªas⁄_code
)

1069 
	`KAA_RETURN_IF_NIL
(
£lf
, 
KAA_ERR_BADPARAM
);

1071 
	`KAA_LOG_TRACE_LDB
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Kaa TCP channel [0x%08X] closing socket",

1072 
£lf
->
ac˚ss_poöt
.
id
);

1074 
kØ_îr‹_t
 
îr‹_code
 = 
KAA_ERR_NONE
;

1076 
£lf
->
ac˚ss_poöt
.
°©e
 = 
AP_RESOLVED
;

1077 
£lf
->
ch™√l_°©e
 = 
KAA_TCP_CHANNEL_UNDEFINED
;

1080 i‡(
£lf
->
ac˚ss_poöt
.
sockë_des¸ùt‹
 >= 0) {

1081 i‡(
£lf
->
evít_ˇŒback
) {

1082 
£lf
->
	`evít_ˇŒback
(£lf->
evít_c⁄ãxt
, 
SOCKET_DISCONNECTED
, sñf->
ac˚ss_poöt
.
sockë_des¸ùt‹
);

1084 
îr‹_code
 = 
	`ext_t˝_utûs_t˝_sockë_˛o£
(
£lf
->
ac˚ss_poöt
.
sockë_des¸ùt‹
);

1085 i‡(
îr‹_code
) {

1086 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹_code
, "Kaa TCP channel [0x%08X] closing socket, "

1087 "îr‹ closög sockë", 
£lf
->
ac˚ss_poöt
.
id
);

1088 
îr‹_code
 = 
KAA_ERR_NONE
;

1091 
£lf
->
ac˚ss_poöt
.
sockë_des¸ùt‹
 = 
KAA_TCP_SOCKET_NOT_SET
;

1095 i‡(
£lf
->
sync_°©e
 =
KAA_TCP_CHANNEL_SYNC_OP_STARTED
) {

1096 
îr‹_code
 = 
	`kØ_t˝_ch™√l_⁄_ac˚ss_poöt_Áûed
(
£lf
, 
ªas⁄_code
);

1099 
	`kØ_buf„r_ª£t
(
£lf
->
ö_buf„r
);

1100 
	`kØ_buf„r_ª£t
(
£lf
->
out_buf„r
);

1104 
	`kØt˝_∑r£r_ª£t
(
£lf
->
∑r£r
);

1106 
£lf
->
sync_°©e
 = 
KAA_TCP_CHANNEL_SYNC_OP_UNDEFINED
;

1108  
îr‹_code
;

1109 
	}
}

1111 #ifde‡
KAA_ENCRYPTION


1112 
kØ_îr‹_t
 
	$kØ_t˝_ch™√l_í¸y±
(
kØ_t˝_ch™√l_t
 *
£lf
, 
uöt8_t
 **
d©a
, 
size_t
 *
d©a_size
)

1114 i‡(!
d©a
 || !
d©a_size
) {

1115  
KAA_ERR_BADPARAM
;

1118 
size_t
 
í¸y±ed_size
 = 
	`ext_gë_í¸y±ed_d©a_size
(*
d©a_size
);

1120 *
íc_buff
 = 
	`KAA_MALLOC
(
í¸y±ed_size
);

1121 i‡(!
íc_buff
) {

1122  
KAA_ERR_NOMEM
;

1125 
	`mem˝y
(
íc_buff
, *
d©a
, *
d©a_size
);

1126 
kØ_îr‹_t
 
îr‹_code
 = 
	`ext_í¸y±_d©a
((
uöt8_t
 *)
íc_buff
, *
d©a_size
, (uint8_t *)enc_buff);

1127 i‡(
îr‹_code
) {

1128 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹_code
, "Can'tÉncryptÅhe data");

1129 
	`KAA_FREE
(
íc_buff
);

1130  
KAA_ERR_BADDATA
;

1132 
	`KAA_FREE
(*
d©a
);

1134 *
d©a
 = (
uöt8_t
 *)
íc_buff
;

1135 *
d©a_size
 = 
í¸y±ed_size
;

1136  
KAA_ERR_NONE
;

1137 
	}
}

1143 
kØ_îr‹_t
 
	$kØ_t˝_ch™√l_auth‹ize
(
kØ_t˝_ch™√l_t
 *
£lf
)

1145 i‡(!
£lf
) {

1146  
KAA_ERR_BADPARAM
;

1149 *
buf„r
 = 
NULL
;

1150 
size_t
 
buf„r_size
 = 0;

1151 
size_t
 
ªque°_size
 = 0;

1153 
uöt8_t
 *
sync_buf„r
 = 
NULL
;

1154 
size_t
 
sync_size
 = 0;

1156 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Calling kaa_platform_protocol_alloc_serialize_client_sync");

1157 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_∂©f‹m_¥Ÿocﬁ_Æloc_£rülize_˛õ¡_sync
(

1158 
£lf
->
å™•‹t_c⁄ãxt
.
kØ_c⁄ãxt
->
∂©f‹m_¥Ÿocﬁ
,

1159 
£lf
->
suµ‹ãd_£rvi˚s
,

1160 
£lf
->
suµ‹ãd_£rvi˚_cou¡
,

1161 &
sync_buf„r
,

1162 &
sync_size
);

1164 i‡(
îr‹_code
) {

1165 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹_code
, "FailedÅoállocateánd serialize client sync");

1166 
	`KAA_FREE
(
sync_buf„r
);

1167  
îr‹_code
;

1170 #ifde‡
KAA_ENCRYPTION


1172 
îr‹_code
 = 
	`kØ_t˝_ch™√l_í¸y±
(
£lf
, (
uöt8_t
 **)&
sync_buf„r
, &
sync_size
);

1173 i‡(
îr‹_code
) {

1174 
	`KAA_FREE
(
sync_buf„r
);

1175  
îr‹_code
;

1179 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
îr‹_code
, "Kaa TCP channel [0x%08X] goingÅo send CONNECT message (%zu bytes)",

1180 
£lf
->
ac˚ss_poöt
.
id
, 
sync_size
);

1182 
kØ_îr‹_t
 
dñëe_îr‹_code
 = 
	`kØ_t˝_ch™√l_dñëe_≥ndög_£rvi˚s
(
£lf
, sñf->
≥ndög_ªque°_£rvi˚s
,

1183 
£lf
->
≥ndög_ªque°_£rvi˚_cou¡
);

1184 i‡(
dñëe_îr‹_code
) {

1185 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
dñëe_îr‹_code
, "Kaa TCP channel [0x%08X] failedÅo deleteÖending services",

1186 
£lf
->
ac˚ss_poöt
.
id
);

1189 i‡(
îr‹_code
) {

1190 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹_code
, "Kaa TCP channel [0x%08X] failedÅo serialize supported services",

1191 
£lf
->
ac˚ss_poöt
.
id
);

1194 i‡(
îr‹_code
 || 
dñëe_îr‹_code
) {

1195 
	`KAA_FREE
(
sync_buf„r
);

1197  
îr‹_code
 ?Éº‹_codê: 
dñëe_îr‹_code
;

1201 
kØt˝_c⁄√˘_t
 
c⁄√˘_mesßge
;

1202 
kØt˝_îr‹_t
 
kØt˝_îr‹_code
 =

1203 
	`kØt˝_fûl_c⁄√˘_mesßge
(
KAA_TCP_CHANNEL_MAX_TIMEOUT
, 
KAA_PLATFORM_PROTOCOL_ID
,

1204 (*)
sync_buf„r
, 
sync_size
, (*)
£lf
->
í¸y±i⁄
.
´s_£ssi⁄_key
,

1205 
£lf
->
í¸y±i⁄
.
´s_£ssi⁄_key_size
, (*)£lf->í¸y±i⁄.
sig«tuª
,

1206 
£lf
->
í¸y±i⁄
.
sig«tuª_size
, &
c⁄√˘_mesßge
);

1208 i‡(
kØt˝_îr‹_code
) {

1209 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
KAA_ERR_TCPCHANNEL_PARSER_ERROR
, "Kaa TCP channel [0x%08X] failedÅo fill CONNECT message",

1210 
£lf
->
ac˚ss_poöt
.
id
);

1211 
	`KAA_FREE
(
sync_buf„r
);

1212  
KAA_ERR_TCPCHANNEL_PARSER_ERROR
;

1215 
	`kØ_buf„r_gë_‰ì_•a˚
(
£lf
->
out_buf„r
, &
buf„r_size
);

1216 
	`kØt˝_gë_ªque°_size
(&
c⁄√˘_mesßge
, 
KAATCP_MESSAGE_CONNECT
, &
ªque°_size
);

1218 i‡(
buf„r_size
 < 
ªque°_size
) {

1219 
îr‹_code
 = 
	`kØ_buf„r_ªÆloˇã_•a˚
(
£lf
->
out_buf„r
, 
ªque°_size
);

1222 i‡(!
îr‹_code
) {

1223 
îr‹_code
 = 
	`kØ_buf„r_Æloˇã_•a˚
(
£lf
->
out_buf„r
, &
buf„r
, &
buf„r_size
);

1226 i‡(
îr‹_code
) {

1227 
	`KAA_FREE
(
sync_buf„r
);

1228  
KAA_ERR_NOMEM
;

1231 
kØt˝_îr‹_code
 = 
	`kØt˝_gë_ªque°_c⁄√˘
(&
c⁄√˘_mesßge
, 
buf„r
, &
buf„r_size
);

1233 i‡(
kØt˝_îr‹_code
) {

1234 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
KAA_ERR_TCPCHANNEL_PARSER_ERROR
, "Kaa TCP channel [0x%08X] failedÅo get serialize CONNECT message",

1235 
£lf
->
ac˚ss_poöt
.
id
);

1236 
	`KAA_FREE
(
sync_buf„r
);

1238  
KAA_ERR_TCPCHANNEL_PARSER_ERROR
;

1241 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Kaa TCP channel [0x%08X] created CONNECT message (%zu bytes)",

1242 
£lf
->
ac˚ss_poöt
.
id
, 
buf„r_size
);

1244 
îr‹_code
 = 
	`kØ_buf„r_lock_•a˚
(
£lf
->
out_buf„r
, 
buf„r_size
);

1246 
	`KAA_FREE
(
sync_buf„r
);

1248 i‡(
îr‹_code
) {

1249  
îr‹_code
;

1252 
£lf
->
ch™√l_°©e
 = 
KAA_TCP_CHANNEL_AUTHORIZING
;

1254 
£lf
->
sync_°©e
 = 
KAA_TCP_CHANNEL_SYNC_OP_STARTED
;

1256  
îr‹_code
;

1257 
	}
}

1264 
boﬁ
 
	$is_£rvi˚_≥ndög
(
kØ_t˝_ch™√l_t
 *
£lf
, c⁄° 
kØ_exãnsi⁄_id
 
£rvi˚
)

1266 
	`KAA_RETURN_IF_NIL2
(
£lf
, sñf->
≥ndög_ªque°_£rvi˚s
, 
Ál£
);

1268 
size_t
 
i
 = 0;

1269 ; 
i
 < 
£lf
->
≥ndög_ªque°_£rvi˚_cou¡
; ++i) {

1270 i‡(
£lf
->
≥ndög_ªque°_£rvi˚s
[
i
] =
£rvi˚
) {

1271  
åue
;

1274  
Ál£
;

1275 
	}
}

1284 
size_t
 
	$≠≥nd_wôh_√w_£rvi˚s
(
kØ_exãnsi⁄_id
 *
de°
,

1285 
size_t
 
de°_cou¡
,

1286 
size_t
 
de°_ˇ∑côy
,

1287 c⁄° 
kØ_exãnsi⁄_id
 *
§c
,

1288 
size_t
 
§c_cou¡
)

1290 
	`KAA_RETURN_IF_NIL2
(
de°
, 
§c
, 0);

1292 
size_t
 
i
 = 0; i < 
§c_cou¡
; ++i) {

1293 
boﬁ
 
found
 = 
Ál£
;

1294 
size_t
 
j
 = 0; j < 
de°_cou¡
; ++j) {

1295 i‡(
§c
[
i
] =
de°
[
j
]) {

1296 
found
 = 
åue
;

1302 i‡(!
found
) {

1303 
de°
[
de°_cou¡
++] = 
§c
[
i
];

1307 i‡(
de°_cou¡
 =
de°_ˇ∑côy
) {

1312  
de°_cou¡
;

1313 
	}
}

1318 
kØ_îr‹_t
 
	$kØ_t˝_ch™√l_dñëe_≥ndög_£rvi˚s
(
kØ_t˝_ch™√l_t
 *
£lf
,

1319 c⁄° 
kØ_exãnsi⁄_id
 
£rvi˚s
[], 
size_t
 
£rvi˚_cou¡
)

1321 
	`KAA_RETURN_IF_NIL
(
£lf
, 
KAA_ERR_BADPARAM
);

1324 i‡(!
£lf
->
≥ndög_ªque°_£rvi˚s
 || !£lf->
≥ndög_ªque°_£rvi˚_cou¡
 || !
£rvi˚s
 || !
£rvi˚_cou¡
) {

1325  
KAA_ERR_NONE
;

1328 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Kaa TCP channel [0x%08X] %zuÖending services, goingÅo delete %zu services",

1329 
£lf
->
ac˚ss_poöt
.
id
, sñf->
≥ndög_ªque°_£rvi˚_cou¡
, 
£rvi˚_cou¡
);

1332 i‡(
£rvi˚s
 =
£lf
->
≥ndög_ªque°_£rvi˚s
) {

1334 
	`KAA_FREE
(
£lf
->
≥ndög_ªque°_£rvi˚s
);

1335 
£lf
->
≥ndög_ªque°_£rvi˚s
 = 
NULL
;

1336 
£lf
->
≥ndög_ªque°_£rvi˚_cou¡
 = 0;

1337  
KAA_ERR_NONE
;

1340 
size_t
 
√w_£rvi˚_cou¡
 = 0;

1341 
kØ_exãnsi⁄_id
 
ãmp_√w_£rvi˚s
[
£lf
->
≥ndög_ªque°_£rvi˚_cou¡
];

1343 
√w_£rvi˚_cou¡
 = 
	`≠≥nd_wôh_√w_£rvi˚s
(
ãmp_√w_£rvi˚s
,

1344 
√w_£rvi˚_cou¡
,

1345 
£lf
->
≥ndög_ªque°_£rvi˚_cou¡
,

1346 
£lf
->
≥ndög_ªque°_£rvi˚s
,

1347 
£lf
->
≥ndög_ªque°_£rvi˚_cou¡
);

1349 
	`KAA_FREE
(
£lf
->
≥ndög_ªque°_£rvi˚s
);

1350 
£lf
->
≥ndög_ªque°_£rvi˚s
 = 
NULL
;

1351 
£lf
->
≥ndög_ªque°_£rvi˚_cou¡
 = 0;

1353 
£lf
->
≥ndög_ªque°_£rvi˚s
 = 
	`KAA_MALLOC
(
√w_£rvi˚_cou¡
 * (
kØ_exãnsi⁄_id
));

1354 
	`KAA_RETURN_IF_NIL
(
£lf
->
≥ndög_ªque°_£rvi˚s
, 
KAA_ERR_NOMEM
);

1356 i‡(
√w_£rvi˚_cou¡
 > 0) {

1357 
£lf
->
≥ndög_ªque°_£rvi˚_cou¡
 = 
√w_£rvi˚_cou¡
;

1358 
	`mem˝y
(
£lf
->
≥ndög_ªque°_£rvi˚s
, 
ãmp_√w_£rvi˚s
, 
√w_£rvi˚_cou¡
 * (
kØ_exãnsi⁄_id
));

1361  
KAA_ERR_NONE
;

1362 
	}
}

1369 
kØ_îr‹_t
 
	$kØ_t˝_ch™√l_upd©e_≥ndög_£rvi˚s
(
kØ_t˝_ch™√l_t
 *
£lf
,

1370 c⁄° 
kØ_exãnsi⁄_id
 
£rvi˚s
[], 
size_t
 
£rvi˚_cou¡
)

1372 
	`KAA_RETURN_IF_NIL3
(
£lf
, 
£rvi˚s
, 
£rvi˚_cou¡
, 
KAA_ERR_BADPARAM
);

1374 
	`KAA_LOG_TRACE
(
£lf
->
loggî
,
KAA_ERR_NONE
,"Kaa TCP channel [0x%08X] %zuÖending services, goingÅo update %zu services",

1375 
£lf
->
ac˚ss_poöt
.
id
, sñf->
≥ndög_ªque°_£rvi˚_cou¡
, 
£rvi˚_cou¡
);

1377 
size_t
 
√w_£rvi˚_cou¡
 = 0;

1378 
kØ_exãnsi⁄_id
 
ãmp_√w_£rvi˚s
[
£lf
->
≥ndög_ªque°_£rvi˚_cou¡
 + 
£rvi˚_cou¡
];

1381 i‡(!
£lf
->
≥ndög_ªque°_£rvi˚s
 || !£lf->
≥ndög_ªque°_£rvi˚_cou¡
) {

1382 
ãmp_√w_£rvi˚s
[
√w_£rvi˚_cou¡
++] = 
£rvi˚s
[0];

1385 
√w_£rvi˚_cou¡
 = 
£lf
->
≥ndög_ªque°_£rvi˚_cou¡
;

1386 
	`mem˝y
(
ãmp_√w_£rvi˚s
, 
£lf
->
≥ndög_ªque°_£rvi˚s
, 
√w_£rvi˚_cou¡
 * (
kØ_exãnsi⁄_id
));

1388 
	`KAA_FREE
(
£lf
->
≥ndög_ªque°_£rvi˚s
);

1389 
£lf
->
≥ndög_ªque°_£rvi˚s
 = 
NULL
;

1390 
£lf
->
≥ndög_ªque°_£rvi˚_cou¡
 = 0;

1393 
√w_£rvi˚_cou¡
 = 
	`≠≥nd_wôh_√w_£rvi˚s
(
ãmp_√w_£rvi˚s
,

1394 
√w_£rvi˚_cou¡
,

1395 
£lf
->
≥ndög_ªque°_£rvi˚_cou¡
 + 
£rvi˚_cou¡
,

1396 
£rvi˚s
,

1397 
£rvi˚_cou¡
);

1399 
£lf
->
≥ndög_ªque°_£rvi˚s
 = 
	`KAA_MALLOC
(
√w_£rvi˚_cou¡
 * (
kØ_exãnsi⁄_id
));

1400 i‡(!
£lf
->
≥ndög_ªque°_£rvi˚s
) {

1401  
KAA_ERR_NOMEM
;

1404 i‡(
√w_£rvi˚_cou¡
 > 0) {

1405 
£lf
->
≥ndög_ªque°_£rvi˚_cou¡
 = 
√w_£rvi˚_cou¡
;

1406 
	`mem˝y
(
£lf
->
≥ndög_ªque°_£rvi˚s
, 
ãmp_√w_£rvi˚s
, 
√w_£rvi˚_cou¡
 * (
kØ_exãnsi⁄_id
));

1409  
KAA_ERR_NONE
;

1410 
	}
}

1417 
kØ_îr‹_t
 
	$kØ_t˝_ch™√l_£t_ac˚ss_poöt_ho°«me_ªsﬁved
(*
c⁄ãxt
,

1418 c⁄° 
kØ_sockaddr_t
 *
addr
, 
kØ_sockÀn_t
 
addr_size
)

1420 
	`KAA_RETURN_IF_NIL2
(
c⁄ãxt
, 
addr
, 
KAA_ERR_BADPARAM
);

1421 
kØ_t˝_ch™√l_t
 *
ch™√l
 = (kØ_t˝_ch™√l_à*Ë
c⁄ãxt
;

1423 
	`mem˝y
(&
ch™√l
->
ac˚ss_poöt
.
sockaddr
, 
addr
, 
addr_size
);

1424 
ch™√l
->
ac˚ss_poöt
.
sockaddr_Àngth
 = 
addr_size
;

1426 
ch™√l
->
ac˚ss_poöt
.
°©e
 = 
AP_RESOLVED
;

1428 
	`KAA_LOG_INFO
(
ch™√l
->
loggî
, 
KAA_ERR_NONE
, "Kaa TCP channel [0x%08X] hostnameÑesolved",

1429 
ch™√l
->
ac˚ss_poöt
.
id
);

1431 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_t˝_ch™√l_c⁄√˘_ac˚ss_poöt
(
ch™√l
);

1432 i‡(
îr‹_code
) {

1433 i‡(
ch™√l
->
evít_ˇŒback
) {

1434 
ch™√l
->
	`evít_ˇŒback
(ch™√l->
evít_c⁄ãxt
,

1435 
SOCKET_CONNECTION_ERROR
, 
ch™√l
->
ac˚ss_poöt
.
sockë_des¸ùt‹
);

1437 
îr‹_code
 = 
	`kØ_t˝_ch™√l_⁄_ac˚ss_poöt_Áûed
((
kØ_t˝_ch™√l_t
 *Ë
c⁄ãxt
, 
KAA_CHANNEL_NA
);

1439  
îr‹_code
;

1440 
	}
}

1447 
kØ_îr‹_t
 
	$kØ_t˝_ch™√l_£t_ac˚ss_poöt_ho°«me_ªsﬁve_Áûed
(*
c⁄ãxt
)

1449 
	`KAA_RETURN_IF_NIL
(
c⁄ãxt
, 
KAA_ERR_BADPARAM
);

1450 
kØ_t˝_ch™√l_t
 *
ch™√l
 = (kØ_t˝_ch™√l_à*Ë
c⁄ãxt
;

1452 
	`KAA_LOG_INFO
(
ch™√l
->
loggî
, 
KAA_ERR_NONE
, "Kaa TCP channel [0x%08X] hostnameÑesolve failed",

1453 
ch™√l
->
ac˚ss_poöt
.
id
);

1455 
ch™√l
->
ac˚ss_poöt
.
°©e
 = 
AP_NOT_SET
;

1457  
KAA_ERR_NONE
;

1458 
	}
}

1465 
uöt32_t
 
	$gë_uöt32_t
(c⁄° 
uöt8_t
 *
buf„r
)

1467 i‡(!
buf„r
) {

1471 
uöt32_t
 
vÆue
 = 0;

1472 
	`mem˝y
(&
vÆue
, 
buf„r
, (value));

1473  
	`KAA_NTOHL
(
vÆue
);

1474 
	}
}

1481 
kØ_îr‹_t
 
	$kØ_t˝_ch™√l_c⁄√˘_ac˚ss_poöt
(
kØ_t˝_ch™√l_t
 *
£lf
)

1483 
	`KAA_RETURN_IF_NIL
(
£lf
, 
KAA_ERR_BADPARAM
);

1484 i‡(
£lf
->
ac˚ss_poöt
.
°©e
 !
AP_RESOLVED
) {

1485  
KAA_ERR_BAD_STATE
;

1488 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Kaa TCP channel [0x%08X] connectingÅoÅhe server...",

1489 
£lf
->
ac˚ss_poöt
.
id
);

1490 
kØ_îr‹_t
 
îr‹_code
 = 
	`ext_t˝_utûs_›í_t˝_sockë
(&
£lf
->
ac˚ss_poöt
.
sockë_des¸ùt‹
,

1491 (
kØ_sockaddr_t
 *Ë&
£lf
->
ac˚ss_poöt
.
sockaddr
, sñf->ac˚ss_poöt.
sockaddr_Àngth
);

1493 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

1495 i‡(
£lf
->
ac˚ss_poöt
.
sockë_des¸ùt‹
 < 0) {

1496  
KAA_ERR_SOCKET_CONNECT_ERROR
;

1499 
£lf
->
ac˚ss_poöt
.
°©e
 = 
AP_CONNECTING
;

1500 
£lf
->
sync_°©e
 = 
KAA_TCP_CHANNEL_SYNC_OP_STARTED
;

1501  
KAA_ERR_NONE
;

1502 
	}
}

1509 
kØ_îr‹_t
 
	$kØ_t˝_ch™√l_ªÀa£_ac˚ss_poöt
(
kØ_t˝_ch™√l_t
 *
£lf
)

1511 
	`KAA_RETURN_IF_NIL
(
£lf
, 
KAA_ERR_BADPARAM
);

1512 
kØ_îr‹_t
 
îr‹_code
 = 
KAA_ERR_NONE
;

1514 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Kaa TCP channel [0x%08X]Ñeleasing channel'sÑesources",

1515 
£lf
->
ac˚ss_poöt
.
id
);

1517 i‡(
£lf
->
ac˚ss_poöt
.
°©e
 =
AP_CONNECTED
 || sñf->ac˚ss_poöt.°©ê=
AP_CONNECTING
) {

1518 
	`ext_t˝_utûs_t˝_sockë_˛o£
(
£lf
->
ac˚ss_poöt
.
sockë_des¸ùt‹
);

1521 
£lf
->
ac˚ss_poöt
.
sockë_des¸ùt‹
 = 
KAA_TCP_SOCKET_NOT_SET
;

1522 
£lf
->
ac˚ss_poöt
.
°©e
 = 
AP_NOT_SET
;

1523 
£lf
->
ac˚ss_poöt
.
id
 = 0;

1525 
	`KAA_FREE
(
£lf
->
ac˚ss_poöt
.
ho°«me
);

1526 
£lf
->
ac˚ss_poöt
.
ho°«me
 = 
NULL
;

1527 
£lf
->
ac˚ss_poöt
.
ho°«me_Àngth
 = 0;

1529 
	`KAA_FREE
(
£lf
->
ac˚ss_poöt
.
public_key
);

1530 
£lf
->
ac˚ss_poöt
.
public_key
 = 
NULL
;

1531 
£lf
->
ac˚ss_poöt
.
public_key_Àngth
 = 0;

1533  
îr‹_code
;

1534 
	}
}

1541 
kØ_îr‹_t
 
	$kØ_t˝_ch™√l_wrôe_≥ndög_£rvi˚s
(
kØ_t˝_ch™√l_t
 *
£lf
,

1542 
kØ_exãnsi⁄_id
 *
£rvi˚
, 
size_t
 
£rvi˚s_cou¡
)

1544 
	`KAA_RETURN_IF_NIL
(
£lf
, 
KAA_ERR_BADPARAM
);

1546 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Kaa TCP channel [0x%08X] goingÅo serialize %zuÖending services"

1547 , 
£lf
->
ac˚ss_poöt
.
id
, sñf->
≥ndög_ªque°_£rvi˚_cou¡
);

1549 
	`KAA_RETURN_IF_NIL2
(
£rvi˚
, 
£rvi˚s_cou¡
, 
KAA_ERR_NONE
);

1551 *
buf„r
 = 
NULL
;

1552 
uöt8_t
 *
sync_buf„r
 = 
NULL
;

1553 
size_t
 
sync_size
 = 0;

1554 
size_t
 
buf„r_size
 = 0;

1555 
boﬁ
 
zù≥d
 = 
Ál£
;

1556 
kØt˝_kØsync_t
 
kØ_sync_mesßge
;

1558 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_buf„r_Æloˇã_•a˚
(
£lf
->
out_buf„r
, &
buf„r
, &
buf„r_size
);

1559 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

1561 
îr‹_code
 = 
	`kØ_∂©f‹m_¥Ÿocﬁ_Æloc_£rülize_˛õ¡_sync
(

1562 
£lf
->
å™•‹t_c⁄ãxt
.
kØ_c⁄ãxt
->
∂©f‹m_¥Ÿocﬁ
,

1563 
£rvi˚
,

1564 
£rvi˚s_cou¡
,

1565 &
sync_buf„r
,

1566 &
sync_size
);

1568 i‡(
îr‹_code
) {

1569 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹_code
, "Kaa TCP channel [0x%08X] FailedÅoállocateánd serialize client sync",

1570 
£lf
->
ac˚ss_poöt
.
id
);

1571 
	`KAA_FREE
(
sync_buf„r
);

1572  
îr‹_code
;

1575 #ifde‡
KAA_ENCRYPTION


1577 
boﬁ
 
í¸y±ed
 = 
åue
;

1578 
îr‹_code
 = 
	`kØ_t˝_ch™√l_í¸y±
(
£lf
,(
uöt8_t
 **Ë&
sync_buf„r
, &
sync_size
);

1579 i‡(
îr‹_code
) {

1580 
	`KAA_FREE
(
sync_buf„r
);

1581  
îr‹_code
;

1584 
boﬁ
 
í¸y±ed
 = 
Ál£
;

1586 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Kaa TCP channel [0x%08X] serialized client sync (%zu bytes)",

1587 
£lf
->
ac˚ss_poöt
.
id
, 
sync_size
);

1589 
	`kØ_t˝_ch™√l_dñëe_≥ndög_£rvi˚s
(
£lf
, 
£rvi˚
, 
£rvi˚s_cou¡
);

1591 i‡(!
îr‹_code
) {

1592 
	`kØ_buf„r_gë_‰ì_•a˚
(
£lf
->
out_buf„r
, &
buf„r_size
);

1593 i‡–
buf„r_size
 < (
sync_size
 + (
kØt˝_kØsync_hódî_t
)) ) {

1594 
îr‹_code
 = 
	`kØ_buf„r_ªÆloˇã_•a˚
–
£lf
->
out_buf„r
, (
sync_size
 + (
kØt˝_kØsync_hódî_t
)) );

1595 i‡(!
îr‹_code
) {

1596 
	`kØ_buf„r_Æloˇã_•a˚
(
£lf
->
out_buf„r
, &
buf„r
, &
buf„r_size
);

1601 i‡(
îr‹_code
) {

1602 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
îr‹_code
, "Kaa TCP channel [0x%08X] failedÅo serialize client sync",

1603 
£lf
->
ac˚ss_poöt
.
id
);

1604 
	`KAA_FREE
(
sync_buf„r
);

1605  
îr‹_code
;

1608 
kØt˝_îr‹_t
 
∑r£r_îr‹_code
 = 
	`kØt˝_fûl_kØsync_mesßge
((*)
sync_buf„r
, 
sync_size
, 
£lf
->
mesßge_id
++,

1609 
zù≥d
, 
í¸y±ed
, &
kØ_sync_mesßge
);

1611 i‡(
∑r£r_îr‹_code
) {

1612 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
KAA_ERR_TCPCHANNEL_PARSER_ERROR
, "Kaa TCP channel [0x%08X] failedÅo fill KAASYNC message",

1613 
£lf
->
ac˚ss_poöt
.
id
);

1614 
	`KAA_FREE
(
sync_buf„r
);

1615  
KAA_ERR_TCPCHANNEL_PARSER_ERROR
;

1618 
∑r£r_îr‹_code
 = 
	`kØt˝_gë_ªque°_kØsync
(&
kØ_sync_mesßge
, 
buf„r
, &
buf„r_size
);

1619 i‡(
∑r£r_îr‹_code
) {

1620 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
KAA_ERR_TCPCHANNEL_PARSER_ERROR
, "Kaa TCP channel [0x%08X] failedÅo serialize KAASYNC message",

1621 
£lf
->
ac˚ss_poöt
.
id
);

1622 
	`KAA_FREE
(
sync_buf„r
);

1623  
KAA_ERR_TCPCHANNEL_PARSER_ERROR
;

1626 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
KAA_ERR_NONE
, "Kaa TCP channel [0x%08X] goingÅo send KAASYNC message (%d bytes)",

1627 
£lf
->
ac˚ss_poöt
.
id
, 
sync_size
);

1629 
îr‹_code
 = 
	`kØ_buf„r_lock_•a˚
(
£lf
->
out_buf„r
, 
buf„r_size
);

1631 
	`KAA_FREE
(
sync_buf„r
);

1632 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

1634 
îr‹_code
 = 
	`kØ_t˝_wrôe_buf„r
(
£lf
);

1635  
îr‹_code
;

1636 
	}
}

1643 
kØ_îr‹_t
 
	$kØ_t˝_wrôe_buf„r
(
kØ_t˝_ch™√l_t
 *
£lf
)

1645 
	`KAA_RETURN_IF_NIL
(
£lf
, 
KAA_ERR_BADPARAM
);

1646 *
buf
 = 
NULL
;

1647 
size_t
 
buf_size
 = 0;

1648 
size_t
 
byãs_wrôãn
 = 0;

1649 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_buf„r_gë_u≈ro˚s£d_•a˚
(
£lf
->
out_buf„r
, &
buf
, &
buf_size
);

1650 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
îr‹_code
, "Kaa TCP channel [0x%08X] writing %zu bytesÅoÅhe socket",

1651 
£lf
->
ac˚ss_poöt
.
id
, 
buf_size
);

1652 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

1653 i‡(
buf_size
 > 0) {

1654 
ext_t˝_sockë_io_îr‹s_t
 
io_îr‹
 =

1655 
	`ext_t˝_utûs_t˝_sockë_wrôe
(
£lf
->
ac˚ss_poöt
.
sockë_des¸ùt‹
,

1656 
buf
, 
buf_size
, &
byãs_wrôãn
);

1657 
io_îr‹
) {

1658 
KAA_TCP_SOCK_IO_OK
:

1659 
îr‹_code
 = 
	`kØ_buf„r_‰ì_Æloˇãd_•a˚
(
£lf
->
out_buf„r
, 
byãs_wrôãn
);

1660 
	`KAA_LOG_TRACE
(
£lf
->
loggî
, 
îr‹_code
, "Kaa TCP channel [0x%08X] %zu bytes were successfully written",

1661 
£lf
->
ac˚ss_poöt
.
id
, 
byãs_wrôãn
);

1664 
	`KAA_LOG_WARN
(
£lf
->
loggî
, 
KAA_ERR_SOCKET_ERROR
, "Kaa TCP channel [0x%08X] write failed",

1665 
£lf
->
ac˚ss_poöt
.
id
);

1666 
îr‹_code
 = 
	`kØ_t˝_ch™√l_sockë_io_îr‹
(
£lf
, 
KAA_CHANNEL_NA
);

1671  
îr‹_code
;

1672 
	}
}

1678 
kØ_îr‹_t
 
	$kØ_t˝_ch™√l_pög
(
kØ_t˝_ch™√l_t
 *
£lf
)

1680 
	`KAA_RETURN_IF_NIL
(
£lf
, 
KAA_ERR_BADPARAM
);

1681 
kØ_îr‹_t
 
îr‹_code
 = 
KAA_ERR_NONE
;

1682 *
buf„r
 = 
NULL
;

1683 
size_t
 
buf„r_size
 = 0;

1685 
	`kØ_buf„r_gë_‰ì_•a˚
(
£lf
->
out_buf„r
, &
buf„r_size
);

1686 i‡(
buf„r_size
 < 
KAA_PING_MESSAGE_SIZE
) {

1687 
îr‹_code
 = 
	`kØ_buf„r_ªÆloˇã_•a˚
(
£lf
->
out_buf„r
, 
KAA_PING_MESSAGE_SIZE
);

1690 
îr‹_code
 = 
	`kØ_buf„r_Æloˇã_•a˚
(
£lf
->
out_buf„r
, &
buf„r
, &
buf„r_size
);

1691 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

1693 
kØt˝_îr‹_t
 
kØt˝_îr‹_code
 = 
	`kØt˝_gë_ªque°_pög
(
buf„r
, &
buf„r_size
);

1695 i‡(
kØt˝_îr‹_code
) {

1696 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
KAA_ERR_TCPCHANNEL_PARSER_ERROR
, "Kaa TCP channel [0x%08X] failedÅo serialize PING message",

1697 
£lf
->
ac˚ss_poöt
.
id
);

1698  
KAA_ERR_TCPCHANNEL_PARSER_ERROR
;

1701 
îr‹_code
 = 
	`kØ_buf„r_lock_•a˚
(
£lf
->
out_buf„r
, 
buf„r_size
);

1703 
£lf
->
kì∑live
.
œ°_£¡_kì∑live
 = 
	`KAA_TIME
();

1705 
	`KAA_LOG_INFO
(
£lf
->
loggî
,
KAA_ERR_NONE
,"Kaa TCP channel [0x%08X] goingÅo send PING message (%zu bytes)",

1706 
£lf
->
ac˚ss_poöt
.
id
, 
buf„r_size
);

1708  
îr‹_code
;

1709 
	}
}

1716 
kØ_îr‹_t
 
	$kØ_t˝_ch™√l_disc⁄√˘_öã∫Æ
(
kØ_t˝_ch™√l_t
 *
£lf
,

1717 
kØt˝_disc⁄√˘_ªas⁄_t
 
ªtu∫_code
)

1719 
	`KAA_RETURN_IF_NIL
(
£lf
, 
KAA_ERR_BADPARAM
);

1721 
kØ_îr‹_t
 
îr‹_code
 = 
KAA_ERR_NONE
;

1723 *
buf„r
 = 
NULL
;

1724 
size_t
 
buf„r_size
 = 0;

1726 
	`kØ_buf„r_gë_‰ì_•a˚
(
£lf
->
out_buf„r
, &
buf„r_size
);

1727 i‡(
buf„r_size
 < 
KAA_DISCONNECT_MESSAGE_SIZE
) {

1728 
îr‹_code
 = 
	`kØ_buf„r_ªÆloˇã_•a˚
(
£lf
->
out_buf„r
, 
KAA_DISCONNECT_MESSAGE_SIZE
);

1731 
îr‹_code
 = 
	`kØ_buf„r_Æloˇã_•a˚
(
£lf
->
out_buf„r
, &
buf„r
, &
buf„r_size
);

1732 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

1734 
kØt˝_disc⁄√˘_t
 
disc⁄√˘_mesßge
;

1735 
kØt˝_îr‹_t
 
kØt˝_îr‹_code
 = 
	`kØt˝_fûl_disc⁄√˘_mesßge
(
ªtu∫_code


1736 , &
disc⁄√˘_mesßge
);

1738 i‡(
kØt˝_îr‹_code
) {

1739 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
KAA_ERR_TCPCHANNEL_PARSER_ERROR
, "Kaa TCP channel [0x%08X] failedÅo fill DISCONNECT message",

1740 
£lf
->
ac˚ss_poöt
.
id
);

1741  
KAA_ERR_TCPCHANNEL_PARSER_ERROR
;

1744 
kØt˝_îr‹_code
 = 
	`kØt˝_gë_ªque°_disc⁄√˘
(&
disc⁄√˘_mesßge
, 
buf„r
, &
buf„r_size
);

1746 i‡(
kØt˝_îr‹_code
) {

1747 
	`KAA_LOG_ERROR
(
£lf
->
loggî
, 
KAA_ERR_TCPCHANNEL_PARSER_ERROR
, "Kaa TCP channel [0x%08X] failedÅo serialize DISCONNECT message",

1748 
£lf
->
ac˚ss_poöt
.
id
);

1749  
KAA_ERR_TCPCHANNEL_PARSER_ERROR
;

1752 
îr‹_code
 = 
	`kØ_buf„r_lock_•a˚
(
£lf
->
out_buf„r
, 
buf„r_size
);

1754 
£lf
->
ch™√l_°©e
 = 
KAA_TCP_CHANNEL_DISCONNECTING
;

1756 
	`KAA_LOG_TRACE
(
£lf
->
loggî
,
KAA_ERR_NONE
,"Kaa TCP channel [0x%08X] goingÅo send DISCONNECT message (%zu bytes)",

1757 
£lf
->
ac˚ss_poöt
.
id
, 
buf„r_size
);

1759  
îr‹_code
;

1760 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/common/kaa_tcp_channel.h

18 #i‚de‡
KAA_TCP_CHANNEL_H_


19 
	#KAA_TCP_CHANNEL_H_


	)

21 
	~"kØ_îr‹.h
"

22 
	~"∂©f‹m/ext_å™•‹t_ch™√l.h
"

23 
	~<∂©f‹m/deÁu…s.h
>

24 
	~"∂©f‹m/ext_t˝_utûs.h
"

26 #ifde‡
__˝lu•lus


32 
FD_READ
,

33 
FD_WRITE
,

34 
FD_EXCEPTION


35 } 
	tfd_evít_t
;

39 
SOCKET_CONNECTED
,

40 
SOCKET_DISCONNECTED
,

41 
SOCKET_CONNECTION_ERROR


42 } 
	tkØ_t˝_ch™√l_evít_t
;

57 
kØ_îr‹_t
 (*
	t⁄_kØ_t˝_ch™√l_evít_‚
)(*
	tc⁄ãxt


58 , 
	tkØ_t˝_ch™√l_evít_t
 
	tevít_ty≥


59 , 
	tkØ_fd_t
 
	tfd
);

72 
kØ_îr‹_t
 
kØ_t˝_ch™√l_¸óã
(
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
£lf


73 , 
kØ_loggî_t
 *
loggî


74 , 
kØ_exãnsi⁄_id
 *
suµ‹ãd_£rvi˚s


75 , 
size_t
 
suµ‹ãd_£rvi˚_cou¡
);

87 
kØ_îr‹_t
 
kØ_t˝_ch™√l_gë_des¸ùt‹
(
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
£lf


88 , 
kØ_fd_t
 *
fd_p
);

100 
boﬁ
 
kØ_t˝_ch™√l_is_ªady
(
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
£lf


101 , 
fd_evít_t
 
evít_ty≥
);

112 
kØ_îr‹_t
 
kØ_t˝_ch™√l_¥o˚ss_evít
(
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
£lf


113 , 
fd_evít_t
 
evít_ty≥
);

126 
kØ_îr‹_t
 
kØ_t˝_ch™√l_gë_max_timeout
(
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
£lf


127 , 
uöt16_t
 *
max_timeout
);

140 
kØ_îr‹_t
 
kØ_t˝_ch™√l_check_kì∑live
(
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
£lf
);

154 
kØ_îr‹_t
 
kØ_t˝_ch™√l_£t_sockë_evíts_ˇŒback
(
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
£lf


155 , 
⁄_kØ_t˝_ch™√l_evít_‚
 
ˇŒback


156 , *
c⁄ãxt
);

165 
kØ_îr‹_t
 
kØ_t˝_ch™√l_disc⁄√˘
(
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
£lf
);

167 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/common/key_utils.c

17 
	~<°dboﬁ.h
>

18 
	~<°ddef.h
>

19 
	~<°döt.h
>

20 
	~<sys/°©.h
>

21 
	~<°rög.h
>

22 
	~<∂©f‹m/ext_key_utûs.h
>

23 
	~<utûôõs/kØ_mem.h
>

24 
	~<utûôõs/kØ_´s_rß.h
>

25 
	~<kØ_comm⁄.h
>

26 
	~<kØ_îr‹.h
>

28 
	~<mbedés/pk.h
>

30 #ifde‡
KAA_RUNTIME_KEY_GENERATION


31 
	~<mbedés/íå›y.h
>

32 
	~<mbedés/˘r_drbg.h
>

33 
	~<mbedés/md.h
>

35 
	~<kØ_rß_key_gí.h
>

37 
	#KAA_PRIVATE_KEY_STORAGE
 "key.¥iv©e"

	)

38 
	#KAA_PUBLIC_KEY_STORAGE
 "key.public"

	)

40 
	#KAA_RSA_PUBLIC_KEY_LENGTH_MAX
 294

	)

41 
	#KAA_SHA1_PUB_LEN
 20

	)

42 
	#KAA_SHA1_PUB_BASE64_LEN
 28

	)

44 
mbedés_pk_c⁄ãxt
 
	gpk_pub_c⁄ãxt
;

46 
	~<kØ_keys_gí.h
>

50 
mbedés_pk_c⁄ãxt
 
	gkØ_pk_c⁄ãxt_
;

52 
kØ_îr‹_t
 
	$kØ_öô_rß_key∑ú
()

54 #ifde‡
KAA_RUNTIME_KEY_GENERATION


56 
boﬁ
 
öôülized
 = 
Ál£
;

57 i‡(!
öôülized
) {

58 i‡(
	`mbedés_pk_∑r£_keyfûe
(&
kØ_pk_c⁄ãxt_
, 
KAA_PRIVATE_KEY_STORAGE
, 
NULL
)) {

59 i‡(
	`rß_gíkey
(&
kØ_pk_c⁄ãxt_
)) {

60 
	`mbedés_pk_‰ì
(&
kØ_pk_c⁄ãxt_
);

61  
KAA_ERR_BADDATA
;

63 i‡(
	`wrôe_rß_key
(&
kØ_pk_c⁄ãxt_
, 
KAA_PRIVATE_KEY_STORAGE
, 
PRIVATE_KEY
)) {

64 
	`mbedés_pk_‰ì
(&
kØ_pk_c⁄ãxt_
);

65  
KAA_ERR_BADDATA
;

67 i‡(
	`wrôe_rß_key
(&
kØ_pk_c⁄ãxt_
, 
KAA_PUBLIC_KEY_STORAGE
, 
PUBLIC_KEY
)) {

68 
	`mbedés_pk_‰ì
(&
kØ_pk_c⁄ãxt_
);

69  
KAA_ERR_BADDATA
;

72 i‡(
	`mbedés_pk_∑r£_public_keyfûe
(&
pk_pub_c⁄ãxt
, 
KAA_PUBLIC_KEY_STORAGE
)) {

73 
pk_pub_c⁄ãxt
 = 
kØ_pk_c⁄ãxt_
;

75 
öôülized
 = 
åue
;

78 i‡(
	`mbedés_pk_∑r£_key
(&
kØ_pk_c⁄ãxt_
, 
KAA_RSA_PRIVATE_KEY
,

79 
KAA_RSA_PRIVATE_KEY_LENGTH
, 
NULL
, 0)) {

80  
KAA_ERR_BADDATA
;

83  
KAA_ERR_NONE
;

84 
	}
}

86 
	$kØ_deöô_rß_key∑ú
()

88 
	`mbedés_pk_‰ì
(&
kØ_pk_c⁄ãxt_
);

89 
	}
}

91 #ifde‡
KAA_RUNTIME_KEY_GENERATION


93 
__©åibuã__
((
wók
))

94 
	$ext_gë_ídpoöt_public_key
(c⁄° 
uöt8_t
 **
buf„r
, 
size_t
 *
buf„r_size
)

96 i‡(
buf„r
 =
NULL
 || 
buf„r_size
 == 0) {

99 
key_Àngth
;

100 
öôülized
 = 
Ál£
;

101 
uöt8_t
 
buff
[
KAA_RSA_PUBLIC_KEY_LENGTH_MAX
];

102 i‡(!
öôülized
) {

103 
key_Àngth
 = 
	`mbedés_pk_wrôe_pubkey_dî
(&
pk_pub_c⁄ãxt
, 
buff
, (buff));

104 i‡(
key_Àngth
 < 0) {

105 *
buf„r
 = 
NULL
;

106 *
buf„r_size
 = 0;

109 
öôülized
 = 
åue
;

111 *
buf„r
 = 
buff
;

112 *
buf„r_size
 = 
key_Àngth
;

113 
	}
}

115 
	$ext_gë_sha1_public
(
uöt8_t
 **
sha1
, 
size_t
 *
Àngth
)

117 i‡(
sha1
 =
NULL
 || 
Àngth
 == NULL) {

120 
uöt8_t
 
sha1_public
[
KAA_SHA1_PUB_LEN
];

121 
öôülized
 = 
Ál£
;

122 i‡(!
öôülized
) {

123 
uöt8_t
 
pub_key
[
KAA_RSA_PUBLIC_KEY_LENGTH_MAX
];

124 
key_Àngth
 = 
	`mbedés_pk_wrôe_pubkey_dî
(&
pk_pub_c⁄ãxt
, 
pub_key
, 
KAA_RSA_PUBLIC_KEY_LENGTH_MAX
);

125 i‡(
key_Àngth
 < 0) {

126 *
sha1
 = 
NULL
;

127 *
Àngth
 = 0;

130 
	`sha1_‰om_public_key
(
pub_key
, 
key_Àngth
, 
sha1_public
);

131 
öôülized
 = 
åue
;

133 *
Àngth
 = 
KAA_SHA1_PUB_LEN
;

134 *
sha1
 = 
sha1_public
;

135 
	}
}

137 
kØ_îr‹_t
 
	$ext_gë_sha1_ba£64_public
(c⁄° 
uöt8_t
 **
sha1
, 
size_t
 *
Àngth
)

139 i‡(
sha1
 =
NULL
 || 
Àngth
 == NULL) {

140  
KAA_ERR_BADPARAM
;

142 
size_t
 
sha1_ba£64_Àn
 = 0;

144 
uöt8_t
 
sha1_ba£64_buf„r
[
KAA_SHA1_PUB_BASE64_LEN
 + 1];

145 
öôülized
 = 
Ál£
;

146 i‡(!
öôülized
) {

147 
uöt8_t
 
pub_key
[
KAA_RSA_PUBLIC_KEY_LENGTH_MAX
];

148 
uöt8_t
 
sha1_public
[
KAA_SHA1_PUB_LEN
];

149 
key_Àngth
 = 
	`mbedés_pk_wrôe_pubkey_dî
(&
pk_pub_c⁄ãxt
, 
pub_key
, 
KAA_RSA_PUBLIC_KEY_LENGTH_MAX
);

150 i‡(
key_Àngth
 < 0) {

151  
KAA_ERR_BADDATA
;

153 
	`sha1_‰om_public_key
(
pub_key
, 
key_Àngth
, 
sha1_public
);

154 
îr‹
 = 
	`sha1_to_ba£64
(
sha1_public
, (sha1_public), 
sha1_ba£64_buf„r
, (sha1_ba£64_buf„r), &
sha1_ba£64_Àn
);

155 i‡(
îr‹
) {

156  
KAA_ERR_BADDATA
;

158 
öôülized
 = 
åue
;

160 *
sha1
 = 
sha1_ba£64_buf„r
;

161 *
Àngth
 = 
sha1_ba£64_Àn
;

162  
KAA_ERR_NONE
;

163 
	}
}

166 
__©åibuã__
((
wók
))

167 
	$ext_gë_ídpoöt_public_key
(c⁄° 
uöt8_t
 **
buf„r
, 
size_t
 *
buf„r_size
)

169 i‡(
buf„r
 =
NULL
 || 
buf„r_size
 == NULL) {

173 *
buf„r
 = 
KAA_RSA_PUBLIC_KEY
;

174 *
buf„r_size
 = 
KAA_RSA_PUBLIC_KEY_LENGTH
;

175 
	}
}

177 
	$ext_gë_sha1_public
(
uöt8_t
 **
sha1
, 
size_t
 *
Àngth
)

179 i‡(
sha1
 =
NULL
 || 
Àngth
 == NULL) {

182 *
sha1
 = (
uöt8_t
 *)
KAA_SHA1_PUB
;

183 *
Àngth
 = 
KAA_SHA1_PUB_LEN
;

184 
	}
}

186 
kØ_îr‹_t
 
	$ext_gë_sha1_ba£64_public
(c⁄° 
uöt8_t
 **
sha1
, 
size_t
 *
Àngth
)

188 i‡(
sha1
 =
NULL
 || 
Àngth
 == NULL) {

189  
KAA_ERR_BADPARAM
;

191 *
sha1
 = (
uöt8_t
 *)
KAA_SHA1_PUB_BASE64
;

192 *
Àngth
 = 
KAA_SHA1_PUB_BASE64_LEN
;

193  
KAA_ERR_NONE
;

194 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/common/sha.c

17 
	~<°döt.h
>

18 
	~<°ddef.h
>

19 
	~<mbedés/sha1.h
>

20 
	~<°rög.h
>

22 
	~"kØ_comm⁄.h
"

23 
	~"∂©f‹m/ext_sha.h
"

25 
kØ_îr‹_t
 
	$ext_ˇlcuœã_sha_hash
(c⁄° *
d©a
, 
size_t
 
d©a_size
, 
kØ_dige°
 
dige°
)

27 i‡((
dige°
 =
NULL
Ë|| ((
d©a
 =NULLË&& (
d©a_size
 != 0))) {

28  
KAA_ERR_BADPARAM
;

31 
mbedés_sha1_c⁄ãxt
 
sha1_˘x
;

32 
	`mbedés_sha1_öô
(&
sha1_˘x
);

33 
	`mbedés_sha1_°¨ts
(&
sha1_˘x
);

34 
	`mbedés_sha1_upd©e
(&
sha1_˘x
, (*)
d©a
, ()
d©a_size
);

35 
	`mbedés_sha1_föish
(&
sha1_˘x
, (*)
dige°
);

36 
	`mbedés_sha1_‰ì
(&
sha1_˘x
);

38  
KAA_ERR_NONE
;

39 
	}
}

41 
kØ_îr‹_t
 
	$ext_c›y_sha_hash
(
kØ_dige°_p
 
d°
, c⁄° kØ_dige°_∞
§c
)

43 i‡(!
d°
 || !
§c
) {

44  
KAA_ERR_BADPARAM
;

47 
	`mem˝y
(
d°
, 
§c
, 
SHA_1_DIGEST_LENGTH
);

48  
KAA_ERR_NONE
;

49 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/esp8266/configuration_persistence.c

17 
	~<°ddef.h
>

18 
	~<°dboﬁ.h
>

19 
	~<∂©f‹m/ext_c⁄figuøti⁄_≥rsi°í˚.h
>

21 
	#KAA_CONFIGURATION_STORAGE
 ""

	)

23 
	$ext_c⁄figuøti⁄_ªad
(**
buf„r
, 
size_t
 *
buf„r_size
, 
boﬁ
 *
√eds_dóŒoˇti⁄
) {

24 ()
buf„r
;

25 ()
buf„r_size
;

26 ()
√eds_dóŒoˇti⁄
;

27 
	}
}

29 
	$ext_c⁄figuøti⁄_°‹e
(c⁄° *
buf„r
, 
size_t
 
buf„r_size
) {

30 ()
buf„r
;

31 ()
buf„r_size
;

32 
	}
}

34 
	$ext_c⁄figuøti⁄_dñëe
()

37 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/esp8266/exit.c

17 
	~<‰ìπos/FªeRTOS.h
>

18 
	~<‰ìπos/èsk.h
>

20 
	$exô
(
°©us
)

22 ()
°©us
;

23 
	`vTaskDñëe
(
NULL
);

24 
åue
);

25 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/esp8266/kaa_client.c

17 
	~<°döt.h
>

18 
	~<°dio.h
>

20 
	~<kØ.h
>

21 
	~<kØ_c⁄ãxt.h
>

22 
	~<∂©f‹m/kØ_˛õ¡.h
>

23 
	~"∂©f‹m/ext_å™•‹t_ch™√l.h
"

24 
	~"utûôõs/kØ_mem.h
"

25 
	~"utûôõs/kØ_log.h
"

26 
	~<∂©f‹m/time.h
>

27 
	~"kØ_ch™√l_m™agî.h
"

28 
	~"∂©f‹m-im∂/comm⁄/kØ_t˝_ch™√l.h
"

29 
	~"∂©f‹m-im∂/comm⁄/ext_log_u∂ﬂd_°øãgõs.h
"

30 
	~"∂©f‹m/ext_kØ_Áûovî_°øãgy.h
"

32 #i‚de‡
KAA_DISABLE_FEATURE_LOGGING


33 
	~"kØ_loggög.h
"

34 
	~"kØ_loggög_¥iv©e.h
"

36 
kØ_îr‹_t
 
kØ_log_cﬁÀ˘‹_öô
(
kØ_˛õ¡_t
 *
kØ_˛õ¡
);

39 
	~"kØ_¥iv©e.h
"

42 
	mKAA_CLIENT_CHANNEL_STATE_CONNECTED
 = 0,

43 
	mKAA_CLIENT_CHANNEL_STATE_NOT_CONNECTED


44 } 
	tkØ_˛õ¡_ch™√l_°©e_t
;

47 
	mKAA_CLIENT_CHANNEL_TYPE_BOOTSTRAP
 = 0,

48 
	mKAA_CLIENT_CHANNEL_TYPE_OPERATIONS


49 } 
	tkØ_˛õ¡_ch™√l_ty≥_t
;

51 
kØ_exãnsi⁄_id
 
	gBOOTSTRAP_SERVICE
[] = { 
KAA_EXTENSION_BOOTSTRAP
 };

52 c⁄° 
	gBOOTSTRAP_SERVICE_COUNT
 = (
BOOTSTRAP_SERVICE
Ë/ (
kØ_exãnsi⁄_id
);

54 
kØ_exãnsi⁄_id
 
	gOPERATIONS_SERVICES
[] = { 
KAA_EXTENSION_PROFILE


55 , 
KAA_EXTENSION_USER


56 #i‚de‡
KAA_DISABLE_FEATURE_CONFIGURATION


57 , 
KAA_EXTENSION_CONFIGURATION


59 #i‚de‡
KAA_DISABLE_FEATURE_EVENTS


60 , 
KAA_EXTENSION_EVENT


62 #i‚de‡
KAA_DISABLE_FEATURE_LOGGING


63 , 
KAA_EXTENSION_LOGGING


65 #i‚de‡
KAA_DISABLE_FEATURE_NOTIFICATION


66 , 
KAA_EXTENSION_NOTIFICATION


69 c⁄° 
	gOPERATIONS_SERVICES_COUNT
 = (
OPERATIONS_SERVICES
Ë/ (
kØ_exãnsi⁄_id
);

72 
	#MAX_LOG_COUNT
 
SIZE_MAX


	)

73 
	#MAX_LOG_BUCKET_SIZE
 (
KAA_TCP_CHANNEL_OUT_BUFFER_SIZE
 >> 3)

	)

75 
_Sètic_as£π
(
MAX_LOG_BUCKET_SIZE
, "Maximum bucket size cannot be 0!");

77 
	skØ_˛õ¡_t
 {

78 
kØ_c⁄ãxt_t
 *
	mc⁄ãxt
;

79 
boﬁ
 
	m›î©e
;

81 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 
	mch™√l
;

82 
kØ_˛õ¡_ch™√l_°©e_t
 
	mch™√l_°©e
;

83 
uöt32_t
 
	mch™√l_id
;

84 
boﬁ
 
	mch™√l_sockë_˛o£d
;

86 
boﬁ
 
	mboŸ°øp_com∂ëe
;

88 
exã∫Æ_¥o˚ss_‚
 
	mexã∫Æ_¥o˚ss
;

89 *
	mexã∫Æ_¥o˚ss_c⁄ãxt
;

90 
time_t
 
	mexã∫Æ_¥o˚ss_max_dñay
;

91 
time_t
 
	mexã∫Æ_¥o˚ss_œ°_ˇŒ
;

93 #i‚de‡
KAA_DISABLE_FEATURE_LOGGING


94 *
	mlog_°‹age_c⁄ãxt
;

95 *
	mlog_u∂ﬂd_°øãgy_c⁄ãxt
;

99 
kØ_îr‹_t
 
kØ_˛õ¡_öô_ch™√l
(
kØ_˛õ¡_t
 *
kØ_˛õ¡
, 
kØ_˛õ¡_ch™√l_ty≥_t
 
ch™√l_ty≥
);

100 
kØ_îr‹_t
 
kØ_˛õ¡_deöô_ch™√l
(
kØ_˛õ¡_t
 *
kØ_˛õ¡
);

101 
kØ_îr‹_t
 
⁄_kØ_t˝_ch™√l_evít
(*
c⁄ãxt
, 
kØ_t˝_ch™√l_evít_t
 
evít_ty≥
, 
kØ_fd_t
 
fd
);

103 
	#KAA_RETURN_IF_ERR_MSG
(
E
, 
msg
) \

104 { if(
E
Ë{ 
	`¥ötf
("Eº‹ %i. \"%s\"\n",(E), (
msg
));  (E); } }

	)

107 
kØ_îr‹_t
 
	$⁄_kØ_t˝_ch™√l_evít
(*
c⁄ãxt
, 
kØ_t˝_ch™√l_evít_t
 
evít_ty≥
, 
kØ_fd_t
 
fd
)

109 ()
fd
;

110 
	`KAA_RETURN_IF_NIL
(
c⁄ãxt
, 
KAA_ERR_BADPARAM
);

112 i‡(
evít_ty≥
 =
SOCKET_DISCONNECTED
) {

113 ((
kØ_˛õ¡_t
 *)
c⁄ãxt
)->
ch™√l_sockë_˛o£d
 = 
åue
;

116  
KAA_ERR_NONE
;

117 
	}
}

119 
kØ_îr‹_t
 
	$kØ_˛õ¡_¸óã
(
kØ_˛õ¡_t
 **
˛õ¡
, 
kØ_˛õ¡_¥›s_t
 *
¥›s
) {

120 ()
¥›s
;

121 
	`KAA_RETURN_IF_NIL
(
˛õ¡
, 
KAA_ERR_BADPARAM
);

123 
kØ_˛õ¡_t
 *
£lf
 = (kØ_˛õ¡_t*)
	`KAA_CALLOC
(1, (kaa_client_t));

124 
	`KAA_RETURN_IF_NIL
(
£lf
, 
KAA_ERR_NOMEM
);

125 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_öô
(&
£lf
->
c⁄ãxt
);

127 if(
îr‹_code
) {

128 
	`¥ötf
("Error initialising kaa_context\n");

129 
	`kØ_˛õ¡_de°roy
(
£lf
);

130  
îr‹_code
;

133 
£lf
->
›î©e
 = 
åue
;

135 #i‚de‡
KAA_DISABLE_FEATURE_LOGGING


136 
îr‹_code
 = 
	`kØ_log_cﬁÀ˘‹_öô
(
£lf
);

137 i‡(
îr‹_code
) {

138 
	`KAA_LOG_ERROR
(
£lf
->
c⁄ãxt
->
loggî
, 
îr‹_code
, "FailedÅo init KaaÜog collector,Érror %d",Érror_code);

139 
	`kØ_˛õ¡_de°roy
(
£lf
);

140  
îr‹_code
;

144 
	`KAA_LOG_INFO
(
£lf
->
c⁄ãxt
->
loggî
,
KAA_ERR_NONE
, "Kaa client initiallized");

145 *
˛õ¡
 = 
£lf
;

146  
îr‹_code
;

147 
	}
}

149 
kØ_c⁄ãxt_t
 *
	$kØ_˛õ¡_gë_c⁄ãxt
(
kØ_˛õ¡_t
 *
˛õ¡
)

151 
	`KAA_RETURN_IF_NIL
(
˛õ¡
, 
NULL
);

152  
˛õ¡
->
c⁄ãxt
;

153 
	}
}

155 
uöt16_t
 
	$gë_pﬁl_timeout
(
kØ_˛õ¡_t
 *
kØ_˛õ¡
)

157 
	`KAA_RETURN_IF_NIL
(
kØ_˛õ¡
, 0);

159 
uöt16_t
 
£À˘_timeout
;

160 
	`kØ_t˝_ch™√l_gë_max_timeout
(&
kØ_˛õ¡
->
ch™√l
, &
£À˘_timeout
);

163 i‡((
kØ_˛õ¡
->
exã∫Æ_¥o˚ss_max_dñay
 > 0Ë&& (
£À˘_timeout
 > kaa_client->external_process_max_delay)) {

164 
£À˘_timeout
 = 
kØ_˛õ¡
->
exã∫Æ_¥o˚ss_max_dñay
;

167 i‡((
KAA_BOOTSTRAP_RESPONSE_PERIOD
 > 0Ë&& (
£À˘_timeout
 > KAA_BOOTSTRAP_RESPONSE_PERIOD)) {

168 
£À˘_timeout
 = 
KAA_BOOTSTRAP_RESPONSE_PERIOD
;

171  
£À˘_timeout
;

172 
	}
}

175 
kØ_îr‹_t
 
	$kØ_˛õ¡_¥o˚ss_ch™√l_c⁄√˘ed
(
kØ_˛õ¡_t
 *
kØ_˛õ¡
)

177 
	`KAA_RETURN_IF_NIL
(
kØ_˛õ¡
, 
KAA_ERR_BADPARAM
);

179 
fd_£t
 
ªad_fds
, 
wrôe_fds
, 
ex˚±_fds
;

180 
timevÆ
 
£À˘_tv
 = { 
	`gë_pﬁl_timeout
(
kØ_˛õ¡
), 0 };

181 
ch™√l_fd
 = 0;

183 
	`FD_ZERO
(&
ªad_fds
);

184 
	`FD_ZERO
(&
wrôe_fds
);

185 
	`FD_ZERO
(&
ex˚±_fds
);

187 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_t˝_ch™√l_gë_des¸ùt‹
(&
kØ_˛õ¡
->
ch™√l
, &
ch™√l_fd
);

188 if(
îr‹_code
Ë
	`KAA_LOG_ERROR
(
kØ_˛õ¡
->
c⁄ãxt
->
loggî
,Érror_code, "No descriptorÖrovided!");

190 i‡(
	`kØ_t˝_ch™√l_is_ªady
(&
kØ_˛õ¡
->
ch™√l
, 
FD_READ
))

191 
	`FD_SET
(
ch™√l_fd
, &
ªad_fds
);

192 i‡(
	`kØ_t˝_ch™√l_is_ªady
(&
kØ_˛õ¡
->
ch™√l
, 
FD_WRITE
))

193 
	`FD_SET
(
ch™√l_fd
, &
wrôe_fds
);

195 
pﬁl_ªsu…
 = 
	`£À˘
(
ch™√l_fd
 + 1, &
ªad_fds
, &
wrôe_fds
, 
NULL
, &
£À˘_tv
);

196 i‡(
pﬁl_ªsu…
 == 0) {

197 
îr‹_code
 = 
	`kØ_t˝_ch™√l_check_kì∑live
(&
kØ_˛õ¡
->
ch™√l
);

198 } i‡(
pﬁl_ªsu…
 > 0) {

199 i‡(
ch™√l_fd
 >= 0) {

200 i‡(
	`FD_ISSET
(
ch™√l_fd
, &
ªad_fds
)) {

201 
	`KAA_LOG_DEBUG
(
kØ_˛õ¡
->
c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
,

202 "Pro˚ssög INÉvíàf‹Åhê˛õ¡ sockë %d", 
ch™√l_fd
);

203 
îr‹_code
 = 
	`kØ_t˝_ch™√l_¥o˚ss_evít
(&
kØ_˛õ¡
->
ch™√l
, 
FD_READ
);

204 i‡(
îr‹_code
) {

205 
	`KAA_LOG_ERROR
(
kØ_˛õ¡
->
c⁄ãxt
->
loggî
, 
îr‹_code
,

206 "FaûedÅÿ¥o˚s†INÉvíàf‹Åhê˛õ¡ sockë %d", 
ch™√l_fd
);

209 i‡(
	`FD_ISSET
(
ch™√l_fd
, &
wrôe_fds
)) {

210 
	`KAA_LOG_DEBUG
(
kØ_˛õ¡
->
c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
,

211 "Pro˚ssög OUTÉvíàf‹Åhê˛õ¡ sockë %d", 
ch™√l_fd
);

213 
îr‹_code
 = 
	`kØ_t˝_ch™√l_¥o˚ss_evít
(&
kØ_˛õ¡
->
ch™√l
, 
FD_WRITE
);

214 i‡(
îr‹_code
) {

215 
	`KAA_LOG_ERROR
(
kØ_˛õ¡
->
c⁄ãxt
->
loggî
, 
îr‹_code
,

216 "FaûedÅÿ¥o˚s†OUTÉvíàf‹Åhê˛õ¡ sockë %d", 
ch™√l_fd
);

221 
	`KAA_LOG_ERROR
(
kØ_˛õ¡
->
c⁄ãxt
->
loggî
, 
KAA_ERR_BAD_STATE
, "FailedÅoÖoll descriptors");

222 
îr‹_code
 = 
KAA_ERR_BAD_STATE
;

225 i‡(
kØ_˛õ¡
->
ch™√l_sockë_˛o£d
) {

226 
	`KAA_LOG_INFO
(
kØ_˛õ¡
->
c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
,

227 "Ch™√»[0x%08X] c⁄√˘i⁄Åîmö©ed", 
kØ_˛õ¡
->
ch™√l_id
);

229 
kØ_˛õ¡
->
ch™√l_°©e
 = 
KAA_CLIENT_CHANNEL_STATE_NOT_CONNECTED
;

230 i‡(
îr‹_code
 !
KAA_ERR_EVENT_NOT_ATTACHED
) {

231 
	`kØ_˛õ¡_deöô_ch™√l
(
kØ_˛õ¡
);

235  
îr‹_code
;

236 
	}
}

238 
kØ_îr‹_t
 
	$kØ_˛õ¡_¥o˚ss_ch™√l_disc⁄√˘ed
(
kØ_˛õ¡_t
 *
kØ_˛õ¡
)

240 
	`KAA_RETURN_IF_NIL
(
kØ_˛õ¡
, 
KAA_ERR_BADPARAM
);

242 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_t˝_ch™√l_check_kì∑live
(&
kØ_˛õ¡
->
ch™√l
);

243 i‡(
îr‹_code
) {

244 
	`KAA_LOG_ERROR
(
kØ_˛õ¡
->
c⁄ãxt
->
loggî
, 
îr‹_code
, "FaûedÅÿc⁄√˘ ch™√»[0x%08X]", kØ_˛õ¡->
ch™√l_id
);

246 
	`KAA_LOG_TRACE
(
kØ_˛õ¡
->
c⁄ãxt
->
loggî
, 
îr‹_code
, "Ch™√»[0x%08X] suc˚ssfuŒy c⁄√˘ed", kØ_˛õ¡->
ch™√l_id
);

247 
kØ_˛õ¡
->
ch™√l_°©e
 = 
KAA_CLIENT_CHANNEL_STATE_CONNECTED
;

250  
îr‹_code
;

251 
	}
}

253 
kØ_îr‹_t
 
	$kØ_˛õ¡_°¨t
(
kØ_˛õ¡_t
 *
kØ_˛õ¡
,

254 
exã∫Æ_¥o˚ss_‚
 
exã∫Æ_¥o˚ss
,

255 *
exã∫Æ_¥o˚ss_c⁄ãxt
,

256 
kØ_time_t
 
max_dñay
) {

257 
	`KAA_RETURN_IF_NIL
(
kØ_˛õ¡
, 
KAA_ERR_BADPARAM
);

259 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_check_ªadöess
(
kØ_˛õ¡
->
c⁄ãxt
);

260 i‡(
îr‹_code
 !
KAA_ERR_NONE
) {

261 
	`KAA_LOG_ERROR
(
kØ_˛õ¡
->
c⁄ãxt
->
loggî
, 
îr‹_code
, "Cannot start Kaa client: Kaa context isÇot fully initialized");

262  
îr‹_code
;

265 
kØ_˛õ¡
->
exã∫Æ_¥o˚ss
 =Éxternal_process;

266 
kØ_˛õ¡
->
exã∫Æ_¥o˚ss_c⁄ãxt
 =Éxternal_process_context;

267 
kØ_˛õ¡
->
exã∫Æ_¥o˚ss_max_dñay
 = 
max_dñay
;

268 
kØ_˛õ¡
->
exã∫Æ_¥o˚ss_œ°_ˇŒ
 = 
	`KAA_TIME
();

270 
	`KAA_LOG_INFO
(
kØ_˛õ¡
->
c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
, "Starting Kaa client...");

272 
kØ_˛õ¡
->
›î©e
) {

273 i‡(
kØ_˛õ¡
->
exã∫Æ_¥o˚ss
) {

274 i‡(
	`KAA_TIME
(Ë- 
kØ_˛õ¡
->
exã∫Æ_¥o˚ss_œ°_ˇŒ
 >(
kØ_time_t
)kØ_˛õ¡->
exã∫Æ_¥o˚ss_max_dñay
) {

275 
kØ_˛õ¡
->
	`exã∫Æ_¥o˚ss
(kØ_˛õ¡->
exã∫Æ_¥o˚ss_c⁄ãxt
);

276 
kØ_˛õ¡
->
exã∫Æ_¥o˚ss_œ°_ˇŒ
 = 
	`KAA_TIME
();

279 i‡(
	`kØ_¥o˚ss_Áûovî
(
kØ_˛õ¡
->
c⁄ãxt
)) {

280 
kØ_˛õ¡
->
boŸ°øp_com∂ëe
 = 
Ál£
;

282 if(
kØ_˛õ¡
->
ch™√l_id
>0) {

283 i‡(
kØ_˛õ¡
->
ch™√l_°©e
 =
KAA_CLIENT_CHANNEL_STATE_NOT_CONNECTED
) {

284 
îr‹_code
 = 
	`kØ_˛õ¡_¥o˚ss_ch™√l_disc⁄√˘ed
(
kØ_˛õ¡
);

285 } i‡(
kØ_˛õ¡
->
ch™√l_°©e
 =
KAA_CLIENT_CHANNEL_STATE_CONNECTED
) {

286 
îr‹_code
 = 
	`kØ_˛õ¡_¥o˚ss_ch™√l_c⁄√˘ed
(
kØ_˛õ¡
);

287 i‡(
îr‹_code
 =
KAA_ERR_TIMEOUT
)

288 
	`kØ_˛õ¡_deöô_ch™√l
(
kØ_˛õ¡
);

292 i‡(
kØ_˛õ¡
->
boŸ°øp_com∂ëe
) {

293 
	`KAA_LOG_INFO
(
kØ_˛õ¡
->
c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
,

294 "Ch™√»[0x%08X] Boo°ø∞com∂ëe,ÑeöôülizögÅÿO≥øti⁄†...", 
kØ_˛õ¡
->
ch™√l_id
);

295 
kØ_˛õ¡
->
boŸ°øp_com∂ëe
 = 
Ál£
;

296 
	`kØ_˛õ¡_deöô_ch™√l
(
kØ_˛õ¡
);

297 
	`kØ_˛õ¡_öô_ch™√l
(
kØ_˛õ¡
, 
KAA_CLIENT_CHANNEL_TYPE_OPERATIONS
);

298 i‡(
îr‹_code
 =
KAA_ERR_BAD_STATE
) {

299 
	`kØ_˛õ¡_deöô_ch™√l
(
kØ_˛õ¡
);

300 
kØ_˛õ¡
->
boŸ°øp_com∂ëe
 = 
Ál£
;

303 
	`KAA_LOG_INFO
(
kØ_˛õ¡
->
c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
,

304 "Ch™√»[0x%08X] O≥øti⁄†îr‹,ÑeöôülizögÅÿBoŸ°ø∞...", 
kØ_˛õ¡
->
ch™√l_id
);

305 
kØ_˛õ¡
->
boŸ°øp_com∂ëe
 = 
åue
;

306 
	`kØ_˛õ¡_deöô_ch™√l
(
kØ_˛õ¡
);

308 
	`kØ_˛õ¡_öô_ch™√l
(
kØ_˛õ¡
, 
KAA_CLIENT_CHANNEL_TYPE_BOOTSTRAP
);

312 #i‚de‡
KAA_DISABLE_FEATURE_LOGGING


313 
	`ext_log_u∂ﬂd_timeout
(
kØ_˛õ¡
->
c⁄ãxt
->
log_cﬁÀ˘‹
);

316 
	`KAA_LOG_INFO
(
kØ_˛õ¡
->
c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
, "Kaa client stopped");

318  
îr‹_code
;

319 
	}
}

321 
kØ_îr‹_t
 
	$kØ_˛õ¡_öô_ch™√l
(
kØ_˛õ¡_t
 *
kØ_˛õ¡
, 
kØ_˛õ¡_ch™√l_ty≥_t
 
ch™√l_ty≥
)

323 
	`KAA_RETURN_IF_NIL
(
kØ_˛õ¡
, 
KAA_ERR_BADPARAM
);

325 
kØ_îr‹_t
 
îr‹_code
 = 
KAA_ERR_NONE
;

327 
	`KAA_LOG_TRACE
(
kØ_˛õ¡
->
c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
, "Initializing channel....");

329 
ch™√l_ty≥
) {

330 
KAA_CLIENT_CHANNEL_TYPE_BOOTSTRAP
:

331 
îr‹_code
 = 
	`kØ_t˝_ch™√l_¸óã
(&
kØ_˛õ¡
->
ch™√l


332 , 
kØ_˛õ¡
->
c⁄ãxt
->
loggî


333 , 
BOOTSTRAP_SERVICE


334 , 
BOOTSTRAP_SERVICE_COUNT
);

336 
KAA_CLIENT_CHANNEL_TYPE_OPERATIONS
:

337 
îr‹_code
 = 
	`kØ_t˝_ch™√l_¸óã
(&
kØ_˛õ¡
->
ch™√l


338 , 
kØ_˛õ¡
->
c⁄ãxt
->
loggî


339 , 
OPERATIONS_SERVICES


340 , 
OPERATIONS_SERVICES_COUNT
);

344 i‡(
îr‹_code
) {

345 
	`KAA_LOG_ERROR
(
kØ_˛õ¡
->
c⁄ãxt
->
loggî
, 
îr‹_code
, "FaûedÅÿ¸óãÅøn•‹àch™√l,Åy≥ %d", 
ch™√l_ty≥
);

346  
îr‹_code
;

349 
îr‹_code
 = 
	`kØ_t˝_ch™√l_£t_sockë_evíts_ˇŒback
(&
kØ_˛õ¡
->
ch™√l
, &
⁄_kØ_t˝_ch™√l_evít
, kaa_client);

350 i‡(
îr‹_code
) {

351 
	`KAA_LOG_ERROR
(
kØ_˛õ¡
->
c⁄ãxt
->
loggî
, 
îr‹_code
,

352 "FaûedÅÿ£àsockëÉvít†ˇŒback, ch™√»ty≥ %d", 
ch™√l_ty≥
);

353  
îr‹_code
;

356 
îr‹_code
 = 
	`kØ_ch™√l_m™agî_add_å™•‹t_ch™√l
(
kØ_˛õ¡
->
c⁄ãxt
->
ch™√l_m™agî


357 , &
kØ_˛õ¡
->
ch™√l


358 , &
kØ_˛õ¡
->
ch™√l_id
);

359 i‡(
îr‹_code
) {

360 
	`KAA_LOG_ERROR
(
kØ_˛õ¡
->
c⁄ãxt
->
loggî
, 
îr‹_code
, "FaûedÅÿaddÅøn•‹àch™√l,Åy≥ %d", 
ch™√l_ty≥
);

361  
îr‹_code
;

364 
	`KAA_LOG_INFO
(
kØ_˛õ¡
->
c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
, "Channel [0x%08X] initialized successfully (type %d)"

365 , 
kØ_˛õ¡
->
ch™√l_id
, 
ch™√l_ty≥
);

367  
îr‹_code
;

368 
	}
}

370 
kØ_îr‹_t
 
	$kØ_˛õ¡_deöô_ch™√l
(
kØ_˛õ¡_t
 *
kØ_˛õ¡
)

372 
	`KAA_RETURN_IF_NIL
(
kØ_˛õ¡
, 
KAA_ERR_BADPARAM
);

374 
kØ_îr‹_t
 
îr‹_code
 = 
KAA_ERR_NONE
;

376 i‡(
kØ_˛õ¡
->
ch™√l_id
 == 0)

377  
KAA_ERR_NONE
;

379 
	`KAA_LOG_TRACE
(
kØ_˛õ¡
->
c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
, "Deinitializing channel....");

381 
îr‹_code
 = 
	`kØ_ch™√l_m™agî_ªmove_å™•‹t_ch™√l
(
kØ_˛õ¡
->
c⁄ãxt
->
ch™√l_m™agî
,kØ_˛õ¡->
ch™√l_id
);

382 i‡(
îr‹_code
) {

383 
	`KAA_LOG_TRACE
(
kØ_˛õ¡
->
c⁄ãxt
->
loggî
, 
îr‹_code
, "Bootstrap channelÉrrorÑemoving from channel manager");

384  
îr‹_code
;

387 
kØ_˛õ¡
->
ch™√l_id
 = 0;

388 
kØ_˛õ¡
->
ch™√l_sockë_˛o£d
 = 
Ál£
;

389 
kØ_˛õ¡
->
ch™√l
.
c⁄ãxt
 = 
NULL
;

390 
kØ_˛õ¡
->
ch™√l
.
de°roy
 = 
NULL
;

391 
kØ_˛õ¡
->
ch™√l
.
gë_¥Ÿocﬁ_id
 = 
NULL
;

392 
kØ_˛õ¡
->
ch™√l
.
gë_suµ‹ãd_£rvi˚s
 = 
NULL
;

393 
kØ_˛õ¡
->
ch™√l
.
öô
 = 
NULL
;

394 
kØ_˛õ¡
->
ch™√l
.
£t_ac˚ss_poöt
 = 
NULL
;

395 
kØ_˛õ¡
->
ch™√l
.
sync_h™dÀr
 = 
NULL
;

397 
	`KAA_LOG_TRACE
(
kØ_˛õ¡
->
c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
, "Channel deinitialized successfully");

399  
îr‹_code
;

400 
	}
}

403 
kØ_îr‹_t
 
	$kØ_˛õ¡_°›
(
kØ_˛õ¡_t
 *
kØ_˛õ¡
)

405 
	`KAA_RETURN_IF_NIL
(
kØ_˛õ¡
, 
KAA_ERR_BADPARAM
);

407 
	`KAA_LOG_INFO
(
kØ_˛õ¡
->
c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
, "GoingÅo stop Kaa client...");

408 
kØ_˛õ¡
->
›î©e
 = 
Ál£
;

410  
	`kØ_°›
(
kØ_˛õ¡
->
c⁄ãxt
);

411 
	}
}

414 
	$kØ_˛õ¡_de°roy
(
kØ_˛õ¡_t
 *
£lf
)

416 
	`KAA_RETURN_IF_NIL
(
£lf
, );

418 i‡(
£lf
->
c⁄ãxt
) {

419 
	`kØ_deöô
(
£lf
->
c⁄ãxt
);

422 
	`KAA_FREE
(
£lf
);

423 
	}
}

427 #i‚de‡
KAA_DISABLE_FEATURE_LOGGING


428 
kØ_îr‹_t
 
	$kØ_log_cﬁÀ˘‹_öô
(
kØ_˛õ¡_t
 *
kØ_˛õ¡
)

430 
	`KAA_RETURN_IF_NIL
(
kØ_˛õ¡
, 
KAA_ERR_BADPARAM
);

431 
kØ_îr‹_t
 
îr‹_code
 = 
	`ext_u∆imôed_log_°‹age_¸óã
(&
kØ_˛õ¡
->
log_°‹age_c⁄ãxt
,

432 
kØ_˛õ¡
->
c⁄ãxt
->
loggî
);

434 i‡(
îr‹_code
) {

435 
	`KAA_LOG_ERROR
(
kØ_˛õ¡
->
c⁄ãxt
->
loggî
, 
îr‹_code
, "FailedÅo createÜog storage");

436  
îr‹_code
;

439 
îr‹_code
 = 
	`ext_log_u∂ﬂd_°øãgy_¸óã
(
kØ_˛õ¡
->
c⁄ãxt


440 ,&
kØ_˛õ¡
->
log_u∂ﬂd_°øãgy_c⁄ãxt


441 , 
KAA_LOG_UPLOAD_VOLUME_STRATEGY
);

442 i‡(
îr‹_code
) {

443 
	`KAA_LOG_ERROR
(
kØ_˛õ¡
->
c⁄ãxt
->
loggî
, 
îr‹_code
, "FailedÅo createÜog upload strategy");

444  
îr‹_code
;

447 
kØ_log_buckë_c⁄°øöts_t
 
buckë_sizes
 = {

448 .
max_buckë_size
 = 
MAX_LOG_BUCKET_SIZE
,

449 .
max_buckë_log_cou¡
 = 
MAX_LOG_COUNT
,

452 
îr‹_code
 = 
	`kØ_loggög_öô
(
kØ_˛õ¡
->
c⁄ãxt
->
log_cﬁÀ˘‹


453 , 
kØ_˛õ¡
->
log_°‹age_c⁄ãxt


454 , 
kØ_˛õ¡
->
log_u∂ﬂd_°øãgy_c⁄ãxt


455 , &
buckë_sizes
);

456 i‡(
îr‹_code
) {

457 
	`KAA_LOG_ERROR
(
kØ_˛õ¡
->
c⁄ãxt
->
loggî
, 
îr‹_code
,"FailedÅo initÜog collector");

458  
îr‹_code
;

461 
	`KAA_LOG_INFO
(
kØ_˛õ¡
->
c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
, "Log collector init completed");

462  
îr‹_code
;

463 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/esp8266/logger.c

17 
	~<°dio.h
>

18 
	~<°d¨g.h
>

20 
	~<e•_sy°em.h
>

22 
	~<∂©f‹m/ext_sy°em_loggî.h
>

24 
¢¥ötf
(*
°r
, 
size_t
 
cou¡
, c⁄° *
fmt
, ...);

25 
v¢¥ötf
(*
°r
, 
size_t
 
cou¡
, c⁄° *
fmt
, 
va_li°
 
¨g
);

27 
kØ_time_t
 
	$ext_gë_sy°ime
()

29  
	`sy°em_gë_πc_time
()*((
	`sy°em_πc_˛ock_ˇli_¥oc
()*1000)>>12)/1000;

30 
	}
}

32 
	$ext_wrôe_log
(
FILE
 *
sök
, c⁄° *
buf„r
, 
size_t
 
mesßge_size
)

34 ()
sök
;

35 ()
mesßge_size
;

36 
	`¥ötf
("%s", 
buf„r
);

37 
	}
}

39 
	$ext_loggî_•rötf
(*
buf„r
,
size_t
 
buf„r_size
, c⁄° *
f‹m©
, 
va_li°
 
¨gs
)

41  
	`v¢¥ötf
(
buf„r
, 
buf„r_size
, 
f‹m©
, 
¨gs
);

42 
	}
}

44 
	$ext_¢pötf
(*
buf„r
, 
size_t
 
buf„r_size
, c⁄° *
f‹m©
, ...)

46 
va_li°
 
¨gs
;

47 
	`va_°¨t
(
¨gs
, 
f‹m©
);

48 
ªs_Àn
 = 
	`v¢¥ötf
(
buf„r
, 
buf„r_size
, 
f‹m©
, 
¨gs
);

49 
	`va_íd
(
¨gs
);

50  
ªs_Àn
;

52 
	}
}

54 
	$ext_f‹m©_•rötf
(* 
buf„r
, 
size_t
 
buf„r_size
, c⁄° * 
f‹m©
,

55 c⁄° * 
log_Àvñ_«me
, c⁄° * 
åunˇãd_«me
, 
löío
,

56 
kØ_îr‹_t
 
îr‹_code
)

59  
	`¢¥ötf
(
buf„r
, 
buf„r_size
, 
f‹m©
, 0,

61 
log_Àvñ_«me
, 
åunˇãd_«me
, 
löío
, 
îr‹_code
);

62 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/esp8266/platform/defaults.h

17 #i‚de‡
ESP8266_DEFAULTS_H_


18 
	#ESP8266_DEFAULTS_H_


	)

20 
	#KAA_TCP_CHANNEL_IN_BUFFER_SIZE
 246

	)

21 
	#KAA_TCP_CHANNEL_OUT_BUFFER_SIZE
 1015

	)

23 
	#KAA_TCP_CHANNEL_MAX_TIMEOUT
 200u

	)

24 
	#KAA_TCP_CHANNEL_PING_TIMEOUT
 (
KAA_TCP_CHANNEL_MAX_TIMEOUT
 / 2)

	)

26 
	#KAATCP_PARSER_MAX_MESSAGE_LENGTH
 999

	)

28 
	#KAA_MAX_LOG_MESSAGE_LENGTH
 247

	)

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/esp8266/platform/mem.h

17 #i‚de‡
ESP8266_MEM_H


18 
	#ESP8266_MEM_H


	)

20 
	~<°ddef.h
>

22 *
pvP‹tMÆloc
(
size_t
 
xSize
);

23 *
pvP‹tZÆloc
(
size_t
 
xSize
);

24 *
pvP‹tRóŒoc
(*
pvPå
, 
size_t
 
xSize
);

25 
vP‹tFªe
(*
pvPå
);

27 #i‚de‡
__KAA_MALLOC


28 
	#__KAA_MALLOC
(
S
Ë
	`pvP‹tMÆloc
(S)

	)

31 #i‚de‡
__KAA_CALLOC


32 
	#__KAA_CALLOC
(
S
, 
N
Ë
	`pvP‹tZÆloc
((S)*(N))

	)

35 #i‚de‡
__KAA_REALLOC


36 
	#__KAA_REALLOC
(
P
, 
S
Ë
	`pvP‹tRóŒoc
(P, S)

	)

39 #i‚de‡
__KAA_FREE


40 
	#__KAA_FREE
(
P
Ë
	`vP‹tFªe
(P)

	)

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/esp8266/platform/sock.h

17 #i‚de‡
ESP8266_SOCK_H


18 
	#ESP8266_SOCK_H


	)

20 
	~<lwù/lwù/sockës.h
>

22 
	tkØ_fd_t
;

24 
sockaddr
 
	tkØ_sockaddr_t
;

25 
sockaddr_ö
 
	tkØ_sockaddr_°‹age_t
;

26 
sockÀn_t
 
	tkØ_sockÀn_t
;

29 
	#KAA_HTONS
(
a
Ë
	`ht⁄s
(◊))

	)

30 
	#KAA_HTONL
(
a
Ë
	`ht⁄l
(◊))

	)

31 
	#KAA_HTONLL
(
a
Ë
	`kØ_ht⁄Œ
(◊))

	)

33 
	#KAA_NTOHS
(
a
Ë
	`¡ohs
(◊))

	)

34 
	#KAA_NTOHL
(
a
Ë
	`¡ohl
(◊))

	)

35 
	#KAA_NTOHLL
(
a
Ë
	`kØ_¡ohŒ
(◊))

	)

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/esp8266/platform/stdio.h

17 #i‚de‡
ESP8266_STDIO_H


18 
	#ESP8266_STDIO_H


	)

20 
	~<°dio.h
>

21 #unde‡
°dout


22 
	#°dout
 0

	)

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/esp8266/platform/time.h

17 #i‚de‡
ESP8266_TIME_H


18 
	#ESP8266_TIME_H


	)

20 
	tkØ_time_t
;

22 
kØ_time_t
 
kØ_e•8266_gë_time
();

24 
	#KAA_TIME
(Ë
	`kØ_e•8266_gë_time
()

	)

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/esp8266/snprintf.c

55 #i‡!
deföed
(
HAVE_SNPRINTF
Ë|| !deföed(
HAVE_VSNPRINTF
)

57 
	~<°rög.h
>

58 
	~<˘y≥.h
>

59 
	~<sys/ty≥s.h
>

63 
	#HAVE_STDARG_H


	)

64 
	#HAVE_SNPRINTF


	)

68 #i‡
deföed
(
HAVE_STDARG_H
)

69 
	~<°d¨g.h
>

70 
	#HAVE_STDARGS


	)

71 
	#VA_LOCAL_DECL
 
va_li°
 
≠


	)

72 
	#VA_START
(
f
Ë
	`va_°¨t
(
≠
, f)

	)

73 
	#VA_SHIFT
(
v
,
t
Ë;

	)

74 
	#VA_END
 
	`va_íd
(
≠
)

	)

76 #i‡
deföed
(
HAVE_VARARGS_H
)

77 
	~<v¨¨gs.h
>

78 #unde‡
HAVE_STDARGS


79 
	#VA_LOCAL_DECL
 
va_li°
 
≠


	)

80 
	#VA_START
(
f
Ë
	`va_°¨t
(
≠
Ë

	)

81 
	#VA_SHIFT
(
v
,
t
Ëv = 
	`va_¨g
(
≠
,t)

	)

82 
	#VA_END
 
	`va_íd
(
≠
)

	)

88 #ifde‡
HAVE_LONG_DOUBLE


89 
	#LDOUBLE
 

	)

91 
	#LDOUBLE
 

	)

94 
¢¥ötf
 (*
°r
, 
size_t
 
cou¡
, c⁄° *
fmt
, ...);

95 
v¢¥ötf
 (*
°r
, 
size_t
 
cou¡
, c⁄° *
fmt
, 
va_li°
 
¨g
);

97 
d›r
 (*
buf„r
, 
size_t
 
maxÀn
, c⁄° *
f‹m©
,

98 
va_li°
 
¨gs
);

99 
fmt°r
 (*
buf„r
, 
size_t
 *
cuºÀn
, size_à
maxÀn
,

100 *
vÆue
, 
Êags
, 
mö
, 
max
);

101 
fmtöt
 (*
buf„r
, 
size_t
 *
cuºÀn
, size_à
maxÀn
,

102 
vÆue
, 
ba£
, 
mö
, 
max
, 
Êags
);

104 
d›r_outch
 (*
buf„r
, 
size_t
 *
cuºÀn
, size_à
maxÀn
, 
c
 );

111 
	#DP_S_DEFAULT
 0

	)

112 
	#DP_S_FLAGS
 1

	)

113 
	#DP_S_MIN
 2

	)

114 
	#DP_S_DOT
 3

	)

115 
	#DP_S_MAX
 4

	)

116 
	#DP_S_MOD
 5

	)

117 
	#DP_S_CONV
 6

	)

118 
	#DP_S_DONE
 7

	)

121 
	#DP_F_MINUS
 (1 << 0)

	)

122 
	#DP_F_PLUS
 (1 << 1)

	)

123 
	#DP_F_SPACE
 (1 << 2)

	)

124 
	#DP_F_NUM
 (1 << 3)

	)

125 
	#DP_F_ZERO
 (1 << 4)

	)

126 
	#DP_F_UP
 (1 << 5)

	)

127 
	#DP_F_UNSIGNED
 (1 << 6)

	)

130 
	#DP_C_SHORT
 1

	)

131 
	#DP_C_LONG
 2

	)

132 
	#DP_C_LDOUBLE
 3

	)

134 
	#ch¨_to_öt
(
p
Ë’ - '0')

	)

135 
	#MAX
(
p
,
q
Ë(’ >qË?Ö : q)

	)

137 
	$d›r
 (*
buf„r
, 
size_t
 
maxÀn
, c⁄° *
f‹m©
, 
va_li°
 
¨gs
) {

138 
ch
;

139 
vÆue
;

140 *
°rvÆue
;

141 
mö
;

142 
max
;

143 
°©e
;

144 
Êags
;

145 
cÊags
;

146 
size_t
 
cuºÀn
;

148 
°©e
 = 
DP_S_DEFAULT
;

149 
cuºÀn
 = 
Êags
 = 
cÊags
 = 
mö
 = 0;

150 
max
 = -1;

151 
ch
 = *
f‹m©
++;

153 
°©e
 !
DP_S_DONE
) {

154 i‡((
ch
 ='\0'Ë|| (
cuºÀn
 >
maxÀn
)) {

155 
°©e
 = 
DP_S_DONE
;

158 
°©e
) {

159 
DP_S_DEFAULT
:

160 i‡(
ch
 == '%')

161 
°©e
 = 
DP_S_FLAGS
;

163 
	`d›r_outch
 (
buf„r
, &
cuºÀn
, 
maxÀn
, 
ch
);

164 
ch
 = *
f‹m©
++;

166 
DP_S_FLAGS
:

167 
ch
) {

169 
Êags
 |
DP_F_MINUS
;

170 
ch
 = *
f‹m©
++;

173 
Êags
 |
DP_F_PLUS
;

174 
ch
 = *
f‹m©
++;

177 
Êags
 |
DP_F_SPACE
;

178 
ch
 = *
f‹m©
++;

181 
Êags
 |
DP_F_NUM
;

182 
ch
 = *
f‹m©
++;

185 
Êags
 |
DP_F_ZERO
;

186 
ch
 = *
f‹m©
++;

189 
°©e
 = 
DP_S_MIN
;

193 
DP_S_MIN
:

194 i‡(
	`isdigô
(
ch
)) {

195 
mö
 = 10*mö + 
	`ch¨_to_öt
 (
ch
);

196 
ch
 = *
f‹m©
++;

197 } i‡(
ch
 == '*') {

198 
mö
 = 
	`va_¨g
 (
¨gs
, );

199 
ch
 = *
f‹m©
++;

200 
°©e
 = 
DP_S_DOT
;

202 
°©e
 = 
DP_S_DOT
;

205 
DP_S_DOT
:

206 i‡(
ch
 == '.') {

207 
°©e
 = 
DP_S_MAX
;

208 
ch
 = *
f‹m©
++;

210 
°©e
 = 
DP_S_MOD
;

213 
DP_S_MAX
:

214 i‡(
	`isdigô
(
ch
)) {

215 i‡(
max
 < 0) {

216 
max
 = 0;

218 
max
 = 10*max + 
	`ch¨_to_öt
 (
ch
);

219 
ch
 = *
f‹m©
++;

220 } i‡(
ch
 == '*') {

221 
max
 = 
	`va_¨g
 (
¨gs
, );

222 
ch
 = *
f‹m©
++;

223 
°©e
 = 
DP_S_MOD
;

225 
°©e
 = 
DP_S_MOD
;

228 
DP_S_MOD
:

230 
ch
) {

232 
cÊags
 = 
DP_C_SHORT
;

233 
ch
 = *
f‹m©
++;

236 
cÊags
 = 
DP_C_LONG
;

237 
ch
 = *
f‹m©
++;

240 
cÊags
 = 
DP_C_LDOUBLE
;

241 
ch
 = *
f‹m©
++;

246 
°©e
 = 
DP_S_CONV
;

248 
DP_S_CONV
:

249 
ch
) {

252 i‡(
cÊags
 =
DP_C_SHORT
) {

253 
vÆue
 = 
	`va_¨g
 (
¨gs
, );

254 } i‡(
cÊags
 =
DP_C_LONG
) {

255 
vÆue
 = 
	`va_¨g
 (
¨gs
, );

257 
vÆue
 = 
	`va_¨g
 (
¨gs
, );

259 
	`fmtöt
 (
buf„r
, &
cuºÀn
, 
maxÀn
, 
vÆue
, 10, 
mö
, 
max
, 
Êags
);

262 
Êags
 |
DP_F_UNSIGNED
;

263 i‡(
cÊags
 =
DP_C_SHORT
) {

264 
vÆue
 = 
	`va_¨g
 (
¨gs
, );

265 } i‡(
cÊags
 =
DP_C_LONG
) {

266 
vÆue
 = 
	`va_¨g
 (
¨gs
, );

268 
vÆue
 = 
	`va_¨g
 (
¨gs
, );

270 
	`fmtöt
 (
buf„r
, &
cuºÀn
, 
maxÀn
, 
vÆue
, 8, 
mö
, 
max
, 
Êags
);

273 
Êags
 |
DP_F_UNSIGNED
;

274 i‡(
cÊags
 =
DP_C_SHORT
) {

275 
vÆue
 = 
	`va_¨g
 (
¨gs
, );

276 } i‡(
cÊags
 =
DP_C_LONG
) {

277 
vÆue
 = 
	`va_¨g
 (
¨gs
, );

279 
vÆue
 = 
	`va_¨g
 (
¨gs
, );

281 
	`fmtöt
 (
buf„r
, &
cuºÀn
, 
maxÀn
, 
vÆue
, 10, 
mö
, 
max
, 
Êags
);

284 
Êags
 |
DP_F_UP
;

286 
Êags
 |
DP_F_UNSIGNED
;

287 i‡(
cÊags
 =
DP_C_SHORT
) {

288 
vÆue
 = 
	`va_¨g
 (
¨gs
, );

289 } i‡(
cÊags
 =
DP_C_LONG
) {

290 
vÆue
 = 
	`va_¨g
 (
¨gs
, );

292 
vÆue
 = 
	`va_¨g
 (
¨gs
, );

294 
	`fmtöt
 (
buf„r
, &
cuºÀn
, 
maxÀn
, 
vÆue
, 16, 
mö
, 
max
, 
Êags
);

297 
	`d›r_outch
 (
buf„r
, &
cuºÀn
, 
maxÀn
, 
	`va_¨g
 (
¨gs
, ));

300 
°rvÆue
 = 
	`va_¨g
 (
¨gs
, *);

301 i‡(
max
 < 0) {

302 
max
 = 
maxÀn
;

304 
	`fmt°r
 (
buf„r
, &
cuºÀn
, 
maxÀn
, 
°rvÆue
, 
Êags
, 
mö
, 
max
);

307 
°rvÆue
 = 
	`va_¨g
 (
¨gs
, *);

308 
	`fmtöt
 (
buf„r
, &
cuºÀn
, 
maxÀn
, (Ë
°rvÆue
, 16, 
mö
, 
max
, 
Êags
);

311 i‡(
cÊags
 =
DP_C_SHORT
) {

312 *
num
;

313 
num
 = 
	`va_¨g
 (
¨gs
, *);

314 *
num
 = 
cuºÀn
;

315 } i‡(
cÊags
 =
DP_C_LONG
) {

316 *
num
;

317 
num
 = 
	`va_¨g
 (
¨gs
, *);

318 *
num
 = 
cuºÀn
;

320 *
num
;

321 
num
 = 
	`va_¨g
 (
¨gs
, *);

322 *
num
 = 
cuºÀn
;

326 
	`d›r_outch
 (
buf„r
, &
cuºÀn
, 
maxÀn
, 
ch
);

330 
ch
 = *
f‹m©
++;

336 
ch
 = *
f‹m©
++;

337 
°©e
 = 
DP_S_DEFAULT
;

338 
Êags
 = 
cÊags
 = 
mö
 = 0;

339 
max
 = -1;

341 
DP_S_DONE
:

348 i‡(
cuºÀn
 < 
maxÀn
 - 1) {

349 
buf„r
[
cuºÀn
] = '\0';

351 
buf„r
[
maxÀn
 - 1] = '\0';

353 
	}
}

355 
	$fmt°r
 (*
buf„r
, 
size_t
 *
cuºÀn
, size_à
maxÀn
,

356 *
vÆue
, 
Êags
, 
mö
, 
max
)

358 
∑dÀn
, 
°æn
;

359 
˙t
 = 0;

361 i‡(
vÆue
 == 0)

363 
vÆue
 = "<NULL>";

366 
°æn
 = 0; 
vÆue
[strln]; ++strln);

367 
∑dÀn
 = 
mö
 - 
°æn
;

368 i‡(
∑dÀn
 < 0)

369 
∑dÀn
 = 0;

370 i‡(
Êags
 & 
DP_F_MINUS
)

371 
∑dÀn
 = -padlen;

373 (
∑dÀn
 > 0Ë&& (
˙t
 < 
max
))

375 
	`d›r_outch
 (
buf„r
, 
cuºÀn
, 
maxÀn
, ' ');

376 --
∑dÀn
;

377 ++
˙t
;

379 *
vÆue
 && (
˙t
 < 
max
))

381 
	`d›r_outch
 (
buf„r
, 
cuºÀn
, 
maxÀn
, *
vÆue
++);

382 ++
˙t
;

384 (
∑dÀn
 < 0Ë&& (
˙t
 < 
max
))

386 
	`d›r_outch
 (
buf„r
, 
cuºÀn
, 
maxÀn
, ' ');

387 ++
∑dÀn
;

388 ++
˙t
;

390 
	}
}

394 
	$fmtöt
 (*
buf„r
, 
size_t
 *
cuºÀn
, size_à
maxÀn
,

395 
vÆue
, 
ba£
, 
mö
, 
max
, 
Êags
)

397 
signvÆue
 = 0;

398 
uvÆue
;

399 
c⁄vît
[20];

400 
∂a˚
 = 0;

401 
•adÀn
 = 0;

402 
z∑dÀn
 = 0;

403 
ˇps
 = 0;

405 i‡(
max
 < 0)

406 
max
 = 0;

408 
uvÆue
 = 
vÆue
;

410 if(!(
Êags
 & 
DP_F_UNSIGNED
))

412 if–
vÆue
 < 0 ) {

413 
signvÆue
 = '-';

414 
uvÆue
 = -
vÆue
;

417 i‡(
Êags
 & 
DP_F_PLUS
)

418 
signvÆue
 = '+';

420 i‡(
Êags
 & 
DP_F_SPACE
)

421 
signvÆue
 = ' ';

424 i‡(
Êags
 & 
DP_F_UP
Ë
ˇps
 = 1;

427 
c⁄vît
[
∂a˚
++] =

428 (
ˇps
? "0123456789ABCDEF":"0123456789abcdef")

429 [
uvÆue
 % ()
ba£
 ];

430 
uvÆue
 = (uvÆuê/ ()
ba£
 );

431 } 
uvÆue
 && (
∂a˚
 < 20));

432 i‡(
∂a˚
 == 20)Ölace--;

433 
c⁄vît
[
∂a˚
] = 0;

435 
z∑dÀn
 = 
max
 - 
∂a˚
;

436 
•adÀn
 = 
mö
 - 
	`MAX
 (
max
, 
∂a˚
Ë- (
signvÆue
 ? 1 : 0);

437 i‡(
z∑dÀn
 < 0) zpadlen = 0;

438 i‡(
•adÀn
 < 0) spadlen = 0;

439 i‡(
Êags
 & 
DP_F_ZERO
)

441 
z∑dÀn
 = 
	`MAX
(z∑dÀn, 
•adÀn
);

442 
•adÀn
 = 0;

444 i‡(
Êags
 & 
DP_F_MINUS
)

445 
•adÀn
 = -spadlen;

448 
•adÀn
 > 0)

450 
	`d›r_outch
 (
buf„r
, 
cuºÀn
, 
maxÀn
, ' ');

451 --
•adÀn
;

455 i‡(
signvÆue
)

456 
	`d›r_outch
 (
buf„r
, 
cuºÀn
, 
maxÀn
, 
signvÆue
);

459 i‡(
z∑dÀn
 > 0)

461 
z∑dÀn
 > 0)

463 
	`d›r_outch
 (
buf„r
, 
cuºÀn
, 
maxÀn
, '0');

464 --
z∑dÀn
;

469 
∂a˚
 > 0)

470 
	`d›r_outch
 (
buf„r
, 
cuºÀn
, 
maxÀn
, 
c⁄vît
[--
∂a˚
]);

473 
•adÀn
 < 0) {

474 
	`d›r_outch
 (
buf„r
, 
cuºÀn
, 
maxÀn
, ' ');

475 ++
•adÀn
;

477 
	}
}

480 
LDOUBLE
 
	$abs_vÆ
 (
LDOUBLE
 
vÆue
)

482 
LDOUBLE
 
ªsu…
 = 
vÆue
;

484 i‡(
vÆue
 < 0)

485 
ªsu…
 = -
vÆue
;

487  
ªsu…
;

488 
	}
}

491 
	$d›r_outch
 (*
buf„r
, 
size_t
 *
cuºÀn
, size_à
maxÀn
, 
c
)

493 i‡(*
cuºÀn
 < 
maxÀn
)

494 
buf„r
[(*
cuºÀn
)++] = 
c
;

495 
	}
}

497 #i‚de‡
HAVE_VSNPRINTF


498 
	$v¢¥ötf
 (*
°r
, 
size_t
 
cou¡
, c⁄° *
fmt
, 
va_li°
 
¨gs
)

500 
°r
[0] = 0;

501 
	`d›r
(
°r
, 
cou¡
, 
fmt
, 
¨gs
);

502 (
	`°æí
(
°r
));

503 
	}
}

506 #i‚de‡
HAVE_SNPRINTF


508 #ifde‡
HAVE_STDARGS


509 
	$¢¥ötf
 (*
°r
,
size_t
 
cou¡
,c⁄° *
fmt
,...)

511 
	$¢¥ötf
 (
va_Æi°
Ë
va_d˛


514 #i‚de‡
HAVE_STDARGS


515 *
°r
;

516 
size_t
 
cou¡
;

517 *
fmt
;

519 
VA_LOCAL_DECL
;

521 
	`VA_START
 (
fmt
);

522 
	`VA_SHIFT
 (
°r
, *);

523 
	`VA_SHIFT
 (
cou¡
, 
size_t
 );

524 
	`VA_SHIFT
 (
fmt
, *);

525 (Ë
	`v¢¥ötf
(
°r
, 
cou¡
, 
fmt
, 
≠
);

526 
VA_END
;

527 (
	`°æí
(
°r
));

528 
	}
}

531 #ifde‡
TEST_SNPRINTF


532 #i‚de‡
LONG_STRING


533 
	#LONG_STRING
 1024

	)

535 
	$maö
 ()

537 
buf1
[
LONG_STRING
];

538 
buf2
[
LONG_STRING
];

539 *
Â_fmt
[] = {

553 
NULL


555 
Â_nums
[] = { -1.5, 134.21, 91340.2, 341.1234, 0203.9, 0.96, 0.996,

557 *
öt_fmt
[] = {

567 
NULL


569 
öt_nums
[] = { -1, 134, 91340, 341, 0203, 0};

570 
x
, 
y
;

571 
Áû
 = 0;

572 
num
 = 0;

574 
	`¥ötf
 ("Testing snprintf format codeságainst system sprintf...\n");

576 
x
 = 0; 
Â_fmt
[x] !
NULL
 ; x++)

577 
y
 = 0; 
Â_nums
[y] != 0 ; y++)

579 
	`¢¥ötf
 (
buf1
,  (buf1), 
Â_fmt
[
x
], 
Â_nums
[
y
]);

580 
	`•rötf
 (
buf2
, 
Â_fmt
[
x
], 
Â_nums
[
y
]);

581 i‡(
	`°rcmp
 (
buf1
, 
buf2
))

583 
	`¥ötf
("snprintf doesn't match Format: %s\n\tsnprintf = %s\n\tsprintf = %s\n",

584 
Â_fmt
[
x
], 
buf1
, 
buf2
);

585 
Áû
++;

587 
num
++;

590 
x
 = 0; 
öt_fmt
[x] !
NULL
 ; x++)

591 
y
 = 0; 
öt_nums
[y] != 0 ; y++)

593 
	`¢¥ötf
 (
buf1
,  (buf1), 
öt_fmt
[
x
], 
öt_nums
[
y
]);

594 
	`•rötf
 (
buf2
, 
öt_fmt
[
x
], 
öt_nums
[
y
]);

595 i‡(
	`°rcmp
 (
buf1
, 
buf2
))

597 
	`¥ötf
("snprintf doesn't match Format: %s\n\tsnprintf = %s\n\tsprintf = %s\n",

598 
öt_fmt
[
x
], 
buf1
, 
buf2
);

599 
Áû
++;

601 
num
++;

603 
	`¥ötf
 ("%dÅe°†Áûed ouào‡%d.\n", 
Áû
, 
num
);

604 
	}
}

607 
	$ab‹t
() {

609 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/esp8266/status.c

17 
	~<°dboﬁ.h
>

18 
	~<°ddef.h
>

19 
	~"∂©f‹m/ext_°©us.h
"

21 
	$ext_°©us_ªad
(**
buf„r
, 
size_t
 *
buf„r_size
, 
boﬁ
 *
√eds_dóŒoˇti⁄
)

23 ()
buf„r
;

24 ()
buf„r_size
;

25 ()
√eds_dóŒoˇti⁄
;

26 
	}
}

28 
	$ext_°©us_°‹e
(c⁄° *
buf„r
, 
size_t
 
buf„r_size
)

30 ()
buf„r
;

31 ()
buf„r_size
;

32 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/esp8266/tcp_utils.c

17 
	~<°döt.h
>

18 
	~<°ddef.h
>

19 
	~<uni°d.h
>

21 
	~<e•_libc.h
>

23 
	~<∂©f‹m/sock.h
>

24 
	~<∂©f‹m/ext_t˝_utûs.h
>

25 
	~"kØ_comm⁄.h
"

27 
	~<lwù/lwù/√tdb.h
>

29 
kØ_îr‹_t
 
	$ext_t˝_utûs_›í_t˝_sockë
(
kØ_fd_t
 *
fd
,

30 c⁄° 
kØ_sockaddr_t
 *
de°ö©i⁄
,

31 
kØ_sockÀn_t
 
de°ö©i⁄_size
)

33 
	`KAA_RETURN_IF_NIL3
(
fd
, 
de°ö©i⁄
, 
de°ö©i⁄_size
, 
KAA_ERR_BADPARAM
);

34 
kØ_fd_t
 
sock
 = 
	`sockë
(
de°ö©i⁄
->
ß_Ámûy
, 
SOCK_STREAM
, 0);

36 
Êags
 = 
	`lwù_f˙é
(
sock
, 
F_GETFL
, 0);

37 i‡(
Êags
 < 0) {

38 
	`ext_t˝_utûs_t˝_sockë_˛o£
(
sock
);

39 
	`¥ötf
("Error getting sicketáccess flags\n");

40  
KAA_ERR_SOCKET_ERROR
;

43 i‡(
	`lwù_f˙é
(
sock
, 
F_SETFL
, 
Êags
 | 
O_NONBLOCK
) < 0) {

44 
	`ext_t˝_utûs_t˝_sockë_˛o£
(
sock
);

45 
	`¥ötf
("Eº‹ sëtög sockë fœgs. f˙é(F_GETFL): %d\n", 
	`lwù_f˙é
(
sock
, 
F_GETFL
, 0));

46  
KAA_ERR_SOCKET_ERROR
;

49 i‡(
	`c⁄√˘
(
sock
, 
de°ö©i⁄
, 
de°ö©i⁄_size
Ë&& 
î∫o
 !
EINPROGRESS
) {

50 
	`ext_t˝_utûs_t˝_sockë_˛o£
(
sock
);

51 
	`¥ötf
("Error connectingÅo destination\n");

52  
KAA_ERR_SOCKET_CONNECT_ERROR
;

55 *
fd
 = 
sock
;

57  
KAA_ERR_NONE
;

58 
	}
}

60 
ext_t˝_utûs_fun˘i⁄_ªtu∫_°©e_t
 
	$ext_t˝_utûs_gëaddrbyho°
(
kØ_dns_ªsﬁve_li°íî_t
 *
ªsﬁve_li°íî


61 , c⁄° 
kØ_dns_ªsﬁve_öfo_t
 *
ªsﬁve_¥›s


62 , 
kØ_sockaddr_t
 *
ªsu…


63 , 
kØ_sockÀn_t
 *
ªsu…_size
)

65 ()
ªsﬁve_li°íî
;

66 
	`KAA_RETURN_IF_NIL4
(
ªsﬁve_¥›s
,Ñesﬁve_¥›s->
ho°«me
, 
ªsu…
, 
ªsu…_size
, 
RET_STATE_VALUE_ERROR
);

67 i‡(*
ªsu…_size
 < (
sockaddr_ö
))

68  
RET_STATE_BUFFER_NOT_ENOUGH
;

70 
addröfo
 
höts
;

71 
	`mem£t
(&
höts
, 0 , (
addröfo
));

72 
höts
.
ai_sockty≥
 = 
SOCK_STREAM
;

75 
höts
.
ai_Ámûy
 = 
AF_INET
;

77 
ho°«me_°r
[
ªsﬁve_¥›s
->
ho°«me_Àngth
 + 1];

78 
	`mem˝y
(
ho°«me_°r
, 
ªsﬁve_¥›s
->
ho°«me
,Ñesﬁve_¥›s->
ho°«me_Àngth
);

79 
ho°«me_°r
[
ªsﬁve_¥›s
->
ho°«me_Àngth
] = '\0';

81 
addröfo
 *
ªsﬁve_ªsu…
 = 
NULL
;

82 
ªsﬁve_îr‹
 = 0;

84 i‡(
ªsﬁve_¥›s
->
p‹t
) {

85 
p‹t_°r
[6];

86 
	`¢¥ötf
(
p‹t_°r
, 6, "%u", 
ªsﬁve_¥›s
->
p‹t
);

87 
ªsﬁve_îr‹
 = 
	`gëaddröfo
(
ho°«me_°r
, 
p‹t_°r
, &
höts
, &
ªsﬁve_ªsu…
);

89 
ªsﬁve_îr‹
 = 
	`gëaddröfo
(
ho°«me_°r
, 
NULL
, &
höts
, &
ªsﬁve_ªsu…
);

92 i‡(
ªsﬁve_îr‹
 || !
ªsﬁve_ªsu…
)

93  
RET_STATE_VALUE_ERROR
;

95 i‡(
ªsﬁve_ªsu…
->
ai_addæí
 > *
ªsu…_size
) {

96 
	`‰ìaddröfo
(
ªsﬁve_ªsu…
);

97  
RET_STATE_BUFFER_NOT_ENOUGH
;

100 
	`mem˝y
(
ªsu…
, 
ªsﬁve_ªsu…
->
ai_addr
,Ñesﬁve_ªsu…->
ai_addæí
);

101 *
ªsu…_size
 = 
ªsﬁve_ªsu…
->
ai_addæí
;

102 
	`‰ìaddröfo
(
ªsﬁve_ªsu…
);

103  
RET_STATE_VALUE_READY
;

104 
	}
}

106 
ext_t˝_sockë_°©e_t
 
	$ext_t˝_utûs_t˝_sockë_check
(
kØ_fd_t
 
fd


107 , c⁄° 
kØ_sockaddr_t
 *
de°ö©i⁄


108 , 
kØ_sockÀn_t
 
de°ö©i⁄_size
)

110 i‡(
	`c⁄√˘
(
fd
, 
de°ö©i⁄
, 
de°ö©i⁄_size
) < 0 ) {

111 
î∫o
) {

112 
EINPROGRESS
:

113 
EALREADY
:

114  
KAA_TCP_SOCK_CONNECTING
;

115 
EISCONN
:

116  
KAA_TCP_SOCK_CONNECTED
;

118  
KAA_TCP_SOCK_ERROR
;

121  
KAA_TCP_SOCK_CONNECTED
;

122 
	}
}

124 
ext_t˝_sockë_io_îr‹s_t
 
	$ext_t˝_utûs_t˝_sockë_wrôe
(
kØ_fd_t
 
fd


125 , c⁄° *
buf„r


126 , 
size_t
 
buf„r_size


127 , 
size_t
 *
byãs_wrôãn
)

129 
	`KAA_RETURN_IF_NIL2
(
buf„r
, 
buf„r_size
, 
KAA_TCP_SOCK_IO_ERROR
);

130 
ssize_t
 
wrôe_ªsu…
 = 
	`wrôe
(
fd
, 
buf„r
, 
buf„r_size
);

131 i‡(
wrôe_ªsu…
 < 0 && 
î∫o
 !
EAGAIN
)

132  
KAA_TCP_SOCK_IO_ERROR
;

133 i‡(
byãs_wrôãn
)

134 *
byãs_wrôãn
 = (
wrôe_ªsu…
 > 0) ? write_result : 0;

135  
KAA_TCP_SOCK_IO_OK
;

136 
	}
}

140 
ext_t˝_sockë_io_îr‹s_t
 
	$ext_t˝_utûs_t˝_sockë_ªad
(
kØ_fd_t
 
fd


141 , *
buf„r


142 , 
size_t
 
buf„r_size


143 , 
size_t
 *
byãs_ªad
)

145 
	`KAA_RETURN_IF_NIL2
(
buf„r
, 
buf„r_size
, 
KAA_TCP_SOCK_IO_ERROR
);

146 
ssize_t
 
ªad_ªsu…
 = 
	`ªad
(
fd
, 
buf„r
, 
buf„r_size
);

147 i‡(!
ªad_ªsu…
)

148  
KAA_TCP_SOCK_IO_EOF
;

149 i‡(
ªad_ªsu…
 < 0 && 
î∫o
 !
EAGAIN
)

150  
KAA_TCP_SOCK_IO_ERROR
;

151 i‡(
byãs_ªad
)

152 *
byãs_ªad
 = (
ªad_ªsu…
 > 0) ?Ñead_result : 0;

153  
KAA_TCP_SOCK_IO_OK
;

154 
	}
}

156 
kØ_îr‹_t
 
	$ext_t˝_utûs_t˝_sockë_˛o£
(
kØ_fd_t
 
fd
)

158  (
	`˛o£
(
fd
Ë< 0Ë? 
KAA_ERR_SOCKET_ERROR
 : 
KAA_ERR_NONE
;

159 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/esp8266/time.c

17 
	~<∂©f‹m/time.h
>

19 
	~<e•_sy°em.h
>

21 
kØ_time_t
 
	$kØ_e•8266_gë_time
()

23  (
	`sy°em_gë_time
() / 1000000);

24 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/ios/sha.c

17 
	~<Comm⁄Cry±o/Comm⁄Dige°.h
>

18 
	~<°döt.h
>

19 
	~<°ddef.h
>

20 
	~"kØ_comm⁄.h
"

21 
	~"∂©f‹m/ext_sha.h
"

22 
	~<°rög.h
>

26 
kØ_îr‹_t
 
	$ext_ˇlcuœã_sha_hash
(c⁄° *
d©a
, 
size_t
 
d©a_size
, 
kØ_dige°
 
dige°
)

28 
	`KAA_RETURN_IF_NIL
(
dige°
, 
KAA_ERR_BADPARAM
);

30 
	`CC_SHA1
((c⁄° *)
d©a
, 
d©a_size
, 
dige°
);

31  
KAA_ERR_NONE
;

32 
	}
}

34 
kØ_îr‹_t
 
	$ext_c›y_sha_hash
(
kØ_dige°_p
 
d°
, c⁄° kØ_dige°_∞
§c
)

36 
	`KAA_RETURN_IF_NIL2
(
d°
, 
§c
, 
KAA_ERR_BADPARAM
);

37 
	`mem˝y
(
d°
, 
§c
, 
SHA_1_DIGEST_LENGTH
);

38  
KAA_ERR_NONE
;

39 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/posix/configuration_persistence.c

18 
	~<°dboﬁ.h
>

19 
	~<°ddef.h
>

20 
	~<∂©f‹m/ext_c⁄figuøti⁄_≥rsi°í˚.h
>

21 
	~<∂©f‹m/fûe_utûs.h
>

23 
	#KAA_CONFIGURATION_STORAGE
 "kØ_c⁄figuøti⁄.bö"

	)

25 
__©åibuã__
((
wók
))

26 
	$ext_c⁄figuøti⁄_ªad
(**
buf„r
, 
size_t
 *
buf„r_size
, 
boﬁ
 *
√eds_dóŒoˇti⁄
)

28 
	`posix_bö¨y_fûe_ªad
(
KAA_CONFIGURATION_STORAGE
, 
buf„r
, 
buf„r_size
, 
√eds_dóŒoˇti⁄
);

29 
	}
}

31 
__©åibuã__
((
wók
))

32 
	$ext_c⁄figuøti⁄_°‹e
(c⁄° *
buf„r
, 
size_t
 
buf„r_size
)

34 
	`posix_bö¨y_fûe_°‹e
(
KAA_CONFIGURATION_STORAGE
, 
buf„r
, 
buf„r_size
);

35 
	}
}

37 
__©åibuã__
((
wók
))

38 
	$ext_c⁄figuøti⁄_dñëe
()

40 
	`posix_bö¨y_fûe_dñëe
(
KAA_CONFIGURATION_STORAGE
);

41 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/posix/file_utils.c

17 
	~<∂©f‹m/fûe_utûs.h
>

18 
	~<°döt.h
>

19 
	~<∂©f‹m/°dio.h
>

20 
	~"utûôõs/kØ_mem.h
"

21 
	~"kØ_comm⁄.h
"

24 
	$posix_bö¨y_fûe_ªad
(c⁄° *
fûe_«me
, **
buf„r
, 
size_t
 *
buf„r_size
, 
boﬁ
 *
√eds_dóŒoˇti⁄
)

26 
	`KAA_RETURN_IF_NIL4
(
fûe_«me
, 
buf„r
, 
buf„r_size
, 
√eds_dóŒoˇti⁄
, -1);

27 *
buf„r
 = 
NULL
;

28 *
buf„r_size
 = 0;

29 *
√eds_dóŒoˇti⁄
 = 
åue
;

31 
FILE
* 
fûe
 = 
	`f›í
(
fûe_«me
, "rb");

32 
	`KAA_RETURN_IF_NIL
(
fûe
, -1);

34 
	`f£ek
(
fûe
, 0, 
SEEK_END
);

35 
ªsu…_size
 = 
	`·ñl
(
fûe
);

36 i‡(
ªsu…_size
 <= 0) {

37 
	`f˛o£
(
fûe
);

40 *
ªsu…_buf„r
 = 
	`KAA_MALLOC
(
ªsu…_size
 * ());

41 i‡(!
ªsu…_buf„r
) {

42 
	`f˛o£
(
fûe
);

46 
	`f£ek
(
fûe
, 0, 
SEEK_SET
);

47 i‡(
	`‰ód
(
ªsu…_buf„r
, 
ªsu…_size
, 1, 
fûe
) == 0) {

48 
	`KAA_FREE
(
ªsu…_buf„r
);

49 
	`f˛o£
(
fûe
);

53 *
buf„r
 = 
ªsu…_buf„r
;

54 *
buf„r_size
 = 
ªsu…_size
;

56 
	`f˛o£
(
fûe
);

58 
	}
}

60 
	$posix_bö¨y_fûe_°‹e
(c⁄° *
fûe_«me
, c⁄° *
buf„r
, 
size_t
 
buf„r_size
)

62 
	`KAA_RETURN_IF_NIL3
(
fûe_«me
, 
buf„r
, 
buf„r_size
, -1);

64 
FILE
* 
°©us_fûe
 = 
	`f›í
(
fûe_«me
, "wb");

65 i‡(
°©us_fûe
) {

66 
	`fwrôe
(
buf„r
, 
buf„r_size
, 1, 
°©us_fûe
);

67 
	`f˛o£
(
°©us_fûe
);

71 
	}
}

73 
	$posix_bö¨y_fûe_dñëe
(c⁄° *
fûe_«me
)

75 
FILE
 *
fûe
 = 
	`f›í
(
fûe_«me
, "r");

76 i‡(
fûe
) {

77 
	`f˛o£
(
fûe
);

78  
	`ªmove
(
fûe_«me
);

81 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/posix/kaa_client.c

17 
	~<°dboﬁ.h
>

18 
	~<°döt.h
>

19 
	~<°dio.h
>

20 
	~<î∫o.h
>

21 
	~<°rög.h
>

22 
	~<uni°d.h
>

23 
	~<°dlib.h
>

24 
	~<f˙é.h
>

26 
	~"kØ.h
"

27 
	~"kØ_îr‹.h
"

28 
	~"kØ_comm⁄.h
"

29 
	~"utûôõs/kØ_mem.h
"

30 
	~"utûôõs/kØ_log.h
"

31 
	~<∂©f‹m/time.h
>

32 
	~"kØ_c⁄ãxt.h
"

33 
	~<∂©f‹m/kØ_˛õ¡.h
>

34 
	~"∂©f‹m/ext_å™•‹t_ch™√l.h
"

35 
	~"∂©f‹m-im∂/comm⁄/kØ_t˝_ch™√l.h
"

36 
	~"∂©f‹m-im∂/comm⁄/ext_log_u∂ﬂd_°øãgõs.h
"

37 
	~<∂©f‹m/kØ_Áûovî_°øãgy.h
>

38 
	~"kØ_ch™√l_m™agî.h
"

39 
	~"kØ_∂©f‹m_utûs.h
"

41 #i‚de‡
KAA_DISABLE_FEATURE_LOGGING


42 
	~"kØ_loggög.h
"

43 
	~"kØ_loggög_¥iv©e.h
"

46 
	~"kØ_¥iv©e.h
"

48 
kØ_exãnsi⁄_id
 
	gBOOTSTRAP_SERVICE
[] = { 
KAA_EXTENSION_BOOTSTRAP
 };

49 c⁄° 
	gBOOTSTRAP_SERVICE_COUNT
 = (
BOOTSTRAP_SERVICE
Ë/ (
kØ_exãnsi⁄_id
);

51 
kØ_exãnsi⁄_id
 
	gOPERATIONS_SERVICES
[] = { 
KAA_EXTENSION_PROFILE


52 , 
KAA_EXTENSION_USER


53 #i‚de‡
KAA_DISABLE_FEATURE_CONFIGURATION


54 , 
KAA_EXTENSION_CONFIGURATION


56 #i‚de‡
KAA_DISABLE_FEATURE_EVENTS


57 , 
KAA_EXTENSION_EVENT


59 #i‚de‡
KAA_DISABLE_FEATURE_LOGGING


60 , 
KAA_EXTENSION_LOGGING


62 #i‚de‡
KAA_DISABLE_FEATURE_NOTIFICATION


63 , 
KAA_EXTENSION_NOTIFICATION


66 c⁄° 
	gOPERATIONS_SERVICES_COUNT
 = (
OPERATIONS_SERVICES
Ë/ (
kØ_exãnsi⁄_id
);

70 
	#MAX_LOG_COUNT
 
SIZE_MAX


	)

71 
	#MAX_LOG_BUCKET_SIZE
 (
KAA_TCP_CHANNEL_OUT_BUFFER_SIZE
 >> 3)

	)

73 
KAA_STATIC_ASSERT
(
log_buckë_size_is_nŸ_zîo
, 
MAX_LOG_BUCKET_SIZE
 != 0);

76 
	mKAA_CLIENT_CHANNEL_STATE_NOT_CONNECTED
 = 0,

77 
	mKAA_CLIENT_CHANNEL_STATE_CONNECTED


78 } 
	tkØ_˛õ¡_ch™√l_°©e_t
;

81 
	mKAA_CLIENT_CHANNEL_TYPE_BOOTSTRAP
 = 0,

82 
	mKAA_CLIENT_CHANNEL_TYPE_OPERATIONS


83 } 
	tkØ_˛õ¡_ch™√l_ty≥_t
;

85 
	skØ_˛õ¡_t
 {

86 
kØ_c⁄ãxt_t
 *
	mkØ_c⁄ãxt
;

88 
boﬁ
 
	m›î©e
;

90 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 
	mch™√l
;

91 
kØ_˛õ¡_ch™√l_°©e_t
 
	mch™√l_°©e
;

92 
uöt32_t
 
	mch™√l_id
;

93 
boﬁ
 
	mch™√l_sockë_˛o£d
;

95 
boﬁ
 
	mboo°øp_com∂ëe
;

97 
exã∫Æ_¥o˚ss_‚
 
	mexã∫Æ_¥o˚ss_‚
;

98 *
	mexã∫Æ_¥o˚ss_c⁄ãxt
;

99 
time_t
 
	mexã∫Æ_¥o˚ss_max_dñay
;

100 
time_t
 
	mexã∫Æ_¥o˚ss_œ°_ˇŒ
;

102 #i‚de‡
KAA_DISABLE_FEATURE_LOGGING


103 *
	mlog_°‹age_c⁄ãxt
;

104 *
	mlog_u∂ﬂd_°øãgy_c⁄ãxt
;

110 
kØ_îr‹_t
 
kØ_˛õ¡_öô_ch™√l
(
kØ_˛õ¡_t
 *
kØ_˛õ¡
, 
kØ_˛õ¡_ch™√l_ty≥_t
 
ch™√l_ty≥
);

111 
kØ_îr‹_t
 
kØ_˛õ¡_deöô_ch™√l
(
kØ_˛õ¡_t
 *
kØ_˛õ¡
);

112 
kØ_îr‹_t
 
⁄_kØ_t˝_ch™√l_evít
(*
c⁄ãxt
, 
kØ_t˝_ch™√l_evít_t
 
evít_ty≥
, 
kØ_fd_t
 
fd
);

114 #i‚de‡
KAA_DISABLE_FEATURE_LOGGING


115 
kØ_îr‹_t
 
kØ_log_cﬁÀ˘‹_öô
(
kØ_˛õ¡_t
 *
kØ_˛õ¡
);

118 
kØ_îr‹_t
 
	$⁄_kØ_t˝_ch™√l_evít
(*
c⁄ãxt
, 
kØ_t˝_ch™√l_evít_t
 
evít_ty≥
, 
kØ_fd_t
 
fd
)

120 ()
fd
;

121 
	`KAA_RETURN_IF_NIL
(
c⁄ãxt
, 
KAA_ERR_BADPARAM
);

123 i‡(
evít_ty≥
 =
SOCKET_DISCONNECTED
) {

124 ((
kØ_˛õ¡_t
 *)
c⁄ãxt
)->
ch™√l_sockë_˛o£d
 = 
åue
;

127  
KAA_ERR_NONE
;

128 
	}
}

130 
kØ_îr‹_t
 
	$kØ_˛õ¡_¸óã
(
kØ_˛õ¡_t
 **
kØ_˛õ¡
, 
kØ_˛õ¡_¥›s_t
 *
¥›s
)

132 ()
¥›s
;

133 
	`KAA_RETURN_IF_NIL
(
kØ_˛õ¡
, 
KAA_ERR_BADPARAM
);

135 
kØ_˛õ¡_t
 *
£lf
 = 
	`KAA_CALLOC
(1, (kaa_client_t));

136 
	`KAA_RETURN_IF_NIL
(
£lf
, 
KAA_ERR_NOMEM
);

138 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_öô
(&
£lf
->
kØ_c⁄ãxt
);

139 i‡(
îr‹_code
) {

140 
	`kØ_˛õ¡_de°roy
(
£lf
);

141  
îr‹_code
;

144 
£lf
->
›î©e
 = 
åue
;

146 #i‚de‡
KAA_DISABLE_FEATURE_LOGGING


147 
îr‹_code
 = 
	`kØ_log_cﬁÀ˘‹_öô
(
£lf
);

148 i‡(
îr‹_code
) {

149 
	`KAA_LOG_ERROR
(
£lf
->
kØ_c⁄ãxt
->
loggî
, 
îr‹_code
, "FailedÅo init KaaÜog collector,Érror %d",Érror_code);

150 
	`kØ_˛õ¡_de°roy
(
£lf
);

151  
îr‹_code
;

155 
	`KAA_LOG_INFO
(
£lf
->
kØ_c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
, "Kaa client created");

157 *
kØ_˛õ¡
 = 
£lf
;

158  
îr‹_code
;

159 
	}
}

161 
	$kØ_˛õ¡_de°roy
(
kØ_˛õ¡_t
 *
£lf
)

163 
	`KAA_RETURN_IF_NIL
(
£lf
, );

165 i‡(
£lf
->
kØ_c⁄ãxt
) {

166 
	`kØ_deöô
(
£lf
->
kØ_c⁄ãxt
);

169 
	`KAA_FREE
(
£lf
);

170 
	}
}

172 
kØ_c⁄ãxt_t
* 
	$kØ_˛õ¡_gë_c⁄ãxt
(
kØ_˛õ¡_t
 *
kØ_˛õ¡
)

174 
	`KAA_RETURN_IF_NIL
(
kØ_˛õ¡
, 
NULL
);

175  
kØ_˛õ¡
->
kØ_c⁄ãxt
;

176 
	}
}

178 
uöt16_t
 
	$gë_pﬁl_timeout
(
kØ_˛õ¡_t
 *
kØ_˛õ¡
)

180 
	`KAA_RETURN_IF_NIL
(
kØ_˛õ¡
, 0);

182 
uöt16_t
 
£À˘_timeout
;

183 
	`kØ_t˝_ch™√l_gë_max_timeout
(&
kØ_˛õ¡
->
ch™√l
, &
£À˘_timeout
);

186 i‡((
kØ_˛õ¡
->
exã∫Æ_¥o˚ss_max_dñay
 > 0Ë&& (
£À˘_timeout
 > kaa_client->external_process_max_delay)) {

187 
£À˘_timeout
 = 
kØ_˛õ¡
->
exã∫Æ_¥o˚ss_max_dñay
;

190 i‡((
KAA_BOOTSTRAP_RESPONSE_PERIOD
 > 0Ë&& (
£À˘_timeout
 > KAA_BOOTSTRAP_RESPONSE_PERIOD)) {

191 
£À˘_timeout
 = 
KAA_BOOTSTRAP_RESPONSE_PERIOD
;

194  
£À˘_timeout
;

195 
	}
}

197 
kØ_îr‹_t
 
	$kØ_˛õ¡_¥o˚ss_ch™√l_c⁄√˘ed
(
kØ_˛õ¡_t
 *
kØ_˛õ¡
)

199 
	`KAA_RETURN_IF_NIL
(
kØ_˛õ¡
, 
KAA_ERR_BADPARAM
);

201 
kØ_îr‹_t
 
îr‹_code
 = 
KAA_ERR_NONE
;

203 
fd_£t
 
ªad_fds
, 
wrôe_fds
, 
ex˚±_fds
;

204 
timevÆ
 
£À˘_tv
 = { 
	`gë_pﬁl_timeout
(
kØ_˛õ¡
), 0 };

205 
ch™√l_fd
 = 0;

207 
	`FD_ZERO
(&
ªad_fds
);

208 
	`FD_ZERO
(&
wrôe_fds
);

209 
	`FD_ZERO
(&
ex˚±_fds
);

211 
	`kØ_t˝_ch™√l_gë_des¸ùt‹
(&
kØ_˛õ¡
->
ch™√l
, &
ch™√l_fd
);

213 i‡(
	`kØ_t˝_ch™√l_is_ªady
(&
kØ_˛õ¡
->
ch™√l
, 
FD_READ
))

214 
	`FD_SET
(
ch™√l_fd
, &
ªad_fds
);

216 i‡(
	`kØ_t˝_ch™√l_is_ªady
(&
kØ_˛õ¡
->
ch™√l
, 
FD_WRITE
))

217 
	`FD_SET
(
ch™√l_fd
, &
wrôe_fds
);

219 
pﬁl_ªsu…
 = 
	`£À˘
(
ch™√l_fd
 + 1, &
ªad_fds
, &
wrôe_fds
, 
NULL
, &
£À˘_tv
);

220 i‡(
pﬁl_ªsu…
 == 0) {

221 
îr‹_code
 = 
	`kØ_t˝_ch™√l_check_kì∑live
(&
kØ_˛õ¡
->
ch™√l
);

222 } i‡(
pﬁl_ªsu…
 > 0) {

223 i‡(
ch™√l_fd
 >= 0) {

224 i‡(
	`FD_ISSET
(
ch™√l_fd
, &
ªad_fds
)) {

225 
	`KAA_LOG_TRACE
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
,

226 "Pro˚ssög INÉvíàf‹Åhê˛õ¡ sockë %d", 
ch™√l_fd
);

227 
îr‹_code
 = 
	`kØ_t˝_ch™√l_¥o˚ss_evít
(&
kØ_˛õ¡
->
ch™√l
, 
FD_READ
);

228 i‡(
îr‹_code
) {

229 
	`KAA_LOG_ERROR
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
, 
îr‹_code
,

230 "FaûedÅÿ¥o˚s†INÉvíàf‹Åhê˛õ¡ sockë %d", 
ch™√l_fd
);

233 i‡(
	`FD_ISSET
(
ch™√l_fd
, &
wrôe_fds
)) {

234 
	`KAA_LOG_TRACE
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
,

235 "Pro˚ssög OUTÉvíàf‹Åhê˛õ¡ sockë %d", 
ch™√l_fd
);

237 
îr‹_code
 = 
	`kØ_t˝_ch™√l_¥o˚ss_evít
(&
kØ_˛õ¡
->
ch™√l
, 
FD_WRITE
);

238 i‡(
îr‹_code
) {

239 
	`KAA_LOG_ERROR
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
, 
îr‹_code
,

240 "FaûedÅÿ¥o˚s†OUTÉvíàf‹Åhê˛õ¡ sockë %d", 
ch™√l_fd
);

245 
	`KAA_LOG_ERROR
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
, 
KAA_ERR_BAD_STATE
, "FaûedÅÿpﬁ»des¸ùt‹s: %s", 
	`°ªº‹
(
î∫o
));

246 
îr‹_code
 = 
KAA_ERR_BAD_STATE
;

249 i‡(
kØ_˛õ¡
->
ch™√l_sockë_˛o£d
) {

250 
	`KAA_LOG_INFO
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
,

251 "Ch™√»[0x%08X] c⁄√˘i⁄Åîmö©ed", 
kØ_˛õ¡
->
ch™√l_id
);

253 
kØ_˛õ¡
->
ch™√l_°©e
 = 
KAA_CLIENT_CHANNEL_STATE_NOT_CONNECTED
;

254 i‡(
îr‹_code
 !
KAA_ERR_EVENT_NOT_ATTACHED
) {

255 
	`kØ_˛õ¡_deöô_ch™√l
(
kØ_˛õ¡
);

259  
îr‹_code
;

260 
	}
}

262 
kØ_îr‹_t
 
	$kØ_˛õ¡_¥o˚ss_ch™√l_disc⁄√˘ed
(
kØ_˛õ¡_t
 *
kØ_˛õ¡
)

264 
	`KAA_RETURN_IF_NIL
(
kØ_˛õ¡
, 
KAA_ERR_BADPARAM
);

266 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_t˝_ch™√l_check_kì∑live
(&
kØ_˛õ¡
->
ch™√l
);

267 i‡(
îr‹_code
) {

268 
	`KAA_LOG_ERROR
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
, 
îr‹_code
, "FaûedÅÿc⁄√˘ ch™√»[0x%08X]", kØ_˛õ¡->
ch™√l_id
);

270 
	`KAA_LOG_TRACE
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
, 
îr‹_code
, "Ch™√»[0x%08X] suc˚ssfuŒy c⁄√˘ed", kØ_˛õ¡->
ch™√l_id
);

271 
kØ_˛õ¡
->
ch™√l_°©e
 = 
KAA_CLIENT_CHANNEL_STATE_CONNECTED
;

274  
îr‹_code
;

275 
	}
}

277 
kØ_îr‹_t
 
	$kØ_˛õ¡_°¨t
(
kØ_˛õ¡_t
 *
kØ_˛õ¡


278 , 
exã∫Æ_¥o˚ss_‚
 
exã∫Æ_¥o˚ss


279 , *
exã∫Æ_¥o˚ss_c⁄ãxt


280 , 
kØ_time_t
 
max_dñay
)

282 
	`KAA_RETURN_IF_NIL
(
kØ_˛õ¡
, 
KAA_ERR_BADPARAM
);

284 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_check_ªadöess
(
kØ_˛õ¡
->
kØ_c⁄ãxt
);

285 i‡(
îr‹_code
 !
KAA_ERR_NONE
) {

286 
	`KAA_LOG_ERROR
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
, 
îr‹_code
, "Cannot start Kaa client: Kaa context isÇot fully initialized");

287  
îr‹_code
;

290 
kØ_˛õ¡
->
exã∫Æ_¥o˚ss_‚
 = 
exã∫Æ_¥o˚ss
;

291 
kØ_˛õ¡
->
exã∫Æ_¥o˚ss_c⁄ãxt
 =Éxternal_process_context;

292 
kØ_˛õ¡
->
exã∫Æ_¥o˚ss_max_dñay
 = 
max_dñay
;

293 
kØ_˛õ¡
->
exã∫Æ_¥o˚ss_œ°_ˇŒ
 = 
	`KAA_TIME
();

295 
	`KAA_LOG_INFO
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
, "Starting Kaa client...");

297 
kØ_˛õ¡
->
›î©e
) {

298 i‡(
kØ_˛õ¡
->
exã∫Æ_¥o˚ss_‚
) {

299 i‡((
	`KAA_TIME
(Ë- 
kØ_˛õ¡
->
exã∫Æ_¥o˚ss_œ°_ˇŒ
Ë>kØ_˛õ¡->
exã∫Æ_¥o˚ss_max_dñay
) {

300 
kØ_˛õ¡
->
	`exã∫Æ_¥o˚ss_‚
(kØ_˛õ¡->
exã∫Æ_¥o˚ss_c⁄ãxt
);

301 
kØ_˛õ¡
->
exã∫Æ_¥o˚ss_œ°_ˇŒ
 = 
	`KAA_TIME
();

306 i‡(
	`kØ_¥o˚ss_Áûovî
(
kØ_˛õ¡
->
kØ_c⁄ãxt
)) {

307 
kØ_˛õ¡
->
boo°øp_com∂ëe
 = 
Ál£
;

309 i‡(
kØ_˛õ¡
->
ch™√l_id
 > 0) {

310 i‡(
kØ_˛õ¡
->
ch™√l_°©e
 =
KAA_CLIENT_CHANNEL_STATE_NOT_CONNECTED
) {

311 
îr‹_code
 = 
	`kØ_˛õ¡_¥o˚ss_ch™√l_disc⁄√˘ed
(
kØ_˛õ¡
);

312 } i‡(
kØ_˛õ¡
->
ch™√l_°©e
 =
KAA_CLIENT_CHANNEL_STATE_CONNECTED
) {

313 
îr‹_code
 = 
	`kØ_˛õ¡_¥o˚ss_ch™√l_c⁄√˘ed
(
kØ_˛õ¡
);

314 i‡(
îr‹_code
 =
KAA_ERR_TIMEOUT
)

315 
	`kØ_˛õ¡_deöô_ch™√l
(
kØ_˛õ¡
);

319 i‡(
kØ_˛õ¡
->
boo°øp_com∂ëe
) {

320 
	`KAA_LOG_INFO
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
,

321 "Ch™√»[0x%08X] Boo°ø∞com∂ëe,ÑeöôülizögÅÿO≥øti⁄†...", 
kØ_˛õ¡
->
ch™√l_id
);

322 
kØ_˛õ¡
->
boo°øp_com∂ëe
 = 
Ál£
;

323 
	`kØ_˛õ¡_deöô_ch™√l
(
kØ_˛õ¡
);

324 
îr‹_code
 = 
	`kØ_˛õ¡_öô_ch™√l
(
kØ_˛õ¡
, 
KAA_CLIENT_CHANNEL_TYPE_OPERATIONS
);

325 i‡(
îr‹_code
 =
KAA_ERR_BAD_STATE
) {

326 
	`kØ_˛õ¡_deöô_ch™√l
(
kØ_˛õ¡
);

327 
kØ_˛õ¡
->
boo°øp_com∂ëe
 = 
Ál£
;

330 
	`KAA_LOG_INFO
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
,

331 "Ch™√»[0x%08X] O≥øti⁄†îr‹,ÑeöôülizögÅÿBoŸ°ø∞...", 
kØ_˛õ¡
->
ch™√l_id
);

332 
kØ_˛õ¡
->
boo°øp_com∂ëe
 = 
åue
;

333 
	`kØ_˛õ¡_deöô_ch™√l
(
kØ_˛õ¡
);

334 
	`kØ_˛õ¡_öô_ch™√l
(
kØ_˛õ¡
, 
KAA_CLIENT_CHANNEL_TYPE_BOOTSTRAP
);

338 #i‚de‡
KAA_DISABLE_FEATURE_LOGGING


339 
	`ext_log_u∂ﬂd_timeout
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
log_cﬁÀ˘‹
);

342 
	`KAA_LOG_INFO
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
, "Kaa client stopped");

344  
îr‹_code
;

345 
	}
}

347 
kØ_îr‹_t
 
	$kØ_˛õ¡_°›
(
kØ_˛õ¡_t
 *
kØ_˛õ¡
)

349 
	`KAA_RETURN_IF_NIL
(
kØ_˛õ¡
, 
KAA_ERR_BADPARAM
);

351 
	`KAA_LOG_TRACE
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
, "GoingÅo stop Kaa client...");

352 
kØ_˛õ¡
->
›î©e
 = 
Ál£
;

353  
	`kØ_°›
(
kØ_˛õ¡
->
kØ_c⁄ãxt
);

354 
	}
}

356 
kØ_îr‹_t
 
	$kØ_˛õ¡_öô_ch™√l
(
kØ_˛õ¡_t
 *
kØ_˛õ¡
, 
kØ_˛õ¡_ch™√l_ty≥_t
 
ch™√l_ty≥
)

358 
	`KAA_RETURN_IF_NIL
(
kØ_˛õ¡
, 
KAA_ERR_BADPARAM
);

360 
kØ_îr‹_t
 
îr‹_code
 = 
KAA_ERR_NONE
;

362 
	`KAA_LOG_TRACE
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
, "Initializing channel....");

364 
ch™√l_ty≥
) {

365 
KAA_CLIENT_CHANNEL_TYPE_BOOTSTRAP
:

366 
îr‹_code
 = 
	`kØ_t˝_ch™√l_¸óã
(&
kØ_˛õ¡
->
ch™√l


367 , 
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî


368 , 
BOOTSTRAP_SERVICE


369 , 
BOOTSTRAP_SERVICE_COUNT
);

371 
KAA_CLIENT_CHANNEL_TYPE_OPERATIONS
:

372 
îr‹_code
 = 
	`kØ_t˝_ch™√l_¸óã
(&
kØ_˛õ¡
->
ch™√l


373 , 
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî


374 , 
OPERATIONS_SERVICES


375 , 
OPERATIONS_SERVICES_COUNT
);

379 i‡(
îr‹_code
) {

380 
	`KAA_LOG_ERROR
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
, 
îr‹_code
, "FaûedÅÿ¸óãÅøn•‹àch™√l,Åy≥ %d", 
ch™√l_ty≥
);

381  
îr‹_code
;

384 
îr‹_code
 = 
	`kØ_t˝_ch™√l_£t_sockë_evíts_ˇŒback
(&
kØ_˛õ¡
->
ch™√l
, &
⁄_kØ_t˝_ch™√l_evít
, kaa_client);

385 i‡(
îr‹_code
) {

386 
	`KAA_LOG_ERROR
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
, 
îr‹_code
,

387 "FaûedÅÿ£àsockëÉvít†ˇŒback, ch™√»ty≥ %d", 
ch™√l_ty≥
);

388  
îr‹_code
;

391 
îr‹_code
 = 
	`kØ_ch™√l_m™agî_add_å™•‹t_ch™√l
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
ch™√l_m™agî


392 , &
kØ_˛õ¡
->
ch™√l


393 , &
kØ_˛õ¡
->
ch™√l_id
);

394 i‡(
îr‹_code
) {

395 
	`KAA_LOG_WARN
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
, 
îr‹_code
, "FailedÅo %s channel,Åype %d",

396 
îr‹_code
 =
KAA_ERR_BAD_STATE
 ? "öôülize" : "add", 
ch™√l_ty≥
);

398  
îr‹_code
;

401 
	`KAA_LOG_TRACE
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
, "Channel [0x%08X] initialized successfully (type %d)"

402 , 
kØ_˛õ¡
->
ch™√l_id
, 
ch™√l_ty≥
);

404  
îr‹_code
;

405 
	}
}

407 
kØ_îr‹_t
 
	$kØ_˛õ¡_deöô_ch™√l
(
kØ_˛õ¡_t
 *
kØ_˛õ¡
)

409 
	`KAA_RETURN_IF_NIL
(
kØ_˛õ¡
, 
KAA_ERR_BADPARAM
);

411 
kØ_îr‹_t
 
îr‹_code
 = 
KAA_ERR_NONE
;

413 i‡(
kØ_˛õ¡
->
ch™√l_id
 == 0)

414  
KAA_ERR_NONE
;

416 
	`KAA_LOG_TRACE
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
, "Deinitializing channel....");

418 
îr‹_code
 = 
	`kØ_ch™√l_m™agî_ªmove_å™•‹t_ch™√l
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
ch™√l_m™agî
,kØ_˛õ¡->
ch™√l_id
);

419 i‡(
îr‹_code
) {

420 
	`KAA_LOG_TRACE
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
, 
îr‹_code
, "Bootstrap channelÉrrorÑemoving from channel manager");

421  
îr‹_code
;

424 
kØ_˛õ¡
->
ch™√l_id
 = 0;

425 
kØ_˛õ¡
->
ch™√l_sockë_˛o£d
 = 
Ál£
;

426 
kØ_˛õ¡
->
ch™√l
.
c⁄ãxt
 = 
NULL
;

427 
kØ_˛õ¡
->
ch™√l
.
de°roy
 = 
NULL
;

428 
kØ_˛õ¡
->
ch™√l
.
gë_¥Ÿocﬁ_id
 = 
NULL
;

429 
kØ_˛õ¡
->
ch™√l
.
gë_suµ‹ãd_£rvi˚s
 = 
NULL
;

430 
kØ_˛õ¡
->
ch™√l
.
öô
 = 
NULL
;

431 
kØ_˛õ¡
->
ch™√l
.
£t_ac˚ss_poöt
 = 
NULL
;

432 
kØ_˛õ¡
->
ch™√l
.
sync_h™dÀr
 = 
NULL
;

434 
	`KAA_LOG_TRACE
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
, "Channel deinitialized successfully");

436  
îr‹_code
;

437 
	}
}

439 #i‚de‡
KAA_DISABLE_FEATURE_LOGGING


440 
kØ_îr‹_t
 
	$kØ_log_cﬁÀ˘‹_öô
(
kØ_˛õ¡_t
 *
kØ_˛õ¡
)

442 
	`KAA_RETURN_IF_NIL
(
kØ_˛õ¡
, 
KAA_ERR_BADPARAM
);

444 
kØ_îr‹_t
 
îr‹_code
 = 
	`ext_u∆imôed_log_°‹age_¸óã
(&
kØ_˛õ¡
->
log_°‹age_c⁄ãxt


445 , 
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
);

446 i‡(
îr‹_code
) {

447 
	`KAA_LOG_ERROR
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
, 
îr‹_code
, "FailedÅo createÜog storage");

448  
îr‹_code
;

451 
îr‹_code
 = 
	`ext_log_u∂ﬂd_°øãgy_¸óã
(
kØ_˛õ¡
->
kØ_c⁄ãxt
, &kØ_˛õ¡->
log_u∂ﬂd_°øãgy_c⁄ãxt
, 
KAA_LOG_UPLOAD_VOLUME_STRATEGY
);

452 i‡(
îr‹_code
) {

453 
	`KAA_LOG_ERROR
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
, 
îr‹_code
, "FailedÅo createÜog upload strategy");

454  
îr‹_code
;

457 
kØ_log_buckë_c⁄°øöts_t
 
buckë_sizes
 = {

458 .
max_buckë_size
 = 
MAX_LOG_BUCKET_SIZE
,

459 .
max_buckë_log_cou¡
 = 
MAX_LOG_COUNT
,

462 
îr‹_code
 = 
	`kØ_loggög_öô
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
log_cﬁÀ˘‹


463 , 
kØ_˛õ¡
->
log_°‹age_c⁄ãxt


464 , 
kØ_˛õ¡
->
log_u∂ﬂd_°øãgy_c⁄ãxt


465 , &
buckë_sizes
);

466 i‡(
îr‹_code
) {

467 
	`KAA_LOG_ERROR
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
, 
îr‹_code
,"FailedÅo initÜog collector");

468  
îr‹_code
;

471 
	`KAA_LOG_INFO
(
kØ_˛õ¡
->
kØ_c⁄ãxt
->
loggî
, 
KAA_ERR_NONE
, "Log collector init completed");

472  
îr‹_code
;

473 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/posix/logger.c

17 
	~<°dio.h
>

18 
	~<time.h
>

19 
	~<°d¨g.h
>

20 
	~"∂©f‹m/ext_sy°em_loggî.h
"

24 
	$ext_wrôe_log
(
FILE
 * 
sök
, c⁄° * 
buf„r
, 
size_t
 
mesßge_size
)

26 i‡(!
buf„r
 || !
sök
) {

29 
	`fwrôe
(
buf„r
, (), 
mesßge_size
, 
sök
);

30 
	`fÊush
(
sök
);

31 
	}
}

33 
kØ_time_t
 
	$ext_gë_sy°ime
()

35  
	`time
(
NULL
);

36 
	}
}

38 
	$ext_f‹m©_•rötf
(* 
buf„r
, 
size_t
 
buf„r_size
, c⁄° * 
f‹m©
,

39 c⁄° * 
log_Àvñ_«me
, c⁄° * 
åunˇãd_«me
, 
löío
,

40 
kØ_îr‹_t
 
îr‹_code
)

42 
time_t
 
t
 = 
	`ext_gë_sy°ime
();

43 
tm
* 
ç
 = 
	`gmtime
(&
t
);

45  
	`¢¥ötf
(
buf„r
, 
buf„r_size
, 
f‹m©
, 1900 + 
ç
->
tm_yór
,

46 
ç
->
tm_m⁄
 + 1,Åp->
tm_mday
,Åp->
tm_hour
,Åp->
tm_mö
,Åp->
tm_£c
,

47 
log_Àvñ_«me
, 
åunˇãd_«me
, 
löío
, 
îr‹_code
);

48 
	}
}

50 
	$ext_¢pötf
(* 
buf„r
, 
size_t
 
buf„r_size
, c⁄° * 
f‹m©
, ...)

52 
va_li°
 
¨gs
;

53 
	`va_°¨t
(
¨gs
, 
f‹m©
);

54 
ªs_Àn
 = 
	`v¢¥ötf
(
buf„r
, 
buf„r_size
, 
f‹m©
, 
¨gs
);

55 
	`va_íd
(
¨gs
);

56  
ªs_Àn
;

57 
	}
}

59 
	$ext_loggî_•rötf
(* 
buf„r
, 
size_t
 
buf„r_size
, c⁄° * 
f‹m©
,

60 
va_li°
 
¨gs
)

62  
	`v¢¥ötf
(
buf„r
, 
buf„r_size
, 
f‹m©
, 
¨gs
);

63 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/posix/platform/defaults.h

23 #i‚de‡
POSIX_DEFAULTS_H_


24 
	#POSIX_DEFAULTS_H_


	)

26 
	#KAA_TCP_CHANNEL_IN_BUFFER_SIZE
 2048

	)

27 
	#KAA_TCP_CHANNEL_OUT_BUFFER_SIZE
 8192

	)

29 
	#KAA_TCP_CHANNEL_MAX_TIMEOUT
 200u

	)

30 
	#KAA_TCP_CHANNEL_PING_TIMEOUT
 (
KAA_TCP_CHANNEL_MAX_TIMEOUT
 / 2)

	)

32 
	#KAATCP_PARSER_MAX_MESSAGE_LENGTH
 1024 * 1024

	)

34 
	#KAA_MAX_LOG_MESSAGE_LENGTH
 512

	)

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/posix/platform/file_utils.h

17 #i‚de‡
POSIX_FILE_UTILS_H_


18 
	#POSIX_FILE_UTILS_H_


	)

20 
	~<°ddef.h
>

21 
	~<°dboﬁ.h
>

23 #ifde‡
__˝lu•lus


27 
posix_bö¨y_fûe_ªad
(c⁄° *
fûe_«me
, **
buf„r
, 
size_t
 *
buf„r_size
, 
boﬁ
 *
√eds_dóŒoˇti⁄
);

30 
posix_bö¨y_fûe_°‹e
(c⁄° *
fûe_«me
, c⁄° *
buf„r
, 
size_t
 
buf„r_size
);

33 
posix_bö¨y_fûe_dñëe
(c⁄° *
fûe_«me
);

35 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/posix/platform/mem.h

17 #i‚de‡
SRC_KAA_PLATFORM_IMPL_POSIX_MEM_H_


18 
	#SRC_KAA_PLATFORM_IMPL_POSIX_MEM_H_


	)

20 
	~<°dlib.h
>

22 #i‚de‡
__KAA_MALLOC


23 
	#__KAA_MALLOC
(
S
Ë
	`mÆloc
(S)

	)

26 #i‚de‡
__KAA_CALLOC


27 
	#__KAA_CALLOC
(
N
,
S
Ë
	`ˇŒoc
(N, S)

	)

30 #i‚de‡
__KAA_REALLOC


31 
	#__KAA_REALLOC
(
P
, 
S
Ë
	`ªÆloc
(P, S)

	)

34 #i‚de‡
__KAA_FREE


35 
	#__KAA_FREE
(
P
Ë
	`‰ì
(P)

	)

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/posix/platform/sock.h

23 #i‚de‡
POSIX_SOCK_H_


24 
	#POSIX_SOCK_H_


	)

26 
	~<sys/sockë.h
>

27 
	~<sys/£À˘.h
>

28 
	~<¨∑/öë.h
>

30 
	~"∂©f‹m-im∂/comm⁄/kØ_ht⁄Œ.h
"

32 
	tkØ_fd_t
;

34 
sockaddr
 
	tkØ_sockaddr_t
;

35 
sockaddr_°‹age
 
	tkØ_sockaddr_°‹age_t
;

36 
sockÀn_t
 
	tkØ_sockÀn_t
;

38 
	#KAA_HTONS
(
ho°sh‹t
Ë
	`ht⁄s
((ho°sh‹t))

	)

39 
	#KAA_HTONL
(
ho°l⁄g
Ë
	`ht⁄l
((ho°l⁄g))

	)

40 
	#KAA_HTONLL
(
ho°l⁄gl⁄g
Ë
	`kØ_ht⁄Œ
((ho°l⁄gl⁄g))

	)

42 
	#KAA_NTOHS
(
√tsh‹t
Ë
	`¡ohs
(“ësh‹t))

	)

43 
	#KAA_NTOHL
(
√é⁄g
Ë
	`¡ohl
(“ël⁄g))

	)

44 
	#KAA_NTOHLL
(
√é⁄gl⁄g
Ë
	`kØ_¡ohŒ
(“ël⁄gl⁄g))

	)

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/posix/platform/stdio.h

23 #i‚de‡
POSIX_STDIO_H_


24 
	#POSIX_STDIO_H_


	)

26 
	~<°dio.h
>

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/posix/platform/time.h

18 #i‚de‡
POSIX_TIME_H_


19 
	#POSIX_TIME_H_


	)

21 
	~<time.h
>

23 
time_t
 
	tkØ_time_t
;

25 
	#KAA_TIME
(Ë(
kØ_time_t
)
	`time
(
NULL
)

	)

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/posix/posix_platform.h

17 #i‚de‡
POSIX_PLATFORM_H_


18 
	#POSIX_PLATFORM_H_


	)

20 
	~<time.h
>

21 
	~<°d¨g.h
>

22 
	~<°rög.h
>

23 
	~<°dio.h
>

24 
	~<°döt.h
>

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/posix/status.c

17 
	~<°dboﬁ.h
>

18 
	~<°ddef.h
>

19 
	~"∂©f‹m/ext_°©us.h
"

20 
	~<∂©f‹m/fûe_utûs.h
>

22 
	#KAA_STATUS_STORAGE
 "kØ_°©us.bö"

	)

24 
	$ext_°©us_ªad
(**
buf„r
, 
size_t
 *
buf„r_size
, 
boﬁ
 *
√eds_dóŒoˇti⁄
)

26 
	`posix_bö¨y_fûe_ªad
(
KAA_STATUS_STORAGE
, 
buf„r
, 
buf„r_size
, 
√eds_dóŒoˇti⁄
);

27 
	}
}

29 
	$ext_°©us_°‹e
(c⁄° *
buf„r
, 
size_t
 
buf„r_size
)

31 
	`posix_bö¨y_fûe_°‹e
(
KAA_STATUS_STORAGE
, 
buf„r
, 
buf„r_size
);

32 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/posix/tcp_utils.c

18 
	#_POSIX_C_SOURCE
 200112L

	)

20 
	~"∂©f‹m/ext_t˝_utûs.h
"

21 
	~<∂©f‹m/°dio.h
>

22 
	~"kØ_comm⁄.h
"

23 
	~<uni°d.h
>

24 
	~<î∫o.h
>

25 
	~<√tdb.h
>

26 
	~<°rög.h
>

27 
	~<f˙é.h
>

28 
	~<sys/ty≥s.h
>

29 
	~<sys/sockë.h
>

30 
	~<√töë/ö.h
>

34 
kØ_îr‹_t
 
	$ext_t˝_utûs_£t_sockaddr_p‹t
(
kØ_sockaddr_t
 *
addr
, 
uöt16_t
 
p‹t
)

36 
	`KAA_RETURN_IF_NIL2
(
addr
, 
p‹t
, 
KAA_ERR_BADPARAM
);

37 
addr
->
ß_Ámûy
) {

38 
AF_INET
: {

39 
sockaddr_ö
 *
s_ö
 = (sockaddr_ö *Ë
addr
;

40 
s_ö
->
sö_p‹t
 = 
	`KAA_HTONS
(
p‹t
);

43 
AF_INET6
: {

44 
sockaddr_ö6
 *
s_ö6
 = (sockaddr_ö6 *Ë
addr
;

45 
s_ö6
->
sö6_p‹t
 = 
	`KAA_HTONS
(
p‹t
);

49  
KAA_ERR_SOCKET_INVALID_FAMILY
;

51  
KAA_ERR_NONE
;

52 
	}
}

56 
ext_t˝_utûs_fun˘i⁄_ªtu∫_°©e_t
 
	$ext_t˝_utûs_gëaddrbyho°
(
kØ_dns_ªsﬁve_li°íî_t
 *
ªsﬁve_li°íî


57 , c⁄° 
kØ_dns_ªsﬁve_öfo_t
 *
ªsﬁve_¥›s


58 , 
kØ_sockaddr_t
 *
ªsu…


59 , 
kØ_sockÀn_t
 *
ªsu…_size
)

61 ()
ªsﬁve_li°íî
;

62 
	`KAA_RETURN_IF_NIL4
(
ªsﬁve_¥›s
,Ñesﬁve_¥›s->
ho°«me
, 
ªsu…
, 
ªsu…_size
, 
RET_STATE_VALUE_ERROR
);

63 i‡(*
ªsu…_size
 < (
sockaddr_ö
))

64  
RET_STATE_BUFFER_NOT_ENOUGH
;

66 
addröfo
 
höts
;

67 
	`mem£t
(&
höts
, 0 , (
addröfo
));

68 
höts
.
ai_sockty≥
 = 
SOCK_STREAM
;

69 i‡(*
ªsu…_size
 < (
sockaddr_ö6
))

70 
höts
.
ai_Ámûy
 = 
AF_INET
;

72 
ho°«me_°r
[
ªsﬁve_¥›s
->
ho°«me_Àngth
 + 1];

73 
	`mem˝y
(
ho°«me_°r
, 
ªsﬁve_¥›s
->
ho°«me
,Ñesﬁve_¥›s->
ho°«me_Àngth
);

74 
ho°«me_°r
[
ªsﬁve_¥›s
->
ho°«me_Àngth
] = '\0';

76 
addröfo
 *
ªsﬁve_ªsu…
 = 
NULL
;

77 
ªsﬁve_îr‹
 = 0;

79 i‡(
ªsﬁve_¥›s
->
p‹t
) {

80 
p‹t_°r
[6];

81 
	`¢¥ötf
(
p‹t_°r
, 6, "%u", 
ªsﬁve_¥›s
->
p‹t
);

82 
ªsﬁve_îr‹
 = 
	`gëaddröfo
(
ho°«me_°r
, 
p‹t_°r
, &
höts
, &
ªsﬁve_ªsu…
);

84 
ªsﬁve_îr‹
 = 
	`gëaddröfo
(
ho°«me_°r
, 
NULL
, &
höts
, &
ªsﬁve_ªsu…
);

87 i‡(
ªsﬁve_îr‹
 || !
ªsﬁve_ªsu…
)

88  
RET_STATE_VALUE_ERROR
;

90 i‡(
ªsﬁve_ªsu…
->
ai_addæí
 > *
ªsu…_size
) {

91 
	`‰ìaddröfo
(
ªsﬁve_ªsu…
);

92  
RET_STATE_BUFFER_NOT_ENOUGH
;

95 
	`mem˝y
(
ªsu…
, 
ªsﬁve_ªsu…
->
ai_addr
,Ñesﬁve_ªsu…->
ai_addæí
);

96 *
ªsu…_size
 = 
ªsﬁve_ªsu…
->
ai_addæí
;

97 
	`‰ìaddröfo
(
ªsﬁve_ªsu…
);

98  
RET_STATE_VALUE_READY
;

99 
	}
}

103 
kØ_îr‹_t
 
	$ext_t˝_utûs_›í_t˝_sockë
(
kØ_fd_t
 *
fd


104 , c⁄° 
kØ_sockaddr_t
 *
de°ö©i⁄


105 , 
kØ_sockÀn_t
 
de°ö©i⁄_size
)

107 
	`KAA_RETURN_IF_NIL3
(
fd
, 
de°ö©i⁄
, 
de°ö©i⁄_size
, 
KAA_ERR_BADPARAM
);

109 
kØ_fd_t
 
sock
 = 
	`sockë
(
de°ö©i⁄
->
ß_Ámûy
, 
SOCK_STREAM
, 0);

110 i‡(
sock
 < 0)

111  
KAA_ERR_SOCKET_ERROR
;

113 
Êags
 = 
	`f˙é
(
sock
, 
F_GETFL
);

114 i‡(
Êags
 < 0) {

115 
	`ext_t˝_utûs_t˝_sockë_˛o£
(
sock
);

116  
KAA_ERR_SOCKET_ERROR
;

119 i‡(
	`f˙é
(
sock
, 
F_SETFL
, 
Êags
 | 
O_NONBLOCK
) < 0) {

120 
	`ext_t˝_utûs_t˝_sockë_˛o£
(
sock
);

121  
KAA_ERR_SOCKET_ERROR
;

124 i‡(
	`c⁄√˘
(
sock
, 
de°ö©i⁄
, 
de°ö©i⁄_size
Ë&& 
î∫o
 !
EINPROGRESS
) {

125 
	`ext_t˝_utûs_t˝_sockë_˛o£
(
sock
);

126  
KAA_ERR_SOCKET_CONNECT_ERROR
;

129 *
fd
 = 
sock
;

130  
KAA_ERR_NONE
;

131 
	}
}

135 
ext_t˝_sockë_°©e_t
 
	$ext_t˝_utûs_t˝_sockë_check
(
kØ_fd_t
 
fd


136 , c⁄° 
kØ_sockaddr_t
 *
de°ö©i⁄


137 , 
kØ_sockÀn_t
 
de°ö©i⁄_size
)

139 i‡(
	`c⁄√˘
(
fd
, 
de°ö©i⁄
, 
de°ö©i⁄_size
) < 0 ) {

140 
î∫o
) {

141 
EINPROGRESS
:

142 
EALREADY
:

143  
KAA_TCP_SOCK_CONNECTING
;

144 
EISCONN
:

145  
KAA_TCP_SOCK_CONNECTED
;

147  
KAA_TCP_SOCK_ERROR
;

150  
KAA_TCP_SOCK_CONNECTED
;

151 
	}
}

155 
ext_t˝_sockë_io_îr‹s_t
 
	$ext_t˝_utûs_t˝_sockë_wrôe
(
kØ_fd_t
 
fd


156 , c⁄° *
buf„r


157 , 
size_t
 
buf„r_size


158 , 
size_t
 *
byãs_wrôãn
)

160 
	`KAA_RETURN_IF_NIL2
(
buf„r
, 
buf„r_size
, 
KAA_TCP_SOCK_IO_ERROR
);

161 
ssize_t
 
wrôe_ªsu…
 = 
	`wrôe
(
fd
, 
buf„r
, 
buf„r_size
);

162 i‡(
wrôe_ªsu…
 < 0 && 
î∫o
 !
EAGAIN
)

163  
KAA_TCP_SOCK_IO_ERROR
;

164 i‡(
byãs_wrôãn
)

165 *
byãs_wrôãn
 = (
wrôe_ªsu…
 > 0) ? write_result : 0;

166  
KAA_TCP_SOCK_IO_OK
;

167 
	}
}

171 
ext_t˝_sockë_io_îr‹s_t
 
	$ext_t˝_utûs_t˝_sockë_ªad
(
kØ_fd_t
 
fd


172 , *
buf„r


173 , 
size_t
 
buf„r_size


174 , 
size_t
 *
byãs_ªad
)

176 
	`KAA_RETURN_IF_NIL2
(
buf„r
, 
buf„r_size
, 
KAA_TCP_SOCK_IO_ERROR
);

177 
ssize_t
 
ªad_ªsu…
 = 
	`ªad
(
fd
, 
buf„r
, 
buf„r_size
);

178 i‡(!
ªad_ªsu…
)

179  
KAA_TCP_SOCK_IO_EOF
;

180 i‡(
ªad_ªsu…
 < 0 && 
î∫o
 !
EAGAIN
)

181  
KAA_TCP_SOCK_IO_ERROR
;

182 i‡(
byãs_ªad
)

183 *
byãs_ªad
 = (
ªad_ªsu…
 > 0) ?Ñead_result : 0;

184  
KAA_TCP_SOCK_IO_OK
;

185 
	}
}

189 
kØ_îr‹_t
 
	$ext_t˝_utûs_t˝_sockë_˛o£
(
kØ_fd_t
 
fd
)

191  (
	`˛o£
(
fd
Ë< 0Ë? 
KAA_ERR_SOCKET_ERROR
 : 
KAA_ERR_NONE
;

192 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/platform/ext_configuration_persistence.h

22 #i‚de‡
EXT_CONFIGURATION_PERSISTENCE_H_


23 
	#EXT_CONFIGURATION_PERSISTENCE_H_


	)

26 #ifde‡
__˝lu•lus


44 
ext_c⁄figuøti⁄_ªad
(**
buf„r
, 
size_t
 *
buf„r_size
, 
boﬁ
 *
√eds_dóŒoˇti⁄
);

55 
ext_c⁄figuøti⁄_°‹e
(c⁄° *
buf„r
, 
size_t
 
buf„r_size
);

62 
ext_c⁄figuøti⁄_dñëe
();

65 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/platform/ext_configuration_receiver.h

23 #i‚de‡
EXT_CONFIGURATION_RECEIVER_H_


24 
	#EXT_CONFIGURATION_RECEIVER_H_


	)

26 
	~"kØ_îr‹.h
"

27 
	~"gí/kØ_c⁄figuøti⁄_deföôi⁄s.h
"

29 #ifde‡
__˝lu•lus


43 
kØ_îr‹_t
 (*
	t⁄_c⁄figuøti⁄_upd©ed_‚
)(*
	tc⁄ãxt
, c⁄° 
	tkØ_roŸ_c⁄figuøti⁄_t
 *
	tc⁄figuøti⁄
);

52 *
c⁄ãxt
;

53 
⁄_c⁄figuøti⁄_upd©ed_‚
 
⁄_c⁄figuøti⁄_upd©ed
;

54 } 
	tkØ_c⁄figuøti⁄_roŸ_ª˚ivî_t
;

59 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/platform/ext_encryption_utils.h

23 #i‚de‡
EXT_ENCRYPTION_UTILS_H_


24 
	#EXT_ENCRYPTION_UTILS_H_


	)

26 
	~<kØ/kØ_îr‹.h
>

28 
	~<°döt.h
>

29 
	~<°ddef.h
>

31 #ifde‡
__˝lu•lus


41 
kØ_îr‹_t
 
kØ_öô_£ssi⁄_key
();

47 
kØ_deöô_£ssi⁄_key
();

55 
ext_gë_ídpoöt_£ssi⁄_key
(c⁄° 
uöt8_t
 **
buf„r
, 
size_t
 *
buf„r_size
);

65 
kØ_îr‹_t
 
ext_í¸y±_d©a
(c⁄° 
uöt8_t
 *
öput
, 
size_t
 
öput_size
, uöt8_à*
ouçut
);

73 
size_t
 
ext_gë_í¸y±ed_d©a_size
(size_à
öput_size
);

86 
kØ_îr‹_t
 
ext_de¸y±_d©a
(c⁄° 
uöt8_t
 *
öput
, 
size_t
 
öput_size
,

87 
uöt8_t
 *
ouçut
, 
size_t
 *
ouçut_∑ylﬂd_size
);

98 
kØ_îr‹_t
 
ext_gë_í¸y±ed_£ssi⁄_key
(
uöt8_t
 **
buf„r
, 
size_t
 *
buf„r_size
,

99 c⁄° 
uöt8_t
 *
ªmŸe_key
, 
size_t
 
ªmŸe_key_size
);

110 
kØ_îr‹_t
 
ext_gë_sig«tuª
(c⁄° 
uöt8_t
 *
öput
, 
size_t
 
öput_size
,

111 
uöt8_t
 **
ouçut
, 
size_t
 *
ouçut_size
);

113 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/platform/ext_event_listeners_callback.h

24 #i‚de‡
EXT_EVENT_LISTENERS_CALLBACK_H_


25 
	#EXT_EVENT_LISTENERS_CALLBACK_H_


	)

27 
	~"kØ_comm⁄.h
"

28 
	~"kØ_îr‹.h
"

30 #ifde‡
__˝lu•lus


45 
kØ_îr‹_t
 (*
	t⁄_evít_li°íîs_‚
Ë(*
	tc⁄ãxt
, c⁄° 
	tkØ_ídpoöt_id
 
	tli°íîs
[], 
	tsize_t
 
	tli°íîs_cou¡
);

55 
kØ_îr‹_t
 (*
	t⁄_evít_li°íîs_Áûed_‚
Ë(*
	tc⁄ãxt
);

63 *
c⁄ãxt
;

64 
⁄_evít_li°íîs_‚
 
⁄_evít_li°íîs
;

65 
⁄_evít_li°íîs_Áûed_‚
 
⁄_evít_li°íîs_Áûed
;

66 } 
	tkØ_evít_li°íîs_ˇŒback_t
;

69 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/platform/ext_kaa_failover_strategy.h

17 #i‚de‡
EXT_FAILOVER_STRATEGY_H_


18 
	#EXT_FAILOVER_STRATEGY_H_


	)

20 
	~<°ddef.h
>

21 
	~"kØ_îr‹.h
"

22 
	~<∂©f‹m/time.h
>

24 
	#KAA_FAILOVER_RETRY_PERIOD
 2

	)

25 
	#KAA_BOOTSTRAP_RESPONSE_PERIOD
 5

	)

28 
	mKAA_NOOP
 = 0,

29 
	mKAA_RETRY
,

30 
	mKAA_USE_NEXT_BOOTSTRAP
,

31 
	mKAA_USE_NEXT_OPERATIONS
,

32 
	mKAA_STOP_APP


33 } 
	tkØ_Áûovî_°øãgy_a˘i⁄_t
;

36 
	mKAA_CHANNEL_NA
 = 0,

37 
	mKAA_BOOTSTRAP_SERVERS_NA
,

38 
	mKAA_OPERATION_SERVERS_NA
,

39 
	mKAA_NO_OPERATION_SERVERS_RECEIVED
,

40 
	mKAA_NO_CONNECTIVITY
,

41 
	mKAA_ENDPOINT_NOT_REGISTERED
,

42 
	mKAA_CREDENTIALS_REVOKED
,

44 } 
	tkØ_Áûovî_ªas⁄
;

47 
kØ_Áûovî_°øãgy_a˘i⁄_t
 
	ma˘i⁄
;

48 
kØ_time_t
 
	mªåy_≥riod
;

49 } 
	tkØ_Áûovî_decisi⁄_t
;

51 
	gkØ_Áûovî_°øãgy_t
;

52 
kØ_Áûovî_°øãgy_t
 
	tkØ_Áûovî_°øãgy_t
;

62 
kØ_Áûovî_decisi⁄_t
 
kØ_Áûovî_°øãgy_⁄_Áûovî
(*
£lf
, 
kØ_Áûovî_ªas⁄
 
ªas⁄
);

	@/var/www/html/debian/gateway/kaa/src/kaa/platform/ext_key_utils.h

22 #i‚de‡
EXT_KEY_UTILS_H_


23 
	#EXT_KEY_UTILS_H_


	)

25 
	~<kØ/kØ_îr‹.h
>

27 #ifde‡
__˝lu•lus


35 
kØ_îr‹_t
 
kØ_öô_rß_key∑ú
();

41 
kØ_deöô_rß_key∑ú
();

50 
ext_gë_ídpoöt_public_key
(c⁄° 
uöt8_t
 **
buf„r
, 
size_t
 *
buf„r_size
);

59 
ext_gë_sha1_public
(
uöt8_t
 **
sha1
, 
size_t
 *
Àngth
);

68 
kØ_îr‹_t
 
ext_gë_sha1_ba£64_public
(c⁄° 
uöt8_t
 **
sha1
, 
size_t
 *
Àngth
);

70 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/platform/ext_log_delivery_listener.h

26 #i‚de‡
EXT_LOG_DELIVERY_LISTENER_


27 
	#EXT_LOG_DELIVERY_LISTENER_


	)

30 #ifde‡
__˝lu•lus


39 
size_t
 
log_cou¡
;

40 
uöt16_t
 
buckë_id
;

41 } 
	tkØ_log_buckë_öfo_t
;

52 (*
kØ_log_evít_‚
)(*
	tc⁄ãxt
, c⁄° 
	tkØ_log_buckë_öfo_t
 *
	tbuckë
);

56 
kØ_log_evít_‚
 
⁄_suc˚ss
;

57 
kØ_log_evít_‚
 
⁄_Áûed
;

58 
kØ_log_evít_‚
 
⁄_timeout
;

59 *
˘x
;

60 } 
	tkØ_log_dñivîy_li°íî_t
;

63 
	#KAA_LOG_EMPTY_LISTENERS
 ((
kØ_log_dñivîy_li°íî_t
){
NULL
, NULL, NULL, NULL})

	)

65 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/platform/ext_log_storage.h

24 #i‚de‡
EXT_LOG_STORAGE_H_


25 
	#EXT_LOG_STORAGE_H_


	)

27 #ifde‡
__˝lu•lus


31 
	~<°ddef.h
>

33 
	~"kØ_îr‹.h
"

40 *
d©a
;

41 
size_t
 
size
;

42 
uöt16_t
 
buckë_id
;

43 } 
	tkØ_log_ªc‹d_t
;

57 
kØ_îr‹_t
 
ext_log_°‹age_Æloˇã_log_ªc‹d_buf„r
(*
c⁄ãxt
, 
kØ_log_ªc‹d_t
 *
ªc‹d
);

71 
kØ_îr‹_t
 
ext_log_°‹age_dóŒoˇã_log_ªc‹d_buf„r
(*
c⁄ãxt
, 
kØ_log_ªc‹d_t
 *
ªc‹d
);

86 
kØ_îr‹_t
 
ext_log_°‹age_add_log_ªc‹d
(*
c⁄ãxt
, 
kØ_log_ªc‹d_t
 *
ªc‹d
);

111 
kØ_îr‹_t
 
ext_log_°‹age_wrôe_√xt_ªc‹d
(*
c⁄ãxt
, *
buf„r
, 
size_t
 
buf„r_Àn
, 
uöt16_t
 *
buckë_id
, size_à*
ªc‹d_Àn
);

123 
kØ_îr‹_t
 
ext_log_°‹age_ªmove_by_buckë_id
(*
c⁄ãxt
, 
uöt16_t
 
buckë_id
);

135 
kØ_îr‹_t
 
ext_log_°‹age_unm¨k_by_buckë_id
(*
c⁄ãxt
, 
uöt16_t
 
buckë_id
);

146 
size_t
 
ext_log_°‹age_gë_tŸÆ_size
(c⁄° *
c⁄ãxt
);

157 
size_t
 
ext_log_°‹age_gë_ªc‹ds_cou¡
(c⁄° *
c⁄ãxt
);

168 
kØ_îr‹_t
 
ext_log_°‹age_de°roy
(*
c⁄ãxt
);

170 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/platform/ext_log_upload_strategy.h

24 #i‚de‡
EXT_LOG_UPLOAD_STRATEGY_H_


25 
	#EXT_LOG_UPLOAD_STRATEGY_H_


	)

27 
	~"∂©f‹m/ext_log_°‹age.h
"

29 #ifde‡
__˝lu•lus


39 
NOOP
 = 0,

40 
UPLOAD
 = 1

41 } 
	text_log_u∂ﬂd_decisi⁄_t
;

47 
NO_APPENDERS_CONFIGURED
 = 0x00,

48 
APPENDER_INTERNAL_ERROR
 = 0x01,

49 
REMOTE_CONNECTION_ERROR
 = 0x02,

50 
REMOTE_INTERNAL_ERROR
 = 0x03

51 } 
	tloggög_dñivîy_îr‹_code_t
;

61 
kØ_c⁄ãxt_s
;

62 
kØ_îr‹_t
 
ext_log_u∂ﬂd_°øãgy_¸óã
(
kØ_c⁄ãxt_s
 *
c⁄ãxt
, **
°øãgy_p
, 
uöt8_t
 
ty≥
);

72 
ext_log_u∂ﬂd_decisi⁄_t
 
ext_log_u∂ﬂd_°øãgy_decide
(*
c⁄ãxt
, c⁄° *
log_°‹age_c⁄ãxt
);

80 
size_t
 
ext_log_u∂ﬂd_°øãgy_gë_timeout
(*
c⁄ãxt
);

90 
size_t
 
ext_log_u∂ﬂd_°øãgy_gë_max_∑øŒñ_u∂ﬂds
(*
c⁄ãxt
);

100 
kØ_îr‹_t
 
ext_log_u∂ﬂd_°øãgy_⁄_timeout
(*
c⁄ãxt
);

111 
kØ_îr‹_t
 
ext_log_u∂ﬂd_°øãgy_⁄_Áûuª
(*
c⁄ãxt
, 
loggög_dñivîy_îr‹_code_t
 
îr‹_code
);

121 
ext_log_u∂ﬂd_°øãgy_de°roy
(*
c⁄ãxt
);

125 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/platform/ext_notification_receiver.h

17 #i‚de‡
KAA_NOTIFICATION_RECEIVER


18 
	#KAA_NOTIFICATION_RECEIVER


	)

20 
	~"gí/kØ_nŸifiˇti⁄_deföôi⁄s.h
"

22 #ifde‡
__˝lu•lus


27 
MANDATORY_SUBSCRIPTION
 = 0x00,

28 
OPTIONAL_SUBSCRIPTION
 = 0x01

29 } 
	tkØ_t›ic_subs¸ùti⁄_ty≥_t
;

39 (*
⁄_nŸifiˇti⁄_ˇŒback
)(*
	tc⁄ãxt
, 
	tuöt64_t
 *
	tt›ic_id
, 
	tkØ_nŸifiˇti⁄_t
 *
	tnŸifiˇti⁄
);

42 
⁄_nŸifiˇti⁄_ˇŒback
 
ˇŒback
;

43 *
c⁄ãxt
;

44 } 
	tkØ_nŸifiˇti⁄_li°íî_t
;

47 
uöt64_t
 
id
;

48 
kØ_t›ic_subs¸ùti⁄_ty≥_t
 
subs¸ùti⁄_ty≥
;

49 
uöt16_t
 
«me_Àngth
;

50 *
«me
;

51 } 
	tkØ_t›ic_t
;

60 (*
⁄_t›ic_li°_ˇŒback
)(*
	tc⁄ãxt
, 
	tkØ_li°_t
 *
	tt›ics
);

63 
⁄_t›ic_li°_ˇŒback
 
ˇŒback
;

64 *
c⁄ãxt
;

65 } 
	tkØ_t›ic_li°íî_t
;

68 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/platform/ext_sha.h

22 #i‚de‡
EXT_SHA_H_


23 
	#EXT_SHA_H_


	)

25 
	~"kØ_îr‹.h
"

27 #ifde‡
__˝lu•lus


33 
	#SHA_1_DIGEST_LENGTH
 20

	)

34 
	tkØ_dige°
[
SHA_1_DIGEST_LENGTH
];

35 * 
	tkØ_dige°_p
;

46 
kØ_îr‹_t
 
ext_ˇlcuœã_sha_hash
(c⁄° *
d©a
, 
size_t
 
d©a_size
, 
kØ_dige°
 
dige°
);

56 
kØ_îr‹_t
 
ext_c›y_sha_hash
(
kØ_dige°_p
 
d°
, c⁄° kØ_dige°_∞
§c
);

58 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/platform/ext_status.h

22 #i‚de‡
EXT_STATUS_H_


23 
	#EXT_STATUS_H_


	)

25 #ifde‡
__˝lu•lus


42 
ext_°©us_ªad
(**
buf„r
, 
size_t
 *
buf„r_size
, 
boﬁ
 *
√eds_dóŒoˇti⁄
);

52 
ext_°©us_°‹e
(c⁄° *
buf„r
, 
size_t
 
buf„r_size
);

57 
ext_°©us_dñëe
();

59 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/platform/ext_system_logger.h

17 #i‚de‡
EXT_SYSTEM_LOGGER_H_


18 
	#EXT_SYSTEM_LOGGER_H_


	)

20 
	~"kØ_îr‹.h
"

21 
	~<∂©f‹m/time.h
>

23 #ifde‡
__˝lu•lus


35 
ext_wrôe_log
(
FILE
 * 
sök
, c⁄° * 
buf„r
, 
size_t
 
mesßge_size
);

43 
kØ_time_t
 
ext_gë_sy°ime
();

59 
ext_f‹m©_•rötf
(* 
buf„r
, 
size_t
 
buf„r_size
, c⁄° * 
f‹m©
, c⁄° * 
log_Àvñ_«me
, c⁄° * 
åunˇãd_«me
, 
löío
, 
kØ_îr‹_t
 
îr‹_code
);

69 
ext_¢pötf
(* 
buf„r
, 
size_t
 
buf„r_size
, c⁄° * 
f‹m©
, ...);

79 
ext_loggî_•rötf
(* 
buf„r
, 
size_t
 
buf„r_size
, c⁄° * 
f‹m©
, 
va_li°
 
¨gs
);

81 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/platform/ext_tcp_utils.h

25 #i‚de‡
EXT_TCP_UTILS_H_


26 
	#EXT_TCP_UTILS_H_


	)

28 
	~<∂©f‹m/sock.h
>

29 
	~"kØ_îr‹.h
"

31 #ifde‡
__˝lu•lus


35 
	#KAA_TCP_SOCKET_NOT_SET
 -1

	)

39 
RET_STATE_VALUE_ERROR
 = 0,

40 
RET_STATE_BUFFER_NOT_ENOUGH
,

41 
RET_STATE_VALUE_READY
,

42 
RET_STATE_VALUE_IN_PROGRESS


43 } 
	text_t˝_utûs_fun˘i⁄_ªtu∫_°©e_t
;

47 
KAA_TCP_SOCK_ERROR
 = 0,

48 
KAA_TCP_SOCK_CONNECTING
,

49 
KAA_TCP_SOCK_CONNECTED


50 } 
	text_t˝_sockë_°©e_t
;

54 
KAA_TCP_SOCK_IO_OK
 = 0,

55 
KAA_TCP_SOCK_IO_EOF
,

56 
KAA_TCP_SOCK_IO_ERROR


57 } 
	text_t˝_sockë_io_îr‹s_t
;

69 
kØ_îr‹_t
 (*
	t⁄_dns_ªsﬁve_com∂ëe_‚
)(*
	tc⁄ãxt


70 , c⁄° 
	tkØ_sockaddr_t
 *
	taddr


71 , 
	tkØ_sockÀn_t
 
	taddr_size
);

83 
kØ_îr‹_t
 (*
	t⁄_dns_ªsﬁve_Áûed_‚
)(*
	tc⁄ãxt
);

92 *
c⁄ãxt
;

93 
⁄_dns_ªsﬁve_com∂ëe_‚
 
⁄_ho°_ªsﬁved
;

94 
⁄_dns_ªsﬁve_Áûed_‚
 
⁄_ªsﬁve_Áûed
;

95 } 
	tkØ_dns_ªsﬁve_li°íî_t
;

104 *
ho°«me
;

105 
size_t
 
ho°«me_Àngth
;

106 
uöt16_t
 
p‹t
;

107 } 
	tkØ_dns_ªsﬁve_öfo_t
;

130 
ext_t˝_utûs_fun˘i⁄_ªtu∫_°©e_t
 
ext_t˝_utûs_gëaddrbyho°
(
kØ_dns_ªsﬁve_li°íî_t
 *
ªsﬁve_li°íî


131 , c⁄° 
kØ_dns_ªsﬁve_öfo_t
 *
ªsﬁve_¥›s


132 , 
kØ_sockaddr_t
 *
ªsu…


133 , 
kØ_sockÀn_t
 *
ªsu…_size
);

144 
kØ_îr‹_t
 
ext_t˝_utûs_£t_sockaddr_p‹t
(
kØ_sockaddr_t
 *
addr
, 
uöt16_t
 
p‹t
);

157 
kØ_îr‹_t
 
ext_t˝_utûs_›í_t˝_sockë
(
kØ_fd_t
 *
fd


158 , c⁄° 
kØ_sockaddr_t
 *
de°ö©i⁄


159 , 
kØ_sockÀn_t
 
de°ö©i⁄_size
);

174 
ext_t˝_sockë_°©e_t
 
ext_t˝_utûs_t˝_sockë_check
(
kØ_fd_t
 
fd


175 , c⁄° 
kØ_sockaddr_t
 *
de°ö©i⁄


176 , 
kØ_sockÀn_t
 
de°ö©i⁄_size
);

191 
ext_t˝_sockë_io_îr‹s_t
 
ext_t˝_utûs_t˝_sockë_wrôe
(
kØ_fd_t
 
fd


192 , c⁄° *
buf„r


193 , 
size_t
 
buf„r_size


194 , 
size_t
 *
byãs_wrôãn
);

210 
ext_t˝_sockë_io_îr‹s_t
 
ext_t˝_utûs_t˝_sockë_ªad
(
kØ_fd_t
 
fd


211 , *
buf„r


212 , 
size_t
 
buf„r_size


213 , 
size_t
 *
byãs_ªad
);

223 
kØ_îr‹_t
 
ext_t˝_utûs_t˝_sockë_˛o£
(
kØ_fd_t
 
fd
);

225 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/platform/ext_transport_channel.h

17 #i‚de‡
EXT_TRANSPORT_CHANNEL_H_


18 
	#EXT_TRANSPORT_CHANNEL_H_


	)

20 
	~"kØ_comm⁄.h
"

21 
	~"kØ_∂©f‹m_¥Ÿocﬁ.h
"

23 #ifde‡
__˝lu•lus


34 
kØ_c⁄ãxt_t
 *
kØ_c⁄ãxt
;

35 } 
	tkØ_å™•‹t_c⁄ãxt_t
;

47 
kØ_îr‹_t
 (*
	tkØ_öô_ch™√l_‚
)(*
	tch™√l_c⁄ãxt


48 , 
	tkØ_å™•‹t_c⁄ãxt_t
 *
	tå™•‹t_c⁄ãxt
);

63 
kØ_îr‹_t
 (*
	tkØ_£t_ac˚ss_poöt_‚
)(*
	tch™√l_c⁄ãxt


64 , 
	tkØ_ac˚ss_poöt_t
 *
	tac˚ss_poöt
);

77 
kØ_îr‹_t
 (*
	tkØ_gë_¥Ÿocﬁ_id_‚
)(*
	tc⁄ãxt


78 , 
	tkØ_å™•‹t_¥Ÿocﬁ_id_t
 *
	t¥Ÿocﬁ_öfo
);

92 
kØ_îr‹_t
 (*
	tkØ_gë_suµ‹ãd_£rvi˚s_‚
)(*
	tc⁄ãxt
,

93 c⁄° 
	tkØ_exãnsi⁄_id
 **
	tsuµ‹ãd_£rvi˚s
,

94 
	tsize_t
 *
	t£rvi˚_cou¡
);

108 
kØ_îr‹_t
 (*
	tkØ_sync_h™dÀr_‚
)(*
	tc⁄ãxt


109 , c⁄° 
	tkØ_exãnsi⁄_id
 
	t£rvi˚s
[]

110 , 
	tsize_t
 
	t£rvi˚_cou¡
);

121 
kØ_îr‹_t
 (*
	tkØ_t˝_ch™√l_de°roy_‚
)(*
	tc⁄ãxt
);

131 *
c⁄ãxt
;

132 
kØ_t˝_ch™√l_de°roy_‚
 
de°roy
;

133 
kØ_sync_h™dÀr_‚
 
sync_h™dÀr
;

134 
kØ_öô_ch™√l_‚
 
öô
;

135 
kØ_£t_ac˚ss_poöt_‚
 
£t_ac˚ss_poöt
;

136 
kØ_gë_¥Ÿocﬁ_id_‚
 
gë_¥Ÿocﬁ_id
;

137 
kØ_gë_suµ‹ãd_£rvi˚s_‚
 
gë_suµ‹ãd_£rvi˚s
;

138 } 
	tkØ_å™•‹t_ch™√l_öãrÁ˚_t
;

142 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/platform/ext_user_callback.h

23 #i‚de‡
EXT_USER_CALLBACK_H_


24 
	#EXT_USER_CALLBACK_H_


	)

26 
	~"kØ_comm⁄.h
"

28 #ifde‡
__˝lu•lus


35 
NO_VERIFIER_CONFIGURED
 = 0,

36 
TOKEN_INVALID
 = 1,

37 
TOKEN_EXPIRED
 = 2,

38 
INTERNAL_ERROR
 = 3,

39 
CONNECTION_ERROR
 = 4,

40 
REMOTE_ERROR
 = 5,

41 
OTHER
 = 6

42 } 
	tu£r_vîifõr_îr‹_code_t
;

55 
kØ_îr‹_t
 (*
	t⁄_©èched_‚
)(*
	tc⁄ãxt
, c⁄° *
	tu£r_exã∫Æ_id
, c⁄° *
	tídpoöt_ac˚ss_tokí
);

66 
kØ_îr‹_t
 (*
	t⁄_dëached_‚
)(*
	tc⁄ãxt
, c⁄° *
	tídpoöt_ac˚ss_tokí
);

77 
kØ_îr‹_t
 (*
	t⁄_©èch_suc˚ss_‚
)(*
	tc⁄ãxt
);

88 
kØ_îr‹_t
 (*
	t⁄_©èch_Áûed_‚
)(*
	tc⁄ãxt
, 
	tu£r_vîifõr_îr‹_code_t
 
	tîr‹_code
, c⁄° *
	tªas⁄
);

96 *
c⁄ãxt
;

97 
⁄_©èched_‚
 
⁄_©èched
;

98 
⁄_dëached_‚
 
⁄_dëached
;

99 
⁄_©èch_suc˚ss_‚
 
⁄_©èch_suc˚ss
;

100 
⁄_©èch_Áûed_‚
 
⁄_©èch_Áûed
;

101 } 
	tkØ_©èchmít_°©us_li°íîs_t
;

112 
kØ_îr‹_t
 (*
	t⁄_ídpoöt_©èched_‚
)(*
	tc⁄ãxt
, c⁄° 
	tkØ_ídpoöt_id_p
 
	tídpoöt_key_hash
);

122 
kØ_îr‹_t
 (*
	t⁄_ídpoöt_dëached_‚
)(*
	tc⁄ãxt
);

132 
kØ_îr‹_t
 (*
	t⁄_ídpoöt_Áûed_‚
)(*
	tc⁄ãxt
);

139 *
c⁄ãxt
;

140 
⁄_ídpoöt_©èched_‚
 
⁄_©èched
;

141 
⁄_ídpoöt_dëached_‚
 
⁄_dëached
;

142 
⁄_ídpoöt_Áûed_‚
 
⁄_©èch_Áûed
;

143 
⁄_ídpoöt_Áûed_‚
 
⁄_dëach_Áûed
;

144 } 
	tkØ_ídpoöt_°©us_li°íî_t
;

147 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/platform/kaa_client.h

26 #i‚de‡
KAA_PLATFORM_KAA_CLIENT_H_


27 
	#KAA_PLATFORM_KAA_CLIENT_H_


	)

29 #ifde‡
__˝lu•lus


33 
	~<∂©f‹m/time.h
>

35 
	~"kØ_c⁄ãxt.h
"

36 
	~<∂©f‹m/kØ_˛õ¡_¥›îtõs.h
>

38 
kØ_˛õ¡_t
;

39 
kØ_˛õ¡_t
 
	tkØ_˛õ¡_t
;

41 (*
exã∫Æ_¥o˚ss_‚
)(*
	tc⁄ãxt
);

53 
kØ_îr‹_t
 
kØ_˛õ¡_¸óã
(
kØ_˛õ¡_t
 **
kØ_˛õ¡
, 
kØ_˛õ¡_¥›s_t
 *
¥›s
);

64 
kØ_˛õ¡_de°roy
(
kØ_˛õ¡_t
 *
kØ_˛õ¡
);

78 
kØ_îr‹_t
 
kØ_˛õ¡_°¨t
(
kØ_˛õ¡_t
 *
kØ_˛õ¡


79 , 
exã∫Æ_¥o˚ss_‚
 
exã∫Æ_¥o˚ss


80 , *
exã∫Æ_¥o˚ss_c⁄ãxt


81 , 
kØ_time_t
 
max_dñay
);

92 
kØ_îr‹_t
 
kØ_˛õ¡_°›
(
kØ_˛õ¡_t
 *
kØ_˛õ¡
);

101 
kØ_c⁄ãxt_t
* 
kØ_˛õ¡_gë_c⁄ãxt
(
kØ_˛õ¡_t
 *
kØ_˛õ¡
);

103 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/platform/kaa_client_properties.h

24 #i‚de‡
POSIX_KAA_CLIENT_PROPERIES_H_


25 
	#POSIX_KAA_CLIENT_PROPERIES_H_


	)

28 
	mmax_upd©e_time
;

29 } 
	tkØ_˛õ¡_¥›s_t
;

	@/var/www/html/debian/gateway/kaa/src/kaa/platform/kaa_failover_strategy.h

17 #i‚de‡
POSIX_KAA_STRATEGY_H_


18 
	#POSIX_KAA_STRATEGY_H_


	)

20 
	~"∂©f‹m/ext_kØ_Áûovî_°øãgy.h
"

30 
kØ_îr‹_t
 
kØ_Áûovî_°øãgy_£t
(
kØ_Áûovî_°øãgy_t
 *
°øãgy
,

31 
kØ_Áûovî_decisi⁄_t
 *
decisi⁄
);

	@/var/www/html/debian/gateway/kaa/src/kaa/utilities/kaa_aes_rsa.c

17 
	~"kØ_´s_rß.h
"

19 
	$öô_´s_key
(*
key
, 
size_t
 
byãs
)

21 
mbedés_˘r_drbg_c⁄ãxt
 
˘r_drbg
;

22 
mbedés_íå›y_c⁄ãxt
 
íå›y
;

24 c⁄° 
uöt8_t
 
≥rs
[] = "aes_generate_key";

25 
ªt
;

27 
	`mbedés_íå›y_öô
(&
íå›y
);

28 
	`mbedés_˘r_drbg_öô
(&
˘r_drbg
);

30 i‡((
ªt
 = 
	`mbedés_˘r_drbg_£ed
(&
˘r_drbg
, 
mbedés_íå›y_func
, &
íå›y
,

31 
≥rs
, (pers) - 1)) == 0) {

32 
ªt
 = 
	`mbedés_˘r_drbg_øndom
(&
˘r_drbg
, 
key
, 
byãs
);

35 
	`mbedés_˘r_drbg_‰ì
(&
˘r_drbg
);

36 
	`mbedés_íå›y_‰ì
(&
íå›y
);

38  
ªt
;

39 
	}
}

41 
kØ_îr‹_t
 
	$´s_í¸y±_de¸y±
(
mode
, c⁄° 
uöt8_t
 *
öput
, 
size_t
 
öput_size
,

42 
uöt8_t
 *
ouçut
, c⁄° uöt8_à*
key
)

44 i‡((
öput_size
 % 16Ë!0 || 
öput
 =
NULL
 || input_size == 0) {

45  
KAA_ERR_BADPARAM
;

48 
öput_size
 >
KAA_SESSION_KEY_LENGTH
) {

50 i‡(
	`´s_í¸y±_de¸y±_block
(
mode
, 
öput
, 
ouçut
, 
key
)) {

51  
KAA_ERR_BADPARAM
;

54 
öput_size
 -
KAA_SESSION_KEY_LENGTH
;

56 
öput
 +
KAA_SESSION_KEY_LENGTH
;

57 
ouçut
 +
KAA_SESSION_KEY_LENGTH
;

60  
KAA_ERR_NONE
;

62 
	}
}

64 
kØ_îr‹_t
 
	$´s_í¸y±_de¸y±_block
(
mode
, c⁄° 
uöt8_t
 *
öput
,

65 
uöt8_t
 *
ouçut
, c⁄° uöt8_à*
key
)

67 i‡(
öput
 =
NULL
) {

68  
KAA_ERR_BADPARAM
;

71 i‡(
mode
 !
MBEDTLS_AES_ENCRYPT
 && modê!
MBEDTLS_AES_DECRYPT
) {

72  
KAA_ERR_BADPARAM
;

75 
boﬁ
 
öôülized
 = 
Ál£
;

76 
mbedés_´s_c⁄ãxt
 
´s_˘x
;

78 i‡(!
öôülized
) {

79 
	`mbedés_´s_öô
(&
´s_˘x
);

80 
öôülized
 = 
åue
;

84 i‡(
mode
 =
MBEDTLS_AES_ENCRYPT
) {

85 
	`mbedés_´s_£tkey_íc
(&
´s_˘x
, 
key
, 
KAA_SESSION_KEY_LENGTH
 * 8);

87 
	`mbedés_´s_£tkey_dec
(&
´s_˘x
, 
key
, 
KAA_SESSION_KEY_LENGTH
 * 8);

89 
	`mbedés_´s_¸y±_ecb
(&
´s_˘x
, 
mode
, 
öput
, 
ouçut
);

91  
KAA_ERR_NONE
;

92 
	}
}

94 
	$rß_sign
(
mbedés_pk_c⁄ãxt
 *
pk
, c⁄° 
uöt8_t
 *
öput
,

95 
size_t
 
öput_size
, 
uöt8_t
 *
ouçut
, size_à*
ouçut_size
)

98 i‡(!
öput
 || !
öput_size
 || !
ouçut
 || !
ouçut_size
) {

99  
KAA_ERR_BADPARAM
;

101 
ªt
 = 0;

102 
uöt8_t
 
hash
[32];

103 
mbedés_íå›y_c⁄ãxt
 
íå›y
;

104 
mbedés_˘r_drbg_c⁄ãxt
 
˘r_drbg
;

105 c⁄° 
uöt8_t
 
≥rs
[] = "mbedtls_pk_sign";

107 
	`mbedés_íå›y_öô
(&
íå›y
);

108 
	`mbedés_˘r_drbg_öô
(&
˘r_drbg
);

110 i‡((
ªt
 = 
	`mbedés_˘r_drbg_£ed
(&
˘r_drbg
, 
mbedés_íå›y_func
, &
íå›y
,

111 
≥rs
,(pers) - 1)) != 0) {

112 
exô
;

115 c⁄° 
mbedés_md_öfo_t
 *
öfo
 = 
	`mbedés_md_öfo_‰om_ty≥
(
MBEDTLS_MD_SHA1
);

117 i‡((
ªt
 = 
	`mbedés_md
(
öfo
, 
öput
, 
öput_size
, 
hash
)) != 0) {

118 
exô
;

121 
ªt
 = 
	`mbedés_pk_sign
(
pk
, 
MBEDTLS_MD_SHA1
, 
hash
, 0, 
ouçut
, 
ouçut_size
,

122 
mbedés_˘r_drbg_øndom
, &
˘r_drbg
);

124 
exô
:

125 
	`mbedés_˘r_drbg_‰ì
(&
˘r_drbg
);

126 
	`mbedés_íå›y_‰ì
(&
íå›y
);

128  
ªt
 ? 
KAA_ERR_BADDATA
 : 
KAA_ERR_NONE
;

129 
	}
}

131 
kØ_îr‹_t
 
	$rß_í¸y±
(c⁄° 
uöt8_t
 *
key
, 
size_t
 
key_size
, c⁄° uöt8_à*
öput
,

132 
size_t
 
öput_Àn
, 
uöt8_t
 *
ouçut
)

134 i‡(
key
 =
NULL
 || 
key_size
 == 0) {

135  
KAA_ERR_BADPARAM
;

138 
mbedés_pk_c⁄ãxt
 
pk
;

139 
mbedés_íå›y_c⁄ãxt
 
íå›y
;

140 
mbedés_˘r_drbg_c⁄ãxt
 
˘r_drbg
;

141 c⁄° 
uöt8_t
 
≥rs
[] = "key_gen";

143 
	`mbedés_pk_öô
(&
pk
);

145 i‡(
	`mbedés_pk_∑r£_public_key
(&
pk
, 
key
, 
key_size
) != 0) {

146  
KAA_ERR_INVALID_PUB_KEY
;

149 
	`mbedés_˘r_drbg_öô
(&
˘r_drbg
);

150 
	`mbedés_íå›y_öô
(&
íå›y
);

152 
ªt
 = 
	`mbedés_˘r_drbg_£ed
(&
˘r_drbg
, 
mbedés_íå›y_func
, &
íå›y
,

153 
≥rs
, (pers) - 1);

155 i‡(!
ªt
) {

156 
ªt
 = 
	`mbedés_rß_rßes_pkcs1_v15_í¸y±
(
	`mbedés_pk_rß
(
pk
), 
mbedés_˘r_drbg_øndom
, &
˘r_drbg
,

157 
MBEDTLS_RSA_PUBLIC
, 
öput_Àn
, 
öput
, 
ouçut
);

160 
	`mbedés_˘r_drbg_‰ì
(&
˘r_drbg
);

161 
	`mbedés_íå›y_‰ì
(&
íå›y
);

162 
	`mbedés_pk_‰ì
(&
pk
);

164 i‡(
ªt
) {

165  
KAA_ERR_GENERIC
;

168  
KAA_ERR_NONE
;

169 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/utilities/kaa_aes_rsa.h

17 #i‚de‡
KAA_AES_RSA_H_


18 
	#KAA_AES_RSA_H_


	)

20 
	~<kØ_îr‹.h
>

22 
	~<mbedés/pk.h
>

23 
	~<mbedés/íå›y.h
>

24 
	~<mbedés/˘r_drbg.h
>

25 
	~<mbedés/md.h
>

26 
	~<kØ_îr‹.h
>

27 
	~<°dboﬁ.h
>

28 
	~<°ddef.h
>

29 
	~<°döt.h
>

31 
	#KAA_SESSION_KEY_LENGTH
 16

	)

42 
öô_´s_key
(*
key
, 
size_t
 
byãs
);

53 
kØ_îr‹_t
 
´s_í¸y±_de¸y±
(
mode
, c⁄° 
uöt8_t
 *
öput
, 
size_t
 
öput_size
,

54 
uöt8_t
 *
ouçut
, c⁄° uöt8_à*
key
);

65 
kØ_îr‹_t
 
´s_í¸y±_de¸y±_block
(
mode
, c⁄° 
uöt8_t
 *
öput
, uöt8_à*
ouçut
,

66 c⁄° 
uöt8_t
 *
key
);

77 
rß_sign
(
mbedés_pk_c⁄ãxt
 *
pk
, c⁄° 
uöt8_t
 *
öput
, 
size_t
 
öput_size
,

78 
uöt8_t
 *
ouçut
, 
size_t
 *
ouçut_size
);

94 
kØ_îr‹_t
 
rß_í¸y±
(c⁄° 
uöt8_t
 *
key
, 
size_t
 
key_size
, c⁄° uöt8_à*
öput
,

95 
size_t
 
öput_Àn
, 
uöt8_t
 *
ouçut
);

	@/var/www/html/debian/gateway/kaa/src/kaa/utilities/kaa_base64.c

23 
	~<°ddef.h
>

24 
	~<°döt.h
>

25 
	~"kØ_mem.h
"

26 
	~"kØ_comm⁄.h
"

27 
	~"kØ_ba£64.h
"

30 
	gdecodög_èbÀ
[] = {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

64 
kØ_îr‹_t
 
	$kØ_ba£64_decode
(c⁄° *
ícoded_d©a
, 
size_t
 
ícoded_d©a_Àngth
, *
decoded_d©a
, size_à*
decoded_d©a_Àngth
)

66 
	`KAA_RETURN_IF_NIL3
(
ícoded_d©a
,
decoded_d©a
,
decoded_d©a_Àngth
,
KAA_ERR_BADPARAM
);

68 i‡(
ícoded_d©a_Àngth
 % 4 !0Ë 
KAA_ERR_BADPARAM
;

70 
size_t
 
ªmaöig_decoded_Àngth
 = 
ícoded_d©a_Àngth
 / 4 * 3;

71 i‡(
ªmaöig_decoded_Àngth
 > *
decoded_d©a_Àngth
Ë 
KAA_ERR_BUFFER_IS_NOT_ENOUGH
;

73 *
decoded_d©a_Àngth
 = 
ªmaöig_decoded_Àngth
;

75 i‡(
ícoded_d©a
[
ícoded_d©a_Àngth
 - 1] ='='Ë(*
decoded_d©a_Àngth
)--;

76 i‡(
ícoded_d©a
[
ícoded_d©a_Àngth
 - 2] ='='Ë(*
decoded_d©a_Àngth
)--;

78 
i
 = 0, 
j
 = 0;

79 
i
 < 
ícoded_d©a_Àngth
) {

80 
uöt32_t
 
£xãt_a
 = 
ícoded_d©a
[
i
] ='=' ? 0 & i++ : 
decodög_èbÀ
[()encoded_data[i++]];

81 
uöt32_t
 
£xãt_b
 = 
ícoded_d©a
[
i
] ='=' ? 0 & i++ : 
decodög_èbÀ
[()encoded_data[i++]];

82 
uöt32_t
 
£xãt_c
 = 
ícoded_d©a
[
i
] ='=' ? 0 & i++ : 
decodög_èbÀ
[()encoded_data[i++]];

83 
uöt32_t
 
£xãt_d
 = 
ícoded_d©a
[
i
] ='=' ? 0 & i++ : 
decodög_èbÀ
[()encoded_data[i++]];

85 
uöt32_t
 
åùÀ
 = (
£xãt_a
 << 3 * 6)

86 + (
£xãt_b
 << 2 * 6)

87 + (
£xãt_c
 << 1 * 6)

88 + (
£xãt_d
 << 0 * 6);

90 i‡(
j
 < *
decoded_d©a_Àngth
Ë
decoded_d©a
[j++] = (
åùÀ
 >> 2 * 8) & 0xFF;

91 i‡(
j
 < *
decoded_d©a_Àngth
Ë
decoded_d©a
[j++] = (
åùÀ
 >> 1 * 8) & 0xFF;

92 i‡(
j
 < *
decoded_d©a_Àngth
Ë
decoded_d©a
[j++] = (
åùÀ
 >> 0 * 8) & 0xFF;

95  
KAA_ERR_NONE
;

96 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/utilities/kaa_base64.h

24 #i‚de‡
KAA_BASE64_H_


25 
	#KAA_BASE64_H_


	)

27 
	~"kØ_îr‹.h
"

29 #ifde‡
__˝lu•lus


45 
kØ_îr‹_t
 
kØ_ba£64_decode
(c⁄° *
ícoded_d©a
, 
size_t
 
ícoded_d©a_Àngth
, *
decoded_d©a
, size_à*
decoded_d©a_Àngth
);

47 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/utilities/kaa_buffer.c

17 
	~<°döt.h
>

18 
	~<°ddef.h
>

19 
	~"kØ_buf„r.h
"

20 
	~"kØ_mem.h
"

21 
	~"kØ_comm⁄.h
"

24 
	skØ_buf„r_t
 {

25 *
	mbegö
;

26 *
	míd
;

27 *
	mcuºít
;

31 
kØ_îr‹_t
 
	$kØ_buf„r_¸óã_buf„r
(
kØ_buf„r_t
 **
buf„r_p
, 
size_t
 
buf„r_size
)

33 
	`KAA_RETURN_IF_NIL2
(
buf„r_p
, 
buf„r_size
, 
KAA_ERR_BADPARAM
);

35 
kØ_buf„r_t
 *
buf„r
 = (kØ_buf„r_à*Ë
	`KAA_MALLOC
((kaa_buffer_t));

36 
	`KAA_RETURN_IF_NIL
(
buf„r
, 
KAA_ERR_NOMEM
);

38 
buf„r
->
begö
 = (*Ë
	`KAA_CALLOC
(
buf„r_size
 , ());

39 i‡(!
buf„r
->
begö
) {

40 
	`KAA_FREE
(
buf„r
);

41  
KAA_ERR_NOMEM
;

44 
buf„r
->
íd
 = buf„r->
begö
 + 
buf„r_size
;

45 
buf„r
->
cuºít
 = buf„r->
begö
;

46 *
buf„r_p
 = 
buf„r
;

47  
KAA_ERR_NONE
;

48 
	}
}

51 
kØ_îr‹_t
 
	$kØ_buf„r_de°roy
(
kØ_buf„r_t
 *
buf„r_p
)

53 
	`KAA_RETURN_IF_NIL
(
buf„r_p
, 
KAA_ERR_BADPARAM
);

55 i‡(
buf„r_p
->
begö
)

56 
	`KAA_FREE
(
buf„r_p
->
begö
);

58 
	`KAA_FREE
(
buf„r_p
);

60  
KAA_ERR_NONE
;

61 
	}
}

64 
kØ_îr‹_t
 
	$kØ_buf„r_Æloˇã_•a˚
(
kØ_buf„r_t
 *
buf„r_p
, **
buf„r
, 
size_t
 *
‰ì_size
)

66 
	`KAA_RETURN_IF_NIL3
(
buf„r_p
, 
buf„r
, 
‰ì_size
, 
KAA_ERR_BADPARAM
);

68 *
buf„r
 = 
buf„r_p
->
cuºít
;

69 *
‰ì_size
 = 
buf„r_p
->
íd
 - buf„r_p->
cuºít
;

71  
KAA_ERR_NONE
;

72 
	}
}

74 
kØ_îr‹_t
 
	$kØ_buf„r_ªÆloˇã_•a˚
(
kØ_buf„r_t
 *
buf„r_p
, 
size_t
 
size
)

76 
	`KAA_RETURN_IF_NIL
(
buf„r_p
, 
KAA_ERR_BADPARAM
);

77 
size_t
 
locked_•a˚
 = 
buf„r_p
->
cuºít
 - buf„r_p->
begö
;

78 
size_t
 
tŸÆ_•a˚
 = 
buf„r_p
->
íd
 - buf„r_p->
begö
;

79 
size_t
 
√w_buf„r_size
 = 
size
 + 
locked_•a˚
;

80 *
±r
;

82 i‡(
tŸÆ_•a˚
 >
√w_buf„r_size
)

83  
KAA_ERR_BADPARAM
;

85 
±r
 = 
	`KAA_REALLOC
(
buf„r_p
->
begö
, 
√w_buf„r_size
);

87 i‡(
±r
) {

88 
buf„r_p
->
begö
 = 
±r
;

89 
buf„r_p
->
íd
 = buf„r_p->
begö
 + 
√w_buf„r_size
;

90 
buf„r_p
->
cuºít
 = buf„r_p->
begö
 + 
locked_•a˚
;

91  
KAA_ERR_NONE
;

94  
KAA_ERR_NOMEM
;

95 
	}
}

97 
kØ_îr‹_t
 
	$kØ_buf„r_gë_locked_•a˚
(
kØ_buf„r_t
 *
buf„r_p
, 
size_t
 *
size
)

99 
	`KAA_RETURN_IF_NIL2
(
buf„r_p
, 
size
, 
KAA_ERR_BADPARAM
);

101 *
size
 = 
buf„r_p
->
cuºít
 - buf„r_p->
begö
;

103  
KAA_ERR_NONE
;

104 
	}
}

106 
kØ_îr‹_t
 
	$kØ_buf„r_gë_size
(
kØ_buf„r_t
 *
buf„r_p
, 
size_t
 *
size
)

108 
	`KAA_RETURN_IF_NIL2
(
buf„r_p
, 
size
, 
KAA_ERR_BADPARAM
);

110 *
size
 = 
buf„r_p
->
íd
 - buf„r_p->
begö
;

112  
KAA_ERR_NONE
;

113 
	}
}

115 
kØ_îr‹_t
 
	$kØ_buf„r_gë_‰ì_•a˚
(
kØ_buf„r_t
 *
buf„r_p
, 
size_t
 *
size
)

117 
	`KAA_RETURN_IF_NIL2
(
buf„r_p
, 
size
, 
KAA_ERR_BADPARAM
);

119 *
size
 = 
buf„r_p
->
íd
 - buf„r_p->
cuºít
;

121  
KAA_ERR_NONE
;

122 
	}
}

124 
kØ_îr‹_t
 
	$kØ_buf„r_lock_•a˚
(
kØ_buf„r_t
 *
buf„r_p
, 
size_t
 
lock_size
)

126 
	`KAA_RETURN_IF_NIL2
(
buf„r_p
, 
lock_size
, 
KAA_ERR_BADPARAM
);

128 i‡(
buf„r_p
->
cuºít
 + 
lock_size
 > buf„r_p->
íd
)

129  
KAA_ERR_BUFFER_IS_NOT_ENOUGH
;

131 
buf„r_p
->
cuºít
 +
lock_size
;

132  
KAA_ERR_NONE
;

133 
	}
}

136 
kØ_îr‹_t
 
	$kØ_buf„r_‰ì_Æloˇãd_•a˚
(
kØ_buf„r_t
 *
buf„r_p
, 
size_t
 
size
)

138 
	`KAA_RETURN_IF_NIL2
(
buf„r_p
, 
size
, 
KAA_ERR_BADPARAM
);

140 i‡(
buf„r_p
->
begö
 + 
size
 > buf„r_p->
cuºít
)

141  
KAA_ERR_BUFFER_INVALID_SIZE
;

143 *
byã_to_c›y
 = 
buf„r_p
->
begö
 + 
size
;

144 *
ô
 = 
buf„r_p
->
begö
;

145 ; 
byã_to_c›y
 !
buf„r_p
->
cuºít
; ++byã_to_c›y, ++
ô
)

146 *
ô
 = *
byã_to_c›y
;

148 
buf„r_p
->
cuºít
 -
size
;

150  
KAA_ERR_NONE
;

151 
	}
}

154 
kØ_îr‹_t
 
	$kØ_buf„r_gë_u≈ro˚s£d_•a˚
(
kØ_buf„r_t
 *
buf„r_p


155 , **
buf„r


156 , 
size_t
 *
avaûabÀ_size
)

158 
	`KAA_RETURN_IF_NIL3
(
buf„r_p
, 
buf„r
, 
avaûabÀ_size
, 
KAA_ERR_BADPARAM
);

160 *
buf„r
 = 
buf„r_p
->
begö
;

161 *
avaûabÀ_size
 = 
buf„r_p
->
cuºít
 - buf„r_p->
begö
;

163  
KAA_ERR_NONE
;

164 
	}
}

167 
kØ_îr‹_t
 
	$kØ_buf„r_ª£t
(
kØ_buf„r_t
 *
buf„r_p
)

169 
	`KAA_RETURN_IF_NIL
(
buf„r_p
, 
KAA_ERR_BADPARAM
);

170 
buf„r_p
->
cuºít
 = buf„r_p->
begö
;

171  
KAA_ERR_NONE
;

172 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/utilities/kaa_buffer.h

18 #i‚de‡
KAA_BUFFER_H_


19 
	#KAA_BUFFER_H_


	)

21 
	~"kØ_îr‹.h
"

23 #ifde‡
__˝lu•lus


27 
kØ_buf„r_t
 
	tkØ_buf„r_t
;

31 
kØ_îr‹_t
 
kØ_buf„r_¸óã_buf„r
(
kØ_buf„r_t
 **
buf„r_p


32 , 
size_t
 
buf„r_size
);

34 
kØ_îr‹_t
 
kØ_buf„r_de°roy
(
kØ_buf„r_t
 *
buf„r_p
);

36 
kØ_îr‹_t
 
kØ_buf„r_Æloˇã_•a˚
(
kØ_buf„r_t
 *
buf„r_p


37 , **
buf„r


38 , 
size_t
 *
‰ì_size
);

40 
kØ_îr‹_t
 
kØ_buf„r_ªÆloˇã_•a˚
(
kØ_buf„r_t
 *
buf„r_p
, 
size_t
 
size
);

42 
kØ_îr‹_t
 
kØ_buf„r_gë_locked_•a˚
(
kØ_buf„r_t
 *
buf„r_p
, 
size_t
 *
size
);

44 
kØ_îr‹_t
 
kØ_buf„r_gë_size
(
kØ_buf„r_t
 *
buf„r_p
, 
size_t
 *
size
);

46 
kØ_îr‹_t
 
kØ_buf„r_gë_‰ì_•a˚
(
kØ_buf„r_t
 *
buf„r_p
, 
size_t
 *
size
);

48 
kØ_îr‹_t
 
kØ_buf„r_lock_•a˚
(
kØ_buf„r_t
 *
buf„r_p


49 , 
size_t
 
lock_size
);

51 
kØ_îr‹_t
 
kØ_buf„r_‰ì_Æloˇãd_•a˚
(
kØ_buf„r_t
 *
buf„r_p


52 , 
size_t
 
size
);

54 
kØ_îr‹_t
 
kØ_buf„r_gë_u≈ro˚s£d_•a˚
(
kØ_buf„r_t
 *
buf„r_p


55 , **
buf„r


56 , 
size_t
 *
avaûabÀ_size
);

58 
kØ_îr‹_t
 
kØ_buf„r_ª£t
(
kØ_buf„r_t
 *
buf„r_p
);

60 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/utilities/kaa_log.c

17 
	~<°ddef.h
>

18 
	~<°d¨g.h
>

19 
	~<°rög.h
>

20 
	~"kØ_log.h
"

21 
	~"kØ_comm⁄.h
"

22 
	~"∂©f‹m/ext_sy°em_loggî.h
"

23 
	~"kØ_mem.h
"

25 
	~<∂©f‹m/°dio.h
>

27 
	#KAA_LOG_PREFIX_FORMAT
 "%04d/%02d/%02d %d:%02d:%02d [%s] [%s:%d] (%dË- "

	)

30 
	#KAA_MINIMAL_BUFFER_SIZE
 2

	)

36 c⁄° * 
	gkØ_log_Àvñ_«me
[] =

47 
	skØ_loggî_t
 {

48 
FILE
 *
	msök
;

49 
kØ_log_Àvñ_t
 
	mmax_log_Àvñ
;

50 *
	mlog_buf„r
;

51 
size_t
 
	mbuf„r_size
;

54 
kØ_îr‹_t
 
	$kØ_log_¸óã
(
kØ_loggî_t
 **
loggî_p
, 
size_t
 
buf„r_size
, 
kØ_log_Àvñ_t
 
max_log_Àvñ
, 
FILE
* 
sök
)

56 i‡(!
loggî_p
 || (
buf„r_size
 < 
KAA_MINIMAL_BUFFER_SIZE
Ë|| (
max_log_Àvñ
 > 
KAA_MAX_LOG_LEVEL
))

57  
KAA_ERR_BADPARAM
;

59 *
loggî_p
 = (
kØ_loggî_t
 *Ë
	`KAA_MALLOC
((kaa_logger_t));

60 i‡(!*
loggî_p
)

61  
KAA_ERR_NOMEM
;

63 (*
loggî_p
)->
log_buf„r
 = (*Ë
	`KAA_MALLOC
(
buf„r_size
 * ());

64 i‡(!(*
loggî_p
)->
log_buf„r
) {

65 
	`KAA_FREE
(*
loggî_p
);

66 *
loggî_p
 = 
NULL
;

67  
KAA_ERR_NOMEM
;

70 (*
loggî_p
)->
buf„r_size
 = buffer_size;

72 (*
loggî_p
)->
sök
 = sök ? sök : 
°dout
;

73 (*
loggî_p
)->
max_log_Àvñ
 = max_log_level;

74 #ifde‡
KAA_TRACE_MEMORY_ALLOCATIONS


75 
	`kØ_åa˚_mem‹y_Ælocs_£t_loggî
(*
loggî_p
);

77  
KAA_ERR_NONE
;

78 
	}
}

80 
kØ_îr‹_t
 
	$kØ_log_de°roy
(
kØ_loggî_t
 *
loggî
)

82 
	`KAA_RETURN_IF_NIL
(
loggî
, 
KAA_ERR_BADPARAM
);

83 #ifde‡
KAA_TRACE_MEMORY_ALLOCATIONS


84 
	`kØ_åa˚_mem‹y_Ælocs_£t_loggî
(
NULL
);

86 
	`KAA_FREE
(
loggî
->
log_buf„r
);

87 
	`KAA_FREE
(
loggî
);

88  
KAA_ERR_NONE
;

89 
	}
}

91 
kØ_log_Àvñ_t
 
	$kØ_gë_max_log_Àvñ
(c⁄° 
kØ_loggî_t
 *
£lf
)

93  
£lf
 ? sñf->
max_log_Àvñ
 : 
KAA_LOG_LEVEL_NONE
;

94 
	}
}

96 
kØ_îr‹_t
 
	$kØ_£t_max_log_Àvñ
(
kØ_loggî_t
 *
£lf
, 
kØ_log_Àvñ_t
 
max_log_Àvñ
)

98 
	`KAA_RETURN_IF_NIL
(
£lf
, 
KAA_ERR_BADPARAM
);

99 i‡(
max_log_Àvñ
 > 
KAA_MAX_LOG_LEVEL
) {

100  
KAA_ERR_BADPARAM
;

102 
£lf
->
max_log_Àvñ
 = max_log_level;

103  
KAA_ERR_NONE
;

104 
	}
}

106 
kØ_îr‹_t
 
	$kØ_log_£t_sök
(
kØ_loggî_t
 *
£lf
, 
FILE
 *
sök
)

108 
	`KAA_RETURN_IF_NIL2
(
£lf
, 
sök
, 
KAA_ERR_BADPARAM
);

110 
£lf
->
sök
 = sink;

112  
KAA_ERR_NONE
;

113 
	}
}

115 
	$kØ_log_wrôe
(
kØ_loggî_t
 *
£lf
, c⁄° * 
sour˚_fûe
, 
löío
, 
kØ_log_Àvñ_t
 
log_Àvñ


116 , 
kØ_îr‹_t
 
îr‹_code
, c⁄° * 
f‹m©
, ...)

118 i‡(!
£lf
 || (
log_Àvñ
 > sñf->
max_log_Àvñ
))

122 * 
∑th_£∑øt‹_pos
 = 
	`°ºchr
(
sour˚_fûe
, '/');

123 
∑th_£∑øt‹_pos
 = (∑th_£∑øt‹_po†?Ö©h_£∑øt‹_po†: 
	`°ºchr
(
sour˚_fûe
, '\\'));

124 c⁄° * 
åunˇãd_«me
 = (
∑th_£∑øt‹_pos
 ?Ö©h_£∑øt‹_po†+ 1 : 
sour˚_fûe
);

129 
size_t
 
c⁄sumed_Àn
 = 0;

132 
ªs_Àn
 = 
	`ext_f‹m©_•rötf
(
£lf
->
log_buf„r
, sñf->
buf„r_size
, 
KAA_LOG_PREFIX_FORMAT


133 , 
kØ_log_Àvñ_«me
[
log_Àvñ
], 
åunˇãd_«me
, 
löío
, 
îr‹_code
);

135 i‡(
ªs_Àn
 <= 0)

137 
c⁄sumed_Àn
 +
ªs_Àn
;

139 i‡(
c⁄sumed_Àn
 > 
£lf
->
buf„r_size
 - 2) {

141 
c⁄sumed_Àn
 = 
£lf
->
buf„r_size
 - 2;

144 
va_li°
 
¨gs
;

145 
	`va_°¨t
(
¨gs
, 
f‹m©
);

146 
ªs_Àn
 = 
	`ext_loggî_•rötf
(
£lf
->
log_buf„r
 + 
c⁄sumed_Àn


147 , 
£lf
->
buf„r_size
 - 
c⁄sumed_Àn


148 , 
f‹m©


149 , 
¨gs
);

150 
	`va_íd
(
¨gs
);

152 i‡(
ªs_Àn
 <= 0)

154 
c⁄sumed_Àn
 +
ªs_Àn
;

155 i‡(
c⁄sumed_Àn
 > 
£lf
->
buf„r_size
 - 2) {

157 
c⁄sumed_Àn
 = 
£lf
->
buf„r_size
 - 2;

162 
£lf
->
log_buf„r
[
c⁄sumed_Àn
++] = '\n';

163 
£lf
->
log_buf„r
[
c⁄sumed_Àn
++] = 0;

164 
	`ext_wrôe_log
(
£lf
->
sök
, sñf->
log_buf„r
, 
c⁄sumed_Àn
);

165 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/utilities/kaa_log.h

26 #i‚de‡
KAA_LOG_H_


27 
	#KAA_LOG_H_


	)

29 
	~"kØ_îr‹.h
"

30 
	~<∂©f‹m/deÁu…s.h
>

31 
	~<∂©f‹m/°dio.h
>

32 
	~<°döt.h
>

34 #ifde‡
__˝lu•lus


40 
	#KAA_LOG_LEVEL_NONE
 0

	)

42 
	#KAA_LOG_LEVEL_FATAL
 1

	)

44 
	#KAA_LOG_LEVEL_ERROR
 2

	)

46 
	#KAA_LOG_LEVEL_WARN
 3

	)

48 
	#KAA_LOG_LEVEL_INFO
 4

	)

50 
	#KAA_LOG_LEVEL_DEBUG
 5

	)

52 
	#KAA_LOG_LEVEL_TRACE
 6

	)

54 #i‚de‡
KAA_MAX_LOG_LEVEL


56 
	#KAA_MAX_LOG_LEVEL
 
KAA_LOG_LEVEL_TRACE


	)

59 
	#KAA_LOG_LEVEL_FATAL_ENABLED
 (
KAA_MAX_LOG_LEVEL
 >
KAA_LOG_LEVEL_FATAL
)

	)

60 
	#KAA_LOG_LEVEL_ERROR_ENABLED
 (
KAA_MAX_LOG_LEVEL
 >
KAA_LOG_LEVEL_ERROR
)

	)

61 
	#KAA_LOG_LEVEL_WARN_ENABLED
 (
KAA_MAX_LOG_LEVEL
 >
KAA_LOG_LEVEL_WARN
)

	)

62 
	#KAA_LOG_LEVEL_INFO_ENABLED
 (
KAA_MAX_LOG_LEVEL
 >
KAA_LOG_LEVEL_INFO
)

	)

63 
	#KAA_LOG_LEVEL_DEBUG_ENABLED
 (
KAA_MAX_LOG_LEVEL
 >
KAA_LOG_LEVEL_DEBUG
)

	)

64 
	#KAA_LOG_LEVEL_TRACE_ENABLED
 (
KAA_MAX_LOG_LEVEL
 >
KAA_LOG_LEVEL_TRACE
)

	)

67 
kØ_loggî_t
;

68 
kØ_loggî_t
 
	tkØ_loggî_t
;

73 
uöt8_t
 
	tkØ_log_Àvñ_t
;

84 
kØ_îr‹_t
 
kØ_log_¸óã
(
kØ_loggî_t
 **
loggî
, 
size_t
 
buf„r_size
, 
kØ_log_Àvñ_t
 
max_log_Àvñ
, 
FILE
* 
sök
);

92 
kØ_îr‹_t
 
kØ_log_de°roy
(
kØ_loggî_t
 *
loggî
);

102 
kØ_log_Àvñ_t
 
kØ_gë_max_log_Àvñ
(c⁄° 
kØ_loggî_t
 *
£lf
);

111 
kØ_îr‹_t
 
kØ_£t_max_log_Àvñ
(
kØ_loggî_t
 *
£lf
, 
kØ_log_Àvñ_t
 
max_log_Àvñ
);

120 
kØ_îr‹_t
 
kØ_log_£t_sök
(
kØ_loggî_t
 *
£lf
, 
FILE
 *
sök
);

142 
kØ_log_wrôe
(
kØ_loggî_t
 *
£lf
, c⁄° * 
sour˚_fûe
, 
löío
, 
kØ_log_Àvñ_t
 
log_Àvñ


143 , 
kØ_îr‹_t
 
îr‹_code
, c⁄° * 
f‹m©
, ...);

148 #i‡
KAA_LOG_LEVEL_FATAL_ENABLED


149 
	#KAA_LOG_FATAL
(
loggî
, 
îr
, ...Ë
	`kØ_log_wrôe
÷oggî, 
__FILE__
, 
__LINE__
, 
KAA_LOG_LEVEL_FATAL
,Éº, 
__VA_ARGS__
)

	)

151 
	#KAA_LOG_FATAL
(
loggî
, 
îr
, ...Ëdÿ{ ()÷oggî); ()”º); } 0)

	)

154 #i‡
KAA_LOG_LEVEL_ERROR_ENABLED


155 
	#KAA_LOG_ERROR
(
loggî
, 
îr
, ...Ë
	`kØ_log_wrôe
÷oggî, 
__FILE__
, 
__LINE__
, 
KAA_LOG_LEVEL_ERROR
,Éº, 
__VA_ARGS__
)

	)

157 
	#KAA_LOG_ERROR
(
loggî
, 
îr
, ...Ëdÿ{ ()÷oggî); ()”º); } 0)

	)

160 #i‡
KAA_LOG_LEVEL_WARN_ENABLED


161 
	#KAA_LOG_WARN
(
loggî
, 
îr
, ...Ë
	`kØ_log_wrôe
÷oggî, 
__FILE__
, 
__LINE__
, 
KAA_LOG_LEVEL_WARN
,Éº, 
__VA_ARGS__
)

	)

163 
	#KAA_LOG_WARN
(
loggî
, 
îr
, ...Ëdÿ{ ()÷oggî); ()”º); } 0)

	)

166 #i‡
KAA_LOG_LEVEL_INFO_ENABLED


167 
	#KAA_LOG_INFO
(
loggî
, 
îr
, ...Ë
	`kØ_log_wrôe
÷oggî, 
__FILE__
, 
__LINE__
, 
KAA_LOG_LEVEL_INFO
,Éº, 
__VA_ARGS__
)

	)

169 
	#KAA_LOG_INFO
(
loggî
, 
îr
, ...Ëdÿ{ ()÷oggî); ()”º); } 0)

	)

172 #i‡
KAA_LOG_LEVEL_DEBUG_ENABLED


173 
	#KAA_LOG_DEBUG
(
loggî
, 
îr
, ...Ë
	`kØ_log_wrôe
÷oggî, 
__FILE__
, 
__LINE__
, 
KAA_LOG_LEVEL_DEBUG
,Éº, 
__VA_ARGS__
)

	)

175 
	#KAA_LOG_DEBUG
(
loggî
, 
îr
, ...Ëdÿ{ ()÷oggî); ()”º); } 0)

	)

178 #i‡
KAA_LOG_LEVEL_TRACE_ENABLED


179 
	#KAA_LOG_TRACE
(
loggî
, 
îr
, ...Ë
	`kØ_log_wrôe
÷oggî, 
__FILE__
, 
__LINE__
, 
KAA_LOG_LEVEL_TRACE
,Éº, 
__VA_ARGS__
)

	)

181 
	#KAA_LOG_TRACE
(
loggî
, 
îr
, ...Ëdÿ{ ()÷oggî); ()”º); } 0)

	)

184 #i‡
KAA_LOCAL_DBG


185 
	#KAA_LOG_TRACE_LDB
(
loggî
, 
îr
, ...Ë
	`KAA_LOG_TRACE
÷oggî,Éº, ...)

	)

187 
	#KAA_LOG_TRACE_LDB
(
loggî
, 
îr
, ...Ëdÿ{ ()÷oggî); ()”º); } 0)

	)

190 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/src/kaa/utilities/kaa_mem.c

17 
	~<°ddef.h
>

18 
	~"utûôõs/kØ_mem.h
"

22 #ifde‡
KAA_TRACE_MEMORY_ALLOCATIONS


25 #i‡
KAA_LOG_LEVEL_TRACE_ENABLED


26 
kØ_loggî_t
 * 
	gloggî_
 = 
NULL
;

29 *
	$kØ_åa˚_mem‹y_Ælocs_mÆloc
(
size_t
 
s
, c⁄° *
fûe
, 
löe
) {

30 #i‡
KAA_LOG_LEVEL_TRACE_ENABLED


31 *
±r
 = 
	`__KAA_MALLOC
(
s
);

32 i‡(
loggî_
)

33 
	`kØ_log_wrôe
(
loggî_
, 
fûe
, 
löe
, 
KAA_LOG_LEVEL_TRACE
, 
KAA_ERR_NONE
, "AŒoˇãd (usög mÆlocË%d byã†© {%p}", 
s
, 
±r
);

34  
±r
;

36  
	`mÆloc
(
s
);

38 
	}
}

40 *
	$kØ_åa˚_mem‹y_Ælocs_ˇŒoc
(
size_t
 
n
, size_à
s
, c⁄° *
fûe
, 
löe
) {

41 #i‡
KAA_LOG_LEVEL_TRACE_ENABLED


42 *
±r
 = 
	`__KAA_CALLOC
(
n
, 
s
);

43 i‡(
loggî_
)

44 
	`kØ_log_wrôe
(
loggî_
, 
fûe
, 
löe
, 
KAA_LOG_LEVEL_TRACE
, 
KAA_ERR_NONE
, "AŒoˇãd (usög cÆlocË%u block†o‡%u byã†—ŸÆ %uË© {%p}", 
n
, 
s
,Ç*s, 
±r
);

45  
±r
;

47  
	`ˇŒoc
(
n
, 
s
);

49 
	}
}

51 
	$kØ_åa˚_mem‹y_Ælocs_‰ì
(* 
p
, c⁄° *
fûe
, 
löe
)

53 #i‡
KAA_LOG_LEVEL_TRACE_ENABLED


54 i‡(
loggî_
)

55 
	`kØ_log_wrôe
(
loggî_
, 
fûe
, 
löe
, 
KAA_LOG_LEVEL_TRACE
, 
KAA_ERR_NONE
, "GoögÅÿdóŒoˇã mem‹yáà{%p}", 
p
);

57 
	`__KAA_FREE
(
p
);

58 
	}
}

60 
	$kØ_åa˚_mem‹y_Ælocs_£t_loggî
(
kØ_loggî_t
 *
loggî
)

62 #i‡
KAA_LOG_LEVEL_TRACE_ENABLED


63 
loggî_
 = 
loggî
;

65 
	}
}

	@/var/www/html/debian/gateway/kaa/src/kaa/utilities/kaa_mem.h

17 #i‚de‡
KAA_MEM_H_


18 
	#KAA_MEM_H_


	)

20 
	~<∂©f‹m/mem.h
>

22 #ifde‡
KAA_TRACE_MEMORY_ALLOCATIONS


24 
	~"utûôõs/kØ_log.h
"

26 #ifde‡
__˝lu•lus


30 * 
kØ_åa˚_mem‹y_Ælocs_mÆloc
(
size_t
 
s
, c⁄° *
fûe
, 
löe
);

31 * 
kØ_åa˚_mem‹y_Ælocs_ˇŒoc
(
size_t
 
n
, size_à
s
, c⁄° *
fûe
, 
löe
);

32 
kØ_åa˚_mem‹y_Ælocs_‰ì
(* 
p
, c⁄° *
fûe
, 
löe
);

33 
kØ_åa˚_mem‹y_Ælocs_£t_loggî
(
kØ_loggî_t
 *
loggî
);

35 
	#KAA_MALLOC
(
S
Ë
	`kØ_åa˚_mem‹y_Ælocs_mÆloc
(S, 
__FILE__
, 
__LINE__
)

	)

36 
	#KAA_CALLOC
(
N
,
S
Ë
	`kØ_åa˚_mem‹y_Ælocs_ˇŒoc
((N), (S), 
__FILE__
, 
__LINE__
)

	)

37 
	#KAA_FREE
(
P
Ë
	`kØ_åa˚_mem‹y_Ælocs_‰ì
((P), 
__FILE__
, 
__LINE__
)

	)

39 #ifde‡
__˝lu•lus


46 
	#KAA_MALLOC
(
S
Ë
	`__KAA_MALLOC
(S)

	)

47 
	#KAA_CALLOC
(
N
,
S
Ë
	`__KAA_CALLOC
(N,S)

	)

48 
	#KAA_REALLOC
(
P
,
S
Ë
	`__KAA_REALLOC
(P,S)

	)

49 
	#KAA_FREE
(
P
Ë
	`__KAA_FREE
(P)

	)

	@/var/www/html/debian/gateway/kaa/test/collections/test_kaa_list.c

17 
	~<°dio.h
>

18 
	~<°dlib.h
>

19 
	~<°ddef.h
>

20 
	~<°döt.h
>

21 
	~<time.h
>

23 
	~"kØ_ã°.h
"

24 
	~"cﬁÀ˘i⁄s/kØ_li°.h
"

25 
	~"utûôõs/kØ_log.h
"

26 
	~"utûôõs/kØ_mem.h
"

29 
uöt64_t
 
	mid
;

30 } 
	tã°_li°_node_t
;

32 
boﬁ
 
	$ã°_kØ_li°_¥ediˇã
(*
node_1
, *
node_2
)

34 
ã°_li°_node_t
 *
wøµî_1
 = (ã°_li°_node_à*)
node_1
;

35 
ã°_li°_node_t
 *
wøµî_2
 = (ã°_li°_node_à*)
node_2
;

36  
wøµî_1
->
id
 < 
wøµî_2
->id;

37 
	}
}

39 
uöt64_t
 
	$ã°_kØ_li°_hash
(*
node
)

41 
ã°_li°_node_t
 *
wøµî
 = (ã°_li°_node_à*)
node
;

42  
wøµî
->
id
;

43 
	}
}

46 
	$ã°_li°_¸óã
()

48 
kØ_li°_t
 *
li°
 = 
	`kØ_li°_¸óã
();

49 
	`ASSERT_NOT_NULL
(
li°
);

51 
	`ASSERT_EQUAL
(
	`kØ_li°_gë_size
(
li°
), 0);

52 
	`ASSERT_NULL
(
	`kØ_li°_begö
(
li°
));

53 
	`ASSERT_NULL
(
	`kØ_li°_back
(
li°
));

55 
	`kØ_li°_de°roy
(
li°
, 
NULL
);

56 
	}
}

58 
	$ã°_li°_push_‰⁄t
()

60 
kØ_li°_t
 *
li°
 = 
	`kØ_li°_¸óã
();

61 
	`ASSERT_NOT_NULL
(
li°
);

63 
öt32_t
 *
numbî
;

64 
size_t
 
node_numbî
 = 2;

65 
size_t
 
i
 = 0; i < 
node_numbî
; ++i) {

66 
numbî
 = 
	`KAA_MALLOC
((
öt32_t
 *));

67 
	`ASSERT_NOT_NULL
(
numbî
);

68 *
numbî
 = 
	`ønd
();

69 
	`kØ_li°_push_‰⁄t
(
li°
, 
numbî
);

72 
	`ASSERT_EQUAL
(
	`kØ_li°_gë_size
(
li°
), 
node_numbî
);

74 
	`ASSERT_NOT_NULL
(
	`kØ_li°_begö
(
li°
));

75 
	`ASSERT_NULL
(
	`kØ_li°_¥ev
(
	`kØ_li°_begö
(
li°
)));

77 
	`ASSERT_EQUAL
((*(
öt32_t
 *)
	`kØ_li°_gë_d©a
(
	`kØ_li°_begö
(
li°
))), *
numbî
);

79 
	`kØ_li°_de°roy
(
li°
, 
NULL
);

80 
	}
}

82 
	$ã°_li°_push_back
()

84 
kØ_li°_t
 *
li°
 = 
	`kØ_li°_¸óã
();

85 
	`ASSERT_NOT_NULL
(
li°
);

87 
öt32_t
 *
numbî
;

88 
node_numbî
 = 2;

89 
i
 = 0; i < 
node_numbî
; ++i) {

90 
numbî
 = 
	`KAA_MALLOC
((
öt32_t
 *));

91 
	`ASSERT_NOT_NULL
(
numbî
);

92 *
numbî
 = 
	`ønd
();

93 
	`kØ_li°_push_back
(
li°
, 
numbî
);

96 
	`ASSERT_EQUAL
(
	`kØ_li°_gë_size
(
li°
), 
node_numbî
);

97 
	`ASSERT_EQUAL
((*(
öt32_t
 *)
	`kØ_li°_gë_d©a
(
	`kØ_li°_back
(
li°
))), *
numbî
);

99 
	`kØ_li°_de°roy
(
li°
, 
NULL
);

100 
	}
}

102 
	$ã°_li°_s‹t
()

104 
kØ_li°_t
 *
li°
 = 
	`kØ_li°_¸óã
();

105 
	`ASSERT_NOT_NULL
(
li°
);

107 
uöt64_t
 
node_numbî
 = 100;

108 
uöt64_t
 
i
 = 0; i < 
node_numbî
; ++i) {

109 
ã°_li°_node_t
 *
node
 = 
	`KAA_MALLOC
((test_list_node_t));

110 
	`ASSERT_NOT_NULL
(
node
);

111 
node
->
id
 = (
uöt64_t
Ë
	`ønd
();

112 
	`kØ_li°_push_back
(
li°
, 
node
);

115 
	`ASSERT_EQUAL
(
	`kØ_li°_gë_size
(
li°
), 
node_numbî
);

117 
	`kØ_li°_s‹t
(
li°
,&
ã°_kØ_li°_¥ediˇã
);

118 
kØ_li°_node_t
 *
ô
,*
√xt
;

119 
ô
 = 
	`kØ_li°_begö
(
li°
);

120 
√xt
 = 
	`kØ_li°_√xt
(
ô
);

121 
ô
 && 
√xt
) {

122 
	`ASSERT_TRUE
(((
ã°_li°_node_t
*)
	`kØ_li°_gë_d©a
(
ô
))->
id
 <=

123 ((
ã°_li°_node_t
*)
	`kØ_li°_gë_d©a
(
√xt
))->
id
);

124 
ô
 = 
√xt
;

125 
√xt
 = 
	`kØ_li°_√xt
(
ô
);

127 
	`kØ_li°_de°roy
(
li°
, 
NULL
);

128 
	}
}

130 
	$ã°_li°_em±y_s‹t
()

136 
kØ_li°_t
 *
li°
 = 
	`kØ_li°_¸óã
();

137 
	`ASSERT_NOT_NULL
(
li°
);

138 
	`kØ_li°_s‹t
(
li°
, &
ã°_kØ_li°_¥ediˇã
);

139 
	`kØ_li°_de°roy
(
li°
, 
NULL
);

140 
	}
}

143 
	$ã°_li°_hash
()

145 
kØ_li°_t
 *
li°
 = 
	`kØ_li°_¸óã
();

146 
	`ASSERT_NOT_NULL
(
li°
);

148 
uöt64_t
 
node_numbî
 = 100;

149 
uöt64_t
 
i
 = 0; i < 
node_numbî
; ++i) {

150 
ã°_li°_node_t
 *
node
 = 
	`KAA_MALLOC
((test_list_node_t));

151 
	`ASSERT_NOT_NULL
(
node
);

152 
node
->
id
 = (
uöt64_t
Ë
node_numbî
 - 
i
;

153 
	`kØ_li°_push_back
(
li°
, 
node
);

156 
	`ASSERT_EQUAL
(
	`kØ_li°_gë_size
(
li°
), 
node_numbî
);

158 
	`kØ_li°_s‹t
(
li°
,&
ã°_kØ_li°_¥ediˇã
);

160 
	`ASSERT_EQUAL
(
	`kØ_li°_hash
(
li°
,&
ã°_kØ_li°_hash
),-974344717);

162 
	`kØ_li°_de°roy
(
li°
, 
NULL
);

163 
	}
}

165 
	$ã°_¥o˚ss_d©a
(
öt32_t
 *
vÆue
, i¡32_à*
√w_vÆue
)

167 *
vÆue
 = *
√w_vÆue
;

168 
	}
}

170 
	$ã°_li°_f‹_óch
()

172 
kØ_li°_t
 *
li°
 = 
	`kØ_li°_¸óã
();

173 
	`ASSERT_NOT_NULL
(
li°
);

175 
node_numbî
 = 4;

176 
i
 = 0; i < 
node_numbî
; ++i) {

177 
öt32_t
 *
numbî1_±r
 = 
	`KAA_MALLOC
((int32_t *));

178 
	`ASSERT_NOT_NULL
(
numbî1_±r
);

179 *
numbî1_±r
 = 
	`ønd
();

180 
	`kØ_li°_push_back
(
li°
, 
numbî1_±r
);

183 
numbî2
 = 
	`ønd
();

184 
	`kØ_li°_f‹_óch
(
	`kØ_li°_begö
(
li°
), 
	`kØ_li°_back
÷i°), (
¥o˚ss_d©a
)&
ã°_¥o˚ss_d©a
, &
numbî2
);

186 
kØ_li°_node_t
 *
ô
 = 
	`kØ_li°_begö
(
li°
);

187 
ô
) {

188 
	`ASSERT_EQUAL
(*(
öt32_t
 *)
	`kØ_li°_gë_d©a
(
	`kØ_li°_begö
(
li°
)), 
numbî2
);

189 
ô
 = 
	`kØ_li°_√xt
(it);

192 
	`kØ_li°_de°roy
(
li°
, 
NULL
);

193 
	}
}

195 
	$ã°_öô
()

197 
	`§™d
(
	`time
(
NULL
));

199 
	}
}

201 
	$ã°_deöô
()

204 
	}
}

206 
KAA_SUITE_MAIN
(
Li°
, 
ã°_öô
, 
ã°_deöô
,

207 
	$KAA_TEST_CASE
(
li°_¸óã
, 
ã°_li°_¸óã
)

208 
	$KAA_TEST_CASE
(
li°_push_‰⁄t
, 
ã°_li°_push_‰⁄t
)

209 
	$KAA_TEST_CASE
(
li°_push_back
, 
ã°_li°_push_back
)

210 
	$KAA_TEST_CASE
(
li°_f‹_óch
, 
ã°_li°_f‹_óch
)

211 
	$KAA_TEST_CASE
(
li°_s‹t
, 
ã°_li°_s‹t
)

212 
	$KAA_TEST_CASE
(
li°_s‹t
, 
ã°_li°_em±y_s‹t
)

213 
	`KAA_TEST_CASE
(
li°_hash
, 
ã°_li°_hash
)

	@/var/www/html/debian/gateway/kaa/test/kaa_extension/kaa_extension_private.h

26 
	~<kØ_exãnsi⁄.h
>

28 c⁄° 
kØ_exãnsi⁄
 
Áke_exãnsi⁄1
;

29 c⁄° 
kØ_exãnsi⁄
 
Áke_exãnsi⁄2
;

30 c⁄° 
kØ_exãnsi⁄
 
Áke_exãnsi⁄3
;

32 c⁄° 
kØ_exãnsi⁄
 *
	gkØ_exãnsi⁄s
[] = {

33 &
Áke_exãnsi⁄1
,

34 &
Áke_exãnsi⁄2
,

35 &
Áke_exãnsi⁄3
,

	@/var/www/html/debian/gateway/kaa/test/kaa_tcp_channel/test_kaa_tcp_channel_bootstrap.c

22 
	#_POSIX_C_SOURCE
 200112L

	)

24 
	~<°dio.h
>

25 
	~<°döt.h
>

26 
	~<°dboﬁ.h
>

27 
	~<√tdb.h
>

28 
	~<°rög.h
>

30 
	~"kØ_ã°.h
"

32 
	~"kØ_comm⁄.h
"

33 
	~"kØ_îr‹.h
"

34 
	~"utûôõs/kØ_log.h
"

35 
	~"utûôõs/kØ_mem.h
"

36 
	~"∂©f‹m/ext_å™•‹t_ch™√l.h
"

37 
	~"∂©f‹m/ext_t˝_utûs.h
"

38 
	~"∂©f‹m-im∂/comm⁄/kØ_t˝_ch™√l.h
"

39 
	~"kØ_¥Ÿocﬁs/kØ_t˝/kØt˝_ªque°.h
"

40 
	~"∂©f‹m/ext_key_utûs.h
"

41 
	~"∂©f‹m/ext_í¸y±i⁄_utûs.h
"

43 
	~<kØ_boŸ°øp_m™agî.h
>

45 
	#ACCESS_POINT_SOCKET_FD
 5

	)

48 
boﬁ
 
	mgëho°byaddr_ªque°ed
;

49 
boﬁ
 
	m√w_sockë_¸óãd
;

50 
boﬁ
 
	msockë_c⁄√˘ög_îr‹_s˚«rio
;

51 
boﬁ
 
	msockë_c⁄√˘ed
;

52 
boﬁ
 
	msockë_c⁄√˘ed_ˇŒback
;

53 
boﬁ
 
	msockë_c⁄√˘ög_îr‹_ˇŒback
;

54 
boﬁ
 
	mfûl_c⁄√˘_mesßge
;

55 
boﬁ
 
	mªque°_c⁄√˘
;

56 
boﬁ
 
	mauth_∑ckë_wrôãn
;

57 
boﬁ
 
	mc⁄«ck_ªad
;

58 
boﬁ
 
	mkØsync_ªad
;

59 
boﬁ
 
	mkØsync_¥o˚s£d
;

60 
boﬁ
 
	msockë_disc⁄√˘ed_wrôe
;

61 
boﬁ
 
	msockë_disc⁄√˘ed_˛o£d
;

62 
boﬁ
 
	msockë_disc⁄√˘ed_ˇŒback
;

63 
boﬁ
 
	mboŸ°øp_m™agî_⁄_ac˚ss_poöt_Áûed
;

64 
kØ_fd_t
 
	mfd
;

65 } 
	t£t_ac˚ss_poöt_öfo_t
;

67 
£t_ac˚ss_poöt_öfo_t
 
	gac˚ss_poöt_ã°_öfo
;

69 
	$ª£t_ac˚ss_poöt_ã°_öfo
()

71 
	`mem£t
(&
ac˚ss_poöt_ã°_öfo
,0,(
£t_ac˚ss_poöt_öfo_t
));

72 
	}
}

74 
kØ_loggî_t
 *
	gloggî
 = 
NULL
;

76 
uöt8_t
 
	gCONNACK
[] = {0x20, 0x02, 0x00, 0x01};

78 
uöt8_t
 
	gKAASYNC_BOOTSTRAP
[] = {

83 c⁄° 
uöt8_t
 *
	gKAASYNC_BOOTSTRAP_MESSAGE
 = (const uint8_t *)"Kaatcp";

85 
uöt8_t
 
	gDISCONNECT_MESSAGE
[] = {0xE0, 0x02, 0x00, 0x00};

87 
uöt8_t
 
	gCONNECT_HEAD
[] = {0x35, 0x46};

88 
uöt8_t
 
	gCONNECT_PACK
[] = {0x34, 0x45};

90 
kØ_sockaddr_t
 
	gDESTINATION_SOCKADDR
 = {

91 .
ß_Ámûy
 = 0x02,

92 .
	gß_d©a
 = { 0x26, (
uöt8_t
)0xa0, (uint8_t)0xc0, (uint8_t)0xa8, 0x4d, 0x02,

97 
uöt8_t
 
	gCONNECTION_DATA
[] = {

140 
kØ_îr‹_t
 
kØ_t˝_ch™√l_evít_ˇŒback_‚
(*
c⁄ãxt
, 
kØ_t˝_ch™√l_evít_t
 
evít_ty≥
, 
kØ_fd_t
 
fd
);

141 
ã°_£t_ac˚ss_poöt
(
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√l
);

142 
ã°_check_boŸ°øp_sync
(
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√l
);

144 
	#CHECK_SOCKET_RW
(
ch™√l
,
ªad
,
wrôe
) \

146 
boﬁ
 
rd
 = 
	`kØ_t˝_ch™√l_is_ªady
(
ch™√l
,
FD_READ
);\

147 
	`ASSERT_EQUAL
(
rd
, 
ªad
);\

148 
boﬁ
 
wr
 = 
	`kØ_t˝_ch™√l_is_ªady
(
ch™√l
,
FD_WRITE
);\

149 
	`ASSERT_EQUAL
(
wr
, 
wrôe
);\

150 }

	)

158 
	$ã°_¸óã_kØ_t˝_ch™√l
(**
°©e
)

160 ()
°©e
;

161 
kØ_îr‹_t
 
îr‹_code
;

163 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√l
 = 
NULL
;

164 
ch™√l
 = 
	`KAA_CALLOC
(1,(
kØ_å™•‹t_ch™√l_öãrÁ˚_t
));

166 
kØ_exãnsi⁄_id
 
boŸ°øp_£rvi˚s
[] = {
KAA_EXTENSION_BOOTSTRAP
};

168 
îr‹_code
 = 
	`kØ_t˝_ch™√l_¸óã
(
ch™√l
,
loggî
,
boŸ°øp_£rvi˚s
,1);

170 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

172 
	`ASSERT_NOT_NULL
(
ch™√l
->
c⁄ãxt
);

173 
	`ASSERT_NOT_NULL
(
ch™√l
->
gë_¥Ÿocﬁ_id
);

174 
	`ASSERT_NOT_NULL
(
ch™√l
->
gë_suµ‹ãd_£rvi˚s
);

175 
	`ASSERT_NOT_NULL
(
ch™√l
->
öô
);

176 
	`ASSERT_NOT_NULL
(
ch™√l
->
de°roy
);

177 
	`ASSERT_NOT_NULL
(
ch™√l
->
£t_ac˚ss_poöt
);

178 
	`ASSERT_NOT_NULL
(
ch™√l
->
sync_h™dÀr
);

180 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 
¥Ÿocﬁ_öfo
;

181 
îr‹_code
 = 
ch™√l
->
	`gë_¥Ÿocﬁ_id
(ch™√l->
c⁄ãxt
,&
¥Ÿocﬁ_öfo
);

182 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

184 
	`ASSERT_EQUAL
(
¥Ÿocﬁ_öfo
.
id
, 0x56c8ff92);

185 
	`ASSERT_EQUAL
(
¥Ÿocﬁ_öfo
.
vîsi⁄
, 1);

187 c⁄° 
kØ_exãnsi⁄_id
 *
r_suµ‹ãd_£rvi˚s
;

188 
size_t
 
r_suµ‹ãd_£rvi˚_cou¡
 = 0;

189 
îr‹_code
 = 
ch™√l
->
	`gë_suµ‹ãd_£rvi˚s
(ch™√l->
c⁄ãxt
,&
r_suµ‹ãd_£rvi˚s
,&
r_suµ‹ãd_£rvi˚_cou¡
);

190 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

192 
	`ASSERT_EQUAL
(
r_suµ‹ãd_£rvi˚_cou¡
, 1);

193 
	`ASSERT_EQUAL
(
r_suµ‹ãd_£rvi˚s
[0], 
KAA_EXTENSION_BOOTSTRAP
);

195 
ch™√l
->
	`de°roy
(ch™√l->
c⁄ãxt
);

197 
	`KAA_FREE
(
ch™√l
);

198 
	}
}

207 
	$ã°_£t_ac˚ss_poöt_fuŒ_suc˚ss_boŸ°øp
(**
°©e
)

209 ()
°©e
;

211 
kØ_îr‹_t
 
îr‹_code
;

213 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√l
 = 
NULL
;

214 
ch™√l
 = 
	`KAA_CALLOC
(1,(
kØ_å™•‹t_ch™√l_öãrÁ˚_t
));

216 
kØ_exãnsi⁄_id
 
boŸ°øp_£rvi˚s
[] = {
KAA_EXTENSION_BOOTSTRAP
};

218 
îr‹_code
 = 
	`kØ_t˝_ch™√l_¸óã
(
ch™√l
,
loggî
,
boŸ°øp_£rvi˚s
,1);

219 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

222 
	`ã°_£t_ac˚ss_poöt
(
ch™√l
);

225 
	`ã°_check_boŸ°øp_sync
(
ch™√l
);

227 
ch™√l
->
	`de°roy
(ch™√l->
c⁄ãxt
);

229 
	`KAA_FREE
(
ch™√l
);

230 
	}
}

235 
	$ã°_£t_ac˚ss_poöt_c⁄√˘ög_îr‹
(**
°©e
)

237 ()
°©e
;

239 
kØ_îr‹_t
 
îr‹_code
;

241 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√l
 = 
NULL
;

242 
ch™√l
 = 
	`KAA_CALLOC
(1,(
kØ_å™•‹t_ch™√l_öãrÁ˚_t
));

244 
kØ_exãnsi⁄_id
 
boŸ°øp_£rvi˚s
[] = {
KAA_EXTENSION_BOOTSTRAP
};

246 
îr‹_code
 = 
	`kØ_t˝_ch™√l_¸óã
(
ch™√l
,
loggî
,
boŸ°øp_£rvi˚s
,1);

247 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

250 
	`ã°_£t_ac˚ss_poöt
(
ch™√l
);

254 
ac˚ss_poöt_ã°_öfo
.
sockë_c⁄√˘ög_îr‹_s˚«rio
 = 
åue
;

255 
îr‹_code
 = 
	`kØ_t˝_ch™√l_¥o˚ss_evít
(
ch™√l
,
FD_WRITE
);

256 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

258 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
sockë_c⁄√˘ed_ˇŒback
, 
Ál£
);

259 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
fûl_c⁄√˘_mesßge
, 
Ál£
);

260 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
ªque°_c⁄√˘
, 
Ál£
);

261 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
sockë_c⁄√˘ög_îr‹_ˇŒback
, 
åue
);

262 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
sockë_disc⁄√˘ed_˛o£d
, 
åue
);

263 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
boŸ°øp_m™agî_⁄_ac˚ss_poöt_Áûed
, 
åue
);

266 
ch™√l
->
	`de°roy
(ch™√l->
c⁄ãxt
);

268 
	`KAA_FREE
(
ch™√l
);

269 
	}
}

277 
	$ã°_£t_ac˚ss_poöt_io_îr‹
(**
°©e
)

279 ()
°©e
;

281 
kØ_îr‹_t
 
îr‹_code
;

283 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√l
 = 
NULL
;

284 
ch™√l
 = 
	`KAA_CALLOC
(1,(
kØ_å™•‹t_ch™√l_öãrÁ˚_t
));

286 
kØ_exãnsi⁄_id
 
boŸ°øp_£rvi˚s
[] = {
KAA_EXTENSION_BOOTSTRAP
};

288 
îr‹_code
 = 
	`kØ_t˝_ch™√l_¸óã
(
ch™√l
,
loggî
,
boŸ°øp_£rvi˚s
,1);

289 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

292 
	`ã°_£t_ac˚ss_poöt
(
ch™√l
);

297 
îr‹_code
 = 
	`kØ_t˝_ch™√l_¥o˚ss_evít
(
ch™√l
,
FD_WRITE
);

298 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

299 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
sockë_c⁄√˘ed
, 
åue
);

300 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
sockë_c⁄√˘ed_ˇŒback
, 
åue
);

301 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
fûl_c⁄√˘_mesßge
, 
åue
);

302 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
ªque°_c⁄√˘
, 
åue
);

306 
	`CHECK_SOCKET_RW
(
ch™√l
,
åue
,true);

309 
îr‹_code
 = 
	`kØ_t˝_ch™√l_¥o˚ss_evít
(
ch™√l
,
FD_WRITE
);

310 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

311 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
auth_∑ckë_wrôãn
, 
åue
);

315 
	`CHECK_SOCKET_RW
(
ch™√l
,
åue
,
Ál£
);

318 
ac˚ss_poöt_ã°_öfo
.
sockë_c⁄√˘ög_îr‹_s˚«rio
 = 
åue
;

319 
îr‹_code
 = 
	`kØ_t˝_ch™√l_¥o˚ss_evít
(
ch™√l
,
FD_READ
);

320 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

321 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
c⁄«ck_ªad
, 
Ál£
);

322 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
sockë_disc⁄√˘ed_ˇŒback
, 
åue
);

323 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
sockë_disc⁄√˘ed_˛o£d
, 
åue
);

324 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
boŸ°øp_m™agî_⁄_ac˚ss_poöt_Áûed
, 
åue
);

327 
ch™√l
->
	`de°roy
(ch™√l->
c⁄ãxt
);

329 
	`KAA_FREE
(
ch™√l
);

330 
	}
}

344 
	$ã°_boŸ°øp_sync_suc˚ss
(**
°©e
)

346 ()
°©e
;

348 
kØ_îr‹_t
 
îr‹_code
;

350 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√l
 = 
NULL
;

351 
ch™√l
 = 
	`KAA_CALLOC
(1,(
kØ_å™•‹t_ch™√l_öãrÁ˚_t
));

353 
kØ_exãnsi⁄_id
 
boŸ°øp_£rvi˚s
[] = {
KAA_EXTENSION_BOOTSTRAP
};

355 
îr‹_code
 = 
	`kØ_t˝_ch™√l_¸óã
(
ch™√l
,
loggî
,
boŸ°øp_£rvi˚s
,1);

356 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

359 
	`ã°_£t_ac˚ss_poöt
(
ch™√l
);

362 
	`ã°_check_boŸ°øp_sync
(
ch™√l
);

366 
ch™√l
->
	`sync_h™dÀr
(ch™√l->
c⁄ãxt
, 
boŸ°øp_£rvi˚s
, 1);

369 
	`ã°_check_boŸ°øp_sync
(
ch™√l
);

371 
ch™√l
->
	`de°roy
(ch™√l->
c⁄ãxt
);

373 
	`KAA_FREE
(
ch™√l
);

374 
	}
}

378 
	$ã°_check_boŸ°øp_sync
(
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√l
)

380 
	`ASSERT_NOT_NULL
(
ch™√l
);

383 
ac˚ss_poöt_ã°_öfo
.
sockë_c⁄√˘ed
 = 
Ál£
;

384 
ac˚ss_poöt_ã°_öfo
.
sockë_c⁄√˘ed_ˇŒback
 = 
Ál£
;

385 
ac˚ss_poöt_ã°_öfo
.
fûl_c⁄√˘_mesßge
 = 
Ál£
;

386 
ac˚ss_poöt_ã°_öfo
.
ªque°_c⁄√˘
 = 
Ál£
;

387 
ac˚ss_poöt_ã°_öfo
.
auth_∑ckë_wrôãn
 = 
Ál£
;

388 
ac˚ss_poöt_ã°_öfo
.
c⁄«ck_ªad
 = 
Ál£
;

389 
ac˚ss_poöt_ã°_öfo
.
kØsync_ªad
 = 
Ál£
;

390 
ac˚ss_poöt_ã°_öfo
.
kØsync_¥o˚s£d
 = 
Ál£
;

391 
ac˚ss_poöt_ã°_öfo
.
sockë_disc⁄√˘ed_wrôe
 = 
Ál£
;

392 
ac˚ss_poöt_ã°_öfo
.
sockë_disc⁄√˘ed_ˇŒback
 = 
Ál£
;

393 
ac˚ss_poöt_ã°_öfo
.
sockë_disc⁄√˘ed_˛o£d
 = 
Ál£
;

394 
ac˚ss_poöt_ã°_öfo
.
boŸ°øp_m™agî_⁄_ac˚ss_poöt_Áûed
 = 
Ál£
;

398 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_t˝_ch™√l_¥o˚ss_evít
(
ch™√l
,
FD_WRITE
);

399 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

400 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
sockë_c⁄√˘ed
, 
åue
);

401 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
sockë_c⁄√˘ed_ˇŒback
, 
åue
);

402 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
fûl_c⁄√˘_mesßge
, 
åue
);

403 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
ªque°_c⁄√˘
, 
åue
);

407 
	`CHECK_SOCKET_RW
(
ch™√l
,
åue
,true);

410 
îr‹_code
 = 
	`kØ_t˝_ch™√l_¥o˚ss_evít
(
ch™√l
,
FD_WRITE
);

411 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

412 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
auth_∑ckë_wrôãn
, 
åue
);

416 
	`CHECK_SOCKET_RW
(
ch™√l
,
åue
,
Ál£
);

420 
îr‹_code
 = 
	`kØ_t˝_ch™√l_¥o˚ss_evít
(
ch™√l
,
FD_READ
);

421 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

422 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
c⁄«ck_ªad
, 
åue
);

427 
	`CHECK_SOCKET_RW
(
ch™√l
,
åue
,
Ál£
);

430 
îr‹_code
 = 
	`kØ_t˝_ch™√l_¥o˚ss_evít
(
ch™√l
,
FD_READ
);

431 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

432 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
kØsync_ªad
, 
åue
);

433 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
kØsync_¥o˚s£d
, 
åue
);

439 
	`CHECK_SOCKET_RW
(
ch™√l
,
åue
,true);

442 
îr‹_code
 = 
	`kØ_t˝_ch™√l_¥o˚ss_evít
(
ch™√l
,
FD_WRITE
);

443 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

444 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
sockë_disc⁄√˘ed_wrôe
, 
åue
);

445 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
sockë_disc⁄√˘ed_ˇŒback
, 
åue
);

446 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
sockë_disc⁄√˘ed_˛o£d
, 
åue
);

447 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
boŸ°øp_m™agî_⁄_ac˚ss_poöt_Áûed
, 
Ál£
);

448 
	}
}

450 
	$ã°_£t_ac˚ss_poöt
(
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√l
)

452 
	`ASSERT_NOT_NULL
(
ch™√l
);

454 
kØ_å™•‹t_c⁄ãxt_t
 
å™•‹t_c⁄ãxt
;

455 
å™•‹t_c⁄ãxt
.
kØ_c⁄ãxt
 = (
kØ_c⁄ãxt_t
*)
	`ˇŒoc
(1, (kaa_context_t));

456 
å™•‹t_c⁄ãxt
.
kØ_c⁄ãxt
->
∂©f‹m_¥Ÿocﬁ
 = (
kØ_∂©f‹m_¥Ÿocﬁ_t
 *)
CONNECTION_DATA
;

457 
å™•‹t_c⁄ãxt
.
kØ_c⁄ãxt
->
boŸ°øp_m™agî
 = (
kØ_boŸ°øp_m™agî_t
 *)
CONNECTION_DATA
;

459 
kØ_îr‹_t
 
îr‹_code
 = 
ch™√l
->
	`öô
(ch™√l->
c⁄ãxt
, &
å™•‹t_c⁄ãxt
);

460 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

462 
îr‹_code
 = 
	`kØ_t˝_ch™√l_£t_sockë_evíts_ˇŒback
(
ch™√l
, 
kØ_t˝_ch™√l_evít_ˇŒback_‚
, channel);

463 
	`as£π_öt_equÆ
(
KAA_ERR_NONE
, 
îr‹_code
);

466 
kØ_ac˚ss_poöt_t
 
ac˚ss_poöt
;

467 
ac˚ss_poöt
.
id
 = 10;

468 
ac˚ss_poöt
.
c⁄√˘i⁄_d©a
 = (*)
CONNECTION_DATA
;

469 
ac˚ss_poöt
.
c⁄√˘i⁄_d©a_Àn
 = (
CONNECTION_DATA
);

471 
	`ª£t_ac˚ss_poöt_ã°_öfo
();

473 
îr‹_code
 = 
ch™√l
->
	`£t_ac˚ss_poöt
(ch™√l->
c⁄ãxt
, &
ac˚ss_poöt
);

474 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

475 
îr‹_code

	`kØ_t˝_ch™√l_check_kì∑live
(
ch™√l
);

476 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

478 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
gëho°byaddr_ªque°ed
, 
åue
);

480 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
√w_sockë_¸óãd
, 
åue
);

482 
kØ_fd_t
 
fd
 = -1;

484 
îr‹_code
 = 
	`kØ_t˝_ch™√l_gë_des¸ùt‹
(
ch™√l
,&
fd
);

485 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

487 
	`ASSERT_EQUAL
(
fd
, 
ACCESS_POINT_SOCKET_FD
);

489 
ac˚ss_poöt_ã°_öfo
.
fd
 = fd;

494 
	`CHECK_SOCKET_RW
(
ch™√l
,
Ál£
,
åue
);

495 
	}
}

499 
kØ_îr‹_t
 
	$kØ_boŸ°øp_m™agî_⁄_ac˚ss_poöt_Áûed
(
kØ_boŸ°øp_m™agî_t
 *
£lf
,

500 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 *
¥Ÿocﬁ_id
,

501 
kØ_£rvî_ty≥_t
 
ty≥
,

502 
kØ_Áûovî_ªas⁄
 
ªas⁄_code
)

504 ()
ªas⁄_code
;

505 ()
£lf
;

506 
	`ASSERT_EQUAL
(
¥Ÿocﬁ_id
->
id
,0x56c8ff92);

507 
	`ASSERT_EQUAL
(
¥Ÿocﬁ_id
->
vîsi⁄
,1);

508 
	`ASSERT_EQUAL
(
ty≥
,
KAA_SERVER_BOOTSTRAP
);

509 
ac˚ss_poöt_ã°_öfo
.
boŸ°øp_m™agî_⁄_ac˚ss_poöt_Áûed
 = 
åue
;

510  
KAA_ERR_NONE
;

511 
	}
}

513 
kØ_îr‹_t
 
	$kØ_t˝_ch™√l_evít_ˇŒback_‚
(*
c⁄ãxt
, 
kØ_t˝_ch™√l_evít_t
 
evít_ty≥
, 
kØ_fd_t
 
fd
)

515 ()
c⁄ãxt
;

516 i‡(
fd
 !
ac˚ss_poöt_ã°_öfo
.fd) {

517  
KAA_ERR_BADPARAM
;

519 
evít_ty≥
) {

520 
SOCKET_CONNECTED
:

521 
ac˚ss_poöt_ã°_öfo
.
sockë_c⁄√˘ed_ˇŒback
 = 
åue
;

523 
SOCKET_DISCONNECTED
:

524 
ac˚ss_poöt_ã°_öfo
.
sockë_disc⁄√˘ed_ˇŒback
 = 
åue
;

526 
SOCKET_CONNECTION_ERROR
:

527 
ac˚ss_poöt_ã°_öfo
.
sockë_c⁄√˘ög_îr‹_ˇŒback
 = 
åue
;

530  
KAA_ERR_NONE
;

531 
	}
}

534 
kØ_îr‹_t
 
	$kØ_∂©f‹m_¥Ÿocﬁ_¥o˚ss_£rvî_sync
(
kØ_∂©f‹m_¥Ÿocﬁ_t
 *
£lf


535 , c⁄° 
uöt8_t
 *
buf„r


536 , 
size_t
 
buf„r_size
)

538 ()
£lf
;

540 ()
buf„r_size
;

542 
	`KAA_RETURN_IF_NIL
(
buf„r
, 
KAA_ERR_BADPARAM
);

544 i‡(!
	`memcmp
(
buf„r
, 
KAASYNC_BOOTSTRAP_MESSAGE
, 
	`°æí
((const *)KAASYNC_BOOTSTRAP_MESSAGE))) {

545 
ac˚ss_poöt_ã°_öfo
.
kØsync_¥o˚s£d
 = 
åue
;

546  
KAA_ERR_NONE
;

548  
KAA_ERR_BADPARAM
;

549 
	}
}

551 
kØ_îr‹_t
 
	$ext_t˝_utûs_t˝_sockë_˛o£
(
kØ_fd_t
 
fd
)

553 i‡(
fd
 !
ac˚ss_poöt_ã°_öfo
.fd) {

554  
KAA_ERR_BADPARAM
;

556 
ac˚ss_poöt_ã°_öfo
.
sockë_disc⁄√˘ed_˛o£d
 = 
åue
;

557  
KAA_ERR_NONE
;

558 
	}
}

560 
ext_t˝_sockë_io_îr‹s_t
 
	$ext_t˝_utûs_t˝_sockë_ªad
(
kØ_fd_t
 
fd
, *
buf„r
, 
size_t
 
buf„r_size
, size_à*
byãs_ªad
)

562 ()
buf„r_size
;

564 
	`KAA_RETURN_IF_NIL
(
buf„r
, 
KAA_TCP_SOCK_IO_ERROR
);

566 i‡(
fd
 !
ac˚ss_poöt_ã°_öfo
.fd) {

567  
KAA_TCP_SOCK_IO_ERROR
;

570 i‡(
ac˚ss_poöt_ã°_öfo
.
sockë_c⁄√˘ög_îr‹_s˚«rio
) {

571 *
byãs_ªad
 = 0;

572  
KAA_TCP_SOCK_IO_ERROR
;

573 } i‡(!
ac˚ss_poöt_ã°_öfo
.
c⁄«ck_ªad
) {

574 
	`mem˝y
(
buf„r
,
CONNACK
,(CONNACK));

575 *
byãs_ªad
 = (
CONNACK
);

576 
ac˚ss_poöt_ã°_öfo
.
c⁄«ck_ªad
 = 
åue
;

577 } i‡(!
ac˚ss_poöt_ã°_öfo
.
kØsync_ªad
) {

578 
	`mem˝y
(
buf„r
,
KAASYNC_BOOTSTRAP
,(KAASYNC_BOOTSTRAP));

579 *
byãs_ªad
 = (
KAASYNC_BOOTSTRAP
);

580 
ac˚ss_poöt_ã°_öfo
.
kØsync_ªad
 = 
åue
;

583  
KAA_TCP_SOCK_IO_OK
;

584 
	}
}

586 
ext_t˝_sockë_io_îr‹s_t
 
	$ext_t˝_utûs_t˝_sockë_wrôe
(
kØ_fd_t
 
fd
, c⁄° *
buf„r
, 
size_t
 
buf„r_size
, size_à*
byãs_wrôãn
)

588 
	`KAA_RETURN_IF_NIL
(
buf„r
, 
KAA_TCP_SOCK_IO_ERROR
);

590 i‡(
fd
 !
ac˚ss_poöt_ã°_öfo
.fd) {

591  
KAA_TCP_SOCK_IO_ERROR
;

594 i‡(!
ac˚ss_poöt_ã°_öfo
.
auth_∑ckë_wrôãn
) {

595 i‡(
buf„r_size
 !((
CONNECT_HEAD
)+(
CONNECT_PACK
))) {

596  
KAA_TCP_SOCK_IO_ERROR
;

598 *
byãs_wrôãn
 = 0;

599 i‡(!
	`memcmp
(
buf„r
,
CONNECT_HEAD
,(CONNECT_HEAD))) {

600 i‡(!
	`memcmp
(
buf„r
+(
CONNECT_HEAD
),
CONNECT_PACK
,(CONNECT_PACK))) {

601 
ac˚ss_poöt_ã°_öfo
.
auth_∑ckë_wrôãn
 = 
åue
;

602 *
byãs_wrôãn
 = (
CONNECT_HEAD
)+(
CONNECT_PACK
);

603  
KAA_TCP_SOCK_IO_OK
;

606 } i‡(!
ac˚ss_poöt_ã°_öfo
.
sockë_disc⁄√˘ed_wrôe
) {

607 i‡(
buf„r_size
 !(
DISCONNECT_MESSAGE
)) {

608  
KAA_TCP_SOCK_IO_ERROR
;

610 i‡(!
	`memcmp
(
buf„r
,
DISCONNECT_MESSAGE
,(DISCONNECT_MESSAGE))) {

611 
ac˚ss_poöt_ã°_öfo
.
sockë_disc⁄√˘ed_wrôe
 = 
åue
;

612 *
byãs_wrôãn
 = (
DISCONNECT_MESSAGE
);

613  
KAA_TCP_SOCK_IO_OK
;

617  
KAA_TCP_SOCK_IO_ERROR
;

618 
	}
}

620 
kØt˝_îr‹_t
 
	$kØt˝_gë_ªque°_c⁄√˘
(c⁄° 
kØt˝_c⁄√˘_t
 *
mesßge


621 , *
buf


622 , 
size_t
 *
buf_size
)

624 i‡(
mesßge
->
¥Ÿocﬁ_«me_Àngth
 !
KAA_TCP_NAME_LENGTH
) {

625  
KAATCP_ERR_BAD_PARAM
;

627 i‡(
mesßge
->
¥Ÿocﬁ_vîsi⁄
 !
PROTOCOL_VERSION
) {

628  
KAATCP_ERR_BAD_PARAM
;

630 i‡(
mesßge
->
√xt_±‹ocﬁ_id
 != 0x3553c66f) {

631  
KAATCP_ERR_BAD_PARAM
;

633 i‡(
mesßge
->
c⁄√˘_Êags
 !
KAA_CONNECT_FLAGS
) {

634  
KAATCP_ERR_BAD_PARAM
;

636 i‡(
mesßge
->
kìp_Æive
 !
KAA_TCP_CHANNEL_MAX_TIMEOUT
) {

637  
KAATCP_ERR_BAD_PARAM
;

639 i‡(
mesßge
->
sync_ªque°
 && mesßge->
sync_ªque°_size
 =(
CONNECT_PACK
)) {

640 i‡(!
	`memcmp
(
CONNECT_PACK
 ,
mesßge
->
sync_ªque°
, mesßge->
sync_ªque°_size
)) {

641 *
buf_size
 = 0;

642 
	`mem˝y
(
buf
, 
CONNECT_HEAD
, (CONNECT_HEAD));

643 *
buf_size
 +(
CONNECT_HEAD
);

644 
	`mem˝y
(
buf
+(*
buf_size
),
mesßge
->
sync_ªque°
,mesßge->
sync_ªque°_size
);

645 *
buf_size
 +
mesßge
->
sync_ªque°_size
;

646 
ac˚ss_poöt_ã°_öfo
.
ªque°_c⁄√˘
 = 
åue
;

647  
KAATCP_ERR_NONE
;

650  
KAATCP_ERR_BAD_PARAM
;

651 
	}
}

653 
kØt˝_îr‹_t
 
	$kØt˝_fûl_c⁄√˘_mesßge
(
uöt16_t
 
kì∑live
, 
uöt32_t
 
√xt_¥Ÿocﬁ_id


654 , *
sync_ªque°
, 
size_t
 
sync_ªque°_size


655 , *
£ssi⁄_key
, 
size_t
 
£ssi⁄_key_size


656 , *
sig«tuª
, 
size_t
 
sig«tuª_size


657 , 
kØt˝_c⁄√˘_t
 *
mesßge
)

659 i‡(
kì∑live
 !
KAA_TCP_CHANNEL_MAX_TIMEOUT
) {

660  
KAATCP_ERR_BAD_PARAM
;

662 i‡(
√xt_¥Ÿocﬁ_id
 != 0x3553c66f) {

663  
KAATCP_ERR_BAD_PARAM
;

666 #ifde‡
KAA_ENCRYPTION


671 
kØ_îr‹_t
 
îr
 = 
	`ext_de¸y±_d©a
((
uöt8_t
 *)
sync_ªque°
, 
sync_ªque°_size
,

672 (
uöt8_t
 *)
sync_ªque°
, &
sync_ªque°_size
);

673 
	`ASSERT_EQUAL
(
îr
, 
KAA_ERR_NONE
);

675 i‡(
sync_ªque°
 && 
sync_ªque°_size
 =(
CONNECT_PACK
)) {

676 i‡(!
	`memcmp
(
CONNECT_PACK
, 
sync_ªque°
, 
sync_ªque°_size
)) {

677 
	`mem£t
(
mesßge
, 0, (
kØt˝_c⁄√˘_t
));

679 
mesßge
->
¥Ÿocﬁ_«me_Àngth
 = 
KAA_TCP_NAME_LENGTH
;

680 
	`mem˝y
(
mesßge
->
¥Ÿocﬁ_«me
, 
KAA_TCP_NAME
, 
KAA_TCP_NAME_LENGTH
);

682 
mesßge
->
¥Ÿocﬁ_vîsi⁄
 = 
PROTOCOL_VERSION
;

683 
mesßge
->
c⁄√˘_Êags
 = 
KAA_CONNECT_FLAGS
;

685 
mesßge
->
√xt_±‹ocﬁ_id
 = 
√xt_¥Ÿocﬁ_id
;

687 i‡(
£ssi⁄_key
) {

688 
mesßge
->
£ssi⁄_key
 = session_key;

689 
mesßge
->
£ssi⁄_key_size
 = session_key_size;

690 
mesßge
->
£ssi⁄_key_Êags
 = 
KAA_CONNECT_KEY_AES_RSA
;

692 i‡(
sig«tuª
) {

693 
mesßge
->
sig«tuª
 = signature;

694 
mesßge
->
sig«tuª_size
 = signature_size;

695 
mesßge
->
sig«tuª_Êags
 = 
KAA_CONNECT_SIGNATURE_SHA1
;

698 
mesßge
->
kìp_Æive
 = 
kì∑live
;

700 
mesßge
->
sync_ªque°_size
 = sync_request_size;

701 
mesßge
->
sync_ªque°
 = sync_request;

703 
ac˚ss_poöt_ã°_öfo
.
fûl_c⁄√˘_mesßge
 = 
åue
;

705  
KAATCP_ERR_NONE
;

708  
KAATCP_ERR_BAD_PARAM
;

709 
	}
}

712 
kØ_îr‹_t
 
	$kØ_∂©f‹m_¥Ÿocﬁ_Æloc_£rülize_˛õ¡_sync
(
kØ_∂©f‹m_¥Ÿocﬁ_t
 *
£lf
,

713 c⁄° 
kØ_exãnsi⁄_id
 *
£rvi˚s
, 
size_t
 
£rvi˚s_cou¡
,

714 
uöt8_t
 **
buf„r
, 
size_t
 *
buf„r_size
)

716 ()
£lf
;

718 i‡(
£rvi˚s_cou¡
 == 1

719 && 
£rvi˚s
[0] =
KAA_EXTENSION_BOOTSTRAP
) {

720 
uöt8_t
 *
Æloc_buf„r
 = 
	`KAA_MALLOC
((
CONNECT_PACK
));

721 i‡(
Æloc_buf„r
) {

722 
	`mem˝y
(
Æloc_buf„r
, 
CONNECT_PACK
, (CONNECT_PACK));

723 *
buf„r
 = 
Æloc_buf„r
;

724 *
buf„r_size
 = (
CONNECT_PACK
);

725  
KAA_ERR_NONE
;

729  
KAA_ERR_BADPARAM
;

730 
	}
}

732 
ext_t˝_sockë_°©e_t
 
	$ext_t˝_utûs_t˝_sockë_check
(
kØ_fd_t
 
fd
, c⁄° 
kØ_sockaddr_t
 *
de°ö©i⁄
, 
kØ_sockÀn_t
 
de°ö©i⁄_size
)

735 ()
de°ö©i⁄_size
;

737 i‡(
fd
 =
ACCESS_POINT_SOCKET_FD
) {

738 
ªsu…_memcmp
 = 
	`memcmp
(
de°ö©i⁄
->
ß_d©a
, 
DESTINATION_SOCKADDR
.sa_data,

739 (
DESTINATION_SOCKADDR
.
ß_d©a
));

740 i‡((
ªsu…_memcmp
 =0Ë&& (
de°ö©i⁄
->
ß_Ámûy
 =
DESTINATION_SOCKADDR
.sa_family)) {

741 i‡(
ac˚ss_poöt_ã°_öfo
.
sockë_c⁄√˘ög_îr‹_s˚«rio
) {

742  
KAA_TCP_SOCK_ERROR
;

744 
ac˚ss_poöt_ã°_öfo
.
sockë_c⁄√˘ed
 = 
åue
;

749  
KAA_TCP_SOCK_CONNECTED
;

750 
	}
}

752 
ext_t˝_utûs_fun˘i⁄_ªtu∫_°©e_t
 
	$ext_t˝_utûs_gëaddrbyho°
(
kØ_dns_ªsﬁve_li°íî_t
 *
ªsﬁve_li°íî
, c⁄° 
kØ_dns_ªsﬁve_öfo_t
 *
ªsﬁve_¥›s
, 
kØ_sockaddr_t
 *
ªsu…
, 
kØ_sockÀn_t
 *
ªsu…_size
)

754 ()
ªsﬁve_li°íî
;

756 
	`KAA_RETURN_IF_NIL4
(
ªsﬁve_¥›s
,Ñesﬁve_¥›s->
ho°«me
, 
ªsu…
, 
ªsu…_size
, 
RET_STATE_VALUE_ERROR
);

757 i‡(*
ªsu…_size
 < (
sockaddr_ö
))

758  
RET_STATE_BUFFER_NOT_ENOUGH
;

761 
ho°«me_°r
[
ªsﬁve_¥›s
->
ho°«me_Àngth
 + 1];

762 
	`mem˝y
(
ho°«me_°r
, 
ªsﬁve_¥›s
->
ho°«me
,Ñesﬁve_¥›s->
ho°«me_Àngth
);

763 
ho°«me_°r
[
ªsﬁve_¥›s
->
ho°«me_Àngth
] = '\0';

765 
	`KAA_LOG_INFO
(
loggî
, 
KAA_ERR_NONE
, "gëaddrbyho°(ËHo°«me=%s:%d", 
ho°«me_°r
, 
ªsﬁve_¥›s
->
p‹t
);

768 
addröfo
 
höts
;

769 
	`mem£t
(&
höts
, 0 , (
addröfo
));

770 
höts
.
ai_sockty≥
 = 
SOCK_STREAM
;

771 i‡(*
ªsu…_size
 < (
sockaddr_ö6
))

772 
höts
.
ai_Ámûy
 = 
AF_INET
;

774 
addröfo
 *
ªsﬁve_ªsu…
 = 
NULL
;

775 
ªsﬁve_îr‹
 = 0;

777 i‡(
ªsﬁve_¥›s
->
p‹t
) {

778 
p‹t_°r
[6];

779 
	`¢¥ötf
(
p‹t_°r
, 6, "%u", 
ªsﬁve_¥›s
->
p‹t
);

780 
ªsﬁve_îr‹
 = 
	`gëaddröfo
(
ho°«me_°r
, 
p‹t_°r
, &
höts
, &
ªsﬁve_ªsu…
);

782 
ªsﬁve_îr‹
 = 
	`gëaddröfo
(
ho°«me_°r
, 
NULL
, &
höts
, &
ªsﬁve_ªsu…
);

785 i‡(
ªsﬁve_îr‹
 || !
ªsﬁve_ªsu…
)

786  
RET_STATE_VALUE_ERROR
;

788 i‡(
ªsﬁve_ªsu…
->
ai_addæí
 > *
ªsu…_size
) {

789 
	`‰ìaddröfo
(
ªsﬁve_ªsu…
);

790  
RET_STATE_BUFFER_NOT_ENOUGH
;

793 
	`mem˝y
(
ªsu…
, 
ªsﬁve_ªsu…
->
ai_addr
,Ñesﬁve_ªsu…->
ai_addæí
);

794 *
ªsu…_size
 = 
ªsﬁve_ªsu…
->
ai_addæí
;

795 
	`‰ìaddröfo
(
ªsﬁve_ªsu…
);

797 
ac˚ss_poöt_ã°_öfo
.
gëho°byaddr_ªque°ed
 = 
åue
;

799  
RET_STATE_VALUE_READY
;

800 
	}
}

802 
kØ_îr‹_t
 
	$ext_t˝_utûs_›í_t˝_sockë
(
kØ_fd_t
 *
fd
, c⁄° 
kØ_sockaddr_t
 *
de°ö©i⁄
, 
kØ_sockÀn_t
 
de°ö©i⁄_size
)

804 
ªsu…_memcmp
;

806 
	`KAA_RETURN_IF_NIL3
(
fd
, 
de°ö©i⁄
, 
de°ö©i⁄_size
, 
KAA_ERR_BADPARAM
);

808 
ªsu…_memcmp
 = 
	`memcmp
(
de°ö©i⁄
->
ß_d©a
, 
DESTINATION_SOCKADDR
.sa_data,

809 (
DESTINATION_SOCKADDR
.
ß_d©a
));

810 i‡((
ªsu…_memcmp
 =0Ë&& (
de°ö©i⁄
->
ß_Ámûy
 =
DESTINATION_SOCKADDR
.sa_family)) {

811 
ac˚ss_poöt_ã°_öfo
.
√w_sockë_¸óãd
 = 
åue
;

812 *
fd
 = 
ACCESS_POINT_SOCKET_FD
;

813  
KAA_ERR_NONE
;

816  
KAA_ERR_BADPARAM
;

817 
	}
}

819 
	$ã°_öô
()

821 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_log_¸óã
(&
loggî
, 
KAA_MAX_LOG_MESSAGE_LENGTH
, 
KAA_MAX_LOG_LEVEL
, 
NULL
);

822 i‡(
îr‹
 || !
loggî
)

823  
îr‹
;

827 
	}
}

829 
	$ã°_deöô
()

831 
	`kØ_log_de°roy
(
loggî
);

833 
	}
}

835 
KAA_SUITE_MAIN
(
Log
, 
ã°_öô
, 
ã°_deöô
,

836 
	$KAA_TEST_CASE
(
¸óã_kØ_t˝_ch™√l
, 
ã°_¸óã_kØ_t˝_ch™√l
)

837 
	$KAA_TEST_CASE
(
£t_ac˚ss_poöt_fuŒ_suc˚ss_boŸ°øp
, 
ã°_£t_ac˚ss_poöt_fuŒ_suc˚ss_boŸ°øp
)

838 
	$KAA_TEST_CASE
(
£t_ac˚ss_poöt_c⁄√˘ög_îr‹
, 
ã°_£t_ac˚ss_poöt_c⁄√˘ög_îr‹
)

839 
	$KAA_TEST_CASE
(
£t_ac˚ss_poöt_io_îr‹
, 
ã°_£t_ac˚ss_poöt_io_îr‹
)

840 
	`KAA_TEST_CASE
(
boŸ°øp_sync_suc˚ss
, 
ã°_boŸ°øp_sync_suc˚ss
)

	@/var/www/html/debian/gateway/kaa/test/kaa_tcp_channel/test_kaa_tcp_channel_operation.c

21 
	#_POSIX_C_SOURCE
 200112L

	)

23 
	~<°döt.h
>

24 
	~<°dboﬁ.h
>

25 
	~<√tdb.h
>

26 
	~<°rög.h
>

28 
	~"kØ_ã°.h
"

30 
	~"utûôõs/kØ_log.h
"

31 
	~"utûôõs/kØ_mem.h
"

32 
	~"∂©f‹m/ext_å™•‹t_ch™√l.h
"

33 
	~"∂©f‹m/ext_t˝_utûs.h
"

34 
	~"∂©f‹m-im∂/comm⁄/kØ_t˝_ch™√l.h
"

35 
	~"kØ_¥Ÿocﬁs/kØ_t˝/kØt˝_ªque°.h
"

36 
	~<kØ_comm⁄.h
>

38 
	#ACCESS_POINT_SOCKET_FD
 5

	)

40 
	#KEEPALIVE
 1000

	)

43 
boﬁ
 
	mgëho°byaddr_ªque°ed
;

44 
boﬁ
 
	m√w_sockë_¸óãd
;

45 
boﬁ
 
	msockë_c⁄√˘ög_îr‹_s˚«rio
;

46 
boﬁ
 
	msockë_c⁄√˘ed
;

47 
boﬁ
 
	msockë_c⁄√˘ed_ˇŒback
;

48 
boﬁ
 
	msockë_c⁄√˘ög_îr‹_ˇŒback
;

49 
boﬁ
 
	mfûl_c⁄√˘_mesßge
;

50 
boﬁ
 
	mªque°_c⁄√˘
;

51 
boﬁ
 
	mauth_∑ckë_wrôãn
;

52 
boﬁ
 
	mc⁄«ck_ªad
;

53 
boﬁ
 
	mdisc⁄√˘_¸óã_n⁄_s˚«rio
;

54 
boﬁ
 
	mdisc⁄√˘_ªad
;

55 
boﬁ
 
	mkØsync_ªad_s˚«rio
;

56 
boﬁ
 
	mkØsync_wrôe
;

57 
boﬁ
 
	mkØsync_ªad
;

58 
boﬁ
 
	mkØsync_¥o˚s£d
;

59 
boﬁ
 
	msockë_disc⁄√˘ed_wrôe
;

60 
boﬁ
 
	msockë_disc⁄√˘ed_˛o£d
;

61 
boﬁ
 
	msockë_disc⁄√˘ed_ˇŒback
;

62 
boﬁ
 
	mboŸ°øp_m™agî_⁄_ac˚ss_poöt_Áûed
;

63 
kØ_fd_t
 
	mfd
;

64 } 
	t£t_ac˚ss_poöt_öfo_t
;

66 
£t_ac˚ss_poöt_öfo_t
 
	gac˚ss_poöt_ã°_öfo
;

68 
	$ª£t_ac˚ss_poöt_ã°_öfo
()

70 
	`mem£t
(&
ac˚ss_poöt_ã°_öfo
,0,(
£t_ac˚ss_poöt_öfo_t
));

71 
	}
}

73 
kØ_loggî_t
 *
	gloggî
 = 
NULL
;

75 
uöt8_t
 
	gCONNACK
[] = {0x20, 0x02, 0x00, 0x01};

77 
uöt8_t
 
	gDISCONNECT_NONE
[] = {0xE0, 0x02, 0x00, 0x00};

79 
uöt8_t
 
	gKAASYNC_OP_SERV
[] = {0xf0, 0x0e, 0x00, 0x06, 'K', 'a','a','t','c','p',

82 
uöt8_t
 
	gKAASYNC_OP
[] = {0xF0, 0x13, 0x00, 0x06, 'K', 'a','a','t','c','p',

85 *
	gKAASYNC_OP_MESSAGE
 = "Kaatcp";

87 
uöt8_t
 
	gDISCONNECT_MESSAGE
[] = {0xE0, 0x02, 0x00, 0x00};

89 
uöt8_t
 
	gCONNECT_HEAD
[] = {0x35, 0x46};

90 
uöt8_t
 
	gCONNECT_PACK
[] = {0x34, 0x45};

92 
uöt8_t
 
	gDESTINATION_SOCKADDR
[] = {0x02, 0x00, 0x26, 0xa0, 0xc0, 0xa8, 0x4d, 0x02,

95 
uöt8_t
 
	gCONNECTION_DATA
[] = { 0x00, 0x00, 0x01, 0x26, 0x30, 0x82, 0x01, 0x22,

136 
kØ_îr‹_t
 
kØ_t˝_ch™√l_evít_ˇŒback_‚
(*
c⁄ãxt
, 
kØ_t˝_ch™√l_evít_t
 
evít_ty≥
, 
kØ_fd_t
 
fd
);

137 
ã°_£t_ac˚ss_poöt
(
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√l
);

138 
ã°_check_ch™√l_auth
(
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√l
);

139 
ã°_£nd_disc⁄√˘
(
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√l
);

140 
ã°_sync_exch™ge
(
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√l
);

142 
	#CHECK_SOCKET_RW
(
ch™√l
, 
ªad
, 
wrôe
) \

144 
boﬁ
 
rd
 = 
	`kØ_t˝_ch™√l_is_ªady
(
ch™√l
, 
FD_READ
);\

145 
	`ASSERT_EQUAL
(
rd
, 
ªad
);\

146 
boﬁ
 
wr
 = 
	`kØ_t˝_ch™√l_is_ªady
(
ch™√l
, 
FD_WRITE
);\

147 
	`ASSERT_EQUAL
(
wr
, 
wrôe
);\

148 }

	)

156 
	$ã°_¸óã_kØ_t˝_ch™√l
(**
°©e
)

158 ()
°©e
;

160 
kØ_îr‹_t
 
îr‹_code
;

162 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√l
 = 
NULL
;

163 
ch™√l
 = 
	`KAA_CALLOC
(1,(
kØ_å™•‹t_ch™√l_öãrÁ˚_t
));

165 
kØ_exãnsi⁄_id
 
›î©i⁄_£rvi˚s
[] = {

166 
KAA_EXTENSION_PROFILE
,

167 
KAA_EXTENSION_USER
,

168 
KAA_EXTENSION_EVENT
,

169 
KAA_EXTENSION_LOGGING
};

171 
îr‹_code
 = 
	`kØ_t˝_ch™√l_¸óã
(
ch™√l
, 
loggî
, 
›î©i⁄_£rvi˚s
, 4);

173 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

175 
	`ASSERT_NOT_NULL
(
ch™√l
->
c⁄ãxt
);

176 
	`ASSERT_NOT_NULL
(
ch™√l
->
gë_¥Ÿocﬁ_id
);

177 
	`ASSERT_NOT_NULL
(
ch™√l
->
gë_suµ‹ãd_£rvi˚s
);

178 
	`ASSERT_NOT_NULL
(
ch™√l
->
öô
);

179 
	`ASSERT_NOT_NULL
(
ch™√l
->
de°roy
);

180 
	`ASSERT_NOT_NULL
(
ch™√l
->
£t_ac˚ss_poöt
);

181 
	`ASSERT_NOT_NULL
(
ch™√l
->
sync_h™dÀr
);

183 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 
¥Ÿocﬁ_öfo
;

184 
îr‹_code
 = 
ch™√l
->
	`gë_¥Ÿocﬁ_id
(ch™√l->
c⁄ãxt
, &
¥Ÿocﬁ_öfo
);

185 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

187 
	`ASSERT_EQUAL
(
¥Ÿocﬁ_öfo
.
id
, 0x56c8ff92);

188 
	`ASSERT_EQUAL
(
¥Ÿocﬁ_öfo
.
vîsi⁄
, 1);

190 
kØ_exãnsi⁄_id
 *
r_suµ‹ãd_£rvi˚s
;

191 
size_t
 
r_suµ‹ãd_£rvi˚_cou¡
 = 0;

192 
îr‹_code
 = 
ch™√l
->
	`gë_suµ‹ãd_£rvi˚s
(ch™√l->
c⁄ãxt
, &
r_suµ‹ãd_£rvi˚s
, &
r_suµ‹ãd_£rvi˚_cou¡
);

193 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

195 
	`ASSERT_EQUAL
(
r_suµ‹ãd_£rvi˚_cou¡
, 4);

196 
	`ASSERT_EQUAL
(
r_suµ‹ãd_£rvi˚s
[0], 
KAA_EXTENSION_PROFILE
);

197 
	`ASSERT_EQUAL
(
r_suµ‹ãd_£rvi˚s
[1], 
KAA_EXTENSION_USER
);

198 
	`ASSERT_EQUAL
(
r_suµ‹ãd_£rvi˚s
[2], 
KAA_EXTENSION_EVENT
);

199 
	`ASSERT_EQUAL
(
r_suµ‹ãd_£rvi˚s
[3], 
KAA_EXTENSION_LOGGING
);

201 
ch™√l
->
	`de°roy
(ch™√l->
c⁄ãxt
);

203 
	`KAA_FREE
(
ch™√l
);

204 
	}
}

213 
	$ã°_kØ_t˝_ch™√l_suc˚ss_Êow
(**
°©e
)

215 ()
°©e
;

217 
kØ_îr‹_t
 
îr‹_code
;

219 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√l
 = 
NULL
;

220 
ch™√l
 = 
	`KAA_CALLOC
(1,(
kØ_å™•‹t_ch™√l_öãrÁ˚_t
));

222 
kØ_exãnsi⁄_id
 
›î©i⁄_£rvi˚s
[] = {

223 
KAA_EXTENSION_PROFILE
,

224 
KAA_EXTENSION_USER
,

225 
KAA_EXTENSION_EVENT
,

226 
KAA_EXTENSION_LOGGING
};

228 
îr‹_code
 = 
	`kØ_t˝_ch™√l_¸óã
(
ch™√l
, 
loggî
, 
›î©i⁄_£rvi˚s
, 4);

229 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

231 
	`ã°_£t_ac˚ss_poöt
(
ch™√l
);

233 
	`ã°_check_ch™√l_auth
(
ch™√l
);

235 
	`ã°_£nd_disc⁄√˘
(
ch™√l
);

237 
ch™√l
->
	`de°roy
(ch™√l->
c⁄ãxt
);

239 
	`KAA_FREE
(
ch™√l
);

240 
	}
}

249 
	$ã°_kØ_t˝_ch™√l_sync_Êow
(**
°©e
)

251 ()
°©e
;

253 
kØ_îr‹_t
 
îr‹_code
;

255 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√l
 = 
NULL
;

256 
ch™√l
 = 
	`KAA_CALLOC
(1,(
kØ_å™•‹t_ch™√l_öãrÁ˚_t
));

258 
kØ_exãnsi⁄_id
 
›î©i⁄_£rvi˚s
[] = {

259 
KAA_EXTENSION_PROFILE
,

260 
KAA_EXTENSION_USER
,

261 
KAA_EXTENSION_EVENT
,

262 
KAA_EXTENSION_LOGGING
};

264 
îr‹_code
 = 
	`kØ_t˝_ch™√l_¸óã
(
ch™√l
, 
loggî
, 
›î©i⁄_£rvi˚s
, 4);

265 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

267 
	`ã°_£t_ac˚ss_poöt
(
ch™√l
);

269 
	`ã°_check_ch™√l_auth
(
ch™√l
);

272 
kØ_exãnsi⁄_id
 
£rvi˚s1
[] = {
KAA_EXTENSION_PROFILE
, 
KAA_EXTENSION_USER
};

273 
ch™√l
->
	`sync_h™dÀr
(ch™√l->
c⁄ãxt
, 
£rvi˚s1
, 2);

275 
kØ_exãnsi⁄_id
 
£rvi˚s2
[] = {
KAA_EXTENSION_PROFILE
, 
KAA_EXTENSION_EVENT
};

276 
ch™√l
->
	`sync_h™dÀr
(ch™√l->
c⁄ãxt
, 
£rvi˚s2
, 2);

278 
kØ_exãnsi⁄_id
 
£rvi˚s3
[] = {
KAA_EXTENSION_LOGGING
};

279 
ch™√l
->
	`sync_h™dÀr
(ch™√l->
c⁄ãxt
, 
£rvi˚s3
, 1);

283 
	`CHECK_SOCKET_RW
(
ch™√l
, 
åue
,Årue);

285 
	`ã°_sync_exch™ge
(
ch™√l
);

287 
	`ã°_£nd_disc⁄√˘
(
ch™√l
);

289 
ch™√l
->
	`de°roy
(ch™√l->
c⁄ãxt
);

291 
	`KAA_FREE
(
ch™√l
);

292 
	}
}

301 
	$ã°_kØ_t˝_ch™√l_io_îr‹_Êow
(**
°©e
)

303 ()
°©e
;

305 
kØ_îr‹_t
 
îr‹_code
;

307 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√l
 = 
NULL
;

308 
ch™√l
 = 
	`KAA_CALLOC
(1,(
kØ_å™•‹t_ch™√l_öãrÁ˚_t
));

310 
kØ_exãnsi⁄_id
 
›î©i⁄_£rvi˚s
[] = {

311 
KAA_EXTENSION_PROFILE
,

312 
KAA_EXTENSION_USER
,

313 
KAA_EXTENSION_EVENT
,

314 
KAA_EXTENSION_LOGGING
};

316 
îr‹_code
 = 
	`kØ_t˝_ch™√l_¸óã
(
ch™√l
, 
loggî
, 
›î©i⁄_£rvi˚s
, 4);

317 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

319 
	`ã°_£t_ac˚ss_poöt
(
ch™√l
);

321 
	`ã°_check_ch™√l_auth
(
ch™√l
);

325 
ac˚ss_poöt_ã°_öfo
.
sockë_c⁄√˘ög_îr‹_s˚«rio
 = 
åue
;

326 
ac˚ss_poöt_ã°_öfo
.
boŸ°øp_m™agî_⁄_ac˚ss_poöt_Áûed
 = 
Ál£
;

327 
îr‹_code
 = 
	`kØ_t˝_ch™√l_¥o˚ss_evít
(
ch™√l
, 
FD_READ
);

328 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

329 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
sockë_disc⁄√˘ed_ˇŒback
, 
åue
);

330 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
sockë_disc⁄√˘ed_˛o£d
, 
åue
);

331 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
boŸ°øp_m™agî_⁄_ac˚ss_poöt_Áûed
, 
åue
);

333 
kØ_fd_t
 
fd
 = -1;

335 
îr‹_code
 = 
	`kØ_t˝_ch™√l_gë_des¸ùt‹
(
ch™√l
, &
fd
);

336 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

338 
	`ASSERT_EQUAL
(
fd
, -1);

341 
ch™√l
->
	`de°roy
(ch™√l->
c⁄ãxt
);

343 
	`KAA_FREE
(
ch™√l
);

344 
	}
}

352 
	$ã°_kØ_t˝_ch™√l_auth_doubÀ_sync_Êow
(**
°©e
)

354 ()
°©e
;

356 
kØ_îr‹_t
 
îr‹_code
;

358 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√l
 = 
NULL
;

359 
ch™√l
 = 
	`KAA_CALLOC
(1, (
kØ_å™•‹t_ch™√l_öãrÁ˚_t
));

361 
kØ_exãnsi⁄_id
 
›î©i⁄_£rvi˚s
[] = {

362 
KAA_EXTENSION_PROFILE
,

363 
KAA_EXTENSION_USER
,

364 
KAA_EXTENSION_EVENT
,

365 
KAA_EXTENSION_LOGGING
};

367 
îr‹_code
 = 
	`kØ_t˝_ch™√l_¸óã
(
ch™√l
, 
loggî
, 
›î©i⁄_£rvi˚s
, 4);

368 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

370 
	`ã°_£t_ac˚ss_poöt
(
ch™√l
);

373 
ac˚ss_poöt_ã°_öfo
.
sockë_c⁄√˘ed
 = 
Ál£
;

374 
ac˚ss_poöt_ã°_öfo
.
sockë_c⁄√˘ed_ˇŒback
 = 
Ál£
;

375 
ac˚ss_poöt_ã°_öfo
.
fûl_c⁄√˘_mesßge
 = 
Ál£
;

376 
ac˚ss_poöt_ã°_öfo
.
ªque°_c⁄√˘
 = 
Ál£
;

377 
ac˚ss_poöt_ã°_öfo
.
auth_∑ckë_wrôãn
 = 
Ál£
;

378 
ac˚ss_poöt_ã°_öfo
.
c⁄«ck_ªad
 = 
Ál£
;

382 
îr‹_code
 = 
	`kØ_t˝_ch™√l_¥o˚ss_evít
(
ch™√l
, 
FD_WRITE
);

383 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

384 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
sockë_c⁄√˘ed
, 
åue
);

385 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
sockë_c⁄√˘ed_ˇŒback
, 
åue
);

386 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
fûl_c⁄√˘_mesßge
, 
åue
);

387 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
ªque°_c⁄√˘
, 
åue
);

390 
	`CHECK_SOCKET_RW
(
ch™√l
, 
åue
,Årue);

393 
ac˚ss_poöt_ã°_öfo
.
fûl_c⁄√˘_mesßge
 = 
Ál£
;

394 
ac˚ss_poöt_ã°_öfo
.
ªque°_c⁄√˘
 = 
Ál£
;

397 
kØ_exãnsi⁄_id
 
£rvi˚s1
[] = {
KAA_EXTENSION_PROFILE
, 
KAA_EXTENSION_USER
};

398 
ch™√l
->
	`sync_h™dÀr
(ch™√l->
c⁄ãxt
, 
£rvi˚s1
, 2);

399 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
fûl_c⁄√˘_mesßge
, 
Ál£
);

400 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
ªque°_c⁄√˘
, 
Ál£
);

403 
îr‹_code
 = 
	`kØ_t˝_ch™√l_¥o˚ss_evít
(
ch™√l
, 
FD_WRITE
);

404 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

405 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
auth_∑ckë_wrôãn
, 
åue
);

406 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
fûl_c⁄√˘_mesßge
, 
Ál£
);

407 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
ªque°_c⁄√˘
, 
Ál£
);

410 
	`CHECK_SOCKET_RW
(
ch™√l
, 
åue
, 
Ál£
);

413 
ac˚ss_poöt_ã°_öfo
.
fûl_c⁄√˘_mesßge
 = 
Ál£
;

414 
ac˚ss_poöt_ã°_öfo
.
ªque°_c⁄√˘
 = 
Ál£
;

415 
ac˚ss_poöt_ã°_öfo
.
auth_∑ckë_wrôãn
 = 
Ál£
;

417 
kØ_exãnsi⁄_id
 
£rvi˚s2
[] = {
KAA_EXTENSION_PROFILE
, 
KAA_EXTENSION_EVENT
};

418 
ch™√l
->
	`sync_h™dÀr
(ch™√l->
c⁄ãxt
, 
£rvi˚s2
, 2);

419 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
fûl_c⁄√˘_mesßge
, 
Ál£
);

420 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
ªque°_c⁄√˘
, 
Ál£
);

423 
	`CHECK_SOCKET_RW
(
ch™√l
, 
åue
, 
Ál£
);

426 
îr‹_code
 = 
	`kØ_t˝_ch™√l_¥o˚ss_evít
(
ch™√l
, 
FD_READ
);

427 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

428 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
c⁄«ck_ªad
, 
åue
);

433 
	`CHECK_SOCKET_RW
(
ch™√l
, 
åue
,Årue);

436 
kØ_exãnsi⁄_id
 
£rvi˚s3
[] = {
KAA_EXTENSION_LOGGING
};

437 
ch™√l
->
	`sync_h™dÀr
(ch™√l->
c⁄ãxt
, 
£rvi˚s3
, 1);

441 
	`CHECK_SOCKET_RW
(
ch™√l
, 
åue
,Årue);

443 
	`ã°_sync_exch™ge
(
ch™√l
);

445 
	`ã°_£nd_disc⁄√˘
(
ch™√l
);

447 
ch™√l
->
	`de°roy
(ch™√l->
c⁄ãxt
);

449 
	`KAA_FREE
(
ch™√l
);

450 
	}
}

453 
	$ã°_sync_exch™ge
(
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√l
)

455 
	`ASSERT_NOT_NULL
(
ch™√l
);

457 
ac˚ss_poöt_ã°_öfo
.
kØsync_wrôe
 = 
Ál£
;

458 
ac˚ss_poöt_ã°_öfo
.
kØsync_ªad
 = 
Ál£
;

459 
ac˚ss_poöt_ã°_öfo
.
kØsync_¥o˚s£d
 = 
Ál£
;

462 
ac˚ss_poöt_ã°_öfo
.
kØsync_ªad_s˚«rio
 = 
åue
;

463 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_t˝_ch™√l_¥o˚ss_evít
(
ch™√l
, 
FD_WRITE
);

464 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

465 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
kØsync_wrôe
, 
åue
);

469 
	`CHECK_SOCKET_RW
(
ch™√l
, 
åue
, 
Ál£
);

472 
îr‹_code
 = 
	`kØ_t˝_ch™√l_¥o˚ss_evít
(
ch™√l
, 
FD_READ
);

473 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

474 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
kØsync_ªad
, 
åue
);

475 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
kØsync_¥o˚s£d
, 
åue
);

477 
	}
}

479 
	$ã°_£nd_disc⁄√˘
(
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√l
)

481 
	`ASSERT_NOT_NULL
(
ch™√l
);

483 
ac˚ss_poöt_ã°_öfo
.
disc⁄√˘_ªad
 = 
Ál£
;

484 
ac˚ss_poöt_ã°_öfo
.
sockë_disc⁄√˘ed_ˇŒback
 = 
Ál£
;

485 
ac˚ss_poöt_ã°_öfo
.
sockë_disc⁄√˘ed_˛o£d
 = 
Ál£
;

486 
ac˚ss_poöt_ã°_öfo
.
boŸ°øp_m™agî_⁄_ac˚ss_poöt_Áûed
 = 
Ál£
;

492 
	`CHECK_SOCKET_RW
(
ch™√l
, 
åue
, 
Ál£
);

495 
ac˚ss_poöt_ã°_öfo
.
disc⁄√˘_¸óã_n⁄_s˚«rio
 = 
åue
;

496 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_t˝_ch™√l_¥o˚ss_evít
(
ch™√l
, 
FD_READ
);

497 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

498 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
disc⁄√˘_ªad
, 
åue
);

500 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
sockë_disc⁄√˘ed_ˇŒback
, 
åue
);

501 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
sockë_disc⁄√˘ed_˛o£d
, 
åue
);

502 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
boŸ°øp_m™agî_⁄_ac˚ss_poöt_Áûed
, 
åue
);

503 
	}
}

505 
	$ã°_check_ch™√l_auth
(
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√l
)

507 
	`ASSERT_NOT_NULL
(
ch™√l
);

509 
ac˚ss_poöt_ã°_öfo
.
sockë_c⁄√˘ed
 = 
Ál£
;

510 
ac˚ss_poöt_ã°_öfo
.
sockë_c⁄√˘ed_ˇŒback
 = 
Ál£
;

511 
ac˚ss_poöt_ã°_öfo
.
fûl_c⁄√˘_mesßge
 = 
Ál£
;

512 
ac˚ss_poöt_ã°_öfo
.
ªque°_c⁄√˘
 = 
Ál£
;

513 
ac˚ss_poöt_ã°_öfo
.
auth_∑ckë_wrôãn
 = 
Ál£
;

514 
ac˚ss_poöt_ã°_öfo
.
c⁄«ck_ªad
 = 
Ál£
;

518 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_t˝_ch™√l_¥o˚ss_evít
(
ch™√l
, 
FD_WRITE
);

519 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

520 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
sockë_c⁄√˘ed
, 
åue
);

521 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
sockë_c⁄√˘ed_ˇŒback
, 
åue
);

522 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
fûl_c⁄√˘_mesßge
, 
åue
);

523 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
ªque°_c⁄√˘
, 
åue
);

526 
	`CHECK_SOCKET_RW
(
ch™√l
, 
åue
,Årue);

529 
îr‹_code
 = 
	`kØ_t˝_ch™√l_¥o˚ss_evít
(
ch™√l
, 
FD_WRITE
);

530 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

531 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
auth_∑ckë_wrôãn
, 
åue
);

534 
	`CHECK_SOCKET_RW
(
ch™√l
, 
åue
, 
Ál£
);

538 
îr‹_code
 = 
	`kØ_t˝_ch™√l_¥o˚ss_evít
(
ch™√l
, 
FD_READ
);

539 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

540 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
c⁄«ck_ªad
, 
åue
);

545 
	`CHECK_SOCKET_RW
(
ch™√l
, 
åue
, 
Ál£
);

547 
	}
}

549 
	$ã°_£t_ac˚ss_poöt
(
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√l
)

551 
	`ASSERT_NOT_NULL
(
ch™√l
);

553 
kØ_å™•‹t_c⁄ãxt_t
 
å™•‹t_c⁄ãxt
;

554 
å™•‹t_c⁄ãxt
.
kØ_c⁄ãxt
 = (
kØ_c⁄ãxt_t
*)
	`ˇŒoc
(1, (kaa_context_t));

555 
å™•‹t_c⁄ãxt
.
kØ_c⁄ãxt
->
∂©f‹m_¥Ÿocﬁ
 = (
kØ_∂©f‹m_¥Ÿocﬁ_t
 *)
CONNECTION_DATA
;

556 
å™•‹t_c⁄ãxt
.
kØ_c⁄ãxt
->
boŸ°øp_m™agî
 = (
kØ_boŸ°øp_m™agî_t
 *)
CONNECTION_DATA
;

558 
kØ_îr‹_t
 
îr‹_code
 = 
ch™√l
->
	`öô
(ch™√l->
c⁄ãxt
, &
å™•‹t_c⁄ãxt
);

559 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

561 
îr‹_code
 = 
	`kØ_t˝_ch™√l_£t_sockë_evíts_ˇŒback
(
ch™√l
, 
kØ_t˝_ch™√l_evít_ˇŒback_‚
, channel);

562 
	`as£π_öt_equÆ
(
KAA_ERR_NONE
, 
îr‹_code
);

565 
kØ_ac˚ss_poöt_t
 
ac˚ss_poöt
;

566 
ac˚ss_poöt
.
id
 = 10;

567 
ac˚ss_poöt
.
c⁄√˘i⁄_d©a
 = (*)
CONNECTION_DATA
;

568 
ac˚ss_poöt
.
c⁄√˘i⁄_d©a_Àn
 = (
CONNECTION_DATA
);

570 
	`ª£t_ac˚ss_poöt_ã°_öfo
();

572 
îr‹_code
 = 
ch™√l
->
	`£t_ac˚ss_poöt
(ch™√l->
c⁄ãxt
, &
ac˚ss_poöt
);

573 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

574 
îr‹_code

	`kØ_t˝_ch™√l_check_kì∑live
(
ch™√l
);

575 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

577 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
gëho°byaddr_ªque°ed
, 
åue
);

579 
	`ASSERT_EQUAL
(
ac˚ss_poöt_ã°_öfo
.
√w_sockë_¸óãd
, 
åue
);

581 
kØ_fd_t
 
fd
 = -1;

583 
îr‹_code
 = 
	`kØ_t˝_ch™√l_gë_des¸ùt‹
(
ch™√l
, &
fd
);

584 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

586 
	`ASSERT_EQUAL
(
fd
, 
ACCESS_POINT_SOCKET_FD
);

588 
ac˚ss_poöt_ã°_öfo
.
fd
 = fd;

593 
	`CHECK_SOCKET_RW
(
ch™√l
, 
Ál£
, 
åue
);

594 
	}
}

596 
kØ_îr‹_t
 
	$kØ_boŸ°øp_m™agî_⁄_ac˚ss_poöt_Áûed
(
kØ_boŸ°øp_m™agî_t
 *
£lf


597 , 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 *
¥Ÿocﬁ_id


598 , 
kØ_£rvî_ty≥_t
 
ty≥
)

600 ()
£lf
;

601 
	`ASSERT_EQUAL
(
¥Ÿocﬁ_id
->
id
, 0x56c8ff92);

602 
	`ASSERT_EQUAL
(
¥Ÿocﬁ_id
->
vîsi⁄
, 1);

603 
	`ASSERT_EQUAL
(
ty≥
, 
KAA_SERVER_OPERATIONS
);

604 
ac˚ss_poöt_ã°_öfo
.
boŸ°øp_m™agî_⁄_ac˚ss_poöt_Áûed
 = 
åue
;

605  
KAA_ERR_NONE
;

606 
	}
}

608 
kØ_îr‹_t
 
	$kØ_t˝_ch™√l_evít_ˇŒback_‚
(*
c⁄ãxt
, 
kØ_t˝_ch™√l_evít_t
 
evít_ty≥
, 
kØ_fd_t
 
fd
)

610 ()
c⁄ãxt
;

611 i‡(
fd
 !
ac˚ss_poöt_ã°_öfo
.fd) {

612  
KAA_ERR_BADPARAM
;

614 
evít_ty≥
) {

615 
SOCKET_CONNECTED
:

616 
ac˚ss_poöt_ã°_öfo
.
sockë_c⁄√˘ed_ˇŒback
 = 
åue
;

618 
SOCKET_DISCONNECTED
:

619 
ac˚ss_poöt_ã°_öfo
.
sockë_disc⁄√˘ed_ˇŒback
 = 
åue
;

621 
SOCKET_CONNECTION_ERROR
:

622 
ac˚ss_poöt_ã°_öfo
.
sockë_c⁄√˘ög_îr‹_ˇŒback
 = 
åue
;

625  
KAA_ERR_NONE
;

626 
	}
}

628 
kØt˝_îr‹_t
 
	$kØt˝_gë_ªque°_c⁄√˘
(c⁄° 
kØt˝_c⁄√˘_t
 *
mesßge


629 , *
buf


630 , 
size_t
 *
buf_size
)

632 i‡(
mesßge
->
¥Ÿocﬁ_«me_Àngth
 !
KAA_TCP_NAME_LENGTH
) {

633  
KAATCP_ERR_BAD_PARAM
;

635 i‡(
mesßge
->
¥Ÿocﬁ_vîsi⁄
 !
PROTOCOL_VERSION
) {

636  
KAATCP_ERR_BAD_PARAM
;

638 i‡(
mesßge
->
√xt_±‹ocﬁ_id
 != 0x3553c66f) {

639  
KAATCP_ERR_BAD_PARAM
;

641 i‡(
mesßge
->
c⁄√˘_Êags
 !
KAA_CONNECT_FLAGS
) {

642  
KAATCP_ERR_BAD_PARAM
;

644 i‡(
mesßge
->
kìp_Æive
 !(
KEEPALIVE
 * 1.2)) {

645  
KAATCP_ERR_BAD_PARAM
;

647 i‡(
mesßge
->
sync_ªque°
 && mesßge->
sync_ªque°_size
 =(
CONNECT_PACK
)) {

648 i‡(!
	`memcmp
(
CONNECT_PACK
, 
mesßge
->
sync_ªque°
, mesßge->
sync_ªque°_size
)) {

649 *
buf_size
 = 0;

650 
	`mem˝y
(
buf
, 
CONNECT_HEAD
, (CONNECT_HEAD));

651 *
buf_size
 +(
CONNECT_HEAD
);

652 
	`mem˝y
(
buf
+(*
buf_size
), 
mesßge
->
sync_ªque°
, mesßge->
sync_ªque°_size
);

653 *
buf_size
 +
mesßge
->
sync_ªque°_size
;

654 
ac˚ss_poöt_ã°_öfo
.
ªque°_c⁄√˘
 = 
åue
;

655  
KAATCP_ERR_NONE
;

658  
KAATCP_ERR_BAD_PARAM
;

659 
	}
}

661 
kØt˝_îr‹_t
 
	$kØt˝_fûl_c⁄√˘_mesßge
(
uöt16_t
 
kì∑live
, 
uöt32_t
 
√xt_¥Ÿocﬁ_id


662 , *
sync_ªque°
, 
size_t
 
sync_ªque°_size


663 , *
£ssi⁄_key
, 
size_t
 
£ssi⁄_key_size


664 , *
sig«tuª
, 
size_t
 
sig«tuª_size


665 , 
kØt˝_c⁄√˘_t
 *
mesßge
)

667 i‡(
kì∑live
 !(
KEEPALIVE
 * 1.2)) {

668  
KAATCP_ERR_BAD_PARAM
;

670 i‡(
√xt_¥Ÿocﬁ_id
 != 0x3553c66f) {

671  
KAATCP_ERR_BAD_PARAM
;

673 i‡(
sync_ªque°
 && 
sync_ªque°_size
 =(
CONNECT_PACK
)) {

674 i‡(!
	`memcmp
(
CONNECT_PACK
, 
sync_ªque°
, 
sync_ªque°_size
)) {

675 
	`mem£t
(
mesßge
, 0, (
kØt˝_c⁄√˘_t
));

677 
mesßge
->
¥Ÿocﬁ_«me_Àngth
 = 
KAA_TCP_NAME_LENGTH
;

678 
	`mem˝y
(
mesßge
->
¥Ÿocﬁ_«me
, 
KAA_TCP_NAME
, 
KAA_TCP_NAME_LENGTH
);

680 
mesßge
->
¥Ÿocﬁ_vîsi⁄
 = 
PROTOCOL_VERSION
;

681 
mesßge
->
c⁄√˘_Êags
 = 
KAA_CONNECT_FLAGS
;

683 
mesßge
->
√xt_±‹ocﬁ_id
 = 
√xt_¥Ÿocﬁ_id
;

685 i‡(
£ssi⁄_key
) {

686 
mesßge
->
£ssi⁄_key
 = session_key;

687 
mesßge
->
£ssi⁄_key_size
 = session_key_size;

688 
mesßge
->
£ssi⁄_key_Êags
 = 
KAA_CONNECT_KEY_AES_RSA
;

690 i‡(
sig«tuª
) {

691 
mesßge
->
sig«tuª
 = signature;

692 
mesßge
->
sig«tuª_size
 = signature_size;

693 
mesßge
->
sig«tuª_Êags
 = 
KAA_CONNECT_SIGNATURE_SHA1
;

696 
mesßge
->
kìp_Æive
 = 
kì∑live
;

698 
mesßge
->
sync_ªque°_size
 = sync_request_size;

699 
mesßge
->
sync_ªque°
 = sync_request;

701 
ac˚ss_poöt_ã°_öfo
.
fûl_c⁄√˘_mesßge
 = 
åue
;

703  
KAATCP_ERR_NONE
;

706  
KAATCP_ERR_BAD_PARAM
;

707 
	}
}

709 
kØ_îr‹_t
 
	$kØ_∂©f‹m_¥Ÿocﬁ_¥o˚ss_£rvî_sync
(
kØ_∂©f‹m_¥Ÿocﬁ_t
 *
£lf


710 , c⁄° *
buf„r


711 , 
size_t
 
buf„r_size
)

713 ()
£lf
;

714 ()
buf„r_size
;

715 
	`KAA_RETURN_IF_NIL
(
buf„r
, 
KAA_ERR_BADPARAM
);

717 i‡(!
	`memcmp
(
buf„r
, 
KAASYNC_OP_MESSAGE
, 
	`°æí
(KAASYNC_OP_MESSAGE))) {

718 
ac˚ss_poöt_ã°_öfo
.
kØsync_¥o˚s£d
 = 
åue
;

719  
KAA_ERR_NONE
;

721  
KAA_ERR_BADPARAM
;

722 
	}
}

724 
kØ_îr‹_t
 
	$kØ_∂©f‹m_¥Ÿocﬁ_Æloc_£rülize_˛õ¡_sync
(
kØ_∂©f‹m_¥Ÿocﬁ_t
 *
£lf
,

725 c⁄° 
exãnsi⁄_id
 *
£rvi˚s
, 
size_t
 
£rvi˚s_cou¡
,

726 **
buf„r
, 
size_t
 *
buf„r_size
)

729 i‡(
£rvi˚s_cou¡
 == 4

730 && 
£rvi˚s
[0] =
KAA_EXTENSION_PROFILE


731 && 
£rvi˚s
[1] =
KAA_EXTENSION_USER


732 && 
£rvi˚s
[2] =
KAA_EXTENSION_EVENT


733 && 
£rvi˚s
[3] =
KAA_EXTENSION_LOGGING
) {

734 *
Æloc_buf„r
 = 
	`KAA_MALLOC
((
CONNECT_PACK
));

735 i‡(
Æloc_buf„r
) {

736 
	`mem˝y
(
Æloc_buf„r
, 
CONNECT_PACK
, (CONNECT_PACK));

737 *
buf„r
 = 
Æloc_buf„r
;

738 *
buf„r_size
 = (
CONNECT_PACK
);

739  
KAA_ERR_NONE
;

743  
KAA_ERR_BADPARAM
;

744 
	}
}

747 
ext_t˝_sockë_°©e_t
 
	$ext_t˝_utûs_t˝_sockë_check
(
kØ_fd_t
 
fd
, c⁄° 
kØ_sockaddr_t
 *
de°ö©i⁄
, 
kØ_sockÀn_t
 
de°ö©i⁄_size
)

750 i‡(
fd
 =
ACCESS_POINT_SOCKET_FD
) {

751 *
d°
 = (*)
de°ö©i⁄
;

752 if(!
	`memcmp
(
d°
, 
DESTINATION_SOCKADDR
, 
de°ö©i⁄_size
)) {

753 i‡(
ac˚ss_poöt_ã°_öfo
.
sockë_c⁄√˘ög_îr‹_s˚«rio
) {

754  
KAA_TCP_SOCK_ERROR
;

756 
ac˚ss_poöt_ã°_öfo
.
sockë_c⁄√˘ed
 = 
åue
;

760  
KAA_TCP_SOCK_CONNECTED
;

761 
	}
}

763 
ext_t˝_utûs_fun˘i⁄_ªtu∫_°©e_t
 
	$ext_t˝_utûs_gëaddrbyho°
(
kØ_dns_ªsﬁve_li°íî_t
 *
ªsﬁve_li°íî
, c⁄° 
kØ_dns_ªsﬁve_öfo_t
 *
ªsﬁve_¥›s
, 
kØ_sockaddr_t
 *
ªsu…
, 
kØ_sockÀn_t
 *
ªsu…_size
)

765 ()
ªsﬁve_li°íî
;

766 
	`KAA_RETURN_IF_NIL4
(
ªsﬁve_¥›s
,Ñesﬁve_¥›s->
ho°«me
, 
ªsu…
, 
ªsu…_size
, 
RET_STATE_VALUE_ERROR
);

767 i‡(*
ªsu…_size
 < (
sockaddr_ö
))

768  
RET_STATE_BUFFER_NOT_ENOUGH
;

771 
ho°«me_°r
[
ªsﬁve_¥›s
->
ho°«me_Àngth
 + 1];

772 
	`mem˝y
(
ho°«me_°r
, 
ªsﬁve_¥›s
->
ho°«me
,Ñesﬁve_¥›s->
ho°«me_Àngth
);

773 
ho°«me_°r
[
ªsﬁve_¥›s
->
ho°«me_Àngth
] = '\0';

775 
	`KAA_LOG_INFO
(
loggî
,
KAA_ERR_NONE
,"gëaddrbyho°(ËHo°«me=%s:%d", 
ho°«me_°r
, 
ªsﬁve_¥›s
->
p‹t
);

778 
addröfo
 
höts
;

779 
	`mem£t
(&
höts
, 0 , (
addröfo
));

780 
höts
.
ai_sockty≥
 = 
SOCK_STREAM
;

781 i‡(*
ªsu…_size
 < (
sockaddr_ö6
))

782 
höts
.
ai_Ámûy
 = 
AF_INET
;

784 
addröfo
 *
ªsﬁve_ªsu…
 = 
NULL
;

785 
ªsﬁve_îr‹
 = 0;

787 i‡(
ªsﬁve_¥›s
->
p‹t
) {

788 
p‹t_°r
[6];

789 
	`¢¥ötf
(
p‹t_°r
, 6, "%u", 
ªsﬁve_¥›s
->
p‹t
);

790 
ªsﬁve_îr‹
 = 
	`gëaddröfo
(
ho°«me_°r
, 
p‹t_°r
, &
höts
, &
ªsﬁve_ªsu…
);

792 
ªsﬁve_îr‹
 = 
	`gëaddröfo
(
ho°«me_°r
, 
NULL
, &
höts
, &
ªsﬁve_ªsu…
);

795 i‡(
ªsﬁve_îr‹
 || !
ªsﬁve_ªsu…
)

796  
RET_STATE_VALUE_ERROR
;

798 i‡(
ªsﬁve_ªsu…
->
ai_addæí
 > *
ªsu…_size
) {

799 
	`‰ìaddröfo
(
ªsﬁve_ªsu…
);

800  
RET_STATE_BUFFER_NOT_ENOUGH
;

803 
	`mem˝y
(
ªsu…
, 
ªsﬁve_ªsu…
->
ai_addr
,Ñesﬁve_ªsu…->
ai_addæí
);

804 *
ªsu…_size
 = 
ªsﬁve_ªsu…
->
ai_addæí
;

805 
	`‰ìaddröfo
(
ªsﬁve_ªsu…
);

807 
ac˚ss_poöt_ã°_öfo
.
gëho°byaddr_ªque°ed
 = 
åue
;

809  
RET_STATE_VALUE_READY
;

810 
	}
}

812 
kØ_îr‹_t
 
	$ext_t˝_utûs_t˝_sockë_˛o£
(
kØ_fd_t
 
fd
)

814 i‡(
fd
 !
ac˚ss_poöt_ã°_öfo
.fd) {

815  
KAA_ERR_BADPARAM
;

817 
ac˚ss_poöt_ã°_öfo
.
sockë_disc⁄√˘ed_˛o£d
 = 
åue
;

818  
KAA_ERR_NONE
;

819 
	}
}

821 
ext_t˝_sockë_io_îr‹s_t
 
	$ext_t˝_utûs_t˝_sockë_ªad
(
kØ_fd_t
 
fd
, *
buf„r
, 
size_t
 
buf„r_size
, size_à*
byãs_ªad
)

823 ()
buf„r_size
;

824 
	`KAA_RETURN_IF_NIL
(
buf„r
,
KAA_TCP_SOCK_IO_ERROR
);

826 i‡(
fd
 !
ac˚ss_poöt_ã°_öfo
.fd) {

827  
KAA_TCP_SOCK_IO_ERROR
;

830 i‡(
ac˚ss_poöt_ã°_öfo
.
sockë_c⁄√˘ög_îr‹_s˚«rio
) {

831 *
byãs_ªad
 = 0;

832  
KAA_TCP_SOCK_IO_ERROR
;

833 } if(
ac˚ss_poöt_ã°_öfo
.
disc⁄√˘_¸óã_n⁄_s˚«rio
) {

834 
	`mem˝y
(
buf„r
, 
DISCONNECT_NONE
, (DISCONNECT_NONE));

835 *
byãs_ªad
 = (
DISCONNECT_NONE
);

836 
ac˚ss_poöt_ã°_öfo
.
disc⁄√˘_ªad
 = 
åue
;

837 } i‡(!
ac˚ss_poöt_ã°_öfo
.
c⁄«ck_ªad
) {

838 
	`mem˝y
(
buf„r
, 
CONNACK
, (CONNACK));

839 *
byãs_ªad
 = (
CONNACK
);

840 
ac˚ss_poöt_ã°_öfo
.
c⁄«ck_ªad
 = 
åue
;

841 } i‡(!
ac˚ss_poöt_ã°_öfo
.
kØsync_ªad
) {

842 
	`mem˝y
(
buf„r
, 
KAASYNC_OP
, (KAASYNC_OP));

843 *
byãs_ªad
 = (
KAASYNC_OP
);

844 
ac˚ss_poöt_ã°_öfo
.
kØsync_ªad
 = 
åue
;

847  
KAA_TCP_SOCK_IO_OK
;

848 
	}
}

850 
ext_t˝_sockë_io_îr‹s_t
 
	$ext_t˝_utûs_t˝_sockë_wrôe
(
kØ_fd_t
 
fd
, c⁄° *
buf„r
, 
size_t
 
buf„r_size
, size_à*
byãs_wrôãn
)

852 
	`KAA_RETURN_IF_NIL
(
buf„r
,
KAA_TCP_SOCK_IO_ERROR
);

854 i‡(
fd
 !
ac˚ss_poöt_ã°_öfo
.fd) {

855  
KAA_TCP_SOCK_IO_ERROR
;

858 i‡(
ac˚ss_poöt_ã°_öfo
.
kØsync_ªad_s˚«rio
) {

859 i‡(!
	`memcmp
(
buf„r
, 
KAASYNC_OP_SERV
, (KAASYNC_OP_SERV))) {

860 
ac˚ss_poöt_ã°_öfo
.
kØsync_wrôe
 = 
åue
;

861 *
byãs_wrôãn
 = (
KAASYNC_OP_SERV
);

862  
KAA_TCP_SOCK_IO_OK
;

865 *
byãs_wrôãn
 = 
buf„r_size
;

866  
KAA_TCP_SOCK_IO_OK
;

867 } i‡(!
ac˚ss_poöt_ã°_öfo
.
auth_∑ckë_wrôãn
) {

868 i‡(
buf„r_size
 !((
CONNECT_HEAD
Ë+ (
CONNECT_PACK
))) {

869  
KAA_TCP_SOCK_IO_ERROR
;

871 *
byãs_wrôãn
 = 0;

872 i‡(!
	`memcmp
(
buf„r
, 
CONNECT_HEAD
, (CONNECT_HEAD))) {

873 i‡(!
	`memcmp
(
buf„r
+(
CONNECT_HEAD
), 
CONNECT_PACK
, (CONNECT_PACK))) {

874 
ac˚ss_poöt_ã°_öfo
.
auth_∑ckë_wrôãn
 = 
åue
;

875 *
byãs_wrôãn
 = (
CONNECT_HEAD
Ë+ (
CONNECT_PACK
);

876  
KAA_TCP_SOCK_IO_OK
;

879 } i‡(!
ac˚ss_poöt_ã°_öfo
.
sockë_disc⁄√˘ed_wrôe
) {

880 i‡(
buf„r_size
 !(
DISCONNECT_MESSAGE
)) {

881  
KAA_TCP_SOCK_IO_ERROR
;

883 i‡(!
	`memcmp
(
buf„r
, 
DISCONNECT_MESSAGE
, (DISCONNECT_MESSAGE))) {

884 
ac˚ss_poöt_ã°_öfo
.
sockë_disc⁄√˘ed_wrôe
 = 
åue
;

885 *
byãs_wrôãn
 = (
DISCONNECT_MESSAGE
);

886  
KAA_TCP_SOCK_IO_OK
;

890  
KAA_TCP_SOCK_IO_ERROR
;

891 
	}
}

893 
kØ_îr‹_t
 
	$ext_t˝_utûs_›í_t˝_sockë
(
kØ_fd_t
 *
fd
, c⁄° 
kØ_sockaddr_t
 *
de°ö©i⁄
, 
kØ_sockÀn_t
 
de°ö©i⁄_size
)

895 
	`KAA_RETURN_IF_NIL3
(
fd
, 
de°ö©i⁄
, 
de°ö©i⁄_size
, 
KAA_ERR_BADPARAM
);

897 *
d°
 = (*)
de°ö©i⁄
;

899 if(!
	`memcmp
(
d°
, 
DESTINATION_SOCKADDR
, 
de°ö©i⁄_size
)) {

900 
ac˚ss_poöt_ã°_öfo
.
√w_sockë_¸óãd
 = 
åue
;

901 *
fd
 = 
ACCESS_POINT_SOCKET_FD
;

902  
KAA_ERR_NONE
;

905  
KAA_ERR_BADPARAM
;

906 
	}
}

908 
	$ã°_öô
()

910 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_log_¸óã
(&
loggî
, 
KAA_MAX_LOG_MESSAGE_LENGTH
, 
KAA_MAX_LOG_LEVEL
, 
NULL
);

911 i‡(
îr‹
 || !
loggî
)

912  
îr‹
;

916 
	}
}

918 
	$ã°_deöô
()

920 
	`kØ_log_de°roy
(
loggî
);

922 
	}
}

924 
KAA_SUITE_MAIN
(
Log
, 
ã°_öô
, 
ã°_deöô
,

925 
	$KAA_TEST_CASE
(
¸óã_kØ_t˝_ch™√l
, 
ã°_¸óã_kØ_t˝_ch™√l
)

926 
	$KAA_TEST_CASE
(
¸óã_kØ_t˝_ch™√l_suc˚ss_Êow
, 
ã°_kØ_t˝_ch™√l_suc˚ss_Êow
)

927 
	$KAA_TEST_CASE
(
¸óã_kØ_t˝_ch™√l_sync_Êow
, 
ã°_kØ_t˝_ch™√l_sync_Êow
)

928 
	$KAA_TEST_CASE
(
¸óã_kØ_t˝_ch™√l_io_îr‹_Êow
, 
ã°_kØ_t˝_ch™√l_io_îr‹_Êow
)

929 
	`KAA_TEST_CASE
(
¸óã_kØ_t˝_ch™√l_auth_doubÀ_sync_Êow
, 
ã°_kØ_t˝_ch™√l_auth_doubÀ_sync_Êow
)

	@/var/www/html/debian/gateway/kaa/test/kaa_test.h

17 #i‚de‡
KAA_TEST_H_


18 
	#KAA_TEST_H_


	)

20 
	~<°d¨g.h
>

21 
	~<°ddef.h
>

22 
	~<£tjmp.h
>

23 
	~<cmocka.h
>

29 
	#ASSERT_NOT_NULL
(
P
Ë
	`as£π_±r_nŸ_equÆ
(P, 
NULL
)

	)

30 
	#ASSERT_NULL
(
P
Ë
	`as£π_±r_equÆ
(P, 
NULL
)

	)

31 
	#ASSERT_EQUAL
(
L
, 
R
Ë
	`as£π_öt_equÆ
(L, R)

	)

32 
	#ASSERT_NOT_EQUAL
(
L
, 
R
Ë
	`as£π_öt_nŸ_equÆ
(L, R)

	)

34 
	#ASSERT_TRUE
(
Exp
Ë
	`as£π_åue
(Exp)

	)

35 
	#ASSERT_FALSE
(
Exp
Ë
	`as£π_Ál£
(Exp)

	)

39 
	#KAA_BEGIN_TEST_SUITE
(
SUITE_NAME
, 
INIT_FN
, 
CLEANUP_FN
) \

40 
	`£tup_‚
(**
°©e
) \

42 ()
°©e
; \

43 (*
‚
)(Ë
INIT_FN
; \

44 i‡(
‚
Ë 
	`‚
(); \

48 
	`ã¨down_‚
(**
°©e
) \

50 ()
°©e
; \

51 (*
‚
)(Ë
CLEANUP_FN
; \

52 i‡(
‚
Ë 
	`‚
(); \

55 
	`maö
() \

57 c⁄° 
suôe_«me
[] = #SUITE_NAME; \

58 c⁄° 
CMUnôTe°
 
ã°s
[] = { \

59 

	)

60 
	#KAA_TEST_CASE
(
TEST_NAME
, 
TEST_FN
) \

61 
	`cmocka_unô_ã°
(
TEST_FN
),

	)

66 
	#KAA_RUN_TEST
(
GROUP
, 
NAME
) \

67 
	`cmocka_unô_ã°_£tup_ã¨down
(
GROUP
##
_
##
NAME
##
_ã°
, GROUP##
_group_£tup
, GROUP##
_group_ã¨down
),

	)

69 
	#KAA_END_TEST_SUITE
 \

71  
	`cmocka_run_group_ã°s_«me
(
suôe_«me
, 
ã°s
, 
£tup_‚
, 
ã¨down_‚
); \

72 }

	)

75 
	#KAA_TEST_CASE_EX
(
GROUP
, 
NAME
) \

76 
GROUP
##
_
##
NAME
##
	`_ã°
(**
°©e
)

	)

81 
	#KAA_GROUP_SETUP
(
GROUP
) \

82 
GROUP
##
	`_group_£tup
(**
°©e
)

	)

88 
	#KAA_GROUP_TEARDOWN
(
GROUP
) \

89 
GROUP
##
	`_group_ã¨down
(**
°©e
)

	)

92 
	#KAA_SUITE_MAIN
(
SUITE_NAME
, 
INIT_FN
, 
CLEANUP_FN
, ...) \

93 
	`KAA_BEGIN_TEST_SUITE
(
SUITE_NAME
, 
INIT_FN
, 
CLEANUP_FN
) \

94 
__VA_ARGS__
 \

95 
KAA_END_TEST_SUITE
 \

96 

	)

	@/var/www/html/debian/gateway/kaa/test/kaa_test_external.c

17 
	~<°rög.h
>

18 
	~<°dio.h
>

19 
	~<°döt.h
>

20 
	~<°dboﬁ.h
>

22 
	~"∂©f‹m/ext_°©us.h
"

23 
	~"∂©f‹m/ext_sha.h
"

24 
	~"∂©f‹m/ext_key_utûs.h
"

25 
	~"utûôõs/kØ_mem.h
"

26 
	~"kØ_comm⁄.h
"

28 c⁄° 
uöt8_t
 
	gã°_ï_key
[] = {0x1, 0x2, 0x3, 0x4, 0x5, 0x6, 0x7, 0x8, 0x9, 0xA, 0xB, 0xC, 0xD, 0xE, 0xF, 0x10, 0x11, 0x12, 0x13, 0x14};

30 
	$ext_°©us_ªad
(**
buf„r
, 
size_t
 *
buf„r_size
, 
boﬁ
 *
√eds_dóŒoˇti⁄
)

32 ()
buf„r
;

33 ()
buf„r_size
;

34 ()
√eds_dóŒoˇti⁄
;

35 
	}
}

37 
	$ext_°©us_°‹e
(c⁄° *
buf„r
, 
size_t
 
buf„r_size
)

39 ()
buf„r
;

40 ()
buf„r_size
;

41 
	}
}

43 
	$ext_gë_ídpoöt_public_key
(c⁄° 
uöt8_t
 **
buf„r
, 
size_t
 *
buf„r_size
)

45 *
buf„r
 = 
ã°_ï_key
;

46 *
buf„r_size
 = (
ã°_ï_key
);

47 
	}
}

49 
	$ext_c⁄figuøti⁄_ªad
(**
buf„r
, 
size_t
 *
buf„r_size
, 
boﬁ
 *
√eds_dóŒoˇti⁄
)

51 ()
buf„r
;

52 ()
buf„r_size
;

53 ()
√eds_dóŒoˇti⁄
;

54 
	}
}

56 
	$ext_c⁄figuøti⁄_°‹e
(c⁄° *
buf„r
, 
size_t
 
buf„r_size
)

58 ()
buf„r
;

59 ()
buf„r_size
;

60 
	}
}

	@/var/www/html/debian/gateway/kaa/test/kaatcp/kaatcp_parser_test.c

17 
	~<°dio.h
>

18 
	~<°rög.h
>

19 
	~<°döt.h
>

21 
	~"kØ_ã°.h
"

23 
	~"utûôõs/kØ_mem.h
"

24 
	~"utûôõs/kØ_log.h
"

25 
	~"kØ_¥Ÿocﬁs/kØ_t˝/kØt˝_∑r£r.h
"

29 
uöt8_t
 
	gpög_ª˚ived
 = 0;

30 
uöt8_t
 
	gc⁄«ck_ª˚ived
 = 0;

31 
uöt8_t
 
	gkØsync_ª˚ived
 = 0;

32 
uöt8_t
 
	gdisc⁄√˘_ª˚ived
 = 0;

34 
kØ_loggî_t
 *
	gloggî
 = 
NULL
;

38 
	$c⁄«ck_li°íî
(*
c⁄ãxt
, 
kØt˝_c⁄«ck_t
 
mesßge
)

40 ()
c⁄ãxt
;

42 
c⁄«ck_ª˚ived
 = 1;

43 
	`ASSERT_EQUAL
(
mesßge
.
ªtu∫_code
, 
KAATCP_CONNACK_IDENTIFIER_REJECTED
);

44 
	}
}

46 
	$disc⁄√˘_li°íî
(*
c⁄ãxt
, 
kØt˝_disc⁄√˘_t
 
mesßge
)

48 ()
c⁄ãxt
;

50 
disc⁄√˘_ª˚ived
 = 1;

51 
	`ASSERT_EQUAL
(
mesßge
.
ªas⁄
, 
KAATCP_DISCONNECT_BAD_REQUEST
);

52 
	}
}

54 
	$kØsync_li°íî
(*
c⁄ãxt
, 
kØt˝_kØsync_t
 *
mesßge
)

56 ()
c⁄ãxt
;

58 
kØsync_ª˚ived
 = 1;

60 
	`ASSERT_EQUAL
(
mesßge
->
sync_hódî
.
¥Ÿocﬁ_«me_Àngth
, 6);

61 
	`ASSERT_EQUAL
(
	`°rcmp
(
mesßge
->
sync_hódî
.
¥Ÿocﬁ_«me
, "Kaatcp"), 0);

62 
	`ASSERT_EQUAL
(
mesßge
->
sync_hódî
.
¥Ÿocﬁ_vîsi⁄
, 
PROTOCOL_VERSION
);

64 
	`ASSERT_EQUAL
(
mesßge
->
sync_hódî
.
mesßge_id
, 5);

66 
	`ASSERT_NOT_EQUAL
((
mesßge
->
sync_hódî
.
Êags
 & 
KAA_SYNC_ENCRYPTED_BIT
), 0);

67 
	`ASSERT_EQUAL
((
mesßge
->
sync_hódî
.
Êags
 & 
KAA_SYNC_ZIPPED_BIT
), 0);

68 
	`ASSERT_EQUAL
((
mesßge
->
sync_hódî
.
Êags
 & 
KAA_SYNC_REQUEST_BIT
), 0);

70 
	`ASSERT_EQUAL
(
mesßge
->
sync_ªque°_size
, 1);

71 
	`ASSERT_EQUAL
((
uöt8_t
)
mesßge
->
sync_ªque°
[0], 0xFF);

73 
	`kØt˝_∑r£r_kØsync_de°roy
(
mesßge
);

74 
	}
}

76 
	$pög_li°íî
(*
c⁄ãxt
)

78 ()
c⁄ãxt
;

80 
pög_ª˚ived
 = 1;

81 
	}
}

83 
	$ã°_kØt˝_∑r£r
(**
°©e
)

85 ()
°©e
;

87 
kØt˝_∑r£r_h™dÀrs_t
 
h™dÀrs
 = { 
NULL
, &
c⁄«ck_li°íî
, &
disc⁄√˘_li°íî
, &
kØsync_li°íî
, &
pög_li°íî
 };

88 
kØt˝_∑r£r_t
 
∑r£r
;

90 
∑r£r
.
∑ylﬂd_buf„r_size
 = 1;

91 
∑r£r
.
∑ylﬂd
 = 
	`KAA_CALLOC
’¨£r.
∑ylﬂd_buf„r_size
, ());

93 
kØt˝_îr‹_t
 
rvÆ
 = 
	`kØt˝_∑r£r_öô
(&
∑r£r
, &
h™dÀrs
);

94 
	`ASSERT_EQUAL
(
rvÆ
, 
KAATCP_ERR_NONE
);

96 
uöt8_t
 
c⁄«ck_™d_pög_mesßges
[] = { 0x20, 0x02, 0x00, 0x03, 0xD0, 0x00 };

97 
rvÆ
 = 
	`kØt˝_∑r£r_¥o˚ss_buf„r
(&
∑r£r
, (*)
c⁄«ck_™d_pög_mesßges
, 6);

98 
	`ASSERT_EQUAL
(
rvÆ
, 
KAATCP_ERR_NONE
);

100 
	`ASSERT_NOT_EQUAL
(
pög_ª˚ived
, 0);

101 
	`ASSERT_NOT_EQUAL
(
c⁄«ck_ª˚ived
, 0);

103 
uöt8_t
 
kØ_sync_mesßge
[] = { 0xF0, 0x0D, 0x00, 0x06, 'K', 'a', 'a', 't', 'c', 'p', 0x01, 0x00, 0x05, 0x14, 0xFF };

104 
rvÆ
 = 
	`kØt˝_∑r£r_¥o˚ss_buf„r
(&
∑r£r
, (c⁄° *)
kØ_sync_mesßge
, 15);

105 
	`ASSERT_EQUAL
(
rvÆ
, 
KAATCP_ERR_NONE
);

107 
	`ASSERT_NOT_EQUAL
(
kØsync_ª˚ived
, 0);

109 
disc⁄√˘_mesßge
[] = { 0xE0, 0x02, 0x00, 0x01 };

110 
rvÆ
 = 
	`kØt˝_∑r£r_¥o˚ss_buf„r
(&
∑r£r
, (c⁄° *Ë
disc⁄√˘_mesßge
, 4);

111 
	`ASSERT_EQUAL
(
rvÆ
, 
KAATCP_ERR_NONE
);

113 
	`ASSERT_NOT_EQUAL
(
disc⁄√˘_ª˚ived
, 0);

115 
	`KAA_FREE
(
∑r£r
.
∑ylﬂd
);

116 
	}
}

118 
	$ã°_öô
()

120 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_log_¸óã
(&
loggî
, 
KAA_MAX_LOG_MESSAGE_LENGTH
, 
KAA_MAX_LOG_LEVEL
, 
NULL
);

121 i‡(
îr‹
 || !
loggî
) {

122  
îr‹
;

126 
	}
}

128 
	$ã°_deöô
()

130 
	`kØ_log_de°roy
(
loggî
);

132 
	}
}

134 
KAA_SUITE_MAIN
(
Log
, 
ã°_öô
, 
ã°_deöô


136 
KAA_TEST_CASE
(
kØt˝_∑r£r
, 
ã°_kØt˝_∑r£r
)

	@/var/www/html/debian/gateway/kaa/test/kaatcp/kaatcp_request_test.c

17 
	~<°rög.h
>

18 
	~<°dio.h
>

19 
	~<°döt.h
>

21 
	~"kØ_ã°.h
"

23 
	~"utûôõs/kØ_log.h
"

24 
	~"kØ_¥Ÿocﬁs/kØ_t˝/kØt˝_ªque°.h
"

28 
kØ_loggî_t
 *
	gloggî
 = 
NULL
;

32 
	$ã°_kØt˝_c⁄√˘
(**
°©e
)

34 ()
°©e
;

36 
kØt˝_c⁄√˘_t
 
c⁄√˘
;

37 *
£ssi⁄_key
 = "session_key";

38 *
sig«tuª
 = "signature";

39 *
∑ylﬂd
 = "payload";

40 
kØt˝_îr‹_t
 
rvÆ
 = 
	`kØt˝_fûl_c⁄√˘_mesßge
(200, 0x3553c66f, 
∑ylﬂd
, 
	`°æí
’aylﬂd), 
£ssi⁄_key
, såÀn(£ssi⁄_key), 
sig«tuª
, såÀn(sig«tuª), &
c⁄√˘
);

41 
	`ASSERT_EQUAL
(
rvÆ
, 
KAATCP_ERR_NONE
);

43 
c⁄√˘_buf
[1024];

44 
size_t
 
c⁄√˘_buf_size
 = 1024;

45 
rvÆ
 = 
	`kØt˝_gë_ªque°_c⁄√˘
(&
c⁄√˘
, 
c⁄√˘_buf
, &
c⁄√˘_buf_size
);

46 
	`ASSERT_EQUAL
(
rvÆ
, 
KAATCP_ERR_NONE
);

48 
checkC⁄√˘Hódî
[] = { 0x10, 0x2D, 0x00, 0x06, 'K', 'a', 'a', 't', 'c', 'p', 0x01, 0x02, 0x35, 0x53, 0xC6, 0x6F, 0x11, 0x01, 0x00, 0xC8 };

50 
	`ASSERT_EQUAL
(
c⁄√˘_buf_size
, 47);

51 
	`ASSERT_EQUAL
(
	`memcmp
(
c⁄√˘_buf
, 
checkC⁄√˘Hódî
, 20), 0);

52 
	`ASSERT_EQUAL
(
	`memcmp
(
c⁄√˘_buf
 + 20, 
£ssi⁄_key
, 
	`°æí
(session_key)), 0);

53 
	`ASSERT_EQUAL
(
	`memcmp
(
c⁄√˘_buf
 + 20 + 
	`°æí
(
£ssi⁄_key
), 
sig«tuª
, strlen(signature)), 0);

54 
	`ASSERT_EQUAL
(
	`memcmp
(
c⁄√˘_buf
 + 20 + 
	`°æí
(
£ssi⁄_key
Ë+ såÀn(
sig«tuª
), 
∑ylﬂd
, strlen(payload)), 0);

55 
	}
}

57 
	$ã°_kØt˝_c⁄√˘_wôhout_key
(**
°©e
)

59 ()
°©e
;

61 
kØt˝_c⁄√˘_t
 
c⁄√˘
;

62 *
∑ylﬂd
 = "payload";

63 
kØt˝_îr‹_t
 
rvÆ
 = 
	`kØt˝_fûl_c⁄√˘_mesßge
(200, 0x3553c66f, 
∑ylﬂd
, 
	`°æí
’aylﬂd), 
NULL
, 0, NULL, 0, &
c⁄√˘
);

64 
	`ASSERT_EQUAL
(
rvÆ
, 
KAATCP_ERR_NONE
);

66 
c⁄√˘_buf
[1024];

67 
size_t
 
c⁄√˘_buf_size
 = 1024;

68 
rvÆ
 = 
	`kØt˝_gë_ªque°_c⁄√˘
(&
c⁄√˘
, 
c⁄√˘_buf
, &
c⁄√˘_buf_size
);

69 
	`ASSERT_EQUAL
(
rvÆ
, 
KAATCP_ERR_NONE
);

71 
checkC⁄√˘Hódî
[] = { 0x10, 0x19, 0x00, 0x06, 'K', 'a', 'a', 't', 'c', 'p', 0x01, 0x02, 0x35, 0x53, 0xC6, 0x6F, 0x00, 0x00, 0x00, 0xC8 };

73 
	`ASSERT_EQUAL
(
c⁄√˘_buf_size
, 27);

74 
	`ASSERT_EQUAL
(
	`memcmp
(
c⁄√˘_buf
, 
checkC⁄√˘Hódî
, 20), 0);

75 
	`ASSERT_EQUAL
(
	`memcmp
(
c⁄√˘_buf
 + 20, 
∑ylﬂd
, 
	`°æí
(payload)), 0);

76 
	}
}

78 
	$ã°_kØt˝_disc⁄√˘
(**
°©e
)

80 ()
°©e
;

82 
kØt˝_disc⁄√˘_t
 
disc⁄√˘
;

83 
kØt˝_îr‹_t
 
rvÆ
 = 
	`kØt˝_fûl_disc⁄√˘_mesßge
(
KAATCP_DISCONNECT_BAD_REQUEST
, &
disc⁄√˘
);

84 
	`ASSERT_EQUAL
(
rvÆ
, 
KAATCP_ERR_NONE
);

86 
disc⁄√˘_buf
[5];

87 
size_t
 
disc⁄√˘_buf_size
 = 5;

88 
rvÆ
 = 
	`kØt˝_gë_ªque°_disc⁄√˘
(&
disc⁄√˘
, 
disc⁄√˘_buf
, &
disc⁄√˘_buf_size
);

89 
	`ASSERT_EQUAL
(
rvÆ
, 
KAATCP_ERR_NONE
);

91 
	`ASSERT_EQUAL
(
disc⁄√˘_buf_size
, 4);

93 
disc⁄√˘_mesßge
[] = { 0xE0, 0x02, 0x00, 0x01 };

94 
	`ASSERT_EQUAL
(
	`memcmp
(
disc⁄√˘_mesßge
, 
disc⁄√˘_buf
, 4), 0);

95 
	}
}

97 
	$ã°_kØt˝_kØsync
(**
°©e
)

99 ()
°©e
;

101 
kØt˝_kØsync_t
 
kØsync
;

102 *
∑ylﬂd
 = "payload";

103 
kØt˝_îr‹_t
 
rvÆ
 = 
	`kØt˝_fûl_kØsync_mesßge
(
∑ylﬂd
, 
	`°æí
’aylﬂd), 5, 0, 1, &
kØsync
);

104 
	`ASSERT_EQUAL
(
rvÆ
, 
KAATCP_ERR_NONE
);

106 
kØsync_buf
[128];

107 
size_t
 
kØsync_buf_size
 = 128;

108 
rvÆ
 = 
	`kØt˝_gë_ªque°_kØsync
(&
kØsync
, 
kØsync_buf
, &
kØsync_buf_size
);

109 
	`ASSERT_EQUAL
(
rvÆ
, 
KAATCP_ERR_NONE
);

111 
kØsync_mesßge
[] = { 0xF0, 0x13, 0x00, 0x06, 'K', 'a', 'a', 't', 'c', 'p', 0x01, 0x00, 0x05, 0x15 };

113 
	`ASSERT_EQUAL
(
kØsync_buf_size
, 21);

114 
	`ASSERT_EQUAL
(
	`memcmp
(
kØsync_mesßge
, 
kØsync_buf
, 14), 0);

115 
	`ASSERT_EQUAL
(
	`memcmp
(
kØsync_buf
 + 14, 
∑ylﬂd
, 7), 0);

116 
	}
}

118 
	$ã°_kØt˝_pög
(**
°©e
)

120 ()
°©e
;

122 
pög_buf
[5];

123 
size_t
 
pög_buf_size
 = 5;

124 
kØt˝_îr‹_t
 
rvÆ
 = 
	`kØt˝_gë_ªque°_pög
(
pög_buf
, &
pög_buf_size
);

125 
	`ASSERT_EQUAL
(
rvÆ
, 
KAATCP_ERR_NONE
);

127 
pög_mesßge
 [] = { 0xC0, 0x00 };

129 
	`ASSERT_EQUAL
(
pög_buf_size
, 2);

130 
	`ASSERT_EQUAL
(
	`memcmp
(
pög_buf
, 
pög_mesßge
, 2), 0);

131 
	}
}

133 
	$ã°_gë_ªque°_kØsync_ovî_buff
(**
°©e
)

135 ()
°©e
;

137 
kØt˝_kØsync_t
 
kØsync
;

138 *
∑ylﬂd
 = "payload";

139 
kØsync_buf
[100] = "";

140 
size_t
 
kØsync_buf_size
 = 5;

141 
uöt16_t
 
mesßge_id
 = 5;

142 
uöt8_t
 
zù≥d
 = 0;

143 
uöt8_t
 
í¸y±ed
 = 1;

145 
	`kØt˝_fûl_kØsync_mesßge
(
∑ylﬂd
, 
	`°æí
’aylﬂd), 
mesßge_id
, 
zù≥d
, 
í¸y±ed
, &
kØsync
);

146 
	`mem£t
(
kØsync_buf
, 0xEA, (kaasync_buf));

148 
kØt˝_îr‹_t
 
rvÆ
 = 
	`kØt˝_gë_ªque°_kØsync
(&
kØsync
, 
kØsync_buf
, &
kØsync_buf_size
);

149 
	`ASSERT_EQUAL
(
rvÆ
, 
KAATCP_ERR_BUFFER_NOT_ENOUGH
);

151 
size_t
 
i
 = 8; i < (
kØsync_buf
); i++) {

152 
	`ASSERT_EQUAL
((
uöt8_t
)
kØsync_buf
[
i
], 0xEA);

154 
	}
}

156 
	$ã°_öô
()

158 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_log_¸óã
(&
loggî
, 
KAA_MAX_LOG_MESSAGE_LENGTH
, 
KAA_MAX_LOG_LEVEL
, 
NULL
);

159 i‡(
îr‹
 || !
loggî
) {

160  
îr‹
;

164 
	}
}

166 
	$ã°_deöô
()

168 
	`kØ_log_de°roy
(
loggî
);

170 
	}
}

172 
KAA_SUITE_MAIN
(
Log
, 
ã°_öô
, 
ã°_deöô


174 
	$KAA_TEST_CASE
(
kØt˝_c⁄√˘
, 
ã°_kØt˝_c⁄√˘
)

175 
	$KAA_TEST_CASE
(
kØt˝_c⁄√˘
, 
ã°_kØt˝_c⁄√˘_wôhout_key
)

176 
	$KAA_TEST_CASE
(
kØt˝_disc⁄√˘
, 
ã°_kØt˝_disc⁄√˘
)

177 
	$KAA_TEST_CASE
(
kØt˝_kØsync
, 
ã°_kØt˝_kØsync
)

178 
	$KAA_TEST_CASE
(
kØt˝_pög
, 
ã°_kØt˝_pög
)

179 
	`KAA_TEST_CASE
(
gë_ªque°_kØsync
, 
ã°_gë_ªque°_kØsync_ovî_buff
)

	@/var/www/html/debian/gateway/kaa/test/platform-impl/test_ext_log_storage_memory.c

17 
	~<kØ_¥iv©e.h
>

19 
	~<°dio.h
>

20 
	~<°döt.h
>

21 
	~<uni°d.h
>

22 
	~<°rög.h
>

24 
	~"kØ_ã°.h
"

26 
	~"utûôõs/kØ_mem.h
"

27 
	~"utûôõs/kØ_log.h
"

29 
	~"kØ_c⁄ãxt.h
"

30 
	~"kØ_boŸ°øp_m™agî.h
"

31 
	~"kØ_ch™√l_m™agî.h
"

33 
	~"∂©f‹m/ext_log_°‹age.h
"

34 
	~"∂©f‹m/ext_log_u∂ﬂd_°øãgy.h
"

36 
	~"kØ_loggög_¥iv©e.h
"

38 
	#TEST_RECORD_BUCKET_ID
 1

	)

40 
kØ_loggî_t
 *
	gloggî
 = 
NULL
;

44 
	$ã°_¸óã_u∆imôed_°‹age
(**
°©e
)

46 ()
°©e
;

48 
kØ_îr‹_t
 
îr‹_code
;

49 *
°‹age
;

51 
îr‹_code
 = 
	`ext_u∆imôed_log_°‹age_¸óã
(
NULL
, NULL);

52 
	`ASSERT_NOT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

54 
îr‹_code
 = 
	`ext_u∆imôed_log_°‹age_¸óã
(&
°‹age
, 
NULL
);

55 
	`ASSERT_NOT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

57 
îr‹_code
 = 
	`ext_u∆imôed_log_°‹age_¸óã
(
NULL
, 
loggî
);

58 
	`ASSERT_NOT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

60 
îr‹_code
 = 
	`ext_u∆imôed_log_°‹age_¸óã
(&
°‹age
, 
loggî
);

61 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

63 
	`ext_log_°‹age_de°roy
(
°‹age
);

64 
	}
}

68 
	$ã°_¸óã_limôed_°‹age
(**
°©e
)

70 ()
°©e
;

72 
kØ_îr‹_t
 
îr‹_code
;

73 *
°‹age
;

75 c⁄° 
size_t
 
OVERFLOW_PERCENTAGE
 = 152;

76 c⁄° 
size_t
 
ALLOWED_PERCENTAGE
 = 99;

77 c⁄° 
size_t
 
ALL_LOGS_PERCENTAGE
 = 100;

79 
îr‹_code
 = 
	`ext_limôed_log_°‹age_¸óã
(
NULL
, NULL, 0, 0);

80 
	`ASSERT_NOT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

82 
îr‹_code
 = 
	`ext_limôed_log_°‹age_¸óã
(&
°‹age
, 
NULL
, 0, 0);

83 
	`ASSERT_NOT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

85 
îr‹_code
 = 
	`ext_limôed_log_°‹age_¸óã
(&
°‹age
, 
loggî
, 0, 0);

86 
	`ASSERT_NOT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

88 
îr‹_code
 = 
	`ext_limôed_log_°‹age_¸óã
(&
°‹age
, 
loggî
, 
SIZE_MAX
, 0);

89 
	`ASSERT_NOT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

91 
îr‹_code
 = 
	`ext_limôed_log_°‹age_¸óã
(&
°‹age
, 
loggî
, 
SIZE_MAX
, 
OVERFLOW_PERCENTAGE
);

92 
	`ASSERT_NOT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

94 
îr‹_code
 = 
	`ext_limôed_log_°‹age_¸óã
(&
°‹age
, 
loggî
, 100, 
ALLOWED_PERCENTAGE
);

95 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

96 
	`ext_log_°‹age_de°roy
(
°‹age
);

98 
îr‹_code
 = 
	`ext_limôed_log_°‹age_¸óã
(&
°‹age
, 
loggî
, 100, 
ALL_LOGS_PERCENTAGE
);

99 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

101 
	`ext_log_°‹age_de°roy
(
°‹age
);

102 
	}
}

106 
	$ã°_Æloˇã_log_ªc‹d_buf„r
(**
°©e
)

108 ()
°©e
;

110 
kØ_îr‹_t
 
îr‹_code
;

111 *
°‹age
;

113 
îr‹_code
 = 
	`ext_u∆imôed_log_°‹age_¸óã
(&
°‹age
, 
loggî
);

114 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

116 
îr‹_code
 = 
	`ext_log_°‹age_Æloˇã_log_ªc‹d_buf„r
(
°‹age
, 
NULL
);

117 
	`ASSERT_NOT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

119 
kØ_log_ªc‹d_t
 
ªc‹d1
 = { 
NULL
, 0, 0, };

120 
îr‹_code
 = 
	`ext_log_°‹age_Æloˇã_log_ªc‹d_buf„r
(
°‹age
, &
ªc‹d1
);

121 
	`ASSERT_NOT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

122 
	`ASSERT_NULL
(
ªc‹d1
.
d©a
);

124 
kØ_log_ªc‹d_t
 
ªc‹d2
 = { 
NULL
, 256, 0, };

125 
îr‹_code
 = 
	`ext_log_°‹age_Æloˇã_log_ªc‹d_buf„r
(
°‹age
, &
ªc‹d2
);

126 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

127 
	`ASSERT_NOT_NULL
(
ªc‹d2
.
d©a
);

129 
	`ext_log_°‹age_dóŒoˇã_log_ªc‹d_buf„r
(
°‹age
, &
ªc‹d2
);

130 
	`ext_log_°‹age_de°roy
(
°‹age
);

131 
	}
}

135 * 
	$c›y_d©a
(c⁄° * 
d©a
, 
size_t
 
d©a_size
)

137 
	`KAA_RETURN_IF_NIL2
(
d©a
, 
d©a_size
, 
NULL
);

138 *
√w_d©a
 = (*)
	`KAA_MALLOC
(
d©a_size
);

139 
	`KAA_RETURN_IF_NIL
(
√w_d©a
, 
NULL
);

140 
	`mem˝y
(
√w_d©a
, 
d©a
, 
d©a_size
);

141  
√w_d©a
;

142 
	}
}

144 
kØ_îr‹_t
 
	$add_log_ªc‹d
(*
°‹age
,

145 c⁄° *
d©a
,

146 
size_t
 
d©a_size
,

147 
uöt16_t
 
buckë_id
)

149 
	`KAA_RETURN_IF_NIL3
(
°‹age
, 
d©a
, 
d©a_size
, 
KAA_ERR_BADPARAM
);

150 
kØ_log_ªc‹d_t
 
ªc‹d
 = { 
	`c›y_d©a
(
d©a
, 
d©a_size
), d©a_size, 
buckë_id
 };

151  
	`ext_log_°‹age_add_log_ªc‹d
(
°‹age
, &
ªc‹d
);

152 
	}
}

154 
	$ã°_add_log_ªc‹d
(**
°©e
)

156 ()
°©e
;

158 
kØ_îr‹_t
 
îr‹_code
;

159 *
°‹age
;

161 
îr‹_code
 = 
	`ext_u∆imôed_log_°‹age_¸óã
(&
°‹age
, 
loggî
);

162 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

164 
size_t
 
ªc‹d_cou¡
 = 0;

165 c⁄° *
d©a
 = "DATA";

166 
size_t
 
d©a_size
 = 
	`°æí
("DATA");

168 
îr‹_code
 = 
	`add_log_ªc‹d
(
°‹age
, 
d©a
, 
d©a_size
, 
TEST_RECORD_BUCKET_ID
);

169 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

170 ++
ªc‹d_cou¡
;

172 
	`ASSERT_EQUAL
(
	`ext_log_°‹age_gë_ªc‹ds_cou¡
(
°‹age
), 
ªc‹d_cou¡
);

174 
îr‹_code
 = 
	`add_log_ªc‹d
(
°‹age
, 
d©a
, 
d©a_size
, 
TEST_RECORD_BUCKET_ID
);

175 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

176 ++
ªc‹d_cou¡
;

178 
	`ASSERT_EQUAL
(
	`ext_log_°‹age_gë_ªc‹ds_cou¡
(
°‹age
), 
ªc‹d_cou¡
);

179 
	`ASSERT_EQUAL
(
	`ext_log_°‹age_gë_tŸÆ_size
(
°‹age
), 
ªc‹d_cou¡
 * 
d©a_size
);

181 
	`ext_log_°‹age_de°roy
(
°‹age
);

182 
	}
}

186 
	$ã°_wrôe_√xt_log_ªc‹d
(**
°©e
)

188 ()
°©e
;

190 
kØ_îr‹_t
 
îr‹_code
;

191 *
°‹age
;

193 
îr‹_code
 = 
	`ext_u∆imôed_log_°‹age_¸óã
(&
°‹age
, 
loggî
);

194 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

196 
uöt16_t
 
buckë_id
 = 0;

197 
size_t
 
ªc‹d_Àn
 = 0;

199 
îr‹_code
 = 
	`ext_log_°‹age_wrôe_√xt_ªc‹d
(
°‹age
, 
NULL
, 0, 0, NULL);

200 
	`ASSERT_NOT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

202 
îr‹_code
 = 
	`ext_log_°‹age_wrôe_√xt_ªc‹d
(
°‹age
, 
NULL
, 33, 0, NULL);

203 
	`ASSERT_NOT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

205 
îr‹_code
 = 
	`ext_log_°‹age_wrôe_√xt_ªc‹d
(
°‹age
, 
NULL
, 33, &
buckë_id
, NULL);

206 
	`ASSERT_NOT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

208 
îr‹_code
 = 
	`ext_log_°‹age_wrôe_√xt_ªc‹d
(
°‹age
, 
NULL
, 33, &
buckë_id
, &
ªc‹d_Àn
);

209 
	`ASSERT_NOT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

211 
size_t
 
ªc‹d_cou¡
 = 0;

212 c⁄° *
d©a
 = "DATA";

213 
size_t
 
d©a_size
 = 
	`°æí
("DATA");

215 
îr‹_code
 = 
	`add_log_ªc‹d
(
°‹age
, 
d©a
, 
d©a_size
, 
TEST_RECORD_BUCKET_ID
);

216 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

217 ++
ªc‹d_cou¡
;

218 
îr‹_code
 = 
	`add_log_ªc‹d
(
°‹age
, 
d©a
, 
d©a_size
, 
TEST_RECORD_BUCKET_ID
);

219 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

220 ++
ªc‹d_cou¡
;

222 
size_t
 
buf„r_size
 = (
ªc‹d_cou¡
 + 1Ë* 
d©a_size
;

223 
buf„r
[
buf„r_size
];

225 
îr‹_code
 = 
	`ext_log_°‹age_wrôe_√xt_ªc‹d
(
°‹age
, 
buf„r
, 1, &
buckë_id
, &
ªc‹d_Àn
);

226 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_INSUFFICIENT_BUFFER
);

228 
îr‹_code
 = 
	`ext_log_°‹age_wrôe_√xt_ªc‹d
(
°‹age
, 
buf„r
, 
buf„r_size
, &
buckë_id
, &
ªc‹d_Àn
);

229 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

230 
	`ASSERT_EQUAL
(
ªc‹d_Àn
, 
d©a_size
);

232 
îr‹_code
 = 
	`ext_log_°‹age_wrôe_√xt_ªc‹d
(
°‹age
, 
buf„r
 + 
ªc‹d_Àn
, 
buf„r_size
 -Ñec‹d_Àn, &
buckë_id
, &record_len);

233 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

234 
	`ASSERT_EQUAL
(
ªc‹d_Àn
, 
d©a_size
);

236 
îr‹_code
 = 
	`ext_log_°‹age_wrôe_√xt_ªc‹d
(
°‹age
, 
buf„r
 + 2 * 
ªc‹d_Àn
, 
buf„r_size
 - 2 *Ñec‹d_Àn, &
buckë_id
, &record_len);

237 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NOT_FOUND
);

239 
ªs
 = 
	`memcmp
(
buf„r
, 
d©a
, 
d©a_size
);

240 
	`ASSERT_EQUAL
(
ªs
, 0);

241 
ªs
 = 
	`memcmp
(
buf„r
 + 
d©a_size
, 
d©a
, data_size);

242 
	`ASSERT_EQUAL
(
ªs
, 0);

244 
	`ext_log_°‹age_de°roy
(
°‹age
);

245 
	}
}

249 
	$ã°_ªmove_by_buckë_id
(**
°©e
)

251 ()
°©e
;

253 
kØ_îr‹_t
 
îr‹_code
;

254 *
°‹age
;

256 
îr‹_code
 = 
	`ext_u∆imôed_log_°‹age_¸óã
(&
°‹age
, 
loggî
);

257 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

259 
size_t
 
ªc‹d_Àn
 = 0;

260 
size_t
 
TEST_RECORD_COUNT
 = 10;

261 
size_t
 
DIVIDER
 = 
TEST_RECORD_COUNT
 / 2;

262 
size_t
 
ªc‹d_cou¡
 = 0;

263 c⁄° *
d©a
 = "DATA";

264 
size_t
 
d©a_size
 = 
	`°æí
("DATA");

266 
ªc‹d_cou¡
 < 
TEST_RECORD_COUNT
) {

268 
îr‹_code
 = 
	`add_log_ªc‹d
(
°‹age
, 
d©a
, 
d©a_size
, 
ªc‹d_cou¡
 / 
DIVIDER
 + 1);

269 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

270 ++
ªc‹d_cou¡
;

273 
	`ASSERT_EQUAL
(
	`ext_log_°‹age_gë_ªc‹ds_cou¡
(
°‹age
), 
ªc‹d_cou¡
);

274 
	`ASSERT_EQUAL
(
	`ext_log_°‹age_gë_tŸÆ_size
(
°‹age
), 
ªc‹d_cou¡
 * 
d©a_size
);

276 
size_t
 
buf„r_size
 = 
d©a_size
;

277 
buf„r
[
buf„r_size
];

279 
uöt16_t
 
buckë_id_1
 = 1;

280 
size_t
 
i
;

281 
i
 = 0; i < 
ªc‹d_cou¡
 / 2; ++i) {

282 
îr‹_code
 = 
	`ext_log_°‹age_wrôe_√xt_ªc‹d
(
°‹age
, 
buf„r
, 
buf„r_size
, &
buckë_id_1
, &
ªc‹d_Àn
);

283 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

286 
	`ASSERT_EQUAL
(
	`ext_log_°‹age_gë_ªc‹ds_cou¡
(
°‹age
), 
ªc‹d_cou¡
 / 2);

287 
	`ASSERT_EQUAL
(
	`ext_log_°‹age_gë_tŸÆ_size
(
°‹age
), (
ªc‹d_cou¡
 / 2Ë* 
d©a_size
);

289 
uöt16_t
 
buckë_id_2
 = 2;

290 
i
 = 0; i < 
ªc‹d_cou¡
 / 2; ++i) {

291 
îr‹_code
 = 
	`ext_log_°‹age_wrôe_√xt_ªc‹d
(
°‹age
, 
buf„r
, 
buf„r_size
, &
buckë_id_2
, &
ªc‹d_Àn
);

292 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

295 
uöt16_t
 
buckë_id_3
 = 3;

296 
îr‹_code
 = 
	`ext_log_°‹age_wrôe_√xt_ªc‹d
(
°‹age
, 
buf„r
, 
buf„r_size
, &
buckë_id_3
, &
ªc‹d_Àn
);

297 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NOT_FOUND
);

299 
îr‹_code
 = 
	`ext_log_°‹age_ªmove_by_buckë_id
(
°‹age
, 
buckë_id_2
);

300 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

302 
îr‹_code
 = 
	`ext_log_°‹age_ªmove_by_buckë_id
(
°‹age
, 
buckë_id_1
);

303 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

305 
	`ASSERT_EQUAL
(
	`ext_log_°‹age_gë_ªc‹ds_cou¡
(
°‹age
), 0);

306 
	`ASSERT_EQUAL
(
	`ext_log_°‹age_gë_tŸÆ_size
(
°‹age
), 0);

308 
	`ext_log_°‹age_de°roy
(
°‹age
);

309 
	}
}

313 
	$ã°_unm¨k_by_buckë_id
(**
°©e
)

315 ()
°©e
;

317 
kØ_îr‹_t
 
îr‹_code
;

318 *
°‹age
;

320 
îr‹_code
 = 
	`ext_u∆imôed_log_°‹age_¸óã
(&
°‹age
, 
loggî
);

321 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

323 
size_t
 
ªc‹d_Àn
 = 0;

324 
size_t
 
TEST_RECORD_COUNT
 = 10;

325 
size_t
 
DIVIDER
 = 
TEST_RECORD_COUNT
 / 2;

326 
size_t
 
ªc‹d_cou¡
 = 0;

327 c⁄° *
d©a
 = "DATA";

328 
size_t
 
d©a_size
 = 
	`°æí
("DATA");

330 
ªc‹d_cou¡
 < 
TEST_RECORD_COUNT
) {

332 
îr‹_code
 = 
	`add_log_ªc‹d
(
°‹age
, 
d©a
, 
d©a_size
, 
ªc‹d_cou¡
 / 
DIVIDER
 + 1);

333 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

334 ++
ªc‹d_cou¡
;

337 
size_t
 
buf„r_size
 = 
d©a_size
;

338 
buf„r
[
buf„r_size
];

340 
uöt16_t
 
buckë_id_1
 = 1;

341 
size_t
 
i
;

342 
i
 = 0; i < 
ªc‹d_cou¡
 / 2; ++i) {

343 
îr‹_code
 = 
	`ext_log_°‹age_wrôe_√xt_ªc‹d
(
°‹age
, 
buf„r
, 
buf„r_size
, &
buckë_id_1
, &
ªc‹d_Àn
);

344 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

347 
uöt16_t
 
buckë_id_2
 = 2;

348 
i
 = 0; i < 
ªc‹d_cou¡
 / 2; ++i) {

349 
îr‹_code
 = 
	`ext_log_°‹age_wrôe_√xt_ªc‹d
(
°‹age
, 
buf„r
, 
buf„r_size
, &
buckë_id_2
, &
ªc‹d_Àn
);

350 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

353 
uöt16_t
 
buckë_id_3
 = 3;

354 
îr‹_code
 = 
	`ext_log_°‹age_wrôe_√xt_ªc‹d
(
°‹age
, 
buf„r
, 
buf„r_size
, &
buckë_id_3
, &
ªc‹d_Àn
);

355 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NOT_FOUND
);

357 
îr‹_code
 = 
	`ext_log_°‹age_ªmove_by_buckë_id
(
°‹age
, 
buckë_id_2
);

358 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

360 
îr‹_code
 = 
	`ext_log_°‹age_wrôe_√xt_ªc‹d
(
°‹age
, 
buf„r
, 
buf„r_size
, &
buckë_id_3
, &
ªc‹d_Àn
);

361 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NOT_FOUND
);

363 
îr‹_code
 = 
	`ext_log_°‹age_unm¨k_by_buckë_id
(
°‹age
, 
buckë_id_1
);

364 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

366 
uöt16_t
 
buckë_id_4
 = 4;

367 
i
 = 0; i < 
ªc‹d_cou¡
 / 2; ++i) {

368 
îr‹_code
 = 
	`ext_log_°‹age_wrôe_√xt_ªc‹d
(
°‹age
, 
buf„r
, 
buf„r_size
, &
buckë_id_4
, &
ªc‹d_Àn
);

369 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

372 
îr‹_code
 = 
	`ext_log_°‹age_wrôe_√xt_ªc‹d
(
°‹age
, 
buf„r
, 
buf„r_size
, &
buckë_id_3
, &
ªc‹d_Àn
);

373 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NOT_FOUND
);

375 
îr‹_code
 = 
	`ext_log_°‹age_ªmove_by_buckë_id
(
°‹age
, 
buckë_id_4
);

376 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

378 
	`ASSERT_EQUAL
(
	`ext_log_°‹age_gë_ªc‹ds_cou¡
(
°‹age
), 0);

379 
	`ASSERT_EQUAL
(
	`ext_log_°‹age_gë_tŸÆ_size
(
°‹age
), 0);

381 
	`ext_log_°‹age_de°roy
(
°‹age
);

382 
	}
}

386 
	$ã°_shrök_to_size
(**
°©e
)

388 ()
°©e
;

390 
kØ_îr‹_t
 
îr‹_code
;

391 *
°‹age
;

393 c⁄° *
d©a
 = "DATA";

394 
size_t
 
d©a_size
 = 
	`°æí
("DATA");

395 
size_t
 
TEST_RECORD_COUNT
 = 10;

397 
size_t
 
STORAGE_SIZE
 = 
d©a_size
 * 
TEST_RECORD_COUNT
;

398 
size_t
 
PERCENT_TO_DELETE
 = 75;

399 
size_t
 
NEW_STORAGE_SIZE
 = (
STORAGE_SIZE
 * (100 - 
PERCENT_TO_DELETE
) / 100);

401 
îr‹_code
 = 
	`ext_limôed_log_°‹age_¸óã
(&
°‹age
, 
loggî
, 
STORAGE_SIZE
, 
PERCENT_TO_DELETE
);

402 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

404 
size_t
 
ªc‹d_cou¡
 = 0;

406 
ªc‹d_cou¡
 <
TEST_RECORD_COUNT
) {

407 
îr‹_code
 = 
	`add_log_ªc‹d
(
°‹age
, 
d©a
, 
d©a_size
, 
TEST_RECORD_BUCKET_ID
);

408 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

409 ++
ªc‹d_cou¡
;

412 
size_t
 
occupõd_size_a·î_ªmovÆ
 = 0;

413 
size_t
 
ªc‹d_cou¡_a·î_ªmovÆ
 = 0;

414 
occupõd_size_a·î_ªmovÆ
 + 
d©a_size
 <
NEW_STORAGE_SIZE
) {

415 
occupõd_size_a·î_ªmovÆ
 +
d©a_size
;

416 ++
ªc‹d_cou¡_a·î_ªmovÆ
;

419 
	`ASSERT_EQUAL
(
	`ext_log_°‹age_gë_ªc‹ds_cou¡
(
°‹age
), 
ªc‹d_cou¡_a·î_ªmovÆ
 + 1 );

420 
	`ASSERT_EQUAL
(
	`ext_log_°‹age_gë_tŸÆ_size
(
°‹age
), 
occupõd_size_a·î_ªmovÆ
 + 
d©a_size
);

422 
	`ext_log_°‹age_de°roy
(
°‹age
);

423 
	}
}

427 
	$ã°_öô
()

429 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_log_¸óã
(&
loggî
, 
KAA_MAX_LOG_MESSAGE_LENGTH
, 
KAA_MAX_LOG_LEVEL
, 
NULL
);

430 i‡(
îr‹
 || !
loggî
) {

431  
îr‹
;

435 
	}
}

437 
	$ã°_deöô
()

439 
	`kØ_log_de°roy
(
loggî
);

441 
	}
}

445 
KAA_SUITE_MAIN
(
MëaExãnsi⁄
, 
ã°_öô
, 
ã°_deöô
,

446 
	$KAA_TEST_CASE
(
¸óã_u∆imôed_°‹age
, 
ã°_¸óã_u∆imôed_°‹age
)

447 
	$KAA_TEST_CASE
(
¸óã_limôed_°‹age
, 
ã°_¸óã_limôed_°‹age
)

448 
	$KAA_TEST_CASE
(
Æloˇã_log_ªc‹d_buf„r
, 
ã°_Æloˇã_log_ªc‹d_buf„r
)

449 
	$KAA_TEST_CASE
(
add_log_ªc‹d
, 
ã°_add_log_ªc‹d
)

450 
	$KAA_TEST_CASE
(
wrôe_√xt_log_ªc‹d
, 
ã°_wrôe_√xt_log_ªc‹d
)

451 
	$KAA_TEST_CASE
(
ªmove_by_buckë_id
, 
ã°_ªmove_by_buckë_id
)

452 
	$KAA_TEST_CASE
(
unm¨k_by_buckë_id
, 
ã°_unm¨k_by_buckë_id
)

453 
	`KAA_TEST_CASE
(
shrök_to_size
, 
ã°_shrök_to_size
)

	@/var/www/html/debian/gateway/kaa/test/platform-impl/test_ext_log_upload_strategies.c

17 
	~"kØ_¥iv©e.h
"

19 
	~<°döt.h
>

20 
	~<°dio.h
>

21 
	~<uni°d.h
>

23 
	~"kØ_ã°.h
"

25 
	~"utûôõs/kØ_log.h
"

27 
	~"kØ_c⁄ãxt.h
"

28 
	~"kØ_boŸ°øp_m™agî.h
"

29 
	~"kØ_ch™√l_m™agî.h
"

31 
	~"∂©f‹m/ext_log_°‹age.h
"

32 
	~"∂©f‹m/ext_log_u∂ﬂd_°øãgy.h
"

34 
	~"∂©f‹m-im∂/comm⁄/ext_log_u∂ﬂd_°øãgõs.h
"

37 
uöt8_t
 
	mty≥
;

38 
size_t
 
	mtŸÆ_size
;

39 
size_t
 
	mªc‹d_cou¡
;

40 
size_t
 
	mu∂ﬂd_timeout
;

41 } 
	tã°_log_°‹age_c⁄ãxt_t
;

45 
kØ_c⁄ãxt_t
 
	gkØ_c⁄ãxt
;

46 
kØ_loggî_t
 *
	gloggî
 = 
NULL
;

47 
kØ_ch™√l_m™agî_t
 *
	gch™√l_m™agî
 = 
NULL
;

48 
kØ_boŸ°øp_m™agî_t
 *
	gboŸ°øp_m™agî
 = 
NULL
;

49 *
	g°øãgy
 = 
NULL
;

53 
size_t
 
	$ext_log_°‹age_gë_tŸÆ_size
(c⁄° *
c⁄ãxt
)

55 
	`KAA_RETURN_IF_NIL
(
c⁄ãxt
, 0);

56  ((
ã°_log_°‹age_c⁄ãxt_t
 *)
c⁄ãxt
)->
tŸÆ_size
;

57 
	}
}

60 
size_t
 
	$ext_log_°‹age_gë_ªc‹ds_cou¡
(c⁄° *
c⁄ãxt
)

62 
	`KAA_RETURN_IF_NIL
(
c⁄ãxt
, 0);

63  ((
ã°_log_°‹age_c⁄ãxt_t
 *)
c⁄ãxt
)->
ªc‹d_cou¡
;

64 
	}
}

67 
	$ã°_¸óã_°øãgy
(**
°©e
)

69 ()
°©e
;

70 ()
°©e
;

72 *
tmp_°øãgy
 = 
NULL
;

74 
kØ_îr‹_t
 
îr‹_code
 = 
	`ext_log_u∂ﬂd_°øãgy_¸óã
(&
kØ_c⁄ãxt
, 
NULL
,

75 
KAA_LOG_UPLOAD_VOLUME_STRATEGY
);

76 
	`ASSERT_NOT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

78 
îr‹_code
 = 
	`ext_log_u∂ﬂd_°øãgy_¸óã
(
NULL
, &
tmp_°øãgy
, 
KAA_LOG_UPLOAD_VOLUME_STRATEGY
);

79 
	`ASSERT_NOT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

81 
îr‹_code
 = 
	`ext_log_u∂ﬂd_°øãgy_¸óã
(&
kØ_c⁄ãxt
, &
tmp_°øãgy
, 0);

82 
	`ASSERT_NOT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

84 
îr‹_code
 = 
	`ext_log_u∂ﬂd_°øãgy_¸óã
(&
kØ_c⁄ãxt
, &
tmp_°øãgy
, 
KAA_LOG_UPLOAD_VOLUME_STRATEGY
);

85 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

86 
	`ASSERT_NOT_NULL
(
tmp_°øãgy
);

88 
	`ext_log_u∂ﬂd_°øãgy_de°roy
(
tmp_°øãgy
);

89 
	}
}

91 
	$ã°_£t_u∂ﬂd_timeout
(**
°©e
)

93 ()
°©e
;

94 ()
°©e
;

96 
size_t
 
DEFAULT_UPLOAD_TIMEOUT
 = 2 * 60;

98 
kØ_îr‹_t
 
îr‹_code
 = 
	`ext_log_u∂ﬂd_°øãgy_ch™ge_°øãgy
(
°øãgy
,

99 
KAA_LOG_UPLOAD_VOLUME_STRATEGY
);

100 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

102 
îr‹_code
 = 
	`ext_log_u∂ﬂd_°øãgy_£t_u∂ﬂd_timeout
(
°øãgy
, 
DEFAULT_UPLOAD_TIMEOUT
);

103 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

105 
	`ASSERT_EQUAL
(
	`ext_log_u∂ﬂd_°øãgy_gë_timeout
(
°øãgy
), 
DEFAULT_UPLOAD_TIMEOUT
);

106 
	}
}

108 
	$ã°_u∂ﬂd_decisi⁄_by_vﬁume
(**
°©e
)

110 ()
°©e
;

112 
size_t
 
DEFAULT_UPLOAD_VOLUME_THRESHOLD
 = 8 * 1024;

114 
kØ_îr‹_t
 
îr‹_code
 = 
	`ext_log_u∂ﬂd_°øãgy_ch™ge_°øãgy
(
°øãgy
,

115 
KAA_LOG_UPLOAD_BY_STORAGE_SIZE
);

116 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

118 
îr‹_code
 = 
	`ext_log_u∂ﬂd_°øãgy_£t_thªshﬁd_vﬁume
(
°øãgy
, 
DEFAULT_UPLOAD_VOLUME_THRESHOLD
);

119 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

121 
ã°_log_°‹age_c⁄ãxt_t
 
log_°‹age_c⁄ãxt
;

123 
log_°‹age_c⁄ãxt
.
tŸÆ_size
 = 
DEFAULT_UPLOAD_VOLUME_THRESHOLD
 - 1;

124 
log_°‹age_c⁄ãxt
.
ªc‹d_cou¡
 = 0;

125 
ext_log_u∂ﬂd_decisi⁄_t
 
u∂ﬂd_decisi⁄
 = 
	`ext_log_u∂ﬂd_°øãgy_decide
(
°øãgy
,

126 &
log_°‹age_c⁄ãxt
);

127 
	`ASSERT_EQUAL
(
u∂ﬂd_decisi⁄
, 
NOOP
);

129 
log_°‹age_c⁄ãxt
.
tŸÆ_size
 = 
DEFAULT_UPLOAD_VOLUME_THRESHOLD
;

130 
log_°‹age_c⁄ãxt
.
ªc‹d_cou¡
 = 0;

131 
u∂ﬂd_decisi⁄
 = 
	`ext_log_u∂ﬂd_°øãgy_decide
(
°øãgy
, &
log_°‹age_c⁄ãxt
);

132 
	`ASSERT_EQUAL
(
u∂ﬂd_decisi⁄
, 
UPLOAD
);

134 
log_°‹age_c⁄ãxt
.
tŸÆ_size
 = 
DEFAULT_UPLOAD_VOLUME_THRESHOLD
 + 1;

135 
log_°‹age_c⁄ãxt
.
ªc‹d_cou¡
 = 0;

136 
u∂ﬂd_decisi⁄
 = 
	`ext_log_u∂ﬂd_°øãgy_decide
(
°øãgy
, &
log_°‹age_c⁄ãxt
);

137 
	`ASSERT_EQUAL
(
u∂ﬂd_decisi⁄
, 
UPLOAD
);

138 
	}
}

140 
	$ã°_u∂ﬂd_decisi⁄_by_cou¡
(**
°©e
)

142 ()
°©e
;

144 
size_t
 
DEFAULT_UPLOAD_COUNT_THRESHOLD
 = 64;

146 
kØ_îr‹_t
 
îr‹_code
 = 
	`ext_log_u∂ﬂd_°øãgy_ch™ge_°øãgy
(
°øãgy
, 
KAA_LOG_UPLOAD_BY_RECORD_COUNT
);

147 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

149 
îr‹_code
 = 
	`ext_log_u∂ﬂd_°øãgy_£t_thªshﬁd_cou¡
(
°øãgy
, 
DEFAULT_UPLOAD_COUNT_THRESHOLD
);

150 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

152 
ã°_log_°‹age_c⁄ãxt_t
 
log_°‹age_c⁄ãxt
;

154 
log_°‹age_c⁄ãxt
.
tŸÆ_size
 = 0;

155 
log_°‹age_c⁄ãxt
.
ªc‹d_cou¡
 = 
DEFAULT_UPLOAD_COUNT_THRESHOLD
 - 1;

156 
ext_log_u∂ﬂd_decisi⁄_t
 
u∂ﬂd_decisi⁄
 = 
	`ext_log_u∂ﬂd_°øãgy_decide
(
°øãgy
,

157 &
log_°‹age_c⁄ãxt
);

158 
	`ASSERT_EQUAL
(
u∂ﬂd_decisi⁄
, 
NOOP
);

160 
log_°‹age_c⁄ãxt
.
tŸÆ_size
 = 0;

161 
log_°‹age_c⁄ãxt
.
ªc‹d_cou¡
 = 
DEFAULT_UPLOAD_COUNT_THRESHOLD
;

162 
u∂ﬂd_decisi⁄
 = 
	`ext_log_u∂ﬂd_°øãgy_decide
(
°øãgy
, &
log_°‹age_c⁄ãxt
);

163 
	`ASSERT_EQUAL
(
u∂ﬂd_decisi⁄
, 
UPLOAD
);

165 
log_°‹age_c⁄ãxt
.
tŸÆ_size
 = 0;

166 
log_°‹age_c⁄ãxt
.
ªc‹d_cou¡
 = 
DEFAULT_UPLOAD_COUNT_THRESHOLD
 + 1;

167 
u∂ﬂd_decisi⁄
 = 
	`ext_log_u∂ﬂd_°øãgy_decide
(
°øãgy
, &
log_°‹age_c⁄ãxt
);

168 
	`ASSERT_EQUAL
(
u∂ﬂd_decisi⁄
, 
UPLOAD
);

169 
	}
}

171 
	$ã°_u∂ﬂd_decisi⁄_by_timeout
(**
°©e
)

173 ()
°©e
;

175 
size_t
 
DEFAULT_UPLOAD_TIMEOUT_THRESHOLD
 = 1;

177 
kØ_îr‹_t
 
îr‹_code
 = 
	`ext_log_u∂ﬂd_°øãgy_ch™ge_°øãgy
(
°øãgy
,

178 
KAA_LOG_UPLOAD_BY_TIMEOUT_STRATEGY
);

179 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

181 
îr‹_code
 = 
	`ext_log_u∂ﬂd_°øãgy_£t_u∂ﬂd_timeout
(
°øãgy
, 
DEFAULT_UPLOAD_TIMEOUT_THRESHOLD
);

182 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

184 
ã°_log_°‹age_c⁄ãxt_t
 
log_°‹age_c⁄ãxt
;

186 
log_°‹age_c⁄ãxt
.
tŸÆ_size
 = 0;

187 
log_°‹age_c⁄ãxt
.
ªc‹d_cou¡
 = 0;

188 
log_°‹age_c⁄ãxt
.
u∂ﬂd_timeout
 = 
DEFAULT_UPLOAD_TIMEOUT_THRESHOLD
;

189 
ext_log_u∂ﬂd_decisi⁄_t
 
u∂ﬂd_decisi⁄
 = 
	`ext_log_u∂ﬂd_°øãgy_decide
(
°øãgy
,

190 &
log_°‹age_c⁄ãxt
);

191 
	`ASSERT_EQUAL
(
u∂ﬂd_decisi⁄
, 
NOOP
);

193 
log_°‹age_c⁄ãxt
.
u∂ﬂd_timeout
 = 
DEFAULT_UPLOAD_TIMEOUT_THRESHOLD
 + 1;

195 
	`¶ìp
(
DEFAULT_UPLOAD_TIMEOUT_THRESHOLD
);

197 
u∂ﬂd_decisi⁄
 = 
	`ext_log_u∂ﬂd_°øãgy_decide
(
°øãgy
, &
log_°‹age_c⁄ãxt
);

198 
	`ASSERT_EQUAL
(
u∂ﬂd_decisi⁄
, 
UPLOAD
);

199 
	}
}

201 
	$ã°_no›_decisi⁄_⁄_Áûuª
(**
°©e
)

203 ()
°©e
;

205 
size_t
 
DEFAULT_UPLOAD_VOLUME_THRESHOLD
 = 8 * 1024;

206 
size_t
 
DEFAULT_UPLOAD_COUNT_THRESHOLD
 = 64;

208 
kØ_îr‹_t
 
îr‹_code
 = 
	`ext_log_u∂ﬂd_°øãgy_ch™ge_°øãgy
(
°øãgy
,

209 
KAA_LOG_UPLOAD_VOLUME_STRATEGY
);

210 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

212 
îr‹_code
 = 
	`ext_log_u∂ﬂd_°øãgy_£t_thªshﬁd_vﬁume
(
°øãgy
, 
DEFAULT_UPLOAD_VOLUME_THRESHOLD
);

213 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

214 
îr‹_code
 = 
	`ext_log_u∂ﬂd_°øãgy_£t_thªshﬁd_cou¡
(
°øãgy
, 
DEFAULT_UPLOAD_COUNT_THRESHOLD
);

215 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

217 
îr‹_code
 = 
	`ext_log_u∂ﬂd_°øãgy_⁄_Áûuª
(
NULL
, 
NO_APPENDERS_CONFIGURED
);

218 
	`ASSERT_NOT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

220 
îr‹_code
 = 
	`ext_log_u∂ﬂd_°øãgy_⁄_Áûuª
(
°øãgy
, 
NO_APPENDERS_CONFIGURED
);

221 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

223 
ã°_log_°‹age_c⁄ãxt_t
 
log_°‹age_c⁄ãxt
;

225 
log_°‹age_c⁄ãxt
.
tŸÆ_size
 = 
DEFAULT_UPLOAD_VOLUME_THRESHOLD
;

226 
log_°‹age_c⁄ãxt
.
ªc‹d_cou¡
 = 
DEFAULT_UPLOAD_COUNT_THRESHOLD
;

227 
ext_log_u∂ﬂd_decisi⁄_t
 
u∂ﬂd_decisi⁄
 = 
	`ext_log_u∂ﬂd_°øãgy_decide
(
°øãgy
,

228 &
log_°‹age_c⁄ãxt
);

229 
	`ASSERT_EQUAL
(
u∂ﬂd_decisi⁄
, 
NOOP
);

230 
	}
}

232 
	$ã°_u∂ﬂd_decisi⁄_⁄_Áûuª
(**
°©e
)

234 ()
°©e
;

236 
size_t
 
DEFAULT_RETRY_PERIOD
 = 1;

237 
size_t
 
DEFAULT_UPLOAD_VOLUME_THRESHOLD
 = 8 * 1024;

238 
size_t
 
DEFAULT_UPLOAD_COUNT_THRESHOLD
 = 64;

240 
kØ_îr‹_t
 
îr‹_code
 = 
	`ext_log_u∂ﬂd_°øãgy_ch™ge_°øãgy
(
°øãgy
,

241 
KAA_LOG_UPLOAD_VOLUME_STRATEGY
);

242 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

244 
îr‹_code
 = 
	`ext_log_u∂ﬂd_°øãgy_£t_thªshﬁd_vﬁume
(
°øãgy
, 
DEFAULT_UPLOAD_VOLUME_THRESHOLD
);

245 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

246 
îr‹_code
 = 
	`ext_log_u∂ﬂd_°øãgy_£t_thªshﬁd_cou¡
(
°øãgy
, 
DEFAULT_UPLOAD_COUNT_THRESHOLD
);

247 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

248 
îr‹_code
 = 
	`ext_log_u∂ﬂd_°øãgy_£t_u∂ﬂd_ªåy_≥riod
(
°øãgy
, 
DEFAULT_RETRY_PERIOD
);

249 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

251 
îr‹_code
 = 
	`ext_log_u∂ﬂd_°øãgy_⁄_Áûuª
(
°øãgy
, 
NO_APPENDERS_CONFIGURED
);

252 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

254 
ã°_log_°‹age_c⁄ãxt_t
 
log_°‹age_c⁄ãxt
;

256 
log_°‹age_c⁄ãxt
.
tŸÆ_size
 = 
DEFAULT_UPLOAD_VOLUME_THRESHOLD
;

257 
log_°‹age_c⁄ãxt
.
ªc‹d_cou¡
 = 
DEFAULT_UPLOAD_COUNT_THRESHOLD
;

258 
ext_log_u∂ﬂd_decisi⁄_t
 
u∂ﬂd_decisi⁄
 = 
	`ext_log_u∂ﬂd_°øãgy_decide
(
°øãgy
,

259 &
log_°‹age_c⁄ãxt
);

260 
	`ASSERT_EQUAL
(
u∂ﬂd_decisi⁄
, 
NOOP
);

262 
	`¶ìp
(
DEFAULT_RETRY_PERIOD
);

264 
log_°‹age_c⁄ãxt
.
tŸÆ_size
 = 
DEFAULT_UPLOAD_VOLUME_THRESHOLD
;

265 
log_°‹age_c⁄ãxt
.
ªc‹d_cou¡
 = 
DEFAULT_UPLOAD_COUNT_THRESHOLD
;

266 
u∂ﬂd_decisi⁄
 = 
	`ext_log_u∂ﬂd_°øãgy_decide
(
°øãgy
, &
log_°‹age_c⁄ãxt
);

267 
	`ASSERT_EQUAL
(
u∂ﬂd_decisi⁄
, 
UPLOAD
);

268 
	}
}

270 
	$ã°_öô
()

272 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_log_¸óã
(&
loggî
, 
KAA_MAX_LOG_MESSAGE_LENGTH
, 
KAA_MAX_LOG_LEVEL
, 
NULL
);

273 i‡(
îr‹
 || !
loggî
) {

274  
îr‹
;

277 
kØ_c⁄ãxt
.
loggî
 =Üogger;

279 
îr‹
 = 
	`kØ_ch™√l_m™agî_¸óã
(&
ch™√l_m™agî
, &
kØ_c⁄ãxt
);

280 i‡(
îr‹
 || !
ch™√l_m™agî
) {

281  
îr‹
;

283 
kØ_c⁄ãxt
.
ch™√l_m™agî
 = channel_manager;

285 
îr‹
 = 
	`kØ_boŸ°øp_m™agî_¸óã
(&
boŸ°øp_m™agî
, &
kØ_c⁄ãxt
);

286 i‡(
îr‹
 || !
boŸ°øp_m™agî
) {

287  
îr‹
;

289 
kØ_c⁄ãxt
.
boŸ°øp_m™agî
 = bootstrap_manager;

291  
	`ext_log_u∂ﬂd_°øãgy_¸óã
(&
kØ_c⁄ãxt
, &
°øãgy
, 
KAA_LOG_UPLOAD_VOLUME_STRATEGY
);

292 
	}
}

294 
	$ã°_deöô
()

296 
	`kØ_boŸ°øp_m™agî_de°roy
(
boŸ°øp_m™agî
);

297 
	`kØ_ch™√l_m™agî_de°roy
(
ch™√l_m™agî
);

298 
	`kØ_log_de°roy
(
loggî
);

299 
	`ext_log_u∂ﬂd_°øãgy_de°roy
(
°øãgy
);

302 
	}
}

306 
KAA_SUITE_MAIN
(
MëaExãnsi⁄
, 
ã°_öô
, 
ã°_deöô
,

307 
	$KAA_TEST_CASE
(
¸óã_°øãgy
, 
ã°_¸óã_°øãgy
)

308 
	$KAA_TEST_CASE
(
£t_u∂ﬂd_timeout
, 
ã°_£t_u∂ﬂd_timeout
)

309 
	$KAA_TEST_CASE
(
u∂ﬂd_decisi⁄_by_vﬁume
, 
ã°_u∂ﬂd_decisi⁄_by_vﬁume
)

310 
	$KAA_TEST_CASE
(
u∂ﬂd_decisi⁄_by_cou¡
, 
ã°_u∂ﬂd_decisi⁄_by_cou¡
)

311 
	$KAA_TEST_CASE
(
u∂ﬂd_decisi⁄_by_timeout
, 
ã°_u∂ﬂd_decisi⁄_by_timeout
)

312 
	$KAA_TEST_CASE
(
no›_decisi⁄_⁄_Áûuª
, 
ã°_no›_decisi⁄_⁄_Áûuª
)

313 
	`KAA_TEST_CASE
(
u∂ﬂd_decisi⁄_⁄_Áûuª
, 
ã°_u∂ﬂd_decisi⁄_⁄_Áûuª
)

	@/var/www/html/debian/gateway/kaa/test/test_kaa_channel_manager.c

18 
	~<°döt.h
>

19 
	~<°ddef.h
>

20 
	~<°dlib.h
>

21 
	~<time.h
>

22 
	~<°dboﬁ.h
>

23 
	~<°dio.h
>

24 
	~<°rög.h
>

26 
	~"kØ_ã°.h
"

28 
	~"kØ_comm⁄.h
"

29 
	~"kØ_boŸ°øp_m™agî.h
"

30 
	~"kØ_ch™√l_m™agî.h
"

31 
	~"kØ_∂©f‹m_comm⁄.h
"

32 
	~"kØ_∂©f‹m_utûs.h
"

33 
	~"utûôõs/kØ_log.h
"

34 
	~"utûôõs/kØ_mem.h
"

35 
	~"∂©f‹m/ext_å™•‹t_ch™√l.h
"

36 
	~"kØ_∂©f‹m_comm⁄.h
"

37 
	~"kØ_∂©f‹m_utûs.h
"

38 
	~"∂©f‹m/sock.h
"

40 
	~"kØ_¥iv©e.h
"

43 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 
	m¥Ÿocﬁ_öfo
;

44 
kØ_ac˚ss_poöt_t
 *
	mac˚ss_poöt
;

45 
kØ_exãnsi⁄_id
* 
	m£rvi˚s
;

46 
size_t
 
	m£rvi˚s_cou¡
;

47 } 
	tã°_ch™√l_c⁄ãxt_t
;

51 
kØ_c⁄ãxt_t
 
	gkØ_c⁄ãxt
;

52 
kØ_loggî_t
 *
	gloggî
 = 
NULL
;

54 
kØ_exãnsi⁄_id
 
	gSUPPORTED_SERVICES
[] = { 
KAA_EXTENSION_BOOTSTRAP


55 , 
KAA_EXTENSION_PROFILE


56 , 
KAA_EXTENSION_USER


57 , 
KAA_EXTENSION_EVENT


58 , 
KAA_EXTENSION_LOGGING
 };

59 c⁄° 
size_t
 
	gsuµ‹ãd_£rvi˚s_cou¡
 = (
SUPPORTED_SERVICES
Ë/ (
kØ_exãnsi⁄_id
);

63 
kØ_îr‹_t
 
	$ã°_öô_ch™√l
(*
ch™√l_c⁄ãxt


64 , 
kØ_å™•‹t_c⁄ãxt_t
 *
å™•‹t_c⁄ãxt
)

66 ()
ch™√l_c⁄ãxt
;

67 ()
å™•‹t_c⁄ãxt
;

69  
KAA_ERR_NONE
;

70 
	}
}

72 
kØ_îr‹_t
 
	$ã°_£t_ac˚ss_poöt
(*
c⁄ãxt


73 , 
kØ_ac˚ss_poöt_t
 *
ac˚ss_poöt
)

75 
	`KAA_RETURN_IF_NIL2
(
c⁄ãxt
, 
ac˚ss_poöt
, 
KAA_ERR_BADPARAM
);

76 
ã°_ch™√l_c⁄ãxt_t
 *
ch™√l_c⁄ãxt
 = (ã°_ch™√l_c⁄ãxt_à*)
c⁄ãxt
;

77 
ch™√l_c⁄ãxt
->
ac˚ss_poöt
 =áccess_point;

79  
KAA_ERR_NONE
;

80 
	}
}

82 
kØ_îr‹_t
 
	$ã°_gë_¥Ÿocﬁ_öfo
(*
c⁄ãxt
, 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 *
¥Ÿocﬁ_öfo
)

84 
	`KAA_RETURN_IF_NIL2
(
c⁄ãxt
, 
¥Ÿocﬁ_öfo
, 
KAA_ERR_BADPARAM
);

86 
ã°_ch™√l_c⁄ãxt_t
 *
ch™√l_c⁄ãxt
 = (ã°_ch™√l_c⁄ãxt_à*)
c⁄ãxt
;

87 *
¥Ÿocﬁ_öfo
 = 
ch™√l_c⁄ãxt
->protocol_info;

89  
KAA_ERR_NONE
;

90 
	}
}

92 
kØ_îr‹_t
 
	$ã°_gë_suµ‹ãd_£rvi˚s
(*
c⁄ãxt


93 , c⁄° 
kØ_exãnsi⁄_id
 **
suµ‹ãd_£rvi˚s


94 , 
size_t
 *
£rvi˚_cou¡
)

96 
	`KAA_RETURN_IF_NIL3
(
c⁄ãxt
, 
suµ‹ãd_£rvi˚s
, 
£rvi˚_cou¡
, 
KAA_ERR_BADPARAM
);

98 
ã°_ch™√l_c⁄ãxt_t
 *
ch™√l_c⁄ãxt
 = (ã°_ch™√l_c⁄ãxt_à*)
c⁄ãxt
;

99 *
suµ‹ãd_£rvi˚s
 = 
ch™√l_c⁄ãxt
->
£rvi˚s
;

100 *
£rvi˚_cou¡
 = 
ch™√l_c⁄ãxt
->
£rvi˚s_cou¡
;

102  
KAA_ERR_NONE
;

103 
	}
}

105 
kØ_îr‹_t
 
	$ã°_sync_h™dÀr
(*
c⁄ãxt


106 , c⁄° 
kØ_exãnsi⁄_id
 
£rvi˚s
[]

107 , 
size_t
 
£rvi˚_cou¡
)

109 
	`KAA_RETURN_IF_NIL3
(
c⁄ãxt
, 
£rvi˚s
, 
£rvi˚_cou¡
, 
KAA_ERR_BADPARAM
);

110  
KAA_ERR_NONE
;

111 
	}
}

113 
	$ã°_¸óã_ch™√l_öãrÁ˚
(
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√l


114 , 
ã°_ch™√l_c⁄ãxt_t
 *
c⁄ãxt
)

116 
ch™√l
->
c⁄ãxt
 = context;

117 
ch™√l
->
gë_¥Ÿocﬁ_id
 = &
ã°_gë_¥Ÿocﬁ_öfo
;

118 
ch™√l
->
gë_suµ‹ãd_£rvi˚s
 = &
ã°_gë_suµ‹ãd_£rvi˚s
;

119 
ch™√l
->
sync_h™dÀr
 = &
ã°_sync_h™dÀr
;

120 
ch™√l
->
de°roy
 = 
NULL
;

121 
ch™√l
->
öô
 = &
ã°_öô_ch™√l
;

122 
ch™√l
->
£t_ac˚ss_poöt
 =&
ã°_£t_ac˚ss_poöt
;

123 
	}
}

125 
	$com∑ª_ch™√ls
(
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
a˘uÆ_ch™√l


126 , 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ex≥˘ed_ch™√l
)

128 
	`KAA_RETURN_IF_NIL2
(
a˘uÆ_ch™√l
, 
ex≥˘ed_ch™√l
,);

130 
kØ_îr‹_t
 
îr‹_code
;

131 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 
ex≥˘ed_öfo
 = { 0, 0 };

132 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 
a˘uÆ_öfo
 = { 1, 1 };

134 
îr‹_code
 = 
ex≥˘ed_ch™√l
->
	`gë_¥Ÿocﬁ_id
”x≥˘ed_ch™√l->
c⁄ãxt
, &
ex≥˘ed_öfo
);

135 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

136 
îr‹_code
 = 
a˘uÆ_ch™√l
->
	`gë_¥Ÿocﬁ_id
◊˘uÆ_ch™√l->
c⁄ãxt
, &
a˘uÆ_öfo
);

137 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

139 
	`ASSERT_NOT_EQUAL
(0, 
	`kØ_å™•‹t_¥Ÿocﬁ_id_equÆs
(&
a˘uÆ_öfo
, &
ex≥˘ed_öfo
));

140 
	}
}

142 
	$ã°_auth_Áûuª_h™dÀr
(
kØ_auth_Áûuª_ªas⁄
 
ªas⁄
, *
c⁄ãxt
)

144 
	`as£π_±r_nŸ_equÆ
(
c⁄ãxt
, 
NULL
);

146 *(
kØ_auth_Áûuª_ªas⁄
 *)
c⁄ãxt
 = 
ªas⁄
;

147 
	}
}

153 
	$ã°_¸óã_ch™√l_m™agî
(**
°©e
)

155 ()
°©e
;

157 
kØ_îr‹_t
 
îr‹_code
;

158 
kØ_ch™√l_m™agî_t
 *
ch™√l_m™agî
 = 
NULL
;

160 
îr‹_code
 = 
	`kØ_ch™√l_m™agî_¸óã
(
NULL
, &
kØ_c⁄ãxt
);

161 
	`ASSERT_NOT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

163 
îr‹_code
 = 
	`kØ_ch™√l_m™agî_¸óã
(&
ch™√l_m™agî
, 
NULL
);

164 
	`ASSERT_NOT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

166 
îr‹_code
 = 
	`kØ_ch™√l_m™agî_¸óã
(&
ch™√l_m™agî
, &
kØ_c⁄ãxt
);

167 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

168 
	`ASSERT_NOT_EQUAL
(
ch™√l_m™agî
, 
NULL
);

170 
	`kØ_ch™√l_m™agî_de°roy
(
ch™√l_m™agî
);

171 
	}
}

173 
	$ã°_add_ch™√l
(**
°©e
)

175 ()
°©e
;

177 
kØ_îr‹_t
 
îr‹_code
;

178 
kØ_ch™√l_m™agî_t
 *
ch™√l_m™agî
 = 
NULL
;

180 
îr‹_code
 = 
	`kØ_ch™√l_m™agî_¸óã
(&
ch™√l_m™agî
, &
kØ_c⁄ãxt
);

181 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

183 
uöt32_t
 
¥Ÿocﬁ_id
 = 0xAABBCCDD;

184 
uöt16_t
 
¥Ÿocﬁ_vîsi⁄
 = 2;

185 
ã°_ch™√l_c⁄ãxt_t
 
ch™√l_c⁄ãxt
 = { { 
¥Ÿocﬁ_id
, 
¥Ÿocﬁ_vîsi⁄
 }

186 , 
NULL


187 , 
SUPPORTED_SERVICES


188 , 
suµ‹ãd_£rvi˚s_cou¡
 };

190 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 
ex≥˘ed_ch™√l
;

191 
	`ã°_¸óã_ch™√l_öãrÁ˚
(&
ex≥˘ed_ch™√l
, &
ch™√l_c⁄ãxt
);

193 
uöt32_t
 
ch™√l_id
;

194 
îr‹_code
 = 
	`kØ_ch™√l_m™agî_add_å™•‹t_ch™√l
(
ch™√l_m™agî
, &
ex≥˘ed_ch™√l
, &
ch™√l_id
);

195 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

197 
îr‹_code
 = 
	`kØ_ch™√l_m™agî_add_å™•‹t_ch™√l
(
ch™√l_m™agî
, &
ex≥˘ed_ch™√l
, &
ch™√l_id
);

198 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_ALREADY_EXISTS
);

200 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
a˘uÆ_ch™√l
 =

201 
	`kØ_ch™√l_m™agî_gë_å™•‹t_ch™√l
(

202 
ch™√l_m™agî
, 
	`ønd
(Ë% 
suµ‹ãd_£rvi˚s_cou¡
);

203 
	`ASSERT_NOT_EQUAL
(
a˘uÆ_ch™√l
, 
NULL
);

205 
	`com∑ª_ch™√ls
(
a˘uÆ_ch™√l
, &
ex≥˘ed_ch™√l
);

207 
îr‹_code
 = 
	`kØ_ch™√l_m™agî_ªmove_å™•‹t_ch™√l
(
ch™√l_m™agî
, 
ch™√l_id
);

208 
	`as£π_öt_equÆ
(
KAA_ERR_NONE
, 
îr‹_code
);

210 
a˘uÆ_ch™√l
 = 
	`kØ_ch™√l_m™agî_gë_å™•‹t_ch™√l
(
ch™√l_m™agî


211 , 
	`ønd
(Ë% 
suµ‹ãd_£rvi˚s_cou¡
);

212 
	`ASSERT_EQUAL
(
a˘uÆ_ch™√l
, 
NULL
);

214 
	`kØ_ch™√l_m™agî_de°roy
(
ch™√l_m™agî
);

215 
	}
}

217 
	$ã°_gë_£rvi˚_•ecific_ch™√l
(**
°©e
)

219 ()
°©e
;

221 
kØ_îr‹_t
 
îr‹_code
;

222 
kØ_ch™√l_m™agî_t
 *
ch™√l_m™agî
 = 
NULL
;

224 
îr‹_code
 = 
	`kØ_ch™√l_m™agî_¸óã
(&
ch™√l_m™agî
, &
kØ_c⁄ãxt
);

225 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

227 
uöt32_t
 
globÆ_ch™√l_¥Ÿocﬁ_id
 = 0xAABBCCAA;

228 
uöt16_t
 
¥Ÿocﬁ_vîsi⁄
 = 2;

229 
ã°_ch™√l_c⁄ãxt_t
 
globÆ_ch™√l_c⁄ãxt
 = { { 
globÆ_ch™√l_¥Ÿocﬁ_id
, 
¥Ÿocﬁ_vîsi⁄
 }

230 , 
NULL


231 , 
SUPPORTED_SERVICES


232 , 
suµ‹ãd_£rvi˚s_cou¡
 };

234 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 
globÆ_ch™√l
;

235 
	`ã°_¸óã_ch™√l_öãrÁ˚
(&
globÆ_ch™√l
, &
globÆ_ch™√l_c⁄ãxt
);

237 
uöt32_t
 
globÆ_ch™√l_id
;

238 
îr‹_code
 = 
	`kØ_ch™√l_m™agî_add_å™•‹t_ch™√l
(
ch™√l_m™agî
, &
globÆ_ch™√l
, &
globÆ_ch™√l_id
);

239 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

241 
uöt32_t
 
loggög_ch™√l_¥Ÿocﬁ_id
 = 0xAABBCCBB;

242 
kØ_exãnsi⁄_id
 
loggög_ch™√l_£rvi˚
[] = { 
KAA_EXTENSION_LOGGING
 };

243 
ã°_ch™√l_c⁄ãxt_t
 
loggög_ch™√l_c⁄ãxt
 = { { 
loggög_ch™√l_¥Ÿocﬁ_id
, 
¥Ÿocﬁ_vîsi⁄
 }

244 , 
NULL


245 , 
loggög_ch™√l_£rvi˚


248 
uöt32_t
 
loggög_ch™√l_id
;

249 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 
loggög_ch™√l
;

250 
	`ã°_¸óã_ch™√l_öãrÁ˚
(&
loggög_ch™√l
, &
loggög_ch™√l_c⁄ãxt
);

252 
îr‹_code
 = 
	`kØ_ch™√l_m™agî_add_å™•‹t_ch™√l
(
ch™√l_m™agî
, &
loggög_ch™√l
, &
loggög_ch™√l_id
);

253 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

255 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
a˘uÆ_ch™√l
 =

256 
	`kØ_ch™√l_m™agî_gë_å™•‹t_ch™√l
(
ch™√l_m™agî
, 
KAA_EXTENSION_LOGGING
);

257 
	`ASSERT_NOT_EQUAL
(
a˘uÆ_ch™√l
, 
NULL
);

259 
	`com∑ª_ch™√ls
(
a˘uÆ_ch™√l
, &
loggög_ch™√l
);

261 
a˘uÆ_ch™√l
 = 
	`kØ_ch™√l_m™agî_gë_å™•‹t_ch™√l
(
ch™√l_m™agî
, 
KAA_EXTENSION_BOOTSTRAP
);

262 
	`ASSERT_NOT_EQUAL
(
a˘uÆ_ch™√l
, 
NULL
);

264 
	`com∑ª_ch™√ls
(
a˘uÆ_ch™√l
, &
globÆ_ch™√l
);

266 
îr‹_code
 = 
	`kØ_ch™√l_m™agî_ªmove_å™•‹t_ch™√l
(
ch™√l_m™agî
, 
loggög_ch™√l_id
);

267 
	`as£π_öt_equÆ
(
KAA_ERR_NONE
, 
îr‹_code
);

269 
a˘uÆ_ch™√l
 = 
	`kØ_ch™√l_m™agî_gë_å™•‹t_ch™√l
(
ch™√l_m™agî
, 
KAA_EXTENSION_LOGGING
);

270 
	`ASSERT_NOT_EQUAL
(
a˘uÆ_ch™√l
, 
NULL
);

272 
	`com∑ª_ch™√ls
(
a˘uÆ_ch™√l
, &
globÆ_ch™√l
);

274 
îr‹_code
 = 
	`kØ_ch™√l_m™agî_ªmove_å™•‹t_ch™√l
(
ch™√l_m™agî
, 
globÆ_ch™√l_id
);

275 
	`as£π_öt_equÆ
(
KAA_ERR_NONE
, 
îr‹_code
);

277 
a˘uÆ_ch™√l
 = 
	`kØ_ch™√l_m™agî_gë_å™•‹t_ch™√l
(
ch™√l_m™agî
, 
KAA_EXTENSION_LOGGING
);

278 
	`ASSERT_EQUAL
(
a˘uÆ_ch™√l
, 
NULL
);

280 
	`kØ_ch™√l_m™agî_de°roy
(
ch™√l_m™agî
);

281 
	}
}

283 
	$ã°_gë_boŸ°øp_˛õ¡_sync_size
(**
°©e
)

285 ()
°©e
;

287 
kØ_îr‹_t
 
îr‹_code
;

288 
size_t
 
ex≥˘ed_size
 = 0, 
a˘uÆ_size
 = 0;

289 
kØ_ch™√l_m™agî_t
 *
ch™√l_m™agî
 = 
NULL
;

291 
îr‹_code
 = 
	`kØ_ch™√l_m™agî_¸óã
(&
ch™√l_m™agî
, &
kØ_c⁄ãxt
);

292 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

294 
îr‹_code
 = 
	`kØ_ch™√l_m™agî_boŸ°øp_ªque°_gë_size
(
ch™√l_m™agî
, &
a˘uÆ_size
);

295 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

296 
	`ASSERT_EQUAL
(
a˘uÆ_size
, 0);

298 
uöt16_t
 
ch™√l_cou¡
 = 0;

300 
uöt32_t
 
ch™√l1_¥Ÿocﬁ_id
 = 0xAABBCCAA;

301 
uöt16_t
 
¥Ÿocﬁ_vîsi⁄
 = 2;

302 
ã°_ch™√l_c⁄ãxt_t
 
ch™√l_c⁄ãxt1
 = { { 
ch™√l1_¥Ÿocﬁ_id
, 
¥Ÿocﬁ_vîsi⁄
 }

303 , 
NULL


304 , 
SUPPORTED_SERVICES


305 , 
suµ‹ãd_£rvi˚s_cou¡
 };

307 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 
ch™√l1
;

308 
	`ã°_¸óã_ch™√l_öãrÁ˚
(&
ch™√l1
, &
ch™√l_c⁄ãxt1
);

309 ++
ch™√l_cou¡
;

311 
uöt32_t
 
ch™√l2_¥Ÿocﬁ_id
 = 0xAABBCCBB;

312 
ã°_ch™√l_c⁄ãxt_t
 
ch™√l_c⁄ãxt2
 = { { 
ch™√l2_¥Ÿocﬁ_id
, 
¥Ÿocﬁ_vîsi⁄
 }

313 , 
NULL


314 , 
SUPPORTED_SERVICES


315 , 
suµ‹ãd_£rvi˚s_cou¡
 };

317 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 
ch™√l2
;

318 
	`ã°_¸óã_ch™√l_öãrÁ˚
(&
ch™√l2
, &
ch™√l_c⁄ãxt2
);

319 ++
ch™√l_cou¡
;

321 
uöt32_t
 
ch™√l1_id
;

322 
îr‹_code
 = 
	`kØ_ch™√l_m™agî_add_å™•‹t_ch™√l
(
ch™√l_m™agî
, &
ch™√l1
, &
ch™√l1_id
);

323 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

325 
uöt32_t
 
ch™√l2_id
;

326 
îr‹_code
 = 
	`kØ_ch™√l_m™agî_add_å™•‹t_ch™√l
(
ch™√l_m™agî
, &
ch™√l2
, &
ch™√l2_id
);

327 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

329 
îr‹_code
 = 
	`kØ_ch™√l_m™agî_boŸ°øp_ªque°_gë_size
(
ch™√l_m™agî
, &
a˘uÆ_size
);

330 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

332 
ex≥˘ed_size
 +
KAA_EXTENSION_HEADER_SIZE


333 + (
uöt16_t
)

334 + (
uöt16_t
)

335 + 
ch™√l_cou¡
 * ((
uöt32_t
)

336 + (
uöt16_t
)

337 + (
uöt16_t
));

338 
	`ASSERT_EQUAL
(
a˘uÆ_size
, 
ex≥˘ed_size
);

340 
îr‹_code
 = 
	`kØ_ch™√l_m™agî_ªmove_å™•‹t_ch™√l
(
ch™√l_m™agî
, 
ch™√l1_id
);

341 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

342 --
ch™√l_cou¡
;

344 
îr‹_code
 = 
	`kØ_ch™√l_m™agî_boŸ°øp_ªque°_gë_size
(
ch™√l_m™agî
, &
a˘uÆ_size
);

345 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

347 
ex≥˘ed_size
 -(
uöt32_t
)

348 + (
uöt16_t
)

349 + (
uöt16_t
);

350 
	`ASSERT_EQUAL
(
a˘uÆ_size
, 
ex≥˘ed_size
);

352 
îr‹_code
 = 
	`kØ_ch™√l_m™agî_ªmove_å™•‹t_ch™√l
(
ch™√l_m™agî
, 
ch™√l2_id
);

353 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

354 --
ch™√l_cou¡
;

356 
îr‹_code
 = 
	`kØ_ch™√l_m™agî_boŸ°øp_ªque°_gë_size
(
ch™√l_m™agî
, &
a˘uÆ_size
);

357 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

358 
	`ASSERT_EQUAL
(
a˘uÆ_size
, 0);

360 
	`kØ_ch™√l_m™agî_de°roy
(
ch™√l_m™agî
);

361 
	}
}

363 
	$ã°_gë_boŸ°øp_˛õ¡_sync_£rülize
(**
°©e
)

365 ()
°©e
;

367 
uöt16_t
 
ch™√l_cou¡
 = 0;

368 
kØ_îr‹_t
 
îr‹_code
;

369 
size_t
 
sync_size
 = 0;

370 
kØ_ch™√l_m™agî_t
 *
ch™√l_m™agî
 = 
NULL
;

372 
îr‹_code
 = 
	`kØ_ch™√l_m™agî_¸óã
(&
ch™√l_m™agî
, &
kØ_c⁄ãxt
);

373 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

375 
uöt32_t
 
ch™√l1_¥Ÿocﬁ_id
 = 0xAABBCCAA;

376 
uöt16_t
 
¥Ÿocﬁ_vîsi⁄
 = 2;

377 
ã°_ch™√l_c⁄ãxt_t
 
ch™√l_c⁄ãxt1
 = { { 
ch™√l1_¥Ÿocﬁ_id
, 
¥Ÿocﬁ_vîsi⁄
 }

378 , 
NULL


379 , 
SUPPORTED_SERVICES


380 , 
suµ‹ãd_£rvi˚s_cou¡
 };

381 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 
ch™√l1
;

382 
	`ã°_¸óã_ch™√l_öãrÁ˚
(&
ch™√l1
, &
ch™√l_c⁄ãxt1
);

383 ++
ch™√l_cou¡
;

385 
uöt32_t
 
ch™√l2_¥Ÿocﬁ_id
 = 0xAABBCCBB;

386 
ã°_ch™√l_c⁄ãxt_t
 
ch™√l_c⁄ãxt2
 = { { 
ch™√l2_¥Ÿocﬁ_id
, 
¥Ÿocﬁ_vîsi⁄
 }

387 , 
NULL


388 , 
SUPPORTED_SERVICES


389 , 
suµ‹ãd_£rvi˚s_cou¡
 };

390 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 
ch™√l2
;

391 
	`ã°_¸óã_ch™√l_öãrÁ˚
(&
ch™√l2
, &
ch™√l_c⁄ãxt2
);

392 ++
ch™√l_cou¡
;

394 
îr‹_code
 = 
	`kØ_ch™√l_m™agî_add_å™•‹t_ch™√l
(
ch™√l_m™agî
, &
ch™√l1
, 
NULL
);

395 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

397 
îr‹_code
 = 
	`kØ_ch™√l_m™agî_add_å™•‹t_ch™√l
(
ch™√l_m™agî
, &
ch™√l2
, 
NULL
);

398 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

400 
îr‹_code
 = 
	`kØ_ch™√l_m™agî_boŸ°øp_ªque°_gë_size
(
ch™√l_m™agî
, &
sync_size
);

401 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

403 
uöt8_t
 
m™uÆ_buf„r
[
sync_size
];

404 
uöt8_t
 
auto_buf„r
[
sync_size
];

406 
kØ_∂©f‹m_mesßge_wrôî_t
 *
m™uÆ_wrôî
;

407 
kØ_∂©f‹m_mesßge_wrôî_t
 *
auto_wrôî
;

409 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôî_¸óã
(&
m™uÆ_wrôî
, 
m™uÆ_buf„r
, 
sync_size
);

410 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

412 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôî_¸óã
(&
auto_wrôî
, 
auto_buf„r
, 
sync_size
);

413 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

415 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe_exãnsi⁄_hódî
(
m™uÆ_wrôî


416 , 
KAA_EXTENSION_BOOTSTRAP


418 , (
sync_size
 - 
KAA_EXTENSION_HEADER_SIZE
));

419 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

421 
uöt16_t
 
ªque°_id
 = 1;

422 
uöt16_t
 
√tw‹k_byãs_16
;

423 
uöt32_t
 
√tw‹k_byãs_32
;

425 
√tw‹k_byãs_16
 = 
	`KAA_HTONS
(
ªque°_id
);

426 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
m™uÆ_wrôî
, &
√tw‹k_byãs_16
, (network_bytes_16));

427 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

429 
√tw‹k_byãs_16
 = 
	`KAA_HTONS
(
ch™√l_cou¡
);

430 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
m™uÆ_wrôî
, &
√tw‹k_byãs_16
, (network_bytes_16));

431 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

434 
kØ_å™•‹t_¥Ÿocﬁ_id_t
 
¥Ÿocﬁ_öfo
;

435 
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *
ch™√ls
[] = { &
ch™√l1


436 , &
ch™√l2
 };

437 
	`ASSERT_EQUAL
(
ch™√l_cou¡
, (
ch™√ls
Ë/ (
kØ_å™•‹t_ch™√l_öãrÁ˚_t
 *));

439 
ch™√l_cou¡
--) {

440 
îr‹_code
 = 
ch™√ls
[
ch™√l_cou¡
]->
	`gë_¥Ÿocﬁ_id
(ch™√ls[ch™√l_cou¡]->
c⁄ãxt
, &
¥Ÿocﬁ_öfo
);

441 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

443 
√tw‹k_byãs_32
 = 
	`KAA_HTONL
(
¥Ÿocﬁ_öfo
.
id
);

444 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
m™uÆ_wrôî
, &
√tw‹k_byãs_32
, (network_bytes_32));

445 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

447 
√tw‹k_byãs_16
 = 
	`KAA_HTONS
(
¥Ÿocﬁ_öfo
.
vîsi⁄
);

448 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
m™uÆ_wrôî
, &
√tw‹k_byãs_16
, (network_bytes_16));

449 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

451 
√tw‹k_byãs_16
 = 0;

452 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
m™uÆ_wrôî
, &
√tw‹k_byãs_16
, (network_bytes_16));

453 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

456 
îr‹_code
 = 
	`kØ_ch™√l_m™agî_boŸ°øp_ªque°_£rülize
(
ch™√l_m™agî
, 
auto_wrôî
);

457 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

459 
	`ASSERT_EQUAL
(0, 
	`memcmp
(
auto_buf„r
, 
m™uÆ_buf„r
, 
sync_size
));

461 
	`kØ_∂©f‹m_mesßge_wrôî_de°roy
(
m™uÆ_wrôî
);

462 
	`kØ_∂©f‹m_mesßge_wrôî_de°roy
(
auto_wrôî
);

464 
	`kØ_ch™√l_m™agî_de°roy
(
ch™√l_m™agî
);

465 
	}
}

467 
	$ã°_¥o˚ss_auth_Áûuª
(**
°©e
)

469 ()
°©e
;

471 
kØ_îr‹_t
 
îr‹_code
;

472 
kØ_ch™√l_m™agî_t
 *
ch™√l_m™agî
 = 
NULL
;

473 
kØ_auth_Áûuª_ªas⁄
 
ªas⁄
;

475 
îr‹_code
 = 
	`kØ_ch™√l_m™agî_¸óã
(&
ch™√l_m™agî
, &
kØ_c⁄ãxt
);

476 
	`as£π_öt_equÆ
(
îr‹_code
, 
KAA_ERR_NONE
);

477 
	`kØ_ch™√l_m™agî_£t_auth_Áûuª_h™dÀr
(
ch™√l_m™agî
, 
ã°_auth_Áûuª_h™dÀr
, &
ªas⁄
);

479 
	`kØ_ch™√l_m™agî_¥o˚ss_auth_Áûuª
(
ch™√l_m™agî
, 
KAA_AUTH_STATUS_BAD_CREDENTIALS
);

480 
	`as£π_öt_equÆ
(
ªas⁄
, 
KAA_AUTH_STATUS_BAD_CREDENTIALS
);

482 
	`kØ_ch™√l_m™agî_¥o˚ss_auth_Áûuª
(
ch™√l_m™agî
, 
KAA_AUTH_STATUS_VERIFICATION_FAILED
);

483 
	`as£π_öt_equÆ
(
ªas⁄
, 
KAA_AUTH_STATUS_VERIFICATION_FAILED
);

484 
	}
}

486 
	$ã°_öô
()

488 
	`§™d
(
	`time
(
NULL
));

490 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_log_¸óã
(&
loggî
, 
KAA_MAX_LOG_MESSAGE_LENGTH
, 
KAA_MAX_LOG_LEVEL
, 
NULL
);

491 i‡(
îr‹
 || !
loggî
)

492  
îr‹
;

494 
kØ_c⁄ãxt
.
loggî
 =Üogger;

495 
kØ_c⁄ãxt
.
boŸ°øp_m™agî
 = 
NULL
;

496 
kØ_c⁄ãxt
.
∂©f‹m_¥Ÿocﬁ
 = 
NULL
;

499 
	}
}

501 
	$ã°_deöô
()

503 
	`kØ_log_de°roy
(
loggî
);

505 
	}
}

509 
KAA_SUITE_MAIN
(
Log
, 
ã°_öô
, 
ã°_deöô


511 
	$KAA_TEST_CASE
(
¸óã_ch™√l_m™agî
, 
ã°_¸óã_ch™√l_m™agî
)

519 
	`KAA_TEST_CASE
(
¥o˚ss_auth_Áliuª
, 
ã°_¥o˚ss_auth_Áûuª
)

	@/var/www/html/debian/gateway/kaa/test/test_kaa_common.c

17 
	~<°dio.h
>

18 
	~<°rög.h
>

19 
	~<°döt.h
>

21 
	~"∂©f‹m/ext_sha.h
"

22 
	~"kØ_ã°.h
"

23 
	~"kØ_comm⁄.h
"

24 
	~"kØ_îr‹.h
"

25 
	~"utûôõs/kØ_log.h
"

27 
kØ_loggî_t
 *
	gloggî
 = 
NULL
;

29 
	$ã°_¥ofûe_upd©e
(**
°©e
)

31 ()
°©e
;

33 * 
∑âîn
 = "a94a8fe5ccb19ba61c4c0873d391e987982fbbd3";

35 
kØ_îr‹_t
 
îr
;

36 * 
body
 = "test";

37 
kØ_dige°
 
ˇlcuœãd_hash
;

39 
îr
 = 
	`ext_ˇlcuœã_sha_hash
(
NULL
, 50, 
ˇlcuœãd_hash
);

40 
	`ASSERT_NOT_EQUAL
(
îr
, 
KAA_ERR_NONE
);

41 
îr
 = 
	`ext_ˇlcuœã_sha_hash
(
body
, 0, 
ˇlcuœãd_hash
);

42 
	`ASSERT_EQUAL
(
îr
, 
KAA_ERR_NONE
);

43 
îr
 = 
	`ext_ˇlcuœã_sha_hash
(
body
, 4, 
NULL
);

44 
	`ASSERT_NOT_EQUAL
(
îr
, 
KAA_ERR_NONE
);

46 
îr
 = 
	`ext_ˇlcuœã_sha_hash
(
body
, 4, 
ˇlcuœãd_hash
);

47 
	`ASSERT_EQUAL
(
îr
, 
KAA_ERR_NONE
);

49 
buf
[
SHA_1_DIGEST_LENGTH
 * 2 + 1];

50 
i
 = 0; i < 
SHA_1_DIGEST_LENGTH
; ++i) {

51 
	`•rötf
(&
buf
[
i
 * 2], "%02x", 
ˇlcuœãd_hash
[i]);

54 
	`ASSERT_EQUAL
(0, 
	`memcmp
(
buf
, 
∑âîn
, 
SHA_1_DIGEST_LENGTH
 * 2));

55 
	}
}

57 
	$ã°_öô
()

59 
	`kØ_log_¸óã
(&
loggî
, 
KAA_MAX_LOG_MESSAGE_LENGTH
, 
KAA_MAX_LOG_LEVEL
, 
NULL
);

61 
	}
}

63 
	$ã°_deöô
()

65 
	`kØ_log_de°roy
(
loggî
);

67 
	}
}

69 
KAA_SUITE_MAIN
(
Comm⁄
, 
ã°_öô
, 
ã°_deöô


70 , 
KAA_TEST_CASE
(
ˇlcuœã_hash
, 
ã°_¥ofûe_upd©e
)

	@/var/www/html/debian/gateway/kaa/test/test_kaa_common_schema.c

17 
	~<°döt.h
>

18 
	~<°dio.h
>

19 
	~<time.h
>

20 
	~<°rög.h
>

22 
	~"kØ_ã°.h
"

24 
	~"kØ_comm⁄_schema.h
"

25 
	~"utûôõs/kØ_log.h
"

26 
	~"utûôõs/kØ_mem.h
"

27 
	~"avro_§c/ícodög.h
"

28 
	~"avro_§c/avro/io.h
"

29 
	~"kØ_comm⁄.h
"

33 
kØ_loggî_t
 *
	gloggî
 = 
NULL
;

37 
	$ã°_°rög_move_¸óã
(**
°©e
)

39 ()
°©e
;

41 
	`ASSERT_NULL
(
	`kØ_°rög_move_¸óã
(
NULL
, NULL));

43 c⁄° *
∂aö_ã°_°r1
 = "test";

45 
kØ_°rög_t
 *
kØ_°r1
 = 
	`kØ_°rög_move_¸óã
(
∂aö_ã°_°r1
, 
NULL
);

47 
	`ASSERT_NOT_NULL
(
kØ_°r1
);

48 
	`ASSERT_NOT_NULL
(
kØ_°r1
->
d©a
);

49 
	`ASSERT_NULL
(
kØ_°r1
->
de°roy
);

50 
	`ASSERT_EQUAL
(
	`°rcmp
(
kØ_°r1
->
d©a
, 
∂aö_ã°_°r1
), 0);

52 
	`kØ_°rög_de°roy
(
kØ_°r1
);

53 
kØ_°r1
 = 
NULL
;

55 *
∂aö_ã°_°r2
 = (*)
	`KAA_MALLOC
(
	`°æí
(
∂aö_ã°_°r1
) + 1);

56 
	`ASSERT_NOT_NULL
(
∂aö_ã°_°r2
);

57 
	`°r˝y
(
∂aö_ã°_°r2
, 
∂aö_ã°_°r1
);

59 
kØ_°rög_t
 *
kØ_°r2
 = 
	`kØ_°rög_move_¸óã
(
∂aö_ã°_°r2
, &
kØ_d©a_de°roy
);

61 
	`ASSERT_NOT_NULL
(
kØ_°r2
);

62 
	`ASSERT_NOT_NULL
(
kØ_°r2
->
d©a
);

63 
	`ASSERT_EQUAL
(
kØ_°r2
->
de°roy
, &
kØ_d©a_de°roy
);

64 
	`ASSERT_EQUAL
(
	`°rcmp
(
kØ_°r2
->
d©a
, 
∂aö_ã°_°r1
), 0);

66 
	`kØ_°rög_de°roy
(
kØ_°r2
);

67 
	}
}

71 
	$ã°_°rög_c›y_¸óã
(**
°©e
)

73 ()
°©e
;

75 c⁄° *
∂aö_ã°_°r1
 = "test";

77 
	`ASSERT_NULL
(
	`kØ_°rög_c›y_¸óã
(
NULL
));

79 
kØ_°rög_t
 *
kØ_°r1
 = 
	`kØ_°rög_c›y_¸óã
(
∂aö_ã°_°r1
);

80 
	`ASSERT_NOT_NULL
(
kØ_°r1
);

81 
	`ASSERT_NOT_NULL
(
kØ_°r1
->
d©a
);

82 
	`ASSERT_EQUAL
(
kØ_°r1
->
de°roy
, &
kØ_d©a_de°roy
);

83 
	`ASSERT_EQUAL
(
	`°rcmp
(
kØ_°r1
->
d©a
, 
∂aö_ã°_°r1
), 0);

85 
	`kØ_°rög_de°roy
(
kØ_°r1
);

86 
	}
}

90 
	$ã°_°rög_gë_size
(**
°©e
)

92 ()
°©e
;

94 
	`ASSERT_EQUAL
(
	`kØ_°rög_gë_size
(
NULL
), 0);

96 c⁄° *
∂aö_ã°_°r1
 = "test";

97 
kØ_°rög_t
 *
kØ_°r1
 = 
	`kØ_°rög_c›y_¸óã
(
∂aö_ã°_°r1
);

98 
	`ASSERT_NOT_NULL
(
kØ_°r1
);

100 
size_t
 
∂aö_ã°_°r1_Àn
 = 
	`°æí
(
∂aö_ã°_°r1
);

101 
	`ASSERT_EQUAL
(
	`kØ_°rög_gë_size
(
kØ_°r1
), 
	`avro_l⁄g_gë_size
(
∂aö_ã°_°r1_Àn
) +Ölain_test_str1_len);

103 
	`kØ_°rög_de°roy
(
kØ_°r1
);

104 
	}
}

108 
	$ã°_°rög_£rülize
(**
°©e
)

110 ()
°©e
;

112 c⁄° *
∂aö_ã°_°r1
 = "test";

113 
kØ_°rög_t
 *
kØ_°r1
 = 
	`kØ_°rög_c›y_¸óã
(
∂aö_ã°_°r1
);

114 
	`ASSERT_NOT_NULL
(
kØ_°r1
);

116 
size_t
 
ex≥˘ed_size
 = 
	`kØ_°rög_gë_size
(
kØ_°r1
);

117 
auto_buf„r
[
ex≥˘ed_size
];

118 
avro_wrôî_t
 
auto_avro_wrôî
 = 
	`avro_wrôî_mem‹y
(
auto_buf„r
, 
ex≥˘ed_size
);

119 
m™uÆ_buf„r
[
ex≥˘ed_size
];

120 
avro_wrôî_t
 
m™uÆ_avro_wrôî
 = 
	`avro_wrôî_mem‹y
(
m™uÆ_buf„r
, 
ex≥˘ed_size
);

122 
	`ASSERT_EQUAL
(
auto_avro_wrôî
->
buf
, 
auto_buf„r
);

123 
	`ASSERT_EQUAL
(
auto_avro_wrôî
->
wrôãn
, 0);

124 
	`ASSERT_EQUAL
((
size_t
)
auto_avro_wrôî
->
Àn
, 
ex≥˘ed_size
);

126 
	`kØ_°rög_£rülize
(
auto_avro_wrôî
, 
NULL
);

128 
	`ASSERT_EQUAL
(
auto_avro_wrôî
->
buf
, 
auto_buf„r
);

129 
	`ASSERT_EQUAL
(
auto_avro_wrôî
->
wrôãn
, 0);

130 
	`ASSERT_EQUAL
((
size_t
)
auto_avro_wrôî
->
Àn
, 
ex≥˘ed_size
);

132 
kØ_°rög_t
 
Áke_kØ_°r
 = { 
NULL
, NULL};

134 
	`kØ_°rög_£rülize
(
auto_avro_wrôî
, &
Áke_kØ_°r
);

136 
	`ASSERT_EQUAL
(
auto_avro_wrôî
->
buf
, 
auto_buf„r
);

137 
	`ASSERT_EQUAL
(
auto_avro_wrôî
->
wrôãn
, 0);

138 
	`ASSERT_EQUAL
((
size_t
)
auto_avro_wrôî
->
Àn
, 
ex≥˘ed_size
);

143 
	`kØ_°rög_£rülize
(
auto_avro_wrôî
, 
kØ_°r1
);

145 
avro_bö¨y_ícodög
.
	`wrôe_°rög
(
m™uÆ_avro_wrôî
, 
∂aö_ã°_°r1
);

147 
	`ASSERT_EQUAL
(
	`memcmp
(
auto_buf„r
, 
m™uÆ_buf„r
, 
ex≥˘ed_size
), 0);

149 
	`kØ_°rög_de°roy
(
kØ_°r1
);

150 
	`avro_wrôî_‰ì
(
m™uÆ_avro_wrôî
);

151 
	`avro_wrôî_‰ì
(
auto_avro_wrôî
);

152 
	}
}

156 
	$ã°_°rög_de£rülize
(**
°©e
)

158 ()
°©e
;

160 c⁄° *
∂aö_ã°_°r1
 = "test";

161 
kØ_°rög_t
 *
kØ_°r1
 = 
	`kØ_°rög_c›y_¸óã
(
∂aö_ã°_°r1
);

162 
	`ASSERT_NOT_NULL
(
kØ_°r1
);

164 
size_t
 
ex≥˘ed_size
 = 
	`kØ_°rög_gë_size
(
kØ_°r1
);

165 
buf„r
[
ex≥˘ed_size
];

166 
avro_wrôî_t
 
avro_wrôî
 = 
	`avro_wrôî_mem‹y
(
buf„r
, 
ex≥˘ed_size
);

168 
	`kØ_°rög_£rülize
(
avro_wrôî
, 
kØ_°r1
);

170 
avro_ªadî_t
 
avro_ªadî
 = 
	`avro_ªadî_mem‹y
(
buf„r
, 
ex≥˘ed_size
);

172 
kØ_°rög_t
 *
kØ_°r2
 = 
	`kØ_°rög_de£rülize
(
avro_ªadî
);

173 
	`ASSERT_NOT_NULL
(
kØ_°r2
);

175 
	`ASSERT_EQUAL
(
	`°rcmp
(
kØ_°r2
->
d©a
, 
∂aö_ã°_°r1
), 0);

176 
	`ASSERT_EQUAL
(
	`°rcmp
(
kØ_°r2
->
d©a
, 
kØ_°r1
->data), 0);

178 
	`kØ_°rög_de°roy
(
kØ_°r2
);

179 
	`avro_ªadî_‰ì
(
avro_ªadî
);

180 
	`avro_wrôî_‰ì
(
avro_wrôî
);

181 
	`kØ_°rög_de°roy
(
kØ_°r1
);

182 
	}
}

186 
	$ã°_byãs_move_¸óã
(**
°©e
)

188 ()
°©e
;

190 c⁄° 
uöt8_t
 
unu£d_byãs
[] = { 0x0, 0x1, 0x2, 0x3, 0x4 };

192 
	`ASSERT_NULL
(
	`kØ_byãs_move_¸óã
(
NULL
, 0, NULL));

193 
	`ASSERT_NULL
(
	`kØ_byãs_move_¸óã
(
NULL
, 1 + 
	`ønd
(), NULL));

194 
	`ASSERT_NULL
(
	`kØ_byãs_move_¸óã
(
unu£d_byãs
, 0, 
NULL
));

196 c⁄° 
uöt8_t
 
∂aö_byãs1
[] = { 0x0, 0x1, 0x2, 0x3, 0x4 };

197 
size_t
 
∂aö_byãs1_size
 = (
∂aö_byãs1
) / ();

199 
kØ_byãs_t
 *
kØ_byãs1
 = 
	`kØ_byãs_move_¸óã
(
∂aö_byãs1
, 
∂aö_byãs1_size
, 
NULL
);

201 
	`ASSERT_NOT_NULL
(
kØ_byãs1
);

202 
	`ASSERT_EQUAL
((
size_t
)
kØ_byãs1
->
size
, 
∂aö_byãs1_size
);

203 
	`ASSERT_NULL
(
kØ_byãs1
->
de°roy
);

204 
	`ASSERT_EQUAL
(
	`memcmp
(
kØ_byãs1
->
buf„r
, 
∂aö_byãs1
, 
∂aö_byãs1_size
), 0);

206 
	`kØ_byãs_de°roy
(
kØ_byãs1
);

207 
kØ_byãs1
 = 
NULL
;

209 
uöt8_t
 *
∂aö_byãs2
 = (uöt8_à*)
	`KAA_MALLOC
(
∂aö_byãs1_size
);

210 
	`ASSERT_NOT_NULL
(
∂aö_byãs2
);

211 
	`mem˝y
(
∂aö_byãs2
, 
∂aö_byãs1
, 
∂aö_byãs1_size
);

213 
kØ_byãs_t
 *
kØ_byãs2
 = 
	`kØ_byãs_move_¸óã
(
∂aö_byãs2
, 
∂aö_byãs1_size
, &
kØ_d©a_de°roy
);

215 
	`ASSERT_NOT_NULL
(
kØ_byãs2
);

216 
	`ASSERT_EQUAL
((
size_t
)
kØ_byãs2
->
size
, 
∂aö_byãs1_size
);

217 
	`ASSERT_EQUAL
(
kØ_byãs2
->
de°roy
, &
kØ_d©a_de°roy
);

218 
	`ASSERT_EQUAL
(
	`memcmp
(
kØ_byãs2
->
buf„r
, 
∂aö_byãs1
, 
∂aö_byãs1_size
), 0);

220 
	`kØ_byãs_de°roy
(
kØ_byãs2
);

221 
	}
}

225 
	$ã°_byãs_c›y_¸óã
(**
°©e
)

227 ()
°©e
;

229 c⁄° 
uöt8_t
 
unu£d_byãs
[] = { 0x0, 0x1, 0x2, 0x3, 0x4 };

231 
	`ASSERT_NULL
(
	`kØ_byãs_c›y_¸óã
(
NULL
, 1 + 
	`ønd
()));

232 
	`ASSERT_NULL
(
	`kØ_byãs_c›y_¸óã
(
unu£d_byãs
, 0));

234 c⁄° 
uöt8_t
 
∂aö_byãs1
[] = { 0x0, 0x1, 0x2, 0x3, 0x4 };

235 
size_t
 
∂aö_byãs1_size
 = (
∂aö_byãs1
) / ();

237 
kØ_byãs_t
 *
kØ_byãs1
 = 
	`kØ_byãs_c›y_¸óã
(
∂aö_byãs1
, 
∂aö_byãs1_size
);

239 
	`ASSERT_NOT_NULL
(
kØ_byãs1
);

240 
	`ASSERT_EQUAL
((
size_t
)
kØ_byãs1
->
size
, 
∂aö_byãs1_size
);

241 
	`ASSERT_EQUAL
(
kØ_byãs1
->
de°roy
, &
kØ_d©a_de°roy
);

242 
	`ASSERT_EQUAL
(
	`memcmp
(
kØ_byãs1
->
buf„r
, 
∂aö_byãs1
, 
∂aö_byãs1_size
), 0);

244 
	`kØ_byãs_de°roy
(
kØ_byãs1
);

245 
	}
}

249 
	$ã°_byãs_gë_size
(**
°©e
)

251 ()
°©e
;

253 
	`ASSERT_EQUAL
(
	`kØ_byãs_gë_size
(
NULL
), 0);

255 c⁄° 
uöt8_t
 
∂aö_byãs1
[] = { 0x0, 0x1, 0x2, 0x3, 0x4 };

256 
size_t
 
∂aö_byãs1_size
 = (
∂aö_byãs1
) / ();

258 
kØ_byãs_t
 *
kØ_byãs1
 = 
	`kØ_byãs_c›y_¸óã
(
∂aö_byãs1
, 
∂aö_byãs1_size
);

259 
	`ASSERT_EQUAL
(
	`kØ_byãs_gë_size
(
kØ_byãs1
), 
	`avro_l⁄g_gë_size
(kØ_byãs1->
size
) + kaa_bytes1->size);

261 
	`kØ_byãs_de°roy
(
kØ_byãs1
);

262 
	}
}

266 
	$ã°_byãs_£rülize
(**
°©e
)

268 ()
°©e
;

270 c⁄° 
uöt8_t
 
∂aö_byãs1
[] = { 0x0, 0x1, 0x2, 0x3, 0x4 };

271 
size_t
 
∂aö_byãs1_size
 = (
∂aö_byãs1
) / ();

273 
kØ_byãs_t
 *
kØ_byãs1
 = 
	`kØ_byãs_c›y_¸óã
(
∂aö_byãs1
, 
∂aö_byãs1_size
);

275 
size_t
 
ex≥˘ed_size
 = 
	`kØ_byãs_gë_size
(
kØ_byãs1
);

276 
auto_buf„r
[
ex≥˘ed_size
];

277 
avro_wrôî_t
 
auto_avro_wrôî
 = 
	`avro_wrôî_mem‹y
(
auto_buf„r
, 
ex≥˘ed_size
);

278 
m™uÆ_buf„r
[
ex≥˘ed_size
];

279 
avro_wrôî_t
 
m™uÆ_avro_wrôî
 = 
	`avro_wrôî_mem‹y
(
m™uÆ_buf„r
, 
ex≥˘ed_size
);

281 
	`ASSERT_EQUAL
(
auto_avro_wrôî
->
buf
, 
auto_buf„r
);

282 
	`ASSERT_EQUAL
(
auto_avro_wrôî
->
wrôãn
, 0);

283 
	`ASSERT_EQUAL
((
size_t
)
auto_avro_wrôî
->
Àn
, 
ex≥˘ed_size
);

285 
	`kØ_byãs_£rülize
(
auto_avro_wrôî
, 
NULL
);

287 
	`ASSERT_EQUAL
(
auto_avro_wrôî
->
buf
, 
auto_buf„r
);

288 
	`ASSERT_EQUAL
(
auto_avro_wrôî
->
wrôãn
, 0);

289 
	`ASSERT_EQUAL
((
size_t
)
auto_avro_wrôî
->
Àn
, 
ex≥˘ed_size
);

291 
kØ_byãs_t
 
Áke_kØ_byãs
 = { 
NULL
, 0, NULL };

293 
	`kØ_byãs_£rülize
(
auto_avro_wrôî
, &
Áke_kØ_byãs
);

295 
	`ASSERT_EQUAL
(
auto_avro_wrôî
->
buf
, 
auto_buf„r
);

296 
	`ASSERT_EQUAL
(
auto_avro_wrôî
->
wrôãn
, 0);

297 
	`ASSERT_EQUAL
((
size_t
)
auto_avro_wrôî
->
Àn
, 
ex≥˘ed_size
);

302 
	`kØ_byãs_£rülize
(
auto_avro_wrôî
, 
kØ_byãs1
);

304 
avro_bö¨y_ícodög
.
	`wrôe_byãs
(
m™uÆ_avro_wrôî
, (c⁄° *)
∂aö_byãs1
, 
∂aö_byãs1_size
);

306 
	`ASSERT_EQUAL
(
	`memcmp
(
auto_buf„r
, 
m™uÆ_buf„r
, 
ex≥˘ed_size
), 0);

308 
	`kØ_byãs_de°roy
(
kØ_byãs1
);

309 
	`avro_wrôî_‰ì
(
m™uÆ_avro_wrôî
);

310 
	`avro_wrôî_‰ì
(
auto_avro_wrôî
);

311 
	}
}

315 
	$ã°_byãs_de£rülize
(**
°©e
)

317 ()
°©e
;

319 c⁄° 
uöt8_t
 
∂aö_byãs1
[] = { 0x0, 0x1, 0x2, 0x3, 0x4 };

320 
size_t
 
∂aö_byãs1_size
 = (
∂aö_byãs1
) / ();

322 
kØ_byãs_t
 *
kØ_byãs1
 = 
	`kØ_byãs_c›y_¸óã
(
∂aö_byãs1
, 
∂aö_byãs1_size
);

323 
	`ASSERT_NOT_NULL
(
kØ_byãs1
);

325 
size_t
 
ex≥˘ed_size
 = 
	`kØ_byãs_gë_size
(
kØ_byãs1
);

326 
buf„r
[
ex≥˘ed_size
];

327 
avro_wrôî_t
 
avro_wrôî
 = 
	`avro_wrôî_mem‹y
(
buf„r
, 
ex≥˘ed_size
);

329 
	`kØ_byãs_£rülize
(
avro_wrôî
, 
kØ_byãs1
);

331 
avro_ªadî_t
 
avro_ªadî
 = 
	`avro_ªadî_mem‹y
(
buf„r
, 
ex≥˘ed_size
);

333 
kØ_byãs_t
 *
kØ_byãs2
 = 
	`kØ_byãs_de£rülize
(
avro_ªadî
);

334 
	`ASSERT_NOT_NULL
(
kØ_byãs2
);

336 
	`ASSERT_EQUAL
(
	`memcmp
(
kØ_byãs2
->
buf„r
, 
∂aö_byãs1
, 
∂aö_byãs1_size
), 0);

337 
	`ASSERT_EQUAL
(
	`memcmp
(
kØ_byãs2
->
buf„r
, 
kØ_byãs1
->buf„r, 
∂aö_byãs1_size
), 0);

339 
	`kØ_byãs_de°roy
(
kØ_byãs2
);

340 
	`avro_ªadî_‰ì
(
avro_ªadî
);

341 
	`avro_wrôî_‰ì
(
avro_wrôî
);

342 
	`kØ_byãs_de°roy
(
kØ_byãs1
);

343 
	}
}

347 
	$ã°_fixed_move_¸óã
(**
°©e
)

349 ()
°©e
;

351 c⁄° 
uöt8_t
 
unu£d_fixed
[] = { 0x0, 0x1, 0x2, 0x3, 0x4 };

353 
	`ASSERT_NULL
(
	`kØ_fixed_move_¸óã
(
NULL
, 0, NULL));

354 
	`ASSERT_NULL
(
	`kØ_fixed_move_¸óã
(
NULL
, 1 + 
	`ønd
(), NULL));

355 
	`ASSERT_NULL
(
	`kØ_fixed_move_¸óã
(
unu£d_fixed
, 0, 
NULL
));

357 c⁄° 
uöt8_t
 
∂aö_fixed1
[] = { 0x0, 0x1, 0x2, 0x3, 0x4 };

358 
size_t
 
∂aö_fixed1_size
 = (
∂aö_fixed1
) / ();

360 
kØ_byãs_t
 *
kØ_fixed1
 = 
	`kØ_fixed_move_¸óã
(
∂aö_fixed1
, 
∂aö_fixed1_size
, 
NULL
);

362 
	`ASSERT_NOT_NULL
(
kØ_fixed1
);

363 
	`ASSERT_EQUAL
((
size_t
)
kØ_fixed1
->
size
, 
∂aö_fixed1_size
);

364 
	`ASSERT_NULL
(
kØ_fixed1
->
de°roy
);

365 
	`ASSERT_EQUAL
(
	`memcmp
(
kØ_fixed1
->
buf„r
, 
∂aö_fixed1
, 
∂aö_fixed1_size
), 0);

367 
	`kØ_fixed_de°roy
(
kØ_fixed1
);

368 
kØ_fixed1
 = 
NULL
;

370 
uöt8_t
 *
∂aö_fixed2
 = (uöt8_à*)
	`KAA_MALLOC
(
∂aö_fixed1_size
);

371 
	`ASSERT_NOT_NULL
(
∂aö_fixed2
);

372 
	`mem˝y
(
∂aö_fixed2
, 
∂aö_fixed1
, 
∂aö_fixed1_size
);

374 
kØ_byãs_t
 *
kØ_fixed2
 = 
	`kØ_fixed_move_¸óã
(
∂aö_fixed2
, 
∂aö_fixed1_size
, &
kØ_d©a_de°roy
);

376 
	`ASSERT_NOT_NULL
(
kØ_fixed2
);

377 
	`ASSERT_EQUAL
((
size_t
)
kØ_fixed2
->
size
, 
∂aö_fixed1_size
);

378 
	`ASSERT_EQUAL
(
kØ_fixed2
->
de°roy
, &
kØ_d©a_de°roy
);

379 
	`ASSERT_EQUAL
(
	`memcmp
(
kØ_fixed2
->
buf„r
, 
∂aö_fixed1
, 
∂aö_fixed1_size
), 0);

381 
	`kØ_fixed_de°roy
(
kØ_fixed2
);

382 
	}
}

386 
	$ã°_fixed_c›y_¸óã
(**
°©e
)

388 ()
°©e
;

390 c⁄° 
uöt8_t
 
unu£d_fixed
[] = { 0x0, 0x1, 0x2, 0x3, 0x4 };

392 
	`ASSERT_NULL
(
	`kØ_fixed_c›y_¸óã
(
NULL
, 1 + 
	`ønd
()));

393 
	`ASSERT_NULL
(
	`kØ_fixed_c›y_¸óã
(
unu£d_fixed
, 0));

395 c⁄° 
uöt8_t
 
∂aö_fixed1
[] = { 0x0, 0x1, 0x2, 0x3, 0x4 };

396 
size_t
 
∂aö_fixed1_size
 = (
∂aö_fixed1
) / ();

398 
kØ_byãs_t
 *
kØ_fixed1
 = 
	`kØ_fixed_c›y_¸óã
(
∂aö_fixed1
, 
∂aö_fixed1_size
);

400 
	`ASSERT_NOT_NULL
(
kØ_fixed1
);

401 
	`ASSERT_EQUAL
((
size_t
)
kØ_fixed1
->
size
, 
∂aö_fixed1_size
);

402 
	`ASSERT_EQUAL
(
kØ_fixed1
->
de°roy
, &
kØ_d©a_de°roy
);

403 
	`ASSERT_EQUAL
(
	`memcmp
(
kØ_fixed1
->
buf„r
, 
∂aö_fixed1
, 
∂aö_fixed1_size
), 0);

405 
	`kØ_fixed_de°roy
(
kØ_fixed1
);

406 
	}
}

410 
	$ã°_fixed_gë_size
(**
°©e
)

412 ()
°©e
;

414 
	`ASSERT_EQUAL
(
	`kØ_fixed_gë_size
(
NULL
), 0);

416 c⁄° 
uöt8_t
 
∂aö_fixed1
[] = { 0x0, 0x1, 0x2, 0x3, 0x4 };

417 
size_t
 
∂aö_fixed1_size
 = (
∂aö_fixed1
) / ();

419 
kØ_byãs_t
 *
kØ_fixed1
 = 
	`kØ_fixed_c›y_¸óã
(
∂aö_fixed1
, 
∂aö_fixed1_size
);

420 
	`ASSERT_EQUAL
(
	`kØ_fixed_gë_size
(
kØ_fixed1
), (
size_t
)kØ_fixed1->
size
);

422 
	`kØ_fixed_de°roy
(
kØ_fixed1
);

423 
	}
}

427 
	$ã°_fixed_£rülize
(**
°©e
)

429 ()
°©e
;

431 
uöt8_t
 
∂aö_fixed1
[] = { 0x0, 0x1, 0x2, 0x3, 0x4 };

432 
size_t
 
∂aö_fixed1_size
 = (
∂aö_fixed1
) / ();

434 
kØ_byãs_t
 *
kØ_fixed1
 = 
	`kØ_fixed_c›y_¸óã
(
∂aö_fixed1
, 
∂aö_fixed1_size
);

436 
size_t
 
ex≥˘ed_size
 = 
	`kØ_fixed_gë_size
(
kØ_fixed1
);

437 
auto_buf„r
[
ex≥˘ed_size
];

438 
avro_wrôî_t
 
auto_avro_wrôî
 = 
	`avro_wrôî_mem‹y
(
auto_buf„r
, 
ex≥˘ed_size
);

439 
m™uÆ_buf„r
[
ex≥˘ed_size
];

440 
avro_wrôî_t
 
m™uÆ_avro_wrôî
 = 
	`avro_wrôî_mem‹y
(
m™uÆ_buf„r
, 
ex≥˘ed_size
);

442 
	`ASSERT_EQUAL
(
auto_avro_wrôî
->
buf
, 
auto_buf„r
);

443 
	`ASSERT_EQUAL
(
auto_avro_wrôî
->
wrôãn
, 0);

444 
	`ASSERT_EQUAL
((
size_t
)
auto_avro_wrôî
->
Àn
, 
ex≥˘ed_size
);

446 
	`kØ_fixed_£rülize
(
auto_avro_wrôî
, 
NULL
);

448 
	`ASSERT_EQUAL
(
auto_avro_wrôî
->
buf
, 
auto_buf„r
);

449 
	`ASSERT_EQUAL
(
auto_avro_wrôî
->
wrôãn
, 0);

450 
	`ASSERT_EQUAL
((
size_t
)
auto_avro_wrôî
->
Àn
, 
ex≥˘ed_size
);

452 
kØ_byãs_t
 
Áke_kØ_fixed
 = { 
NULL
, 0, NULL };

454 
	`kØ_fixed_£rülize
(
auto_avro_wrôî
, &
Áke_kØ_fixed
);

456 
	`ASSERT_EQUAL
(
auto_avro_wrôî
->
buf
, 
auto_buf„r
);

457 
	`ASSERT_EQUAL
(
auto_avro_wrôî
->
wrôãn
, 0);

458 
	`ASSERT_EQUAL
((
size_t
)
auto_avro_wrôî
->
Àn
, 
ex≥˘ed_size
);

463 
	`kØ_fixed_£rülize
(
auto_avro_wrôî
, 
kØ_fixed1
);

465 
	`avro_wrôe
(
m™uÆ_avro_wrôî
, 
∂aö_fixed1
, 
∂aö_fixed1_size
);

467 
	`ASSERT_EQUAL
(
	`memcmp
(
auto_buf„r
, 
m™uÆ_buf„r
, 
ex≥˘ed_size
), 0);

469 
	`kØ_fixed_de°roy
(
kØ_fixed1
);

470 
	`avro_wrôî_‰ì
(
m™uÆ_avro_wrôî
);

471 
	`avro_wrôî_‰ì
(
auto_avro_wrôî
);

472 
	}
}

476 
	$ã°_fixed_de£rülize
(**
°©e
)

478 ()
°©e
;

480 c⁄° 
uöt8_t
 
∂aö_fixed1
[] = { 0x0, 0x1, 0x2, 0x3, 0x4 };

481 
size_t
 
∂aö_fixed1_size
 = (
∂aö_fixed1
) / ();

483 
kØ_byãs_t
 *
kØ_fixed1
 = 
	`kØ_fixed_c›y_¸óã
(
∂aö_fixed1
, 
∂aö_fixed1_size
);

484 
	`ASSERT_NOT_NULL
(
kØ_fixed1
);

486 
size_t
 
ex≥˘ed_size
 = 
	`kØ_fixed_gë_size
(
kØ_fixed1
);

487 
buf„r
[
ex≥˘ed_size
];

488 
avro_wrôî_t
 
avro_wrôî
 = 
	`avro_wrôî_mem‹y
(
buf„r
, 
ex≥˘ed_size
);

490 
	`kØ_fixed_£rülize
(
avro_wrôî
, 
kØ_fixed1
);

492 
avro_ªadî_t
 
avro_ªadî
 = 
	`avro_ªadî_mem‹y
(
buf„r
, 
ex≥˘ed_size
);

494 
kØ_byãs_t
 *
kØ_fixed2
 = 
	`kØ_fixed_de£rülize
(
avro_ªadî
, &
ex≥˘ed_size
);

495 
	`ASSERT_NOT_NULL
(
kØ_fixed2
);

497 
	`ASSERT_EQUAL
(
	`memcmp
(
kØ_fixed2
->
buf„r
, 
∂aö_fixed1
, 
∂aö_fixed1_size
), 0);

498 
	`ASSERT_EQUAL
(
	`memcmp
(
kØ_fixed2
->
buf„r
, 
kØ_fixed1
->buf„r, 
∂aö_fixed1_size
), 0);

500 
	`kØ_fixed_de°roy
(
kØ_fixed2
);

501 
	`avro_ªadî_‰ì
(
avro_ªadî
);

502 
	`avro_wrôî_‰ì
(
avro_wrôî
);

503 
	`kØ_fixed_de°roy
(
kØ_fixed1
);

504 
	}
}

508 
	$ã°_boﬁón_gë_size
(**
°©e
)

510 ()
°©e
;

512 
	`§™d
(
	`time
(
NULL
));

513 
	`ASSERT_EQUAL
(
	`kØ_boﬁón_gë_size
(
NULL
), 0);

515 
öt8_t
 
boﬁón_vÆue
 = 
åue
;

516 
	`ASSERT_EQUAL
(
	`kØ_boﬁón_gë_size
(&
boﬁón_vÆue
), 
	`avro_l⁄g_gë_size
(boolean_value));

517 
	}
}

521 
	$ã°_boﬁón_£rülize
(**
°©e
)

523 ()
°©e
;

525 
öt8_t
 
boﬁón_vÆue
 = 
åue
;

526 
size_t
 
ex≥˘ed_size
 = 
	`kØ_boﬁón_gë_size
(&
boﬁón_vÆue
);

527 
auto_buf„r
[
ex≥˘ed_size
];

528 
avro_wrôî_t
 
auto_avro_wrôî
 = 
	`avro_wrôî_mem‹y
(
auto_buf„r
, 
ex≥˘ed_size
);

529 
m™uÆ_buf„r
[
ex≥˘ed_size
];

530 
avro_wrôî_t
 
m™uÆ_avro_wrôî
 = 
	`avro_wrôî_mem‹y
(
m™uÆ_buf„r
, 
ex≥˘ed_size
);

532 
	`kØ_boﬁón_£rülize
(
auto_avro_wrôî
, &
boﬁón_vÆue
);

533 
avro_bö¨y_ícodög
.
	`wrôe_boﬁón
(
m™uÆ_avro_wrôî
, 
boﬁón_vÆue
);

535 
	`ASSERT_EQUAL
(
	`memcmp
(
auto_buf„r
, 
m™uÆ_buf„r
, 
ex≥˘ed_size
), 0);

537 
	`avro_wrôî_‰ì
(
m™uÆ_avro_wrôî
);

538 
	`avro_wrôî_‰ì
(
auto_avro_wrôî
);

539 
	}
}

543 
	$ã°_boﬁón_de£rülize
(**
°©e
)

545 ()
°©e
;

547 
öt8_t
 
boﬁón_vÆue1
 = 
åue
;

548 
size_t
 
ex≥˘ed_size
 = 
	`kØ_boﬁón_gë_size
(&
boﬁón_vÆue1
);

549 
buf„r
[
ex≥˘ed_size
];

550 
avro_wrôî_t
 
avro_wrôî
 = 
	`avro_wrôî_mem‹y
(
buf„r
, 
ex≥˘ed_size
);

552 
	`kØ_boﬁón_£rülize
(
avro_wrôî
, &
boﬁón_vÆue1
);

554 
avro_ªadî_t
 
avro_ªadî
 = 
	`avro_ªadî_mem‹y
(
buf„r
, 
ex≥˘ed_size
);

556 
öt8_t
 *
boﬁón_vÆue2
 = 
	`kØ_boﬁón_de£rülize
(
avro_ªadî
);

558 
	`ASSERT_EQUAL
(*
boﬁón_vÆue2
, 
boﬁón_vÆue1
);

560 
	`kØ_d©a_de°roy
(
boﬁón_vÆue2
);

561 
	`avro_ªadî_‰ì
(
avro_ªadî
);

562 
	`avro_wrôî_‰ì
(
avro_wrôî
);

563 
	}
}

567 
	$ã°_öt_gë_size
(**
°©e
)

569 ()
°©e
;

571 
	`§™d
(
	`time
(
NULL
));

572 
	`ASSERT_EQUAL
(
	`kØ_öt_gë_size
(
NULL
), 0);

574 
öt32_t
 
öt_vÆue
 = 
	`ønd
();

575 
	`ASSERT_EQUAL
(
	`kØ_öt_gë_size
(&
öt_vÆue
), 
	`avro_l⁄g_gë_size
(int_value));

576 
	}
}

580 
	$ã°_öt_£rülize
(**
°©e
)

582 ()
°©e
;

584 
öt32_t
 
öt_vÆue
 = 
	`ønd
();

585 
size_t
 
ex≥˘ed_size
 = 
	`kØ_öt_gë_size
(&
öt_vÆue
);

586 
auto_buf„r
[
ex≥˘ed_size
];

587 
avro_wrôî_t
 
auto_avro_wrôî
 = 
	`avro_wrôî_mem‹y
(
auto_buf„r
, 
ex≥˘ed_size
);

588 
m™uÆ_buf„r
[
ex≥˘ed_size
];

589 
avro_wrôî_t
 
m™uÆ_avro_wrôî
 = 
	`avro_wrôî_mem‹y
(
m™uÆ_buf„r
, 
ex≥˘ed_size
);

591 
	`kØ_öt_£rülize
(
auto_avro_wrôî
, &
öt_vÆue
);

592 
avro_bö¨y_ícodög
.
	`wrôe_öt
(
m™uÆ_avro_wrôî
, 
öt_vÆue
);

594 
	`ASSERT_EQUAL
(
	`memcmp
(
auto_buf„r
, 
m™uÆ_buf„r
, 
ex≥˘ed_size
), 0);

596 
	`avro_wrôî_‰ì
(
m™uÆ_avro_wrôî
);

597 
	`avro_wrôî_‰ì
(
auto_avro_wrôî
);

598 
	}
}

602 
	$ã°_öt_de£rülize
(**
°©e
)

604 ()
°©e
;

606 
öt32_t
 
öt_vÆue1
 = 
	`ønd
();

607 
size_t
 
ex≥˘ed_size
 = 
	`kØ_öt_gë_size
(&
öt_vÆue1
);

608 
buf„r
[
ex≥˘ed_size
];

609 
avro_wrôî_t
 
avro_wrôî
 = 
	`avro_wrôî_mem‹y
(
buf„r
, 
ex≥˘ed_size
);

611 
	`kØ_öt_£rülize
(
avro_wrôî
, &
öt_vÆue1
);

613 
avro_ªadî_t
 
avro_ªadî
 = 
	`avro_ªadî_mem‹y
(
buf„r
, 
ex≥˘ed_size
);

615 
öt32_t
 *
öt_vÆue2
 = 
	`kØ_öt_de£rülize
(
avro_ªadî
);

617 
	`ASSERT_EQUAL
(*
öt_vÆue2
, 
öt_vÆue1
);

619 
	`kØ_d©a_de°roy
(
öt_vÆue2
);

620 
	`avro_ªadî_‰ì
(
avro_ªadî
);

621 
	`avro_wrôî_‰ì
(
avro_wrôî
);

622 
	}
}

626 
	$ã°_l⁄g_gë_size
(**
°©e
)

628 ()
°©e
;

630 
	`§™d
(
	`time
(
NULL
));

631 
	`ASSERT_EQUAL
(
	`kØ_l⁄g_gë_size
(
NULL
), 0);

633 
öt64_t
 
l⁄g_vÆue
 = 
	`ønd
();

634 
	`ASSERT_EQUAL
(
	`kØ_l⁄g_gë_size
(&
l⁄g_vÆue
), 
	`avro_l⁄g_gë_size
(long_value));

635 
	}
}

639 
	$ã°_l⁄g_£rülize
(**
°©e
)

641 ()
°©e
;

643 
öt64_t
 
l⁄g_vÆue
 = 
	`ønd
();

644 
size_t
 
ex≥˘ed_size
 = 
	`kØ_l⁄g_gë_size
(&
l⁄g_vÆue
);

645 
auto_buf„r
[
ex≥˘ed_size
];

646 
avro_wrôî_t
 
auto_avro_wrôî
 = 
	`avro_wrôî_mem‹y
(
auto_buf„r
, 
ex≥˘ed_size
);

647 
m™uÆ_buf„r
[
ex≥˘ed_size
];

648 
avro_wrôî_t
 
m™uÆ_avro_wrôî
 = 
	`avro_wrôî_mem‹y
(
m™uÆ_buf„r
, 
ex≥˘ed_size
);

650 
	`kØ_l⁄g_£rülize
(
auto_avro_wrôî
, &
l⁄g_vÆue
);

651 
avro_bö¨y_ícodög
.
	`wrôe_l⁄g
(
m™uÆ_avro_wrôî
, 
l⁄g_vÆue
);

653 
	`ASSERT_EQUAL
(
	`memcmp
(
auto_buf„r
, 
m™uÆ_buf„r
, 
ex≥˘ed_size
), 0);

655 
	`avro_wrôî_‰ì
(
m™uÆ_avro_wrôî
);

656 
	`avro_wrôî_‰ì
(
auto_avro_wrôî
);

657 
	}
}

661 
	$ã°_l⁄g_de£rülize
(**
°©e
)

663 ()
°©e
;

665 
öt64_t
 
l⁄g_vÆue1
 = 
	`ønd
();

666 
size_t
 
ex≥˘ed_size
 = 
	`kØ_l⁄g_gë_size
(&
l⁄g_vÆue1
);

667 
buf„r
[
ex≥˘ed_size
];

668 
avro_wrôî_t
 
avro_wrôî
 = 
	`avro_wrôî_mem‹y
(
buf„r
, 
ex≥˘ed_size
);

670 
	`kØ_l⁄g_£rülize
(
avro_wrôî
, &
l⁄g_vÆue1
);

672 
avro_ªadî_t
 
avro_ªadî
 = 
	`avro_ªadî_mem‹y
(
buf„r
, 
ex≥˘ed_size
);

674 
öt64_t
 *
l⁄g_vÆue2
 = 
	`kØ_l⁄g_de£rülize
(
avro_ªadî
);

676 
	`ASSERT_EQUAL
(*
l⁄g_vÆue2
, 
l⁄g_vÆue1
);

678 
	`kØ_d©a_de°roy
(
l⁄g_vÆue2
);

679 
	`avro_ªadî_‰ì
(
avro_ªadî
);

680 
	`avro_wrôî_‰ì
(
avro_wrôî
);

681 
	}
}

686 
	mTEST_VAL_1
 = 0,

687 
	mTEST_VAL_2
,

688 
	mTEST_VAL_3
,

689 
	mTEST_VAL_4
,

690 
	mTEST_VAL_5


691 } 
	tã°_íum_t
;

695 
	$ã°_íum_gë_size
(**
°©e
)

697 ()
°©e
;

699 
	`§™d
(
	`time
(
NULL
));

700 
	`ASSERT_EQUAL
(
	`kØ_íum_gë_size
(
NULL
), 0);

702 
ã°_íum_t
 
íum_vÆue
 = (ã°_íum_t)
	`ønd
(Ë% 
TEST_VAL_5
;

703 
	`ASSERT_EQUAL
(
	`kØ_íum_gë_size
(&
íum_vÆue
), 
	`avro_l⁄g_gë_size
(enum_value));

704 
	}
}

708 
	$ã°_íum_£rülize
(**
°©e
)

710 ()
°©e
;

712 
ã°_íum_t
 
íum_vÆue
 = (ã°_íum_t)
	`ønd
(Ë% 
TEST_VAL_5
;

713 
size_t
 
ex≥˘ed_size
 = 
	`kØ_íum_gë_size
(&
íum_vÆue
);

714 
auto_buf„r
[
ex≥˘ed_size
];

715 
avro_wrôî_t
 
auto_avro_wrôî
 = 
	`avro_wrôî_mem‹y
(
auto_buf„r
, 
ex≥˘ed_size
);

716 
m™uÆ_buf„r
[
ex≥˘ed_size
];

717 
avro_wrôî_t
 
m™uÆ_avro_wrôî
 = 
	`avro_wrôî_mem‹y
(
m™uÆ_buf„r
, 
ex≥˘ed_size
);

719 
	`kØ_íum_£rülize
(
auto_avro_wrôî
, &
íum_vÆue
);

720 
avro_bö¨y_ícodög
.
	`wrôe_l⁄g
(
m™uÆ_avro_wrôî
, ()
íum_vÆue
);

722 
	`ASSERT_EQUAL
(
	`memcmp
(
auto_buf„r
, 
m™uÆ_buf„r
, 
ex≥˘ed_size
), 0);

724 
	`avro_wrôî_‰ì
(
m™uÆ_avro_wrôî
);

725 
	`avro_wrôî_‰ì
(
auto_avro_wrôî
);

726 
	}
}

730 
	$ã°_íum_de£rülize
(**
°©e
)

732 ()
°©e
;

734 
ã°_íum_t
 
íum_vÆue1
 = (ã°_íum_t)
	`ønd
(Ë% 
TEST_VAL_5
;

735 
size_t
 
ex≥˘ed_size
 = 
	`kØ_íum_gë_size
(&
íum_vÆue1
);

736 
buf„r
[
ex≥˘ed_size
];

737 
avro_wrôî_t
 
avro_wrôî
 = 
	`avro_wrôî_mem‹y
(
buf„r
, 
ex≥˘ed_size
);

739 
	`kØ_íum_£rülize
(
avro_wrôî
, &
íum_vÆue1
);

741 
avro_ªadî_t
 
avro_ªadî
 = 
	`avro_ªadî_mem‹y
(
buf„r
, 
ex≥˘ed_size
);

743 
ã°_íum_t
 *
íum_vÆue2
 = (ã°_íum_à*)
	`kØ_íum_de£rülize
(
avro_ªadî
);

745 
	`ASSERT_EQUAL
(*
íum_vÆue2
, 
íum_vÆue1
);

747 
	`kØ_d©a_de°roy
(
íum_vÆue2
);

748 
	`avro_ªadî_‰ì
(
avro_ªadî
);

749 
	`avro_wrôî_‰ì
(
avro_wrôî
);

750 
	}
}

754 
	$ã°_Êﬂt_gë_size
(**
°©e
)

756 ()
°©e
;

758 
	`§™d
(
	`time
(
NULL
));

759 
	`ASSERT_EQUAL
(
	`kØ_Êﬂt_gë_size
(
NULL
), 0);

761 
Êﬂt_vÆue
 = 
	`ønd
() /Ñand();

762 
	`ASSERT_EQUAL
(
	`kØ_Êﬂt_gë_size
(&
Êﬂt_vÆue
), 
AVRO_FLOAT_SIZE
);

763 
	}
}

767 
	$ã°_Êﬂt_£rülize
(**
°©e
)

769 ()
°©e
;

771 
Êﬂt_vÆue
 = 
	`ønd
() /Ñand();

772 
size_t
 
ex≥˘ed_size
 = 
	`kØ_Êﬂt_gë_size
(&
Êﬂt_vÆue
);

773 
auto_buf„r
[
ex≥˘ed_size
];

774 
avro_wrôî_t
 
auto_avro_wrôî
 = 
	`avro_wrôî_mem‹y
(
auto_buf„r
, 
ex≥˘ed_size
);

775 
m™uÆ_buf„r
[
ex≥˘ed_size
];

776 
avro_wrôî_t
 
m™uÆ_avro_wrôî
 = 
	`avro_wrôî_mem‹y
(
m™uÆ_buf„r
, 
ex≥˘ed_size
);

778 
	`kØ_Êﬂt_£rülize
(
auto_avro_wrôî
, &
Êﬂt_vÆue
);

779 
avro_bö¨y_ícodög
.
	`wrôe_Êﬂt
(
m™uÆ_avro_wrôî
, 
Êﬂt_vÆue
);

781 
	`ASSERT_EQUAL
(
	`memcmp
(
auto_buf„r
, 
m™uÆ_buf„r
, 
ex≥˘ed_size
), 0);

783 
	`avro_wrôî_‰ì
(
m™uÆ_avro_wrôî
);

784 
	`avro_wrôî_‰ì
(
auto_avro_wrôî
);

785 
	}
}

789 
	$ã°_Êﬂt_de£rülize
(**
°©e
)

791 ()
°©e
;

793 
Êﬂt_vÆue1
 = 
	`ønd
() /Ñand();

794 
size_t
 
ex≥˘ed_size
 = 
	`kØ_Êﬂt_gë_size
(&
Êﬂt_vÆue1
);

795 
buf„r
[
ex≥˘ed_size
];

796 
avro_wrôî_t
 
avro_wrôî
 = 
	`avro_wrôî_mem‹y
(
buf„r
, 
ex≥˘ed_size
);

798 
	`kØ_Êﬂt_£rülize
(
avro_wrôî
, &
Êﬂt_vÆue1
);

800 
avro_ªadî_t
 
avro_ªadî
 = 
	`avro_ªadî_mem‹y
(
buf„r
, 
ex≥˘ed_size
);

802 *
Êﬂt_vÆue2
 = 
	`kØ_Êﬂt_de£rülize
(
avro_ªadî
);

804 
	`ASSERT_EQUAL
(*
Êﬂt_vÆue2
, 
Êﬂt_vÆue1
);

806 
	`kØ_d©a_de°roy
(
Êﬂt_vÆue2
);

807 
	`avro_ªadî_‰ì
(
avro_ªadî
);

808 
	`avro_wrôî_‰ì
(
avro_wrôî
);

809 
	}
}

813 
	$ã°_doubÀ_gë_size
(**
°©e
)

815 ()
°©e
;

817 
	`§™d
(
	`time
(
NULL
));

818 
	`ASSERT_EQUAL
(
	`kØ_doubÀ_gë_size
(
NULL
), 0);

820 
doubÀ_vÆue
 = 
	`ønd
() /Ñand();

821 
	`ASSERT_EQUAL
(
	`kØ_doubÀ_gë_size
(&
doubÀ_vÆue
), 
AVRO_DOUBLE_SIZE
);

822 
	}
}

826 
	$ã°_doubÀ_£rülize
(**
°©e
)

828 ()
°©e
;

830 
doubÀ_vÆue
 = 
	`ønd
() /Ñand();

831 
size_t
 
ex≥˘ed_size
 = 
	`kØ_doubÀ_gë_size
(&
doubÀ_vÆue
);

832 
auto_buf„r
[
ex≥˘ed_size
];

833 
avro_wrôî_t
 
auto_avro_wrôî
 = 
	`avro_wrôî_mem‹y
(
auto_buf„r
, 
ex≥˘ed_size
);

834 
m™uÆ_buf„r
[
ex≥˘ed_size
];

835 
avro_wrôî_t
 
m™uÆ_avro_wrôî
 = 
	`avro_wrôî_mem‹y
(
m™uÆ_buf„r
, 
ex≥˘ed_size
);

837 
	`kØ_doubÀ_£rülize
(
auto_avro_wrôî
, &
doubÀ_vÆue
);

838 
avro_bö¨y_ícodög
.
	`wrôe_doubÀ
(
m™uÆ_avro_wrôî
, 
doubÀ_vÆue
);

840 
	`ASSERT_EQUAL
(
	`memcmp
(
auto_buf„r
, 
m™uÆ_buf„r
, 
ex≥˘ed_size
), 0);

842 
	`avro_wrôî_‰ì
(
m™uÆ_avro_wrôî
);

843 
	`avro_wrôî_‰ì
(
auto_avro_wrôî
);

844 
	}
}

848 
	$ã°_doubÀ_de£rülize
(**
°©e
)

850 ()
°©e
;

852 
doubÀ_vÆue1
 = 
	`ønd
() /Ñand();

853 
size_t
 
ex≥˘ed_size
 = 
	`kØ_doubÀ_gë_size
(&
doubÀ_vÆue1
);

854 
buf„r
[
ex≥˘ed_size
];

855 
avro_wrôî_t
 
avro_wrôî
 = 
	`avro_wrôî_mem‹y
(
buf„r
, 
ex≥˘ed_size
);

857 
	`kØ_doubÀ_£rülize
(
avro_wrôî
, &
doubÀ_vÆue1
);

859 
avro_ªadî_t
 
avro_ªadî
 = 
	`avro_ªadî_mem‹y
(
buf„r
, 
ex≥˘ed_size
);

861 *
doubÀ_vÆue2
 = 
	`kØ_doubÀ_de£rülize
(
avro_ªadî
);

863 
	`ASSERT_EQUAL
(*
doubÀ_vÆue2
, 
doubÀ_vÆue1
);

865 
	`kØ_d©a_de°roy
(
doubÀ_vÆue2
);

866 
	`avro_ªadî_‰ì
(
avro_ªadî
);

867 
	`avro_wrôî_‰ì
(
avro_wrôî
);

868 
	}
}

872 
	$ã°_nuŒ_gë_size
(**
°©e
)

874 ()
°©e
;

876 
	`§™d
(
	`time
(
NULL
));

877 
	`ASSERT_EQUAL
(
	`kØ_nuŒ_gë_size
(
NULL
), 0);

879 
	`ASSERT_EQUAL
(
	`kØ_nuŒ_gë_size
(
NULL
), 
AVRO_NULL_SIZE
);

880 
	}
}

884 
	$ã°_nuŒ_£rülize
(**
°©e
)

886 ()
°©e
;

888 
size_t
 
some_d©a
 = 
	`ønd
();

889 
size_t
 
ex≥˘ed_size
 = 
	`ønd
() % 10;

890 
auto_buf„r
[
ex≥˘ed_size
];

891 
avro_wrôî_t
 
auto_avro_wrôî
 = 
	`avro_wrôî_mem‹y
(
auto_buf„r
, 
ex≥˘ed_size
);

892 
m™uÆ_buf„r
[
ex≥˘ed_size
];

893 
avro_wrôî_t
 
m™uÆ_avro_wrôî
 = 
	`avro_wrôî_mem‹y
(
m™uÆ_buf„r
, 
ex≥˘ed_size
);

895 
£ed
 = 
	`ønd
();

896 
	`mem£t
(
auto_buf„r
, 
£ed
, 
ex≥˘ed_size
);

897 
	`mem£t
(
m™uÆ_buf„r
, 
£ed
, 
ex≥˘ed_size
);

899 
	`kØ_nuŒ_£rülize
(
auto_avro_wrôî
, &
some_d©a
);

900 
avro_bö¨y_ícodög
.
	`wrôe_nuŒ
(
m™uÆ_avro_wrôî
);

902 
	`ASSERT_EQUAL
(
	`memcmp
(
auto_buf„r
, 
m™uÆ_buf„r
, 
ex≥˘ed_size
), 0);

904 
	`avro_wrôî_‰ì
(
m™uÆ_avro_wrôî
);

905 
	`avro_wrôî_‰ì
(
auto_avro_wrôî
);

906 
	}
}

910 
	$ã°_nuŒ_de£rülize
(**
°©e
)

912 ()
°©e
;

914 
size_t
 
ex≥˘ed_size
 = 
	`ønd
() % 10;

915 
buf„r
[
ex≥˘ed_size
];

916 
	`mem£t
(
buf„r
, 
	`ønd
(), 
ex≥˘ed_size
);

917 
avro_ªadî_t
 
avro_ªadî
 = 
	`avro_ªadî_mem‹y
(
buf„r
, 
ex≥˘ed_size
);

919 
	`ASSERT_NULL
(
	`kØ_nuŒ_de£rülize
(
avro_ªadî
));

921 
	`avro_ªadî_‰ì
(
avro_ªadî
);

922 
	}
}

926 
	$ã°_¨øy_gë_size
(**
°©e
)

928 ()
°©e
;

930 
	`§™d
(
	`time
(
NULL
));

931 
	`ASSERT_EQUAL
(
	`kØ_¨øy_gë_size
(
NULL
, NULL), 0);

932 
	`ASSERT_EQUAL
(
	`kØ_¨øy_gë_size
(
NULL
, (
gë_size_‚
)
kØ_nuŒ_gë_size
), 
	`avro_l⁄g_gë_size
(0));

934 c⁄° *
∂aö_°r
 = "data";

935 
kØ_°rög_t
 *
ª„ªn˚_kØ_°r
 = 
	`kØ_°rög_c›y_¸óã
(
∂aö_°r
);

936 
size_t
 
ñemít_size
 = 
	`kØ_°rög_gë_size
(
ª„ªn˚_kØ_°r
);

937 
	`kØ_°rög_de°roy
(
ª„ªn˚_kØ_°r
);

939 
size_t
 
¨øy_size
 = 1 + 
	`ønd
() % 10;

941 
kØ_li°_t
 *
avro_¨øy
 = 
	`kØ_li°_¸óã
();

942 
size_t
 
i
 = 0;

943 
i
 = 0; i < 
¨øy_size
; ++i) {

944 
	`kØ_li°_push_back
(
avro_¨øy
, 
	`kØ_°rög_c›y_¸óã
(
∂aö_°r
));

947 
size_t
 
ex≥˘ed_size
 = 
	`avro_l⁄g_gë_size
(
¨øy_size
)

948 + 
¨øy_size
 * 
ñemít_size


949 + 
	`avro_l⁄g_gë_size
(0);

951 
	`ASSERT_EQUAL
(
	`kØ_¨øy_gë_size
(
avro_¨øy
, &
kØ_°rög_gë_size
), 
ex≥˘ed_size
);

953 
	`kØ_li°_de°roy
(
avro_¨øy
, 
kØ_°rög_de°roy
);

954 
	}
}

958 
	$ã°_nuŒ_¨øy_£rülize
(**
°©e
)

960 ()
°©e
;

962 
size_t
 
em±y_¨øy_buf„r_size
 = 1;

963 
em±y_¨øy_buf„r
[
em±y_¨øy_buf„r_size
];

964 
	`mem£t
(
em±y_¨øy_buf„r
, 1 + 
	`ønd
(), 
em±y_¨øy_buf„r_size
);

966 
avro_wrôî_t
 
avro_wrôî
 = 
	`avro_wrôî_mem‹y
(
em±y_¨øy_buf„r
, 
em±y_¨øy_buf„r_size
);

968 
	`kØ_¨øy_£rülize
(
avro_wrôî
, 
NULL
, NULL);

970 
	`ASSERT_EQUAL
(()
em±y_¨øy_buf„r
[0], 0);

972 
	`avro_wrôî_‰ì
(
avro_wrôî
);

973 
	}
}

977 
	$ã°_em±y_¨øy_£rülize
(**
°©e
)

979 ()
°©e
;

981 
size_t
 
em±y_¨øy_buf„r_size
 = 1;

982 
em±y_¨øy_buf„r
[
em±y_¨øy_buf„r_size
];

983 
	`mem£t
(
em±y_¨øy_buf„r
, 1 + 
	`ønd
(), 
em±y_¨øy_buf„r_size
);

985 
avro_wrôî_t
 
avro_wrôî
 = 
	`avro_wrôî_mem‹y
(
em±y_¨øy_buf„r
, 
em±y_¨øy_buf„r_size
);

986 
kØ_li°_t
 *
em±y_¨øy
 = 
	`kØ_li°_¸óã
();

988 
	`kØ_¨øy_£rülize
(
avro_wrôî
, 
em±y_¨øy
, 
NULL
);

990 
	`ASSERT_EQUAL
(()
em±y_¨øy_buf„r
[0], 0);

992 
	`kØ_li°_de°roy
(
em±y_¨øy
, 
NULL
);

993 
	`avro_wrôî_‰ì
(
avro_wrôî
);

994 
	}
}

998 
	$ã°_¨øy_£rülize
(**
°©e
)

1000 ()
°©e
;

1002 c⁄° *
∂aö_°r
 = "data";

1003 
kØ_°rög_t
 *
ª„ªn˚_kØ_°r
 = 
	`kØ_°rög_c›y_¸óã
(
∂aö_°r
);

1004 
size_t
 
ñemít_size
 = 
	`kØ_°rög_gë_size
(
ª„ªn˚_kØ_°r
);

1005 
	`kØ_°rög_de°roy
(
ª„ªn˚_kØ_°r
);

1007 
size_t
 
¨øy_size
 = 1 + 
	`ønd
() % 10;

1008 
size_t
 
ex≥˘ed_size
 = 
	`avro_l⁄g_gë_size
(
¨øy_size
)

1009 + 
¨øy_size
 * 
ñemít_size


1010 + 
	`avro_l⁄g_gë_size
(0);

1011 
m™uÆ_buf„r
[
ex≥˘ed_size
];

1012 
avro_wrôî_t
 
m™uÆ_avro_wrôî
 = 
	`avro_wrôî_mem‹y
(
m™uÆ_buf„r
, 
ex≥˘ed_size
);

1013 
avro_bö¨y_ícodög
.
	`wrôe_l⁄g
(
m™uÆ_avro_wrôî
, 
¨øy_size
);

1015 
kØ_li°_t
 *
avro_¨øy
 = 
	`kØ_li°_¸óã
();

1016 
size_t
 
i
 = 0;

1017 
i
 = 0; i < 
¨øy_size
; ++i) {

1018 
kØ_°rög_t
 *
¨øy_d©a
 = 
	`kØ_°rög_c›y_¸óã
(
∂aö_°r
);

1019 
	`kØ_li°_push_back
(
avro_¨øy
, 
¨øy_d©a
);

1020 
avro_bö¨y_ícodög
.
	`wrôe_°rög
(
m™uÆ_avro_wrôî
, 
¨øy_d©a
->
d©a
);

1023 
avro_bö¨y_ícodög
.
	`wrôe_l⁄g
(
m™uÆ_avro_wrôî
, 0);

1025 
size_t
 
a˘uÆ_size
 = 
	`kØ_¨øy_gë_size
(
avro_¨øy
, 
kØ_°rög_gë_size
);

1027 
	`ASSERT_EQUAL
(
a˘uÆ_size
, 
ex≥˘ed_size
);

1029 
auto_buf„r
[
a˘uÆ_size
];

1030 
avro_wrôî_t
 
auto_avro_wrôî
 = 
	`avro_wrôî_mem‹y
(
auto_buf„r
, 
a˘uÆ_size
);

1032 
	`kØ_¨øy_£rülize
(
auto_avro_wrôî
, 
avro_¨øy
, 
kØ_°rög_£rülize
);

1034 
	`ASSERT_EQUAL
(
	`memcmp
(
auto_buf„r
, 
m™uÆ_buf„r
, 
ex≥˘ed_size
), 0);

1036 
	`kØ_li°_de°roy
(
avro_¨øy
, 
kØ_°rög_de°roy
);

1037 
	`avro_wrôî_‰ì
(
m™uÆ_avro_wrôî
);

1038 
	`avro_wrôî_‰ì
(
auto_avro_wrôî
);

1039 
	}
}

1043 *
	$¸óã_Êﬂt
()

1045 *
Êﬂt_vÆue
 = (*)
	`KAA_MALLOC
(());

1046 
	`KAA_RETURN_IF_NIL
(
Êﬂt_vÆue
, 
NULL
);

1047 *
Êﬂt_vÆue
 = 
	`ønd
() %Ñand();

1048  
Êﬂt_vÆue
;

1049 
	}
}

1051 
	$ã°_¨øy_de£rülize_wo_˘x
(**
°©e
)

1053 ()
°©e
;

1055 
size_t
 
¨øy_size
 = 1 + 
	`ønd
() % 10;

1057 
kØ_li°_t
 *
avro_¨øy1
 = 
	`kØ_li°_¸óã
();

1058 
size_t
 
i
 = 0;

1059 
i
 = 0; i < 
¨øy_size
; ++i) {

1060 
	`kØ_li°_push_back
(
avro_¨øy1
, 
	`¸óã_Êﬂt
());

1063 
size_t
 
buf„r_size
 = 
	`kØ_¨øy_gë_size
(
avro_¨øy1
, 
kØ_Êﬂt_gë_size
);

1064 
buf„r
[
buf„r_size
];

1065 
avro_wrôî_t
 
avro_wrôî
 = 
	`avro_wrôî_mem‹y
(
buf„r
, 
buf„r_size
);

1067 
	`kØ_¨øy_£rülize
(
avro_wrôî
, 
avro_¨øy1
, 
kØ_Êﬂt_£rülize
);

1069 
avro_ªadî_t
 
avro_ªadî
 = 
	`avro_ªadî_mem‹y
(
buf„r
, 
buf„r_size
);

1070 
kØ_li°_t
 *
avro_¨øy2
 = 
	`kØ_¨øy_de£rülize_wo_˘x
(
avro_ªadî
, (
de£rülize_wo_˘x_‚
)
kØ_Êﬂt_de£rülize
);

1072 
	`ASSERT_NOT_NULL
(
avro_¨øy2
);

1073 
	`ASSERT_EQUAL
(
	`kØ_li°_gë_size
(
avro_¨øy2
), 
¨øy_size
);

1095 
kØ_li°_node_t
 *
ô1
 = 
	`kØ_li°_begö
(
avro_¨øy1
);

1096 
kØ_li°_node_t
 *
ô2
 = 
	`kØ_li°_begö
(
avro_¨øy2
);

1097 
ô1
 && 
ô2
) {

1098 *
Êﬂt_vÆue1
 = 
	`kØ_li°_gë_d©a
(
ô1
);

1099 *
Êﬂt_vÆue2
 = 
	`kØ_li°_gë_d©a
(
ô2
);

1101 
	`ASSERT_NOT_NULL
(
Êﬂt_vÆue1
);

1102 
	`ASSERT_NOT_NULL
(
Êﬂt_vÆue2
);

1103 
	`ASSERT_EQUAL
(*
Êﬂt_vÆue2
, *
Êﬂt_vÆue1
);

1105 
ô1
 = 
	`kØ_li°_√xt
(it1);

1106 
ô2
 = 
	`kØ_li°_√xt
(it2);

1109 
	`kØ_li°_de°roy
(
avro_¨øy2
, 
kØ_d©a_de°roy
);

1110 
	`avro_ªadî_‰ì
(
avro_ªadî
);

1111 
	`avro_wrôî_‰ì
(
avro_wrôî
);

1112 
	`kØ_li°_de°roy
(
avro_¨øy1
, 
kØ_d©a_de°roy
);

1113 
	}
}

1117 
	$ã°_¨øy_de£rülize_w_˘x
(**
°©e
)

1119 ()
°©e
;

1121 c⁄° 
uöt8_t
 
∂aö_fixed
[] = { 0x0, 0x1, 0x2, 0x3, 0x4 };

1122 
size_t
 
∂aö_fixed_size
 = (
∂aö_fixed
) / ();

1124 
size_t
 
¨øy_size
 = 1 + 
	`ønd
() % 10;

1126 
kØ_li°_t
 *
avro_¨øy1
 = 
	`kØ_li°_¸óã
();

1127 
size_t
 
i
 = 0;

1128 
i
 = 0; i < 
¨øy_size
; ++i) {

1129 
	`kØ_li°_push_back
(
avro_¨øy1
, 
	`kØ_fixed_c›y_¸óã
(
∂aö_fixed
, 
∂aö_fixed_size
));

1132 
size_t
 
buf„r_size
 = 
	`kØ_¨øy_gë_size
(
avro_¨øy1
, 
kØ_fixed_gë_size
);

1133 
buf„r
[
buf„r_size
];

1134 
avro_wrôî_t
 
avro_wrôî
 = 
	`avro_wrôî_mem‹y
(
buf„r
, 
buf„r_size
);

1136 
	`kØ_¨øy_£rülize
(
avro_wrôî
, 
avro_¨øy1
, 
kØ_fixed_£rülize
);

1138 
avro_ªadî_t
 
avro_ªadî
 = 
	`avro_ªadî_mem‹y
(
buf„r
, 
buf„r_size
);

1139 
kØ_li°_t
 *
avro_¨øy2
 = 
	`kØ_¨øy_de£rülize_w_˘x
(
avro_ªadî
, (
de£rülize_w_˘x_‚
)
kØ_fixed_de£rülize
, &
∂aö_fixed_size
);

1141 
	`ASSERT_NOT_NULL
(
avro_¨øy2
);

1142 
	`ASSERT_EQUAL
(
	`kØ_li°_gë_size
(
avro_¨øy2
), 
¨øy_size
);

1144 
kØ_li°_node_t
 *
ô
 = 
	`kØ_li°_begö
(
avro_¨øy2
);

1145 
ô
) {

1146 
kØ_byãs_t
 *
fixed
 = 
	`kØ_li°_gë_d©a
(
ô
);

1147 
	`ASSERT_NOT_NULL
(
fixed
);

1148 
	`ASSERT_EQUAL
((
size_t
)
fixed
->
size
, 
∂aö_fixed_size
);

1149 
	`ASSERT_EQUAL
(
	`memcmp
(
fixed
->
buf„r
, 
∂aö_fixed
, 
∂aö_fixed_size
), 0);

1150 
ô
 = 
	`kØ_li°_√xt
(it);

1153 
	`kØ_li°_de°roy
(
avro_¨øy2
, 
kØ_fixed_de°roy
);

1154 
	`avro_ªadî_‰ì
(
avro_ªadî
);

1155 
	`avro_wrôî_‰ì
(
avro_wrôî
);

1156 
	`kØ_li°_de°roy
(
avro_¨øy1
, 
kØ_fixed_de°roy
);

1157 
	}
}

1161 
	$ã°_öô
()

1163 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_log_¸óã
(&
loggî
, 
KAA_MAX_LOG_MESSAGE_LENGTH
, 
KAA_MAX_LOG_LEVEL
, 
NULL
);

1164 i‡(
îr‹
 || !
loggî
) {

1165  
îr‹
;

1169 
	}
}

1171 
	$ã°_deöô
()

1173 
	`kØ_log_de°roy
(
loggî
);

1175 
	}
}

1177 
KAA_SUITE_MAIN
(
Log
, 
ã°_öô
, 
ã°_deöô


1179 
	$KAA_TEST_CASE
(
°rög_move_¸óã
, 
ã°_°rög_move_¸óã
)

1180 
	$KAA_TEST_CASE
(
°rög_c›y_¸óã
, 
ã°_°rög_c›y_¸óã
)

1181 
	$KAA_TEST_CASE
(
°rög_gë_size
, 
ã°_°rög_gë_size
)

1182 
	$KAA_TEST_CASE
(
°rög_£rülize
, 
ã°_°rög_£rülize
)

1183 
	$KAA_TEST_CASE
(
°rög_de£rülize
, 
ã°_°rög_de£rülize
)

1185 
	$KAA_TEST_CASE
(
byãs_move_¸óã
, 
ã°_byãs_move_¸óã
)

1186 
	$KAA_TEST_CASE
(
byãs_c›y_¸óã
, 
ã°_byãs_c›y_¸óã
)

1187 
	$KAA_TEST_CASE
(
byãs_gë_size
, 
ã°_byãs_gë_size
)

1188 
	$KAA_TEST_CASE
(
byãs_£rülize
, 
ã°_byãs_£rülize
)

1189 
	$KAA_TEST_CASE
(
byãs_de£rülize
, 
ã°_byãs_de£rülize
)

1191 
	$KAA_TEST_CASE
(
fixed_move_¸óã
, 
ã°_fixed_move_¸óã
)

1192 
	$KAA_TEST_CASE
(
fixed_c›y_¸óã
, 
ã°_fixed_c›y_¸óã
)

1193 
	$KAA_TEST_CASE
(
fixed_gë_size
, 
ã°_fixed_gë_size
)

1194 
	$KAA_TEST_CASE
(
fixed_£rülize
, 
ã°_fixed_£rülize
)

1195 
	$KAA_TEST_CASE
(
fixed_de£rülize
, 
ã°_fixed_de£rülize
)

1197 
	$KAA_TEST_CASE
(
boﬁón_gë_size
, 
ã°_boﬁón_gë_size
)

1198 
	$KAA_TEST_CASE
(
boﬁón_£rülize
, 
ã°_boﬁón_£rülize
)

1199 
	$KAA_TEST_CASE
(
boﬁón_de£rülize
, 
ã°_boﬁón_de£rülize
)

1201 
	$KAA_TEST_CASE
(
öt_gë_size
, 
ã°_öt_gë_size
)

1202 
	$KAA_TEST_CASE
(
öt_£rülize
, 
ã°_öt_£rülize
)

1203 
	$KAA_TEST_CASE
(
öt_de£rülize
, 
ã°_öt_de£rülize
)

1205 
	$KAA_TEST_CASE
(
l⁄g_gë_size
, 
ã°_l⁄g_gë_size
)

1206 
	$KAA_TEST_CASE
(
l⁄g_£rülize
, 
ã°_l⁄g_£rülize
)

1207 
	$KAA_TEST_CASE
(
l⁄g_de£rülize
, 
ã°_l⁄g_de£rülize
)

1209 
	$KAA_TEST_CASE
(
íum_gë_size
, 
ã°_íum_gë_size
)

1210 
	$KAA_TEST_CASE
(
íum_£rülize
, 
ã°_íum_£rülize
)

1211 
	$KAA_TEST_CASE
(
íum_de£rülize
, 
ã°_íum_de£rülize
)

1213 
	$KAA_TEST_CASE
(
Êﬂt_gë_size
, 
ã°_Êﬂt_gë_size
)

1214 
	$KAA_TEST_CASE
(
Êﬂt_£rülize
, 
ã°_Êﬂt_£rülize
)

1215 
	$KAA_TEST_CASE
(
Êﬂt_de£rülize
, 
ã°_Êﬂt_de£rülize
)

1217 
	$KAA_TEST_CASE
(
doubÀ_gë_size
, 
ã°_doubÀ_gë_size
)

1218 
	$KAA_TEST_CASE
(
doubÀ_£rülize
, 
ã°_doubÀ_£rülize
)

1219 
	$KAA_TEST_CASE
(
doubÀ_de£rülize
, 
ã°_doubÀ_de£rülize
)

1221 
	$KAA_TEST_CASE
(
nuŒ_gë_size
, 
ã°_nuŒ_gë_size
)

1222 
	$KAA_TEST_CASE
(
nuŒ_£rülize
, 
ã°_nuŒ_£rülize
)

1223 
	$KAA_TEST_CASE
(
nuŒ_de£rülize
, 
ã°_nuŒ_de£rülize
)

1225 
	$KAA_TEST_CASE
(
¨øy_gë_size
, 
ã°_¨øy_gë_size
)

1226 
	$KAA_TEST_CASE
(
nuŒ_¨øy_£rülize
, 
ã°_nuŒ_¨øy_£rülize
)

1227 
	$KAA_TEST_CASE
(
em±y_¨øy_£rülize
, 
ã°_em±y_¨øy_£rülize
)

1228 
	$KAA_TEST_CASE
(
¨øy_£rülize
, 
ã°_¨øy_£rülize
)

1229 
	$KAA_TEST_CASE
(
¨øy_de£rülize_wo_˘x
, 
ã°_¨øy_de£rülize_wo_˘x
)

1230 
	`KAA_TEST_CASE
(
¨øy_de£rülize_w_˘x
, 
ã°_¨øy_de£rülize_w_˘x
)

	@/var/www/html/debian/gateway/kaa/test/test_kaa_context.c

17 
	~<°döt.h
>

18 
	~<°dio.h
>

20 
	~"kØ_ã°.h
"

21 
	~"utûôõs/kØ_log.h
"

24 
	~"kØ.c
"

27 
kØ_loggî_t
 *
	gloggî
 = 
NULL
;

29 
	$ã°_¸óã_c⁄ãxt
()

31 
kØ_c⁄ãxt_t
 * 
c⁄ãxt
 = 
NULL
;

33 
kØ_îr‹_t
 
îr_code
 = 
	`kØ_c⁄ãxt_¸óã
(&
c⁄ãxt
, 
loggî
);

34 
	`ASSERT_EQUAL
(
îr_code
, 
KAA_ERR_NONE
);

35 
	`ASSERT_NOT_NULL
(
c⁄ãxt
);

36 
	`ASSERT_NOT_NULL
(
c⁄ãxt
->
boŸ°øp_m™agî
);

37 
	`ASSERT_NOT_NULL
(
c⁄ãxt
->
ch™√l_m™agî
);

39 #i‚de‡
KAA_DISABLE_FEATURE_EVENTS


40 
	`ASSERT_NOT_NULL
(
c⁄ãxt
->
evít_m™agî
);

43 #i‚de‡
KAA_DISABLE_FEATURE_PROFILE


44 
	`ASSERT_NOT_NULL
(
c⁄ãxt
->
¥ofûe_m™agî
);

47 #i‚de‡
KAA_DISABLE_FEATURE_USER


48 
	`ASSERT_NOT_NULL
(
c⁄ãxt
->
u£r_m™agî
);

51 
	`ASSERT_NOT_NULL
(
c⁄ãxt
->
°©us
);

53 
	`kØ_c⁄ãxt_de°roy
(
c⁄ãxt
);

54 
	}
}

56 
	$ã°_öô
()

58 
	`kØ_log_¸óã
(&
loggî
, 
KAA_MAX_LOG_MESSAGE_LENGTH
, 
KAA_MAX_LOG_LEVEL
, 
NULL
);

60 
	}
}

62 
	$ã°_deöô
()

64 
	`kØ_log_de°roy
(
loggî
);

66 
	}
}

68 
KAA_SUITE_MAIN
(
C⁄ãxt
, 
ã°_öô
, 
ã°_deöô


69 , 
KAA_TEST_CASE
(
¸óã_c⁄ãxt
, 
ã°_¸óã_c⁄ãxt
)

	@/var/www/html/debian/gateway/kaa/test/test_kaa_event.c

17 
	~<°döt.h
>

18 
	~<°dboﬁ.h
>

19 
	~<°rög.h
>

20 
	~<°dio.h
>

22 
	~"∂©f‹m/ext_sha.h
"

23 
	~"kØ_evít.h
"

24 #i‚de‡
KAA_DISABLE_FEATURE_EVENTS


26 
	~"kØ_ã°.h
"

28 
	~"kØ_c⁄ãxt.h
"

29 
	~"utûôõs/kØ_log.h
"

30 
	~"utûôõs/kØ_mem.h
"

31 
	~"kØ_°©us.h
"

32 
	~"kØ_ch™√l_m™agî.h
"

33 
	~"kØ_∂©f‹m_utûs.h
"

34 
	~"∂©f‹m/sock.h
"

36 
	~"kØ_¥iv©e.h
"

39 
	gglobÆ_evíts_cou¡î
 = 0;

40 
	g•ecific_evíts_cou¡î
 = 0;

42 
kØ_c⁄ãxt_t
 
	gkØ_c⁄ãxt
;

43 
kØ_loggî_t
 *
	gloggî
 = 
NULL
;

44 
kØ_°©us_t
 *
	g°©us
 = 
NULL
;

45 
kØ_ch™√l_m™agî_t
 *
	gch™√l_m™agî
 = 
NULL
;

46 
kØ_evít_m™agî_t
 *
	gevít_m™agî
 = 
NULL
;

50 
ã°_öô
();

51 
ã°_deöô
();

55 
	$ã°_kØ_¸óã_evít_m™agî
(**
°©e
)

57 ()
°©e
;

59 
kØ_°©us_t
* 
°©us
 = 
NULL
;

60 
	`kØ_°©us_¸óã
(&
°©us
);

61 
kØ_evít_m™agî_t
 *
evít_m™agî
 = 
NULL
;

62 
kØ_îr‹_t
 
îr_code
 = 
	`kØ_evít_m™agî_¸óã
(&
evít_m™agî
, 
°©us
, 
NULL
, 
loggî
);

63 
	`ASSERT_EQUAL
(
îr_code
, 
KAA_ERR_NONE
);

64 
	`ASSERT_NOT_NULL
(
evít_m™agî
);

65 
	`kØ_evít_m™agî_de°roy
(
evít_m™agî
);

67 
	`KAA_FREE
(
°©us
);

68 
	}
}

70 
kØ_ídpoöt_id
 
	gídpoöt_id1
 = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20 };

71 
kØ_ídpoöt_id
 
	gídpoöt_id2
 = { 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40 };

72 
boﬁ
 
	gis_evít_li°íîs_cb_ˇŒed
 = 
Ál£
;

74 
kØ_îr‹_t
 
	$evít_li°íîs_ˇŒback
(*
c⁄ãxt
, c⁄° 
kØ_ídpoöt_id
 
li°íîs
[], 
size_t
 
li°íîs_cou¡
)

76 ()
c⁄ãxt
;

77 
	`ASSERT_EQUAL
(
li°íîs_cou¡
, 2);

78 
	`ASSERT_EQUAL
(
	`memcmp
(
li°íîs
[0], 
ídpoöt_id1
, 
KAA_ENDPOINT_ID_LENGTH
), 0);

79 
	`ASSERT_EQUAL
(
	`memcmp
(
li°íîs
[1], 
ídpoöt_id2
, 
KAA_ENDPOINT_ID_LENGTH
), 0);

80 
is_evít_li°íîs_cb_ˇŒed
 = 
åue
;

81  
KAA_ERR_NONE
;

82 
	}
}

84 
kØ_îr‹_t
 
	$evít_li°íîs_ªque°_Áûed
(*
c⁄ãxt
)

86 ()
c⁄ãxt
;

87  
KAA_ERR_NONE
;

88 
	}
}

90 
	$ã°_kØ_evít_li°íîs_£rülize_ªque°
(**
°©e
)

92 ()
°©e
;

94 
size_t
 
ex≥˘ed_size
 = 
KAA_EXTENSION_HEADER_SIZE
 + (
uöt32_t
);

95 
ex≥˘ed_size
 +(
uöt32_t
);

96 
ex≥˘ed_size
 +2 * (
uöt32_t
);

98 c⁄° *
fqns
[] = { "test.fqn1", "test.fqn2" };

99 c⁄° 
size_t
 
fqn1_Àn
 = 
	`°æí
(
fqns
[0]);

100 c⁄° 
size_t
 
fqn2_Àn
 = 
	`°æí
(
fqns
[1]);

102 
ex≥˘ed_size
 +
	`kØ_Æig√d_size_gë
(
fqn1_Àn
Ë+ kØ_Æig√d_size_gë(
fqn2_Àn
);

104 
kØ_evít_li°íîs_ˇŒback_t
 
ˇŒback
 = { 
NULL
, NULL, NULL };

105 
	`ASSERT_NOT_EQUAL
(
	`kØ_evít_m™agî_föd_evít_li°íîs
(
evít_m™agî
, 
fqns
, 2, &
ˇŒback
), 
KAA_ERR_NONE
);

107 
ˇŒback
 = (
kØ_evít_li°íîs_ˇŒback_t
Ë{ 
NULL
, &
evít_li°íîs_ˇŒback
, &
evít_li°íîs_ªque°_Áûed
 };

108 
	`ASSERT_EQUAL
(
	`kØ_evít_m™agî_föd_evít_li°íîs
(
evít_m™agî
, 
fqns
, 2, &
ˇŒback
), 
KAA_ERR_NONE
);

110 
size_t
 
a˘uÆ_size
 = 0;

111 
	`ASSERT_EQUAL
(
	`kØ_evít_ªque°_gë_size
(
evít_m™agî
, &
a˘uÆ_size
), 
KAA_ERR_NONE
);

112 
	`ASSERT_EQUAL
(
a˘uÆ_size
, 
ex≥˘ed_size
);

114 
uöt8_t
 
buf„r
[
a˘uÆ_size
];

115 
kØ_∂©f‹m_mesßge_wrôî_t
 *
wrôî
;

116 
	`ASSERT_EQUAL
(
	`kØ_∂©f‹m_mesßge_wrôî_¸óã
(&
wrôî
, 
buf„r
, 
a˘uÆ_size
), 
KAA_ERR_NONE
);

118 
	`ASSERT_EQUAL
(
	`kØ_evít_ªque°_£rülize
(
evít_m™agî
, 1, 
wrôî
), 
KAA_ERR_NONE
);

120 
uöt8_t
 *
curs‹
 = 
buf„r
 + 
KAA_EXTENSION_HEADER_SIZE
;

121 
	`ASSERT_EQUAL
((*(
uöt8_t
 *Ë
curs‹
), 0);

122 
curs‹
 +(
uöt16_t
);

124 
	`ASSERT_EQUAL
(
	`KAA_NTOHS
(*(
uöt16_t
 *Ë
curs‹
), 1);

125 
curs‹
 +(
uöt16_t
);

127 
	`ASSERT_EQUAL
(
	`KAA_NTOHS
(*(
uöt16_t
 *Ë
curs‹
), 1);

128 
curs‹
 +(
uöt16_t
);

130 
	`ASSERT_EQUAL
(
	`KAA_NTOHS
(*(
uöt16_t
 *Ë
curs‹
), 2);

131 
curs‹
 +(
uöt16_t
);

133 
	`ASSERT_EQUAL
(
	`KAA_NTOHS
(*(
uöt16_t
 *Ë
curs‹
), 
fqn1_Àn
);

134 
curs‹
 +(
uöt32_t
);

136 
	`ASSERT_EQUAL
(
	`memcmp
(
curs‹
, 
fqns
[0], 
fqn1_Àn
), 0);

137 
curs‹
 +
	`kØ_Æig√d_size_gë
(
fqn1_Àn
);

139 
	`ASSERT_EQUAL
(
	`KAA_NTOHS
(*(
uöt16_t
 *Ë
curs‹
), 
fqn2_Àn
);

140 
curs‹
 +(
uöt32_t
);

142 
	`ASSERT_EQUAL
(
	`memcmp
(
curs‹
, 
fqns
[1], 
fqn2_Àn
), 0);

143 
curs‹
 +
	`kØ_Æig√d_size_gë
(
fqn2_Àn
);

145 
	`ASSERT_EQUAL
(
curs‹
, 
buf„r
 + 
a˘uÆ_size
);

147 
	`kØ_∂©f‹m_mesßge_wrôî_de°roy
(
wrôî
);

148 
	}
}

150 
	$ã°_kØ_evít_li°íîs_h™dÀ_sync
(**
°©e
)

152 ()
°©e
;

154 c⁄° 
uöt32_t
 
exãnsi⁄_size
 = 52;

155 
uöt8_t
 
buf„r
[
exãnsi⁄_size
];

157 
uöt8_t
 *
curs‹
 = 
buf„r
;

158 *
curs‹
 = 0;

159 
curs‹
 +(
uöt16_t
);

161 *((
uöt16_t
 *Ë
curs‹
Ë
	`KAA_HTONS
(1);

162 
curs‹
 +(
uöt16_t
);

164 *((
uöt16_t
 *Ë
curs‹
Ë
	`KAA_HTONS
(1);

165 
curs‹
 +(
uöt16_t
);

167 *((
uöt16_t
 *Ë
curs‹
Ë
	`KAA_HTONS
(0);

168 
curs‹
 +(
uöt16_t
);

170 *((
uöt32_t
 *Ë
curs‹
Ë
	`KAA_HTONL
(2);

171 
curs‹
 +(
uöt32_t
);

173 
	`mem˝y
(
curs‹
, 
ídpoöt_id1
, 
KAA_ENDPOINT_ID_LENGTH
);

174 
curs‹
 +
KAA_ENDPOINT_ID_LENGTH
;

176 
	`mem˝y
(
curs‹
, 
ídpoöt_id2
, 
KAA_ENDPOINT_ID_LENGTH
);

177 
curs‹
 +
KAA_ENDPOINT_ID_LENGTH
;

179 
	`ASSERT_EQUAL
(
curs‹
, 
buf„r
 + 
exãnsi⁄_size
);

181 
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî
;

182 
	`ASSERT_EQUAL
(
	`kØ_∂©f‹m_mesßge_ªadî_¸óã
(&
ªadî
, 
buf„r
, 
exãnsi⁄_size
), 
KAA_ERR_NONE
);

184 
	`ASSERT_FALSE
(
is_evít_li°íîs_cb_ˇŒed
);

185 
	`ASSERT_EQUAL
(
	`kØ_evít_h™dÀ_£rvî_sync
(
evít_m™agî
, 
ªadî
, 0, 
exãnsi⁄_size
, 1), 
KAA_ERR_NONE
);

186 
	`ASSERT_TRUE
(
is_evít_li°íîs_cb_ˇŒed
);

187 
	`ASSERT_EQUAL
(
ªadî
->
cuºít
,Ñódî->
íd
);

190 
is_evít_li°íîs_cb_ˇŒed
 = 
Ál£
;

191 
ªadî
->
cuºít
 =Ñódî->
begö
;

192 
	`ASSERT_EQUAL
(
	`kØ_evít_h™dÀ_£rvî_sync
(
evít_m™agî
, 
ªadî
, 0, 
exãnsi⁄_size
, 1), 
KAA_ERR_NONE
);

193 
	`ASSERT_FALSE
(
is_evít_li°íîs_cb_ˇŒed
);

195 
	`kØ_∂©f‹m_mesßge_ªadî_de°roy
(
ªadî
);

196 
	}
}

198 
	$ã°_kØ_evít_sync_gë_size
(**
°©e
)

200 ()
°©e
;

202 
kØ_îr‹_t
 
îr‹_code
;

203 
size_t
 
ex≥˘ed_size
 = 
KAA_EXTENSION_HEADER_SIZE


204 + (
uöt8_t
)

205 + (
uöt8_t
)

206 + (
uöt16_t
);

208 c⁄° *
fqn
 = "test fqn";

209 c⁄° 
size_t
 
fqn_Àn
 = 
	`°æí
(
fqn
);

211 c⁄° 
size_t
 
evít_d©a_size
 = 16;

215 c⁄° *
evít_d©a
 = (c⁄° *Ë
	`KAA_MALLOC
(
evít_d©a_size
);

217 
kØ_ídpoöt_id
 
èrgë
 = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0 };

219 c⁄° 
size_t
 
buf„r_size
 = 
KAA_EXTENSION_HEADER_SIZE
 + (
uöt32_t
);

220 
uöt8_t
 
buf„r
[
buf„r_size
];

221 
kØ_∂©f‹m_mesßge_wrôî_t
 *
wrôî
;

222 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôî_¸óã
(&
wrôî
, 
buf„r
, 
buf„r_size
);

223 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

225 c⁄° 
uöt32_t
 
£quí˚_numbî
 = 
	`KAA_HTONL
(12345);

226 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
wrôî
, &
£quí˚_numbî
, (
uöt32_t
));

227 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

229 
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî
;

230 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªadî_¸óã
(&
ªadî
, 
buf„r
, 
buf„r_size
);

231 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

233 
îr‹_code
 = 
	`kØ_evít_m™agî_£nd_evít
(
evít_m™agî
, 
fqn
, 
evít_d©a
, 
evít_d©a_size
, 
èrgë
);

234 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

235 
ex≥˘ed_size
 +(
uöt32_t
)

236 + (
uöt16_t
)

237 + (
uöt16_t
)

238 + (
uöt32_t
)

239 + 
KAA_ENDPOINT_ID_LENGTH


240 + 
	`kØ_Æig√d_size_gë
(
fqn_Àn
)

241 + 
	`kØ_Æig√d_size_gë
(
evít_d©a_size
);

243 
îr‹_code
 = 
	`kØ_evít_m™agî_£nd_evít
(
evít_m™agî
, 
fqn
, 
NULL
, 0, NULL);

244 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

245 
ex≥˘ed_size
 +(
uöt32_t
)

246 + (
uöt16_t
)

247 + (
uöt16_t
)

248 + 
	`kØ_Æig√d_size_gë
(
fqn_Àn
);

250 
size_t
 
evít_sync_size
;

251 
îr‹_code
 = 
	`kØ_evít_ªque°_gë_size
(
evít_m™agî
, &
evít_sync_size
);

252 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

254 
	`ASSERT_EQUAL
(
evít_sync_size
, 
KAA_EXTENSION_HEADER_SIZE
);

256 
îr‹_code
 = 
	`kØ_evít_h™dÀ_£rvî_sync
(
evít_m™agî
, 
ªadî
, 0x1, (
uöt32_t
), 1);

257 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

259 
îr‹_code
 = 
	`kØ_evít_ªque°_gë_size
(
evít_m™agî
, &
evít_sync_size
);

260 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

261 
	`ASSERT_EQUAL
(
evít_sync_size
, 
ex≥˘ed_size
);

263 
	`kØ_∂©f‹m_mesßge_wrôî_de°roy
(
wrôî
);

264 
	`kØ_∂©f‹m_mesßge_ªadî_de°roy
(
ªadî
);

265 
	}
}

267 
kØ_îr‹_t
 
	$£rülize_evít
(
kØ_∂©f‹m_mesßge_wrôî_t
 *
wrôî


268 , c⁄° *
fqn


269 , c⁄° *
evít_d©a


270 , 
size_t
 
evít_d©a_size


271 , 
kØ_ídpoöt_id_p
 
èrgë


272 , 
size_t
 
£quí˚_numbî


273 , 
boﬁ
 
√ed_£quí˚_numbî
)

275 
	`KAA_RETURN_IF_NIL2
(
wrôî
, 
fqn
, 
KAA_ERR_BADPARAM
);

277 
kØ_îr‹_t
 
îr‹_code
;

279 
uöt16_t
 
evít_›ti⁄s
 = (
evít_d©a
 ? 0x2 : 0Ë| (
èrgë
 ? 0x1 : 0);

280 
uöt16_t
 
fqn_Àn
 = 
	`°æí
(
fqn
);

282 
uöt16_t
 
√tw‹k_‹dî_16
;

283 
uöt32_t
 
√tw‹k_‹dî_32
;

285 i‡(
√ed_£quí˚_numbî
) {

286 
√tw‹k_‹dî_32
 = 
	`KAA_HTONL
(
£quí˚_numbî
);

287 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
wrôî
, &
√tw‹k_‹dî_32
, (
uöt32_t
));

288 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

291 
√tw‹k_‹dî_16
 = 
	`KAA_HTONS
(
evít_›ti⁄s
);

292 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
wrôî
, &
√tw‹k_‹dî_16
, (
uöt16_t
));

293 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

295 
√tw‹k_‹dî_16
 = 
	`KAA_HTONS
(
fqn_Àn
);

296 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
wrôî
, &
√tw‹k_‹dî_16
, (
uöt16_t
));

297 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

299 i‡(
evít_d©a
) {

300 
√tw‹k_‹dî_32
 = 
	`KAA_HTONL
(
evít_d©a_size
);

301 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
wrôî
, &
√tw‹k_‹dî_32
, (
uöt32_t
));

302 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

305 i‡(
èrgë
) {

306 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe_Æig√d
(
wrôî
, 
èrgë
, 
KAA_ENDPOINT_ID_LENGTH
);

307 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

310 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe_Æig√d
(
wrôî
, 
fqn
, 
fqn_Àn
);

311 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

313 i‡(
evít_d©a
) {

314 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe_Æig√d
(
wrôî
, 
evít_d©a
, 
evít_d©a_size
);

315 
	`KAA_RETURN_IF_ERR
(
îr‹_code
);

318  
îr‹_code
;

319 
	}
}

323 
	$ã°_evít_sync_£rülize
(**
°©e
)

325 ()
°©e
;

326 
	`ã°_deöô
();

327 
	`ã°_öô
();

329 
kØ_îr‹_t
 
îr‹_code
;

331 c⁄° 
uöt8_t
 
evít_fõld
 = 1;

332 c⁄° 
uöt8_t
 
ª£rved_fõld
 = 0;

333 
uöt16_t
 
evít_cou¡
 = 0;

335 c⁄° *
fqn
 = "test fqn";

339 c⁄° 
size_t
 
evít_d©a_size
 = 16;

340 c⁄° *
evít_d©a
 = (c⁄° *Ë
	`KAA_MALLOC
(
evít_d©a_size
);

342 
kØ_ídpoöt_id
 
èrgë
 = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0 };

344 c⁄° 
size_t
 
£rvî_sync_buf„r_size
 = 
KAA_EXTENSION_HEADER_SIZE
 + (
uöt32_t
);

345 
uöt8_t
 
£rvî_sync_buf„r
[
£rvî_sync_buf„r_size
];

346 
kØ_∂©f‹m_mesßge_wrôî_t
 *
£rvî_sync_wrôî
;

347 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôî_¸óã
(&
£rvî_sync_wrôî
, 
£rvî_sync_buf„r
, 
£rvî_sync_buf„r_size
);

348 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

350 
uöt32_t
 
£quí˚_numbî
 = 
	`KAA_HTONL
(12345);

351 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
£rvî_sync_wrôî
, &
£quí˚_numbî
, (
uöt32_t
));

352 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

353 
£quí˚_numbî
 = 
	`KAA_NTOHL
(sequence_number);

355 
kØ_∂©f‹m_mesßge_ªadî_t
 *
£rvî_sync_ªadî
;

356 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªadî_¸óã
(&
£rvî_sync_ªadî
, 
£rvî_sync_buf„r
, 
£rvî_sync_buf„r_size
);

357 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

359 
îr‹_code
 = 
	`kØ_evít_h™dÀ_£rvî_sync
(
evít_m™agî
, 
£rvî_sync_ªadî
, 0x1, (
uöt32_t
), 1);

360 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

362 
îr‹_code
 = 
	`kØ_evít_m™agî_£nd_evít
(
evít_m™agî
, 
fqn
, 
evít_d©a
, 
evít_d©a_size
, 
èrgë
);

363 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

364 ++
evít_cou¡
;

365 
îr‹_code
 = 
	`kØ_evít_m™agî_£nd_evít
(
evít_m™agî
, 
fqn
, 
NULL
, 0, NULL);

366 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

367 ++
evít_cou¡
;

369 
size_t
 
evít_sync_size
 = 0;

370 
îr‹_code
 = 
	`kØ_evít_ªque°_gë_size
(
evít_m™agî
, &
evít_sync_size
);

371 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

373 
uöt8_t
 
m™uÆ_buf„r
[
evít_sync_size
];

374 
uöt8_t
 
auto_buf„r
[
evít_sync_size
];

376 
uöt8_t
 *
m™uÆ_buf„r_±r
 = 
m™uÆ_buf„r
;

377 
uöt8_t
 *
auto_buf„r_±r
 = 
auto_buf„r
;

379 
kØ_∂©f‹m_mesßge_wrôî_t
 *
m™uÆ_wrôî
;

380 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôî_¸óã
(&
m™uÆ_wrôî
, 
m™uÆ_buf„r
, 
evít_sync_size
);

381 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

382 
kØ_∂©f‹m_mesßge_wrôî_t
 *
auto_wrôî
;

383 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôî_¸óã
(&
auto_wrôî
, 
auto_buf„r
, 
evít_sync_size
);

384 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

386 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe_exãnsi⁄_hódî
(
m™uÆ_wrôî


387 , 
KAA_EXTENSION_EVENT


389 , 
evít_sync_size
 - 
KAA_EXTENSION_HEADER_SIZE
);

390 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

391 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
m™uÆ_wrôî
, &
evít_fõld
, (
uöt8_t
));

392 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

393 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
m™uÆ_wrôî
, &
ª£rved_fõld
, (
uöt8_t
));

394 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

395 
evít_cou¡
 = 
	`KAA_HTONS
(event_count);

396 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
m™uÆ_wrôî
, &
evít_cou¡
, (
uöt16_t
));

397 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

399 
îr‹_code
 = 
	`£rülize_evít
(
m™uÆ_wrôî
, 
fqn
, 
evít_d©a
, 
evít_d©a_size
, 
èrgë
, ++
£quí˚_numbî
, 
åue
);

400 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

401 
îr‹_code
 = 
	`£rülize_evít
(
m™uÆ_wrôî
, 
fqn
, 
NULL
, 0, NULL, ++
£quí˚_numbî
, 
åue
);

402 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

404 
îr‹_code
 = 
	`kØ_evít_ªque°_£rülize
(
evít_m™agî
, 1, 
auto_wrôî
);

405 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

407 
îr‹_code
 = (
	`memcmp
(
auto_buf„r_±r
, 
m™uÆ_buf„r_±r
, 
KAA_EXTENSION_HEADER_SIZE
Ë=0 ? 
KAA_ERR_NONE
 : 
KAA_ERR_BADDATA
);

408 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

410 
auto_buf„r_±r
 +
KAA_EXTENSION_HEADER_SIZE
;

411 
m™uÆ_buf„r_±r
 +
KAA_EXTENSION_HEADER_SIZE
;

412 
evít_sync_size
 -
KAA_EXTENSION_HEADER_SIZE
;

414 
	`ASSERT_EQUAL
(*
auto_buf„r_±r
, *
m™uÆ_buf„r_±r
);

416 
auto_buf„r_±r
 +(
uöt16_t
);

417 
m™uÆ_buf„r_±r
 +(
uöt16_t
);

418 
evít_sync_size
 -(
uöt16_t
);

420 
îr‹_code
 = (
	`memcmp
(
auto_buf„r_±r
, 
m™uÆ_buf„r_±r
, 
evít_sync_size
Ë=0 ? 
KAA_ERR_NONE
 : 
KAA_ERR_BADDATA
);

421 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

423 
	`kØ_∂©f‹m_mesßge_wrôî_de°roy
(
m™uÆ_wrôî
);

424 
	`kØ_∂©f‹m_mesßge_wrôî_de°roy
(
auto_wrôî
);

425 
	`kØ_∂©f‹m_mesßge_ªadî_de°roy
(
£rvî_sync_ªadî
);

426 
	`kØ_∂©f‹m_mesßge_wrôî_de°roy
(
£rvî_sync_wrôî
);

427 
	}
}

431 
	$globÆ_evít_cb
(c⁄° *
fqn
, c⁄° *
d©a
, 
size_t
 
size
, 
kØ_ídpoöt_id_p
 
sour˚
)

433 ()
fqn
;

434 ()
d©a
;

435 ()
size
;

436 ()
sour˚
;

437 
globÆ_evíts_cou¡î
++;

438 
	}
}

442 
	$•ecific_evít_cb
(c⁄° *
fqn
, c⁄° *
d©a
, 
size_t
 
size
, 
kØ_ídpoöt_id_p
 
sour˚
)

444 ()
fqn
;

445 ()
d©a
;

446 ()
size
;

447 ()
sour˚
;

448 
•ecific_evíts_cou¡î
++;

449 
	}
}

451 
size_t
 
	$evít_gë_size
(c⁄° *
fqn


452 , c⁄° *
evít_d©a


453 , 
size_t
 
evít_d©a_size


454 , 
kØ_ídpoöt_id_p
 
sour˚
)

456 ()
sour˚
;

457 
size_t
 
size
 = 0;

459 
size
 +(
uöt16_t
)

460 + (
uöt16_t
);

462 i‡(
evít_d©a
) {

463 
size
 +(
uöt32_t
);

466 
size
 +
KAA_ENDPOINT_ID_LENGTH


467 + 
	`kØ_Æig√d_size_gë
(
	`°æí
(
fqn
));

469 i‡(
evít_d©a
) {

470 
size
 +
	`kØ_Æig√d_size_gë
(
evít_d©a_size
);

473  
size
;

474 
	}
}

476 
	$ã°_evít_blocks
(**
°©e
)

478 ()
°©e
;

480 
	`ã°_deöô
();

481 
	`ã°_öô
();

483 
size_t
 
£rvî_sync_buf„r_size
 = (
uöt32_t
);

485 
uöt8_t
 
£rvî_sync_buf„r
[
£rvî_sync_buf„r_size
];

486 
	`mem£t
(
£rvî_sync_buf„r
, 0, 
£rvî_sync_buf„r_size
);

488 
kØ_∂©f‹m_mesßge_ªadî_t
 *
£rvî_sync_ªadî
;

489 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªadî_¸óã
(&
£rvî_sync_ªadî
, 
£rvî_sync_buf„r
, 
£rvî_sync_buf„r_size
);

490 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

493 
îr‹_code
 = 
	`kØ_evít_h™dÀ_£rvî_sync
(
evít_m™agî
, 
£rvî_sync_ªadî
, 0x01, 
£rvî_sync_buf„r_size
, 1);

494 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

496 
kØ_evít_block_id
 
åx_id
 = 0;

497 
îr‹_code
 = 
	`kØ_evít_¸óã_å™ß˘i⁄
(
evít_m™agî
, &
åx_id
);

498 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

499 
	`ASSERT_TRUE
(
åx_id
);

501 c⁄° 
size_t
 
evít1_size
 = 6;

502 *
evít1
 = (*Ë
	`KAA_MALLOC
(
evít1_size
 + 1);

503 
	`°r˝y
(
evít1
, "event1");

504 
îr‹_code
 = 
	`kØ_evít_m™agî_add_evít_to_å™ß˘i⁄
(
evít_m™agî
, 
åx_id
, "ã°.fqn1", 
evít1
, 
evít1_size
, 
NULL
);

505 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

507 c⁄° 
size_t
 
evít2_size
 = 6;

508 *
evít2
 = (*Ë
	`KAA_MALLOC
(
evít2_size
 + 1);

509 
	`°r˝y
(
evít2
, "event2");

510 
îr‹_code
 = 
	`kØ_evít_m™agî_add_evít_to_å™ß˘i⁄
(
evít_m™agî
, 
åx_id
, "ã°.fqn2", 
evít2
, 
evít2_size
, 
NULL
);

511 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

513 
îr‹_code
 = 
	`kØ_evít_m™agî_add_evít_to_å™ß˘i⁄
(
evít_m™agî
, 
åx_id
, "ã°.fqn3", 
NULL
, 0, NULL);

514 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

516 
îr‹_code
 = 
	`kØ_evít_föish_å™ß˘i⁄
(
evít_m™agî
, 
åx_id
);

517 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

519 
size_t
 
ex≥˘ed_size
 = 
KAA_EXTENSION_HEADER_SIZE


520 + (
uöt32_t
)

521 + 3 * (
uöt32_t
)

522 + 3 * (
uöt32_t
)

523 + 2 * (
uöt32_t
)

524 + 
	`kØ_Æig√d_size_gë
(
evít1_size
Ë+ kØ_Æig√d_size_gë(
	`°æí
("test.fqn1"))

525 + 
	`kØ_Æig√d_size_gë
(
evít2_size
Ë+ kØ_Æig√d_size_gë(
	`°æí
("test.fqn2"))

526 + 
	`kØ_Æig√d_size_gë
(
	`°æí
("test.fqn3"));

528 
size_t
 
ªque°_size
 = 0;

529 
îr‹_code
 = 
	`kØ_evít_ªque°_gë_size
(
evít_m™agî
, &
ªque°_size
);

530 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

531 
	`ASSERT_EQUAL
(
ªque°_size
, 
ex≥˘ed_size
);

533 
	`kØ_∂©f‹m_mesßge_ªadî_de°roy
(
£rvî_sync_ªadî
);

534 
	}
}

536 
	$ã°_kØ_£rvî_sync_wôh_evít_ˇŒbacks
(**
°©e
)

538 ()
°©e
;

540 
	`ã°_deöô
();

541 
	`ã°_öô
();

543 
kØ_îr‹_t
 
îr‹_code
;

545 c⁄° 
uöt8_t
 
evít_fõld
 = 1;

546 c⁄° 
uöt8_t
 
ª£rved_fõld
 = 0;

547 
uöt16_t
 
evít_cou¡
 = 2;

549 c⁄° *
imp‹è¡_fqn
 = "important fqn";

550 c⁄° *
unimp‹è¡_fqn
 = "unimportant fqn";

555 c⁄° 
size_t
 
evít_d©a_size
 = 14;

556 c⁄° *
evít_d©a
 = (c⁄° *Ë
	`KAA_MALLOC
(
evít_d©a_size
);

558 
kØ_ídpoöt_id
 
sour˚
 = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0 };

560 
îr‹_code
 = 
	`kØ_evít_m™agî_add_⁄_evít_ˇŒback
(
evít_m™agî
, 
imp‹è¡_fqn
, 
•ecific_evít_cb
);

561 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

562 
îr‹_code
 = 
	`kØ_evít_m™agî_add_⁄_evít_ˇŒback
(
evít_m™agî
, 
NULL
, 
globÆ_evít_cb
);

563 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

565 
size_t
 
£rvî_sync_buf„r_size
 = 0;

567 
£rvî_sync_buf„r_size
 +(
uöt32_t
)

568 + (
uöt8_t
)

569 + (
uöt8_t
)

570 + (
uöt16_t
)

571 + 
	`evít_gë_size
(
unimp‹è¡_fqn
, 
NULL
, 0, 
sour˚
)

572 + 
	`evít_gë_size
(
imp‹è¡_fqn
, 
evít_d©a
, 
evít_d©a_size
, 
sour˚
);

574 
uöt8_t
 
£rvî_sync_buf„r
[
£rvî_sync_buf„r_size
];

575 
kØ_∂©f‹m_mesßge_wrôî_t
 *
£rvî_sync_wrôî
;

576 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôî_¸óã
(&
£rvî_sync_wrôî
, 
£rvî_sync_buf„r
, 
£rvî_sync_buf„r_size
);

577 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

579 
uöt32_t
 
£quí˚_numbî
 = 
	`KAA_HTONL
(12345);

580 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
£rvî_sync_wrôî
, &
£quí˚_numbî
, (
uöt32_t
));

581 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

582 
£quí˚_numbî
 = 
	`KAA_NTOHL
(sequence_number);

584 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
£rvî_sync_wrôî
, &
evít_fõld
, (
uöt8_t
));

585 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

587 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
£rvî_sync_wrôî
, &
ª£rved_fõld
, (
uöt8_t
));

588 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

590 
evít_cou¡
 = 
	`KAA_HTONS
(event_count);

591 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
£rvî_sync_wrôî
, &
evít_cou¡
, (
uöt16_t
));

592 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

594 
îr‹_code
 = 
	`£rülize_evít
(
£rvî_sync_wrôî
, 
unimp‹è¡_fqn
, 
NULL
, 0, 
sour˚
, 0, 
Ál£
);

595 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

597 
îr‹_code
 = 
	`£rülize_evít
(
£rvî_sync_wrôî
, 
imp‹è¡_fqn
, 
evít_d©a
, 
evít_d©a_size
, 
sour˚
, 0, 
Ál£
);

598 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

600 
kØ_∂©f‹m_mesßge_ªadî_t
 *
£rvî_sync_ªadî
;

601 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªadî_¸óã
(&
£rvî_sync_ªadî
, 
£rvî_sync_buf„r
, 
£rvî_sync_buf„r_size
);

602 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

604 
îr‹_code
 = 
	`kØ_evít_h™dÀ_£rvî_sync
(
evít_m™agî
, 
£rvî_sync_ªadî
, 0x1, 
£rvî_sync_buf„r_size
, 1);

605 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

607 
	`ASSERT_EQUAL
(
globÆ_evíts_cou¡î
, 1);

608 
	`ASSERT_EQUAL
(
•ecific_evíts_cou¡î
, 1);

610 
	`kØ_∂©f‹m_mesßge_ªadî_de°roy
(
£rvî_sync_ªadî
);

611 
	`kØ_∂©f‹m_mesßge_wrôî_de°roy
(
£rvî_sync_wrôî
);

612 
	`KAA_FREE
((*Ë
evít_d©a
);

613 
	}
}

618 
	$ã°_öô
()

620 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_log_¸óã
(&
loggî
, 
KAA_MAX_LOG_MESSAGE_LENGTH
, 
KAA_MAX_LOG_LEVEL
, 
NULL
);

621 i‡(
îr‹
 || !
loggî
) {

622  
îr‹
;

625 
kØ_c⁄ãxt
.
loggî
 =Üogger;

627 #i‚de‡
KAA_DISABLE_FEATURE_EVENTS


628 
îr‹
 = 
	`kØ_°©us_¸óã
(&
°©us
);

629 i‡(
îr‹
 || !
°©us
) {

630  
îr‹
;

633 
îr‹
 = 
	`kØ_ch™√l_m™agî_¸óã
(&
ch™√l_m™agî
, &
kØ_c⁄ãxt
);

634 i‡(
îr‹
 || !
ch™√l_m™agî
) {

635  
îr‹
;

638 
îr‹
 = 
	`kØ_evít_m™agî_¸óã
(&
evít_m™agî
, 
°©us
, 
ch™√l_m™agî
, 
loggî
);

639 i‡(
îr‹
 || !
evít_m™agî
) {

640  
îr‹
;

644 
	}
}

648 
	$ã°_deöô
()

650 #i‚de‡
KAA_DISABLE_FEATURE_EVENTS


651 
	`kØ_evít_m™agî_de°roy
(
evít_m™agî
);

652 
	`kØ_ch™√l_m™agî_de°roy
(
ch™√l_m™agî
);

653 
	`kØ_°©us_de°roy
(
°©us
);

655 
	`kØ_log_de°roy
(
loggî
);

657 
	}
}

661 #i‚de‡
KAA_DISABLE_FEATURE_EVENTS


662 
KAA_SUITE_MAIN
(
Evít
, 
ã°_öô
, 
ã°_deöô
,

663 
	$KAA_TEST_CASE
(
¸óã_evít_m™agî
, 
ã°_kØ_¸óã_evít_m™agî
)

664 
	$KAA_TEST_CASE
(
compûe_evít_ªque°
, 
ã°_kØ_evít_sync_gë_size
)

665 
	$KAA_TEST_CASE
(
evít_sync_£rülize
, 
ã°_evít_sync_£rülize
)

666 
	$KAA_TEST_CASE
(
add_⁄_evít_ˇŒback
, 
ã°_kØ_£rvî_sync_wôh_evít_ˇŒbacks
)

667 
	$KAA_TEST_CASE
(
evít_li°íîs_£rülize_ªque°
, 
ã°_kØ_evít_li°íîs_£rülize_ªque°
)

668 
	$KAA_TEST_CASE
(
evít_li°íîs_h™dÀ_sync
, 
ã°_kØ_evít_li°íîs_h™dÀ_sync
)

669 
	$KAA_TEST_CASE
(
evít_ã°_blocks
, 
ã°_evít_blocks
)

672 
	$KAA_SUITE_MAIN
(
Evít
, 
ã°_öô
, 
ã°_deöô
)

	@/var/www/html/debian/gateway/kaa/test/test_kaa_extension.c

17 
	~<kØ_exãnsi⁄.h
>

18 
	~<kØ_exãnsi⁄_¥iv©e.h
>

20 
	~"kØ_ã°.h
"

22 
	#FAKE_EXTENSION1_ID
 13

	)

23 
	#FAKE_EXTENSION2_ID
 5

	)

24 
	#FAKE_EXTENSION3_ID
 17

	)

26 
	#BAD_EXTENSION_ID
 3

	)

28 
	$ã°_kØ_exãnsi⁄_gë_wr⁄g_exãnsi⁄
(**
°©e
)

30 ()
°©e
;

31 
	`as£π_nuŒ
(
	`kØ_exãnsi⁄_gë
(0));

32 
	`as£π_nuŒ
(
	`kØ_exãnsi⁄_gë
(4));

33 
	`as£π_nuŒ
(
	`kØ_exãnsi⁄_gë
(100500));

34 
	}
}

36 
	$ã°_kØ_exãnsi⁄_gë_ok
(**
°©e
)

38 ()
°©e
;

39 
	`as£π_±r_equÆ
(&
Áke_exãnsi⁄1
, 
	`kØ_exãnsi⁄_gë
(
FAKE_EXTENSION1_ID
));

40 
	`as£π_±r_equÆ
(&
Áke_exãnsi⁄2
, 
	`kØ_exãnsi⁄_gë
(
FAKE_EXTENSION2_ID
));

41 
	`as£π_±r_equÆ
(&
Áke_exãnsi⁄3
, 
	`kØ_exãnsi⁄_gë
(
FAKE_EXTENSION3_ID
));

42 
	}
}

44 
	$ã°_kØ_exãnsi⁄_gë_c⁄ãxt_wr⁄g_exãnsi⁄
(**
°©e
)

46 ()
°©e
;

47 
	`as£π_nuŒ
(
	`kØ_exãnsi⁄_gë_c⁄ãxt
(0));

48 
	`as£π_nuŒ
(
	`kØ_exãnsi⁄_gë_c⁄ãxt
(4));

49 
	`as£π_nuŒ
(
	`kØ_exãnsi⁄_gë_c⁄ãxt
(100500));

50 
	}
}

52 
	$ã°_kØ_exãnsi⁄_£t_c⁄ãxt_wr⁄g_exãnsi⁄
(**
°©e
)

54 ()
°©e
;

55 
˘x
;

56 
	`as£π_öt_equÆ
(
KAA_ERR_NOT_FOUND
, 
	`kØ_exãnsi⁄_£t_c⁄ãxt
(0, &
˘x
));

57 
	}
}

59 
	$ã°_kØ_exãnsi⁄_£t_c⁄ãxt_ok
(**
°©e
)

61 ()
°©e
;

62 
˘x1
, 
˘x2
;

64 
	`as£π_±r_equÆ
(
NULL
, 
	`kØ_exãnsi⁄_gë_c⁄ãxt
(
FAKE_EXTENSION1_ID
));

65 
	`as£π_öt_equÆ
(
KAA_ERR_NONE
, 
	`kØ_exãnsi⁄_£t_c⁄ãxt
(
FAKE_EXTENSION1_ID
, &
˘x1
));

66 
	`as£π_±r_equÆ
(&
˘x1
, 
	`kØ_exãnsi⁄_gë_c⁄ãxt
(
FAKE_EXTENSION1_ID
));

68 
	`as£π_±r_equÆ
(
NULL
, 
	`kØ_exãnsi⁄_gë_c⁄ãxt
(
FAKE_EXTENSION2_ID
));

69 
	`as£π_öt_equÆ
(
KAA_ERR_NONE
, 
	`kØ_exãnsi⁄_£t_c⁄ãxt
(
FAKE_EXTENSION2_ID
, &
˘x2
));

70 
	`as£π_±r_equÆ
(&
˘x2
, 
	`kØ_exãnsi⁄_gë_c⁄ãxt
(
FAKE_EXTENSION2_ID
));

72 
	`as£π_±r_equÆ
(&
˘x1
, 
	`kØ_exãnsi⁄_gë_c⁄ãxt
(
FAKE_EXTENSION1_ID
));

73 
	}
}

75 
	$ã°_kØ_exãnsi⁄_öô_Æl_ok
(**
°©e
)

77 ()
°©e
;

79 
Áke_kØ_c⁄ãxt
;

81 
Áke_c⁄ãxt1
;

82 
Áke_c⁄ãxt2
;

83 
Áke_c⁄ãxt3
;

85 
	`ex≥˘_°rög
(
ˇŒed
, 
«me
, "fake_init1");

86 
	`ex≥˘_vÆue
(
Áke_öô1
, 
kØ_c⁄ãxt
, &
Áke_kØ_c⁄ãxt
);

87 
	`wûl_ªtu∫
(
Áke_öô1
, &
Áke_c⁄ãxt1
);

88 
	`wûl_ªtu∫
(
Áke_öô1
, 
KAA_ERR_NONE
);

90 
	`ex≥˘_°rög
(
ˇŒed
, 
«me
, "fake_init2");

91 
	`ex≥˘_vÆue
(
Áke_öô2
, 
kØ_c⁄ãxt
, &
Áke_kØ_c⁄ãxt
);

92 
	`wûl_ªtu∫
(
Áke_öô2
, &
Áke_c⁄ãxt2
);

93 
	`wûl_ªtu∫
(
Áke_öô2
, 
KAA_ERR_NONE
);

95 
	`ex≥˘_°rög
(
ˇŒed
, 
«me
, "fake_init3");

96 
	`ex≥˘_vÆue
(
Áke_öô3
, 
kØ_c⁄ãxt
, &
Áke_kØ_c⁄ãxt
);

97 
	`wûl_ªtu∫
(
Áke_öô3
, &
Áke_c⁄ãxt3
);

98 
	`wûl_ªtu∫
(
Áke_öô3
, 
KAA_ERR_NONE
);

100 
	`as£π_öt_equÆ
(
KAA_ERR_NONE
, 
	`kØ_exãnsi⁄_öô_Æl
((
kØ_c⁄ãxt_s
 *)&
Áke_kØ_c⁄ãxt
));

102 
	`as£π_±r_equÆ
(&
Áke_c⁄ãxt1
, 
	`kØ_exãnsi⁄_gë_c⁄ãxt
(
FAKE_EXTENSION1_ID
));

103 
	`as£π_±r_equÆ
(&
Áke_c⁄ãxt2
, 
	`kØ_exãnsi⁄_gë_c⁄ãxt
(
FAKE_EXTENSION2_ID
));

104 
	`as£π_±r_equÆ
(&
Áke_c⁄ãxt3
, 
	`kØ_exãnsi⁄_gë_c⁄ãxt
(
FAKE_EXTENSION3_ID
));

105 
	}
}

107 
	$ã°_kØ_exãnsi⁄_öô_Æl_Áû
(**
°©e
)

109 ()
°©e
;

111 
Áke_c⁄ãxt1
;

112 
Áke_c⁄ãxt2
;

113 
Áke_c⁄ãxt3
;

115 
	`ex≥˘_°rög
(
ˇŒed
, 
«me
, "fake_init1");

116 
	`ex≥˘_™y
(
Áke_öô1
, 
kØ_c⁄ãxt
);

117 
	`wûl_ªtu∫
(
Áke_öô1
, &
Áke_c⁄ãxt1
);

118 
	`wûl_ªtu∫
(
Áke_öô1
, 
KAA_ERR_NONE
);

120 
	`ex≥˘_°rög
(
ˇŒed
, 
«me
, "fake_init2");

121 
	`ex≥˘_™y
(
Áke_öô2
, 
kØ_c⁄ãxt
);

122 
	`wûl_ªtu∫
(
Áke_öô2
, &
Áke_c⁄ãxt2
);

123 
	`wûl_ªtu∫
(
Áke_öô2
, 
KAA_ERR_NONE
);

125 
	`ex≥˘_°rög
(
ˇŒed
, 
«me
, "fake_init3");

126 
	`ex≥˘_™y
(
Áke_öô3
, 
kØ_c⁄ãxt
);

127 
	`wûl_ªtu∫
(
Áke_öô3
, &
Áke_c⁄ãxt3
);

128 
	`wûl_ªtu∫
(
Áke_öô3
, 
KAA_ERR_BADPARAM
);

131 
	`ex≥˘_°rög
(
ˇŒed
, 
«me
, "fake_deinit2");

132 
	`ex≥˘_vÆue
(
Áke_deöô2
, 
c⁄ãxt
, &
Áke_c⁄ãxt2
);

133 
	`wûl_ªtu∫
(
Áke_deöô2
, 
KAA_ERR_NONE
);

135 
	`ex≥˘_°rög
(
ˇŒed
, 
«me
, "fake_deinit1");

136 
	`ex≥˘_vÆue
(
Áke_deöô1
, 
c⁄ãxt
, &
Áke_c⁄ãxt1
);

137 
	`wûl_ªtu∫
(
Áke_deöô1
, 
KAA_ERR_NONE
);

139 
	`as£π_öt_equÆ
(
KAA_ERR_BADPARAM
, 
	`kØ_exãnsi⁄_öô_Æl
(
NULL
));

140 
	}
}

142 
	$ã°_kØ_exãnsi⁄_deöô_Æl_ok
(**
°©e
)

144 ()
°©e
;

145 
Áke_c⁄ãxt1
, 
Áke_c⁄ãxt2
, 
Áke_c⁄ãxt3
;

147 
	`kØ_exãnsi⁄_£t_c⁄ãxt
(
FAKE_EXTENSION1_ID
, &
Áke_c⁄ãxt1
);

148 
	`kØ_exãnsi⁄_£t_c⁄ãxt
(
FAKE_EXTENSION2_ID
, &
Áke_c⁄ãxt2
);

149 
	`kØ_exãnsi⁄_£t_c⁄ãxt
(
FAKE_EXTENSION3_ID
, &
Áke_c⁄ãxt3
);

151 
	`ex≥˘_°rög
(
ˇŒed
, 
«me
, "fake_deinit3");

152 
	`ex≥˘_vÆue
(
Áke_deöô3
, 
c⁄ãxt
, &
Áke_c⁄ãxt3
);

153 
	`wûl_ªtu∫
(
Áke_deöô3
, 
KAA_ERR_NONE
);

155 
	`ex≥˘_°rög
(
ˇŒed
, 
«me
, "fake_deinit2");

156 
	`ex≥˘_vÆue
(
Áke_deöô2
, 
c⁄ãxt
, &
Áke_c⁄ãxt2
);

157 
	`wûl_ªtu∫
(
Áke_deöô2
, 
KAA_ERR_NONE
);

159 
	`ex≥˘_°rög
(
ˇŒed
, 
«me
, "fake_deinit1");

160 
	`ex≥˘_vÆue
(
Áke_deöô1
, 
c⁄ãxt
, &
Áke_c⁄ãxt1
);

161 
	`wûl_ªtu∫
(
Áke_deöô1
, 
KAA_ERR_NONE
);

163 
	`as£π_öt_equÆ
(
KAA_ERR_NONE
, 
	`kØ_exãnsi⁄_deöô_Æl
());

164 
	}
}

166 
	$ã°_kØ_exãnsi⁄_deöô_Æl_Áû
(**
°©e
)

168 ()
°©e
;

169 
Áke_c⁄ãxt1
, 
Áke_c⁄ãxt2
, 
Áke_c⁄ãxt3
;

171 
	`kØ_exãnsi⁄_£t_c⁄ãxt
(
FAKE_EXTENSION1_ID
, &
Áke_c⁄ãxt1
);

172 
	`kØ_exãnsi⁄_£t_c⁄ãxt
(
FAKE_EXTENSION2_ID
, &
Áke_c⁄ãxt2
);

173 
	`kØ_exãnsi⁄_£t_c⁄ãxt
(
FAKE_EXTENSION3_ID
, &
Áke_c⁄ãxt3
);

175 
	`ex≥˘_°rög
(
ˇŒed
, 
«me
, "fake_deinit3");

176 
	`ex≥˘_vÆue
(
Áke_deöô3
, 
c⁄ãxt
, &
Áke_c⁄ãxt3
);

177 
	`wûl_ªtu∫
(
Áke_deöô3
, 
KAA_ERR_NONE
);

179 
	`ex≥˘_°rög
(
ˇŒed
, 
«me
, "fake_deinit2");

180 
	`ex≥˘_vÆue
(
Áke_deöô2
, 
c⁄ãxt
, &
Áke_c⁄ãxt2
);

181 
	`wûl_ªtu∫
(
Áke_deöô2
, 
KAA_ERR_NOMEM
);

183 
	`ex≥˘_°rög
(
ˇŒed
, 
«me
, "fake_deinit1");

184 
	`ex≥˘_vÆue
(
Áke_deöô1
, 
c⁄ãxt
, &
Áke_c⁄ãxt1
);

185 
	`wûl_ªtu∫
(
Áke_deöô1
, 
KAA_ERR_NONE
);

187 
	`as£π_öt_equÆ
(
KAA_ERR_NOMEM
, 
	`kØ_exãnsi⁄_deöô_Æl
());

188 
	}
}

190 
	$ã°_kØ_exãnsi⁄_ªque°_£rülize_nŸ_found
(**
°©e
)

192 ()
°©e
;

194 
	`as£π_öt_equÆ
(
KAA_ERR_NOT_FOUND
,

195 
	`kØ_exãnsi⁄_ªque°_£rülize
(
BAD_EXTENSION_ID
, 0, 
NULL
, NULL, NULL));

196 
	}
}

198 
	$ã°_kØ_exãnsi⁄_ªque°_£rülize_ok
(**
°©e
)

200 ()
°©e
;

201 
Áke_c⁄ãxt1
, 
Áke_c⁄ãxt2
, 
Áke_c⁄ãxt3
;

202 
uöt8_t
 
buf„r
;

203 
size_t
 
size
 = 0;

204 
boﬁ
 
sync_√eded
 = 
åue
;

206 
	`kØ_exãnsi⁄_£t_c⁄ãxt
(
FAKE_EXTENSION1_ID
, &
Áke_c⁄ãxt1
);

207 
	`ex≥˘_°rög
(
ˇŒed
, 
«me
, "fake_request_serialize1");

208 
	`ex≥˘_vÆue
(
Áke_ªque°_£rülize1
, 
ªque°_id
, 13);

209 
	`ex≥˘_vÆue
(
Áke_ªque°_£rülize1
, 
c⁄ãxt
, &
Áke_c⁄ãxt1
);

210 
	`ex≥˘_vÆue
(
Áke_ªque°_£rülize1
, 
buf„r
, &buffer);

211 
	`wûl_ªtu∫
(
Áke_ªque°_£rülize1
, 143);

212 
	`wûl_ªtu∫
(
Áke_ªque°_£rülize1
, 
åue
);

213 
	`wûl_ªtu∫
(
Áke_ªque°_£rülize1
, 
KAA_ERR_NONE
);

214 
	`as£π_öt_equÆ
(
KAA_ERR_NONE
,

215 
	`kØ_exãnsi⁄_ªque°_£rülize
(
FAKE_EXTENSION1_ID
, 13, &
buf„r
, &
size
, &
sync_√eded
));

216 
	`as£π_öt_equÆ
(143, 
size
);

217 
	`as£π_åue
(
sync_√eded
);

219 
	`kØ_exãnsi⁄_£t_c⁄ãxt
(
FAKE_EXTENSION2_ID
, &
Áke_c⁄ãxt2
);

220 
	`ex≥˘_°rög
(
ˇŒed
, 
«me
, "fake_request_serialize2");

221 
	`ex≥˘_vÆue
(
Áke_ªque°_£rülize2
, 
ªque°_id
, 7);

222 
	`ex≥˘_vÆue
(
Áke_ªque°_£rülize2
, 
c⁄ãxt
, &
Áke_c⁄ãxt2
);

223 
	`ex≥˘_vÆue
(
Áke_ªque°_£rülize2
, 
buf„r
, &buffer);

224 
	`wûl_ªtu∫
(
Áke_ªque°_£rülize2
, 512);

225 
	`wûl_ªtu∫
(
Áke_ªque°_£rülize2
, 
Ál£
);

226 
	`wûl_ªtu∫
(
Áke_ªque°_£rülize2
, 
KAA_ERR_NONE
);

227 
	`as£π_öt_equÆ
(
KAA_ERR_NONE
,

228 
	`kØ_exãnsi⁄_ªque°_£rülize
(
FAKE_EXTENSION2_ID
, 7, &
buf„r
, &
size
, &
sync_√eded
));

229 
	`as£π_öt_equÆ
(512, 
size
);

230 
	`as£π_Ál£
(
sync_√eded
);

232 
	`kØ_exãnsi⁄_£t_c⁄ãxt
(
FAKE_EXTENSION3_ID
, &
Áke_c⁄ãxt3
);

233 
	`ex≥˘_°rög
(
ˇŒed
, 
«me
, "fake_request_serialize3");

234 
	`ex≥˘_vÆue
(
Áke_ªque°_£rülize3
, 
ªque°_id
, 19);

235 
	`ex≥˘_vÆue
(
Áke_ªque°_£rülize3
, 
c⁄ãxt
, &
Áke_c⁄ãxt3
);

236 
	`ex≥˘_vÆue
(
Áke_ªque°_£rülize3
, 
buf„r
, &buffer);

237 
	`wûl_ªtu∫
(
Áke_ªque°_£rülize3
, 0);

238 
	`wûl_ªtu∫
(
Áke_ªque°_£rülize3
, 
åue
);

239 
	`wûl_ªtu∫
(
Áke_ªque°_£rülize3
, 
KAA_ERR_NONE
);

240 
	`as£π_öt_equÆ
(
KAA_ERR_NONE
,

241 
	`kØ_exãnsi⁄_ªque°_£rülize
(
FAKE_EXTENSION3_ID
, 19, &
buf„r
, &
size
, &
sync_√eded
));

242 
	`as£π_öt_equÆ
(0, 
size
);

243 
	`as£π_åue
(
sync_√eded
);

244 
	}
}

246 
	$ã°_kØ_exãnsi⁄_ªque°_£rülize_Áû
(**
°©e
)

248 ()
°©e
;

249 
size_t
 
size
 = 0;

250 
boﬁ
 
sync_√eded
 = 
åue
;

251 
uöt8_t
 
buf„r
;

253 
	`kØ_exãnsi⁄_£t_c⁄ãxt
(
FAKE_EXTENSION1_ID
, 
NULL
);

254 
	`ex≥˘_°rög
(
ˇŒed
, 
«me
, "fake_request_serialize1");

255 
	`ex≥˘_vÆue
(
Áke_ªque°_£rülize1
, 
ªque°_id
, 13);

256 
	`ex≥˘_vÆue
(
Áke_ªque°_£rülize1
, 
buf„r
, &buffer);

257 
	`ex≥˘_vÆue
(
Áke_ªque°_£rülize1
, 
c⁄ãxt
, 
NULL
);

258 
	`wûl_ªtu∫
(
Áke_ªque°_£rülize1
, 0);

259 
	`wûl_ªtu∫
(
Áke_ªque°_£rülize1
, 
åue
);

260 
	`wûl_ªtu∫
(
Áke_ªque°_£rülize1
, 
KAA_ERR_NOMEM
);

261 
	`as£π_öt_equÆ
(
KAA_ERR_NOMEM
,

262 
	`kØ_exãnsi⁄_ªque°_£rülize
(
FAKE_EXTENSION1_ID
, 13, &
buf„r
, &
size
, &
sync_√eded
));

263 
	}
}

265 
	$ã°_kØ_exãnsi⁄_£rvî_sync_nŸ_found
(**
°©e
)

267 ()
°©e
;

269 
	`as£π_öt_equÆ
(
KAA_ERR_NOT_FOUND
,

270 
	`kØ_exãnsi⁄_£rvî_sync
(
BAD_EXTENSION_ID
, 0, 0, 
NULL
, 0));

271 
	}
}

273 
	$ã°_kØ_exãnsi⁄_£rvî_sync_ok
(**
°©e
)

275 ()
°©e
;

276 
Áke_c⁄ãxt1
, 
Áke_c⁄ãxt2
, 
Áke_c⁄ãxt3
;

277 
uöt8_t
 
buf„r
;

279 
	`kØ_exãnsi⁄_£t_c⁄ãxt
(
FAKE_EXTENSION1_ID
, &
Áke_c⁄ãxt1
);

280 
	`ex≥˘_°rög
(
ˇŒed
, 
«me
, "fake_server_sync1");

281 
	`ex≥˘_vÆue
(
Áke_£rvî_sync1
, 
c⁄ãxt
, &
Áke_c⁄ãxt1
);

282 
	`ex≥˘_vÆue
(
Áke_£rvî_sync1
, 
ªque°_id
, 13);

283 
	`ex≥˘_vÆue
(
Áke_£rvî_sync1
, 
exãnsi⁄_›ti⁄s
, 2);

284 
	`ex≥˘_vÆue
(
Áke_£rvî_sync1
, 
buf„r
, &buffer);

285 
	`ex≥˘_vÆue
(
Áke_£rvî_sync1
, 
size
, 113);

286 
	`wûl_ªtu∫
(
Áke_£rvî_sync1
, 
KAA_ERR_NONE
);

287 
	`as£π_öt_equÆ
(
KAA_ERR_NONE
,

288 
	`kØ_exãnsi⁄_£rvî_sync
(
FAKE_EXTENSION1_ID
, 13, 2, &
buf„r
, 113));

290 
	`kØ_exãnsi⁄_£t_c⁄ãxt
(
FAKE_EXTENSION2_ID
, &
Áke_c⁄ãxt2
);

291 
	`ex≥˘_°rög
(
ˇŒed
, 
«me
, "fake_server_sync2");

292 
	`ex≥˘_vÆue
(
Áke_£rvî_sync2
, 
c⁄ãxt
, &
Áke_c⁄ãxt2
);

293 
	`ex≥˘_vÆue
(
Áke_£rvî_sync2
, 
ªque°_id
, 7);

294 
	`ex≥˘_vÆue
(
Áke_£rvî_sync2
, 
exãnsi⁄_›ti⁄s
, 14);

295 
	`ex≥˘_vÆue
(
Áke_£rvî_sync2
, 
buf„r
, &buffer);

296 
	`ex≥˘_vÆue
(
Áke_£rvî_sync2
, 
size
, 9);

297 
	`wûl_ªtu∫
(
Áke_£rvî_sync2
, 
KAA_ERR_NONE
);

298 
	`as£π_öt_equÆ
(
KAA_ERR_NONE
,

299 
	`kØ_exãnsi⁄_£rvî_sync
(
FAKE_EXTENSION2_ID
, 7, 14, &
buf„r
, 9));

301 
	`kØ_exãnsi⁄_£t_c⁄ãxt
(
FAKE_EXTENSION3_ID
, &
Áke_c⁄ãxt3
);

302 
	`ex≥˘_°rög
(
ˇŒed
, 
«me
, "fake_server_sync3");

303 
	`ex≥˘_vÆue
(
Áke_£rvî_sync3
, 
c⁄ãxt
, &
Áke_c⁄ãxt3
);

304 
	`ex≥˘_vÆue
(
Áke_£rvî_sync3
, 
ªque°_id
, 0);

305 
	`ex≥˘_vÆue
(
Áke_£rvî_sync3
, 
exãnsi⁄_›ti⁄s
, 0);

306 
	`ex≥˘_vÆue
(
Áke_£rvî_sync3
, 
buf„r
, 
NULL
);

307 
	`ex≥˘_vÆue
(
Áke_£rvî_sync3
, 
size
, 0);

308 
	`wûl_ªtu∫
(
Áke_£rvî_sync3
, 
KAA_ERR_NONE
);

309 
	`as£π_öt_equÆ
(
KAA_ERR_NONE
,

310 
	`kØ_exãnsi⁄_£rvî_sync
(
FAKE_EXTENSION3_ID
, 0, 0, 
NULL
, 0));

311 
	}
}

313 
	$ã°_kØ_exãnsi⁄_£rvî_sync_Áû
(**
°©e
)

315 ()
°©e
;

317 
	`kØ_exãnsi⁄_£t_c⁄ãxt
(
FAKE_EXTENSION1_ID
, 
NULL
);

318 
	`ex≥˘_°rög
(
ˇŒed
, 
«me
, "fake_server_sync1");

319 
	`ex≥˘_vÆue
(
Áke_£rvî_sync1
, 
c⁄ãxt
, 
NULL
);

320 
	`ex≥˘_vÆue
(
Áke_£rvî_sync1
, 
ªque°_id
, 0);

321 
	`ex≥˘_vÆue
(
Áke_£rvî_sync1
, 
exãnsi⁄_›ti⁄s
, 0);

322 
	`ex≥˘_vÆue
(
Áke_£rvî_sync1
, 
buf„r
, 
NULL
);

323 
	`ex≥˘_vÆue
(
Áke_£rvî_sync1
, 
size
, 0);

324 
	`wûl_ªtu∫
(
Áke_£rvî_sync1
, 
KAA_ERR_NOMEM
);

325 
	`as£π_öt_equÆ
(
KAA_ERR_NOMEM
,

326 
	`kØ_exãnsi⁄_£rvî_sync
(
FAKE_EXTENSION1_ID
, 0, 0, 
NULL
, 0));

327 
	}
}

329 
	$maö
()

333 ()
kØ_exãnsi⁄s
;

335 c⁄° 
CMUnôTe°
 
ã°s
[] = {

336 
	`cmocka_unô_ã°
(
ã°_kØ_exãnsi⁄_gë_wr⁄g_exãnsi⁄
),

337 
	`cmocka_unô_ã°
(
ã°_kØ_exãnsi⁄_gë_ok
),

339 
	`cmocka_unô_ã°
(
ã°_kØ_exãnsi⁄_gë_c⁄ãxt_wr⁄g_exãnsi⁄
),

341 
	`cmocka_unô_ã°
(
ã°_kØ_exãnsi⁄_£t_c⁄ãxt_wr⁄g_exãnsi⁄
),

342 
	`cmocka_unô_ã°
(
ã°_kØ_exãnsi⁄_£t_c⁄ãxt_ok
),

344 
	`cmocka_unô_ã°
(
ã°_kØ_exãnsi⁄_öô_Æl_ok
),

345 
	`cmocka_unô_ã°
(
ã°_kØ_exãnsi⁄_öô_Æl_Áû
),

347 
	`cmocka_unô_ã°
(
ã°_kØ_exãnsi⁄_deöô_Æl_ok
),

348 
	`cmocka_unô_ã°
(
ã°_kØ_exãnsi⁄_deöô_Æl_Áû
),

350 
	`cmocka_unô_ã°
(
ã°_kØ_exãnsi⁄_ªque°_£rülize_nŸ_found
),

351 
	`cmocka_unô_ã°
(
ã°_kØ_exãnsi⁄_ªque°_£rülize_ok
),

352 
	`cmocka_unô_ã°
(
ã°_kØ_exãnsi⁄_ªque°_£rülize_Áû
),

354 
	`cmocka_unô_ã°
(
ã°_kØ_exãnsi⁄_£rvî_sync_nŸ_found
),

355 
	`cmocka_unô_ã°
(
ã°_kØ_exãnsi⁄_£rvî_sync_ok
),

356 
	`cmocka_unô_ã°
(
ã°_kØ_exãnsi⁄_£rvî_sync_Áû
),

359  
	`cmocka_run_group_ã°s
(
ã°s
, 
NULL
, NULL);

360 
	}
}

362 
	$ˇŒed
(c⁄° *
«me
)

364 
	`check_ex≥˘ed
(
«me
);

365 
	}
}

367 
kØ_îr‹_t
 
	$Áke_öô1
(
kØ_c⁄ãxt_s
 *
kØ_c⁄ãxt
, **
c⁄ãxt
)

369 
	`ˇŒed
("fake_init1");

370 
	`check_ex≥˘ed_±r
(
kØ_c⁄ãxt
);

371 *
c⁄ãxt
 = 
	`mock_±r_ty≥
(*);

372  
	`mock_ty≥
(
kØ_îr‹_t
);

373 
	}
}

375 
kØ_îr‹_t
 
	$Áke_öô2
(
kØ_c⁄ãxt_s
 *
kØ_c⁄ãxt
, **
c⁄ãxt
)

377 
	`ˇŒed
("fake_init2");

378 
	`check_ex≥˘ed_±r
(
kØ_c⁄ãxt
);

379 *
c⁄ãxt
 = 
	`mock_±r_ty≥
(*);

380  
	`mock_ty≥
(
kØ_îr‹_t
);

381 
	}
}

383 
kØ_îr‹_t
 
	$Áke_öô3
(
kØ_c⁄ãxt_s
 *
kØ_c⁄ãxt
, **
c⁄ãxt
)

385 
	`ˇŒed
("fake_init3");

386 
	`check_ex≥˘ed_±r
(
kØ_c⁄ãxt
);

387 *
c⁄ãxt
 = 
	`mock_±r_ty≥
(*);

388  
	`mock_ty≥
(
kØ_îr‹_t
);

389 
	}
}

391 
kØ_îr‹_t
 
	$Áke_deöô1
(*
c⁄ãxt
)

393 
	`ˇŒed
("fake_deinit1");

394 
	`check_ex≥˘ed_±r
(
c⁄ãxt
);

395  
	`mock_ty≥
(
kØ_îr‹_t
);

396 
	}
}

398 
kØ_îr‹_t
 
	$Áke_deöô2
(*
c⁄ãxt
)

400 
	`ˇŒed
("fake_deinit2");

401 
	`check_ex≥˘ed_±r
(
c⁄ãxt
);

402  
	`mock_ty≥
(
kØ_îr‹_t
);

403 
	}
}

405 
kØ_îr‹_t
 
	$Áke_deöô3
(*
c⁄ãxt
)

407 
	`ˇŒed
("fake_deinit3");

408 
	`check_ex≥˘ed_±r
(
c⁄ãxt
);

409  
	`mock_ty≥
(
kØ_îr‹_t
);

410 
	}
}

412 
kØ_îr‹_t
 
	$Áke_ªque°_£rülize1
(*
c⁄ãxt
, 
uöt32_t
 
ªque°_id
,

413 
uöt8_t
 *
buf„r
, 
size_t
 *
size
, 
boﬁ
 *
sync_√eded
)

415 
	`ˇŒed
("fake_request_serialize1");

416 
	`check_ex≥˘ed
(
ªque°_id
);

417 
	`check_ex≥˘ed_±r
(
c⁄ãxt
);

418 
	`check_ex≥˘ed_±r
(
buf„r
);

419 *
size
 = 
	`mock_ty≥
(
size_t
);

420 *
sync_√eded
 = 
	`mock_ty≥
(
boﬁ
);

421  
	`mock_ty≥
(
kØ_îr‹_t
);

422 
	}
}

424 
kØ_îr‹_t
 
	$Áke_ªque°_£rülize2
(*
c⁄ãxt
, 
uöt32_t
 
ªque°_id
,

425 
uöt8_t
 *
buf„r
, 
size_t
 *
size
, 
boﬁ
 *
sync_√eded
)

427 
	`ˇŒed
("fake_request_serialize2");

428 
	`check_ex≥˘ed
(
ªque°_id
);

429 
	`check_ex≥˘ed_±r
(
c⁄ãxt
);

430 
	`check_ex≥˘ed_±r
(
buf„r
);

431 *
size
 = 
	`mock_ty≥
(
size_t
);

432 *
sync_√eded
 = 
	`mock_ty≥
(
boﬁ
);

433  
	`mock_ty≥
(
kØ_îr‹_t
);

434 
	}
}

436 
kØ_îr‹_t
 
	$Áke_ªque°_£rülize3
(*
c⁄ãxt
, 
uöt32_t
 
ªque°_id
,

437 
uöt8_t
 *
buf„r
, 
size_t
 *
size
, 
boﬁ
 *
sync_√eded
)

439 
	`ˇŒed
("fake_request_serialize3");

440 
	`check_ex≥˘ed
(
ªque°_id
);

441 
	`check_ex≥˘ed_±r
(
c⁄ãxt
);

442 
	`check_ex≥˘ed_±r
(
buf„r
);

443 *
size
 = 
	`mock_ty≥
(
size_t
);

444 *
sync_√eded
 = 
	`mock_ty≥
(
boﬁ
);

445  
	`mock_ty≥
(
kØ_îr‹_t
);

446 
	}
}

448 
kØ_îr‹_t
 
	$Áke_£rvî_sync1
(*
c⁄ãxt
, 
uöt32_t
 
ªque°_id
,

449 
uöt16_t
 
exãnsi⁄_›ti⁄s
, c⁄° 
uöt8_t
 *
buf„r
, 
size_t
 
size
)

451 
	`ˇŒed
("fake_server_sync1");

452 
	`check_ex≥˘ed_±r
(
c⁄ãxt
);

453 
	`check_ex≥˘ed
(
ªque°_id
);

454 
	`check_ex≥˘ed
(
exãnsi⁄_›ti⁄s
);

455 
	`check_ex≥˘ed_±r
(
buf„r
);

456 
	`check_ex≥˘ed
(
size
);

457  
	`mock_ty≥
(
kØ_îr‹_t
);

458 
	}
}

460 
kØ_îr‹_t
 
	$Áke_£rvî_sync2
(*
c⁄ãxt
, 
uöt32_t
 
ªque°_id
,

461 
uöt16_t
 
exãnsi⁄_›ti⁄s
, c⁄° 
uöt8_t
 *
buf„r
, 
size_t
 
size
)

463 
	`ˇŒed
("fake_server_sync2");

464 
	`check_ex≥˘ed_±r
(
c⁄ãxt
);

465 
	`check_ex≥˘ed
(
ªque°_id
);

466 
	`check_ex≥˘ed
(
exãnsi⁄_›ti⁄s
);

467 
	`check_ex≥˘ed_±r
(
buf„r
);

468 
	`check_ex≥˘ed
(
size
);

469  
	`mock_ty≥
(
kØ_îr‹_t
);

470 
	}
}

472 
kØ_îr‹_t
 
	$Áke_£rvî_sync3
(*
c⁄ãxt
, 
uöt32_t
 
ªque°_id
,

473 
uöt16_t
 
exãnsi⁄_›ti⁄s
, c⁄° 
uöt8_t
 *
buf„r
, 
size_t
 
size
)

475 
	`ˇŒed
("fake_server_sync3");

476 
	`check_ex≥˘ed_±r
(
c⁄ãxt
);

477 
	`check_ex≥˘ed
(
ªque°_id
);

478 
	`check_ex≥˘ed
(
exãnsi⁄_›ti⁄s
);

479 
	`check_ex≥˘ed_±r
(
buf„r
);

480 
	`check_ex≥˘ed
(
size
);

481  
	`mock_ty≥
(
kØ_îr‹_t
);

482 
	}
}

484 c⁄° 
kØ_exãnsi⁄
 
	gÁke_exãnsi⁄1
 = {

485 .
id
 = 
FAKE_EXTENSION1_ID
,

486 .
	göô
 = 
Áke_öô1
,

487 .
	gdeöô
 = 
Áke_deöô1
,

488 .
	gªque°_£rülize
 = 
Áke_ªque°_£rülize1
,

489 .
	g£rvî_sync
 = 
Áke_£rvî_sync1
,

492 c⁄° 
kØ_exãnsi⁄
 
	gÁke_exãnsi⁄2
 = {

493 .
id
 = 
FAKE_EXTENSION2_ID
,

494 .
	göô
 = 
Áke_öô2
,

495 .
	gdeöô
 = 
Áke_deöô2
,

496 .
	gªque°_£rülize
 = 
Áke_ªque°_£rülize2
,

497 .
	g£rvî_sync
 = 
Áke_£rvî_sync2
,

500 c⁄° 
kØ_exãnsi⁄
 
	gÁke_exãnsi⁄3
 = {

501 .
id
 = 
FAKE_EXTENSION3_ID
,

502 .
	göô
 = 
Áke_öô3
,

503 .
	gdeöô
 = 
Áke_deöô3
,

504 .
	gªque°_£rülize
 = 
Áke_ªque°_£rülize3
,

505 .
	g£rvî_sync
 = 
Áke_£rvî_sync3
,

	@/var/www/html/debian/gateway/kaa/test/test_kaa_extension_private.c

17 
	~<kØ_exãnsi⁄.h
>

18 
	~<kØ_comm⁄.h
>

20 
	~"kØ_ã°.h
"

22 
	$ã°_kØ_exãnsi⁄_gë_Æl_exãnsi⁄s
(**
°©e
)

24 ()
°©e
;

25 
	`as£π_n⁄_nuŒ
(
	`kØ_exãnsi⁄_gë
(
KAA_EXTENSION_BOOTSTRAP
));

27 #i‚de‡
KAA_DISABLE_FEATURE_PROFILE


28 
	`as£π_n⁄_nuŒ
(
	`kØ_exãnsi⁄_gë
(
KAA_EXTENSION_PROFILE
));

30 
	`as£π_nuŒ
(
	`kØ_exãnsi⁄_gë
(
KAA_EXTENSION_PROFILE
));

33 #i‚de‡
KAA_DISABLE_FEATURE_USER


34 
	`as£π_n⁄_nuŒ
(
	`kØ_exãnsi⁄_gë
(
KAA_EXTENSION_USER
));

36 
	`as£π_nuŒ
(
	`kØ_exãnsi⁄_gë
(
KAA_EXTENSION_USER
));

39 #i‚de‡
KAA_DISABLE_FEATURE_LOGGING


40 
	`as£π_n⁄_nuŒ
(
	`kØ_exãnsi⁄_gë
(
KAA_EXTENSION_LOGGING
));

42 
	`as£π_nuŒ
(
	`kØ_exãnsi⁄_gë
(
KAA_EXTENSION_LOGGING
));

45 #i‚de‡
KAA_DISABLE_FEATURE_CONFIGURATION


46 
	`as£π_n⁄_nuŒ
(
	`kØ_exãnsi⁄_gë
(
KAA_EXTENSION_CONFIGURATION
));

48 
	`as£π_nuŒ
(
	`kØ_exãnsi⁄_gë
(
KAA_EXTENSION_CONFIGURATION
));

51 #i‚de‡
KAA_DISABLE_FEATURE_EVENTS


52 
	`as£π_n⁄_nuŒ
(
	`kØ_exãnsi⁄_gë
(
KAA_EXTENSION_EVENT
));

54 
	`as£π_nuŒ
(
	`kØ_exãnsi⁄_gë
(
KAA_EXTENSION_EVENT
));

57 #i‚de‡
KAA_DISABLE_FEATURE_NOTIFICATION


58 
	`as£π_n⁄_nuŒ
(
	`kØ_exãnsi⁄_gë
(
KAA_EXTENSION_NOTIFICATION
));

60 
	`as£π_nuŒ
(
	`kØ_exãnsi⁄_gë
(
KAA_EXTENSION_NOTIFICATION
));

62 
	}
}

64 
	$maö
()

66 c⁄° 
CMUnôTe°
 
ã°s
[] = {

67 
	`cmocka_unô_ã°
(
ã°_kØ_exãnsi⁄_gë_Æl_exãnsi⁄s
),

70  
	`cmocka_run_group_ã°s
(
ã°s
, 
NULL
, NULL);

71 
	}
}

73 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_boŸ°øp_öô
(
kØ_c⁄ãxt_s
 *
kØ_c⁄ãxt
, **
c⁄ãxt
)

74 { ()
kØ_c⁄ãxt
; ()
c⁄ãxt
;  
KAA_ERR_NONE
; 
	}
}

75 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_¥ofûe_öô
(
kØ_c⁄ãxt_s
 *
kØ_c⁄ãxt
, **
c⁄ãxt
)

76 { ()
kØ_c⁄ãxt
; ()
c⁄ãxt
;  
KAA_ERR_NONE
; 
	}
}

77 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_evít_öô
(
kØ_c⁄ãxt_s
 *
kØ_c⁄ãxt
, **
c⁄ãxt
)

78 { ()
kØ_c⁄ãxt
; ()
c⁄ãxt
;  
KAA_ERR_NONE
; 
	}
}

79 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_loggög_öô
(
kØ_c⁄ãxt_s
 *
kØ_c⁄ãxt
, **
c⁄ãxt
)

80 { ()
kØ_c⁄ãxt
; ()
c⁄ãxt
;  
KAA_ERR_NONE
; 
	}
}

81 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_c⁄figuøti⁄_öô
(
kØ_c⁄ãxt_s
 *
kØ_c⁄ãxt
, **
c⁄ãxt
)

82 { ()
kØ_c⁄ãxt
; ()
c⁄ãxt
;  
KAA_ERR_NONE
; 
	}
}

83 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_nŸifiˇti⁄_öô
(
kØ_c⁄ãxt_s
 *
kØ_c⁄ãxt
, **
c⁄ãxt
)

84 { ()
kØ_c⁄ãxt
; ()
c⁄ãxt
;  
KAA_ERR_NONE
; 
	}
}

85 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_u£r_öô
(
kØ_c⁄ãxt_s
 *
kØ_c⁄ãxt
, **
c⁄ãxt
)

86 { ()
kØ_c⁄ãxt
; ()
c⁄ãxt
;  
KAA_ERR_NONE
; 
	}
}

88 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_boŸ°øp_deöô
(*
c⁄ãxt
Ë{ ()c⁄ãxt;  
KAA_ERR_NONE
; 
	}
}

89 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_¥ofûe_deöô
(*
c⁄ãxt
Ë{ ()c⁄ãxt;  
KAA_ERR_NONE
; 
	}
}

90 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_evít_deöô
(*
c⁄ãxt
Ë{ ()c⁄ãxt;  
KAA_ERR_NONE
; 
	}
}

91 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_loggög_deöô
(*
c⁄ãxt
Ë{ ()c⁄ãxt;  
KAA_ERR_NONE
; 
	}
}

92 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_c⁄figuøti⁄_deöô
(*
c⁄ãxt
Ë{ ()c⁄ãxt;  
KAA_ERR_NONE
; 
	}
}

93 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_nŸifiˇti⁄_deöô
(*
c⁄ãxt
Ë{ ()c⁄ãxt;  
KAA_ERR_NONE
; 
	}
}

94 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_u£r_deöô
(*
c⁄ãxt
Ë{ ()c⁄ãxt;  
KAA_ERR_NONE
; 
	}
}

96 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_boŸ°øp_ªque°_gë_size
(*
£lf
, 
size_t
 *
ex≥˘ed_size
)

97 { ()
£lf
; ()
ex≥˘ed_size
;  
KAA_ERR_NONE
; 
	}
}

98 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_¥ofûe_ªque°_gë_size
(*
£lf
, 
size_t
 *
ex≥˘ed_size
)

99 { ()
£lf
; ()
ex≥˘ed_size
;  
KAA_ERR_NONE
; 
	}
}

100 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_evít_ªque°_gë_size
(*
£lf
, 
size_t
 *
ex≥˘ed_size
)

101 { ()
£lf
; ()
ex≥˘ed_size
;  
KAA_ERR_NONE
; 
	}
}

102 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_loggög_ªque°_gë_size
(*
£lf
, 
size_t
 *
ex≥˘ed_size
)

103 { ()
£lf
; ()
ex≥˘ed_size
;  
KAA_ERR_NONE
; 
	}
}

104 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_c⁄figuøti⁄_ªque°_gë_size
(*
£lf
, 
size_t
 *
ex≥˘ed_size
)

105 { ()
£lf
; ()
ex≥˘ed_size
;  
KAA_ERR_NONE
; 
	}
}

106 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_nŸifiˇti⁄_ªque°_gë_size
(*
£lf
, 
size_t
 *
ex≥˘ed_size
)

107 { ()
£lf
; ()
ex≥˘ed_size
;  
KAA_ERR_NONE
; 
	}
}

108 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_u£r_ªque°_gë_size
(*
£lf
, 
size_t
 *
ex≥˘ed_size
)

109 { ()
£lf
; ()
ex≥˘ed_size
;  
KAA_ERR_NONE
; 
	}
}

111 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_boŸ°øp_ªque°_£rülize
(*
c⁄ãxt
, 
uöt8_t
 *
buf„r
, 
size_t
 *
size
,

112 
boﬁ
 *
√ed_ªsync
)

113 { ()
c⁄ãxt
; ()
buf„r
; ()
size
; ()
√ed_ªsync
;  
KAA_ERR_NONE
; 
	}
}

114 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_¥ofûe_ªque°_£rülize
(*
c⁄ãxt
, 
uöt8_t
 *
buf„r
, 
size_t
 *
size
,

115 
boﬁ
 *
√ed_ªsync
)

116 { ()
c⁄ãxt
; ()
buf„r
; ()
size
; ()
√ed_ªsync
;  
KAA_ERR_NONE
; 
	}
}

117 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_evít_ªque°_£rülize
(*
c⁄ãxt
, 
uöt8_t
 *
buf„r
, 
size_t
 *
size
,

118 
boﬁ
 *
√ed_ªsync
)

119 { ()
c⁄ãxt
; ()
buf„r
; ()
size
; ()
√ed_ªsync
;  
KAA_ERR_NONE
; 
	}
}

120 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_loggög_ªque°_£rülize
(*
c⁄ãxt
, 
uöt8_t
 *
buf„r
, 
size_t
 *
size
,

121 
boﬁ
 *
√ed_ªsync
)

122 { ()
c⁄ãxt
; ()
buf„r
; ()
size
; ()
√ed_ªsync
;  
KAA_ERR_NONE
; 
	}
}

123 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_c⁄figuøti⁄_ªque°_£rülize
(*
c⁄ãxt
, 
uöt8_t
 *
buf„r
, 
size_t
 *
size
,

124 
boﬁ
 *
√ed_ªsync
)

125 { ()
c⁄ãxt
; ()
buf„r
; ()
size
; ()
√ed_ªsync
;  
KAA_ERR_NONE
; 
	}
}

126 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_nŸifiˇti⁄_ªque°_£rülize
(*
c⁄ãxt
, 
uöt8_t
 *
buf„r
, 
size_t
 *
size
,

127 
boﬁ
 *
√ed_ªsync
)

128 { ()
c⁄ãxt
; ()
buf„r
; ()
size
; ()
√ed_ªsync
;  
KAA_ERR_NONE
; 
	}
}

129 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_u£r_ªque°_£rülize
(*
c⁄ãxt
, 
uöt8_t
 *
buf„r
, 
size_t
 *
size
,

130 
boﬁ
 *
√ed_ªsync
)

131 { ()
c⁄ãxt
; ()
buf„r
; ()
size
; ()
√ed_ªsync
;  
KAA_ERR_NONE
; 
	}
}

133 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_boŸ°øp_£rvî_sync
(*
c⁄ãxt
, 
uöt32_t
 
ªque°_id
,

134 
uöt16_t
 
exãnsi⁄_›ti⁄s
, c⁄° 
uöt8_t
 *
buf„r
, 
size_t
 
size
)

135 { ()
c⁄ãxt
; ()
ªque°_id
; ()
exãnsi⁄_›ti⁄s
; ()
buf„r
; ()
size
;  
KAA_ERR_NONE
; 
	}
}

136 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_¥ofûe_£rvî_sync
(*
c⁄ãxt
, 
uöt32_t
 
ªque°_id
,

137 
uöt16_t
 
exãnsi⁄_›ti⁄s
, c⁄° 
uöt8_t
 *
buf„r
, 
size_t
 
size
)

138 { ()
c⁄ãxt
; ()
ªque°_id
; ()
exãnsi⁄_›ti⁄s
; ()
buf„r
; ()
size
;  
KAA_ERR_NONE
; 
	}
}

139 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_evít_£rvî_sync
(*
c⁄ãxt
, 
uöt32_t
 
ªque°_id
,

140 
uöt16_t
 
exãnsi⁄_›ti⁄s
, c⁄° 
uöt8_t
 *
buf„r
, 
size_t
 
size
)

141 { ()
c⁄ãxt
; ()
ªque°_id
; ()
exãnsi⁄_›ti⁄s
; ()
buf„r
; ()
size
;  
KAA_ERR_NONE
; 
	}
}

142 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_loggög_£rvî_sync
(*
c⁄ãxt
, 
uöt32_t
 
ªque°_id
,

143 
uöt16_t
 
exãnsi⁄_›ti⁄s
, c⁄° 
uöt8_t
 *
buf„r
, 
size_t
 
size
)

144 { ()
c⁄ãxt
; ()
ªque°_id
; ()
exãnsi⁄_›ti⁄s
; ()
buf„r
; ()
size
;  
KAA_ERR_NONE
; 
	}
}

145 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_c⁄figuøti⁄_£rvî_sync
(*
c⁄ãxt
, 
uöt32_t
 
ªque°_id
,

146 
uöt16_t
 
exãnsi⁄_›ti⁄s
, c⁄° 
uöt8_t
 *
buf„r
, 
size_t
 
size
)

147 { ()
c⁄ãxt
; ()
ªque°_id
; ()
exãnsi⁄_›ti⁄s
; ()
buf„r
; ()
size
;  
KAA_ERR_NONE
; 
	}
}

148 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_nŸifiˇti⁄_£rvî_sync
(*
c⁄ãxt
, 
uöt32_t
 
ªque°_id
,

149 
uöt16_t
 
exãnsi⁄_›ti⁄s
, c⁄° 
uöt8_t
 *
buf„r
, 
size_t
 
size
)

150 { ()
c⁄ãxt
; ()
ªque°_id
; ()
exãnsi⁄_›ti⁄s
; ()
buf„r
; ()
size
;  
KAA_ERR_NONE
; 
	}
}

151 
kØ_îr‹_t
 
	$kØ_exãnsi⁄_u£r_£rvî_sync
(*
c⁄ãxt
, 
uöt32_t
 
ªque°_id
,

152 
uöt16_t
 
exãnsi⁄_›ti⁄s
, c⁄° 
uöt8_t
 *
buf„r
, 
size_t
 
size
)

153 { ()
c⁄ãxt
; ()
ªque°_id
; ()
exãnsi⁄_›ti⁄s
; ()
buf„r
; ()
size
;  
KAA_ERR_NONE
; 
	}
}

	@/var/www/html/debian/gateway/kaa/test/test_kaa_status.c

17 
	~<°dboﬁ.h
>

18 
	~<°döt.h
>

19 
	~<°rög.h
>

20 
	~<°dio.h
>

21 
	~"kØ_ã°.h
"

22 
	~"kØ_°©us.h
"

23 
	~"utûôõs/kØ_mem.h
"

24 
	~"utûôõs/kØ_log.h
"

25 
	~"∂©f‹m/ext_sha.h
"

26 
	~"∂©f‹m/ext_key_utûs.h
"

27 
	~"kØ_¥iv©e.h
"

29 
kØ_dige°
 
	gã°_ï_key_hash
 = {0x1, 0x2, 0x3, 0x4, 0x5, 0x6, 0x7, 0x8, 0x9, 0xA, 0xB, 0xC, 0xD, 0xE, 0xF, 0x10, 0x11, 0x12, 0x13, 0x14};

30 
kØ_dige°
 
	gã°_¥ofûe_hash
= {0x15, 0x16, 0x17, 0x18, 0x19, 0x1A, 0x1B, 0x1C, 0x1D, 0x1E, 0x1F, 0x20, 0x21, 0x22, 0x23, 0x24, 0x25, 0x26, 0x27, 0x28};

32 
	#KAA_STATUS_STORAGE
 "°©us.c⁄f"

	)

34 
kØ_loggî_t
 *
	gloggî
 = 
NULL
;

36 
	$ext_°©us_ªad
(**
buf„r
, 
size_t
 *
buf„r_size
, 
boﬁ
 *
√eds_dóŒoˇti⁄
)

38 *
buf„r
 = 
NULL
;

39 *
buf„r_size
 = 0;

40 *
√eds_dóŒoˇti⁄
 = 
åue
;

42 
FILE
* 
°©us_fûe
 = 
	`f›í
(
KAA_STATUS_STORAGE
, "rb");

44 i‡(!
°©us_fûe
) {

48 
	`f£ek
(
°©us_fûe
, 0, 
SEEK_END
);

49 *
buf„r_size
 = 
	`·ñl
(
°©us_fûe
);

50 *
buf„r
 = (*Ë
	`KAA_MALLOC
((*
buf„r_size
) * ());

52 i‡(*
buf„r
 =
NULL
) {

53 *
buf„r_size
 = 0;

54 
	`f˛o£
(
°©us_fûe
);

58 
	`f£ek
(
°©us_fûe
, 0, 
SEEK_SET
);

59 i‡(
	`‰ód
(*
buf„r
, *
buf„r_size
, 1, 
°©us_fûe
) == 0) {

60 *
buf„r_size
 = 0;

61 
	`KAA_FREE
(*
buf„r
);

63 *
√eds_dóŒoˇti⁄
 = 
åue
;

64 
	`f˛o£
(
°©us_fûe
);

65 
	}
}

67 
	$ext_°©us_°‹e
(c⁄° *
buf„r
, 
size_t
 
buf„r_size
)

69 i‡(!
buf„r
 || 
buf„r_size
 == 0) {

73 
FILE
* 
°©us_fûe
 = 
	`f›í
(
KAA_STATUS_STORAGE
, "wb");

75 i‡(
°©us_fûe
) {

76 
	`fwrôe
(
buf„r
, 
buf„r_size
, 1, 
°©us_fûe
);

77 
	`f˛o£
(
°©us_fûe
);

79 
	}
}

81 
	$ext_gë_ídpoöt_public_key
(c⁄° 
uöt8_t
 **
buf„r
, 
size_t
 *
buf„r_size
)

83 *
buf„r
 = 
NULL
;

84 *
buf„r_size
 = 0;

85 
	}
}

87 
	$ã°_¸óã_°©us
(**
°©e
)

89 ()
°©e
;

91 
kØ_°©us_t
 *
°©us
;

92 
kØ_îr‹_t
 
îr_code
 = 
	`kØ_°©us_¸óã
(&
°©us
);

94 
	`ASSERT_EQUAL
(
îr_code
, 
KAA_ERR_NONE
);

95 
	`ASSERT_NOT_NULL
(
°©us
);

97 
	`kØ_°©us_de°roy
(
°©us
);

98 
	}
}

100 
	$ã°_°©us_≥rsi°í£
(**
°©e
)

102 ()
°©e
;

104 
kØ_°©us_t
 *
°©us
;

105 
kØ_îr‹_t
 
îr_code
 = 
	`kØ_°©us_¸óã
(&
°©us
);

106 
	`as£π_öt_equÆ
(
KAA_ERR_NONE
, 
îr_code
);

108 
	`ASSERT_NULL
(
°©us
->
ídpoöt_ac˚ss_tokí
);

109 
	`ASSERT_EQUAL
(
°©us
->
evít_£q_n
, 0);

110 
	`ASSERT_FALSE
(
°©us
->
is_©èched
);

111 
	`ASSERT_FALSE
(
°©us
->
is_ªgi°îed
);

112 
	`ASSERT_FALSE
(
°©us
->
is_upd©ed
);

114 
	`ASSERT_EQUAL
(
	`kØ_°©us_£t_ídpoöt_ac˚ss_tokí
(
°©us
, "my_tokí"), 
KAA_ERR_NONE
);

115 
	`ASSERT_EQUAL
(
	`ext_c›y_sha_hash
(
°©us
->
ídpoöt_public_key_hash
, 
ã°_ï_key_hash
), 
KAA_ERR_NONE
);

116 
	`ASSERT_EQUAL
(
	`ext_c›y_sha_hash
(
°©us
->
¥ofûe_hash
, 
ã°_¥ofûe_hash
), 
KAA_ERR_NONE
);

117 
°©us
->
is_©èched
 = 
åue
;

118 
°©us
->
is_ªgi°îed
 = 
åue
;

119 
°©us
->
is_upd©ed
 = 
åue
;

120 
°©us
->
evít_£q_n
 = 10;

122 
îr_code
 = 
	`kØ_°©us_ßve
(
°©us
);

123 
	`ASSERT_EQUAL
(
îr_code
, 
KAA_ERR_NONE
);

125 
	`kØ_°©us_de°roy
(
°©us
);

126 
°©us
 = 
NULL
;

129 
îr_code
 = 
	`kØ_°©us_¸óã
(&
°©us
);

130 
	`as£π_öt_equÆ
(
KAA_ERR_NONE
, 
îr_code
);

132 
	`ASSERT_NOT_NULL
(
°©us
->
ídpoöt_ac˚ss_tokí
);

133 
	`ASSERT_EQUAL
(
	`°rcmp
("my_tokí", 
°©us
->
ídpoöt_ac˚ss_tokí
), 0);

135 
	`ASSERT_EQUAL
(
°©us
->
evít_£q_n
, 10);

136 
	`ASSERT_TRUE
(
°©us
->
is_©èched
);

137 
	`ASSERT_TRUE
(
°©us
->
is_ªgi°îed
);

138 
	`ASSERT_TRUE
(
°©us
->
is_upd©ed
);

140 
	`ASSERT_EQUAL
(
	`memcmp
(
ã°_ï_key_hash
, 
°©us
->
ídpoöt_public_key_hash
, 
SHA_1_DIGEST_LENGTH
), 0);

141 
	`ASSERT_EQUAL
(
	`memcmp
(
ã°_¥ofûe_hash
, 
°©us
->
¥ofûe_hash
, 
SHA_1_DIGEST_LENGTH
), 0);

143 
	`kØ_°©us_de°roy
(
°©us
);

144 
	}
}

146 
	$°©us_ã°_öô
()

148 
	`kØ_log_¸óã
(&
loggî
, 
KAA_MAX_LOG_MESSAGE_LENGTH
, 
KAA_MAX_LOG_LEVEL
, 
NULL
);

149 
	`ªmove
(
KAA_STATUS_STORAGE
);

151 
	}
}

153 
	$ã°_deöô
()

155 
	`kØ_log_de°roy
(
loggî
);

157 
	}
}

159 
KAA_SUITE_MAIN
(
Sètus
, 
°©us_ã°_öô
, 
ã°_deöô
,

160 
	$KAA_TEST_CASE
(
¸óã
, 
ã°_¸óã_°©us
)

161 
	`KAA_TEST_CASE
(
≥rsi°í˚
, 
ã°_°©us_≥rsi°í£
)

	@/var/www/html/debian/gateway/kaa/test/test_meta_extension.c

17 
	~"kØ_¥iv©e.h
"

19 
	~<°dboﬁ.h
>

20 
	~<°ddef.h
>

21 
	~<°rög.h
>

22 
	~<°döt.h
>

23 
	~<°dio.h
>

25 
	~"kØ_ã°.h
"

27 
	~"kØ_îr‹.h
"

28 
	~"kØ_comm⁄.h
"

29 
	~"kØ_deÁu…s.h
"

30 
	~"kØ_°©us.h
"

31 
	~"kØ_c⁄ãxt.h
"

32 
	~"kØ_∂©f‹m_utûs.h
"

33 
	~"∂©f‹m/ext_sha.h
"

34 
	~"utûôõs/kØ_log.h
"

35 
	~"utûôõs/kØ_mem.h
"

36 
	~"∂©f‹m/ext_sha.h
"

37 
	~"∂©f‹m/sock.h
"

38 
	~"kØ.h
"

41 
kØ_loggî_t
 *
	gloggî
 = 
NULL
;

42 
kØ_°©us_t
 *
	g°©us
 = 
NULL
;

44 c⁄° 
size_t
 
	gkØ_mëa_d©a_ªque°_size
 =

45 
KAA_EXTENSION_HEADER_SIZE
 +

46 (
uöt32_t
) +

47 (
uöt32_t
) +

48 
KAA_ALIGNED_SIZE
(
SHA_1_DIGEST_LENGTH
) +

49 
KAA_ALIGNED_SIZE
(
SHA_1_DIGEST_LENGTH
) +

50 
KAA_ALIGNED_SIZE
(
KAA_SDK_TOKEN_LENGTH
);

52 
	$ã°_mëa_exãnsi⁄_£rülize_Áûed
(**
°©e
)

54 ()
°©e
;

56 
kØ_îr‹_t
 
îr‹_code
;

57 c⁄° 
size_t
 
buf„r_size
 = 6;

58 
uöt8_t
 
buf„r
[
buf„r_size
];

59 
kØ_∂©f‹m_mesßge_wrôî_t
 *
wrôî
;

61 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôî_¸óã
(&
wrôî
, 
buf„r
, 
buf„r_size
);

62 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

64 
îr‹_code
 = 
	`kØ_mëa_d©a_ªque°_£rülize
(
NULL
, NULL, 0);

65 
	`ASSERT_NOT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

67 
îr‹_code
 = 
	`kØ_mëa_d©a_ªque°_£rülize
(
NULL
, (
kØ_∂©f‹m_mesßge_wrôî_t
 *)0x1, 0);

68 
	`ASSERT_NOT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

70 
	`kØ_∂©f‹m_mesßge_wrôî_de°roy
(
wrôî
);

71 
	}
}

73 
	$ã°_mëa_exãnsi⁄_£rülize
(**
°©e
)

75 ()
°©e
;

77 
size_t
 
mëa_exãnsi⁄_size
 = 
kØ_mëa_d©a_ªque°_size
;

78 
uöt8_t
 
buf„r
[
mëa_exãnsi⁄_size
];

80 
kØ_∂©f‹m_mesßge_wrôî_t
 *
wrôî
;

81 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôî_¸óã
(&
wrôî
, 
buf„r
, 
mëa_exãnsi⁄_size
);

82 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

84 
uöt32_t
 
ex≥˘ed_timeout
 = 
KAA_SYNC_TIMEOUT
;

85 
kØ_dige°
 
ex≥˘ed_public_key_hash
 = {0x74, 0xc7, 0x51, 0x43, 0x00, 0xf7, 0xb8, 0x21, 0x2c, 0xc3, 0x6b, 0xa5, 0x9c, 0xb4, 0x03, 0xef, 0xc2, 0x5c, 0x65, 0x6c};

86 
kØ_dige°
 
ex≥˘ed_¥ofûe_hash
 = {0xfa, 0x71, 0xb5, 0x02, 0xe7, 0xdf, 0x96, 0x86, 0x6c, 0xdc, 0xe1, 0x4a, 0x17, 0x35, 0x7f, 0xd9, 0xa8, 0xfb, 0x71, 0x09};

88 
îr‹_code
 = 
	`ext_c›y_sha_hash
(
°©us
->
ídpoöt_public_key_hash
, 
ex≥˘ed_public_key_hash
);

89 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

91 
îr‹_code
 = 
	`ext_c›y_sha_hash
(
°©us
->
¥ofûe_hash
, 
ex≥˘ed_¥ofûe_hash
);

92 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

94 
kØ_c⁄ãxt_t
 *
c⁄ãxt
 = 
NULL
;

95 
	`kØ_öô
(&
c⁄ãxt
);

96 
kØ_∂©f‹m_¥Ÿocﬁ_t
 *
¥Ÿocﬁ
 = 
NULL
;

97 
	`kØ_∂©f‹m_¥Ÿocﬁ_¸óã
(&
¥Ÿocﬁ
, 
c⁄ãxt
->
loggî
, 
°©us
);

99 
îr‹_code
 = 
	`kØ_mëa_d©a_ªque°_£rülize
(
¥Ÿocﬁ
, 
wrôî
, 1);

100 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

101 
	`kØ_deöô
(
c⁄ãxt
);

103 
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî
;

104 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªadî_¸óã
(&
ªadî
, 
buf„r
, 
mëa_exãnsi⁄_size
);

105 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

107 
uöt16_t
 
exãnsi⁄_ty≥
;

108 
uöt16_t
 
exãnsi⁄_›ti⁄s
;

109 
uöt32_t
 
exãnsi⁄_∑ylﬂd
;

111 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªad_exãnsi⁄_hódî
(

112 
ªadî
, &
exãnsi⁄_ty≥
, &
exãnsi⁄_›ti⁄s
, &
exãnsi⁄_∑ylﬂd
);

113 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

115 
	`ASSERT_EQUAL
(
exãnsi⁄_ty≥
, 
KAA_EXTENSION_META_DATA
);

116 
	`ASSERT_EQUAL
(
exãnsi⁄_›ti⁄s
, (
TIMEOUT_VALUE
 | 
PUBLIC_KEY_HASH_VALUE
 | 
PROFILE_HASH_VALUE
 | 
APP_TOKEN_VALUE
));

117 
	`ASSERT_EQUAL
(
exãnsi⁄_∑ylﬂd
, 
mëa_exãnsi⁄_size
 - 
KAA_EXTENSION_HEADER_SIZE
);

119 
uöt32_t
 
ªque°_id
;

120 
uöt32_t
 
timeout
;

121 
kØ_dige°
 
public_key_hash
;

122 
kØ_dige°
 
¥ofûe_hash
;

123 
sdk_tokí
[
KAA_SDK_TOKEN_LENGTH
];

125 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªad
(
ªadî
, &
ªque°_id
, (
uöt32_t
));

126 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

127 
	`ASSERT_EQUAL
(
	`KAA_NTOHL
(
ªque°_id
), 1);

128 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªad
(
ªadî
, &
timeout
, (
uöt32_t
));

129 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

130 
timeout
 = 
	`KAA_NTOHL
(timeout);

131 
	`ASSERT_EQUAL
(
ex≥˘ed_timeout
, 
timeout
);

133 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªad_Æig√d
(
ªadî
, 
public_key_hash
, 
SHA_1_DIGEST_LENGTH
);

134 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

135 
îr‹_code
 = (
	`memcmp
(
public_key_hash
, 
ex≥˘ed_public_key_hash
, 
SHA_1_DIGEST_LENGTH
Ë=0 ? 
KAA_ERR_NONE
 : 
KAA_ERR_READ_FAILED
);

136 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

138 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªad_Æig√d
(
ªadî
, 
¥ofûe_hash
, 
SHA_1_DIGEST_LENGTH
);

139 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

140 
îr‹_code
 = (
	`memcmp
(
¥ofûe_hash
, 
ex≥˘ed_¥ofûe_hash
, 
SHA_1_DIGEST_LENGTH
Ë=0 ? 
KAA_ERR_NONE
 : 
KAA_ERR_READ_FAILED
);

141 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

143 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªad_Æig√d
(
ªadî
, 
sdk_tokí
, 
KAA_SDK_TOKEN_LENGTH
);

144 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

145 
îr‹_code
 = (
	`memcmp
(
sdk_tokí
, 
KAA_SDK_TOKEN
, 
KAA_SDK_TOKEN_LENGTH
Ë=0 ? 
KAA_ERR_NONE
 : 
KAA_ERR_READ_FAILED
);

146 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

148 
	`kØ_∂©f‹m_mesßge_ªadî_de°roy
(
ªadî
);

149 
	`kØ_∂©f‹m_mesßge_wrôî_de°roy
(
wrôî
);

150 
	}
}

154 
	$ã°_öô
()

156 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_log_¸óã
(&
loggî
, 
KAA_MAX_LOG_MESSAGE_LENGTH
, 
KAA_MAX_LOG_LEVEL
, 
NULL
);

157 i‡(
îr‹
 || !
loggî
) {

158  
îr‹
;

161 
îr‹
 = 
	`kØ_°©us_¸óã
(&
°©us
);

162 i‡(
îr‹
 || !
°©us
) {

163  
îr‹
;

167 
	}
}

169 
	$ã°_deöô
()

171 
	`kØ_°©us_de°roy
(
°©us
);

172 
	`kØ_log_de°roy
(
loggî
);

175 
	}
}

179 
KAA_SUITE_MAIN
(
MëaExãnsi⁄
, 
ã°_öô
, 
ã°_deöô
,

180 
	$KAA_TEST_CASE
(
mëa_exãnsi⁄_£rülize_Áûed
, 
ã°_mëa_exãnsi⁄_£rülize_Áûed
)

181 
	`KAA_TEST_CASE
(
mëa_exãnsi⁄_£rülize
, 
ã°_mëa_exãnsi⁄_£rülize
)

	@/var/www/html/debian/gateway/kaa/test/test_platform_protocol.c

17 
	~<°dio.h
>

18 
	~<°rög.h
>

19 
	~<time.h
>

20 
	~<uni°d.h
>

21 
	~<°döt.h
>

22 
	~<¨∑/öë.h
>

23 
	~"∂©f‹m/ext_sha.h
"

25 
	~"kØ.h
"

26 
	~"kØ_ã°.h
"

27 
	~"kØ_c⁄ãxt.h
"

28 
	~"kØ_∂©f‹m_¥Ÿocﬁ.h
"

29 
	~"kØ_ch™√l_m™agî.h
"

30 
	~"kØ_∂©f‹m_utûs.h
"

31 
	~"kØ_°©us.h
"

32 
	~"utûôõs/kØ_mem.h
"

33 
	~"utûôõs/kØ_log.h
"

34 
	~"∂©f‹m/ext_log_°‹age.h
"

35 
	~"∂©f‹m/ext_log_u∂ﬂd_°øãgy.h
"

36 
	~"∂©f‹m-im∂/comm⁄/ext_log_u∂ﬂd_°øãgõs.h
"

38 
	~"kØ_¥iv©e.h
"

40 
	~"kØ_loggög.h
"

41 
	~"kØ_loggög_¥iv©e.h
"

43 
	$ã°_em±y_log_cﬁÀ˘‹_exãnsi⁄_cou¡
(**
°©e
)

45 
kØ_c⁄ãxt_t
 *
kØ_c⁄ãxt
 = *
°©e
;

47 
kØ_exãnsi⁄_id
 
£rvi˚s
[] = { 
KAA_EXTENSION_LOGGING
 };

49 *
log_°‹age_c⁄ãxt
 = 
NULL
;

50 *
log_u∂ﬂd_°øãgy_c⁄ãxt
 = 
NULL
;

52 
kØ_îr‹_t
 
îr‹_code
 = 
	`ext_u∆imôed_log_°‹age_¸óã
(&
log_°‹age_c⁄ãxt
,

53 
kØ_c⁄ãxt
->
loggî
);

54 
	`as£π_öt_equÆ
(
KAA_ERR_NONE
, 
îr‹_code
);

56 
îr‹_code
 = 
	`ext_log_u∂ﬂd_°øãgy_¸óã
(
kØ_c⁄ãxt
, &
log_u∂ﬂd_°øãgy_c⁄ãxt
,

57 
KAA_LOG_UPLOAD_VOLUME_STRATEGY
);

58 
	`as£π_öt_equÆ
(
KAA_ERR_NONE
, 
îr‹_code
);

61 
kØ_log_buckë_c⁄°øöts_t
 
c⁄°øöts
 = {

62 .
max_buckë_size
 = 1024,

63 .
max_buckë_log_cou¡
 = 
UINT32_MAX
,

66 
îr‹_code
 = 
	`kØ_loggög_öô
(
kØ_c⁄ãxt
->
log_cﬁÀ˘‹
, 
log_°‹age_c⁄ãxt
,

67 
log_u∂ﬂd_°øãgy_c⁄ãxt
, &
c⁄°øöts
);

68 
	`as£π_öt_equÆ
(
KAA_ERR_NONE
, 
îr‹_code
);

70 
uöt8_t
 *
buf„r
 = 
NULL
;

71 
size_t
 
buf„r_size
 = 0;

72 
îr‹_code
 = 
	`kØ_∂©f‹m_¥Ÿocﬁ_Æloc_£rülize_˛õ¡_sync
(
kØ_c⁄ãxt
->
∂©f‹m_¥Ÿocﬁ
,

73 
£rvi˚s
, 1,

74 &
buf„r
, &
buf„r_size
);

75 
	`as£π_öt_equÆ
(
KAA_ERR_NONE
, 
îr‹_code
);

77 
uöt16_t
 
cou¡_of_exãnsi⁄s
 = 
	`¡ohs
(*(uöt16_à*)(
buf„r
 + 6));

78 
	`as£π_öt_equÆ
(1, 
cou¡_of_exãnsi⁄s
);

80 
	`KAA_FREE
(
buf„r
);

81 
	}
}

83 
	$ã°_öô
(**
°©e
)

85  
	`kØ_öô
((
kØ_c⁄ãxt_t
 **)
°©e
);

86 
	}
}

88 
	$ã°_deöô
(**
°©e
)

90 
	`kØ_deöô
(*
°©e
);

92 
	}
}

94 
	$maö
()

96 c⁄° 
CMUnôTe°
 
ã°s
[] = {

97 
	`cmocka_unô_ã°
(
ã°_em±y_log_cﬁÀ˘‹_exãnsi⁄_cou¡
),

100  
	`cmocka_run_group_ã°s
(
ã°s
, 
ã°_öô
, 
ã°_deöô
);

101 
	}
}

	@/var/www/html/debian/gateway/kaa/test/test_platform_utils.c

17 
	~<°dboﬁ.h
>

18 
	~<sys/ty≥s.h
>

19 
	~<°döt.h
>

20 
	~"kØ_ã°.h
"

22 
	~<°ddef.h
>

23 
	~<°rög.h
>

25 
	~"kØ_∂©f‹m_utûs.h
"

26 
	~"utûôõs/kØ_mem.h
"

28 
	$ã°_gë_Æig√d_size
(**
°©e
)

30 ()
°©e
;

31 
	`ASSERT_EQUAL
(
KAA_ALIGNMENT
, 
	`kØ_Æig√d_size_gë
(KAA_ALIGNMENT));

32 
	`ASSERT_EQUAL
(
KAA_ALIGNMENT
, 
	`kØ_Æig√d_size_gë
(KAA_ALIGNMENT - 1));

33 
	`ASSERT_EQUAL
(2 * 
KAA_ALIGNMENT
, 
	`kØ_Æig√d_size_gë
(KAA_ALIGNMENT + 1));

34 
	}
}

36 
	$ã°_¸óã_de°roy_wrôî
(**
°©e
)

38 ()
°©e
;

39 
kØ_∂©f‹m_mesßge_wrôî_t
 *
wrôî
 = 
NULL
;

40 
uöt8_t
 
buf„r
[16];

41 
size_t
 
buf„r_size
 = (
buf„r
) / ();

43 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôî_¸óã
(
NULL
, 
buf„r
, 
buf„r_size
);

44 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_BADPARAM
);

45 
	`ASSERT_NULL
(
wrôî
);

47 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôî_¸óã
(&
wrôî
, 
NULL
, 
buf„r_size
);

48 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_BADPARAM
);

49 
	`ASSERT_NULL
(
wrôî
);

51 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôî_¸óã
(&
wrôî
, 
buf„r
, 0);

52 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_BADPARAM
);

53 
	`ASSERT_NULL
(
wrôî
);

55 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôî_¸óã
(&
wrôî
, 
buf„r
, 
buf„r_size
);

56 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

57 
	`ASSERT_NOT_NULL
(
wrôî
);

58 
	`ASSERT_EQUAL
((
size_t
)(
wrôî
->
íd
 - wrôî->
begö
), 
buf„r_size
);

59 
	`ASSERT_EQUAL
(
wrôî
->
begö
, wrôî->
cuºít
);

61 
	`kØ_∂©f‹m_mesßge_wrôî_de°roy
(
wrôî
);

62 
	}
}

64 
	$ã°_wrôe
(**
°©e
)

66 ()
°©e
;

67 
uöt8_t
 
buf„r
[16];

68 
size_t
 
buf„r_size
 = (
buf„r
) / ();

69 
kØ_∂©f‹m_mesßge_wrôî_t
 *
wrôî
 = 
NULL
;

71 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôî_¸óã
(&
wrôî
, 
buf„r
, 
buf„r_size
);

72 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

74 c⁄° *
ã°_d©a
 = "test data";

75 
size_t
 
ã°_d©a_Àn
 = 
	`°æí
(
ã°_d©a
);

77 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe
(
wrôî
, 
ã°_d©a
, 
ã°_d©a_Àn
);

78 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

79 
	`ASSERT_EQUAL
((
size_t
)(
wrôî
->
cuºít
 - wrôî->
begö
), 
ã°_d©a_Àn
);

81 
îr‹_code
 = (
	`memcmp
(
wrôî
->
begö
, 
ã°_d©a
, 
ã°_d©a_Àn
Ë=0 ? 
KAA_ERR_NONE
 : 
KAA_ERR_WRITE_FAILED
);

82 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

84 
	`kØ_∂©f‹m_mesßge_wrôî_de°roy
(
wrôî
);

85 
	}
}

87 
	$ã°_Æig√d_wrôe
(**
°©e
)

89 ()
°©e
;

90 
uöt8_t
 
buf„r
[3 * 
KAA_ALIGNMENT
];

91 
size_t
 
buf„r_size
 = (
buf„r
) / ();

92 
kØ_∂©f‹m_mesßge_wrôî_t
 *
wrôî
 = 
NULL
;

94 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôî_¸óã
(&
wrôî
, 
buf„r
, 
buf„r_size
);

95 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

97 *
m©ch_Æignmít_d©a
[
KAA_ALIGNMENT
];

98 
size_t
 
m©ch_Æignmít_d©a_Àn
 = 
KAA_ALIGNMENT
;

100 *
unm©ch_Æignmít_d©a
[
KAA_ALIGNMENT
 + 1];

101 
size_t
 
unm©ch_Æignmít_d©a_Àn
 = 
KAA_ALIGNMENT
 + 1;

103 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe_Æig√d
(
wrôî
, 
unm©ch_Æignmít_d©a
, 
unm©ch_Æignmít_d©a_Àn
);

104 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

105 
	`ASSERT_EQUAL
((
size_t
)(
wrôî
->
cuºít
 - wrôî->
begö
), 
	`kØ_Æig√d_size_gë
(
unm©ch_Æignmít_d©a_Àn
));

106 
îr‹_code
 = (
	`memcmp
(
wrôî
->
begö
, 
unm©ch_Æignmít_d©a
, 
unm©ch_Æignmít_d©a_Àn
Ë=0 ? 
KAA_ERR_NONE
 : 
KAA_ERR_WRITE_FAILED
);

107 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

109 
size_t
 
i
 = 0;

110 
size_t
 
∑ddög
 = 
	`kØ_Æig√d_size_gë
(
unm©ch_Æignmít_d©a_Àn
) - unmatch_alignment_data_len;

111 ; 
i
 < 
∑ddög
; ++i) {

112 i‡(*(
wrôî
->
begö
 + 
unm©ch_Æignmít_d©a_Àn
 + 
i
) != 0) {

113 
îr‹_code
 = 
KAA_ERR_WRITE_FAILED
;

116 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

118 
uöt8_t
 *
begö
 = 
wrôî
->
cuºít
;

119 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe_Æig√d
(
wrôî
, 
m©ch_Æignmít_d©a
, 
m©ch_Æignmít_d©a_Àn
);

120 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

121 
	`ASSERT_EQUAL
((
size_t
)(
wrôî
->
cuºít
 - 
begö
), 
	`kØ_Æig√d_size_gë
(
m©ch_Æignmít_d©a_Àn
));

122 
îr‹_code
 = (
	`memcmp
(
begö
, 
m©ch_Æignmít_d©a
, 
	`kØ_Æig√d_size_gë
(
m©ch_Æignmít_d©a_Àn
)Ë=0 ? 
KAA_ERR_NONE
 : 
KAA_ERR_WRITE_FAILED
);

123 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

125 
	`kØ_∂©f‹m_mesßge_wrôî_de°roy
(
wrôî
);

126 
	}
}

128 
	$ã°_wrôe_buf„r_ovîÊow
(**
°©e
)

130 ()
°©e
;

131 
uöt8_t
 
buf„r
[2 * 
KAA_ALIGNMENT
];

132 
size_t
 
buf„r_size
 = (
buf„r
) / ();

133 
kØ_∂©f‹m_mesßge_wrôî_t
 *
wrôî
 = 
NULL
;

135 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôî_¸óã
(&
wrôî
, 
buf„r
, 
buf„r_size
);

136 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

138 
uöt8_t
 *
d©a
[
KAA_ALIGNMENT
];

139 
size_t
 
d©a_Àn
 = 
KAA_ALIGNMENT
;

141 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe_Æig√d
(
wrôî
, 
d©a
, 
d©a_Àn
);

142 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

143 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe_Æig√d
(
wrôî
, 
d©a
, 
d©a_Àn
);

144 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

145 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe_Æig√d
(
wrôî
, 
d©a
, 
d©a_Àn
);

146 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_WRITE_FAILED
);

148 
	`kØ_∂©f‹m_mesßge_wrôî_de°roy
(
wrôî
);

149 
	}
}

151 
	$ã°_wrôe_¥Ÿocﬁ_mesßge_hódî
(**
°©e
)

153 ()
°©e
;

154 
uöt8_t
 
buf„r
[
KAA_PROTOCOL_ID_SIZE
 + 
KAA_PROTOCOL_VERSION_SIZE
];

155 
size_t
 
buf„r_size
 = (
buf„r
) / ();

156 
kØ_∂©f‹m_mesßge_wrôî_t
 *
wrôî
 = 
NULL
;

158 c⁄° 
uöt8_t
 
£rülized_hódî
[
KAA_PROTOCOL_ID_SIZE
 + 
KAA_PROTOCOL_VERSION_SIZE
] = {0x00, 0x00, 0x30, 0x39, 0x01, 0x00};

159 
uöt32_t
 
¥Ÿocﬁ_id
 = 12345;

160 
uöt16_t
 
¥Ÿocﬁ_vîsi⁄
 = 256;

162 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôî_¸óã
(&
wrôî
, 
buf„r
, 
buf„r_size
);

163 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

165 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_hódî_wrôe
(
wrôî
, 
¥Ÿocﬁ_id
, 
¥Ÿocﬁ_vîsi⁄
);

166 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

168 
îr‹_code
 = (
	`memcmp
(
wrôî
->
begö
, 
£rülized_hódî
, 
KAA_PROTOCOL_ID_SIZE
 + 
KAA_PROTOCOL_VERSION_SIZE
Ë=0? 
KAA_ERR_NONE
 : 
KAA_ERR_WRITE_FAILED
);

169 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

171 
	`kØ_∂©f‹m_mesßge_wrôî_de°roy
(
wrôî
);

172 
	}
}

174 
	$ã°_wrôe_exãnsi⁄_hódî
(**
°©e
)

176 ()
°©e
;

177 
uöt8_t
 
buf„r
[
KAA_EXTENSION_HEADER_SIZE
];

178 
size_t
 
buf„r_size
 = (
buf„r
) / ();

179 
kØ_∂©f‹m_mesßge_wrôî_t
 *
wrôî
 = 
NULL
;

181 c⁄° 
uöt8_t
 
£rülized_hódî
[
KAA_EXTENSION_HEADER_SIZE
] = {0x00, 0xfa, 0x11, 0x12, 0xaa, 0xbb, 0xcc, 0xff};

182 
uöt16_t
 
exãnsi⁄_ty≥
 = 250;

183 
uöt16_t
 
exãnsi⁄_›ti⁄s
 = (0x11 << 8) | 0x12;

184 
uöt32_t
 
exãnsi⁄_∑ylﬂd_Àngth
 = 0xaabbccff;

186 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôî_¸óã
(&
wrôî
, 
buf„r
, 
buf„r_size
);

187 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

189 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_wrôe_exãnsi⁄_hódî
(

190 
wrôî
, 
exãnsi⁄_ty≥
, 
exãnsi⁄_›ti⁄s
, 
exãnsi⁄_∑ylﬂd_Àngth
);

191 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

193 
îr‹_code
 = (
	`memcmp
(
wrôî
->
begö
, 
£rülized_hódî
, 
KAA_EXTENSION_HEADER_SIZE
Ë=0? 
KAA_ERR_NONE
 : 
KAA_ERR_WRITE_FAILED
);

194 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

196 
	`kØ_∂©f‹m_mesßge_wrôî_de°roy
(
wrôî
);

197 
	}
}

199 
	$ã°_¸óã_de°roy_ªadî
(**
°©e
)

201 ()
°©e
;

202 
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî
 = 
NULL
;

203 
uöt8_t
 
buf„r
[16];

204 
size_t
 
buf„r_size
 = (
buf„r
) / ();

206 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªadî_¸óã
(
NULL
, 
buf„r
, 
buf„r_size
);

207 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_BADPARAM
);

208 
	`ASSERT_NULL
(
ªadî
);

210 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªadî_¸óã
(&
ªadî
, 
NULL
, 
buf„r_size
);

211 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_BADPARAM
);

212 
	`ASSERT_NULL
(
ªadî
);

214 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªadî_¸óã
(&
ªadî
, 
buf„r
, 0);

215 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_BADPARAM
);

216 
	`ASSERT_NULL
(
ªadî
);

218 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªadî_¸óã
(&
ªadî
, 
buf„r
, 
buf„r_size
);

219 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

220 
	`ASSERT_NOT_NULL
(
ªadî
);

221 
	`ASSERT_EQUAL
((
size_t
)(
ªadî
->
íd
 -Ñódî->
begö
), 
buf„r_size
);

222 
	`ASSERT_EQUAL
(
ªadî
->
begö
,Ñódî->
cuºít
);

224 
	`kØ_∂©f‹m_mesßge_ªadî_de°roy
(
ªadî
);

225 
	}
}

227 
	$ã°_ªad
(**
°©e
)

229 ()
°©e
;

230 
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî
 = 
NULL
;

231 
uöt8_t
 
wrôe_buf„r
[16];

232 
uöt8_t
 
ªad_buf„r
[16];

233 
size_t
 
buf„r_size
 = (
wrôe_buf„r
) / ();

235 c⁄° *
£rülized_d©a
 = "big serialized data";

236 
	`mem˝y
(
wrôe_buf„r
, 
£rülized_d©a
, 
buf„r_size
);

238 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªadî_¸óã
(&
ªadî
, 
wrôe_buf„r
, 
buf„r_size
);

239 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

241 
size_t
 
sub_buf„r_size
 = 
buf„r_size
 / 2;

242 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªad
(
ªadî
, 
ªad_buf„r
, 
sub_buf„r_size
);

243 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

244 
îr‹_code
 = (
	`memcmp
(
ªad_buf„r
, 
£rülized_d©a
, 
sub_buf„r_size
Ë=0 ? 
KAA_ERR_NONE
 : 
KAA_ERR_READ_FAILED
);

245 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

247 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªad
(
ªadî
, 
ªad_buf„r
 + 
sub_buf„r_size
, sub_buffer_size);

248 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

249 
îr‹_code
 = (
	`memcmp
(
ªad_buf„r
 + 
sub_buf„r_size
, 
£rülized_d©a
 + sub_buf„r_size, sub_buf„r_sizeË=0 ? 
KAA_ERR_NONE
 : 
KAA_ERR_READ_FAILED
);

250 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

252 
	`kØ_∂©f‹m_mesßge_ªadî_de°roy
(
ªadî
);

253 
	}
}

255 
	$ã°_ªad_Æig√d
(**
°©e
)

257 ()
°©e
;

258 
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî
 = 
NULL
;

259 
uöt8_t
 
wrôe_buf„r
[3 * 
KAA_ALIGNMENT
];

260 
uöt8_t
 
ªad_buf„r
[2 * 
KAA_ALIGNMENT
];

261 
size_t
 
buf„r_size
 = (
wrôe_buf„r
) / ();

263 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªadî_¸óã
(&
ªadî
, 
wrôe_buf„r
, 
buf„r_size
);

264 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

266 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªad_Æig√d
(
ªadî
, 
ªad_buf„r
, 
KAA_ALIGNMENT
 + 1);

267 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

268 
	`ASSERT_EQUAL
((
ªadî
->
cuºít
 -Ñódî->
begö
), 2 * 
KAA_ALIGNMENT
);

270 c⁄° 
uöt8_t
 *
begö
 = 
ªadî
->
cuºít
;

271 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªad_Æig√d
(
ªadî
, 
ªad_buf„r
, 
KAA_ALIGNMENT
);

272 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

273 
	`ASSERT_EQUAL
((
ªadî
->
cuºít
 - 
begö
), 
KAA_ALIGNMENT
);

275 
	`kØ_∂©f‹m_mesßge_ªadî_de°roy
(
ªadî
);

276 
	}
}

278 
	$ã°_ªad_eof
(**
°©e
)

280 ()
°©e
;

281 
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî
 = 
NULL
;

282 
uöt8_t
 
wrôe_buf„r
[2 * 
KAA_ALIGNMENT
];

283 
uöt8_t
 
ªad_buf„r
[
KAA_ALIGNMENT
];

284 
size_t
 
buf„r_size
 = (
wrôe_buf„r
) / ();

286 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªadî_¸óã
(&
ªadî
, 
wrôe_buf„r
, 
buf„r_size
);

287 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

289 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªad
(
ªadî
, 
ªad_buf„r
, 
KAA_ALIGNMENT
);

290 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

291 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªad
(
ªadî
, 
ªad_buf„r
, 
KAA_ALIGNMENT
);

292 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

294 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªad
(
ªadî
, 
ªad_buf„r
, 
KAA_ALIGNMENT
);

295 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_READ_FAILED
);

297 
	`kØ_∂©f‹m_mesßge_ªadî_de°roy
(
ªadî
);

298 
	}
}

300 
	$ã°_ªad_¥Ÿocﬁ_mesßge_hódî
(**
°©e
)

302 ()
°©e
;

303 
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî
 = 
NULL
;

305 c⁄° 
uöt8_t
 
£rülized_hódî
[
KAA_PROTOCOL_MESSAGE_HEADER_SIZE
] = {0x00, 0x00, 0x30, 0x39, 0x01, 0x00, 0x00, 0x05};

307 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªadî_¸óã
(&
ªadî
, 
£rülized_hódî
, 
KAA_PROTOCOL_MESSAGE_HEADER_SIZE
);

308 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

310 c⁄° 
uöt32_t
 
¥Ÿocﬁ_id
 = 12345;

311 c⁄° 
uöt16_t
 
¥Ÿocﬁ_vîsi⁄
 = 256;

312 c⁄° 
uöt16_t
 
exãnsi⁄_cou¡
 = 5;

314 
uöt32_t
 
ªad_¥Ÿocﬁ_id
 = 0;

315 
uöt16_t
 
ªad_¥Ÿocﬁ_vîsi⁄
 = 0;

316 
uöt16_t
 
ªad_exãnsi⁄_cou¡
 = 0;

318 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_hódî_ªad
(
ªadî
, &
ªad_¥Ÿocﬁ_id
, &
ªad_¥Ÿocﬁ_vîsi⁄
, &
ªad_exãnsi⁄_cou¡
);

319 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

321 
	`ASSERT_EQUAL
(
ªad_¥Ÿocﬁ_id
, 
¥Ÿocﬁ_id
);

322 
	`ASSERT_EQUAL
(
ªad_¥Ÿocﬁ_vîsi⁄
, 
¥Ÿocﬁ_vîsi⁄
);

323 
	`ASSERT_EQUAL
(
ªad_exãnsi⁄_cou¡
, 
exãnsi⁄_cou¡
);

325 
	`kØ_∂©f‹m_mesßge_ªadî_de°roy
(
ªadî
);

326 
	}
}

328 
	$ã°_ªad_exãnsi⁄_hódî
(**
°©e
)

330 ()
°©e
;

331 
kØ_∂©f‹m_mesßge_ªadî_t
 *
ªadî
 = 
NULL
;

333 c⁄° 
uöt8_t
 
£rülized_hódî
[
KAA_EXTENSION_HEADER_SIZE
] = {0x00, 0xfa, 0x11, 0x12, 0xaa, 0xbb, 0xcc, 0xff};

335 
kØ_îr‹_t
 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªadî_¸óã
(&
ªadî
, 
£rülized_hódî
,

336 
KAA_PROTOCOL_MESSAGE_HEADER_SIZE
);

337 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

339 c⁄° 
uöt16_t
 
exãnsi⁄_ty≥
 = 250;

340 c⁄° 
uöt16_t
 
exãnsi⁄_›ti⁄s
 = (0x11 << 8) | 0x12;

341 c⁄° 
uöt32_t
 
exãnsi⁄_∑ylﬂd_Àngth
 = 0xaabbccff;

343 
uöt16_t
 
ªad_exãnsi⁄_ty≥
 = 0;

344 
uöt16_t
 
ªad_exãnsi⁄_›ti⁄s
 = 0;

345 
uöt32_t
 
ªad_exãnsi⁄_∑ylﬂd_Àngth
 = 0;

347 
îr‹_code
 = 
	`kØ_∂©f‹m_mesßge_ªad_exãnsi⁄_hódî
(

348 
ªadî
, &
ªad_exãnsi⁄_ty≥
, &
ªad_exãnsi⁄_›ti⁄s
, &
ªad_exãnsi⁄_∑ylﬂd_Àngth
);

349 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

351 
	`ASSERT_EQUAL
(
ªad_exãnsi⁄_ty≥
, 
exãnsi⁄_ty≥
);

352 
	`ASSERT_EQUAL
(
ªad_exãnsi⁄_›ti⁄s
, 
exãnsi⁄_›ti⁄s
);

353 
	`ASSERT_EQUAL
(
ªad_exãnsi⁄_∑ylﬂd_Àngth
, 
exãnsi⁄_∑ylﬂd_Àngth
);

355 
	`kØ_∂©f‹m_mesßge_ªadî_de°roy
(
ªadî
);

356 
	}
}

358 
KAA_SUITE_MAIN
(
Pœtf‹mUtûs
, 
NULL
, NULL

360 
	$KAA_TEST_CASE
(
gë_Æig√d_size
, 
ã°_gë_Æig√d_size
)

361 
	$KAA_TEST_CASE
(
¸óã_de°roy_wrôî
, 
ã°_¸óã_de°roy_wrôî
)

362 
	$KAA_TEST_CASE
(
øw_wrôe
, 
ã°_wrôe
)

363 
	$KAA_TEST_CASE
(
øw_Æig√d_wrôe
, 
ã°_Æig√d_wrôe
)

364 
	$KAA_TEST_CASE
(
buf„r_ovîÊow_wrôe
, 
ã°_wrôe_buf„r_ovîÊow
)

365 
	$KAA_TEST_CASE
(
wrôe_¥Ÿocﬁ_mesßge_hódî
, 
ã°_wrôe_¥Ÿocﬁ_mesßge_hódî
)

366 
	$KAA_TEST_CASE
(
wrôe_exãnsi⁄_hódî
, 
ã°_wrôe_exãnsi⁄_hódî
)

367 
	$KAA_TEST_CASE
(
¸óã_de°roy_wrôî
, 
ã°_¸óã_de°roy_ªadî
)

368 
	$KAA_TEST_CASE
(
øw_ªad
, 
ã°_ªad
)

369 
	$KAA_TEST_CASE
(
øw_ªad_Æig√d
, 
ã°_ªad_Æig√d
)

370 
	$KAA_TEST_CASE
(
ªad_eof
, 
ã°_ªad_eof
)

371 
	$KAA_TEST_CASE
(
ªad_¥Ÿocﬁ_mesßge_hódî
, 
ã°_ªad_¥Ÿocﬁ_mesßge_hódî
)

372 
	`KAA_TEST_CASE
(
ªad_exãnsi⁄_hódî
, 
ã°_ªad_exãnsi⁄_hódî
)

	@/var/www/html/debian/gateway/kaa/test/utilities/test_kaa_reallocation.c

17 
	~<°döt.h
>

18 
	~<°dio.h
>

20 
	~"kØ_ã°.h
"

22 
	~"utûôõs/kØ_log.h
"

23 
	~"utûôõs/kØ_buf„r.h
"

25 
	#BUFFER_SIZE
 10

	)

27 
kØ_loggî_t
 *
	gloggî
 = 
NULL
;

30 
	$ã°_ªÆloˇti⁄
(**
°©e
)

32 ()
°©e
;

34 
kØ_buf„r_t
 *
buf„r_±r
;

35 
kØ_îr‹_t
 
îr‹_code
;

37 
îr‹_code
 = 
	`kØ_buf„r_¸óã_buf„r
(&
buf„r_±r
, 
BUFFER_SIZE
);

38 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

40 
îr‹_code
 = 
	`kØ_buf„r_lock_•a˚
(
buf„r_±r
, 
BUFFER_SIZE
);

41 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

43 
îr‹_code
 = 
	`kØ_buf„r_lock_•a˚
(
buf„r_±r
, 
BUFFER_SIZE
);

44 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_BUFFER_IS_NOT_ENOUGH
);

46 
îr‹_code
 = 
	`kØ_buf„r_ªÆloˇã_•a˚
(
buf„r_±r
, 
BUFFER_SIZE
);

47 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

49 
îr‹_code
 = 
	`kØ_buf„r_lock_•a˚
(
buf„r_±r
, 
BUFFER_SIZE
);

50 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

53 
îr‹_code
 = 
	`kØ_buf„r_ªÆloˇã_•a˚
(
buf„r_±r
, 
BUFFER_SIZE
);

54 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

55 
îr‹_code
 = 
	`kØ_buf„r_ªÆloˇã_•a˚
(
buf„r_±r
, 
BUFFER_SIZE
*2);

56 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

57 
îr‹_code
 = 
	`kØ_buf„r_lock_•a˚
(
buf„r_±r
, 
BUFFER_SIZE
*2);

58 
	`ASSERT_EQUAL
(
îr‹_code
, 
KAA_ERR_NONE
);

60 
	`kØ_buf„r_de°roy
(
buf„r_±r
);

61 
	}
}

63 
	$ã°_öô
()

65 
	`kØ_log_¸óã
(&
loggî
, 
KAA_MAX_LOG_MESSAGE_LENGTH
, 
KAA_MAX_LOG_LEVEL
, 
NULL
);

67 
	}
}

69 
	$ã°_deöô
()

71 
	`kØ_log_de°roy
(
loggî
);

73 
	}
}

75 
KAA_SUITE_MAIN
(
C⁄ãxt
, 
ã°_öô
, 
ã°_deöô


76 , 
KAA_TEST_CASE
(
ªÆloˇti⁄
, 
ã°_ªÆloˇti⁄
)

	@/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/aes.c

27 
	~<°döt.h
>

29 #i‡!
deföed
(
MBEDTLS_CONFIG_FILE
)

30 
	~"mbedés/c⁄fig.h
"

32 #ö˛udê
MBEDTLS_CONFIG_FILE


35 #i‡
deföed
(
MBEDTLS_AES_C
)

37 
	~<°rög.h
>

39 
	~"mbedés/´s.h
"

40 #i‡
deföed
(
MBEDTLS_PADLOCK_C
)

41 
	~"mbedés/∑dlock.h
"

43 #i‡
deföed
(
MBEDTLS_AESNI_C
)

44 
	~"mbedés/´¢i.h
"

47 #i‡
deföed
(
MBEDTLS_SELF_TEST
)

48 #i‡
deföed
(
MBEDTLS_PLATFORM_C
)

49 
	~"mbedés/∂©f‹m.h
"

51 
	~<°dio.h
>

52 
	#mbedés_¥ötf
 
¥ötf


	)

56 #i‡!
deföed
(
MBEDTLS_AES_ALT
)

59 
	$mbedés_zîoize
–*
v
, 
size_t
 
n
 ) {

60 vﬁ©ûê*
p
 = 
v
;  
n
-- ) *p++ = 0;

61 
	}
}

66 #i‚de‡
GET_UINT32_LE


67 
	#GET_UINT32_LE
(
n
,
b
,
i
) \

69 (
n
Ë–(
uöt32_t
Ë(
b
)[(
i
) ] ) \

70 | ( (
uöt32_t
Ë(
b
)[(
i
) + 1] << 8 ) \

71 | ( (
uöt32_t
Ë(
b
)[(
i
) + 2] << 16 ) \

72 | ( (
uöt32_t
Ë(
b
)[(
i
) + 3] << 24 ); \

73 }

	)

76 #i‚de‡
PUT_UINT32_LE


77 
	#PUT_UINT32_LE
(
n
,
b
,
i
) \

79 (
b
)[(
i
Ë] = (Ë––(
n
) ) & 0xFF ); \

80 (
b
)[(
i
Ë+ 1] = (Ë––(
n
) >> 8 ) & 0xFF ); \

81 (
b
)[(
i
Ë+ 2] = (Ë––(
n
) >> 16 ) & 0xFF ); \

82 (
b
)[(
i
Ë+ 3] = (Ë––(
n
) >> 24 ) & 0xFF ); \

83 }

	)

86 #i‡
deföed
(
MBEDTLS_PADLOCK_C
) && \

87 –
deföed
(
MBEDTLS_HAVE_X86
Ë|| 
	$deföed
(
MBEDTLS_PADLOCK_ALIGN16
) )

88 
´s_∑dlock_a˚
 = -1;

91 #i‡
	`deföed
(
MBEDTLS_AES_ROM_TABLES
)

95 c⁄° 
FSb
[256] =

129 
	}
};

134 
	#FT
 \

136 
	`V
(
A5
,63,63,
C6
), V(84,7C,7C,
F8
), V(99,77,77,
EE
), V(8D,7B,7B,
F6
), \

137 
	`V
(0D,
F2
,F2,
FF
), V(
BD
,6B,6B,
D6
), V(
B1
,6F,6F,
DE
), V(54,
C5
,C5,91), \

138 
	`V
(50,30,30,60), V(03,01,01,02), V(
A9
,67,67,
CE
), V(7D,2B,2B,56), \

139 
	`V
(19,
FE
,FE,
E7
), V(62,
D7
,D7,
B5
), V(
E6
,
AB
,AB,4D), V(9A,76,76,
EC
), \

140 
	`V
(45,
CA
,CA,8F), V(9D,82,82,1F), V(40,
C9
,C9,89), V(87,7D,7D,
FA
), \

141 
	`V
(15,
FA
,FA,
EF
), V(
EB
,59,59,
B2
), V(
C9
,47,47,8E), V(0B,
F0
,F0,
FB
), \

142 
	`V
(
EC
,
AD
,AD,41), V(67,
D4
,D4,
B3
), V(
FD
,
A2
,A2,5F), V(
EA
,
AF
,AF,45), \

143 
	`V
(
BF
,9C,9C,23), V(
F7
,
A4
,A4,53), V(96,72,72,
E4
), V(5B,
C0
,C0,9B), \

144 
	`V
(
C2
,
B7
,B7,75), V(1C,
FD
,FD,
E1
), V(
AE
,93,93,3D), V(6A,26,26,4C), \

145 
	`V
(5A,36,36,6C), V(41,3F,3F,7E), V(02,
F7
,F7,
F5
), V(4F,
CC
,CC,83), \

146 
	`V
(5C,34,34,68), V(
F4
,
A5
,A5,51), V(34,
E5
,E5,
D1
), V(08,
F1
,F1,
F9
), \

147 
	`V
(93,71,71,
E2
), V(73,
D8
,D8,
AB
), V(53,31,31,62), V(3F,15,15,2A), \

148 
	`V
(0C,04,04,08), V(52,
C7
,C7,95), V(65,23,23,46), V(5E,
C3
,C3,9D), \

149 
	`V
(28,18,18,30), V(
A1
,96,96,37), V(0F,05,05,0A), V(
B5
,9A,9A,2F), \

150 
	`V
(09,07,07,0E), V(36,12,12,24), V(9B,80,80,1B), V(3D,
E2
,E2,
DF
), \

151 
	`V
(26,
EB
,EB,
CD
), V(69,27,27,4E), V(CD,
B2
,B2,7F), V(9F,75,75,
EA
), \

152 
	`V
(1B,09,09,12), V(9E,83,83,1D), V(74,2C,2C,58), V(2E,1A,1A,34), \

153 
	`V
(2D,1B,1B,36), V(
B2
,6E,6E,
DC
), V(
EE
,5A,5A,
B4
), V(
FB
,
A0
,A0,5B), \

154 
	`V
(
F6
,52,52,
A4
), V(4D,3B,3B,76), V(61,
D6
,D6,
B7
), V(
CE
,
B3
,B3,7D), \

155 
	`V
(7B,29,29,52), V(3E,
E3
,E3,
DD
), V(71,2F,2F,5E), V(97,84,84,13), \

156 
	`V
(
F5
,53,53,
A6
), V(68,
D1
,D1,
B9
), V(00,00,00,00), V(2C,
ED
,ED,
C1
), \

157 
	`V
(60,20,20,40), V(1F,
FC
,FC,
E3
), V(
C8
,
B1
,B1,79), V(
ED
,5B,5B,
B6
), \

158 
	`V
(
BE
,6A,6A,
D4
), V(46,
CB
,CB,8D), V(
D9
,BE,BE,67), V(4B,39,39,72), \

159 
	`V
(
DE
,4A,4A,94), V(
D4
,4C,4C,98), V(
E8
,58,58,
B0
), V(4A,
CF
,CF,85), \

160 
	`V
(6B,
D0
,D0,
BB
), V(2A,
EF
,EF,
C5
), V(
E5
,
AA
,AA,4F), V(16,
FB
,FB,
ED
), \

161 
	`V
(
C5
,43,43,86), V(
D7
,4D,4D,9A), V(55,33,33,66), V(94,85,85,11), \

162 
	`V
(
CF
,45,45,8A), V(10,
F9
,F9,
E9
), V(06,02,02,04), V(81,7F,7F,
FE
), \

163 
	`V
(
F0
,50,50,
A0
), V(44,3C,3C,78), V(
BA
,9F,9F,25), V(
E3
,
A8
,A8,4B), \

164 
	`V
(
F3
,51,51,
A2
), V(
FE
,
A3
,A3,5D), V(
C0
,40,40,80), V(8A,8F,8F,05), \

165 
	`V
(
AD
,92,92,3F), V(
BC
,9D,9D,21), V(48,38,38,70), V(04,
F5
,F5,
F1
), \

166 
	`V
(
DF
,
BC
,BC,63), V(
C1
,
B6
,B6,77), V(75,
DA
,DA,
AF
), V(63,21,21,42), \

167 
	`V
(30,10,10,20), V(1A,
FF
,FF,
E5
), V(0E,
F3
,F3,
FD
), V(6D,
D2
,D2,
BF
), \

168 
	`V
(4C,
CD
,CD,81), V(14,0C,0C,18), V(35,13,13,26), V(2F,
EC
,EC,
C3
), \

169 
	`V
(
E1
,5F,5F,
BE
), V(
A2
,97,97,35), V(
CC
,44,44,88), V(39,17,17,2E), \

170 
	`V
(57,
C4
,C4,93), V(
F2
,
A7
,A7,55), V(82,7E,7E,
FC
), V(47,3D,3D,7A), \

171 
	`V
(
AC
,64,64,
C8
), V(
E7
,5D,5D,
BA
), V(2B,19,19,32), V(95,73,73,
E6
), \

172 
	`V
(
A0
,60,60,
C0
), V(98,81,81,19), V(
D1
,4F,4F,9E), V(7F,
DC
,DC,
A3
), \

173 
	`V
(66,22,22,44), V(7E,2A,2A,54), V(
AB
,90,90,3B), V(83,88,88,0B), \

174 
	`V
(
CA
,46,46,8C), V(29,
EE
,EE,
C7
), V(
D3
,
B8
,B8,6B), V(3C,14,14,28), \

175 
	`V
(79,
DE
,DE,
A7
), V(
E2
,5E,5E,
BC
), V(1D,0B,0B,16), V(76,
DB
,DB,
AD
), \

176 
	`V
(3B,
E0
,E0,
DB
), V(56,32,32,64), V(4E,3A,3A,74), V(1E,0A,0A,14), \

177 
	`V
(
DB
,49,49,92), V(0A,06,06,0C), V(6C,24,24,48), V(
E4
,5C,5C,
B8
), \

178 
	`V
(5D,
C2
,C2,9F), V(6E,
D3
,D3,
BD
), V(
EF
,
AC
,AC,43), V(
A6
,62,62,
C4
), \

179 
	`V
(
A8
,91,91,39), V(
A4
,95,95,31), V(37,
E4
,E4,
D3
), V(8B,79,79,
F2
), \

180 
	`V
(32,
E7
,E7,
D5
), V(43,
C8
,C8,8B), V(59,37,37,6E), V(
B7
,6D,6D,
DA
), \

181 
	`V
(8C,8D,8D,01), V(64,
D5
,D5,
B1
), V(
D2
,4E,4E,9C), V(
E0
,
A9
,A9,49), \

182 
	`V
(
B4
,6C,6C,
D8
), V(
FA
,56,56,
AC
), V(07,
F4
,F4,
F3
), V(25,
EA
,EA,
CF
), \

183 
	`V
(
AF
,65,65,
CA
), V(8E,7A,7A,
F4
), V(
E9
,
AE
,AE,47), V(18,08,08,10), \

184 
	`V
(
D5
,
BA
,BA,6F), V(88,78,78,
F0
), V(6F,25,25,4A), V(72,2E,2E,5C), \

185 
	`V
(24,1C,1C,38), V(
F1
,
A6
,A6,57), V(
C7
,
B4
,B4,73), V(51,
C6
,C6,97), \

186 
	`V
(23,
E8
,E8,
CB
), V(7C,
DD
,DD,
A1
), V(9C,74,74,E8), V(21,1F,1F,3E), \

187 
	`V
(
DD
,4B,4B,96), V(
DC
,
BD
,BD,61), V(86,8B,8B,0D), V(85,8A,8A,0F), \

188 
	`V
(90,70,70,
E0
), V(42,3E,3E,7C), V(
C4
,
B5
,B5,71), V(
AA
,66,66,
CC
), \

189 
	`V
(
D8
,48,48,90), V(05,03,03,06), V(01,
F6
,F6,
F7
), V(12,0E,0E,1C), \

190 
	`V
(
A3
,61,61,
C2
), V(5F,35,35,6A), V(
F9
,57,57,
AE
), V(
D0
,
B9
,B9,69), \

191 
	`V
(91,86,86,17), V(58,
C1
,C1,99), V(27,1D,1D,3A), V(
B9
,9E,9E,27), \

192 
	`V
(38,
E1
,E1,
D9
), V(13,
F8
,F8,
EB
), V(
B3
,98,98,2B), V(33,11,11,22), \

193 
	`V
(
BB
,69,69,
D2
), V(70,
D9
,D9,
A9
), V(89,8E,8E,07), V(
A7
,94,94,33), \

194 
	`V
(
B6
,9B,9B,2D), V(22,1E,1E,3C), V(92,87,87,15), V(20,
E9
,E9,
C9
), \

195 
	`V
(49,
CE
,CE,87), V(
FF
,55,55,
AA
), V(78,28,28,50), V(7A,
DF
,DF,
A5
), \

196 
	`V
(8F,8C,8C,03), V(
F8
,
A1
,A1,59), V(80,89,89,09), V(17,0D,0D,1A), \

197 
	`V
(
DA
,
BF
,BF,65), V(31,
E6
,E6,
D7
), V(
C6
,42,42,84), V(
B8
,68,68,
D0
), \

198 
	`V
(
C3
,41,41,82), V(
B0
,99,99,29), V(77,2D,2D,5A), V(11,0F,0F,1E), \

199 
	`V
(
CB
,
B0
,B0,7B), V(
FC
,54,54,
A8
), V(
D6
,
BB
,BB,6D), V(3A,16,16,2C)

	)

201 
	#V
(
a
,
b
,
c
,
d
Ë0x##a##b##c##
	)
d

202 c⁄° 
uöt32_t
 
	gFT0
[256] = { 
FT
 };

203 #unde‡
V


205 
	#V
(
a
,
b
,
c
,
d
Ë0x##b##c##d##
	)
a

206 c⁄° 
uöt32_t
 
	gFT1
[256] = { 
FT
 };

207 #unde‡
V


209 
	#V
(
a
,
b
,
c
,
d
Ë0x##c##d##a##
	)
b

210 c⁄° 
uöt32_t
 
	gFT2
[256] = { 
FT
 };

211 #unde‡
V


213 
	#V
(
a
,
b
,
c
,
d
Ë0x##d##a##b##
	)
c

214 c⁄° 
uöt32_t
 
	gFT3
[256] = { 
FT
 };

215 #unde‡
V


217 #unde‡
FT


222 c⁄° 
	gRSb
[256] =

261 
	#RT
 \

263 
	`V
(50,
A7
,
F4
,51), V(53,65,41,7E), V(
C3
,
A4
,17,1A), V(96,5E,27,3A), \

264 
	`V
(
CB
,6B,
AB
,3B), V(
F1
,45,9D,1F), V(AB,58,
FA
,
AC
), V(93,03,
E3
,4B), \

265 
	`V
(55,
FA
,30,20), V(
F6
,6D,76,
AD
), V(91,76,
CC
,88), V(25,4C,02,
F5
), \

266 
	`V
(
FC
,
D7
,
E5
,4F), V(D7,
CB
,2A,
C5
), V(80,44,35,26), V(8F,
A3
,62,
B5
), \

267 
	`V
(49,5A,
B1
,
DE
), V(67,1B,
BA
,25), V(98,0E,
EA
,45), V(
E1
,
C0
,
FE
,5D), \

268 
	`V
(02,75,2F,
C3
), V(12,
F0
,4C,81), V(
A3
,97,46,8D), V(
C6
,
F9
,
D3
,6B), \

269 
	`V
(
E7
,5F,8F,03), V(95,9C,92,15), V(
EB
,7A,6D,
BF
), V(
DA
,59,52,95), \

270 
	`V
(2D,83,
BE
,
D4
), V(
D3
,21,74,58), V(29,69,
E0
,49), V(44,
C8
,
C9
,8E), \

271 
	`V
(6A,89,
C2
,75), V(78,79,8E,
F4
), V(6B,3E,58,99), V(
DD
,71,
B9
,27), \

272 
	`V
(
B6
,4F,
E1
,
BE
), V(17,
AD
,88,
F0
), V(66,
AC
,20,
C9
), V(
B4
,3A,
CE
,7D), \

273 
	`V
(18,4A,
DF
,63), V(82,31,1A,
E5
), V(60,33,51,97), V(45,7F,53,62), \

274 
	`V
(
E0
,77,64,
B1
), V(84,
AE
,6B,
BB
), V(1C,
A0
,81,
FE
), V(94,2B,08,
F9
), \

275 
	`V
(58,68,48,70), V(19,
FD
,45,8F), V(87,6C,
DE
,94), V(
B7
,
F8
,7B,52), \

276 
	`V
(23,
D3
,73,
AB
), V(
E2
,02,4B,72), V(57,8F,1F,
E3
), V(2A,AB,55,66), \

277 
	`V
(07,28,
EB
,
B2
), V(03,
C2
,
B5
,2F), V(9A,7B,
C5
,86), V(
A5
,08,37,
D3
), \

278 
	`V
(
F2
,87,28,30), V(
B2
,
A5
,
BF
,23), V(
BA
,6A,03,02), V(5C,82,16,
ED
), \

279 
	`V
(2B,1C,
CF
,8A), V(92,
B4
,79,
A7
), V(
F0
,
F2
,07,
F3
), V(
A1
,
E2
,69,4E), \

280 
	`V
(
CD
,
F4
,
DA
,65), V(
D5
,
BE
,05,06), V(1F,62,34,
D1
), V(8A,
FE
,
A6
,
C4
), \

281 
	`V
(9D,53,2E,34), V(
A0
,55,
F3
,
A2
), V(32,
E1
,8A,05), V(75,
EB
,
F6
,
A4
), \

282 
	`V
(39,
EC
,83,0B), V(
AA
,
EF
,60,40), V(06,9F,71,5E), V(51,10,6E,
BD
), \

283 
	`V
(
F9
,8A,21,3E), V(3D,06,
DD
,96), V(
AE
,05,3E,DD), V(46,
BD
,
E6
,4D), \

284 
	`V
(
B5
,8D,54,91), V(05,5D,
C4
,71), V(6F,
D4
,06,04), V(
FF
,15,50,60), \

285 
	`V
(24,
FB
,98,19), V(97,
E9
,
BD
,
D6
), V(
CC
,43,40,89), V(77,9E,
D9
,67), \

286 
	`V
(
BD
,42,
E8
,
B0
), V(88,8B,89,07), V(38,5B,19,
E7
), V(
DB
,
EE
,
C8
,79), \

287 
	`V
(47,0A,7C,
A1
), V(
E9
,0F,42,7C), V(
C9
,1E,84,
F8
), V(00,00,00,00), \

288 
	`V
(83,86,80,09), V(48,
ED
,2B,32), V(
AC
,70,11,1E), V(4E,72,5A,6C), \

289 
	`V
(
FB
,
FF
,0E,
FD
), V(56,38,85,0F), V(1E,
D5
,
AE
,3D), V(27,39,2D,36), \

290 
	`V
(64,
D9
,0F,0A), V(21,
A6
,5C,68), V(
D1
,54,5B,9B), V(3A,2E,36,24), \

291 
	`V
(
B1
,67,0A,0C), V(0F,
E7
,57,93), V(
D2
,96,
EE
,
B4
), V(9E,91,9B,1B), \

292 
	`V
(4F,
C5
,
C0
,80), V(
A2
,20,
DC
,61), V(69,4B,77,5A), V(16,1A,12,1C), \

293 
	`V
(0A,
BA
,93,
E2
), V(
E5
,2A,
A0
,
C0
), V(43,
E0
,22,3C), V(1D,17,1B,12), \

294 
	`V
(0B,0D,09,0E), V(
AD
,
C7
,8B,
F2
), V(
B9
,
A8
,
B6
,2D), V(
C8
,
A9
,1E,14), \

295 
	`V
(85,19,
F1
,57), V(4C,07,75,
AF
), V(
BB
,
DD
,99,
EE
), V(
FD
,60,7F,
A3
), \

296 
	`V
(9F,26,01,
F7
), V(
BC
,
F5
,72,5C), V(
C5
,3B,66,44), V(34,7E,
FB
,5B), \

297 
	`V
(76,29,43,8B), V(
DC
,
C6
,23,
CB
), V(68,
FC
,
ED
,
B6
), V(63,
F1
,
E4
,
B8
), \

298 
	`V
(
CA
,
DC
,31,
D7
), V(10,85,63,42), V(40,22,97,13), V(20,11,
C6
,84), \

299 
	`V
(7D,24,4A,85), V(
F8
,3D,
BB
,
D2
), V(11,32,
F9
,
AE
), V(6D,
A1
,29,
C7
), \

300 
	`V
(4B,2F,9E,1D), V(
F3
,30,
B2
,
DC
), V(
EC
,52,86,0D), V(
D0
,
E3
,
C1
,77), \

301 
	`V
(6C,16,
B3
,2B), V(99,
B9
,70,
A9
), V(
FA
,48,94,11), V(22,64,
E9
,47), \

302 
	`V
(
C4
,8C,
FC
,
A8
), V(1A,3F,
F0
,
A0
), V(
D8
,2C,7D,56), V(
EF
,90,33,22), \

303 
	`V
(
C7
,4E,49,87), V(
C1
,
D1
,38,
D9
), V(
FE
,
A2
,
CA
,8C), V(36,0B,
D4
,98), \

304 
	`V
(
CF
,81,
F5
,
A6
), V(28,
DE
,7A,
A5
), V(26,8E,
B7
,
DA
), V(
A4
,
BF
,
AD
,3F), \

305 
	`V
(
E4
,9D,3A,2C), V(0D,92,78,50), V(9B,
CC
,5F,6A), V(62,46,7E,54), \

306 
	`V
(
C2
,13,8D,
F6
), V(
E8
,
B8
,
D8
,90), V(5E,
F7
,39,2E), V(
F5
,
AF
,
C3
,82), \

307 
	`V
(
BE
,80,5D,9F), V(7C,93,
D0
,69), V(
A9
,2D,
D5
,6F), V(
B3
,12,25,
CF
), \

308 
	`V
(3B,99,
AC
,
C8
), V(
A7
,7D,18,10), V(6E,63,9C,
E8
), V(7B,
BB
,3B,
DB
), \

309 
	`V
(09,78,26,
CD
), V(
F4
,18,59,6E), V(01,
B7
,9A,
EC
), V(
A8
,9A,4F,83), \

310 
	`V
(65,6E,95,
E6
), V(7E,E6,
FF
,
AA
), V(08,
CF
,
BC
,21), V(E6,
E8
,15,
EF
), \

311 
	`V
(
D9
,9B,
E7
,
BA
), V(
CE
,36,6F,4A), V(
D4
,09,9F,
EA
), V(
D6
,7C,
B0
,29), \

312 
	`V
(
AF
,
B2
,
A4
,31), V(31,23,3F,2A), V(30,94,
A5
,
C6
), V(
C0
,66,
A2
,35), \

313 
	`V
(37,
BC
,4E,74), V(
A6
,
CA
,82,
FC
), V(
B0
,
D0
,90,
E0
), V(15,
D8
,
A7
,33), \

314 
	`V
(4A,98,04,
F1
), V(
F7
,
DA
,
EC
,41), V(0E,50,
CD
,7F), V(2F,
F6
,91,17), \

315 
	`V
(8D,
D6
,4D,76), V(4D,
B0
,
EF
,43), V(54,4D,
AA
,
CC
), V(
DF
,04,96,
E4
), \

316 
	`V
(
E3
,
B5
,
D1
,9E), V(1B,88,6A,4C), V(
B8
,1F,2C,
C1
), V(7F,51,65,46), \

317 
	`V
(04,
EA
,5E,9D), V(5D,35,8C,01), V(73,74,87,
FA
), V(2E,41,0B,
FB
), \

318 
	`V
(5A,1D,67,
B3
), V(52,
D2
,
DB
,92), V(33,56,10,
E9
), V(13,47,
D6
,6D), \

319 
	`V
(8C,61,
D7
,9A), V(7A,0C,
A1
,37), V(8E,14,
F8
,59), V(89,3C,13,
EB
), \

320 
	`V
(
EE
,27,
A9
,
CE
), V(35,
C9
,61,
B7
), V(
ED
,
E5
,1C,
E1
), V(3C,
B1
,47,7A), \

321 
	`V
(59,
DF
,
D2
,9C), V(3F,73,
F2
,55), V(79,
CE
,14,18), V(
BF
,37,
C7
,73), \

322 
	`V
(
EA
,
CD
,
F7
,53), V(5B,
AA
,
FD
,5F), V(14,6F,3D,
DF
), V(86,
DB
,44,78), \

323 
	`V
(81,
F3
,
AF
,
CA
), V(3E,
C4
,68,
B9
), V(2C,34,24,38), V(5F,40,
A3
,
C2
), \

324 
	`V
(72,
C3
,1D,16), V(0C,25,
E2
,
BC
), V(8B,49,3C,28), V(41,95,0D,
FF
), \

325 
	`V
(71,01,
A8
,39), V(
DE
,
B3
,0C,08), V(9C,
E4
,
B4
,
D8
), V(90,
C1
,56,64), \

326 
	`V
(61,84,
CB
,7B), V(70,
B6
,32,
D5
), V(74,5C,6C,48), V(42,57,
B8
,
D0
)

	)

328 
	#V
(
a
,
b
,
c
,
d
Ë0x##a##b##c##
	)
d

329 c⁄° 
uöt32_t
 
	gRT0
[256] = { 
RT
 };

330 #unde‡
V


332 
	#V
(
a
,
b
,
c
,
d
Ë0x##b##c##d##
	)
a

333 c⁄° 
uöt32_t
 
	gRT1
[256] = { 
RT
 };

334 #unde‡
V


336 
	#V
(
a
,
b
,
c
,
d
Ë0x##c##d##a##
	)
b

337 c⁄° 
uöt32_t
 
	gRT2
[256] = { 
RT
 };

338 #unde‡
V


340 
	#V
(
a
,
b
,
c
,
d
Ë0x##d##a##b##
	)
c

341 c⁄° 
uöt32_t
 
	gRT3
[256] = { 
RT
 };

342 #unde‡
V


344 #unde‡
RT


349 c⁄° 
uöt32_t
 
	gRCON
[10] =

361 
	gFSb
[256];

362 
uöt32_t
 
	gFT0
[256];

363 
uöt32_t
 
	gFT1
[256];

364 
uöt32_t
 
	gFT2
[256];

365 
uöt32_t
 
	gFT3
[256];

370 
	gRSb
[256];

371 
uöt32_t
 
	gRT0
[256];

372 
uöt32_t
 
	gRT1
[256];

373 
uöt32_t
 
	gRT2
[256];

374 
uöt32_t
 
	gRT3
[256];

379 
uöt32_t
 
	gRCON
[10];

384 
	#ROTL8
(
x
Ë––x << 8 ) & 0xFFFFFFFF ) | ( x >> 24 )

	)

385 
	#XTIME
(
x
Ë––x << 1 ) ^ ( ( x & 0x80 ) ? 0x1B : 0x00 ) )

	)

386 
	#MUL
(
x
,
y
Ë––x && y ) ? 
pow
[(
log
[x]+log[y]Ë% 255] : 0 )

	)

388 
	g´s_öô_d⁄e
 = 0;

390 
	$´s_gí_èbÀs
( )

392 
i
, 
x
, 
y
, 
z
;

393 
pow
[256];

394 
log
[256];

399  
i
 = 0, 
x
 = 1; i < 256; i++ )

401 
pow
[
i
] = 
x
;

402 
log
[
x
] = 
i
;

403 
x
 = ( x ^ 
	`XTIME
( x ) ) & 0xFF;

409  
i
 = 0, 
x
 = 1; i < 10; i++ )

411 
RCON
[
i
] = (
uöt32_t
Ë
x
;

412 
x
 = 
	`XTIME
( x ) & 0xFF;

418 
FSb
[0x00] = 0x63;

419 
RSb
[0x63] = 0x00;

421  
i
 = 1; i < 256; i++ )

423 
x
 = 
pow
[255 - 
log
[
i
]];

425 
y
 = 
x
; y = ( ( y << 1 ) | ( y >> 7 ) ) & 0xFF;

426 
x
 ^
y
; y = ( ( y << 1 ) | ( y >> 7 ) ) & 0xFF;

427 
x
 ^
y
; y = ( ( y << 1 ) | ( y >> 7 ) ) & 0xFF;

428 
x
 ^
y
; y = ( ( y << 1 ) | ( y >> 7 ) ) & 0xFF;

429 
x
 ^
y
 ^ 0x63;

431 
FSb
[
i
] = (Ë
x
;

432 
RSb
[
x
] = (Ë
i
;

438  
i
 = 0; i < 256; i++ )

440 
x
 = 
FSb
[
i
];

441 
y
 = 
	`XTIME
–
x
 ) & 0xFF;

442 
z
 = ( 
y
 ^ 
x
 ) & 0xFF;

444 
FT0
[
i
] = ( (
uöt32_t
Ë
y
 ) ^

445 –(
uöt32_t
Ë
x
 << 8 ) ^

446 –(
uöt32_t
Ë
x
 << 16 ) ^

447 –(
uöt32_t
Ë
z
 << 24 );

449 
FT1
[
i
] = 
	`ROTL8
–
FT0
[i] );

450 
FT2
[
i
] = 
	`ROTL8
–
FT1
[i] );

451 
FT3
[
i
] = 
	`ROTL8
–
FT2
[i] );

453 
x
 = 
RSb
[
i
];

455 
RT0
[
i
] = ( (
uöt32_t
Ë
	`MUL
–0x0E, 
x
 ) ) ^

456 –(
uöt32_t
Ë
	`MUL
–0x09, 
x
 ) << 8 ) ^

457 –(
uöt32_t
Ë
	`MUL
–0x0D, 
x
 ) << 16 ) ^

458 –(
uöt32_t
Ë
	`MUL
–0x0B, 
x
 ) << 24 );

460 
RT1
[
i
] = 
	`ROTL8
–
RT0
[i] );

461 
RT2
[
i
] = 
	`ROTL8
–
RT1
[i] );

462 
RT3
[
i
] = 
	`ROTL8
–
RT2
[i] );

464 
	}
}

468 
	$mbedés_´s_öô
–
mbedés_´s_c⁄ãxt
 *
˘x
 )

470 
	`mem£t
–
˘x
, 0, –
mbedés_´s_c⁄ãxt
 ) );

471 
	}
}

473 
	$mbedés_´s_‰ì
–
mbedés_´s_c⁄ãxt
 *
˘x
 )

475 if–
˘x
 =
NULL
 )

478 
	`mbedés_zîoize
–
˘x
, –
mbedés_´s_c⁄ãxt
 ) );

479 
	}
}

484 #i‡!
deföed
(
MBEDTLS_AES_SETKEY_ENC_ALT
)

485 
	$mbedés_´s_£tkey_íc
–
mbedés_´s_c⁄ãxt
 *
˘x
, c⁄° *
key
,

486 
keybôs
 )

488 
i
;

489 
uöt32_t
 *
RK
;

491 #i‡!
	`deföed
(
MBEDTLS_AES_ROM_TABLES
)

492 if–
´s_öô_d⁄e
 == 0 )

494 
	`´s_gí_èbÀs
();

495 
´s_öô_d⁄e
 = 1;

500  
keybôs
 )

502 128: 
˘x
->
ƒ
 = 10; ;

503 192: 
˘x
->
ƒ
 = 12; ;

504 256: 
˘x
->
ƒ
 = 14; ;

505  : –
MBEDTLS_ERR_AES_INVALID_KEY_LENGTH
 );

508 #i‡
	`deföed
(
MBEDTLS_PADLOCK_C
Ë&& deföed(
MBEDTLS_PADLOCK_ALIGN16
)

509 if–
´s_∑dlock_a˚
 == -1 )

510 
´s_∑dlock_a˚
 = 
	`mbedés_∑dlock_has_suµ‹t
–
MBEDTLS_PADLOCK_ACE
 );

512 if–
´s_∑dlock_a˚
 )

513 
˘x
->
rk
 = 
RK
 = 
	`MBEDTLS_PADLOCK_ALIGN16
–˘x->
buf
 );

516 
˘x
->
rk
 = 
RK
 = ctx->
buf
;

518 #i‡
	`deföed
(
MBEDTLS_AESNI_C
Ë&& deföed(
MBEDTLS_HAVE_X86_64
)

519 if–
	`mbedés_´¢i_has_suµ‹t
–
MBEDTLS_AESNI_AES
 ) )

520 –
	`mbedés_´¢i_£tkey_íc
–(*Ë
˘x
->
rk
, 
key
, 
keybôs
 ) );

523  
i
 = 0; i < ( 
keybôs
 >> 5 ); i++ )

525 
	`GET_UINT32_LE
–
RK
[
i
], 
key
, i << 2 );

528  
˘x
->
ƒ
 )

532  
i
 = 0; i < 10; i++, 
RK
 += 4 )

534 
RK
[4] = RK[0] ^ 
RCON
[
i
] ^

535 –(
uöt32_t
Ë
FSb
[ ( 
RK
[3] >> 8 ) & 0xFF ] ) ^

536 –(
uöt32_t
Ë
FSb
[ ( 
RK
[3] >> 16 ) & 0xFF ] << 8 ) ^

537 –(
uöt32_t
Ë
FSb
[ ( 
RK
[3] >> 24 ) & 0xFF ] << 16 ) ^

538 –(
uöt32_t
Ë
FSb
[ ( 
RK
[3] ) & 0xFF ] << 24 );

540 
RK
[5] = RK[1] ^ RK[4];

541 
RK
[6] = RK[2] ^ RK[5];

542 
RK
[7] = RK[3] ^ RK[6];

548  
i
 = 0; i < 8; i++, 
RK
 += 6 )

550 
RK
[6] = RK[0] ^ 
RCON
[
i
] ^

551 –(
uöt32_t
Ë
FSb
[ ( 
RK
[5] >> 8 ) & 0xFF ] ) ^

552 –(
uöt32_t
Ë
FSb
[ ( 
RK
[5] >> 16 ) & 0xFF ] << 8 ) ^

553 –(
uöt32_t
Ë
FSb
[ ( 
RK
[5] >> 24 ) & 0xFF ] << 16 ) ^

554 –(
uöt32_t
Ë
FSb
[ ( 
RK
[5] ) & 0xFF ] << 24 );

556 
RK
[7] = RK[1] ^ RK[6];

557 
RK
[8] = RK[2] ^ RK[7];

558 
RK
[9] = RK[3] ^ RK[8];

559 
RK
[10] = RK[4] ^ RK[9];

560 
RK
[11] = RK[5] ^ RK[10];

566  
i
 = 0; i < 7; i++, 
RK
 += 8 )

568 
RK
[8] = RK[0] ^ 
RCON
[
i
] ^

569 –(
uöt32_t
Ë
FSb
[ ( 
RK
[7] >> 8 ) & 0xFF ] ) ^

570 –(
uöt32_t
Ë
FSb
[ ( 
RK
[7] >> 16 ) & 0xFF ] << 8 ) ^

571 –(
uöt32_t
Ë
FSb
[ ( 
RK
[7] >> 24 ) & 0xFF ] << 16 ) ^

572 –(
uöt32_t
Ë
FSb
[ ( 
RK
[7] ) & 0xFF ] << 24 );

574 
RK
[9] = RK[1] ^ RK[8];

575 
RK
[10] = RK[2] ^ RK[9];

576 
RK
[11] = RK[3] ^ RK[10];

578 
RK
[12] = RK[4] ^

579 –(
uöt32_t
Ë
FSb
[ ( 
RK
[11] ) & 0xFF ] ) ^

580 –(
uöt32_t
Ë
FSb
[ ( 
RK
[11] >> 8 ) & 0xFF ] << 8 ) ^

581 –(
uöt32_t
Ë
FSb
[ ( 
RK
[11] >> 16 ) & 0xFF ] << 16 ) ^

582 –(
uöt32_t
Ë
FSb
[ ( 
RK
[11] >> 24 ) & 0xFF ] << 24 );

584 
RK
[13] = RK[5] ^ RK[12];

585 
RK
[14] = RK[6] ^ RK[13];

586 
RK
[15] = RK[7] ^ RK[14];

592 
	}
}

598 #i‡!
deföed
(
MBEDTLS_AES_SETKEY_DEC_ALT
)

599 
	$mbedés_´s_£tkey_dec
–
mbedés_´s_c⁄ãxt
 *
˘x
, c⁄° *
key
,

600 
keybôs
 )

602 
i
, 
j
, 
ªt
;

603 
mbedés_´s_c⁄ãxt
 
˘y
;

604 
uöt32_t
 *
RK
;

605 
uöt32_t
 *
SK
;

607 
	`mbedés_´s_öô
–&
˘y
 );

609 #i‡
	`deföed
(
MBEDTLS_PADLOCK_C
Ë&& deföed(
MBEDTLS_PADLOCK_ALIGN16
)

610 if–
´s_∑dlock_a˚
 == -1 )

611 
´s_∑dlock_a˚
 = 
	`mbedés_∑dlock_has_suµ‹t
–
MBEDTLS_PADLOCK_ACE
 );

613 if–
´s_∑dlock_a˚
 )

614 
˘x
->
rk
 = 
RK
 = 
	`MBEDTLS_PADLOCK_ALIGN16
–˘x->
buf
 );

617 
˘x
->
rk
 = 
RK
 = ctx->
buf
;

620 if––
ªt
 = 
	`mbedés_´s_£tkey_íc
–&
˘y
, 
key
, 
keybôs
 ) ) != 0 )

621 
exô
;

623 
˘x
->
ƒ
 = 
˘y
.nr;

625 #i‡
	`deföed
(
MBEDTLS_AESNI_C
Ë&& deföed(
MBEDTLS_HAVE_X86_64
)

626 if–
	`mbedés_´¢i_has_suµ‹t
–
MBEDTLS_AESNI_AES
 ) )

628 
	`mbedés_´¢i_övî£_key
–(*Ë
˘x
->
rk
,

629 (c⁄° *Ë
˘y
.
rk
, 
˘x
->
ƒ
 );

630 
exô
;

634 
SK
 = 
˘y
.
rk
 + cty.
ƒ
 * 4;

636 *
RK
++ = *
SK
++;

637 *
RK
++ = *
SK
++;

638 *
RK
++ = *
SK
++;

639 *
RK
++ = *
SK
++;

641  
i
 = 
˘x
->
ƒ
 - 1, 
SK
 -= 8; i > 0; i--, SK -= 8 )

643  
j
 = 0; j < 4; j++, 
SK
++ )

645 *
RK
++ = 
RT0
[ 
FSb
[ ( *
SK
 ) & 0xFF ] ] ^

646 
RT1
[ 
FSb
[ ( *
SK
 >> 8 ) & 0xFF ] ] ^

647 
RT2
[ 
FSb
[ ( *
SK
 >> 16 ) & 0xFF ] ] ^

648 
RT3
[ 
FSb
[ ( *
SK
 >> 24 ) & 0xFF ] ];

652 *
RK
++ = *
SK
++;

653 *
RK
++ = *
SK
++;

654 *
RK
++ = *
SK
++;

655 *
RK
++ = *
SK
++;

657 
exô
:

658 
	`mbedés_´s_‰ì
–&
˘y
 );

660 –
ªt
 );

661 
	}
}

664 
	#AES_FROUND
(
X0
,
X1
,
X2
,
X3
,
Y0
,
Y1
,
Y2
,
Y3
) \

666 
X0
 = *
RK
++ ^ 
FT0
[ ( 
Y0
 ) & 0xFF ] ^ \

667 
FT1
[ ( 
Y1
 >> 8 ) & 0xFF ] ^ \

668 
FT2
[ ( 
Y2
 >> 16 ) & 0xFF ] ^ \

669 
FT3
[ ( 
Y3
 >> 24 ) & 0xFF ]; \

671 
X1
 = *
RK
++ ^ 
FT0
[ ( 
Y1
 ) & 0xFF ] ^ \

672 
FT1
[ ( 
Y2
 >> 8 ) & 0xFF ] ^ \

673 
FT2
[ ( 
Y3
 >> 16 ) & 0xFF ] ^ \

674 
FT3
[ ( 
Y0
 >> 24 ) & 0xFF ]; \

676 
X2
 = *
RK
++ ^ 
FT0
[ ( 
Y2
 ) & 0xFF ] ^ \

677 
FT1
[ ( 
Y3
 >> 8 ) & 0xFF ] ^ \

678 
FT2
[ ( 
Y0
 >> 16 ) & 0xFF ] ^ \

679 
FT3
[ ( 
Y1
 >> 24 ) & 0xFF ]; \

681 
X3
 = *
RK
++ ^ 
FT0
[ ( 
Y3
 ) & 0xFF ] ^ \

682 
FT1
[ ( 
Y0
 >> 8 ) & 0xFF ] ^ \

683 
FT2
[ ( 
Y1
 >> 16 ) & 0xFF ] ^ \

684 
FT3
[ ( 
Y2
 >> 24 ) & 0xFF ]; \

685 }

	)

687 
	#AES_RROUND
(
X0
,
X1
,
X2
,
X3
,
Y0
,
Y1
,
Y2
,
Y3
) \

689 
X0
 = *
RK
++ ^ 
RT0
[ ( 
Y0
 ) & 0xFF ] ^ \

690 
RT1
[ ( 
Y3
 >> 8 ) & 0xFF ] ^ \

691 
RT2
[ ( 
Y2
 >> 16 ) & 0xFF ] ^ \

692 
RT3
[ ( 
Y1
 >> 24 ) & 0xFF ]; \

694 
X1
 = *
RK
++ ^ 
RT0
[ ( 
Y1
 ) & 0xFF ] ^ \

695 
RT1
[ ( 
Y0
 >> 8 ) & 0xFF ] ^ \

696 
RT2
[ ( 
Y3
 >> 16 ) & 0xFF ] ^ \

697 
RT3
[ ( 
Y2
 >> 24 ) & 0xFF ]; \

699 
X2
 = *
RK
++ ^ 
RT0
[ ( 
Y2
 ) & 0xFF ] ^ \

700 
RT1
[ ( 
Y1
 >> 8 ) & 0xFF ] ^ \

701 
RT2
[ ( 
Y0
 >> 16 ) & 0xFF ] ^ \

702 
RT3
[ ( 
Y3
 >> 24 ) & 0xFF ]; \

704 
X3
 = *
RK
++ ^ 
RT0
[ ( 
Y3
 ) & 0xFF ] ^ \

705 
RT1
[ ( 
Y2
 >> 8 ) & 0xFF ] ^ \

706 
RT2
[ ( 
Y1
 >> 16 ) & 0xFF ] ^ \

707 
RT3
[ ( 
Y0
 >> 24 ) & 0xFF ]; \

708 }

	)

713 #i‡!
deföed
(
MBEDTLS_AES_ENCRYPT_ALT
)

714 
	$mbedés_´s_í¸y±
–
mbedés_´s_c⁄ãxt
 *
˘x
,

715 c⁄° 
öput
[16],

716 
ouçut
[16] )

718 
i
;

719 
uöt32_t
 *
RK
, 
X0
, 
X1
, 
X2
, 
X3
, 
Y0
, 
Y1
, 
Y2
, 
Y3
;

721 
RK
 = 
˘x
->
rk
;

723 
	`GET_UINT32_LE
–
X0
, 
öput
, 0 ); X0 ^*
RK
++;

724 
	`GET_UINT32_LE
–
X1
, 
öput
, 4 ); X1 ^*
RK
++;

725 
	`GET_UINT32_LE
–
X2
, 
öput
, 8 ); X2 ^*
RK
++;

726 
	`GET_UINT32_LE
–
X3
, 
öput
, 12 ); X3 ^*
RK
++;

728  
i
 = ( 
˘x
->
ƒ
 >> 1 ) - 1; i > 0; i-- )

730 
	`AES_FROUND
–
Y0
, 
Y1
, 
Y2
, 
Y3
, 
X0
, 
X1
, 
X2
, 
X3
 );

731 
	`AES_FROUND
–
X0
, 
X1
, 
X2
, 
X3
, 
Y0
, 
Y1
, 
Y2
, 
Y3
 );

734 
	`AES_FROUND
–
Y0
, 
Y1
, 
Y2
, 
Y3
, 
X0
, 
X1
, 
X2
, 
X3
 );

736 
X0
 = *
RK
++ ^ \

737 –(
uöt32_t
Ë
FSb
[ ( 
Y0
 ) & 0xFF ] ) ^

738 –(
uöt32_t
Ë
FSb
[ ( 
Y1
 >> 8 ) & 0xFF ] << 8 ) ^

739 –(
uöt32_t
Ë
FSb
[ ( 
Y2
 >> 16 ) & 0xFF ] << 16 ) ^

740 –(
uöt32_t
Ë
FSb
[ ( 
Y3
 >> 24 ) & 0xFF ] << 24 );

742 
X1
 = *
RK
++ ^ \

743 –(
uöt32_t
Ë
FSb
[ ( 
Y1
 ) & 0xFF ] ) ^

744 –(
uöt32_t
Ë
FSb
[ ( 
Y2
 >> 8 ) & 0xFF ] << 8 ) ^

745 –(
uöt32_t
Ë
FSb
[ ( 
Y3
 >> 16 ) & 0xFF ] << 16 ) ^

746 –(
uöt32_t
Ë
FSb
[ ( 
Y0
 >> 24 ) & 0xFF ] << 24 );

748 
X2
 = *
RK
++ ^ \

749 –(
uöt32_t
Ë
FSb
[ ( 
Y2
 ) & 0xFF ] ) ^

750 –(
uöt32_t
Ë
FSb
[ ( 
Y3
 >> 8 ) & 0xFF ] << 8 ) ^

751 –(
uöt32_t
Ë
FSb
[ ( 
Y0
 >> 16 ) & 0xFF ] << 16 ) ^

752 –(
uöt32_t
Ë
FSb
[ ( 
Y1
 >> 24 ) & 0xFF ] << 24 );

754 
X3
 = *
RK
++ ^ \

755 –(
uöt32_t
Ë
FSb
[ ( 
Y3
 ) & 0xFF ] ) ^

756 –(
uöt32_t
Ë
FSb
[ ( 
Y0
 >> 8 ) & 0xFF ] << 8 ) ^

757 –(
uöt32_t
Ë
FSb
[ ( 
Y1
 >> 16 ) & 0xFF ] << 16 ) ^

758 –(
uöt32_t
Ë
FSb
[ ( 
Y2
 >> 24 ) & 0xFF ] << 24 );

760 
	`PUT_UINT32_LE
–
X0
, 
ouçut
, 0 );

761 
	`PUT_UINT32_LE
–
X1
, 
ouçut
, 4 );

762 
	`PUT_UINT32_LE
–
X2
, 
ouçut
, 8 );

763 
	`PUT_UINT32_LE
–
X3
, 
ouçut
, 12 );

764 
	}
}

770 #i‡!
deföed
(
MBEDTLS_AES_DECRYPT_ALT
)

771 
	$mbedés_´s_de¸y±
–
mbedés_´s_c⁄ãxt
 *
˘x
,

772 c⁄° 
öput
[16],

773 
ouçut
[16] )

775 
i
;

776 
uöt32_t
 *
RK
, 
X0
, 
X1
, 
X2
, 
X3
, 
Y0
, 
Y1
, 
Y2
, 
Y3
;

778 
RK
 = 
˘x
->
rk
;

780 
	`GET_UINT32_LE
–
X0
, 
öput
, 0 ); X0 ^*
RK
++;

781 
	`GET_UINT32_LE
–
X1
, 
öput
, 4 ); X1 ^*
RK
++;

782 
	`GET_UINT32_LE
–
X2
, 
öput
, 8 ); X2 ^*
RK
++;

783 
	`GET_UINT32_LE
–
X3
, 
öput
, 12 ); X3 ^*
RK
++;

785  
i
 = ( 
˘x
->
ƒ
 >> 1 ) - 1; i > 0; i-- )

787 
	`AES_RROUND
–
Y0
, 
Y1
, 
Y2
, 
Y3
, 
X0
, 
X1
, 
X2
, 
X3
 );

788 
	`AES_RROUND
–
X0
, 
X1
, 
X2
, 
X3
, 
Y0
, 
Y1
, 
Y2
, 
Y3
 );

791 
	`AES_RROUND
–
Y0
, 
Y1
, 
Y2
, 
Y3
, 
X0
, 
X1
, 
X2
, 
X3
 );

793 
X0
 = *
RK
++ ^ \

794 –(
uöt32_t
Ë
RSb
[ ( 
Y0
 ) & 0xFF ] ) ^

795 –(
uöt32_t
Ë
RSb
[ ( 
Y3
 >> 8 ) & 0xFF ] << 8 ) ^

796 –(
uöt32_t
Ë
RSb
[ ( 
Y2
 >> 16 ) & 0xFF ] << 16 ) ^

797 –(
uöt32_t
Ë
RSb
[ ( 
Y1
 >> 24 ) & 0xFF ] << 24 );

799 
X1
 = *
RK
++ ^ \

800 –(
uöt32_t
Ë
RSb
[ ( 
Y1
 ) & 0xFF ] ) ^

801 –(
uöt32_t
Ë
RSb
[ ( 
Y0
 >> 8 ) & 0xFF ] << 8 ) ^

802 –(
uöt32_t
Ë
RSb
[ ( 
Y3
 >> 16 ) & 0xFF ] << 16 ) ^

803 –(
uöt32_t
Ë
RSb
[ ( 
Y2
 >> 24 ) & 0xFF ] << 24 );

805 
X2
 = *
RK
++ ^ \

806 –(
uöt32_t
Ë
RSb
[ ( 
Y2
 ) & 0xFF ] ) ^

807 –(
uöt32_t
Ë
RSb
[ ( 
Y1
 >> 8 ) & 0xFF ] << 8 ) ^

808 –(
uöt32_t
Ë
RSb
[ ( 
Y0
 >> 16 ) & 0xFF ] << 16 ) ^

809 –(
uöt32_t
Ë
RSb
[ ( 
Y3
 >> 24 ) & 0xFF ] << 24 );

811 
X3
 = *
RK
++ ^ \

812 –(
uöt32_t
Ë
RSb
[ ( 
Y3
 ) & 0xFF ] ) ^

813 –(
uöt32_t
Ë
RSb
[ ( 
Y2
 >> 8 ) & 0xFF ] << 8 ) ^

814 –(
uöt32_t
Ë
RSb
[ ( 
Y1
 >> 16 ) & 0xFF ] << 16 ) ^

815 –(
uöt32_t
Ë
RSb
[ ( 
Y0
 >> 24 ) & 0xFF ] << 24 );

817 
	`PUT_UINT32_LE
–
X0
, 
ouçut
, 0 );

818 
	`PUT_UINT32_LE
–
X1
, 
ouçut
, 4 );

819 
	`PUT_UINT32_LE
–
X2
, 
ouçut
, 8 );

820 
	`PUT_UINT32_LE
–
X3
, 
ouçut
, 12 );

821 
	}
}

827 
	$mbedés_´s_¸y±_ecb
–
mbedés_´s_c⁄ãxt
 *
˘x
,

828 
mode
,

829 c⁄° 
öput
[16],

830 
ouçut
[16] )

832 #i‡
	`deföed
(
MBEDTLS_AESNI_C
Ë&& deföed(
MBEDTLS_HAVE_X86_64
)

833 if–
	`mbedés_´¢i_has_suµ‹t
–
MBEDTLS_AESNI_AES
 ) )

834 –
	`mbedés_´¢i_¸y±_ecb
–
˘x
, 
mode
, 
öput
, 
ouçut
 ) );

837 #i‡
	`deföed
(
MBEDTLS_PADLOCK_C
Ë&& deföed(
MBEDTLS_HAVE_X86
)

838 if–
´s_∑dlock_a˚
 )

840 if–
	`mbedés_∑dlock_x¸y±ecb
–
˘x
, 
mode
, 
öput
, 
ouçut
 ) == 0 )

849 if–
mode
 =
MBEDTLS_AES_ENCRYPT
 )

850 
	`mbedés_´s_í¸y±
–
˘x
, 
öput
, 
ouçut
 );

852 
	`mbedés_´s_de¸y±
–
˘x
, 
öput
, 
ouçut
 );

855 
	}
}

857 #i‡
deföed
(
MBEDTLS_CIPHER_MODE_CBC
)

861 
	$mbedés_´s_¸y±_cbc
–
mbedés_´s_c⁄ãxt
 *
˘x
,

862 
mode
,

863 
size_t
 
Àngth
,

864 
iv
[16],

865 c⁄° *
öput
,

866 *
ouçut
 )

868 
i
;

869 
ãmp
[16];

871 if–
Àngth
 % 16 )

872 –
MBEDTLS_ERR_AES_INVALID_INPUT_LENGTH
 );

874 #i‡
	`deföed
(
MBEDTLS_PADLOCK_C
Ë&& deföed(
MBEDTLS_HAVE_X86
)

875 if–
´s_∑dlock_a˚
 )

877 if–
	`mbedés_∑dlock_x¸y±cbc
–
˘x
, 
mode
, 
Àngth
, 
iv
, 
öput
, 
ouçut
 ) == 0 )

886 if–
mode
 =
MBEDTLS_AES_DECRYPT
 )

888  
Àngth
 > 0 )

890 
	`mem˝y
–
ãmp
, 
öput
, 16 );

891 
	`mbedés_´s_¸y±_ecb
–
˘x
, 
mode
, 
öput
, 
ouçut
 );

893  
i
 = 0; i < 16; i++ )

894 
ouçut
[
i
] = ()–ouçut[i] ^ 
iv
[i] );

896 
	`mem˝y
–
iv
, 
ãmp
, 16 );

898 
öput
 += 16;

899 
ouçut
 += 16;

900 
Àngth
 -= 16;

905  
Àngth
 > 0 )

907  
i
 = 0; i < 16; i++ )

908 
ouçut
[
i
] = ()–
öput
[i] ^ 
iv
[i] );

910 
	`mbedés_´s_¸y±_ecb
–
˘x
, 
mode
, 
ouçut
, output );

911 
	`mem˝y
–
iv
, 
ouçut
, 16 );

913 
öput
 += 16;

914 
ouçut
 += 16;

915 
Àngth
 -= 16;

920 
	}
}

923 #i‡
deföed
(
MBEDTLS_CIPHER_MODE_CFB
)

927 
	$mbedés_´s_¸y±_cfb128
–
mbedés_´s_c⁄ãxt
 *
˘x
,

928 
mode
,

929 
size_t
 
Àngth
,

930 
size_t
 *
iv_off
,

931 
iv
[16],

932 c⁄° *
öput
,

933 *
ouçut
 )

935 
c
;

936 
size_t
 
n
 = *
iv_off
;

938 if–
mode
 =
MBEDTLS_AES_DECRYPT
 )

940  
Àngth
-- )

942 if–
n
 == 0 )

943 
	`mbedés_´s_¸y±_ecb
–
˘x
, 
MBEDTLS_AES_ENCRYPT
, 
iv
, iv );

945 
c
 = *
öput
++;

946 *
ouçut
++ = ()–
c
 ^ 
iv
[
n
] );

947 
iv
[
n
] = (Ë
c
;

949 
n
 = (Ç + 1 ) & 0x0F;

954  
Àngth
-- )

956 if–
n
 == 0 )

957 
	`mbedés_´s_¸y±_ecb
–
˘x
, 
MBEDTLS_AES_ENCRYPT
, 
iv
, iv );

959 
iv
[
n
] = *
ouçut
++ = ()–iv[n] ^ *
öput
++ );

961 
n
 = (Ç + 1 ) & 0x0F;

965 *
iv_off
 = 
n
;

968 
	}
}

973 
	$mbedés_´s_¸y±_cfb8
–
mbedés_´s_c⁄ãxt
 *
˘x
,

974 
mode
,

975 
size_t
 
Àngth
,

976 
iv
[16],

977 c⁄° *
öput
,

978 *
ouçut
 )

980 
c
;

981 
ov
[17];

983  
Àngth
-- )

985 
	`mem˝y
–
ov
, 
iv
, 16 );

986 
	`mbedés_´s_¸y±_ecb
–
˘x
, 
MBEDTLS_AES_ENCRYPT
, 
iv
, iv );

988 if–
mode
 =
MBEDTLS_AES_DECRYPT
 )

989 
ov
[16] = *
öput
;

991 
c
 = *
ouçut
++ = ()–
iv
[0] ^ *
öput
++ );

993 if–
mode
 =
MBEDTLS_AES_ENCRYPT
 )

994 
ov
[16] = 
c
;

996 
	`mem˝y
–
iv
, 
ov
 + 1, 16 );

1000 
	}
}

1003 #i‡
deföed
(
MBEDTLS_CIPHER_MODE_CTR
)

1007 
	$mbedés_´s_¸y±_˘r
–
mbedés_´s_c⁄ãxt
 *
˘x
,

1008 
size_t
 
Àngth
,

1009 
size_t
 *
nc_off
,

1010 
n⁄˚_cou¡î
[16],

1011 
°ªam_block
[16],

1012 c⁄° *
öput
,

1013 *
ouçut
 )

1015 
c
, 
i
;

1016 
size_t
 
n
 = *
nc_off
;

1018  
Àngth
-- )

1020 if–
n
 == 0 ) {

1021 
	`mbedés_´s_¸y±_ecb
–
˘x
, 
MBEDTLS_AES_ENCRYPT
, 
n⁄˚_cou¡î
, 
°ªam_block
 );

1023  
i
 = 16; i > 0; i-- )

1024 if–++
n⁄˚_cou¡î
[
i
 - 1] != 0 )

1027 
c
 = *
öput
++;

1028 *
ouçut
++ = ()–
c
 ^ 
°ªam_block
[
n
] );

1030 
n
 = (Ç + 1 ) & 0x0F;

1033 *
nc_off
 = 
n
;

1036 
	}
}

1041 #i‡
deföed
(
MBEDTLS_SELF_TEST
)

1047 c⁄° 
	g´s_ã°_ecb_dec
[3][16] =

1057 c⁄° 
	g´s_ã°_ecb_íc
[3][16] =

1067 #i‡
deföed
(
MBEDTLS_CIPHER_MODE_CBC
)

1068 c⁄° 
	g´s_ã°_cbc_dec
[3][16] =

1078 c⁄° 
	g´s_ã°_cbc_íc
[3][16] =

1089 #i‡
deföed
(
MBEDTLS_CIPHER_MODE_CFB
)

1095 c⁄° 
	g´s_ã°_cfb128_key
[3][32] =

1108 c⁄° 
	g´s_ã°_cfb128_iv
[16] =

1114 c⁄° 
	g´s_ã°_cfb128_±
[64] =

1126 c⁄° 
	g´s_ã°_cfb128_˘
[3][64] =

1155 #i‡
deföed
(
MBEDTLS_CIPHER_MODE_CTR
)

1162 c⁄° 
	g´s_ã°_˘r_key
[3][16] =

1172 c⁄° 
	g´s_ã°_˘r_n⁄˚_cou¡î
[3][16] =

1182 c⁄° 
	g´s_ã°_˘r_±
[3][48] =

1199 c⁄° 
	g´s_ã°_˘r_˘
[3][48] =

1214 c⁄° 
	g´s_ã°_˘r_Àn
[3] =

1221 
	$mbedés_´s_£lf_ã°
–
vîbo£
 )

1223 
ªt
 = 0, 
i
, 
j
, 
u
, 
v
;

1224 
key
[32];

1225 
buf
[64];

1226 
iv
[16];

1227 #i‡
	`deföed
(
MBEDTLS_CIPHER_MODE_CBC
)

1228 
¥v
[16];

1230 #i‡
	`deföed
(
MBEDTLS_CIPHER_MODE_CTR
Ë|| deföed(
MBEDTLS_CIPHER_MODE_CFB
)

1231 
size_t
 
off£t
;

1233 #i‡
	`deföed
(
MBEDTLS_CIPHER_MODE_CTR
)

1234 
Àn
;

1235 
n⁄˚_cou¡î
[16];

1236 
°ªam_block
[16];

1238 
mbedés_´s_c⁄ãxt
 
˘x
;

1240 
	`mem£t
–
key
, 0, 32 );

1241 
	`mbedés_´s_öô
–&
˘x
 );

1246  
i
 = 0; i < 6; i++ )

1248 
u
 = 
i
 >> 1;

1249 
v
 = 
i
 & 1;

1251 if–
vîbo£
 != 0 )

1252 
	`mbedés_¥ötf
–" AES-ECB-%3d (%s): ", 128 + 
u
 * 64,

1253 –
v
 =
MBEDTLS_AES_DECRYPT
 ) ? "dec" : "enc" );

1255 
	`mem£t
–
buf
, 0, 16 );

1257 if–
v
 =
MBEDTLS_AES_DECRYPT
 )

1259 
	`mbedés_´s_£tkey_dec
–&
˘x
, 
key
, 128 + 
u
 * 64 );

1261  
j
 = 0; j < 10000; j++ )

1262 
	`mbedés_´s_¸y±_ecb
–&
˘x
, 
v
, 
buf
, buf );

1264 if–
	`memcmp
–
buf
, 
´s_ã°_ecb_dec
[
u
], 16 ) != 0 )

1266 if–
vîbo£
 != 0 )

1267 
	`mbedés_¥ötf
( "failed\n" );

1269 
ªt
 = 1;

1270 
exô
;

1275 
	`mbedés_´s_£tkey_íc
–&
˘x
, 
key
, 128 + 
u
 * 64 );

1277  
j
 = 0; j < 10000; j++ )

1278 
	`mbedés_´s_¸y±_ecb
–&
˘x
, 
v
, 
buf
, buf );

1280 if–
	`memcmp
–
buf
, 
´s_ã°_ecb_íc
[
u
], 16 ) != 0 )

1282 if–
vîbo£
 != 0 )

1283 
	`mbedés_¥ötf
( "failed\n" );

1285 
ªt
 = 1;

1286 
exô
;

1290 if–
vîbo£
 != 0 )

1291 
	`mbedés_¥ötf
( "passed\n" );

1294 if–
vîbo£
 != 0 )

1295 
	`mbedés_¥ötf
( "\n" );

1297 #i‡
	`deföed
(
MBEDTLS_CIPHER_MODE_CBC
)

1301  
i
 = 0; i < 6; i++ )

1303 
u
 = 
i
 >> 1;

1304 
v
 = 
i
 & 1;

1306 if–
vîbo£
 != 0 )

1307 
	`mbedés_¥ötf
–" AES-CBC-%3d (%s): ", 128 + 
u
 * 64,

1308 –
v
 =
MBEDTLS_AES_DECRYPT
 ) ? "dec" : "enc" );

1310 
	`mem£t
–
iv
 , 0, 16 );

1311 
	`mem£t
–
¥v
, 0, 16 );

1312 
	`mem£t
–
buf
, 0, 16 );

1314 if–
v
 =
MBEDTLS_AES_DECRYPT
 )

1316 
	`mbedés_´s_£tkey_dec
–&
˘x
, 
key
, 128 + 
u
 * 64 );

1318  
j
 = 0; j < 10000; j++ )

1319 
	`mbedés_´s_¸y±_cbc
–&
˘x
, 
v
, 16, 
iv
, 
buf
, buf );

1321 if–
	`memcmp
–
buf
, 
´s_ã°_cbc_dec
[
u
], 16 ) != 0 )

1323 if–
vîbo£
 != 0 )

1324 
	`mbedés_¥ötf
( "failed\n" );

1326 
ªt
 = 1;

1327 
exô
;

1332 
	`mbedés_´s_£tkey_íc
–&
˘x
, 
key
, 128 + 
u
 * 64 );

1334  
j
 = 0; j < 10000; j++ )

1336 
tmp
[16];

1338 
	`mbedés_´s_¸y±_cbc
–&
˘x
, 
v
, 16, 
iv
, 
buf
, buf );

1340 
	`mem˝y
–
tmp
, 
¥v
, 16 );

1341 
	`mem˝y
–
¥v
, 
buf
, 16 );

1342 
	`mem˝y
–
buf
, 
tmp
, 16 );

1345 if–
	`memcmp
–
¥v
, 
´s_ã°_cbc_íc
[
u
], 16 ) != 0 )

1347 if–
vîbo£
 != 0 )

1348 
	`mbedés_¥ötf
( "failed\n" );

1350 
ªt
 = 1;

1351 
exô
;

1355 if–
vîbo£
 != 0 )

1356 
	`mbedés_¥ötf
( "passed\n" );

1359 if–
vîbo£
 != 0 )

1360 
	`mbedés_¥ötf
( "\n" );

1363 #i‡
	`deföed
(
MBEDTLS_CIPHER_MODE_CFB
)

1367  
i
 = 0; i < 6; i++ )

1369 
u
 = 
i
 >> 1;

1370 
v
 = 
i
 & 1;

1372 if–
vîbo£
 != 0 )

1373 
	`mbedés_¥ötf
–" AES-CFB128-%3d (%s): ", 128 + 
u
 * 64,

1374 –
v
 =
MBEDTLS_AES_DECRYPT
 ) ? "dec" : "enc" );

1376 
	`mem˝y
–
iv
, 
´s_ã°_cfb128_iv
, 16 );

1377 
	`mem˝y
–
key
, 
´s_ã°_cfb128_key
[
u
], 16 + u * 8 );

1379 
off£t
 = 0;

1380 
	`mbedés_´s_£tkey_íc
–&
˘x
, 
key
, 128 + 
u
 * 64 );

1382 if–
v
 =
MBEDTLS_AES_DECRYPT
 )

1384 
	`mem˝y
–
buf
, 
´s_ã°_cfb128_˘
[
u
], 64 );

1385 
	`mbedés_´s_¸y±_cfb128
–&
˘x
, 
v
, 64, &
off£t
, 
iv
, 
buf
, buf );

1387 if–
	`memcmp
–
buf
, 
´s_ã°_cfb128_±
, 64 ) != 0 )

1389 if–
vîbo£
 != 0 )

1390 
	`mbedés_¥ötf
( "failed\n" );

1392 
ªt
 = 1;

1393 
exô
;

1398 
	`mem˝y
–
buf
, 
´s_ã°_cfb128_±
, 64 );

1399 
	`mbedés_´s_¸y±_cfb128
–&
˘x
, 
v
, 64, &
off£t
, 
iv
, 
buf
, buf );

1401 if–
	`memcmp
–
buf
, 
´s_ã°_cfb128_˘
[
u
], 64 ) != 0 )

1403 if–
vîbo£
 != 0 )

1404 
	`mbedés_¥ötf
( "failed\n" );

1406 
ªt
 = 1;

1407 
exô
;

1411 if–
vîbo£
 != 0 )

1412 
	`mbedés_¥ötf
( "passed\n" );

1415 if–
vîbo£
 != 0 )

1416 
	`mbedés_¥ötf
( "\n" );

1419 #i‡
	`deföed
(
MBEDTLS_CIPHER_MODE_CTR
)

1423  
i
 = 0; i < 6; i++ )

1425 
u
 = 
i
 >> 1;

1426 
v
 = 
i
 & 1;

1428 if–
vîbo£
 != 0 )

1429 
	`mbedés_¥ötf
( " AES-CTR-128 (%s): ",

1430 –
v
 =
MBEDTLS_AES_DECRYPT
 ) ? "dec" : "enc" );

1432 
	`mem˝y
–
n⁄˚_cou¡î
, 
´s_ã°_˘r_n⁄˚_cou¡î
[
u
], 16 );

1433 
	`mem˝y
–
key
, 
´s_ã°_˘r_key
[
u
], 16 );

1435 
off£t
 = 0;

1436 
	`mbedés_´s_£tkey_íc
–&
˘x
, 
key
, 128 );

1438 if–
v
 =
MBEDTLS_AES_DECRYPT
 )

1440 
Àn
 = 
´s_ã°_˘r_Àn
[
u
];

1441 
	`mem˝y
–
buf
, 
´s_ã°_˘r_˘
[
u
], 
Àn
 );

1443 
	`mbedés_´s_¸y±_˘r
–&
˘x
, 
Àn
, &
off£t
, 
n⁄˚_cou¡î
, 
°ªam_block
,

1444 
buf
, buf );

1446 if–
	`memcmp
–
buf
, 
´s_ã°_˘r_±
[
u
], 
Àn
 ) != 0 )

1448 if–
vîbo£
 != 0 )

1449 
	`mbedés_¥ötf
( "failed\n" );

1451 
ªt
 = 1;

1452 
exô
;

1457 
Àn
 = 
´s_ã°_˘r_Àn
[
u
];

1458 
	`mem˝y
–
buf
, 
´s_ã°_˘r_±
[
u
], 
Àn
 );

1460 
	`mbedés_´s_¸y±_˘r
–&
˘x
, 
Àn
, &
off£t
, 
n⁄˚_cou¡î
, 
°ªam_block
,

1461 
buf
, buf );

1463 if–
	`memcmp
–
buf
, 
´s_ã°_˘r_˘
[
u
], 
Àn
 ) != 0 )

1465 if–
vîbo£
 != 0 )

1466 
	`mbedés_¥ötf
( "failed\n" );

1468 
ªt
 = 1;

1469 
exô
;

1473 if–
vîbo£
 != 0 )

1474 
	`mbedés_¥ötf
( "passed\n" );

1477 if–
vîbo£
 != 0 )

1478 
	`mbedés_¥ötf
( "\n" );

1481 
ªt
 = 0;

1483 
exô
:

1484 
	`mbedés_´s_‰ì
–&
˘x
 );

1486 –
ªt
 );

1487 
	}
}

	@/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/aes_key.c

	@/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/asn1parse.c

22 #i‡!
deföed
(
MBEDTLS_CONFIG_FILE
)

23 
	~"mbedés/c⁄fig.h
"

25 #ö˛udê
MBEDTLS_CONFIG_FILE


28 #i‡
deföed
(
MBEDTLS_ASN1_PARSE_C
)

30 
	~"mbedés/a¢1.h
"

32 
	~<°rög.h
>

34 #i‡
deföed
(
MBEDTLS_BIGNUM_C
)

35 
	~"mbedés/bignum.h
"

38 #i‡
deföed
(
MBEDTLS_PLATFORM_C
)

39 
	~"mbedés/∂©f‹m.h
"

41 
	~<°dlib.h
>

42 
	#mbedés_ˇŒoc
 
ˇŒoc


	)

43 
	#mbedés_‰ì
 
‰ì


	)

47 
	$mbedés_zîoize
–*
v
, 
size_t
 
n
 ) {

48 vﬁ©ûê*
p
 = 
v
;  
n
-- ) *p++ = 0;

49 
	}
}

54 
	$mbedés_a¢1_gë_Àn
–**
p
,

55 c⁄° *
íd
,

56 
size_t
 *
Àn
 )

58 if––
íd
 - *
p
 ) < 1 )

59 –
MBEDTLS_ERR_ASN1_OUT_OF_DATA
 );

61 if––**
p
 & 0x80 ) == 0 )

62 *
Àn
 = *(*
p
)++;

65  **
p
 & 0x7F )

68 if––
íd
 - *
p
 ) < 2 )

69 –
MBEDTLS_ERR_ASN1_OUT_OF_DATA
 );

71 *
Àn
 = (*
p
)[1];

72 (*
p
) += 2;

76 if––
íd
 - *
p
 ) < 3 )

77 –
MBEDTLS_ERR_ASN1_OUT_OF_DATA
 );

79 *
Àn
 = ( (
size_t
)(*
p
)[1] << 8 ) | (*p)[2];

80 (*
p
) += 3;

84 if––
íd
 - *
p
 ) < 4 )

85 –
MBEDTLS_ERR_ASN1_OUT_OF_DATA
 );

87 *
Àn
 = ( (
size_t
)(*
p
)[1] << 16 ) |

88 –(
size_t
)(*
p
)[2] << 8 ) | (*p)[3];

89 (*
p
) += 4;

93 if––
íd
 - *
p
 ) < 5 )

94 –
MBEDTLS_ERR_ASN1_OUT_OF_DATA
 );

96 *
Àn
 = ( (
size_t
)(*
p
)[1] << 24 ) | ( (size_t)(*p)[2] << 16 ) |

97 –(
size_t
)(*
p
)[3] << 8 ) | (*p)[4];

98 (*
p
) += 5;

102 –
MBEDTLS_ERR_ASN1_INVALID_LENGTH
 );

106 if–*
Àn
 > (
size_t
Ë–
íd
 - *
p
 ) )

107 –
MBEDTLS_ERR_ASN1_OUT_OF_DATA
 );

110 
	}
}

112 
	$mbedés_a¢1_gë_èg
–**
p
,

113 c⁄° *
íd
,

114 
size_t
 *
Àn
, 
èg
 )

116 if––
íd
 - *
p
 ) < 1 )

117 –
MBEDTLS_ERR_ASN1_OUT_OF_DATA
 );

119 if–**
p
 !
èg
 )

120 –
MBEDTLS_ERR_ASN1_UNEXPECTED_TAG
 );

122 (*
p
)++;

124 –
	`mbedés_a¢1_gë_Àn
–
p
, 
íd
, 
Àn
 ) );

125 
	}
}

127 
	$mbedés_a¢1_gë_boﬁ
–**
p
,

128 c⁄° *
íd
,

129 *
vÆ
 )

131 
ªt
;

132 
size_t
 
Àn
;

134 if––
ªt
 = 
	`mbedés_a¢1_gë_èg
–
p
, 
íd
, &
Àn
, 
MBEDTLS_ASN1_BOOLEAN
 ) ) != 0 )

135 –
ªt
 );

137 if–
Àn
 != 1 )

138 –
MBEDTLS_ERR_ASN1_INVALID_LENGTH
 );

140 *
vÆ
 = ( **
p
 != 0 ) ? 1 : 0;

141 (*
p
)++;

144 
	}
}

146 
	$mbedés_a¢1_gë_öt
–**
p
,

147 c⁄° *
íd
,

148 *
vÆ
 )

150 
ªt
;

151 
size_t
 
Àn
;

153 if––
ªt
 = 
	`mbedés_a¢1_gë_èg
–
p
, 
íd
, &
Àn
, 
MBEDTLS_ASN1_INTEGER
 ) ) != 0 )

154 –
ªt
 );

156 if–
Àn
 > –Ë|| ( **
p
 & 0x80 ) != 0 )

157 –
MBEDTLS_ERR_ASN1_INVALID_LENGTH
 );

159 *
vÆ
 = 0;

161  
Àn
-- > 0 )

163 *
vÆ
 = ( *vÆ << 8 ) | **
p
;

164 (*
p
)++;

168 
	}
}

170 #i‡
deföed
(
MBEDTLS_BIGNUM_C
)

171 
	$mbedés_a¢1_gë_mpi
–**
p
,

172 c⁄° *
íd
,

173 
mbedés_mpi
 *
X
 )

175 
ªt
;

176 
size_t
 
Àn
;

178 if––
ªt
 = 
	`mbedés_a¢1_gë_èg
–
p
, 
íd
, &
Àn
, 
MBEDTLS_ASN1_INTEGER
 ) ) != 0 )

179 –
ªt
 );

181 
ªt
 = 
	`mbedés_mpi_ªad_bö¨y
–
X
, *
p
, 
Àn
 );

183 *
p
 +
Àn
;

184 –
ªt
 );

185 
	}
}

188 
	$mbedés_a¢1_gë_bô°rög
–**
p
, c⁄° *
íd
,

189 
mbedés_a¢1_bô°rög
 *
bs
)

191 
ªt
;

194 if––
ªt
 = 
	`mbedés_a¢1_gë_èg
–
p
, 
íd
, &
bs
->
Àn
, 
MBEDTLS_ASN1_BIT_STRING
 ) ) != 0 )

195 –
ªt
 );

198 if–
bs
->
Àn
 < 1 )

199 –
MBEDTLS_ERR_ASN1_OUT_OF_DATA
 );

200 
bs
->
Àn
 -= 1;

203 
bs
->
unu£d_bôs
 = **
p
;

204 if–
bs
->
unu£d_bôs
 > 7 )

205 –
MBEDTLS_ERR_ASN1_INVALID_LENGTH
 );

206 (*
p
)++;

209 
bs
->
p
 = *p;

210 *
p
 +
bs
->
Àn
;

212 if–*
p
 !
íd
 )

213 –
MBEDTLS_ERR_ASN1_LENGTH_MISMATCH
 );

216 
	}
}

221 
	$mbedés_a¢1_gë_bô°rög_nuŒ
–**
p
, c⁄° *
íd
,

222 
size_t
 *
Àn
 )

224 
ªt
;

226 if––
ªt
 = 
	`mbedés_a¢1_gë_èg
–
p
, 
íd
, 
Àn
, 
MBEDTLS_ASN1_BIT_STRING
 ) ) != 0 )

227 –
ªt
 );

229 if–(*
Àn
)-- < 2 || *(*
p
)++ != 0 )

230 –
MBEDTLS_ERR_ASN1_INVALID_DATA
 );

233 
	}
}

240 
	$mbedés_a¢1_gë_£quí˚_of
–**
p
,

241 c⁄° *
íd
,

242 
mbedés_a¢1_£quí˚
 *
cur
,

243 
èg
)

245 
ªt
;

246 
size_t
 
Àn
;

247 
mbedés_a¢1_buf
 *
buf
;

250 if––
ªt
 = 
	`mbedés_a¢1_gë_èg
–
p
, 
íd
, &
Àn
,

251 
MBEDTLS_ASN1_CONSTRUCTED
 | 
MBEDTLS_ASN1_SEQUENCE
 ) ) != 0 )

252 –
ªt
 );

254 if–*
p
 + 
Àn
 !
íd
 )

255 –
MBEDTLS_ERR_ASN1_LENGTH_MISMATCH
 );

257  *
p
 < 
íd
 )

259 
buf
 = &(
cur
->buf);

260 
buf
->
èg
 = **
p
;

262 if––
ªt
 = 
	`mbedés_a¢1_gë_èg
–
p
, 
íd
, &
buf
->
Àn
, 
èg
 ) ) != 0 )

263 –
ªt
 );

265 
buf
->
p
 = *p;

266 *
p
 +
buf
->
Àn
;

269 if–*
p
 < 
íd
 )

271 
cur
->
√xt
 = 
	`mbedés_ˇŒoc
–1, –
mbedés_a¢1_£quí˚
 ) );

273 if–
cur
->
√xt
 =
NULL
 )

274 –
MBEDTLS_ERR_ASN1_ALLOC_FAILED
 );

276 
cur
 = cur->
√xt
;

281 
cur
->
√xt
 = 
NULL
;

283 if–*
p
 !
íd
 )

284 –
MBEDTLS_ERR_ASN1_LENGTH_MISMATCH
 );

287 
	}
}

289 
	$mbedés_a¢1_gë_Æg
–**
p
,

290 c⁄° *
íd
,

291 
mbedés_a¢1_buf
 *
Æg
, mbedés_a¢1_bu‡*
∑øms
 )

293 
ªt
;

294 
size_t
 
Àn
;

296 if––
ªt
 = 
	`mbedés_a¢1_gë_èg
–
p
, 
íd
, &
Àn
,

297 
MBEDTLS_ASN1_CONSTRUCTED
 | 
MBEDTLS_ASN1_SEQUENCE
 ) ) != 0 )

298 –
ªt
 );

300 if––
íd
 - *
p
 ) < 1 )

301 –
MBEDTLS_ERR_ASN1_OUT_OF_DATA
 );

303 
Æg
->
èg
 = **
p
;

304 
íd
 = *
p
 + 
Àn
;

306 if––
ªt
 = 
	`mbedés_a¢1_gë_èg
–
p
, 
íd
, &
Æg
->
Àn
, 
MBEDTLS_ASN1_OID
 ) ) != 0 )

307 –
ªt
 );

309 
Æg
->
p
 = *p;

310 *
p
 +
Æg
->
Àn
;

312 if–*
p
 =
íd
 )

314 
	`mbedés_zîoize
–
∑øms
, (
mbedés_a¢1_buf
) );

318 
∑øms
->
èg
 = **
p
;

319 (*
p
)++;

321 if––
ªt
 = 
	`mbedés_a¢1_gë_Àn
–
p
, 
íd
, &
∑øms
->
Àn
 ) ) != 0 )

322 –
ªt
 );

324 
∑øms
->
p
 = *p;

325 *
p
 +
∑øms
->
Àn
;

327 if–*
p
 !
íd
 )

328 –
MBEDTLS_ERR_ASN1_LENGTH_MISMATCH
 );

331 
	}
}

333 
	$mbedés_a¢1_gë_Æg_nuŒ
–**
p
,

334 c⁄° *
íd
,

335 
mbedés_a¢1_buf
 *
Æg
 )

337 
ªt
;

338 
mbedés_a¢1_buf
 
∑øms
;

340 
	`mem£t
–&
∑øms
, 0, (
mbedés_a¢1_buf
) );

342 if––
ªt
 = 
	`mbedés_a¢1_gë_Æg
–
p
, 
íd
, 
Æg
, &
∑øms
 ) ) != 0 )

343 –
ªt
 );

345 if––
∑øms
.
èg
 !
MBEDTLS_ASN1_NULL
 &&Ö¨ams.èg !0 ) ||Ö¨ams.
Àn
 != 0 )

346 –
MBEDTLS_ERR_ASN1_INVALID_DATA
 );

349 
	}
}

351 
	$mbedés_a¢1_‰ì_«med_d©a
–
mbedés_a¢1_«med_d©a
 *
cur
 )

353 if–
cur
 =
NULL
 )

356 
	`mbedés_‰ì
–
cur
->
oid
.
p
 );

357 
	`mbedés_‰ì
–
cur
->
vÆ
.
p
 );

359 
	`mbedés_zîoize
–
cur
, –
mbedés_a¢1_«med_d©a
 ) );

360 
	}
}

362 
	$mbedés_a¢1_‰ì_«med_d©a_li°
–
mbedés_a¢1_«med_d©a
 **
hód
 )

364 
mbedés_a¢1_«med_d©a
 *
cur
;

366  ( 
cur
 = *
hód
 ) !
NULL
 )

368 *
hód
 = 
cur
->
√xt
;

369 
	`mbedés_a¢1_‰ì_«med_d©a
–
cur
 );

370 
	`mbedés_‰ì
–
cur
 );

372 
	}
}

374 
mbedés_a¢1_«med_d©a
 *
	$mbedés_a¢1_föd_«med_d©a
–
mbedés_a¢1_«med_d©a
 *
li°
,

375 c⁄° *
oid
, 
size_t
 
Àn
 )

377  
li°
 !
NULL
 )

379 if–
li°
->
oid
.
Àn
 ==Üen &&

380 
	`memcmp
–
li°
->
oid
.
p
, oid, 
Àn
 ) == 0 )

385 
li°
 =Üi°->
√xt
;

388 –
li°
 );

389 
	}
}

	@/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/asn1write.c

22 #i‡!
deföed
(
MBEDTLS_CONFIG_FILE
)

23 
	~"mbedés/c⁄fig.h
"

25 #ö˛udê
MBEDTLS_CONFIG_FILE


28 #i‡
deföed
(
MBEDTLS_ASN1_WRITE_C
)

30 
	~"mbedés/a¢1wrôe.h
"

32 
	~<°rög.h
>

34 #i‡
deföed
(
MBEDTLS_PLATFORM_C
)

35 
	~"mbedés/∂©f‹m.h
"

37 
	~<°dlib.h
>

38 
	#mbedés_ˇŒoc
 
ˇŒoc


	)

39 
	#mbedés_‰ì
 
‰ì


	)

42 
	$mbedés_a¢1_wrôe_Àn
–**
p
, *
°¨t
, 
size_t
 
Àn
 )

44 if–
Àn
 < 0x80 )

46 if–*
p
 - 
°¨t
 < 1 )

47 –
MBEDTLS_ERR_ASN1_BUF_TOO_SMALL
 );

49 *--(*
p
Ë(Ë
Àn
;

53 if–
Àn
 <= 0xFF )

55 if–*
p
 - 
°¨t
 < 2 )

56 –
MBEDTLS_ERR_ASN1_BUF_TOO_SMALL
 );

58 *--(*
p
Ë(Ë
Àn
;

59 *--(*
p
) = 0x81;

63 if–*
p
 - 
°¨t
 < 3 )

64 –
MBEDTLS_ERR_ASN1_BUF_TOO_SMALL
 );

68 *--(*
p
Ë
Àn
 % 256;

69 *--(*
p
Ë–
Àn
 / 256 ) % 256;

70 *--(*
p
) = 0x82;

73 
	}
}

75 
	$mbedés_a¢1_wrôe_èg
–**
p
, *
°¨t
, 
èg
 )

77 if–*
p
 - 
°¨t
 < 1 )

78 –
MBEDTLS_ERR_ASN1_BUF_TOO_SMALL
 );

80 *--(*
p
Ë
èg
;

83 
	}
}

85 
	$mbedés_a¢1_wrôe_øw_buf„r
–**
p
, *
°¨t
,

86 c⁄° *
buf
, 
size_t
 
size
 )

88 
size_t
 
Àn
 = 0;

90 if–*
p
 < 
°¨t
 || (
size_t
)–*∞- sèπ ) < 
size
 )

91 –
MBEDTLS_ERR_ASN1_BUF_TOO_SMALL
 );

93 
Àn
 = 
size
;

94 (*
p
Ë-
Àn
;

95 
	`mem˝y
–*
p
, 
buf
, 
Àn
 );

97 –(Ë
Àn
 );

98 
	}
}

100 #i‡
deföed
(
MBEDTLS_BIGNUM_C
)

101 
	$mbedés_a¢1_wrôe_mpi
–**
p
, *
°¨t
, c⁄° 
mbedés_mpi
 *
X
 )

103 
ªt
;

104 
size_t
 
Àn
 = 0;

108 
Àn
 = 
	`mbedés_mpi_size
–
X
 );

110 if–*
p
 < 
°¨t
 || (
size_t
)–*∞- sèπ ) < 
Àn
 )

111 –
MBEDTLS_ERR_ASN1_BUF_TOO_SMALL
 );

113 (*
p
Ë-
Àn
;

114 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_wrôe_bö¨y
–
X
, *
p
, 
Àn
 ) );

119 if–
X
->
s
 ==1 && **
p
 & 0x80 )

121 if–*
p
 - 
°¨t
 < 1 )

122 –
MBEDTLS_ERR_ASN1_BUF_TOO_SMALL
 );

124 *--(*
p
) = 0x00;

125 
Àn
 += 1;

128 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_Àn
–
p
, 
°¨t
,Üen ) );

129 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_èg
–
p
, 
°¨t
, 
MBEDTLS_ASN1_INTEGER
 ) );

131 
ªt
 = (Ë
Àn
;

133 
˛ónup
:

134 –
ªt
 );

135 
	}
}

138 
	$mbedés_a¢1_wrôe_nuŒ
–**
p
, *
°¨t
 )

140 
ªt
;

141 
size_t
 
Àn
 = 0;

145 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_Àn
–
p
, 
°¨t
, 0) );

146 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_èg
–
p
, 
°¨t
, 
MBEDTLS_ASN1_NULL
 ) );

148 –(Ë
Àn
 );

149 
	}
}

151 
	$mbedés_a¢1_wrôe_oid
–**
p
, *
°¨t
,

152 c⁄° *
oid
, 
size_t
 
oid_Àn
 )

154 
ªt
;

155 
size_t
 
Àn
 = 0;

157 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_øw_buf„r
–
p
, 
°¨t
,

158 (c⁄° *Ë
oid
, 
oid_Àn
 ) );

159 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
 , 
	`mbedés_a¢1_wrôe_Àn
–
p
, 
°¨t
,Üen ) );

160 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
 , 
	`mbedés_a¢1_wrôe_èg
–
p
, 
°¨t
, 
MBEDTLS_ASN1_OID
 ) );

162 –(Ë
Àn
 );

163 
	}
}

165 
	$mbedés_a¢1_wrôe_Æg‹ôhm_idítifõr
–**
p
, *
°¨t
,

166 c⁄° *
oid
, 
size_t
 
oid_Àn
,

167 
size_t
 
∑r_Àn
 )

169 
ªt
;

170 
size_t
 
Àn
 = 0;

172 if–
∑r_Àn
 == 0 )

173 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_nuŒ
–
p
, 
°¨t
 ) );

175 
Àn
 +
∑r_Àn
;

177 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_oid
–
p
, 
°¨t
, 
oid
, 
oid_Àn
 ) );

179 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_Àn
–
p
, 
°¨t
,Üen ) );

180 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_èg
–
p
, 
°¨t
,

181 
MBEDTLS_ASN1_CONSTRUCTED
 | 
MBEDTLS_ASN1_SEQUENCE
 ) );

183 –(Ë
Àn
 );

184 
	}
}

186 
	$mbedés_a¢1_wrôe_boﬁ
–**
p
, *
°¨t
, 
boﬁón
 )

188 
ªt
;

189 
size_t
 
Àn
 = 0;

191 if–*
p
 - 
°¨t
 < 1 )

192 –
MBEDTLS_ERR_ASN1_BUF_TOO_SMALL
 );

194 *--(*
p
Ë(
boﬁón
) ? 255 : 0;

195 
Àn
++;

197 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_Àn
–
p
, 
°¨t
,Üen ) );

198 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_èg
–
p
, 
°¨t
, 
MBEDTLS_ASN1_BOOLEAN
 ) );

200 –(Ë
Àn
 );

201 
	}
}

203 
	$mbedés_a¢1_wrôe_öt
–**
p
, *
°¨t
, 
vÆ
 )

205 
ªt
;

206 
size_t
 
Àn
 = 0;

212 if–*
p
 - 
°¨t
 < 1 )

213 –
MBEDTLS_ERR_ASN1_BUF_TOO_SMALL
 );

215 
Àn
 += 1;

216 *--(*
p
Ë
vÆ
;

218 if–
vÆ
 > 0 && **
p
 & 0x80 )

220 if–*
p
 - 
°¨t
 < 1 )

221 –
MBEDTLS_ERR_ASN1_BUF_TOO_SMALL
 );

223 *--(*
p
) = 0x00;

224 
Àn
 += 1;

227 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_Àn
–
p
, 
°¨t
,Üen ) );

228 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_èg
–
p
, 
°¨t
, 
MBEDTLS_ASN1_INTEGER
 ) );

230 –(Ë
Àn
 );

231 
	}
}

233 
	$mbedés_a¢1_wrôe_¥öèbÀ_°rög
–**
p
, *
°¨t
,

234 c⁄° *
ãxt
, 
size_t
 
ãxt_Àn
 )

236 
ªt
;

237 
size_t
 
Àn
 = 0;

239 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_øw_buf„r
–
p
, 
°¨t
,

240 (c⁄° *Ë
ãxt
, 
ãxt_Àn
 ) );

242 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_Àn
–
p
, 
°¨t
,Üen ) );

243 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_èg
–
p
, 
°¨t
, 
MBEDTLS_ASN1_PRINTABLE_STRING
 ) );

245 –(Ë
Àn
 );

246 
	}
}

248 
	$mbedés_a¢1_wrôe_ü5_°rög
–**
p
, *
°¨t
,

249 c⁄° *
ãxt
, 
size_t
 
ãxt_Àn
 )

251 
ªt
;

252 
size_t
 
Àn
 = 0;

254 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_øw_buf„r
–
p
, 
°¨t
,

255 (c⁄° *Ë
ãxt
, 
ãxt_Àn
 ) );

257 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_Àn
–
p
, 
°¨t
,Üen ) );

258 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_èg
–
p
, 
°¨t
, 
MBEDTLS_ASN1_IA5_STRING
 ) );

260 –(Ë
Àn
 );

261 
	}
}

263 
	$mbedés_a¢1_wrôe_bô°rög
–**
p
, *
°¨t
,

264 c⁄° *
buf
, 
size_t
 
bôs
 )

266 
ªt
;

267 
size_t
 
Àn
 = 0, 
size
;

269 
size
 = ( 
bôs
 / 8 ) + ( ( bits % 8 ) ? 1 : 0 );

273 if–*
p
 < 
°¨t
 || (
size_t
)–*∞- sèπ ) < 
size
 + 1 )

274 –
MBEDTLS_ERR_ASN1_BUF_TOO_SMALL
 );

276 
Àn
 = 
size
 + 1;

277 (*
p
Ë-
size
;

278 
	`mem˝y
–*
p
, 
buf
, 
size
 );

282 *--(*
p
Ë(Ë(
size
 * 8 - 
bôs
);

284 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_Àn
–
p
, 
°¨t
,Üen ) );

285 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_èg
–
p
, 
°¨t
, 
MBEDTLS_ASN1_BIT_STRING
 ) );

287 –(Ë
Àn
 );

288 
	}
}

290 
	$mbedés_a¢1_wrôe_o˘ë_°rög
–**
p
, *
°¨t
,

291 c⁄° *
buf
, 
size_t
 
size
 )

293 
ªt
;

294 
size_t
 
Àn
 = 0;

296 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_øw_buf„r
–
p
, 
°¨t
, 
buf
, 
size
 ) );

298 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_Àn
–
p
, 
°¨t
,Üen ) );

299 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_èg
–
p
, 
°¨t
, 
MBEDTLS_ASN1_OCTET_STRING
 ) );

301 –(Ë
Àn
 );

302 
	}
}

304 
mbedés_a¢1_«med_d©a
 *
	$mbedés_a¢1_°‹e_«med_d©a
–
mbedés_a¢1_«med_d©a
 **
hód
,

305 c⁄° *
oid
, 
size_t
 
oid_Àn
,

306 c⁄° *
vÆ
,

307 
size_t
 
vÆ_Àn
 )

309 
mbedés_a¢1_«med_d©a
 *
cur
;

311 if––
cur
 = 
	`mbedés_a¢1_föd_«med_d©a
–*
hód
, 
oid
, 
oid_Àn
 ) ) =
NULL
 )

315 if––
cur
 = 
	`mbedés_ˇŒoc
–1, (
mbedés_a¢1_«med_d©a
ËËË=
NULL
 )

316 –
NULL
 );

318 
cur
->
oid
.
Àn
 = 
oid_Àn
;

319 
cur
->
oid
.
p
 = 
	`mbedés_ˇŒoc
–1, 
oid_Àn
 );

320 if–
cur
->
oid
.
p
 =
NULL
 )

322 
	`mbedés_‰ì
–
cur
 );

323 –
NULL
 );

326 
	`mem˝y
–
cur
->
oid
.
p
, oid, 
oid_Àn
 );

328 
cur
->
vÆ
.
Àn
 = 
vÆ_Àn
;

329 
cur
->
vÆ
.
p
 = 
	`mbedés_ˇŒoc
–1, 
vÆ_Àn
 );

330 if–
cur
->
vÆ
.
p
 =
NULL
 )

332 
	`mbedés_‰ì
–
cur
->
oid
.
p
 );

333 
	`mbedés_‰ì
–
cur
 );

334 –
NULL
 );

337 
cur
->
√xt
 = *
hód
;

338 *
hód
 = 
cur
;

340 if–
cur
->
vÆ
.
Àn
 < 
vÆ_Àn
 )

347 *
p
 = 
	`mbedés_ˇŒoc
–1, 
vÆ_Àn
 );

348 if–
p
 =
NULL
 )

349 –
NULL
 );

351 
	`mbedés_‰ì
–
cur
->
vÆ
.
p
 );

352 
cur
->
vÆ
.
p
 =Ö;

353 
cur
->
vÆ
.
Àn
 = 
vÆ_Àn
;

356 if–
vÆ
 !
NULL
 )

357 
	`mem˝y
–
cur
->
vÆ
.
p
, vÆ, 
vÆ_Àn
 );

359 –
cur
 );

360 
	}
}

	@/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/base64.c

22 #i‡!
deföed
(
MBEDTLS_CONFIG_FILE
)

23 
	~"mbedés/c⁄fig.h
"

25 #ö˛udê
MBEDTLS_CONFIG_FILE


28 #i‡
deföed
(
MBEDTLS_BASE64_C
)

30 
	~"mbedés/ba£64.h
"

32 
	~<°döt.h
>

34 #i‡
deföed
(
MBEDTLS_SELF_TEST
)

35 
	~<°rög.h
>

36 #i‡
deföed
(
MBEDTLS_PLATFORM_C
)

37 
	~"mbedés/∂©f‹m.h
"

39 
	~<°dio.h
>

40 
	#mbedés_¥ötf
 
¥ötf


	)

44 c⁄° 
	gba£64_íc_m≠
[64] =

55 c⁄° 
	gba£64_dec_m≠
[128] =

72 
	#BASE64_SIZE_T_MAX
 ( (
size_t
Ë-1 )

	)

77 
	$mbedés_ba£64_ícode
–*
d°
, 
size_t
 
dÀn
, size_à*
ﬁí
,

78 c⁄° *
§c
, 
size_t
 
¶í
 )

80 
size_t
 
i
, 
n
;

81 
C1
, 
C2
, 
C3
;

82 *
p
;

84 if–
¶í
 == 0 )

86 *
ﬁí
 = 0;

90 
n
 = 
¶í
 / 3 + ( slen % 3 != 0 );

92 if–
n
 > ( 
BASE64_SIZE_T_MAX
 - 1 ) / 4 )

94 *
ﬁí
 = 
BASE64_SIZE_T_MAX
;

95 –
MBEDTLS_ERR_BASE64_BUFFER_TOO_SMALL
 );

98 
n
 *= 4;

100 if–
dÀn
 < 
n
 + 1 )

102 *
ﬁí
 = 
n
 + 1;

103 –
MBEDTLS_ERR_BASE64_BUFFER_TOO_SMALL
 );

106 
n
 = ( 
¶í
 / 3 ) * 3;

108  
i
 = 0, 
p
 = 
d°
; i < 
n
; i += 3 )

110 
C1
 = *
§c
++;

111 
C2
 = *
§c
++;

112 
C3
 = *
§c
++;

114 *
p
++ = 
ba£64_íc_m≠
[(
C1
 >> 2) & 0x3F];

115 *
p
++ = 
ba£64_íc_m≠
[(((
C1
 & 3Ë<< 4Ë+ (
C2
 >> 4)) & 0x3F];

116 *
p
++ = 
ba£64_íc_m≠
[(((
C2
 & 15Ë<< 2Ë+ (
C3
 >> 6)) & 0x3F];

117 *
p
++ = 
ba£64_íc_m≠
[
C3
 & 0x3F];

120 if–
i
 < 
¶í
 )

122 
C1
 = *
§c
++;

123 
C2
 = ( ( 
i
 + 1 ) < 
¶í
 ) ? *
§c
++ : 0;

125 *
p
++ = 
ba£64_íc_m≠
[(
C1
 >> 2) & 0x3F];

126 *
p
++ = 
ba£64_íc_m≠
[(((
C1
 & 3Ë<< 4Ë+ (
C2
 >> 4)) & 0x3F];

128 if––
i
 + 1 ) < 
¶í
 )

129 *
p
++ = 
ba£64_íc_m≠
[((
C2
 & 15) << 2) & 0x3F];

130 *
p
++ = '=';

132 *
p
++ = '=';

135 *
ﬁí
 = 
p
 - 
d°
;

136 *
p
 = 0;

139 
	}
}

144 
	$mbedés_ba£64_decode
–*
d°
, 
size_t
 
dÀn
, size_à*
ﬁí
,

145 c⁄° *
§c
, 
size_t
 
¶í
 )

147 
size_t
 
i
, 
n
;

148 
uöt32_t
 
j
, 
x
;

149 *
p
;

152  
i
 = 
n
 = 
j
 = 0; i < 
¶í
; i++ )

155 
x
 = 0;

156  
i
 < 
¶í
 && 
§c
[i] == ' ' )

158 ++
i
;

159 ++
x
;

163 if–
i
 =
¶í
 )

166 if––
¶í
 - 
i
 ) >= 2 &&

167 
§c
[
i
] == '\r' && src[i + 1] == '\n' )

170 if–
§c
[
i
] == '\n' )

174 if–
x
 != 0 )

175 –
MBEDTLS_ERR_BASE64_INVALID_CHARACTER
 );

177 if–
§c
[
i
] ='=' && ++
j
 > 2 )

178 –
MBEDTLS_ERR_BASE64_INVALID_CHARACTER
 );

180 if–
§c
[
i
] > 127 || 
ba£64_dec_m≠
[src[i]] == 127 )

181 –
MBEDTLS_ERR_BASE64_INVALID_CHARACTER
 );

183 if–
ba£64_dec_m≠
[
§c
[
i
]] < 64 && 
j
 != 0 )

184 –
MBEDTLS_ERR_BASE64_INVALID_CHARACTER
 );

186 
n
++;

189 if–
n
 == 0 )

191 *
ﬁí
 = 0;

195 
n
 = ( (Ç * 6 ) + 7 ) >> 3;

196 
n
 -
j
;

198 if–
d°
 =
NULL
 || 
dÀn
 < 
n
 )

200 *
ﬁí
 = 
n
;

201 –
MBEDTLS_ERR_BASE64_BUFFER_TOO_SMALL
 );

204  
j
 = 3, 
n
 = 
x
 = 0, 
p
 = 
d°
; 
i
 > 0; i--, 
§c
++ )

206 if–*
§c
 == '\r' || *src == '\n' || *src == ' ' )

209 
j
 -–
ba£64_dec_m≠
[*
§c
] == 64 );

210 
x
 = ( x << 6 ) | ( 
ba£64_dec_m≠
[*
§c
] & 0x3F );

212 if–++
n
 == 4 )

214 
n
 = 0;

215 if–
j
 > 0 ) *
p
++ = ()–
x
 >> 16 );

216 if–
j
 > 1 ) *
p
++ = ()–
x
 >> 8 );

217 if–
j
 > 2 ) *
p
++ = ()–
x
 );

221 *
ﬁí
 = 
p
 - 
d°
;

224 
	}
}

226 #i‡
deföed
(
MBEDTLS_SELF_TEST
)

228 c⁄° 
	gba£64_ã°_dec
[64] =

240 c⁄° 
	gba£64_ã°_íc
[] =

247 
	$mbedés_ba£64_£lf_ã°
–
vîbo£
 )

249 
size_t
 
Àn
;

250 c⁄° *
§c
;

251 
buf„r
[128];

253 if–
vîbo£
 != 0 )

254 
	`mbedés_¥ötf
( " Base64ÉncodingÅest: " );

256 
§c
 = 
ba£64_ã°_dec
;

258 if–
	`mbedés_ba£64_ícode
–
buf„r
, –buf„∏), &
Àn
, 
§c
, 64 ) != 0 ||

259 
	`memcmp
–
ba£64_ã°_íc
, 
buf„r
, 88 ) != 0 )

261 if–
vîbo£
 != 0 )

262 
	`mbedés_¥ötf
( "failed\n" );

267 if–
vîbo£
 != 0 )

268 
	`mbedés_¥ötf
( "passed\n Base64 decodingÅest: " );

270 
§c
 = 
ba£64_ã°_íc
;

272 if–
	`mbedés_ba£64_decode
–
buf„r
, –buf„∏), &
Àn
, 
§c
, 88 ) != 0 ||

273 
	`memcmp
–
ba£64_ã°_dec
, 
buf„r
, 64 ) != 0 )

275 if–
vîbo£
 != 0 )

276 
	`mbedés_¥ötf
( "failed\n" );

281 if–
vîbo£
 != 0 )

282 
	`mbedés_¥ötf
( "passed\n\n" );

285 
	}
}

	@/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/bignum.c

38 #i‡!
deföed
(
MBEDTLS_CONFIG_FILE
)

39 
	~"mbedés/c⁄fig.h
"

41 #ö˛udê
MBEDTLS_CONFIG_FILE


44 #i‡
deföed
(
MBEDTLS_BIGNUM_C
)

46 
	~"mbedés/bignum.h
"

47 
	~"mbedés/bn_mul.h
"

49 
	~<°rög.h
>

51 #i‡
deföed
(
MBEDTLS_PLATFORM_C
)

52 
	~"mbedés/∂©f‹m.h
"

54 
	~<°dio.h
>

55 
	~<°dlib.h
>

56 
	#mbedés_¥ötf
 
¥ötf


	)

57 
	#mbedés_ˇŒoc
 
ˇŒoc


	)

58 
	#mbedés_‰ì
 
‰ì


	)

62 
	$mbedés_zîoize
–*
v
, 
size_t
 
n
 ) {

63 vﬁ©ûê*
p
 = 
v
;  
n
-- ) *p++ = 0;

64 
	}
}

66 
	#ciL
 ((
mbedés_mpi_uöt
)Ë

	)

67 
	#biL
 (
ciL
 << 3Ë

	)

68 
	#biH
 (
ciL
 << 2Ë

	)

70 
	#MPI_SIZE_T_MAX
 ( (
size_t
Ë-1 )

	)

76 
	#BITS_TO_LIMBS
(
i
Ë–(iË/ 
biL
 + ( (iË% biL !0 ) )

	)

77 
	#CHARS_TO_LIMBS
(
i
Ë–(iË/ 
ciL
 + ( (iË% ciL !0 ) )

	)

82 
	$mbedés_mpi_öô
–
mbedés_mpi
 *
X
 )

84 if–
X
 =
NULL
 )

87 
X
->
s
 = 1;

88 
X
->
n
 = 0;

89 
X
->
p
 = 
NULL
;

90 
	}
}

95 
	$mbedés_mpi_‰ì
–
mbedés_mpi
 *
X
 )

97 if–
X
 =
NULL
 )

100 if–
X
->
p
 !
NULL
 )

102 
	`mbedés_zîoize
–
X
->
p
, X->
n
 * 
ciL
 );

103 
	`mbedés_‰ì
–
X
->
p
 );

106 
X
->
s
 = 1;

107 
X
->
n
 = 0;

108 
X
->
p
 = 
NULL
;

109 
	}
}

114 
	$mbedés_mpi_grow
–
mbedés_mpi
 *
X
, 
size_t
 
nblimbs
 )

116 
mbedés_mpi_uöt
 *
p
;

118 if–
nblimbs
 > 
MBEDTLS_MPI_MAX_LIMBS
 )

119 –
MBEDTLS_ERR_MPI_ALLOC_FAILED
 );

121 if–
X
->
n
 < 
nblimbs
 )

123 if––
p
 = 
	`mbedés_ˇŒoc
–
nblimbs
, 
ciL
 ) ) =
NULL
 )

124 –
MBEDTLS_ERR_MPI_ALLOC_FAILED
 );

126 if–
X
->
p
 !
NULL
 )

128 
	`mem˝y
–
p
, 
X
->p, X->
n
 * 
ciL
 );

129 
	`mbedés_zîoize
–
X
->
p
, X->
n
 * 
ciL
 );

130 
	`mbedés_‰ì
–
X
->
p
 );

133 
X
->
n
 = 
nblimbs
;

134 
X
->
p
 =Ö;

138 
	}
}

144 
	$mbedés_mpi_shrök
–
mbedés_mpi
 *
X
, 
size_t
 
nblimbs
 )

146 
mbedés_mpi_uöt
 *
p
;

147 
size_t
 
i
;

150 if–
X
->
n
 <
nblimbs
 )

151 –
	`mbedés_mpi_grow
–
X
, 
nblimbs
 ) );

153  
i
 = 
X
->
n
 - 1; i > 0; i-- )

154 if–
X
->
p
[
i
] != 0 )

156 
i
++;

158 if–
i
 < 
nblimbs
 )

159 
i
 = 
nblimbs
;

161 if––
p
 = 
	`mbedés_ˇŒoc
–
i
, 
ciL
 ) ) =
NULL
 )

162 –
MBEDTLS_ERR_MPI_ALLOC_FAILED
 );

164 if–
X
->
p
 !
NULL
 )

166 
	`mem˝y
–
p
, 
X
->p, 
i
 * 
ciL
 );

167 
	`mbedés_zîoize
–
X
->
p
, X->
n
 * 
ciL
 );

168 
	`mbedés_‰ì
–
X
->
p
 );

171 
X
->
n
 = 
i
;

172 
X
->
p
 =Ö;

175 
	}
}

180 
	$mbedés_mpi_c›y
–
mbedés_mpi
 *
X
, c⁄° mbedés_mpò*
Y
 )

182 
ªt
;

183 
size_t
 
i
;

185 if–
X
 =
Y
 )

188 if–
Y
->
p
 =
NULL
 )

190 
	`mbedés_mpi_‰ì
–
X
 );

194  
i
 = 
Y
->
n
 - 1; i > 0; i-- )

195 if–
Y
->
p
[
i
] != 0 )

197 
i
++;

199 
X
->
s
 = 
Y
->s;

201 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_grow
–
X
, 
i
 ) );

203 
	`mem£t
–
X
->
p
, 0, X->
n
 * 
ciL
 );

204 
	`mem˝y
–
X
->
p
, 
Y
->p, 
i
 * 
ciL
 );

206 
˛ónup
:

208 –
ªt
 );

209 
	}
}

214 
	$mbedés_mpi_sw≠
–
mbedés_mpi
 *
X
, mbedés_mpò*
Y
 )

216 
mbedés_mpi
 
T
;

218 
	`mem˝y
–&
T
, 
X
, –
mbedés_mpi
 ) );

219 
	`mem˝y
–
X
, 
Y
, –
mbedés_mpi
 ) );

220 
	`mem˝y
–
Y
, &
T
, –
mbedés_mpi
 ) );

221 
	}
}

228 
	$mbedés_mpi_ß„_c⁄d_assign
–
mbedés_mpi
 *
X
, c⁄° mbedés_mpò*
Y
, 
assign
 )

230 
ªt
 = 0;

231 
size_t
 
i
;

234 
assign
 = (assign | ()-assign) >> 7;

236 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_grow
–
X
, 
Y
->
n
 ) );

238 
X
->
s
 = X->†* ( 1 - 
assign
 ) + 
Y
->s *ássign;

240  
i
 = 0; i < 
Y
->
n
; i++ )

241 
X
->
p
[
i
] = X->p[i] * ( 1 - 
assign
 ) + 
Y
->p[i] *ássign;

243  ; 
i
 < 
X
->
n
; i++ )

244 
X
->
p
[
i
] *–1 - 
assign
 );

246 
˛ónup
:

247 –
ªt
 );

248 
	}
}

256 
	$mbedés_mpi_ß„_c⁄d_sw≠
–
mbedés_mpi
 *
X
, mbedés_mpò*
Y
, 
sw≠
 )

258 
ªt
, 
s
;

259 
size_t
 
i
;

260 
mbedés_mpi_uöt
 
tmp
;

262 if–
X
 =
Y
 )

266 
sw≠
 = (swap | ()-swap) >> 7;

268 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_grow
–
X
, 
Y
->
n
 ) );

269 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_grow
–
Y
, 
X
->
n
 ) );

271 
s
 = 
X
->s;

272 
X
->
s
 = X->†* ( 1 - 
sw≠
 ) + 
Y
->s * swap;

273 
Y
->
s
 = Y->†* ( 1 - 
sw≠
 ) + s * swap;

276  
i
 = 0; i < 
X
->
n
; i++ )

278 
tmp
 = 
X
->
p
[
i
];

279 
X
->
p
[
i
] = X->p[i] * ( 1 - 
sw≠
 ) + 
Y
->p[i] * swap;

280 
Y
->
p
[
i
] = Y->p[i] * ( 1 - 
sw≠
 ) + 
tmp
 * swap;

283 
˛ónup
:

284 –
ªt
 );

285 
	}
}

290 
	$mbedés_mpi_l£t
–
mbedés_mpi
 *
X
, 
mbedés_mpi_söt
 
z
 )

292 
ªt
;

294 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_grow
–
X
, 1 ) );

295 
	`mem£t
–
X
->
p
, 0, X->
n
 * 
ciL
 );

297 
X
->
p
[0] = ( 
z
 < 0 ) ? -z : z;

298 
X
->
s
 = ( 
z
 < 0 ) ? -1 : 1;

300 
˛ónup
:

302 –
ªt
 );

303 
	}
}

308 
	$mbedés_mpi_gë_bô
–c⁄° 
mbedés_mpi
 *
X
, 
size_t
 
pos
 )

310 if–
X
->
n
 * 
biL
 <
pos
 )

313 ––
X
->
p
[
pos
 / 
biL
] >> (Öos % biL ) ) & 0x01 );

314 
	}
}

319 
	$mbedés_mpi_£t_bô
–
mbedés_mpi
 *
X
, 
size_t
 
pos
, 
vÆ
 )

321 
ªt
 = 0;

322 
size_t
 
off
 = 
pos
 / 
biL
;

323 
size_t
 
idx
 = 
pos
 % 
biL
;

325 if–
vÆ
 != 0 && val != 1 )

326 –
MBEDTLS_ERR_MPI_BAD_INPUT_DATA
 );

328 if–
X
->
n
 * 
biL
 <
pos
 )

330 if–
vÆ
 == 0 )

333 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_grow
–
X
, 
off
 + 1 ) );

336 
X
->
p
[
off
] &~–(
mbedés_mpi_uöt
Ë0x01 << 
idx
 );

337 
X
->
p
[
off
] |(
mbedés_mpi_uöt
Ë
vÆ
 << 
idx
;

339 
˛ónup
:

341 –
ªt
 );

342 
	}
}

347 
size_t
 
	$mbedés_mpi_lsb
–c⁄° 
mbedés_mpi
 *
X
 )

349 
size_t
 
i
, 
j
, 
cou¡
 = 0;

351  
i
 = 0; i < 
X
->
n
; i++ )

352  
j
 = 0; j < 
biL
; j++, 
cou¡
++ )

353 if–––
X
->
p
[
i
] >> 
j
 ) & 1 ) != 0 )

354 –
cou¡
 );

357 
	}
}

362 
size_t
 
	$mbedés_˛z
–c⁄° 
mbedés_mpi_uöt
 
x
 )

364 
size_t
 
j
;

365 
mbedés_mpi_uöt
 
mask
 = (mbedés_mpi_uötË1 << (
biL
 - 1);

367  
j
 = 0; j < 
biL
; j++ )

369 if–
x
 & 
mask
 ) ;

371 
mask
 >>= 1;

374  
j
;

375 
	}
}

380 
size_t
 
	$mbedés_mpi_bôÀn
–c⁄° 
mbedés_mpi
 *
X
 )

382 
size_t
 
i
, 
j
;

384 if–
X
->
n
 == 0 )

387  
i
 = 
X
->
n
 - 1; i > 0; i-- )

388 if–
X
->
p
[
i
] != 0 )

391 
j
 = 
biL
 - 
	`mbedés_˛z
–
X
->
p
[
i
] );

393 ––
i
 * 
biL
 ) + 
j
 );

394 
	}
}

399 
size_t
 
	$mbedés_mpi_size
–c⁄° 
mbedés_mpi
 *
X
 )

401 ––
	`mbedés_mpi_bôÀn
–
X
 ) + 7 ) >> 3 );

402 
	}
}

407 
	$mpi_gë_digô
–
mbedés_mpi_uöt
 *
d
, 
ødix
, 
c
 )

409 *
d
 = 255;

411 if–
c
 >0x30 && c <0x39 ) *
d
 = c - 0x30;

412 if–
c
 >0x41 && c <0x46 ) *
d
 = c - 0x37;

413 if–
c
 >0x61 && c <0x66 ) *
d
 = c - 0x57;

415 if–*
d
 >(
mbedés_mpi_uöt
Ë
ødix
 )

416 –
MBEDTLS_ERR_MPI_INVALID_CHARACTER
 );

419 
	}
}

424 
	$mbedés_mpi_ªad_°rög
–
mbedés_mpi
 *
X
, 
ødix
, c⁄° *
s
 )

426 
ªt
;

427 
size_t
 
i
, 
j
, 
¶í
, 
n
;

428 
mbedés_mpi_uöt
 
d
;

429 
mbedés_mpi
 
T
;

431 if–
ødix
 < 2 ||Ñadix > 16 )

432 –
MBEDTLS_ERR_MPI_BAD_INPUT_DATA
 );

434 
	`mbedés_mpi_öô
–&
T
 );

436 
¶í
 = 
	`°æí
–
s
 );

438 if–
ødix
 == 16 )

440 if–
¶í
 > 
MPI_SIZE_T_MAX
 >> 2 )

441 –
MBEDTLS_ERR_MPI_BAD_INPUT_DATA
 );

443 
n
 = 
	`BITS_TO_LIMBS
–
¶í
 << 2 );

445 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_grow
–
X
, 
n
 ) );

446 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_l£t
–
X
, 0 ) );

448  
i
 = 
¶í
, 
j
 = 0; i > 0; i--, j++ )

450 if–
i
 =1 && 
s
[i - 1] == '-' )

452 
X
->
s
 = -1;

456 
	`MBEDTLS_MPI_CHK
–
	`mpi_gë_digô
–&
d
, 
ødix
, 
s
[
i
 - 1] ) );

457 
X
->
p
[
j
 / ( 2 * 
ciL
 )] |
d
 << ( ( j % ( 2 * ciL ) ) << 2 );

462 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_l£t
–
X
, 0 ) );

464  
i
 = 0; i < 
¶í
; i++ )

466 if–
i
 =0 && 
s
[i] == '-' )

468 
X
->
s
 = -1;

472 
	`MBEDTLS_MPI_CHK
–
	`mpi_gë_digô
–&
d
, 
ødix
, 
s
[
i
] ) );

473 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_mul_öt
–&
T
, 
X
, 
ødix
 ) );

475 if–
X
->
s
 == 1 )

477 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_add_öt
–
X
, &
T
, 
d
 ) );

481 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_sub_öt
–
X
, &
T
, 
d
 ) );

486 
˛ónup
:

488 
	`mbedés_mpi_‰ì
–&
T
 );

490 –
ªt
 );

491 
	}
}

496 
	$mpi_wrôe_hÕ
–
mbedés_mpi
 *
X
, 
ødix
, **
p
 )

498 
ªt
;

499 
mbedés_mpi_uöt
 
r
;

501 if–
ødix
 < 2 ||Ñadix > 16 )

502 –
MBEDTLS_ERR_MPI_BAD_INPUT_DATA
 );

504 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_mod_öt
–&
r
, 
X
, 
ødix
 ) );

505 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_div_öt
–
X
, 
NULL
, X, 
ødix
 ) );

507 if–
	`mbedés_mpi_cmp_öt
–
X
, 0 ) != 0 )

508 
	`MBEDTLS_MPI_CHK
–
	`mpi_wrôe_hÕ
–
X
, 
ødix
, 
p
 ) );

510 if–
r
 < 10 )

511 *(*
p
)++ = ()–
r
 + 0x30 );

513 *(*
p
)++ = ()–
r
 + 0x37 );

515 
˛ónup
:

517 –
ªt
 );

518 
	}
}

523 
	$mbedés_mpi_wrôe_°rög
–c⁄° 
mbedés_mpi
 *
X
, 
ødix
,

524 *
buf
, 
size_t
 
buÊí
, size_à*
ﬁí
 )

526 
ªt
 = 0;

527 
size_t
 
n
;

528 *
p
;

529 
mbedés_mpi
 
T
;

531 if–
ødix
 < 2 ||Ñadix > 16 )

532 –
MBEDTLS_ERR_MPI_BAD_INPUT_DATA
 );

534 
n
 = 
	`mbedés_mpi_bôÀn
–
X
 );

535 if–
ødix
 >4 ) 
n
 >>= 1;

536 if–
ødix
 >16 ) 
n
 >>= 1;

537 
n
 += 3;

539 if–
buÊí
 < 
n
 )

541 *
ﬁí
 = 
n
;

542 –
MBEDTLS_ERR_MPI_BUFFER_TOO_SMALL
 );

545 
p
 = 
buf
;

546 
	`mbedés_mpi_öô
–&
T
 );

548 if–
X
->
s
 == -1 )

549 *
p
++ = '-';

551 if–
ødix
 == 16 )

553 
c
;

554 
size_t
 
i
, 
j
, 
k
;

556  
i
 = 
X
->
n
, 
k
 = 0; i > 0; i-- )

558  
j
 = 
ciL
; j > 0; j-- )

560 
c
 = ( 
X
->
p
[
i
 - 1] >> ( ( 
j
 - 1 ) << 3) ) & 0xFF;

562 if–
c
 =0 && 
k
 =0 && ( 
i
 + 
j
 ) != 2 )

565 *(
p
++Ë"0123456789ABCDEF" [
c
 / 16];

566 *(
p
++Ë"0123456789ABCDEF" [
c
 % 16];

567 
k
 = 1;

573 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_c›y
–&
T
, 
X
 ) );

575 if–
T
.
s
 == -1 )

576 
T
.
s
 = 1;

578 
	`MBEDTLS_MPI_CHK
–
	`mpi_wrôe_hÕ
–&
T
, 
ødix
, &
p
 ) );

581 *
p
++ = '\0';

582 *
ﬁí
 = 
p
 - 
buf
;

584 
˛ónup
:

586 
	`mbedés_mpi_‰ì
–&
T
 );

588 –
ªt
 );

589 
	}
}

591 #i‡
deföed
(
MBEDTLS_FS_IO
)

595 
	$mbedés_mpi_ªad_fûe
–
mbedés_mpi
 *
X
, 
ødix
, 
FILE
 *
fö
 )

597 
mbedés_mpi_uöt
 
d
;

598 
size_t
 
¶í
;

599 *
p
;

604 
s
[ 
MBEDTLS_MPI_RW_BUFFER_SIZE
 ];

606 
	`mem£t
–
s
, 0, ( s ) );

607 if–
	`fgës
–
s
, –†Ë- 1, 
fö
 ) =
NULL
 )

608 –
MBEDTLS_ERR_MPI_FILE_IO_ERROR
 );

610 
¶í
 = 
	`°æí
–
s
 );

611 if–
¶í
 =–
s
 ) - 2 )

612 –
MBEDTLS_ERR_MPI_BUFFER_TOO_SMALL
 );

614 if–
s
[
¶í
 - 1] == '\n' ) { slen--; s[slen] = '\0'; }

615 if–
s
[
¶í
 - 1] == '\r' ) { slen--; s[slen] = '\0'; }

617 
p
 = 
s
 + 
¶í
;

618  --
p
 >
s
 )

619 if–
	`mpi_gë_digô
–&
d
, 
ødix
, *
p
 ) != 0 )

622 –
	`mbedés_mpi_ªad_°rög
–
X
, 
ødix
, 
p
 + 1 ) );

623 
	}
}

628 
	$mbedés_mpi_wrôe_fûe
–c⁄° *
p
, c⁄° 
mbedés_mpi
 *
X
, 
ødix
, 
FILE
 *
fout
 )

630 
ªt
;

631 
size_t
 
n
, 
¶í
, 
∂í
;

636 
s
[ 
MBEDTLS_MPI_RW_BUFFER_SIZE
 ];

638 
	`mem£t
–
s
, 0, ( s ) );

640 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_wrôe_°rög
–
X
, 
ødix
, 
s
, –†Ë- 2, &
n
 ) );

642 if–
p
 =
NULL
 )Ö = "";

644 
∂í
 = 
	`°æí
–
p
 );

645 
¶í
 = 
	`°æí
–
s
 );

646 
s
[
¶í
++] = '\r';

647 
s
[
¶í
++] = '\n';

649 if–
fout
 !
NULL
 )

651 if–
	`fwrôe
–
p
, 1, 
∂í
, 
fout
 ) !=Ölen ||

652 
	`fwrôe
–
s
, 1, 
¶í
, 
fout
 ) != slen )

653 –
MBEDTLS_ERR_MPI_FILE_IO_ERROR
 );

656 
	`mbedés_¥ötf
–"%s%s", 
p
, 
s
 );

658 
˛ónup
:

660 –
ªt
 );

661 
	}
}

667 
	$mbedés_mpi_ªad_bö¨y
–
mbedés_mpi
 *
X
, c⁄° *
buf
, 
size_t
 
buÊí
 )

669 
ªt
;

670 
size_t
 
i
, 
j
, 
n
;

672  
n
 = 0;Ç < 
buÊí
;Ç++ )

673 if–
buf
[
n
] != 0 )

676 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_grow
–
X
, 
	`CHARS_TO_LIMBS
–
buÊí
 - 
n
 ) ) );

677 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_l£t
–
X
, 0 ) );

679  
i
 = 
buÊí
, 
j
 = 0; i > 
n
; i--, j++ )

680 
X
->
p
[
j
 / 
ciL
] |((
mbedés_mpi_uöt
Ë
buf
[
i
 - 1]) << ((j % ciL) << 3);

682 
˛ónup
:

684 –
ªt
 );

685 
	}
}

690 
	$mbedés_mpi_wrôe_bö¨y
–c⁄° 
mbedés_mpi
 *
X
, *
buf
, 
size_t
 
buÊí
 )

692 
size_t
 
i
, 
j
, 
n
;

694 
n
 = 
	`mbedés_mpi_size
–
X
 );

696 if–
buÊí
 < 
n
 )

697 –
MBEDTLS_ERR_MPI_BUFFER_TOO_SMALL
 );

699 
	`mem£t
–
buf
, 0, 
buÊí
 );

701  
i
 = 
buÊí
 - 1, 
j
 = 0; 
n
 > 0; i--, j++,Ç-- )

702 
buf
[
i
] = ()–
X
->
p
[
j
 / 
ciL
] >> ((j % ciL) << 3) );

705 
	}
}

710 
	$mbedés_mpi_shi·_l
–
mbedés_mpi
 *
X
, 
size_t
 
cou¡
 )

712 
ªt
;

713 
size_t
 
i
, 
v0
, 
t1
;

714 
mbedés_mpi_uöt
 
r0
 = 0, 
r1
;

716 
v0
 = 
cou¡
 / (
biL
 );

717 
t1
 = 
cou¡
 & (
biL
 - 1);

719 
i
 = 
	`mbedés_mpi_bôÀn
–
X
 ) + 
cou¡
;

721 if–
X
->
n
 * 
biL
 < 
i
 )

722 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_grow
–
X
, 
	`BITS_TO_LIMBS
–
i
 ) ) );

724 
ªt
 = 0;

729 if–
v0
 > 0 )

731  
i
 = 
X
->
n
; i > 
v0
; i-- )

732 
X
->
p
[
i
 - 1] = X->p[ò- 
v0
 - 1];

734  ; 
i
 > 0; i-- )

735 
X
->
p
[
i
 - 1] = 0;

741 if–
t1
 > 0 )

743  
i
 = 
v0
; i < 
X
->
n
; i++ )

745 
r1
 = 
X
->
p
[
i
] >> (
biL
 - 
t1
);

746 
X
->
p
[
i
] <<
t1
;

747 
X
->
p
[
i
] |
r0
;

748 
r0
 = 
r1
;

752 
˛ónup
:

754 –
ªt
 );

755 
	}
}

760 
	$mbedés_mpi_shi·_r
–
mbedés_mpi
 *
X
, 
size_t
 
cou¡
 )

762 
size_t
 
i
, 
v0
, 
v1
;

763 
mbedés_mpi_uöt
 
r0
 = 0, 
r1
;

765 
v0
 = 
cou¡
 / 
biL
;

766 
v1
 = 
cou¡
 & (
biL
 - 1);

768 if–
v0
 > 
X
->
n
 || ( v0 =X->¿&& 
v1
 > 0 ) )

769  
	`mbedés_mpi_l£t
–
X
, 0 );

774 if–
v0
 > 0 )

776  
i
 = 0; i < 
X
->
n
 - 
v0
; i++ )

777 
X
->
p
[
i
] = X->p[ò+ 
v0
];

779  ; 
i
 < 
X
->
n
; i++ )

780 
X
->
p
[
i
] = 0;

786 if–
v1
 > 0 )

788  
i
 = 
X
->
n
; i > 0; i-- )

790 
r1
 = 
X
->
p
[
i
 - 1] << (
biL
 - 
v1
);

791 
X
->
p
[
i
 - 1] >>
v1
;

792 
X
->
p
[
i
 - 1] |
r0
;

793 
r0
 = 
r1
;

798 
	}
}

803 
	$mbedés_mpi_cmp_abs
–c⁄° 
mbedés_mpi
 *
X
, c⁄° mbedés_mpò*
Y
 )

805 
size_t
 
i
, 
j
;

807  
i
 = 
X
->
n
; i > 0; i-- )

808 if–
X
->
p
[
i
 - 1] != 0 )

811  
j
 = 
Y
->
n
; j > 0; j-- )

812 if–
Y
->
p
[
j
 - 1] != 0 )

815 if–
i
 =0 && 
j
 == 0 )

818 if–
i
 > 
j
 ) ( 1 );

819 if–
j
 > 
i
 ) ( -1 );

821  ; 
i
 > 0; i-- )

823 if–
X
->
p
[
i
 - 1] > 
Y
->p[i - 1] ) ( 1 );

824 if–
X
->
p
[
i
 - 1] < 
Y
->p[i - 1] ) ( -1 );

828 
	}
}

833 
	$mbedés_mpi_cmp_mpi
–c⁄° 
mbedés_mpi
 *
X
, c⁄° mbedés_mpò*
Y
 )

835 
size_t
 
i
, 
j
;

837  
i
 = 
X
->
n
; i > 0; i-- )

838 if–
X
->
p
[
i
 - 1] != 0 )

841  
j
 = 
Y
->
n
; j > 0; j-- )

842 if–
Y
->
p
[
j
 - 1] != 0 )

845 if–
i
 =0 && 
j
 == 0 )

848 if–
i
 > 
j
 ) –
X
->
s
 );

849 if–
j
 > 
i
 ) –-
Y
->
s
 );

851 if–
X
->
s
 > 0 && 
Y
->s < 0 ) ( 1 );

852 if–
Y
->
s
 > 0 && 
X
->s < 0 ) ( -1 );

854  ; 
i
 > 0; i-- )

856 if–
X
->
p
[
i
 - 1] > 
Y
->p[ò- 1] ) –X->
s
 );

857 if–
X
->
p
[
i
 - 1] < 
Y
->p[ò- 1] ) –-X->
s
 );

861 
	}
}

866 
	$mbedés_mpi_cmp_öt
–c⁄° 
mbedés_mpi
 *
X
, 
mbedés_mpi_söt
 
z
 )

868 
mbedés_mpi
 
Y
;

869 
mbedés_mpi_uöt
 
p
[1];

871 *
p
 = ( 
z
 < 0 ) ? -z : z;

872 
Y
.
s
 = ( 
z
 < 0 ) ? -1 : 1;

873 
Y
.
n
 = 1;

874 
Y
.
p
 =Ö;

876 –
	`mbedés_mpi_cmp_mpi
–
X
, &
Y
 ) );

877 
	}
}

882 
	$mbedés_mpi_add_abs
–
mbedés_mpi
 *
X
, c⁄° mbedés_mpò*
A
, c⁄° mbedés_mpò*
B
 )

884 
ªt
;

885 
size_t
 
i
, 
j
;

886 
mbedés_mpi_uöt
 *
o
, *
p
, 
c
, 
tmp
;

888 if–
X
 =
B
 )

890 c⁄° 
mbedés_mpi
 *
T
 = 
A
; A = 
X
; 
B
 = T;

893 if–
X
 !
A
 )

894 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_c›y
–
X
, 
A
 ) );

899 
X
->
s
 = 1;

901  
j
 = 
B
->
n
; j > 0; j-- )

902 if–
B
->
p
[
j
 - 1] != 0 )

905 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_grow
–
X
, 
j
 ) );

907 
o
 = 
B
->
p
;Ö = 
X
->p; 
c
 = 0;

912  
i
 = 0; i < 
j
; i++, 
o
++, 
p
++ )

914 
tmp
*
o
;

915 *
p
 +
c
; c = ( *p < c );

916 *
p
 +
tmp
; 
c
 += ( *p <Åmp );

919  
c
 != 0 )

921 if–
i
 >
X
->
n
 )

923 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_grow
–
X
, 
i
 + 1 ) );

924 
p
 = 
X
->∞+ 
i
;

927 *
p
 +
c
; c = ( *∞< c ); 
i
++;Ö++;

930 
˛ónup
:

932 –
ªt
 );

933 
	}
}

938 
	$mpi_sub_hÕ
–
size_t
 
n
, 
mbedés_mpi_uöt
 *
s
, mbedés_mpi_uöà*
d
 )

940 
size_t
 
i
;

941 
mbedés_mpi_uöt
 
c
, 
z
;

943  
i
 = 
c
 = 0; i < 
n
; i++, 
s
++, 
d
++ )

945 
z
 = ( *
d
 < 
c
 ); *d -= c;

946 
c
 = ( *
d
 < *
s
 ) + 
z
; *d -= *s;

949  
c
 != 0 )

951 
z
 = ( *
d
 < 
c
 ); *d -= c;

952 
c
 = 
z
; 
i
++; 
d
++;

954 
	}
}

959 
	$mbedés_mpi_sub_abs
–
mbedés_mpi
 *
X
, c⁄° mbedés_mpò*
A
, c⁄° mbedés_mpò*
B
 )

961 
mbedés_mpi
 
TB
;

962 
ªt
;

963 
size_t
 
n
;

965 if–
	`mbedés_mpi_cmp_abs
–
A
, 
B
 ) < 0 )

966 –
MBEDTLS_ERR_MPI_NEGATIVE_VALUE
 );

968 
	`mbedés_mpi_öô
–&
TB
 );

970 if–
X
 =
B
 )

972 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_c›y
–&
TB
, 
B
 ) );

973 
B
 = &
TB
;

976 if–
X
 !
A
 )

977 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_c›y
–
X
, 
A
 ) );

982 
X
->
s
 = 1;

984 
ªt
 = 0;

986  
n
 = 
B
->n;Ç > 0;Ç-- )

987 if–
B
->
p
[
n
 - 1] != 0 )

990 
	`mpi_sub_hÕ
–
n
, 
B
->
p
, 
X
->p );

992 
˛ónup
:

994 
	`mbedés_mpi_‰ì
–&
TB
 );

996 –
ªt
 );

997 
	}
}

1002 
	$mbedés_mpi_add_mpi
–
mbedés_mpi
 *
X
, c⁄° mbedés_mpò*
A
, c⁄° mbedés_mpò*
B
 )

1004 
ªt
, 
s
 = 
A
->s;

1006 if–
A
->
s
 * 
B
->s < 0 )

1008 if–
	`mbedés_mpi_cmp_abs
–
A
, 
B
 ) >= 0 )

1010 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_sub_abs
–
X
, 
A
, 
B
 ) );

1011 
X
->
s
 = s;

1015 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_sub_abs
–
X
, 
B
, 
A
 ) );

1016 
X
->
s
 = -s;

1021 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_add_abs
–
X
, 
A
, 
B
 ) );

1022 
X
->
s
 = s;

1025 
˛ónup
:

1027 –
ªt
 );

1028 
	}
}

1033 
	$mbedés_mpi_sub_mpi
–
mbedés_mpi
 *
X
, c⁄° mbedés_mpò*
A
, c⁄° mbedés_mpò*
B
 )

1035 
ªt
, 
s
 = 
A
->s;

1037 if–
A
->
s
 * 
B
->s > 0 )

1039 if–
	`mbedés_mpi_cmp_abs
–
A
, 
B
 ) >= 0 )

1041 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_sub_abs
–
X
, 
A
, 
B
 ) );

1042 
X
->
s
 = s;

1046 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_sub_abs
–
X
, 
B
, 
A
 ) );

1047 
X
->
s
 = -s;

1052 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_add_abs
–
X
, 
A
, 
B
 ) );

1053 
X
->
s
 = s;

1056 
˛ónup
:

1058 –
ªt
 );

1059 
	}
}

1064 
	$mbedés_mpi_add_öt
–
mbedés_mpi
 *
X
, c⁄° mbedés_mpò*
A
, 
mbedés_mpi_söt
 
b
 )

1066 
mbedés_mpi
 
_B
;

1067 
mbedés_mpi_uöt
 
p
[1];

1069 
p
[0] = ( 
b
 < 0 ) ? -b : b;

1070 
_B
.
s
 = ( 
b
 < 0 ) ? -1 : 1;

1071 
_B
.
n
 = 1;

1072 
_B
.
p
 =Ö;

1074 –
	`mbedés_mpi_add_mpi
–
X
, 
A
, &
_B
 ) );

1075 
	}
}

1080 
	$mbedés_mpi_sub_öt
–
mbedés_mpi
 *
X
, c⁄° mbedés_mpò*
A
, 
mbedés_mpi_söt
 
b
 )

1082 
mbedés_mpi
 
_B
;

1083 
mbedés_mpi_uöt
 
p
[1];

1085 
p
[0] = ( 
b
 < 0 ) ? -b : b;

1086 
_B
.
s
 = ( 
b
 < 0 ) ? -1 : 1;

1087 
_B
.
n
 = 1;

1088 
_B
.
p
 =Ö;

1090 –
	`mbedés_mpi_sub_mpi
–
X
, 
A
, &
_B
 ) );

1091 
	}
}

1097 #i‡
deföed
(
__APPLE__
Ë&& deföed(
__¨m__
)

1102 
__©åibuã__
 ((
noölöe
))

1104 
	$mpi_mul_hÕ
–
size_t
 
i
, 
mbedés_mpi_uöt
 *
s
, mbedés_mpi_uöà*
d
, mbedés_mpi_uöà
b
 )

1106 
mbedés_mpi_uöt
 
c
 = 0, 
t
 = 0;

1108 #i‡
	`deföed
(
MULADDC_HUIT
)

1109  ; 
i
 >= 8; i -= 8 )

1111 
MULADDC_INIT


1112 
MULADDC_HUIT


1113 
MULADDC_STOP


1116  ; 
i
 > 0; i-- )

1118 
MULADDC_INIT


1119 
MULADDC_CORE


1120 
MULADDC_STOP


1123  ; 
i
 >= 16; i -= 16 )

1125 
MULADDC_INIT


1126 
MULADDC_CORE
 MULADDC_CORE

1127 
MULADDC_CORE
 MULADDC_CORE

1128 
MULADDC_CORE
 MULADDC_CORE

1129 
MULADDC_CORE
 MULADDC_CORE

1131 
MULADDC_CORE
 MULADDC_CORE

1132 
MULADDC_CORE
 MULADDC_CORE

1133 
MULADDC_CORE
 MULADDC_CORE

1134 
MULADDC_CORE
 MULADDC_CORE

1135 
MULADDC_STOP


1138  ; 
i
 >= 8; i -= 8 )

1140 
MULADDC_INIT


1141 
MULADDC_CORE
 MULADDC_CORE

1142 
MULADDC_CORE
 MULADDC_CORE

1144 
MULADDC_CORE
 MULADDC_CORE

1145 
MULADDC_CORE
 MULADDC_CORE

1146 
MULADDC_STOP


1149  ; 
i
 > 0; i-- )

1151 
MULADDC_INIT


1152 
MULADDC_CORE


1153 
MULADDC_STOP


1157 
t
++;

1160 *
d
 +
c
; c = ( *d < c ); d++;

1162  
c
 != 0 );

1163 
	}
}

1168 
	$mbedés_mpi_mul_mpi
–
mbedés_mpi
 *
X
, c⁄° mbedés_mpò*
A
, c⁄° mbedés_mpò*
B
 )

1170 
ªt
;

1171 
size_t
 
i
, 
j
;

1172 
mbedés_mpi
 
TA
, 
TB
;

1174 
	`mbedés_mpi_öô
–&
TA
 ); mbedés_mpi_öô–&
TB
 );

1176 if–
X
 =
A
 ) { 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_c›y
–&
TA
, A ) ); A = &TA; }

1177 if–
X
 =
B
 ) { 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_c›y
–&
TB
, B ) ); B = &TB; }

1179  
i
 = 
A
->
n
; i > 0; i-- )

1180 if–
A
->
p
[
i
 - 1] != 0 )

1183  
j
 = 
B
->
n
; j > 0; j-- )

1184 if–
B
->
p
[
j
 - 1] != 0 )

1187 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_grow
–
X
, 
i
 + 
j
 ) );

1188 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_l£t
–
X
, 0 ) );

1190  
i
++; 
j
 > 0; j-- )

1191 
	`mpi_mul_hÕ
–
i
 - 1, 
A
->
p
, 
X
->∞+ 
j
 - 1, 
B
->p[j - 1] );

1193 
X
->
s
 = 
A
->†* 
B
->s;

1195 
˛ónup
:

1197 
	`mbedés_mpi_‰ì
–&
TB
 ); mbedés_mpi_‰ì–&
TA
 );

1199 –
ªt
 );

1200 
	}
}

1205 
	$mbedés_mpi_mul_öt
–
mbedés_mpi
 *
X
, c⁄° mbedés_mpò*
A
, 
mbedés_mpi_uöt
 
b
 )

1207 
mbedés_mpi
 
_B
;

1208 
mbedés_mpi_uöt
 
p
[1];

1210 
_B
.
s
 = 1;

1211 
_B
.
n
 = 1;

1212 
_B
.
p
 =Ö;

1213 
p
[0] = 
b
;

1215 –
	`mbedés_mpi_mul_mpi
–
X
, 
A
, &
_B
 ) );

1216 
	}
}

1222 
mbedés_mpi_uöt
 
	$mbedés_öt_div_öt
–
mbedés_mpi_uöt
 
u1
,

1223 
mbedés_mpi_uöt
 
u0
, mbedés_mpi_uöà
d
, mbedés_mpi_uöà*
r
 )

1225 #i‡
	`deföed
(
MBEDTLS_HAVE_UDBL
)

1226 
mbedés_t_udbl
 
dividíd
, 
quŸõ¡
;

1228 c⁄° 
mbedés_mpi_uöt
 
ødix
 = (mbedés_mpi_uötË1 << 
biH
;

1229 c⁄° 
mbedés_mpi_uöt
 
uöt_hÆfw‹d_mask
 = ( (mbedés_mpi_uötË1 << 
biH
 ) - 1;

1230 
mbedés_mpi_uöt
 
d0
, 
d1
, 
q0
, 
q1
, 
rAX
, 
r0
, 
quŸõ¡
;

1231 
mbedés_mpi_uöt
 
u0_msw
, 
u0_lsw
;

1232 
size_t
 
s
;

1238 if–0 =
d
 || 
u1
 >= d )

1240 i‡(
r
 !
NULL
) *r = ~0;

1245 #i‡
	`deföed
(
MBEDTLS_HAVE_UDBL
)

1246 
dividíd
 = (
mbedés_t_udbl
Ë
u1
 << 
biL
;

1247 
dividíd
 |(
mbedés_t_udbl
Ë
u0
;

1248 
quŸõ¡
 = 
dividíd
 / 
d
;

1249 if–
quŸõ¡
 > ( (
mbedés_t_udbl
Ë1 << 
biL
 ) - 1 )

1250 
quŸõ¡
 = ( (
mbedés_t_udbl
Ë1 << 
biL
 ) - 1;

1252 if–
r
 !
NULL
 )

1253 *
r
 = (
mbedés_mpi_uöt
)–
dividíd
 - (
quŸõ¡
 * 
d
 ) );

1255  (
mbedés_mpi_uöt
Ë
quŸõ¡
;

1266 
s
 = 
	`mbedés_˛z
–
d
 );

1267 
d
 = d << 
s
;

1269 
u1
 = u1 << 
s
;

1270 
u1
 |–
u0
 >> ( 
biL
 - 
s
 ) ) & ( -(
mbedés_mpi_söt
)s >> ( biL - 1 ) );

1271 
u0
 = u0 << 
s
;

1273 
d1
 = 
d
 >> 
biH
;

1274 
d0
 = 
d
 & 
uöt_hÆfw‹d_mask
;

1276 
u0_msw
 = 
u0
 >> 
biH
;

1277 
u0_lsw
 = 
u0
 & 
uöt_hÆfw‹d_mask
;

1282 
q1
 = 
u1
 / 
d1
;

1283 
r0
 = 
u1
 - 
d1
 * 
q1
;

1285  
q1
 >
ødix
 || ( q1 * 
d0
 >Ñadix * 
r0
 + 
u0_msw
 ) )

1287 
q1
 -= 1;

1288 
r0
 +
d1
;

1290 i‡–
r0
 >
ødix
 ) ;

1293 
rAX
 = ( 
u1
 * 
ødix
 ) + ( 
u0_msw
 - 
q1
 * 
d
 );

1294 
q0
 = 
rAX
 / 
d1
;

1295 
r0
 = 
rAX
 - 
q0
 * 
d1
;

1297  
q0
 >
ødix
 || ( q0 * 
d0
 >Ñadix * 
r0
 + 
u0_lsw
 ) )

1299 
q0
 -= 1;

1300 
r0
 +
d1
;

1302 i‡–
r0
 >
ødix
 ) ;

1305 i‡(
r
 !
NULL
)

1306 *
r
 = ( 
rAX
 * 
ødix
 + 
u0_lsw
 - 
q0
 * 
d
 ) >> 
s
;

1308 
quŸõ¡
 = 
q1
 * 
ødix
 + 
q0
;

1310  
quŸõ¡
;

1312 
	}
}

1317 
	$mbedés_mpi_div_mpi
–
mbedés_mpi
 *
Q
, mbedés_mpò*
R
, c⁄° mbedés_mpò*
A
, c⁄° mbedés_mpò*
B
 )

1319 
ªt
;

1320 
size_t
 
i
, 
n
, 
t
, 
k
;

1321 
mbedés_mpi
 
X
, 
Y
, 
Z
, 
T1
, 
T2
;

1323 if–
	`mbedés_mpi_cmp_öt
–
B
, 0 ) == 0 )

1324 –
MBEDTLS_ERR_MPI_DIVISION_BY_ZERO
 );

1326 
	`mbedés_mpi_öô
–&
X
 ); mbedés_mpi_öô–&
Y
 ); mbedés_mpi_öô–&
Z
 );

1327 
	`mbedés_mpi_öô
–&
T1
 ); mbedés_mpi_öô–&
T2
 );

1329 if–
	`mbedés_mpi_cmp_abs
–
A
, 
B
 ) < 0 )

1331 if–
Q
 !
NULL
 ) 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_l£t
( Q, 0 ) );

1332 if–
R
 !
NULL
 ) 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_c›y
–R, 
A
 ) );

1336 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_c›y
–&
X
, 
A
 ) );

1337 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_c›y
–&
Y
, 
B
 ) );

1338 
X
.
s
 = 
Y
.s = 1;

1340 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_grow
–&
Z
, 
A
->
n
 + 2 ) );

1341 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_l£t
–&
Z
, 0 ) );

1342 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_grow
–&
T1
, 2 ) );

1343 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_grow
–&
T2
, 3 ) );

1345 
k
 = 
	`mbedés_mpi_bôÀn
–&
Y
 ) % 
biL
;

1346 if–
k
 < 
biL
 - 1 )

1348 
k
 = 
biL
 - 1 - k;

1349 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_shi·_l
–&
X
, 
k
 ) );

1350 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_shi·_l
–&
Y
, 
k
 ) );

1352 
k
 = 0;

1354 
n
 = 
X
.n - 1;

1355 
t
 = 
Y
.
n
 - 1;

1356 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_shi·_l
–&
Y
, 
biL
 * ( 
n
 - 
t
 ) ) );

1358  
	`mbedés_mpi_cmp_mpi
–&
X
, &
Y
 ) >= 0 )

1360 
Z
.
p
[
n
 - 
t
]++;

1361 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_sub_mpi
–&
X
, &X, &
Y
 ) );

1363 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_shi·_r
–&
Y
, 
biL
 * ( 
n
 - 
t
 ) ) );

1365  
i
 = 
n
; i > 
t
 ; i-- )

1367 if–
X
.
p
[
i
] >
Y
.p[
t
] )

1368 
Z
.
p
[
i
 - 
t
 - 1] = ~0;

1371 
Z
.
p
[
i
 - 
t
 - 1] = 
	`mbedés_öt_div_öt
–
X
.p[i], X.p[i - 1],

1372 
Y
.
p
[
t
], 
NULL
);

1375 
Z
.
p
[
i
 - 
t
 - 1]++;

1378 
Z
.
p
[
i
 - 
t
 - 1]--;

1380 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_l£t
–&
T1
, 0 ) );

1381 
T1
.
p
[0] = ( 
t
 < 1 ) ? 0 : 
Y
.p[t - 1];

1382 
T1
.
p
[1] = 
Y
.p[
t
];

1383 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_mul_öt
–&
T1
, &T1, 
Z
.
p
[
i
 - 
t
 - 1] ) );

1385 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_l£t
–&
T2
, 0 ) );

1386 
T2
.
p
[0] = ( 
i
 < 2 ) ? 0 : 
X
.p[i - 2];

1387 
T2
.
p
[1] = ( 
i
 < 1 ) ? 0 : 
X
.p[i - 1];

1388 
T2
.
p
[2] = 
X
.p[
i
];

1390  
	`mbedés_mpi_cmp_mpi
–&
T1
, &
T2
 ) > 0 );

1392 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_mul_öt
–&
T1
, &
Y
, 
Z
.
p
[
i
 - 
t
 - 1] ) );

1393 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_shi·_l
–&
T1
, 
biL
 * ( 
i
 - 
t
 - 1 ) ) );

1394 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_sub_mpi
–&
X
, &X, &
T1
 ) );

1396 if–
	`mbedés_mpi_cmp_öt
–&
X
, 0 ) < 0 )

1398 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_c›y
–&
T1
, &
Y
 ) );

1399 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_shi·_l
–&
T1
, 
biL
 * ( 
i
 - 
t
 - 1 ) ) );

1400 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_add_mpi
–&
X
, &X, &
T1
 ) );

1401 
Z
.
p
[
i
 - 
t
 - 1]--;

1405 if–
Q
 !
NULL
 )

1407 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_c›y
–
Q
, &
Z
 ) );

1408 
Q
->
s
 = 
A
->†* 
B
->s;

1411 if–
R
 !
NULL
 )

1413 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_shi·_r
–&
X
, 
k
 ) );

1414 
X
.
s
 = 
A
->s;

1415 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_c›y
–
R
, &
X
 ) );

1417 if–
	`mbedés_mpi_cmp_öt
–
R
, 0 ) == 0 )

1418 
R
->
s
 = 1;

1421 
˛ónup
:

1423 
	`mbedés_mpi_‰ì
–&
X
 ); mbedés_mpi_‰ì–&
Y
 ); mbedés_mpi_‰ì–&
Z
 );

1424 
	`mbedés_mpi_‰ì
–&
T1
 ); mbedés_mpi_‰ì–&
T2
 );

1426 –
ªt
 );

1427 
	}
}

1432 
	$mbedés_mpi_div_öt
–
mbedés_mpi
 *
Q
, mbedés_mpò*
R
, c⁄° mbedés_mpò*
A
, 
mbedés_mpi_söt
 
b
 )

1434 
mbedés_mpi
 
_B
;

1435 
mbedés_mpi_uöt
 
p
[1];

1437 
p
[0] = ( 
b
 < 0 ) ? -b : b;

1438 
_B
.
s
 = ( 
b
 < 0 ) ? -1 : 1;

1439 
_B
.
n
 = 1;

1440 
_B
.
p
 =Ö;

1442 –
	`mbedés_mpi_div_mpi
–
Q
, 
R
, 
A
, &
_B
 ) );

1443 
	}
}

1448 
	$mbedés_mpi_mod_mpi
–
mbedés_mpi
 *
R
, c⁄° mbedés_mpò*
A
, c⁄° mbedés_mpò*
B
 )

1450 
ªt
;

1452 if–
	`mbedés_mpi_cmp_öt
–
B
, 0 ) < 0 )

1453 –
MBEDTLS_ERR_MPI_NEGATIVE_VALUE
 );

1455 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_div_mpi
–
NULL
, 
R
, 
A
, 
B
 ) );

1457  
	`mbedés_mpi_cmp_öt
–
R
, 0 ) < 0 )

1458 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_add_mpi
–
R
, R, 
B
 ) );

1460  
	`mbedés_mpi_cmp_mpi
–
R
, 
B
 ) >= 0 )

1461 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_sub_mpi
–
R
, R, 
B
 ) );

1463 
˛ónup
:

1465 –
ªt
 );

1466 
	}
}

1471 
	$mbedés_mpi_mod_öt
–
mbedés_mpi_uöt
 *
r
, c⁄° 
mbedés_mpi
 *
A
, 
mbedés_mpi_söt
 
b
 )

1473 
size_t
 
i
;

1474 
mbedés_mpi_uöt
 
x
, 
y
, 
z
;

1476 if–
b
 == 0 )

1477 –
MBEDTLS_ERR_MPI_DIVISION_BY_ZERO
 );

1479 if–
b
 < 0 )

1480 –
MBEDTLS_ERR_MPI_NEGATIVE_VALUE
 );

1485 if–
b
 == 1 )

1487 *
r
 = 0;

1491 if–
b
 == 2 )

1493 *
r
 = 
A
->
p
[0] & 1;

1500  
i
 = 
A
->
n
, 
y
 = 0; i > 0; i-- )

1502 
x
 = 
A
->
p
[
i
 - 1];

1503 
y
 = ( y << 
biH
 ) | ( 
x
 >> biH );

1504 
z
 = 
y
 / 
b
;

1505 
y
 -
z
 * 
b
;

1507 
x
 <<
biH
;

1508 
y
 = ( y << 
biH
 ) | ( 
x
 >> biH );

1509 
z
 = 
y
 / 
b
;

1510 
y
 -
z
 * 
b
;

1517 if–
A
->
s
 < 0 && 
y
 != 0 )

1518 
y
 = 
b
 - y;

1520 *
r
 = 
y
;

1523 
	}
}

1528 
	$mpi_m⁄tg_öô
–
mbedés_mpi_uöt
 *
mm
, c⁄° 
mbedés_mpi
 *
N
 )

1530 
mbedés_mpi_uöt
 
x
, 
m0
 = 
N
->
p
[0];

1531 
i
;

1533 
x
 = 
m0
;

1534 
x
 +––
m0
 + 2 ) & 4 ) << 1;

1536  
i
 = 
biL
; i >= 8; i /= 2 )

1537 
x
 *–2 - ( 
m0
 * x ) );

1539 *
mm
 = ~
x
 + 1;

1540 
	}
}

1545 
	$mpi_m⁄tmul
–
mbedés_mpi
 *
A
, c⁄° mbedés_mpò*
B
, c⁄° mbedés_mpò*
N
, 
mbedés_mpi_uöt
 
mm
,

1546 c⁄° 
mbedés_mpi
 *
T
 )

1548 
size_t
 
i
, 
n
, 
m
;

1549 
mbedés_mpi_uöt
 
u0
, 
u1
, *
d
;

1551 
	`mem£t
–
T
->
p
, 0, T->
n
 * 
ciL
 );

1553 
d
 = 
T
->
p
;

1554 
n
 = 
N
->n;

1555 
m
 = ( 
B
->
n
 <Ç ) ? B->n :Ç;

1557  
i
 = 0; i < 
n
; i++ )

1562 
u0
 = 
A
->
p
[
i
];

1563 
u1
 = ( 
d
[0] + 
u0
 * 
B
->
p
[0] ) * 
mm
;

1565 
	`mpi_mul_hÕ
–
m
, 
B
->
p
, 
d
, 
u0
 );

1566 
	`mpi_mul_hÕ
–
n
, 
N
->
p
, 
d
, 
u1
 );

1568 *
d
++ = 
u0
; d[
n
 + 1] = 0;

1571 
	`mem˝y
–
A
->
p
, 
d
, ( 
n
 + 1 ) * 
ciL
 );

1573 if–
	`mbedés_mpi_cmp_abs
–
A
, 
N
 ) >= 0 )

1574 
	`mpi_sub_hÕ
–
n
, 
N
->
p
, 
A
->p );

1577 
	`mpi_sub_hÕ
–
n
, 
A
->
p
, 
T
->p );

1578 
	}
}

1583 
	$mpi_m⁄åed
–
mbedés_mpi
 *
A
, c⁄° mbedés_mpò*
N
, 
mbedés_mpi_uöt
 
mm
, c⁄° mbedés_mpò*
T
 )

1585 
mbedés_mpi_uöt
 
z
 = 1;

1586 
mbedés_mpi
 
U
;

1588 
U
.
n
 = U.
s
 = (Ë
z
;

1589 
U
.
p
 = &
z
;

1591 
	`mpi_m⁄tmul
–
A
, &
U
, 
N
, 
mm
, 
T
 );

1592 
	}
}

1597 
	$mbedés_mpi_exp_mod
–
mbedés_mpi
 *
X
, c⁄° mbedés_mpò*
A
, c⁄° mbedés_mpò*
E
, c⁄° mbedés_mpò*
N
, mbedés_mpò*
_RR
 )

1599 
ªt
;

1600 
size_t
 
wbôs
, 
wsize
, 
⁄e
 = 1;

1601 
size_t
 
i
, 
j
, 
nblimbs
;

1602 
size_t
 
bufsize
, 
nbôs
;

1603 
mbedés_mpi_uöt
 
ei
, 
mm
, 
°©e
;

1604 
mbedés_mpi
 
RR
, 
T
, 
W
[ 2 << 
MBEDTLS_MPI_WINDOW_SIZE
 ], 
Apos
;

1605 
√g
;

1607 if–
	`mbedés_mpi_cmp_öt
–
N
, 0 ) < 0 || ( N->
p
[0] & 1 ) == 0 )

1608 –
MBEDTLS_ERR_MPI_BAD_INPUT_DATA
 );

1610 if–
	`mbedés_mpi_cmp_öt
–
E
, 0 ) < 0 )

1611 –
MBEDTLS_ERR_MPI_BAD_INPUT_DATA
 );

1616 
	`mpi_m⁄tg_öô
–&
mm
, 
N
 );

1617 
	`mbedés_mpi_öô
–&
RR
 ); mbedés_mpi_öô–&
T
 );

1618 
	`mbedés_mpi_öô
–&
Apos
 );

1619 
	`mem£t
–
W
, 0, ( W ) );

1621 
i
 = 
	`mbedés_mpi_bôÀn
–
E
 );

1623 
wsize
 = ( 
i
 > 671 ) ? 6 : ( i > 239 ) ? 5 :

1624 –
i
 > 79 ) ? 4 : ( i > 23 ) ? 3 : 1;

1626 if–
wsize
 > 
MBEDTLS_MPI_WINDOW_SIZE
 )

1627 
wsize
 = 
MBEDTLS_MPI_WINDOW_SIZE
;

1629 
j
 = 
N
->
n
 + 1;

1630 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_grow
–
X
, 
j
 ) );

1631 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_grow
–&
W
[1], 
j
 ) );

1632 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_grow
–&
T
, 
j
 * 2 ) );

1637 
√g
 = ( 
A
->
s
 == -1 );

1638 if–
√g
 )

1640 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_c›y
–&
Apos
, 
A
 ) );

1641 
Apos
.
s
 = 1;

1642 
A
 = &
Apos
;

1648 if–
_RR
 =
NULL
 || _RR->
p
 == NULL )

1650 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_l£t
–&
RR
, 1 ) );

1651 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_shi·_l
–&
RR
, 
N
->
n
 * 2 * 
biL
 ) );

1652 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_mod_mpi
–&
RR
, &RR, 
N
 ) );

1654 if–
_RR
 !
NULL
 )

1655 
	`mem˝y
–
_RR
, &
RR
, –
mbedés_mpi
 ) );

1658 
	`mem˝y
–&
RR
, 
_RR
, –
mbedés_mpi
 ) );

1663 if–
	`mbedés_mpi_cmp_mpi
–
A
, 
N
 ) >= 0 )

1664 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_mod_mpi
–&
W
[1], 
A
, 
N
 ) );

1666 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_c›y
–&
W
[1], 
A
 ) );

1668 
	`mpi_m⁄tmul
–&
W
[1], &
RR
, 
N
, 
mm
, &
T
 );

1673 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_c›y
–
X
, &
RR
 ) );

1674 
	`mpi_m⁄åed
–
X
, 
N
, 
mm
, &
T
 );

1676 if–
wsize
 > 1 )

1681 
j
 = 
⁄e
 << ( 
wsize
 - 1 );

1683 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_grow
–&
W
[
j
], 
N
->
n
 + 1 ) );

1684 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_c›y
–&
W
[
j
], &W[1] ) );

1686  
i
 = 0; i < 
wsize
 - 1; i++ )

1687 
	`mpi_m⁄tmul
–&
W
[
j
], &W[j], 
N
, 
mm
, &
T
 );

1692  
i
 = 
j
 + 1; i < ( 
⁄e
 << 
wsize
 ); i++ )

1694 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_grow
–&
W
[
i
], 
N
->
n
 + 1 ) );

1695 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_c›y
–&
W
[
i
], &W[i - 1] ) );

1697 
	`mpi_m⁄tmul
–&
W
[
i
], &W[1], 
N
, 
mm
, &
T
 );

1701 
nblimbs
 = 
E
->
n
;

1702 
bufsize
 = 0;

1703 
nbôs
 = 0;

1704 
wbôs
 = 0;

1705 
°©e
 = 0;

1709 if–
bufsize
 == 0 )

1711 if–
nblimbs
 == 0 )

1714 
nblimbs
--;

1716 
bufsize
 = –
mbedés_mpi_uöt
 ) << 3;

1719 
bufsize
--;

1721 
ei
 = (
E
->
p
[
nblimbs
] >> 
bufsize
) & 1;

1726 if–
ei
 =0 && 
°©e
 == 0 )

1729 if–
ei
 =0 && 
°©e
 == 1 )

1734 
	`mpi_m⁄tmul
–
X
, X, 
N
, 
mm
, &
T
 );

1741 
°©e
 = 2;

1743 
nbôs
++;

1744 
wbôs
 |–
ei
 << ( 
wsize
 - 
nbôs
 ) );

1746 if–
nbôs
 =
wsize
 )

1751  
i
 = 0; i < 
wsize
; i++ )

1752 
	`mpi_m⁄tmul
–
X
, X, 
N
, 
mm
, &
T
 );

1757 
	`mpi_m⁄tmul
–
X
, &
W
[
wbôs
], 
N
, 
mm
, &
T
 );

1759 
°©e
--;

1760 
nbôs
 = 0;

1761 
wbôs
 = 0;

1768  
i
 = 0; i < 
nbôs
; i++ )

1770 
	`mpi_m⁄tmul
–
X
, X, 
N
, 
mm
, &
T
 );

1772 
wbôs
 <<= 1;

1774 if––
wbôs
 & ( 
⁄e
 << 
wsize
 ) ) != 0 )

1775 
	`mpi_m⁄tmul
–
X
, &
W
[1], 
N
, 
mm
, &
T
 );

1781 
	`mpi_m⁄åed
–
X
, 
N
, 
mm
, &
T
 );

1783 if–
√g
 )

1785 
X
->
s
 = -1;

1786 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_add_mpi
–
X
, 
N
, X ) );

1789 
˛ónup
:

1791  
i
 = ( 
⁄e
 << ( 
wsize
 - 1 ) ); i < ( one << wsize ); i++ )

1792 
	`mbedés_mpi_‰ì
–&
W
[
i
] );

1794 
	`mbedés_mpi_‰ì
–&
W
[1] ); mbedés_mpi_‰ì–&
T
 ); mbedés_mpi_‰ì–&
Apos
 );

1796 if–
_RR
 =
NULL
 || _RR->
p
 == NULL )

1797 
	`mbedés_mpi_‰ì
–&
RR
 );

1799 –
ªt
 );

1800 
	}
}

1805 
	$mbedés_mpi_gcd
–
mbedés_mpi
 *
G
, c⁄° mbedés_mpò*
A
, c⁄° mbedés_mpò*
B
 )

1807 
ªt
;

1808 
size_t
 
lz
, 
lzt
;

1809 
mbedés_mpi
 
TG
, 
TA
, 
TB
;

1811 
	`mbedés_mpi_öô
–&
TG
 ); mbedés_mpi_öô–&
TA
 ); mbedés_mpi_öô–&
TB
 );

1813 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_c›y
–&
TA
, 
A
 ) );

1814 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_c›y
–&
TB
, 
B
 ) );

1816 
lz
 = 
	`mbedés_mpi_lsb
–&
TA
 );

1817 
lzt
 = 
	`mbedés_mpi_lsb
–&
TB
 );

1819 if–
lzt
 < 
lz
 )

1820 
lz
 = 
lzt
;

1822 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_shi·_r
–&
TA
, 
lz
 ) );

1823 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_shi·_r
–&
TB
, 
lz
 ) );

1825 
TA
.
s
 = 
TB
.s = 1;

1827  
	`mbedés_mpi_cmp_öt
–&
TA
, 0 ) != 0 )

1829 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_shi·_r
–&
TA
, 
	`mbedés_mpi_lsb
( &TA ) ) );

1830 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_shi·_r
–&
TB
, 
	`mbedés_mpi_lsb
( &TB ) ) );

1832 if–
	`mbedés_mpi_cmp_mpi
–&
TA
, &
TB
 ) >= 0 )

1834 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_sub_abs
–&
TA
, &TA, &
TB
 ) );

1835 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_shi·_r
–&
TA
, 1 ) );

1839 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_sub_abs
–&
TB
, &TB, &
TA
 ) );

1840 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_shi·_r
–&
TB
, 1 ) );

1844 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_shi·_l
–&
TB
, 
lz
 ) );

1845 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_c›y
–
G
, &
TB
 ) );

1847 
˛ónup
:

1849 
	`mbedés_mpi_‰ì
–&
TG
 ); mbedés_mpi_‰ì–&
TA
 ); mbedés_mpi_‰ì–&
TB
 );

1851 –
ªt
 );

1852 
	}
}

1861 
	$mbedés_mpi_fûl_øndom
–
mbedés_mpi
 *
X
, 
size_t
 
size
,

1862 (*
f_∫g
)(*, *, 
size_t
),

1863 *
p_∫g
 )

1865 
ªt
;

1866 
buf
[
MBEDTLS_MPI_MAX_SIZE
];

1868 if–
size
 > 
MBEDTLS_MPI_MAX_SIZE
 )

1869 –
MBEDTLS_ERR_MPI_BAD_INPUT_DATA
 );

1871 
	`MBEDTLS_MPI_CHK
–
	`f_∫g
–
p_∫g
, 
buf
, 
size
 ) );

1872 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_ªad_bö¨y
–
X
, 
buf
, 
size
 ) );

1874 
˛ónup
:

1875 –
ªt
 );

1876 
	}
}

1881 
	$mbedés_mpi_öv_mod
–
mbedés_mpi
 *
X
, c⁄° mbedés_mpò*
A
, c⁄° mbedés_mpò*
N
 )

1883 
ªt
;

1884 
mbedés_mpi
 
G
, 
TA
, 
TU
, 
U1
, 
U2
, 
TB
, 
TV
, 
V1
, 
V2
;

1886 if–
	`mbedés_mpi_cmp_öt
–
N
, 0 ) <= 0 )

1887 –
MBEDTLS_ERR_MPI_BAD_INPUT_DATA
 );

1889 
	`mbedés_mpi_öô
–&
TA
 ); mbedés_mpi_öô–&
TU
 ); mbedés_mpi_öô–&
U1
 ); mbedés_mpi_öô–&
U2
 );

1890 
	`mbedés_mpi_öô
–&
G
 ); mbedés_mpi_öô–&
TB
 ); mbedés_mpi_öô–&
TV
 );

1891 
	`mbedés_mpi_öô
–&
V1
 ); mbedés_mpi_öô–&
V2
 );

1893 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_gcd
–&
G
, 
A
, 
N
 ) );

1895 if–
	`mbedés_mpi_cmp_öt
–&
G
, 1 ) != 0 )

1897 
ªt
 = 
MBEDTLS_ERR_MPI_NOT_ACCEPTABLE
;

1898 
˛ónup
;

1901 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_mod_mpi
–&
TA
, 
A
, 
N
 ) );

1902 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_c›y
–&
TU
, &
TA
 ) );

1903 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_c›y
–&
TB
, 
N
 ) );

1904 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_c›y
–&
TV
, 
N
 ) );

1906 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_l£t
–&
U1
, 1 ) );

1907 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_l£t
–&
U2
, 0 ) );

1908 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_l£t
–&
V1
, 0 ) );

1909 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_l£t
–&
V2
, 1 ) );

1913  ( 
TU
.
p
[0] & 1 ) == 0 )

1915 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_shi·_r
–&
TU
, 1 ) );

1917 if––
U1
.
p
[0] & 1 ) !0 || ( 
U2
.p[0] & 1 ) != 0 )

1919 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_add_mpi
–&
U1
, &U1, &
TB
 ) );

1920 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_sub_mpi
–&
U2
, &U2, &
TA
 ) );

1923 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_shi·_r
–&
U1
, 1 ) );

1924 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_shi·_r
–&
U2
, 1 ) );

1927  ( 
TV
.
p
[0] & 1 ) == 0 )

1929 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_shi·_r
–&
TV
, 1 ) );

1931 if––
V1
.
p
[0] & 1 ) !0 || ( 
V2
.p[0] & 1 ) != 0 )

1933 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_add_mpi
–&
V1
, &V1, &
TB
 ) );

1934 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_sub_mpi
–&
V2
, &V2, &
TA
 ) );

1937 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_shi·_r
–&
V1
, 1 ) );

1938 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_shi·_r
–&
V2
, 1 ) );

1941 if–
	`mbedés_mpi_cmp_mpi
–&
TU
, &
TV
 ) >= 0 )

1943 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_sub_mpi
–&
TU
, &TU, &
TV
 ) );

1944 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_sub_mpi
–&
U1
, &U1, &
V1
 ) );

1945 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_sub_mpi
–&
U2
, &U2, &
V2
 ) );

1949 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_sub_mpi
–&
TV
, &TV, &
TU
 ) );

1950 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_sub_mpi
–&
V1
, &V1, &
U1
 ) );

1951 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_sub_mpi
–&
V2
, &V2, &
U2
 ) );

1954  
	`mbedés_mpi_cmp_öt
–&
TU
, 0 ) != 0 );

1956  
	`mbedés_mpi_cmp_öt
–&
V1
, 0 ) < 0 )

1957 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_add_mpi
–&
V1
, &V1, 
N
 ) );

1959  
	`mbedés_mpi_cmp_mpi
–&
V1
, 
N
 ) >= 0 )

1960 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_sub_mpi
–&
V1
, &V1, 
N
 ) );

1962 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_c›y
–
X
, &
V1
 ) );

1964 
˛ónup
:

1966 
	`mbedés_mpi_‰ì
–&
TA
 ); mbedés_mpi_‰ì–&
TU
 ); mbedés_mpi_‰ì–&
U1
 ); mbedés_mpi_‰ì–&
U2
 );

1967 
	`mbedés_mpi_‰ì
–&
G
 ); mbedés_mpi_‰ì–&
TB
 ); mbedés_mpi_‰ì–&
TV
 );

1968 
	`mbedés_mpi_‰ì
–&
V1
 ); mbedés_mpi_‰ì–&
V2
 );

1970 –
ªt
 );

1971 
	}
}

1973 #i‡
deföed
(
MBEDTLS_GENPRIME
)

1975 c⁄° 
	gsmÆl_¥ime
[] =

2009 
	$mpi_check_smÆl_Á˘‹s
–c⁄° 
mbedés_mpi
 *
X
 )

2011 
ªt
 = 0;

2012 
size_t
 
i
;

2013 
mbedés_mpi_uöt
 
r
;

2015 if––
X
->
p
[0] & 1 ) == 0 )

2016 –
MBEDTLS_ERR_MPI_NOT_ACCEPTABLE
 );

2018  
i
 = 0; 
smÆl_¥ime
[i] > 0; i++ )

2020 if–
	`mbedés_mpi_cmp_öt
–
X
, 
smÆl_¥ime
[
i
] ) <= 0 )

2023 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_mod_öt
–&
r
, 
X
, 
smÆl_¥ime
[
i
] ) );

2025 if–
r
 == 0 )

2026 –
MBEDTLS_ERR_MPI_NOT_ACCEPTABLE
 );

2029 
˛ónup
:

2030 –
ªt
 );

2031 
	}
}

2036 
	$mpi_mûÀr_øbö
–c⁄° 
mbedés_mpi
 *
X
,

2037 (*
f_∫g
)(*, *, 
size_t
),

2038 *
p_∫g
 )

2040 
ªt
, 
cou¡
;

2041 
size_t
 
i
, 
j
, 
k
, 
n
, 
s
;

2042 
mbedés_mpi
 
W
, 
R
, 
T
, 
A
, 
RR
;

2044 
	`mbedés_mpi_öô
–&
W
 ); mbedés_mpi_öô–&
R
 ); mbedés_mpi_öô–&
T
 ); mbedés_mpi_öô–&
A
 );

2045 
	`mbedés_mpi_öô
–&
RR
 );

2051 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_sub_öt
–&
W
, 
X
, 1 ) );

2052 
s
 = 
	`mbedés_mpi_lsb
–&
W
 );

2053 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_c›y
–&
R
, &
W
 ) );

2054 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_shi·_r
–&
R
, 
s
 ) );

2056 
i
 = 
	`mbedés_mpi_bôÀn
–
X
 );

2060 
n
 = ( ( 
i
 >= 1300 ) ? 2 : ( i >= 850 ) ? 3 :

2061 –
i
 >= 650 ) ? 4 : ( i >= 350 ) ? 8 :

2062 –
i
 >= 250 ) ? 12 : ( i >= 150 ) ? 18 : 27 );

2064  
i
 = 0; i < 
n
; i++ )

2069 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_fûl_øndom
–&
A
, 
X
->
n
 * 
ciL
, 
f_∫g
, 
p_∫g
 ) );

2071 if–
	`mbedés_mpi_cmp_mpi
–&
A
, &
W
 ) >= 0 )

2073 
j
 = 
	`mbedés_mpi_bôÀn
–&
A
 ) - mbedés_mpi_bôÀn–&
W
 );

2074 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_shi·_r
–&
A
, 
j
 + 1 ) );

2076 
A
.
p
[0] |= 3;

2078 
cou¡
 = 0;

2080 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_fûl_øndom
–&
A
, 
X
->
n
 * 
ciL
, 
f_∫g
, 
p_∫g
 ) );

2082 
j
 = 
	`mbedés_mpi_bôÀn
–&
A
 );

2083 
k
 = 
	`mbedés_mpi_bôÀn
–&
W
 );

2084 i‡(
j
 > 
k
) {

2085 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_shi·_r
–&
A
, 
j
 - 
k
 ) );

2088 i‡(
cou¡
++ > 30) {

2089  
MBEDTLS_ERR_MPI_NOT_ACCEPTABLE
;

2092 }  
	`mbedés_mpi_cmp_mpi
–&
A
, &
W
 ) >= 0 ||

2093 
	`mbedés_mpi_cmp_öt
–&
A
, 1 ) <= 0 );

2098 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_exp_mod
–&
A
, &A, &
R
, 
X
, &
RR
 ) );

2100 if–
	`mbedés_mpi_cmp_mpi
–&
A
, &
W
 ) == 0 ||

2101 
	`mbedés_mpi_cmp_öt
–&
A
, 1 ) == 0 )

2104 
j
 = 1;

2105  
j
 < 
s
 && 
	`mbedés_mpi_cmp_mpi
–&
A
, &
W
 ) != 0 )

2110 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_mul_mpi
–&
T
, &
A
, &A ) );

2111 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_mod_mpi
–&
A
, &
T
, 
X
 ) );

2113 if–
	`mbedés_mpi_cmp_öt
–&
A
, 1 ) == 0 )

2116 
j
++;

2122 if–
	`mbedés_mpi_cmp_mpi
–&
A
, &
W
 ) != 0 ||

2123 
	`mbedés_mpi_cmp_öt
–&
A
, 1 ) == 0 )

2125 
ªt
 = 
MBEDTLS_ERR_MPI_NOT_ACCEPTABLE
;

2130 
˛ónup
:

2131 
	`mbedés_mpi_‰ì
–&
W
 ); mbedés_mpi_‰ì–&
R
 ); mbedés_mpi_‰ì–&
T
 ); mbedés_mpi_‰ì–&
A
 );

2132 
	`mbedés_mpi_‰ì
–&
RR
 );

2134 –
ªt
 );

2135 
	}
}

2140 
	$mbedés_mpi_is_¥ime
–c⁄° 
mbedés_mpi
 *
X
,

2141 (*
f_∫g
)(*, *, 
size_t
),

2142 *
p_∫g
 )

2144 
ªt
;

2145 
mbedés_mpi
 
XX
;

2147 
XX
.
s
 = 1;

2148 
XX
.
n
 = 
X
->n;

2149 
XX
.
p
 = 
X
->p;

2151 if–
	`mbedés_mpi_cmp_öt
–&
XX
, 0 ) == 0 ||

2152 
	`mbedés_mpi_cmp_öt
–&
XX
, 1 ) == 0 )

2153 –
MBEDTLS_ERR_MPI_NOT_ACCEPTABLE
 );

2155 if–
	`mbedés_mpi_cmp_öt
–&
XX
, 2 ) == 0 )

2158 if––
ªt
 = 
	`mpi_check_smÆl_Á˘‹s
–&
XX
 ) ) != 0 )

2160 if–
ªt
 == 1 )

2163 –
ªt
 );

2166 –
	`mpi_mûÀr_øbö
–&
XX
, 
f_∫g
, 
p_∫g
 ) );

2167 
	}
}

2172 
	$mbedés_mpi_gí_¥ime
–
mbedés_mpi
 *
X
, 
size_t
 
nbôs
, 
dh_Êag
,

2173 (*
f_∫g
)(*, *, 
size_t
),

2174 *
p_∫g
 )

2176 
ªt
;

2177 
size_t
 
k
, 
n
;

2178 
mbedés_mpi_uöt
 
r
;

2179 
mbedés_mpi
 
Y
;

2181 if–
nbôs
 < 3 ||Çbô†> 
MBEDTLS_MPI_MAX_BITS
 )

2182 –
MBEDTLS_ERR_MPI_BAD_INPUT_DATA
 );

2184 
	`mbedés_mpi_öô
–&
Y
 );

2186 
n
 = 
	`BITS_TO_LIMBS
–
nbôs
 );

2188 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_fûl_øndom
–
X
, 
n
 * 
ciL
, 
f_∫g
, 
p_∫g
 ) );

2190 
k
 = 
	`mbedés_mpi_bôÀn
–
X
 );

2191 if–
k
 > 
nbôs
 ) 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_shi·_r
–
X
, k -Çbits + 1 ) );

2193 
	`mbedés_mpi_£t_bô
–
X
, 
nbôs
-1, 1 );

2195 
X
->
p
[0] |= 1;

2197 if–
dh_Êag
 == 0 )

2199  ( 
ªt
 = 
	`mbedés_mpi_is_¥ime
–
X
, 
f_∫g
, 
p_∫g
 ) ) != 0 )

2201 if–
ªt
 !
MBEDTLS_ERR_MPI_NOT_ACCEPTABLE
 )

2202 
˛ónup
;

2204 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_add_öt
–
X
, X, 2 ) );

2215 
X
->
p
[0] |= 2;

2217 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_mod_öt
–&
r
, 
X
, 3 ) );

2218 if–
r
 == 0 )

2219 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_add_öt
–
X
, X, 8 ) );

2220 if–
r
 == 1 )

2221 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_add_öt
–
X
, X, 4 ) );

2224 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_c›y
–&
Y
, 
X
 ) );

2225 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_shi·_r
–&
Y
, 1 ) );

2233 if––
ªt
 = 
	`mpi_check_smÆl_Á˘‹s
–
X
 ) ) == 0 &&

2234 –
ªt
 = 
	`mpi_check_smÆl_Á˘‹s
–&
Y
 ) ) == 0 &&

2235 –
ªt
 = 
	`mpi_mûÀr_øbö
–
X
, 
f_∫g
, 
p_∫g
 ) ) == 0 &&

2236 –
ªt
 = 
	`mpi_mûÀr_øbö
–&
Y
, 
f_∫g
, 
p_∫g
 ) ) == 0 )

2241 if–
ªt
 !
MBEDTLS_ERR_MPI_NOT_ACCEPTABLE
 )

2242 
˛ónup
;

2249 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_add_öt
–
X
, X, 12 ) );

2250 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_add_öt
–&
Y
, &Y, 6 ) );

2254 
˛ónup
:

2256 
	`mbedés_mpi_‰ì
–&
Y
 );

2258 –
ªt
 );

2259 
	}
}

2263 #i‡
deföed
(
MBEDTLS_SELF_TEST
)

2265 
	#GCD_PAIR_COUNT
 3

	)

2267 c⁄° 
	ggcd_∑ús
[
GCD_PAIR_COUNT
][3] =

2277 
	$mbedés_mpi_£lf_ã°
–
vîbo£
 )

2279 
ªt
, 
i
;

2280 
mbedés_mpi
 
A
, 
E
, 
N
, 
X
, 
Y
, 
U
, 
V
;

2282 
	`mbedés_mpi_öô
–&
A
 ); mbedés_mpi_öô–&
E
 ); mbedés_mpi_öô–&
N
 ); mbedés_mpi_öô–&
X
 );

2283 
	`mbedés_mpi_öô
–&
Y
 ); mbedés_mpi_öô–&
U
 ); mbedés_mpi_öô–&
V
 );

2285 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_ªad_°rög
–&
A
, 16,

2291 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_ªad_°rög
–&
E
, 16,

2297 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_ªad_°rög
–&
N
, 16,

2302 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_mul_mpi
–&
X
, &
A
, &
N
 ) );

2304 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_ªad_°rög
–&
U
, 16,

2313 if–
vîbo£
 != 0 )

2314 
	`mbedés_¥ötf
( " MPIÅest #1 (mul_mpi): " );

2316 if–
	`mbedés_mpi_cmp_mpi
–&
X
, &
U
 ) != 0 )

2318 if–
vîbo£
 != 0 )

2319 
	`mbedés_¥ötf
( "failed\n" );

2321 
ªt
 = 1;

2322 
˛ónup
;

2325 if–
vîbo£
 != 0 )

2326 
	`mbedés_¥ötf
( "passed\n" );

2328 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_div_mpi
–&
X
, &
Y
, &
A
, &
N
 ) );

2330 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_ªad_°rög
–&
U
, 16,

2333 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_ªad_°rög
–&
V
, 16,

2338 if–
vîbo£
 != 0 )

2339 
	`mbedés_¥ötf
( " MPIÅest #2 (div_mpi): " );

2341 if–
	`mbedés_mpi_cmp_mpi
–&
X
, &
U
 ) != 0 ||

2342 
	`mbedés_mpi_cmp_mpi
–&
Y
, &
V
 ) != 0 )

2344 if–
vîbo£
 != 0 )

2345 
	`mbedés_¥ötf
( "failed\n" );

2347 
ªt
 = 1;

2348 
˛ónup
;

2351 if–
vîbo£
 != 0 )

2352 
	`mbedés_¥ötf
( "passed\n" );

2354 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_exp_mod
–&
X
, &
A
, &
E
, &
N
, 
NULL
 ) );

2356 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_ªad_°rög
–&
U
, 16,

2361 if–
vîbo£
 != 0 )

2362 
	`mbedés_¥ötf
( " MPIÅest #3 (exp_mod): " );

2364 if–
	`mbedés_mpi_cmp_mpi
–&
X
, &
U
 ) != 0 )

2366 if–
vîbo£
 != 0 )

2367 
	`mbedés_¥ötf
( "failed\n" );

2369 
ªt
 = 1;

2370 
˛ónup
;

2373 if–
vîbo£
 != 0 )

2374 
	`mbedés_¥ötf
( "passed\n" );

2376 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_öv_mod
–&
X
, &
A
, &
N
 ) );

2378 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_ªad_°rög
–&
U
, 16,

2383 if–
vîbo£
 != 0 )

2384 
	`mbedés_¥ötf
( " MPIÅest #4 (inv_mod): " );

2386 if–
	`mbedés_mpi_cmp_mpi
–&
X
, &
U
 ) != 0 )

2388 if–
vîbo£
 != 0 )

2389 
	`mbedés_¥ötf
( "failed\n" );

2391 
ªt
 = 1;

2392 
˛ónup
;

2395 if–
vîbo£
 != 0 )

2396 
	`mbedés_¥ötf
( "passed\n" );

2398 if–
vîbo£
 != 0 )

2399 
	`mbedés_¥ötf
( " MPIÅest #5 (simple gcd): " );

2401  
i
 = 0; i < 
GCD_PAIR_COUNT
; i++ )

2403 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_l£t
–&
X
, 
gcd_∑ús
[
i
][0] ) );

2404 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_l£t
–&
Y
, 
gcd_∑ús
[
i
][1] ) );

2406 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_gcd
–&
A
, &
X
, &
Y
 ) );

2408 if–
	`mbedés_mpi_cmp_öt
–&
A
, 
gcd_∑ús
[
i
][2] ) != 0 )

2410 if–
vîbo£
 != 0 )

2411 
	`mbedés_¥ötf
–"Áûedáà%d\n", 
i
 );

2413 
ªt
 = 1;

2414 
˛ónup
;

2418 if–
vîbo£
 != 0 )

2419 
	`mbedés_¥ötf
( "passed\n" );

2421 
˛ónup
:

2423 if–
ªt
 !0 && 
vîbo£
 != 0 )

2424 
	`mbedés_¥ötf
–"U√x≥˘edÉº‹,Ñëu∫ codê%08X\n", 
ªt
 );

2426 
	`mbedés_mpi_‰ì
–&
A
 ); mbedés_mpi_‰ì–&
E
 ); mbedés_mpi_‰ì–&
N
 ); mbedés_mpi_‰ì–&
X
 );

2427 
	`mbedés_mpi_‰ì
–&
Y
 ); mbedés_mpi_‰ì–&
U
 ); mbedés_mpi_‰ì–&
V
 );

2429 if–
vîbo£
 != 0 )

2430 
	`mbedés_¥ötf
( "\n" );

2432 –
ªt
 );

2433 
	}
}

	@/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/ctr_drbg.c

27 #i‡!
deföed
(
MBEDTLS_CONFIG_FILE
)

28 
	~"mbedés/c⁄fig.h
"

30 #ö˛udê
MBEDTLS_CONFIG_FILE


33 #i‡
deföed
(
MBEDTLS_CTR_DRBG_C
)

35 
	~"mbedés/˘r_drbg.h
"

37 
	~<°rög.h
>

39 #i‡
deföed
(
MBEDTLS_FS_IO
)

40 
	~<°dio.h
>

43 #i‡
deföed
(
MBEDTLS_SELF_TEST
)

44 #i‡
deföed
(
MBEDTLS_PLATFORM_C
)

45 
	~"mbedés/∂©f‹m.h
"

47 
	~<°dio.h
>

48 
	#mbedés_¥ötf
 
¥ötf


	)

53 
	$mbedés_zîoize
–*
v
, 
size_t
 
n
 ) {

54 vﬁ©ûê*
p
 = 
v
;  
n
-- ) *p++ = 0;

55 
	}
}

60 
	$mbedés_˘r_drbg_öô
–
mbedés_˘r_drbg_c⁄ãxt
 *
˘x
 )

62 
	`mem£t
–
˘x
, 0, –
mbedés_˘r_drbg_c⁄ãxt
 ) );

64 #i‡
	`deföed
(
MBEDTLS_THREADING_C
)

65 
	`mbedés_muãx_öô
–&
˘x
->
muãx
 );

67 
	}
}

73 
	$mbedés_˘r_drbg_£ed_íå›y_Àn
(

74 
mbedés_˘r_drbg_c⁄ãxt
 *
˘x
,

75 (*
f_íå›y
)(*, *, 
size_t
),

76 *
p_íå›y
,

77 c⁄° *
cu°om
,

78 
size_t
 
Àn
,

79 
size_t
 
íå›y_Àn
 )

81 
ªt
;

82 
key
[
MBEDTLS_CTR_DRBG_KEYSIZE
];

84 
	`mem£t
–
key
, 0, 
MBEDTLS_CTR_DRBG_KEYSIZE
 );

86 
	`mbedés_´s_öô
–&
˘x
->
´s_˘x
 );

88 
˘x
->
f_íå›y
 = f_entropy;

89 
˘x
->
p_íå›y
 =Ö_entropy;

91 
˘x
->
íå›y_Àn
 =Éntropy_len;

92 
˘x
->
ª£ed_öãrvÆ
 = 
MBEDTLS_CTR_DRBG_RESEED_INTERVAL
;

97 
	`mbedés_´s_£tkey_íc
–&
˘x
->
´s_˘x
, 
key
, 
MBEDTLS_CTR_DRBG_KEYBITS
 );

99 if––
ªt
 = 
	`mbedés_˘r_drbg_ª£ed
–
˘x
, 
cu°om
, 
Àn
 ) ) != 0 )

100 –
ªt
 );

103 
	}
}

105 
	$mbedés_˘r_drbg_£ed
–
mbedés_˘r_drbg_c⁄ãxt
 *
˘x
,

106 (*
f_íå›y
)(*, *, 
size_t
),

107 *
p_íå›y
,

108 c⁄° *
cu°om
,

109 
size_t
 
Àn
 )

111 –
	`mbedés_˘r_drbg_£ed_íå›y_Àn
–
˘x
, 
f_íå›y
, 
p_íå›y
, 
cu°om
, 
Àn
,

112 
MBEDTLS_CTR_DRBG_ENTROPY_LEN
 ) );

113 
	}
}

115 
	$mbedés_˘r_drbg_‰ì
–
mbedés_˘r_drbg_c⁄ãxt
 *
˘x
 )

117 if–
˘x
 =
NULL
 )

120 #i‡
	`deföed
(
MBEDTLS_THREADING_C
)

121 
	`mbedés_muãx_‰ì
–&
˘x
->
muãx
 );

123 
	`mbedés_´s_‰ì
–&
˘x
->
´s_˘x
 );

124 
	`mbedés_zîoize
–
˘x
, –
mbedés_˘r_drbg_c⁄ãxt
 ) );

125 
	}
}

127 
	$mbedés_˘r_drbg_£t_¥edi˘i⁄_ªsi°™˚
–
mbedés_˘r_drbg_c⁄ãxt
 *
˘x
, 
ªsi°™˚
 )

129 
˘x
->
¥edi˘i⁄_ªsi°™˚
 = 
ªsi°™˚
;

130 
	}
}

132 
	$mbedés_˘r_drbg_£t_íå›y_Àn
–
mbedés_˘r_drbg_c⁄ãxt
 *
˘x
, 
size_t
 
Àn
 )

134 
˘x
->
íå›y_Àn
 = 
Àn
;

135 
	}
}

137 
	$mbedés_˘r_drbg_£t_ª£ed_öãrvÆ
–
mbedés_˘r_drbg_c⁄ãxt
 *
˘x
, 
öãrvÆ
 )

139 
˘x
->
ª£ed_öãrvÆ
 = 
öãrvÆ
;

140 
	}
}

142 
	$block_cùhî_df
–*
ouçut
,

143 c⁄° *
d©a
, 
size_t
 
d©a_Àn
 )

145 
buf
[
MBEDTLS_CTR_DRBG_MAX_SEED_INPUT
 + 
MBEDTLS_CTR_DRBG_BLOCKSIZE
 + 16];

146 
tmp
[
MBEDTLS_CTR_DRBG_SEEDLEN
];

147 
key
[
MBEDTLS_CTR_DRBG_KEYSIZE
];

148 
chaö
[
MBEDTLS_CTR_DRBG_BLOCKSIZE
];

149 *
p
, *
iv
;

150 
mbedés_´s_c⁄ãxt
 
´s_˘x
;

152 
i
, 
j
;

153 
size_t
 
buf_Àn
, 
u£_Àn
;

155 if–
d©a_Àn
 > 
MBEDTLS_CTR_DRBG_MAX_SEED_INPUT
 )

156 –
MBEDTLS_ERR_CTR_DRBG_INPUT_TOO_BIG
 );

158 
	`mem£t
–
buf
, 0, 
MBEDTLS_CTR_DRBG_MAX_SEED_INPUT
 + 
MBEDTLS_CTR_DRBG_BLOCKSIZE
 + 16 );

159 
	`mbedés_´s_öô
–&
´s_˘x
 );

168 
p
 = 
buf
 + 
MBEDTLS_CTR_DRBG_BLOCKSIZE
;

169 *
p
++ = ( 
d©a_Àn
 >> 24 ) & 0xff;

170 *
p
++ = ( 
d©a_Àn
 >> 16 ) & 0xff;

171 *
p
++ = ( 
d©a_Àn
 >> 8 ) & 0xff;

172 *
p
++ = ( 
d©a_Àn
 ) & 0xff;

173 
p
 += 3;

174 *
p
++ = 
MBEDTLS_CTR_DRBG_SEEDLEN
;

175 
	`mem˝y
–
p
, 
d©a
, 
d©a_Àn
 );

176 
p
[
d©a_Àn
] = 0x80;

178 
buf_Àn
 = 
MBEDTLS_CTR_DRBG_BLOCKSIZE
 + 8 + 
d©a_Àn
 + 1;

180  
i
 = 0; i < 
MBEDTLS_CTR_DRBG_KEYSIZE
; i++ )

181 
key
[
i
] = i;

183 
	`mbedés_´s_£tkey_íc
–&
´s_˘x
, 
key
, 
MBEDTLS_CTR_DRBG_KEYBITS
 );

188  
j
 = 0; j < 
MBEDTLS_CTR_DRBG_SEEDLEN
; j +
MBEDTLS_CTR_DRBG_BLOCKSIZE
 )

190 
p
 = 
buf
;

191 
	`mem£t
–
chaö
, 0, 
MBEDTLS_CTR_DRBG_BLOCKSIZE
 );

192 
u£_Àn
 = 
buf_Àn
;

194  
u£_Àn
 > 0 )

196  
i
 = 0; i < 
MBEDTLS_CTR_DRBG_BLOCKSIZE
; i++ )

197 
chaö
[
i
] ^
p
[i];

198 
p
 +
MBEDTLS_CTR_DRBG_BLOCKSIZE
;

199 
u£_Àn
 -–u£_À¿>
MBEDTLS_CTR_DRBG_BLOCKSIZE
 ) ?

200 
MBEDTLS_CTR_DRBG_BLOCKSIZE
 : 
u£_Àn
;

202 
	`mbedés_´s_¸y±_ecb
–&
´s_˘x
, 
MBEDTLS_AES_ENCRYPT
, 
chaö
, chain );

205 
	`mem˝y
–
tmp
 + 
j
, 
chaö
, 
MBEDTLS_CTR_DRBG_BLOCKSIZE
 );

210 
buf
[3]++;

216 
	`mbedés_´s_£tkey_íc
–&
´s_˘x
, 
tmp
, 
MBEDTLS_CTR_DRBG_KEYBITS
 );

217 
iv
 = 
tmp
 + 
MBEDTLS_CTR_DRBG_KEYSIZE
;

218 
p
 = 
ouçut
;

220  
j
 = 0; j < 
MBEDTLS_CTR_DRBG_SEEDLEN
; j +
MBEDTLS_CTR_DRBG_BLOCKSIZE
 )

222 
	`mbedés_´s_¸y±_ecb
–&
´s_˘x
, 
MBEDTLS_AES_ENCRYPT
, 
iv
, iv );

223 
	`mem˝y
–
p
, 
iv
, 
MBEDTLS_CTR_DRBG_BLOCKSIZE
 );

224 
p
 +
MBEDTLS_CTR_DRBG_BLOCKSIZE
;

227 
	`mbedés_´s_‰ì
–&
´s_˘x
 );

230 
	}
}

232 
	$˘r_drbg_upd©e_öã∫Æ
–
mbedés_˘r_drbg_c⁄ãxt
 *
˘x
,

233 c⁄° 
d©a
[
MBEDTLS_CTR_DRBG_SEEDLEN
] )

235 
tmp
[
MBEDTLS_CTR_DRBG_SEEDLEN
];

236 *
p
 = 
tmp
;

237 
i
, 
j
;

239 
	`mem£t
–
tmp
, 0, 
MBEDTLS_CTR_DRBG_SEEDLEN
 );

241  
j
 = 0; j < 
MBEDTLS_CTR_DRBG_SEEDLEN
; j +
MBEDTLS_CTR_DRBG_BLOCKSIZE
 )

246  
i
 = 
MBEDTLS_CTR_DRBG_BLOCKSIZE
; i > 0; i-- )

247 if–++
˘x
->
cou¡î
[
i
 - 1] != 0 )

253 
	`mbedés_´s_¸y±_ecb
–&
˘x
->
´s_˘x
, 
MBEDTLS_AES_ENCRYPT
, ctx->
cou¡î
, 
p
 );

255 
p
 +
MBEDTLS_CTR_DRBG_BLOCKSIZE
;

258  
i
 = 0; i < 
MBEDTLS_CTR_DRBG_SEEDLEN
; i++ )

259 
tmp
[
i
] ^
d©a
[i];

264 
	`mbedés_´s_£tkey_íc
–&
˘x
->
´s_˘x
, 
tmp
, 
MBEDTLS_CTR_DRBG_KEYBITS
 );

265 
	`mem˝y
–
˘x
->
cou¡î
, 
tmp
 + 
MBEDTLS_CTR_DRBG_KEYSIZE
, 
MBEDTLS_CTR_DRBG_BLOCKSIZE
 );

268 
	}
}

270 
	$mbedés_˘r_drbg_upd©e
–
mbedés_˘r_drbg_c⁄ãxt
 *
˘x
,

271 c⁄° *
addôi⁄Æ
, 
size_t
 
add_Àn
 )

273 
add_öput
[
MBEDTLS_CTR_DRBG_SEEDLEN
];

275 if–
add_Àn
 > 0 )

279 if–
add_Àn
 > 
MBEDTLS_CTR_DRBG_MAX_SEED_INPUT
 )

280 
add_Àn
 = 
MBEDTLS_CTR_DRBG_MAX_SEED_INPUT
;

282 
	`block_cùhî_df
–
add_öput
, 
addôi⁄Æ
, 
add_Àn
 );

283 
	`˘r_drbg_upd©e_öã∫Æ
–
˘x
, 
add_öput
 );

285 
	}
}

287 
	$mbedés_˘r_drbg_ª£ed
–
mbedés_˘r_drbg_c⁄ãxt
 *
˘x
,

288 c⁄° *
addôi⁄Æ
, 
size_t
 
Àn
 )

290 
£ed
[
MBEDTLS_CTR_DRBG_MAX_SEED_INPUT
];

291 
size_t
 
£edÀn
 = 0;

293 if–
˘x
->
íå›y_Àn
 + 
Àn
 > 
MBEDTLS_CTR_DRBG_MAX_SEED_INPUT
 )

294 –
MBEDTLS_ERR_CTR_DRBG_INPUT_TOO_BIG
 );

296 
	`mem£t
–
£ed
, 0, 
MBEDTLS_CTR_DRBG_MAX_SEED_INPUT
 );

301 if–0 !
˘x
->
	`f_íå›y
–˘x->
p_íå›y
, 
£ed
,

302 
˘x
->
íå›y_Àn
 ) )

304 –
MBEDTLS_ERR_CTR_DRBG_ENTROPY_SOURCE_FAILED
 );

307 
£edÀn
 +
˘x
->
íå›y_Àn
;

312 if–
addôi⁄Æ
 && 
Àn
 )

314 
	`mem˝y
–
£ed
 + 
£edÀn
, 
addôi⁄Æ
, 
Àn
 );

315 
£edÀn
 +
Àn
;

321 
	`block_cùhî_df
–
£ed
, sìd, 
£edÀn
 );

326 
	`˘r_drbg_upd©e_öã∫Æ
–
˘x
, 
£ed
 );

327 
˘x
->
ª£ed_cou¡î
 = 1;

330 
	}
}

332 
	$mbedés_˘r_drbg_øndom_wôh_add
–*
p_∫g
,

333 *
ouçut
, 
size_t
 
ouçut_Àn
,

334 c⁄° *
addôi⁄Æ
, 
size_t
 
add_Àn
 )

336 
ªt
 = 0;

337 
mbedés_˘r_drbg_c⁄ãxt
 *
˘x
 = (mbedés_˘r_drbg_c⁄ãxà*Ë
p_∫g
;

338 
add_öput
[
MBEDTLS_CTR_DRBG_SEEDLEN
];

339 *
p
 = 
ouçut
;

340 
tmp
[
MBEDTLS_CTR_DRBG_BLOCKSIZE
];

341 
i
;

342 
size_t
 
u£_Àn
;

344 if–
ouçut_Àn
 > 
MBEDTLS_CTR_DRBG_MAX_REQUEST
 )

345 –
MBEDTLS_ERR_CTR_DRBG_REQUEST_TOO_BIG
 );

347 if–
add_Àn
 > 
MBEDTLS_CTR_DRBG_MAX_INPUT
 )

348 –
MBEDTLS_ERR_CTR_DRBG_INPUT_TOO_BIG
 );

350 
	`mem£t
–
add_öput
, 0, 
MBEDTLS_CTR_DRBG_SEEDLEN
 );

352 if–
˘x
->
ª£ed_cou¡î
 > ctx->
ª£ed_öãrvÆ
 ||

353 
˘x
->
¥edi˘i⁄_ªsi°™˚
 )

355 if––
ªt
 = 
	`mbedés_˘r_drbg_ª£ed
–
˘x
, 
addôi⁄Æ
, 
add_Àn
 ) ) != 0 )

356 –
ªt
 );

358 
add_Àn
 = 0;

361 if–
add_Àn
 > 0 )

363 
	`block_cùhî_df
–
add_öput
, 
addôi⁄Æ
, 
add_Àn
 );

364 
	`˘r_drbg_upd©e_öã∫Æ
–
˘x
, 
add_öput
 );

367  
ouçut_Àn
 > 0 )

372  
i
 = 
MBEDTLS_CTR_DRBG_BLOCKSIZE
; i > 0; i-- )

373 if–++
˘x
->
cou¡î
[
i
 - 1] != 0 )

379 
	`mbedés_´s_¸y±_ecb
–&
˘x
->
´s_˘x
, 
MBEDTLS_AES_ENCRYPT
, ctx->
cou¡î
, 
tmp
 );

381 
u£_Àn
 = ( 
ouçut_Àn
 > 
MBEDTLS_CTR_DRBG_BLOCKSIZE
 ) ? MBEDTLS_CTR_DRBG_BLOCKSIZE :

382 
ouçut_Àn
;

386 
	`mem˝y
–
p
, 
tmp
, 
u£_Àn
 );

387 
p
 +
u£_Àn
;

388 
ouçut_Àn
 -
u£_Àn
;

391 
	`˘r_drbg_upd©e_öã∫Æ
–
˘x
, 
add_öput
 );

393 
˘x
->
ª£ed_cou¡î
++;

396 
	}
}

398 
	$mbedés_˘r_drbg_øndom
–*
p_∫g
, *
ouçut
, 
size_t
 
ouçut_Àn
 )

400 
ªt
;

401 
mbedés_˘r_drbg_c⁄ãxt
 *
˘x
 = (mbedés_˘r_drbg_c⁄ãxà*Ë
p_∫g
;

403 #i‡
	`deföed
(
MBEDTLS_THREADING_C
)

404 if––
ªt
 = 
	`mbedés_muãx_lock
–&
˘x
->
muãx
 ) ) != 0 )

405 –
ªt
 );

408 
ªt
 = 
	`mbedés_˘r_drbg_øndom_wôh_add
–
˘x
, 
ouçut
, 
ouçut_Àn
, 
NULL
, 0 );

410 #i‡
	`deföed
(
MBEDTLS_THREADING_C
)

411 if–
	`mbedés_muãx_u∆ock
–&
˘x
->
muãx
 ) != 0 )

412 –
MBEDTLS_ERR_THREADING_MUTEX_ERROR
 );

415 –
ªt
 );

416 
	}
}

418 #i‡
deföed
(
MBEDTLS_FS_IO
)

419 
	$mbedés_˘r_drbg_wrôe_£ed_fûe
–
mbedés_˘r_drbg_c⁄ãxt
 *
˘x
, c⁄° *
∑th
 )

421 
ªt
 = 
MBEDTLS_ERR_CTR_DRBG_FILE_IO_ERROR
;

422 
FILE
 *
f
;

423 
buf
[ 
MBEDTLS_CTR_DRBG_MAX_INPUT
 ];

425 if––
f
 = 
	`f›í
–
∑th
, "wb" ) ) =
NULL
 )

426 –
MBEDTLS_ERR_CTR_DRBG_FILE_IO_ERROR
 );

428 if––
ªt
 = 
	`mbedés_˘r_drbg_øndom
–
˘x
, 
buf
, 
MBEDTLS_CTR_DRBG_MAX_INPUT
 ) ) != 0 )

429 
exô
;

431 if–
	`fwrôe
–
buf
, 1, 
MBEDTLS_CTR_DRBG_MAX_INPUT
, 
f
 ) != MBEDTLS_CTR_DRBG_MAX_INPUT )

433 
ªt
 = 
MBEDTLS_ERR_CTR_DRBG_FILE_IO_ERROR
;

434 
exô
;

437 
ªt
 = 0;

439 
exô
:

440 
	`f˛o£
–
f
 );

441 –
ªt
 );

442 
	}
}

444 
	$mbedés_˘r_drbg_upd©e_£ed_fûe
–
mbedés_˘r_drbg_c⁄ãxt
 *
˘x
, c⁄° *
∑th
 )

446 
FILE
 *
f
;

447 
size_t
 
n
;

448 
buf
[ 
MBEDTLS_CTR_DRBG_MAX_INPUT
 ];

450 if––
f
 = 
	`f›í
–
∑th
, "rb" ) ) =
NULL
 )

451 –
MBEDTLS_ERR_CTR_DRBG_FILE_IO_ERROR
 );

453 
	`f£ek
–
f
, 0, 
SEEK_END
 );

454 
n
 = (
size_t
Ë
	`·ñl
–
f
 );

455 
	`f£ek
–
f
, 0, 
SEEK_SET
 );

457 if–
n
 > 
MBEDTLS_CTR_DRBG_MAX_INPUT
 )

459 
	`f˛o£
–
f
 );

460 –
MBEDTLS_ERR_CTR_DRBG_INPUT_TOO_BIG
 );

463 if–
	`‰ód
–
buf
, 1, 
n
, 
f
 ) !=Ç )

465 
	`f˛o£
–
f
 );

466 –
MBEDTLS_ERR_CTR_DRBG_FILE_IO_ERROR
 );

469 
	`f˛o£
–
f
 );

471 
	`mbedés_˘r_drbg_upd©e
–
˘x
, 
buf
, 
n
 );

473 –
	`mbedés_˘r_drbg_wrôe_£ed_fûe
–
˘x
, 
∑th
 ) );

474 
	}
}

477 #i‡
deföed
(
MBEDTLS_SELF_TEST
)

479 c⁄° 
	gíå›y_sour˚_¥
[96] =

493 c⁄° 
	gíå›y_sour˚_n›r
[64] =

503 c⁄° 
	gn⁄˚_≥rs_¥
[16] =

507 c⁄° 
	gn⁄˚_≥rs_n›r
[16] =

511 c⁄° 
	gªsu…_¥
[16] =

515 c⁄° 
	gªsu…_n›r
[16] =

519 
size_t
 
	gã°_off£t
;

520 
	$˘r_drbg_£lf_ã°_íå›y
–*
d©a
, *
buf
,

521 
size_t
 
Àn
 )

523 c⁄° *
p
 = 
d©a
;

524 
	`mem˝y
–
buf
, 
p
 + 
ã°_off£t
, 
Àn
 );

525 
ã°_off£t
 +
Àn
;

527 
	}
}

529 
	#CHK
–
c
 ) if( (c) != 0 ) \

531 if–
vîbo£
 != 0 ) \

532 
	`mbedés_¥ötf
( "failed\n" ); \

534 }

	)

539 
	$mbedés_˘r_drbg_£lf_ã°
–
vîbo£
 )

541 
mbedés_˘r_drbg_c⁄ãxt
 
˘x
;

542 
buf
[16];

544 
	`mbedés_˘r_drbg_öô
–&
˘x
 );

549 if–
vîbo£
 != 0 )

550 
	`mbedés_¥ötf
( " CTR_DRBG (PR = TRUE) : " );

552 
ã°_off£t
 = 0;

553 
	`CHK
–
	`mbedés_˘r_drbg_£ed_íå›y_Àn
–&
˘x
, 
˘r_drbg_£lf_ã°_íå›y
,

554 (*Ë
íå›y_sour˚_¥
, 
n⁄˚_≥rs_¥
, 16, 32 ) );

555 
	`mbedés_˘r_drbg_£t_¥edi˘i⁄_ªsi°™˚
–&
˘x
, 
MBEDTLS_CTR_DRBG_PR_ON
 );

556 
	`CHK
–
	`mbedés_˘r_drbg_øndom
–&
˘x
, 
buf
, 
MBEDTLS_CTR_DRBG_BLOCKSIZE
 ) );

557 
	`CHK
–
	`mbedés_˘r_drbg_øndom
–&
˘x
, 
buf
, 
MBEDTLS_CTR_DRBG_BLOCKSIZE
 ) );

558 
	`CHK
–
	`memcmp
–
buf
, 
ªsu…_¥
, 
MBEDTLS_CTR_DRBG_BLOCKSIZE
 ) );

560 
	`mbedés_˘r_drbg_‰ì
–&
˘x
 );

562 if–
vîbo£
 != 0 )

563 
	`mbedés_¥ötf
( "passed\n" );

568 if–
vîbo£
 != 0 )

569 
	`mbedés_¥ötf
( " CTR_DRBG (PR = FALSE): " );

571 
	`mbedés_˘r_drbg_öô
–&
˘x
 );

573 
ã°_off£t
 = 0;

574 
	`CHK
–
	`mbedés_˘r_drbg_£ed_íå›y_Àn
–&
˘x
, 
˘r_drbg_£lf_ã°_íå›y
,

575 (*Ë
íå›y_sour˚_n›r
, 
n⁄˚_≥rs_n›r
, 16, 32 ) );

576 
	`CHK
–
	`mbedés_˘r_drbg_øndom
–&
˘x
, 
buf
, 16 ) );

577 
	`CHK
–
	`mbedés_˘r_drbg_ª£ed
–&
˘x
, 
NULL
, 0 ) );

578 
	`CHK
–
	`mbedés_˘r_drbg_øndom
–&
˘x
, 
buf
, 16 ) );

579 
	`CHK
–
	`memcmp
–
buf
, 
ªsu…_n›r
, 16 ) );

581 
	`mbedés_˘r_drbg_‰ì
–&
˘x
 );

583 if–
vîbo£
 != 0 )

584 
	`mbedés_¥ötf
( "passed\n" );

586 if–
vîbo£
 != 0 )

587 
	`mbedés_¥ötf
( "\n" );

590 
	}
}

	@/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/entropy.c

22 #i‡!
deföed
(
MBEDTLS_CONFIG_FILE
)

23 
	~"mbedés/c⁄fig.h
"

25 #ö˛udê
MBEDTLS_CONFIG_FILE


28 #i‡
deföed
(
MBEDTLS_ENTROPY_C
)

30 
	~"mbedés/íå›y.h
"

31 
	~"mbedés/íå›y_pﬁl.h
"

33 
	~<°rög.h
>

35 #i‡
deföed
(
MBEDTLS_FS_IO
)

36 
	~<°dio.h
>

39 #i‡
deföed
(
MBEDTLS_SELF_TEST
)

40 #i‡
deföed
(
MBEDTLS_PLATFORM_C
)

41 
	~"mbedés/∂©f‹m.h
"

43 
	~<°dio.h
>

44 
	#mbedés_¥ötf
 
¥ötf


	)

48 #i‡
deföed
(
MBEDTLS_HAVEGE_C
)

49 
	~"mbedés/havege.h
"

53 
	$mbedés_zîoize
–*
v
, 
size_t
 
n
 ) {

54 vﬁ©ûê*
p
 = 
v
;  
n
-- ) *p++ = 0;

55 
	}
}

57 
	#ENTROPY_MAX_LOOP
 256

	)

59 
	$mbedés_íå›y_öô
–
mbedés_íå›y_c⁄ãxt
 *
˘x
 )

61 
	`mem£t
–
˘x
, 0, (
mbedés_íå›y_c⁄ãxt
) );

63 #i‡
	`deföed
(
MBEDTLS_THREADING_C
)

64 
	`mbedés_muãx_öô
–&
˘x
->
muãx
 );

67 #i‡
	`deföed
(
MBEDTLS_ENTROPY_SHA512_ACCUMULATOR
)

68 
	`mbedés_sha512_°¨ts
–&
˘x
->
accumuœt‹
, 0 );

70 
	`mbedés_sha256_°¨ts
–&
˘x
->
accumuœt‹
, 0 );

72 #i‡
	`deföed
(
MBEDTLS_HAVEGE_C
)

73 
	`mbedés_havege_öô
–&
˘x
->
havege_d©a
 );

76 #i‡!
	`deföed
(
MBEDTLS_NO_DEFAULT_ENTROPY_SOURCES
)

77 #i‡!
	`deföed
(
MBEDTLS_NO_PLATFORM_ENTROPY
)

78 
	`mbedés_íå›y_add_sour˚
–
˘x
, 
mbedés_∂©f‹m_íå›y_pﬁl
, 
NULL
,

79 
MBEDTLS_ENTROPY_MIN_PLATFORM
,

80 
MBEDTLS_ENTROPY_SOURCE_STRONG
 );

82 #i‡
	`deföed
(
MBEDTLS_TIMING_C
)

83 
	`mbedés_íå›y_add_sour˚
–
˘x
, 
mbedés_h¨d˛ock_pﬁl
, 
NULL
,

84 
MBEDTLS_ENTROPY_MIN_HARDCLOCK
,

85 
MBEDTLS_ENTROPY_SOURCE_WEAK
 );

87 #i‡
	`deföed
(
MBEDTLS_HAVEGE_C
)

88 
	`mbedés_íå›y_add_sour˚
–
˘x
, 
mbedés_havege_pﬁl
, &˘x->
havege_d©a
,

89 
MBEDTLS_ENTROPY_MIN_HAVEGE
,

90 
MBEDTLS_ENTROPY_SOURCE_STRONG
 );

92 #i‡
	`deföed
(
MBEDTLS_ENTROPY_HARDWARE_ALT
)

93 
	`mbedés_íå›y_add_sour˚
–
˘x
, 
mbedés_h¨dw¨e_pﬁl
, 
NULL
,

94 
MBEDTLS_ENTROPY_MIN_HARDWARE
,

95 
MBEDTLS_ENTROPY_SOURCE_STRONG
 );

98 
	}
}

100 
	$mbedés_íå›y_‰ì
–
mbedés_íå›y_c⁄ãxt
 *
˘x
 )

102 #i‡
	`deföed
(
MBEDTLS_HAVEGE_C
)

103 
	`mbedés_havege_‰ì
–&
˘x
->
havege_d©a
 );

105 #i‡
	`deföed
(
MBEDTLS_THREADING_C
)

106 
	`mbedés_muãx_‰ì
–&
˘x
->
muãx
 );

108 
	`mbedés_zîoize
–
˘x
, –
mbedés_íå›y_c⁄ãxt
 ) );

109 
	}
}

111 
	$mbedés_íå›y_add_sour˚
–
mbedés_íå›y_c⁄ãxt
 *
˘x
,

112 
mbedés_íå›y_f_sour˚_±r
 
f_sour˚
, *
p_sour˚
,

113 
size_t
 
thªshﬁd
, 
°r⁄g
 )

115 
ödex
, 
ªt
 = 0;

117 #i‡
	`deföed
(
MBEDTLS_THREADING_C
)

118 if––
ªt
 = 
	`mbedés_muãx_lock
–&
˘x
->
muãx
 ) ) != 0 )

119 –
ªt
 );

122 
ödex
 = 
˘x
->
sour˚_cou¡
;

123 if–
ödex
 >
MBEDTLS_ENTROPY_MAX_SOURCES
 )

125 
ªt
 = 
MBEDTLS_ERR_ENTROPY_MAX_SOURCES
;

126 
exô
;

129 
˘x
->
sour˚
[
ödex
].
f_sour˚
 = f_source;

130 
˘x
->
sour˚
[
ödex
].
p_sour˚
 =Ö_source;

131 
˘x
->
sour˚
[
ödex
].
thªshﬁd
 =Åhreshold;

132 
˘x
->
sour˚
[
ödex
].
°r⁄g
 = strong;

134 
˘x
->
sour˚_cou¡
++;

136 
exô
:

137 #i‡
	`deföed
(
MBEDTLS_THREADING_C
)

138 if–
	`mbedés_muãx_u∆ock
–&
˘x
->
muãx
 ) != 0 )

139 –
MBEDTLS_ERR_THREADING_MUTEX_ERROR
 );

142 –
ªt
 );

143 
	}
}

148 
	$íå›y_upd©e
–
mbedés_íå›y_c⁄ãxt
 *
˘x
, 
sour˚_id
,

149 c⁄° *
d©a
, 
size_t
 
Àn
 )

151 
hódî
[2];

152 
tmp
[
MBEDTLS_ENTROPY_BLOCK_SIZE
];

153 
size_t
 
u£_Àn
 = 
Àn
;

154 c⁄° *
p
 = 
d©a
;

156 if–
u£_Àn
 > 
MBEDTLS_ENTROPY_BLOCK_SIZE
 )

158 #i‡
	`deföed
(
MBEDTLS_ENTROPY_SHA512_ACCUMULATOR
)

159 
	`mbedés_sha512
–
d©a
, 
Àn
, 
tmp
, 0 );

161 
	`mbedés_sha256
–
d©a
, 
Àn
, 
tmp
, 0 );

163 
p
 = 
tmp
;

164 
u£_Àn
 = 
MBEDTLS_ENTROPY_BLOCK_SIZE
;

167 
hódî
[0] = 
sour˚_id
;

168 
hódî
[1] = 
u£_Àn
 & 0xFF;

170 #i‡
	`deföed
(
MBEDTLS_ENTROPY_SHA512_ACCUMULATOR
)

171 
	`mbedés_sha512_upd©e
–&
˘x
->
accumuœt‹
, 
hódî
, 2 );

172 
	`mbedés_sha512_upd©e
–&
˘x
->
accumuœt‹
, 
p
, 
u£_Àn
 );

174 
	`mbedés_sha256_upd©e
–&
˘x
->
accumuœt‹
, 
hódî
, 2 );

175 
	`mbedés_sha256_upd©e
–&
˘x
->
accumuœt‹
, 
p
, 
u£_Àn
 );

179 
	}
}

181 
	$mbedés_íå›y_upd©e_m™uÆ
–
mbedés_íå›y_c⁄ãxt
 *
˘x
,

182 c⁄° *
d©a
, 
size_t
 
Àn
 )

184 
ªt
;

186 #i‡
	`deföed
(
MBEDTLS_THREADING_C
)

187 if––
ªt
 = 
	`mbedés_muãx_lock
–&
˘x
->
muãx
 ) ) != 0 )

188 –
ªt
 );

191 
ªt
 = 
	`íå›y_upd©e
–
˘x
, 
MBEDTLS_ENTROPY_SOURCE_MANUAL
, 
d©a
, 
Àn
 );

193 #i‡
	`deföed
(
MBEDTLS_THREADING_C
)

194 if–
	`mbedés_muãx_u∆ock
–&
˘x
->
muãx
 ) != 0 )

195 –
MBEDTLS_ERR_THREADING_MUTEX_ERROR
 );

198 –
ªt
 );

199 
	}
}

204 
	$íå›y_g©hî_öã∫Æ
–
mbedés_íå›y_c⁄ãxt
 *
˘x
 )

206 
ªt
, 
i
, 
have_⁄e_°r⁄g
 = 0;

207 
buf
[
MBEDTLS_ENTROPY_MAX_GATHER
];

208 
size_t
 
ﬁí
;

210 if–
˘x
->
sour˚_cou¡
 == 0 )

211 –
MBEDTLS_ERR_ENTROPY_NO_SOURCES_DEFINED
 );

216  
i
 = 0; i < 
˘x
->
sour˚_cou¡
; i++ )

218 if–
˘x
->
sour˚
[
i
].
°r⁄g
 =
MBEDTLS_ENTROPY_SOURCE_STRONG
 )

219 
have_⁄e_°r⁄g
 = 1;

221 
ﬁí
 = 0;

222 if––
ªt
 = 
˘x
->
sour˚
[
i
].
	`f_sour˚
–˘x->sour˚[i].
p_sour˚
,

223 
buf
, 
MBEDTLS_ENTROPY_MAX_GATHER
, &
ﬁí
 ) ) != 0 )

225 –
ªt
 );

231 if–
ﬁí
 > 0 )

233 
	`íå›y_upd©e
–
˘x
, (Ë
i
, 
buf
, 
ﬁí
 );

234 
˘x
->
sour˚
[
i
].
size
 +
ﬁí
;

238 if–
have_⁄e_°r⁄g
 == 0 )

239 –
MBEDTLS_ERR_ENTROPY_NO_STRONG_SOURCE
 );

242 
	}
}

247 
	$mbedés_íå›y_g©hî
–
mbedés_íå›y_c⁄ãxt
 *
˘x
 )

249 
ªt
;

251 #i‡
	`deföed
(
MBEDTLS_THREADING_C
)

252 if––
ªt
 = 
	`mbedés_muãx_lock
–&
˘x
->
muãx
 ) ) != 0 )

253 –
ªt
 );

256 
ªt
 = 
	`íå›y_g©hî_öã∫Æ
–
˘x
 );

258 #i‡
	`deföed
(
MBEDTLS_THREADING_C
)

259 if–
	`mbedés_muãx_u∆ock
–&
˘x
->
muãx
 ) != 0 )

260 –
MBEDTLS_ERR_THREADING_MUTEX_ERROR
 );

263 –
ªt
 );

264 
	}
}

266 
	$mbedés_íå›y_func
–*
d©a
, *
ouçut
, 
size_t
 
Àn
 )

268 
ªt
, 
cou¡
 = 0, 
i
, 
d⁄e
;

269 
mbedés_íå›y_c⁄ãxt
 *
˘x
 = (mbedés_íå›y_c⁄ãxà*Ë
d©a
;

270 
buf
[
MBEDTLS_ENTROPY_BLOCK_SIZE
];

272 if–
Àn
 > 
MBEDTLS_ENTROPY_BLOCK_SIZE
 )

273 –
MBEDTLS_ERR_ENTROPY_SOURCE_FAILED
 );

275 #i‡
	`deföed
(
MBEDTLS_THREADING_C
)

276 if––
ªt
 = 
	`mbedés_muãx_lock
–&
˘x
->
muãx
 ) ) != 0 )

277 –
ªt
 );

285 if–
cou¡
++ > 
ENTROPY_MAX_LOOP
 )

287 
ªt
 = 
MBEDTLS_ERR_ENTROPY_SOURCE_FAILED
;

288 
exô
;

291 if––
ªt
 = 
	`íå›y_g©hî_öã∫Æ
–
˘x
 ) ) != 0 )

292 
exô
;

294 
d⁄e
 = 1;

295  
i
 = 0; i < 
˘x
->
sour˚_cou¡
; i++ )

296 if–
˘x
->
sour˚
[
i
].
size
 < ctx->sour˚[i].
thªshﬁd
 )

297 
d⁄e
 = 0;

299  ! 
d⁄e
 );

301 
	`mem£t
–
buf
, 0, 
MBEDTLS_ENTROPY_BLOCK_SIZE
 );

303 #i‡
	`deföed
(
MBEDTLS_ENTROPY_SHA512_ACCUMULATOR
)

304 
	`mbedés_sha512_föish
–&
˘x
->
accumuœt‹
, 
buf
 );

309 
	`mem£t
–&
˘x
->
accumuœt‹
, 0, –
mbedés_sha512_c⁄ãxt
 ) );

310 
	`mbedés_sha512_°¨ts
–&
˘x
->
accumuœt‹
, 0 );

311 
	`mbedés_sha512_upd©e
–&
˘x
->
accumuœt‹
, 
buf
, 
MBEDTLS_ENTROPY_BLOCK_SIZE
 );

316 
	`mbedés_sha512
–
buf
, 
MBEDTLS_ENTROPY_BLOCK_SIZE
, buf, 0 );

318 
	`mbedés_sha256_föish
–&
˘x
->
accumuœt‹
, 
buf
 );

323 
	`mem£t
–&
˘x
->
accumuœt‹
, 0, –
mbedés_sha256_c⁄ãxt
 ) );

324 
	`mbedés_sha256_°¨ts
–&
˘x
->
accumuœt‹
, 0 );

325 
	`mbedés_sha256_upd©e
–&
˘x
->
accumuœt‹
, 
buf
, 
MBEDTLS_ENTROPY_BLOCK_SIZE
 );

330 
	`mbedés_sha256
–
buf
, 
MBEDTLS_ENTROPY_BLOCK_SIZE
, buf, 0 );

333  
i
 = 0; i < 
˘x
->
sour˚_cou¡
; i++ )

334 
˘x
->
sour˚
[
i
].
size
 = 0;

336 
	`mem˝y
–
ouçut
, 
buf
, 
Àn
 );

338 
ªt
 = 0;

340 
exô
:

341 #i‡
	`deföed
(
MBEDTLS_THREADING_C
)

342 if–
	`mbedés_muãx_u∆ock
–&
˘x
->
muãx
 ) != 0 )

343 –
MBEDTLS_ERR_THREADING_MUTEX_ERROR
 );

346 –
ªt
 );

347 
	}
}

349 #i‡
deföed
(
MBEDTLS_FS_IO
)

350 
	$mbedés_íå›y_wrôe_£ed_fûe
–
mbedés_íå›y_c⁄ãxt
 *
˘x
, c⁄° *
∑th
 )

352 
ªt
 = 
MBEDTLS_ERR_ENTROPY_FILE_IO_ERROR
;

353 
FILE
 *
f
;

354 
buf
[
MBEDTLS_ENTROPY_BLOCK_SIZE
];

356 if––
f
 = 
	`f›í
–
∑th
, "wb" ) ) =
NULL
 )

357 –
MBEDTLS_ERR_ENTROPY_FILE_IO_ERROR
 );

359 if––
ªt
 = 
	`mbedés_íå›y_func
–
˘x
, 
buf
, 
MBEDTLS_ENTROPY_BLOCK_SIZE
 ) ) != 0 )

360 
exô
;

362 if–
	`fwrôe
–
buf
, 1, 
MBEDTLS_ENTROPY_BLOCK_SIZE
, 
f
 ) != MBEDTLS_ENTROPY_BLOCK_SIZE )

364 
ªt
 = 
MBEDTLS_ERR_ENTROPY_FILE_IO_ERROR
;

365 
exô
;

368 
ªt
 = 0;

370 
exô
:

371 
	`f˛o£
–
f
 );

372 –
ªt
 );

373 
	}
}

375 
	$mbedés_íå›y_upd©e_£ed_fûe
–
mbedés_íå›y_c⁄ãxt
 *
˘x
, c⁄° *
∑th
 )

377 
FILE
 *
f
;

378 
size_t
 
n
;

379 
buf
[ 
MBEDTLS_ENTROPY_MAX_SEED_SIZE
 ];

381 if––
f
 = 
	`f›í
–
∑th
, "rb" ) ) =
NULL
 )

382 –
MBEDTLS_ERR_ENTROPY_FILE_IO_ERROR
 );

384 
	`f£ek
–
f
, 0, 
SEEK_END
 );

385 
n
 = (
size_t
Ë
	`·ñl
–
f
 );

386 
	`f£ek
–
f
, 0, 
SEEK_SET
 );

388 if–
n
 > 
MBEDTLS_ENTROPY_MAX_SEED_SIZE
 )

389 
n
 = 
MBEDTLS_ENTROPY_MAX_SEED_SIZE
;

391 if–
	`‰ód
–
buf
, 1, 
n
, 
f
 ) !=Ç )

393 
	`f˛o£
–
f
 );

394 –
MBEDTLS_ERR_ENTROPY_FILE_IO_ERROR
 );

397 
	`f˛o£
–
f
 );

399 
	`mbedés_íå›y_upd©e_m™uÆ
–
˘x
, 
buf
, 
n
 );

401 –
	`mbedés_íå›y_wrôe_£ed_fûe
–
˘x
, 
∑th
 ) );

402 
	}
}

405 #i‡
deföed
(
MBEDTLS_SELF_TEST
)

409 
	$íå›y_dummy_sour˚
–*
d©a
, *
ouçut
,

410 
size_t
 
Àn
, size_à*
ﬁí
 )

412 ((Ë
d©a
);

414 
	`mem£t
–
ouçut
, 0x2a, 
Àn
 );

415 *
ﬁí
 = 
Àn
;

418 
	}
}

425 
	$mbedés_íå›y_£lf_ã°
–
vîbo£
 )

427 
ªt
 = 0;

428 
mbedés_íå›y_c⁄ãxt
 
˘x
;

429 
buf
[
MBEDTLS_ENTROPY_BLOCK_SIZE
] = { 0 };

430 
acc
[
MBEDTLS_ENTROPY_BLOCK_SIZE
] = { 0 };

431 
size_t
 
i
, 
j
;

433 if–
vîbo£
 != 0 )

434 
	`mbedés_¥ötf
( " ENTROPYÅest: " );

436 
	`mbedés_íå›y_öô
–&
˘x
 );

439 if––
ªt
 = 
	`mbedés_íå›y_g©hî
–&
˘x
 ) ) != 0 )

440 
˛ónup
;

442 
ªt
 = 
	`mbedés_íå›y_add_sour˚
–&
˘x
, 
íå›y_dummy_sour˚
, 
NULL
, 16,

443 
MBEDTLS_ENTROPY_SOURCE_WEAK
 );

444 if–
ªt
 != 0 )

445 
˛ónup
;

447 if––
ªt
 = 
	`mbedés_íå›y_upd©e_m™uÆ
–&
˘x
, 
buf
,  buf ) ) != 0 )

448 
˛ónup
;

458  
i
 = 0; i < 8; i++ )

460 if––
ªt
 = 
	`mbedés_íå›y_func
–&
˘x
, 
buf
, ( buf ) ) ) != 0 )

461 
˛ónup
;

463  
j
 = 0; j < –
buf
 ); j++ )

464 
acc
[
j
] |
buf
[j];

467  
j
 = 0; j < –
buf
 ); j++ )

469 if–
acc
[
j
] == 0 )

471 
ªt
 = 1;

472 
˛ónup
;

476 
˛ónup
:

477 
	`mbedés_íå›y_‰ì
–&
˘x
 );

479 if–
vîbo£
 != 0 )

481 if–
ªt
 != 0 )

482 
	`mbedés_¥ötf
( "failed\n" );

484 
	`mbedés_¥ötf
( "passed\n" );

486 
	`mbedés_¥ötf
( "\n" );

489 –
ªt
 != 0 );

490 
	}
}

	@/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/entropy_poll.c

22 #i‡!
deföed
(
MBEDTLS_CONFIG_FILE
)

23 
	~"mbedés/c⁄fig.h
"

25 #ö˛udê
MBEDTLS_CONFIG_FILE


28 #i‡
deföed
(
MBEDTLS_ENTROPY_C
)

30 
	~"mbedés/íå›y.h
"

31 
	~"mbedés/íå›y_pﬁl.h
"

33 #i‡
deföed
(
MBEDTLS_TIMING_C
)

34 
	~<°rög.h
>

35 
	~"mbedés/timög.h
"

37 #i‡
deföed
(
MBEDTLS_HAVEGE_C
)

38 
	~"mbedés/havege.h
"

41 #i‡!
deföed
(
MBEDTLS_NO_PLATFORM_ENTROPY
)

42 #i‡
deföed
(
_WIN32
Ë&& !deföed(
EFIX64
Ë&& !deföed(
EFI32
)

44 #i‡!
deföed
(
_WIN32_WINNT
)

45 
	#_WIN32_WINNT
 0x0400

	)

47 
	~<wödows.h
>

48 
	~<wö¸y±.h
>

50 
	$mbedés_∂©f‹m_íå›y_pﬁl
–*
d©a
, *
ouçut
, 
size_t
 
Àn
,

51 
size_t
 *
ﬁí
 )

53 
HCRYPTPROV
 
¥ovidî
;

54 ((Ë
d©a
);

55 *
ﬁí
 = 0;

57 if–
	`Cry±AcquúeC⁄ãxt
–&
¥ovidî
, 
NULL
, NULL,

58 
PROV_RSA_FULL
, 
CRYPT_VERIFYCONTEXT
 ) =
FALSE
 )

60 –
MBEDTLS_ERR_ENTROPY_SOURCE_FAILED
 );

63 if–
	`Cry±GíR™dom
–
¥ovidî
, (
DWORD
Ë
Àn
, 
ouçut
 ) =
FALSE
 )

64 –
MBEDTLS_ERR_ENTROPY_SOURCE_FAILED
 );

66 
	`Cry±Rñó£C⁄ãxt
–
¥ovidî
, 0 );

67 *
ﬁí
 = 
Àn
;

70 
	}
}

78 #i‡
deföed
(
__löux__
Ë&& deföed(
__GLIBC__
)

79 
	~<uni°d.h
>

80 
	~<sys/sysˇŒ.h
>

81 #i‡
deföed
(
SYS_gëøndom
)

82 
	#HAVE_GETRANDOM


	)

84 
	$gëøndom_wøµî
–*
buf
, 
size_t
 
buÊí
, 
Êags
 )

87 #i‡
	`deföed
(
__has_„©uª
)

88 #i‡
	`__has_„©uª
(
mem‹y_ßnôizî
)

89 
	`mem£t
–
buf
, 0, 
buÊí
 );

93 –
	`sysˇŒ
–
SYS_gëøndom
, 
buf
, 
buÊí
, 
Êags
 ) );

94 
	}
}

96 
	~<sys/ut¢ame.h
>

98 
	$check_vîsi⁄_3_17_∂us
( )

100 
mö‹
;

101 
ut¢ame
 
un
;

102 c⁄° *
vî
;

105 
	`u«me
(&
un
);

106 
vî
 = 
un
.
ªÀa£
;

109 if–
vî
[0] < '3' || ver[0] > '9' || ver [1] != '.' )

112 if–
vî
[0] - '0' > 3 )

117 if–
vî
[2] < '0' || ver[2] > '9' )

120 
mö‹
 = 
vî
[2] - '0';

122 if–
vî
[3] >= '0' && ver[3] <= '9' )

123 
mö‹
 = 10 * mö‹ + 
vî
[3] - '0';

124 if–
vî
 [3] != '.' )

127 if–
mö‹
 < 17 )

131 
	}
}

132 
	ghas_gëøndom
 = -1;

136 
	~<°dio.h
>

138 
	$mbedés_∂©f‹m_íå›y_pﬁl
–*
d©a
,

139 *
ouçut
, 
size_t
 
Àn
, size_à*
ﬁí
 )

141 
FILE
 *
fûe
;

142 
size_t
 
ªad_Àn
;

143 ((Ë
d©a
);

145 #i‡
	`deföed
(
HAVE_GETRANDOM
)

146 if–
has_gëøndom
 == -1 )

147 
has_gëøndom
 = ( 
	`check_vîsi⁄_3_17_∂us
() == 0 );

149 if–
has_gëøndom
 )

151 
ªt
;

153 if––
ªt
 = 
	`gëøndom_wøµî
–
ouçut
, 
Àn
, 0 ) ) < 0 )

154 –
MBEDTLS_ERR_ENTROPY_SOURCE_FAILED
 );

156 *
ﬁí
 = 
ªt
;

161 *
ﬁí
 = 0;

163 
fûe
 = 
	`f›í
( "/dev/urandom", "rb" );

164 if–
fûe
 =
NULL
 )

165 –
MBEDTLS_ERR_ENTROPY_SOURCE_FAILED
 );

167 
ªad_Àn
 = 
	`‰ód
–
ouçut
, 1, 
Àn
, 
fûe
 );

168 if–
ªad_Àn
 !
Àn
 )

170 
	`f˛o£
–
fûe
 );

171 –
MBEDTLS_ERR_ENTROPY_SOURCE_FAILED
 );

174 
	`f˛o£
–
fûe
 );

175 *
ﬁí
 = 
Àn
;

178 
	}
}

182 #i‡
deföed
(
MBEDTLS_TIMING_C
)

183 
	$mbedés_h¨d˛ock_pﬁl
–*
d©a
,

184 *
ouçut
, 
size_t
 
Àn
, size_à*
ﬁí
 )

186 
timî
 = 
	`mbedés_timög_h¨d˛ock
();

187 ((Ë
d©a
);

188 *
ﬁí
 = 0;

190 if–
Àn
 < () )

193 
	`mem˝y
–
ouçut
, &
timî
, () );

194 *
ﬁí
 = ();

197 
	}
}

200 #i‡
deföed
(
MBEDTLS_HAVEGE_C
)

201 
	$mbedés_havege_pﬁl
–*
d©a
,

202 *
ouçut
, 
size_t
 
Àn
, size_à*
ﬁí
 )

204 
mbedés_havege_°©e
 *
hs
 = (mbedés_havege_°©ê*Ë
d©a
;

205 *
ﬁí
 = 0;

207 if–
	`mbedés_havege_øndom
–
hs
, 
ouçut
, 
Àn
 ) != 0 )

208 –
MBEDTLS_ERR_ENTROPY_SOURCE_FAILED
 );

210 *
ﬁí
 = 
Àn
;

213 
	}
}

	@/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/mbedtls/aes.h

23 #i‚de‡
MBEDTLS_AES_H


24 
	#MBEDTLS_AES_H


	)

26 #i‡!
deföed
(
MBEDTLS_CONFIG_FILE
)

27 
	~"c⁄fig.h
"

29 #ö˛udê
MBEDTLS_CONFIG_FILE


32 
	~<°ddef.h
>

33 
	~<°döt.h
>

36 
	#MBEDTLS_AES_ENCRYPT
 1

	)

37 
	#MBEDTLS_AES_DECRYPT
 0

	)

39 
	#MBEDTLS_ERR_AES_INVALID_KEY_LENGTH
 -0x0020

	)

40 
	#MBEDTLS_ERR_AES_INVALID_INPUT_LENGTH
 -0x0022

	)

42 #i‡!
deföed
(
MBEDTLS_AES_ALT
)

46 #ifde‡
__˝lu•lus


60 
ƒ
;

61 
uöt32_t
 *
rk
;

62 
uöt32_t
 
buf
[68];

64 
	tmbedés_´s_c⁄ãxt
;

71 
mbedés_´s_öô
–
mbedés_´s_c⁄ãxt
 *
˘x
 );

78 
mbedés_´s_‰ì
–
mbedés_´s_c⁄ãxt
 *
˘x
 );

89 
mbedés_´s_£tkey_íc
–
mbedés_´s_c⁄ãxt
 *
˘x
, c⁄° *
key
,

90 
keybôs
 );

101 
mbedés_´s_£tkey_dec
–
mbedés_´s_c⁄ãxt
 *
˘x
, c⁄° *
key
,

102 
keybôs
 );

114 
mbedés_´s_¸y±_ecb
–
mbedés_´s_c⁄ãxt
 *
˘x
,

115 
mode
,

116 c⁄° 
öput
[16],

117 
ouçut
[16] );

119 #i‡
deföed
(
MBEDTLS_CIPHER_MODE_CBC
)

142 
mbedés_´s_¸y±_cbc
–
mbedés_´s_c⁄ãxt
 *
˘x
,

143 
mode
,

144 
size_t
 
Àngth
,

145 
iv
[16],

146 c⁄° *
öput
,

147 *
ouçut
 );

150 #i‡
deföed
(
MBEDTLS_CIPHER_MODE_CFB
)

176 
mbedés_´s_¸y±_cfb128
–
mbedés_´s_c⁄ãxt
 *
˘x
,

177 
mode
,

178 
size_t
 
Àngth
,

179 
size_t
 *
iv_off
,

180 
iv
[16],

181 c⁄° *
öput
,

182 *
ouçut
 );

208 
mbedés_´s_¸y±_cfb8
–
mbedés_´s_c⁄ãxt
 *
˘x
,

209 
mode
,

210 
size_t
 
Àngth
,

211 
iv
[16],

212 c⁄° *
öput
,

213 *
ouçut
 );

216 #i‡
deföed
(
MBEDTLS_CIPHER_MODE_CTR
)

239 
mbedés_´s_¸y±_˘r
–
mbedés_´s_c⁄ãxt
 *
˘x
,

240 
size_t
 
Àngth
,

241 
size_t
 *
nc_off
,

242 
n⁄˚_cou¡î
[16],

243 
°ªam_block
[16],

244 c⁄° *
öput
,

245 *
ouçut
 );

257 
mbedés_´s_í¸y±
–
mbedés_´s_c⁄ãxt
 *
˘x
,

258 c⁄° 
öput
[16],

259 
ouçut
[16] );

270 
mbedés_´s_de¸y±
–
mbedés_´s_c⁄ãxt
 *
˘x
,

271 c⁄° 
öput
[16],

272 
ouçut
[16] );

274 #ifde‡
__˝lu•lus


279 
	~"´s_Æt.h
"

282 #ifde‡
__˝lu•lus


291 
mbedés_´s_£lf_ã°
–
vîbo£
 );

293 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/mbedtls/asn1.h

23 #i‚de‡
MBEDTLS_ASN1_H


24 
	#MBEDTLS_ASN1_H


	)

26 #i‡!
deföed
(
MBEDTLS_CONFIG_FILE
)

27 
	~"c⁄fig.h
"

29 #ö˛udê
MBEDTLS_CONFIG_FILE


32 
	~<°ddef.h
>

34 #i‡
deföed
(
MBEDTLS_BIGNUM_C
)

35 
	~"bignum.h
"

50 
	#MBEDTLS_ERR_ASN1_OUT_OF_DATA
 -0x0060

	)

51 
	#MBEDTLS_ERR_ASN1_UNEXPECTED_TAG
 -0x0062

	)

52 
	#MBEDTLS_ERR_ASN1_INVALID_LENGTH
 -0x0064

	)

53 
	#MBEDTLS_ERR_ASN1_LENGTH_MISMATCH
 -0x0066

	)

54 
	#MBEDTLS_ERR_ASN1_INVALID_DATA
 -0x0068

	)

55 
	#MBEDTLS_ERR_ASN1_ALLOC_FAILED
 -0x006A

	)

56 
	#MBEDTLS_ERR_ASN1_BUF_TOO_SMALL
 -0x006C

	)

71 
	#MBEDTLS_ASN1_BOOLEAN
 0x01

	)

72 
	#MBEDTLS_ASN1_INTEGER
 0x02

	)

73 
	#MBEDTLS_ASN1_BIT_STRING
 0x03

	)

74 
	#MBEDTLS_ASN1_OCTET_STRING
 0x04

	)

75 
	#MBEDTLS_ASN1_NULL
 0x05

	)

76 
	#MBEDTLS_ASN1_OID
 0x06

	)

77 
	#MBEDTLS_ASN1_UTF8_STRING
 0x0C

	)

78 
	#MBEDTLS_ASN1_SEQUENCE
 0x10

	)

79 
	#MBEDTLS_ASN1_SET
 0x11

	)

80 
	#MBEDTLS_ASN1_PRINTABLE_STRING
 0x13

	)

81 
	#MBEDTLS_ASN1_T61_STRING
 0x14

	)

82 
	#MBEDTLS_ASN1_IA5_STRING
 0x16

	)

83 
	#MBEDTLS_ASN1_UTC_TIME
 0x17

	)

84 
	#MBEDTLS_ASN1_GENERALIZED_TIME
 0x18

	)

85 
	#MBEDTLS_ASN1_UNIVERSAL_STRING
 0x1C

	)

86 
	#MBEDTLS_ASN1_BMP_STRING
 0x1E

	)

87 
	#MBEDTLS_ASN1_PRIMITIVE
 0x00

	)

88 
	#MBEDTLS_ASN1_CONSTRUCTED
 0x20

	)

89 
	#MBEDTLS_ASN1_CONTEXT_SPECIFIC
 0x80

	)

94 
	#MBEDTLS_OID_SIZE
(
x
Ë((xË- 1)

	)

102 
	#MBEDTLS_OID_CMP
(
oid_°r
, 
oid_buf
) \

103 ––
	`MBEDTLS_OID_SIZE
(
oid_°r
Ë!(
oid_buf
)->
Àn
 ) || \

104 
	`memcmp
–(
oid_°r
), (
oid_buf
)->
p
, (oid_buf)->
Àn
Ë!0 )

	)

106 #ifde‡
__˝lu•lus


118 
	smbedés_a¢1_buf


120 
èg
;

121 
size_t
 
Àn
;

122 *
p
;

124 
	tmbedés_a¢1_buf
;

129 
	smbedés_a¢1_bô°rög


131 
size_t
 
Àn
;

132 
unu£d_bôs
;

133 *
p
;

135 
	tmbedés_a¢1_bô°rög
;

140 
	smbedés_a¢1_£quí˚


142 
mbedés_a¢1_buf
 
buf
;

143 
mbedés_a¢1_£quí˚
 *
√xt
;

145 
	tmbedés_a¢1_£quí˚
;

150 
	smbedés_a¢1_«med_d©a


152 
mbedés_a¢1_buf
 
oid
;

153 
mbedés_a¢1_buf
 
vÆ
;

154 
mbedés_a¢1_«med_d©a
 *
√xt
;

155 
√xt_mîged
;

157 
	tmbedés_a¢1_«med_d©a
;

171 
mbedés_a¢1_gë_Àn
–**
p
,

172 c⁄° *
íd
,

173 
size_t
 *
Àn
 );

187 
mbedés_a¢1_gë_èg
–**
p
,

188 c⁄° *
íd
,

189 
size_t
 *
Àn
, 
èg
 );

201 
mbedés_a¢1_gë_boﬁ
–**
p
,

202 c⁄° *
íd
,

203 *
vÆ
 );

215 
mbedés_a¢1_gë_öt
–**
p
,

216 c⁄° *
íd
,

217 *
vÆ
 );

229 
mbedés_a¢1_gë_bô°rög
–**
p
, c⁄° *
íd
,

230 
mbedés_a¢1_bô°rög
 *
bs
);

243 
mbedés_a¢1_gë_bô°rög_nuŒ
–**
p
, c⁄° *
íd
,

244 
size_t
 *
Àn
 );

257 
mbedés_a¢1_gë_£quí˚_of
–**
p
,

258 c⁄° *
íd
,

259 
mbedés_a¢1_£quí˚
 *
cur
,

260 
èg
);

262 #i‡
deföed
(
MBEDTLS_BIGNUM_C
)

273 
mbedés_a¢1_gë_mpi
–**
p
,

274 c⁄° *
íd
,

275 
mbedés_mpi
 *
X
 );

290 
mbedés_a¢1_gë_Æg
–**
p
,

291 c⁄° *
íd
,

292 
mbedés_a¢1_buf
 *
Æg
, mbedés_a¢1_bu‡*
∑øms
 );

306 
mbedés_a¢1_gë_Æg_nuŒ
–**
p
,

307 c⁄° *
íd
,

308 
mbedés_a¢1_buf
 *
Æg
 );

320 
mbedés_a¢1_«med_d©a
 *
mbedés_a¢1_föd_«med_d©a
–mbedés_a¢1_«med_d©®*
li°
,

321 c⁄° *
oid
, 
size_t
 
Àn
 );

328 
mbedés_a¢1_‰ì_«med_d©a
–
mbedés_a¢1_«med_d©a
 *
íåy
 );

336 
mbedés_a¢1_‰ì_«med_d©a_li°
–
mbedés_a¢1_«med_d©a
 **
hód
 );

338 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/mbedtls/asn1write.h

23 #i‚de‡
MBEDTLS_ASN1_WRITE_H


24 
	#MBEDTLS_ASN1_WRITE_H


	)

26 
	~"a¢1.h
"

28 
	#MBEDTLS_ASN1_CHK_ADD
(
g
, 
f
Ëdÿ{ if––
ªt
 = f ) < 0 ) (Ñet ); \

29 
g
 +
ªt
; }  0 )

	)

31 #ifde‡
__˝lu•lus


45 
mbedés_a¢1_wrôe_Àn
–**
p
, *
°¨t
, 
size_t
 
Àn
 );

57 
mbedés_a¢1_wrôe_èg
–**
p
, *
°¨t
,

58 
èg
 );

71 
mbedés_a¢1_wrôe_øw_buf„r
–**
p
, *
°¨t
,

72 c⁄° *
buf
, 
size_t
 
size
 );

74 #i‡
deföed
(
MBEDTLS_BIGNUM_C
)

85 
mbedés_a¢1_wrôe_mpi
–**
p
, *
°¨t
, c⁄° 
mbedés_mpi
 *
X
 );

97 
mbedés_a¢1_wrôe_nuŒ
–**
p
, *
°¨t
 );

110 
mbedés_a¢1_wrôe_oid
–**
p
, *
°¨t
,

111 c⁄° *
oid
, 
size_t
 
oid_Àn
 );

126 
mbedés_a¢1_wrôe_Æg‹ôhm_idítifõr
–**
p
, *
°¨t
,

127 c⁄° *
oid
, 
size_t
 
oid_Àn
,

128 
size_t
 
∑r_Àn
 );

140 
mbedés_a¢1_wrôe_boﬁ
–**
p
, *
°¨t
, 
boﬁón
 );

152 
mbedés_a¢1_wrôe_öt
–**
p
, *
°¨t
, 
vÆ
 );

166 
mbedés_a¢1_wrôe_¥öèbÀ_°rög
–**
p
, *
°¨t
,

167 c⁄° *
ãxt
, 
size_t
 
ãxt_Àn
 );

181 
mbedés_a¢1_wrôe_ü5_°rög
–**
p
, *
°¨t
,

182 c⁄° *
ãxt
, 
size_t
 
ãxt_Àn
 );

196 
mbedés_a¢1_wrôe_bô°rög
–**
p
, *
°¨t
,

197 c⁄° *
buf
, 
size_t
 
bôs
 );

211 
mbedés_a¢1_wrôe_o˘ë_°rög
–**
p
, *
°¨t
,

212 c⁄° *
buf
, 
size_t
 
size
 );

230 
mbedés_a¢1_«med_d©a
 *
mbedés_a¢1_°‹e_«med_d©a
–mbedés_a¢1_«med_d©®**
li°
,

231 c⁄° *
oid
, 
size_t
 
oid_Àn
,

232 c⁄° *
vÆ
,

233 
size_t
 
vÆ_Àn
 );

235 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/mbedtls/base64.h

23 #i‚de‡
MBEDTLS_BASE64_H


24 
	#MBEDTLS_BASE64_H


	)

26 
	~<°ddef.h
>

28 
	#MBEDTLS_ERR_BASE64_BUFFER_TOO_SMALL
 -0x002A

	)

29 
	#MBEDTLS_ERR_BASE64_INVALID_CHARACTER
 -0x002C

	)

31 #ifde‡
__˝lu•lus


54 
mbedés_ba£64_ícode
–*
d°
, 
size_t
 
dÀn
, size_à*
ﬁí
,

55 c⁄° *
§c
, 
size_t
 
¶í
 );

74 
mbedés_ba£64_decode
–*
d°
, 
size_t
 
dÀn
, size_à*
ﬁí
,

75 c⁄° *
§c
, 
size_t
 
¶í
 );

82 
mbedés_ba£64_£lf_ã°
–
vîbo£
 );

84 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/mbedtls/bignum.h

23 #i‚de‡
MBEDTLS_BIGNUM_H


24 
	#MBEDTLS_BIGNUM_H


	)

26 #i‡!
deföed
(
MBEDTLS_CONFIG_FILE
)

27 
	~"c⁄fig.h
"

29 #ö˛udê
MBEDTLS_CONFIG_FILE


32 
	~<°ddef.h
>

33 
	~<°döt.h
>

35 #i‡
deföed
(
MBEDTLS_FS_IO
)

36 
	~<°dio.h
>

39 
	#MBEDTLS_ERR_MPI_FILE_IO_ERROR
 -0x0002

	)

40 
	#MBEDTLS_ERR_MPI_BAD_INPUT_DATA
 -0x0004

	)

41 
	#MBEDTLS_ERR_MPI_INVALID_CHARACTER
 -0x0006

	)

42 
	#MBEDTLS_ERR_MPI_BUFFER_TOO_SMALL
 -0x0008

	)

43 
	#MBEDTLS_ERR_MPI_NEGATIVE_VALUE
 -0x000A

	)

44 
	#MBEDTLS_ERR_MPI_DIVISION_BY_ZERO
 -0x000C

	)

45 
	#MBEDTLS_ERR_MPI_NOT_ACCEPTABLE
 -0x000E

	)

46 
	#MBEDTLS_ERR_MPI_ALLOC_FAILED
 -0x0010

	)

48 
	#MBEDTLS_MPI_CHK
(
f
Ëdÿ{ if––
ªt
 = f ) !0 ) 
˛ónup
; }  0 )

	)

53 
	#MBEDTLS_MPI_MAX_LIMBS
 10000

	)

55 #i‡!
deföed
(
MBEDTLS_MPI_WINDOW_SIZE
)

65 
	#MBEDTLS_MPI_WINDOW_SIZE
 6

	)

68 #i‡!
deföed
(
MBEDTLS_MPI_MAX_SIZE
)

76 
	#MBEDTLS_MPI_MAX_SIZE
 1024

	)

79 
	#MBEDTLS_MPI_MAX_BITS
 ( 8 * 
MBEDTLS_MPI_MAX_SIZE
 )

	)

99 
	#MBEDTLS_MPI_MAX_BITS_SCALE100
 ( 100 * 
MBEDTLS_MPI_MAX_BITS
 )

	)

100 
	#MBEDTLS_LN_2_DIV_LN_10_SCALE100
 332

	)

101 
	#MBEDTLS_MPI_RW_BUFFER_SIZE
 ( ((
MBEDTLS_MPI_MAX_BITS_SCALE100
 + 
MBEDTLS_LN_2_DIV_LN_10_SCALE100
 - 1Ë/ MBEDTLS_LN_2_DIV_LN_10_SCALE100Ë+ 10 + 6 )

	)

109 #i‡–! 
deföed
(
MBEDTLS_HAVE_INT32
) && \

110 
deföed
(
_MSC_VER
Ë&& 
	$deföed
(
_M_AMD64
) )

111 
	#MBEDTLS_HAVE_INT64


	)

112 
öt64_t
 
	tmbedés_mpi_söt
;

113 
uöt64_t
 
	tmbedés_mpi_uöt
;

115 #i‡–! 
	`deföed
(
MBEDTLS_HAVE_INT32
) && \

116 
	`deföed
(
__GNUC__
) && ( \

117 
	`deföed
(
__amd64__
Ë|| deföed(
__x86_64__
) || \

118 
	`deföed
(
__µc64__
Ë|| deföed(
__powîpc64__
) || \

119 
	`deföed
(
__ü64__
Ë|| deföed(
__Æpha__
) || \

120 (
	`deföed
(
__•¨c__
Ë&& deföed(
__¨ch64__
)) || \

121 
	`deföed
(
__s390x__
Ë|| 
	$deföed
(
__mùs64
) ) )

122 
	#MBEDTLS_HAVE_INT64


	)

123 
öt64_t
 
	tmbedés_mpi_söt
;

124 
uöt64_t
 
	tmbedés_mpi_uöt
;

126 
	tmbedés_t_udbl
 
	t__©åibuã__
((
	tmode
(
	tTI
)));

127 
	#MBEDTLS_HAVE_UDBL


	)

129 
	#MBEDTLS_HAVE_INT32


	)

130 
öt32_t
 
	tmbedés_mpi_söt
;

131 
uöt32_t
 
	tmbedés_mpi_uöt
;

132 
uöt64_t
 
	tmbedés_t_udbl
;

133 
	#MBEDTLS_HAVE_UDBL


	)

137 #ifde‡
__˝lu•lus


146 
s
;

147 
size_t
 
n
;

148 
mbedés_mpi_uöt
 *
p
;

150 
	tmbedés_mpi
;

159 
	`mbedés_mpi_öô
–
mbedés_mpi
 *
X
 );

166 
	`mbedés_mpi_‰ì
–
mbedés_mpi
 *
X
 );

177 
	`mbedés_mpi_grow
–
mbedés_mpi
 *
X
, 
size_t
 
nblimbs
 );

188 
	`mbedés_mpi_shrök
–
mbedés_mpi
 *
X
, 
size_t
 
nblimbs
 );

199 
	`mbedés_mpi_c›y
–
mbedés_mpi
 *
X
, c⁄° mbedés_mpò*
Y
 );

207 
	`mbedés_mpi_sw≠
–
mbedés_mpi
 *
X
, mbedés_mpò*
Y
 );

226 
	`mbedés_mpi_ß„_c⁄d_assign
–
mbedés_mpi
 *
X
, c⁄° mbedés_mpò*
Y
, 
assign
 );

245 
	`mbedés_mpi_ß„_c⁄d_sw≠
–
mbedés_mpi
 *
X
, mbedés_mpò*
Y
, 
assign
 );

256 
	`mbedés_mpi_l£t
–
mbedés_mpi
 *
X
, 
mbedés_mpi_söt
 
z
 );

266 
	`mbedés_mpi_gë_bô
–c⁄° 
mbedés_mpi
 *
X
, 
size_t
 
pos
 );

282 
	`mbedés_mpi_£t_bô
–
mbedés_mpi
 *
X
, 
size_t
 
pos
, 
vÆ
 );

292 
size_t
 
	`mbedés_mpi_lsb
–c⁄° 
mbedés_mpi
 *
X
 );

302 
size_t
 
	`mbedés_mpi_bôÀn
–c⁄° 
mbedés_mpi
 *
X
 );

309 
size_t
 
	`mbedés_mpi_size
–c⁄° 
mbedés_mpi
 *
X
 );

320 
	`mbedés_mpi_ªad_°rög
–
mbedés_mpi
 *
X
, 
ødix
, c⁄° *
s
 );

338 
	`mbedés_mpi_wrôe_°rög
–c⁄° 
mbedés_mpi
 *
X
, 
ødix
,

339 *
buf
, 
size_t
 
buÊí
, size_à*
ﬁí
 );

341 #i‡
	`deföed
(
MBEDTLS_FS_IO
)

353 
	`mbedés_mpi_ªad_fûe
–
mbedés_mpi
 *
X
, 
ødix
, 
FILE
 *
fö
 );

367 
	`mbedés_mpi_wrôe_fûe
–c⁄° *
p
, c⁄° 
mbedés_mpi
 *
X
, 
ødix
, 
FILE
 *
fout
 );

380 
	`mbedés_mpi_ªad_bö¨y
–
mbedés_mpi
 *
X
, c⁄° *
buf
, 
size_t
 
buÊí
 );

394 
	`mbedés_mpi_wrôe_bö¨y
–c⁄° 
mbedés_mpi
 *
X
, *
buf
, 
size_t
 
buÊí
 );

405 
	`mbedés_mpi_shi·_l
–
mbedés_mpi
 *
X
, 
size_t
 
cou¡
 );

416 
	`mbedés_mpi_shi·_r
–
mbedés_mpi
 *
X
, 
size_t
 
cou¡
 );

428 
	`mbedés_mpi_cmp_abs
–c⁄° 
mbedés_mpi
 *
X
, c⁄° mbedés_mpò*
Y
 );

440 
	`mbedés_mpi_cmp_mpi
–c⁄° 
mbedés_mpi
 *
X
, c⁄° mbedés_mpò*
Y
 );

452 
	`mbedés_mpi_cmp_öt
–c⁄° 
mbedés_mpi
 *
X
, 
mbedés_mpi_söt
 
z
 );

464 
	`mbedés_mpi_add_abs
–
mbedés_mpi
 *
X
, c⁄° mbedés_mpò*
A
, c⁄° mbedés_mpò*
B
 );

476 
	`mbedés_mpi_sub_abs
–
mbedés_mpi
 *
X
, c⁄° mbedés_mpò*
A
, c⁄° mbedés_mpò*
B
 );

488 
	`mbedés_mpi_add_mpi
–
mbedés_mpi
 *
X
, c⁄° mbedés_mpò*
A
, c⁄° mbedés_mpò*
B
 );

500 
	`mbedés_mpi_sub_mpi
–
mbedés_mpi
 *
X
, c⁄° mbedés_mpò*
A
, c⁄° mbedés_mpò*
B
 );

512 
	`mbedés_mpi_add_öt
–
mbedés_mpi
 *
X
, c⁄° mbedés_mpò*
A
, 
mbedés_mpi_söt
 
b
 );

524 
	`mbedés_mpi_sub_öt
–
mbedés_mpi
 *
X
, c⁄° mbedés_mpò*
A
, 
mbedés_mpi_söt
 
b
 );

536 
	`mbedés_mpi_mul_mpi
–
mbedés_mpi
 *
X
, c⁄° mbedés_mpò*
A
, c⁄° mbedés_mpò*
B
 );

550 
	`mbedés_mpi_mul_öt
–
mbedés_mpi
 *
X
, c⁄° mbedés_mpò*
A
, 
mbedés_mpi_uöt
 
b
 );

566 
	`mbedés_mpi_div_mpi
–
mbedés_mpi
 *
Q
, mbedés_mpò*
R
, c⁄° mbedés_mpò*
A
, c⁄° mbedés_mpò*
B
 );

582 
	`mbedés_mpi_div_öt
–
mbedés_mpi
 *
Q
, mbedés_mpò*
R
, c⁄° mbedés_mpò*
A
, 
mbedés_mpi_söt
 
b
 );

596 
	`mbedés_mpi_mod_mpi
–
mbedés_mpi
 *
R
, c⁄° mbedés_mpò*
A
, c⁄° mbedés_mpò*
B
 );

610 
	`mbedés_mpi_mod_öt
–
mbedés_mpi_uöt
 *
r
, c⁄° 
mbedés_mpi
 *
A
, 
mbedés_mpi_söt
 
b
 );

630 
	`mbedés_mpi_exp_mod
–
mbedés_mpi
 *
X
, c⁄° mbedés_mpò*
A
, c⁄° mbedés_mpò*
E
, c⁄° mbedés_mpò*
N
, mbedés_mpò*
_RR
 );

643 
	`mbedés_mpi_fûl_øndom
–
mbedés_mpi
 *
X
, 
size_t
 
size
,

644 (*
f_∫g
)(*, *, 
size_t
),

645 *
p_∫g
 );

657 
	`mbedés_mpi_gcd
–
mbedés_mpi
 *
G
, c⁄° mbedés_mpò*
A
, c⁄° mbedés_mpò*
B
 );

671 
	`mbedés_mpi_öv_mod
–
mbedés_mpi
 *
X
, c⁄° mbedés_mpò*
A
, c⁄° mbedés_mpò*
N
 );

684 
	`mbedés_mpi_is_¥ime
–c⁄° 
mbedés_mpi
 *
X
,

685 (*
f_∫g
)(*, *, 
size_t
),

686 *
p_∫g
 );

702 
	`mbedés_mpi_gí_¥ime
–
mbedés_mpi
 *
X
, 
size_t
 
nbôs
, 
dh_Êag
,

703 (*
f_∫g
)(*, *, 
size_t
),

704 *
p_∫g
 );

711 
	`mbedés_mpi_£lf_ã°
–
vîbo£
 );

713 #ifde‡
__˝lu•lus


714 
	}
}

	@/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/mbedtls/bn_mul.h

37 #i‚de‡
MBEDTLS_BN_MUL_H


38 
	#MBEDTLS_BN_MUL_H


	)

40 
	~"bignum.h
"

42 #i‡
deföed
(
MBEDTLS_HAVE_ASM
)

44 #i‚de‡
asm


45 
	#asm
 
__asm


	)

49 #i‡
deföed
(
__GNUC__
) && \

50 –!
deföed
(
__ARMCC_VERSION
Ë|| 
	g__ARMCC_VERSION
 >= 6000000 )

51 #i‡
deföed
(
__i386__
)

53 
	#MULADDC_INIT
 \

54 
	`asm
( \

59 "mov» %8, %%ebx \n\t"

	)

61 
	#MULADDC_CORE
 \

69 "°o¶ \n\t"

	)

71 #i‡
deföed
(
MBEDTLS_HAVE_SSE2
)

73 
	#MULADDC_HUIT
 \

134 "movd %%mm1, %%ecx \n\t"

	)

136 
	#MULADDC_STOP
 \

142 : "=m" (
t
), "=m" (
c
), "=m" (
d
), "=m" (
s
) \

143 : "m" (
t
), "m" (
s
), "m" (
d
), "m" (
c
), "m" (
b
) \

145 );

	)

149 
	#MULADDC_STOP
 \

154 : "=m" (
t
), "=m" (
c
), "=m" (
d
), "=m" (
s
) \

155 : "m" (
t
), "m" (
s
), "m" (
d
), "m" (
c
), "m" (
b
) \

157 );

	)

161 #i‡
deföed
(
__amd64__
Ë|| deföed (
__x86_64__
)

163 
	#MULADDC_INIT
 \

164 
	`asm
( \

169 "x‹q %%r8, %%r8 \n\t"

	)

171 
	#MULADDC_CORE
 \

181 "addq $8, %%rdò \n\t"

	)

183 
	#MULADDC_STOP
 \

187 : "=m" (
c
), "=m" (
d
), "=m" (
s
) \

188 : "m" (
s
), "m" (
d
), "m" (
c
), "m" (
b
) \

190 );

	)

194 #i‡
deföed
(
__mc68020__
Ë|| deföed(
__m˝u32__
)

196 
	#MULADDC_INIT
 \

197 
	`asm
( \

202 "moveq #0, %%d0 \n\t"

	)

204 
	#MULADDC_CORE
 \

211 "addx» %%d4, %%d3 \n\t"

	)

213 
	#MULADDC_STOP
 \

217 : "=m" (
c
), "=m" (
d
), "=m" (
s
) \

218 : "m" (
s
), "m" (
d
), "m" (
c
), "m" (
b
) \

220 );

	)

222 
	#MULADDC_HUIT
 \

263 "addx» %%d0, %%d3 \n\t"

	)

267 #i‡
deföed
(
__powîpc64__
Ë|| deföed(
__µc64__
)

269 #i‡
deföed
(
__MACH__
Ë&& deföed(
__APPLE__
)

271 
	#MULADDC_INIT
 \

272 
	`asm
( \

279 "addi¯Ñ5,Ñ5, 0 \n\t"

	)

281 
	#MULADDC_CORE
 \

289 "°duÑ8, 8‘4Ë \n\t"

	)

291 
	#MULADDC_STOP
 \

298 : "=m" (
c
), "=m" (
d
), "=m" (
s
) \

299 : "m" (
s
), "m" (
d
), "m" (
c
), "m" (
b
) \

301 );

	)

306 
	#MULADDC_INIT
 \

307 
	`asm
( \

314 "addi¯ %%r5, %%r5, 0 \n\t"

	)

316 
	#MULADDC_CORE
 \

324 "°du %%r8, 8(%%r4Ë \n\t"

	)

326 
	#MULADDC_STOP
 \

333 : "=m" (
c
), "=m" (
d
), "=m" (
s
) \

334 : "m" (
s
), "m" (
d
), "m" (
c
), "m" (
b
) \

336 );

	)

340 #ñi‡
deföed
(
__powîpc__
Ë|| deföed(
__µc__
)

342 #i‡
deföed
(
__MACH__
Ë&& deföed(
__APPLE__
)

344 
	#MULADDC_INIT
 \

345 
	`asm
( \

352 "addi¯Ñ5,Ñ5, 0 \n\t"

	)

354 
	#MULADDC_CORE
 \

362 "°wuÑ8, 4‘4Ë \n\t"

	)

364 
	#MULADDC_STOP
 \

371 : "=m" (
c
), "=m" (
d
), "=m" (
s
) \

372 : "m" (
s
), "m" (
d
), "m" (
c
), "m" (
b
) \

374 );

	)

378 
	#MULADDC_INIT
 \

379 
	`asm
( \

386 "addi¯ %%r5, %%r5, 0 \n\t"

	)

388 
	#MULADDC_CORE
 \

396 "°wu %%r8, 4(%%r4Ë \n\t"

	)

398 
	#MULADDC_STOP
 \

405 : "=m" (
c
), "=m" (
d
), "=m" (
s
) \

406 : "m" (
s
), "m" (
d
), "m" (
c
), "m" (
b
) \

408 );

	)

418 #i‡0 && 
deföed
(
__•¨c__
)

419 #i‡
deföed
(
__•¨c64__
)

421 
	#MULADDC_INIT
 \

422 
	`asm
( \

426 "ld %6, %%o3 \n\t"

	)

428 
	#MULADDC_CORE
 \

439 "ö¯ 4, %%o1 \n\t"

	)

441 
	#MULADDC_STOP
 \

445 : "=m" (
c
), "=m" (
d
), "=m" (
s
) \

446 : "m" (
s
), "m" (
d
), "m" (
c
), "m" (
b
) \

449 );

	)

453 
	#MULADDC_INIT
 \

454 
	`asm
( \

458 "ld %6, %%o3 \n\t"

	)

460 
	#MULADDC_CORE
 \

471 "ö¯ 4, %%o1 \n\t"

	)

473 
	#MULADDC_STOP
 \

477 : "=m" (
c
), "=m" (
d
), "=m" (
s
) \

478 : "m" (
s
), "m" (
d
), "m" (
c
), "m" (
b
) \

481 );

	)

486 #i‡
deföed
(
__mi¸obœze__
Ë|| deföed(
mi¸obœze
)

488 
	#MULADDC_INIT
 \

489 
	`asm
( \

495 "b§lòr6,Ñ6, 16 \n\t"

	)

497 
	#MULADDC_CORE
 \

522 "addòÑ4,Ñ4, 4 \n\t"

	)

524 
	#MULADDC_STOP
 \

528 : "=m" (
c
), "=m" (
d
), "=m" (
s
) \

529 : "m" (
s
), "m" (
d
), "m" (
c
), "m" (
b
) \

532 );

	)

536 #i‡
deföed
(
__åic‹e__
)

538 
	#MULADDC_INIT
 \

539 
	`asm
( \

544 "x‹ %%d5, %%d5 \n\t"

	)

546 
	#MULADDC_CORE
 \

553 "°.w [%%a3+], %%d2 \n\t"

	)

555 
	#MULADDC_STOP
 \

559 : "=m" (
c
), "=m" (
d
), "=m" (
s
) \

560 : "m" (
s
), "m" (
d
), "m" (
c
), "m" (
b
) \

562 );

	)

578 #i‡
deföed
(
__GNUC__
Ë&& !deföed(
__OPTIMIZE__
)

579 
	#MULADDC_CANNOT_USE_R7


	)

582 #i‡
deföed
(
__¨m__
Ë&& !deföed(
MULADDC_CANNOT_USE_R7
)

584 #i‡
deföed
(
__thumb__
Ë&& !deföed(
__thumb2__
)

586 
	#MULADDC_INIT
 \

587 
	`asm
( \

596 "movÑ8,Ñ7 \n\t"

	)

598 
	#MULADDC_CORE
 \

627 "°müÑ1!, {r4} \n\t"

	)

629 
	#MULADDC_STOP
 \

633 : "=m" (
c
), "=m" (
d
), "=m" (
s
) \

634 : "m" (
s
), "m" (
d
), "m" (
c
), "m" (
b
) \

637 );

	)

641 
	#MULADDC_INIT
 \

642 
	`asm
( \

646 "ld∏Ñ3, %6 \n\t"

	)

648 
	#MULADDC_CORE
 \

655 "°∏Ñ7, [r1], #4 \n\t"

	)

657 
	#MULADDC_STOP
 \

661 : "=m" (
c
), "=m" (
d
), "=m" (
s
) \

662 : "m" (
s
), "m" (
d
), "m" (
c
), "m" (
b
) \

665 );

	)

671 #i‡
deföed
(
__Æpha__
)

673 
	#MULADDC_INIT
 \

674 
	`asm
( \

678 "ldq $4, %6 \n\t"

	)

680 
	#MULADDC_CORE
 \

693 "addq $5, $3, $3 \n\t"

	)

695 
	#MULADDC_STOP
 \

699 : "=m" (
c
), "=m" (
d
), "=m" (
s
) \

700 : "m" (
s
), "m" (
d
), "m" (
c
), "m" (
b
) \

702 );

	)

705 #i‡
deföed
(
__mùs__
Ë&& !deföed(
__mùs64
)

707 
	#MULADDC_INIT
 \

708 
	`asm
( \

712 "lw $13, %6 \n\t"

	)

714 
	#MULADDC_CORE
 \

728 "addò $11, $11, 4 \n\t"

	)

730 
	#MULADDC_STOP
 \

734 : "=m" (
c
), "=m" (
d
), "=m" (
s
) \

735 : "m" (
s
), "m" (
d
), "m" (
c
), "m" (
b
) \

737 );

	)

742 #i‡(
deföed
(
_MSC_VER
Ë&& deföed(
_M_IX86
)Ë|| deföed(
__WATCOMC__
)

744 
	#MULADDC_INIT
 \

745 
__asm
 
mov
 
esi
, 
s
 \

746 
__asm
 
mov
 
edi
, 
d
 \

747 
__asm
 
mov
 
ecx
, 
c
 \

748 
__asm
 
mov
 
ebx
, 
b


	)

750 
	#MULADDC_CORE
 \

751 
__asm
 
lodsd
 \

752 
__asm
 
mul
 
ebx
 \

753 
__asm
 
add
 
óx
, 
ecx
 \

754 
__asm
 
adc
 
edx
, 0 \

755 
__asm
 
add
 
óx
, [
edi
] \

756 
__asm
 
adc
 
edx
, 0 \

757 
__asm
 
mov
 
ecx
, 
edx
 \

758 
__asm
 
°osd


	)

760 #i‡
deföed
(
MBEDTLS_HAVE_SSE2
)

762 
	#EMIT
 
__asm
 
_emô


	)

764 
	#MULADDC_HUIT
 \

765 
EMIT
 0x0F EMIT 0x6E EMIT 0xC9 \

766 
EMIT
 0x0F EMIT 0x6E EMIT 0xC3 \

767 
EMIT
 0x0F EMIT 0x6E EMIT 0x1F \

768 
EMIT
 0x0F EMIT 0xD4 EMIT 0xCB \

769 
EMIT
 0x0F EMIT 0x6E EMIT 0x16 \

770 
EMIT
 0x0F EMIT 0xF4 EMIT 0xD0 \

771 
EMIT
 0x0F EMIT 0x6E EMIT 0x66 EMIT 0x04 \

772 
EMIT
 0x0F EMIT 0xF4 EMIT 0xE0 \

773 
EMIT
 0x0F EMIT 0x6E EMIT 0x76 EMIT 0x08 \

774 
EMIT
 0x0F EMIT 0xF4 EMIT 0xF0 \

775 
EMIT
 0x0F EMIT 0x6E EMIT 0x7E EMIT 0x0C \

776 
EMIT
 0x0F EMIT 0xF4 EMIT 0xF8 \

777 
EMIT
 0x0F EMIT 0xD4 EMIT 0xCA \

778 
EMIT
 0x0F EMIT 0x6E EMIT 0x5F EMIT 0x04 \

779 
EMIT
 0x0F EMIT 0xD4 EMIT 0xDC \

780 
EMIT
 0x0F EMIT 0x6E EMIT 0x6F EMIT 0x08 \

781 
EMIT
 0x0F EMIT 0xD4 EMIT 0xEE \

782 
EMIT
 0x0F EMIT 0x6E EMIT 0x67 EMIT 0x0C \

783 
EMIT
 0x0F EMIT 0xD4 EMIT 0xFC \

784 
EMIT
 0x0F EMIT 0x7E EMIT 0x0F \

785 
EMIT
 0x0F EMIT 0x6E EMIT 0x56 EMIT 0x10 \

786 
EMIT
 0x0F EMIT 0xF4 EMIT 0xD0 \

787 
EMIT
 0x0F EMIT 0x73 EMIT 0xD1 EMIT 0x20 \

788 
EMIT
 0x0F EMIT 0x6E EMIT 0x66 EMIT 0x14 \

789 
EMIT
 0x0F EMIT 0xF4 EMIT 0xE0 \

790 
EMIT
 0x0F EMIT 0xD4 EMIT 0xCB \

791 
EMIT
 0x0F EMIT 0x6E EMIT 0x76 EMIT 0x18 \

792 
EMIT
 0x0F EMIT 0xF4 EMIT 0xF0 \

793 
EMIT
 0x0F EMIT 0x7E EMIT 0x4F EMIT 0x04 \

794 
EMIT
 0x0F EMIT 0x73 EMIT 0xD1 EMIT 0x20 \

795 
EMIT
 0x0F EMIT 0x6E EMIT 0x5E EMIT 0x1C \

796 
EMIT
 0x0F EMIT 0xF4 EMIT 0xD8 \

797 
EMIT
 0x0F EMIT 0xD4 EMIT 0xCD \

798 
EMIT
 0x0F EMIT 0x6E EMIT 0x6F EMIT 0x10 \

799 
EMIT
 0x0F EMIT 0xD4 EMIT 0xD5 \

800 
EMIT
 0x0F EMIT 0x7E EMIT 0x4F EMIT 0x08 \

801 
EMIT
 0x0F EMIT 0x73 EMIT 0xD1 EMIT 0x20 \

802 
EMIT
 0x0F EMIT 0xD4 EMIT 0xCF \

803 
EMIT
 0x0F EMIT 0x6E EMIT 0x6F EMIT 0x14 \

804 
EMIT
 0x0F EMIT 0xD4 EMIT 0xE5 \

805 
EMIT
 0x0F EMIT 0x7E EMIT 0x4F EMIT 0x0C \

806 
EMIT
 0x0F EMIT 0x73 EMIT 0xD1 EMIT 0x20 \

807 
EMIT
 0x0F EMIT 0xD4 EMIT 0xCA \

808 
EMIT
 0x0F EMIT 0x6E EMIT 0x6F EMIT 0x18 \

809 
EMIT
 0x0F EMIT 0xD4 EMIT 0xF5 \

810 
EMIT
 0x0F EMIT 0x7E EMIT 0x4F EMIT 0x10 \

811 
EMIT
 0x0F EMIT 0x73 EMIT 0xD1 EMIT 0x20 \

812 
EMIT
 0x0F EMIT 0xD4 EMIT 0xCC \

813 
EMIT
 0x0F EMIT 0x6E EMIT 0x6F EMIT 0x1C \

814 
EMIT
 0x0F EMIT 0xD4 EMIT 0xDD \

815 
EMIT
 0x0F EMIT 0x7E EMIT 0x4F EMIT 0x14 \

816 
EMIT
 0x0F EMIT 0x73 EMIT 0xD1 EMIT 0x20 \

817 
EMIT
 0x0F EMIT 0xD4 EMIT 0xCE \

818 
EMIT
 0x0F EMIT 0x7E EMIT 0x4F EMIT 0x18 \

819 
EMIT
 0x0F EMIT 0x73 EMIT 0xD1 EMIT 0x20 \

820 
EMIT
 0x0F EMIT 0xD4 EMIT 0xCB \

821 
EMIT
 0x0F EMIT 0x7E EMIT 0x4F EMIT 0x1C \

822 
EMIT
 0x83 EMIT 0xC7 EMIT 0x20 \

823 
EMIT
 0x83 EMIT 0xC6 EMIT 0x20 \

824 
EMIT
 0x0F EMIT 0x73 EMIT 0xD1 EMIT 0x20 \

825 
EMIT
 0x0F EMIT 0x7E EMIT 0xC9

	)

827 
	#MULADDC_STOP
 \

828 
EMIT
 0x0F EMIT 0x77 \

829 
__asm
 
mov
 
c
, 
ecx
 \

830 
__asm
 
mov
 
d
, 
edi
 \

831 
__asm
 
mov
 
s
, 
esi
 \

832 

	)

835 
	#MULADDC_STOP
 \

836 
__asm
 
mov
 
c
, 
ecx
 \

837 
__asm
 
mov
 
d
, 
edi
 \

838 
__asm
 
mov
 
s
, 
esi
 \

839 

	)

845 #i‡!
deföed
(
MULADDC_CORE
)

846 #i‡
deföed
(
MBEDTLS_HAVE_UDBL
)

848 
	#MULADDC_INIT
 \

850 
mbedés_t_udbl
 
r
; \

851 
mbedés_mpi_uöt
 
r0
, 
r1
;

	)

853 
	#MULADDC_CORE
 \

854 
r
 = *(
s
++Ë* (
mbedés_t_udbl
Ë
b
; \

855 
r0
 = (
mbedés_mpi_uöt
Ë
r
; \

856 
r1
 = (
mbedés_mpi_uöt
)–
r
 >> 
biL
 ); \

857 
r0
 +
c
; 
r1
 += (r0 < c); \

858 
r0
 +*
d
; 
r1
 += (r0 < *d); \

859 
c
 = 
r1
; *(
d
++Ë
r0
;

	)

861 
	#MULADDC_STOP
 \

862 }

	)

865 
	#MULADDC_INIT
 \

867 
mbedés_mpi_uöt
 
s0
, 
s1
, 
b0
, 
b1
; \

868 
mbedés_mpi_uöt
 
r0
, 
r1
, 
rx
, 
ry
; \

869 
b0
 = ( 
b
 << 
biH
 ) >> biH; \

870 
b1
 = ( 
b
 >> 
biH
 );

	)

872 
	#MULADDC_CORE
 \

873 
s0
 = ( *
s
 << 
biH
 ) >> biH; \

874 
s1
 = ( *
s
 >> 
biH
 ); s++; \

875 
rx
 = 
s0
 * 
b1
; 
r0
 = s0 * 
b0
; \

876 
ry
 = 
s1
 * 
b0
; 
r1
 = s1 * 
b1
; \

877 
r1
 +–
rx
 >> 
biH
 ); \

878 
r1
 +–
ry
 >> 
biH
 ); \

879 
rx
 <<
biH
; 
ry
 <<= biH; \

880 
r0
 +
rx
; 
r1
 += (r0 <Ñx); \

881 
r0
 +
ry
; 
r1
 += (r0 <Ñy); \

882 
r0
 +
c
; 
r1
 += (r0 < c); \

883 
r0
 +*
d
; 
r1
 += (r0 < *d); \

884 
c
 = 
r1
; *(
d
++Ë
r0
;

	)

886 
	#MULADDC_STOP
 \

887 }

	)

	@/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/mbedtls/cipher.h

26 #i‚de‡
MBEDTLS_CIPHER_H


27 
	#MBEDTLS_CIPHER_H


	)

29 #i‡!
deföed
(
MBEDTLS_CONFIG_FILE
)

30 
	~"c⁄fig.h
"

32 #ö˛udê
MBEDTLS_CONFIG_FILE


35 
	~<°ddef.h
>

37 #i‡
deföed
(
MBEDTLS_GCM_C
Ë|| deföed(
MBEDTLS_CCM_C
)

38 
	#MBEDTLS_CIPHER_MODE_AEAD


	)

41 #i‡
deföed
(
MBEDTLS_CIPHER_MODE_CBC
)

42 
	#MBEDTLS_CIPHER_MODE_WITH_PADDING


	)

45 #i‡
deföed
(
MBEDTLS_ARC4_C
)

46 
	#MBEDTLS_CIPHER_MODE_STREAM


	)

49 #i‡–
deföed
(
__ARMCC_VERSION
Ë|| deföed(
_MSC_VER
) ) && \

50 !
deföed
(
ölöe
Ë&& !
	$deföed
(
__˝lu•lus
)

51 
	#ölöe
 
__ölöe


	)

54 
	#MBEDTLS_ERR_CIPHER_FEATURE_UNAVAILABLE
 -0x6080

	)

55 
	#MBEDTLS_ERR_CIPHER_BAD_INPUT_DATA
 -0x6100

	)

56 
	#MBEDTLS_ERR_CIPHER_ALLOC_FAILED
 -0x6180

	)

57 
	#MBEDTLS_ERR_CIPHER_INVALID_PADDING
 -0x6200

	)

58 
	#MBEDTLS_ERR_CIPHER_FULL_BLOCK_EXPECTED
 -0x6280

	)

59 
	#MBEDTLS_ERR_CIPHER_AUTH_FAILED
 -0x6300

	)

60 
	#MBEDTLS_ERR_CIPHER_INVALID_CONTEXT
 -0x6380

	)

62 
	#MBEDTLS_CIPHER_VARIABLE_IV_LEN
 0x01

	)

63 
	#MBEDTLS_CIPHER_VARIABLE_KEY_LEN
 0x02

	)

65 #ifde‡
__˝lu•lus


70 
MBEDTLS_CIPHER_ID_NONE
 = 0,

71 
MBEDTLS_CIPHER_ID_NULL
,

72 
MBEDTLS_CIPHER_ID_AES
,

73 
MBEDTLS_CIPHER_ID_DES
,

74 
MBEDTLS_CIPHER_ID_3DES
,

75 
MBEDTLS_CIPHER_ID_CAMELLIA
,

76 
MBEDTLS_CIPHER_ID_BLOWFISH
,

77 
MBEDTLS_CIPHER_ID_ARC4
,

78 } 
	tmbedés_cùhî_id_t
;

81 
MBEDTLS_CIPHER_NONE
 = 0,

82 
MBEDTLS_CIPHER_NULL
,

83 
MBEDTLS_CIPHER_AES_128_ECB
,

84 
MBEDTLS_CIPHER_AES_192_ECB
,

85 
MBEDTLS_CIPHER_AES_256_ECB
,

86 
MBEDTLS_CIPHER_AES_128_CBC
,

87 
MBEDTLS_CIPHER_AES_192_CBC
,

88 
MBEDTLS_CIPHER_AES_256_CBC
,

89 
MBEDTLS_CIPHER_AES_128_CFB128
,

90 
MBEDTLS_CIPHER_AES_192_CFB128
,

91 
MBEDTLS_CIPHER_AES_256_CFB128
,

92 
MBEDTLS_CIPHER_AES_128_CTR
,

93 
MBEDTLS_CIPHER_AES_192_CTR
,

94 
MBEDTLS_CIPHER_AES_256_CTR
,

95 
MBEDTLS_CIPHER_AES_128_GCM
,

96 
MBEDTLS_CIPHER_AES_192_GCM
,

97 
MBEDTLS_CIPHER_AES_256_GCM
,

98 
MBEDTLS_CIPHER_CAMELLIA_128_ECB
,

99 
MBEDTLS_CIPHER_CAMELLIA_192_ECB
,

100 
MBEDTLS_CIPHER_CAMELLIA_256_ECB
,

101 
MBEDTLS_CIPHER_CAMELLIA_128_CBC
,

102 
MBEDTLS_CIPHER_CAMELLIA_192_CBC
,

103 
MBEDTLS_CIPHER_CAMELLIA_256_CBC
,

104 
MBEDTLS_CIPHER_CAMELLIA_128_CFB128
,

105 
MBEDTLS_CIPHER_CAMELLIA_192_CFB128
,

106 
MBEDTLS_CIPHER_CAMELLIA_256_CFB128
,

107 
MBEDTLS_CIPHER_CAMELLIA_128_CTR
,

108 
MBEDTLS_CIPHER_CAMELLIA_192_CTR
,

109 
MBEDTLS_CIPHER_CAMELLIA_256_CTR
,

110 
MBEDTLS_CIPHER_CAMELLIA_128_GCM
,

111 
MBEDTLS_CIPHER_CAMELLIA_192_GCM
,

112 
MBEDTLS_CIPHER_CAMELLIA_256_GCM
,

113 
MBEDTLS_CIPHER_DES_ECB
,

114 
MBEDTLS_CIPHER_DES_CBC
,

115 
MBEDTLS_CIPHER_DES_EDE_ECB
,

116 
MBEDTLS_CIPHER_DES_EDE_CBC
,

117 
MBEDTLS_CIPHER_DES_EDE3_ECB
,

118 
MBEDTLS_CIPHER_DES_EDE3_CBC
,

119 
MBEDTLS_CIPHER_BLOWFISH_ECB
,

120 
MBEDTLS_CIPHER_BLOWFISH_CBC
,

121 
MBEDTLS_CIPHER_BLOWFISH_CFB64
,

122 
MBEDTLS_CIPHER_BLOWFISH_CTR
,

123 
MBEDTLS_CIPHER_ARC4_128
,

124 
MBEDTLS_CIPHER_AES_128_CCM
,

125 
MBEDTLS_CIPHER_AES_192_CCM
,

126 
MBEDTLS_CIPHER_AES_256_CCM
,

127 
MBEDTLS_CIPHER_CAMELLIA_128_CCM
,

128 
MBEDTLS_CIPHER_CAMELLIA_192_CCM
,

129 
MBEDTLS_CIPHER_CAMELLIA_256_CCM
,

130 } 
	tmbedés_cùhî_ty≥_t
;

133 
MBEDTLS_MODE_NONE
 = 0,

134 
MBEDTLS_MODE_ECB
,

135 
MBEDTLS_MODE_CBC
,

136 
MBEDTLS_MODE_CFB
,

137 
MBEDTLS_MODE_OFB
,

138 
MBEDTLS_MODE_CTR
,

139 
MBEDTLS_MODE_GCM
,

140 
MBEDTLS_MODE_STREAM
,

141 
MBEDTLS_MODE_CCM
,

142 } 
	tmbedés_cùhî_mode_t
;

145 
MBEDTLS_PADDING_PKCS7
 = 0,

146 
MBEDTLS_PADDING_ONE_AND_ZEROS
,

147 
MBEDTLS_PADDING_ZEROS_AND_LEN
,

148 
MBEDTLS_PADDING_ZEROS
,

149 
MBEDTLS_PADDING_NONE
,

150 } 
	tmbedés_cùhî_∑ddög_t
;

153 
MBEDTLS_OPERATION_NONE
 = -1,

154 
MBEDTLS_DECRYPT
 = 0,

155 
MBEDTLS_ENCRYPT
,

156 } 
	tmbedés_›î©i⁄_t
;

160 
MBEDTLS_KEY_LENGTH_NONE
 = 0,

162 
MBEDTLS_KEY_LENGTH_DES
 = 64,

164 
MBEDTLS_KEY_LENGTH_DES_EDE
 = 128,

166 
MBEDTLS_KEY_LENGTH_DES_EDE3
 = 192,

170 
	#MBEDTLS_MAX_IV_LENGTH
 16

	)

172 
	#MBEDTLS_MAX_BLOCK_LENGTH
 16

	)

177 
mbedés_cùhî_ba£_t
 
	tmbedés_cùhî_ba£_t
;

184 
mbedés_cùhî_ty≥_t
 
ty≥
;

187 
mbedés_cùhî_mode_t
 
mode
;

191 
key_bôÀn
;

194 c⁄° * 
«me
;

198 
iv_size
;

201 
Êags
;

204 
block_size
;

207 c⁄° 
mbedés_cùhî_ba£_t
 *
ba£
;

209 } 
	tmbedés_cùhî_öfo_t
;

216 c⁄° 
mbedés_cùhî_öfo_t
 *
cùhî_öfo
;

219 
key_bôÀn
;

222 
mbedés_›î©i⁄_t
 
›î©i⁄
;

224 #i‡
	`deföed
(
MBEDTLS_CIPHER_MODE_WITH_PADDING
)

226 (*
add_∑ddög
)–*
ouçut
, 
size_t
 
ﬁí
, size_à
d©a_Àn
 );

227 (*
gë_∑ddög
)–*
öput
, 
size_t
 
ûí
, size_à*
d©a_Àn
 );

231 
u≈ro˚s£d_d©a
[
MBEDTLS_MAX_BLOCK_LENGTH
];

234 
size_t
 
u≈ro˚s£d_Àn
;

237 
iv
[
MBEDTLS_MAX_IV_LENGTH
];

240 
size_t
 
iv_size
;

243 *
cùhî_˘x
;

244 } 
	tmbedés_cùhî_c⁄ãxt_t
;

252 c⁄° *
	`mbedés_cùhî_li°
( );

263 c⁄° 
mbedés_cùhî_öfo_t
 *
	`mbedés_cùhî_öfo_‰om_°rög
–c⁄° *
cùhî_«me
 );

274 c⁄° 
mbedés_cùhî_öfo_t
 *
	`mbedés_cùhî_öfo_‰om_ty≥
–c⁄° 
mbedés_cùhî_ty≥_t
 
cùhî_ty≥
 );

288 c⁄° 
mbedés_cùhî_öfo_t
 *
	`mbedés_cùhî_öfo_‰om_vÆues
–c⁄° 
mbedés_cùhî_id_t
 
cùhî_id
,

289 
key_bôÀn
,

290 c⁄° 
mbedés_cùhî_mode_t
 
mode
 );

295 
	`mbedés_cùhî_öô
–
mbedés_cùhî_c⁄ãxt_t
 *
˘x
 );

302 
	`mbedés_cùhî_‰ì
–
mbedés_cùhî_c⁄ãxt_t
 *
˘x
 );

320 
	`mbedés_cùhî_£tup
–
mbedés_cùhî_c⁄ãxt_t
 *
˘x
, c⁄° 
mbedés_cùhî_öfo_t
 *
cùhî_öfo
 );

330 
ölöe
 
	`mbedés_cùhî_gë_block_size
–c⁄° 
mbedés_cùhî_c⁄ãxt_t
 *
˘x
 )

332 if–
NULL
 =
˘x
 || NULL =˘x->
cùhî_öfo
 )

335  
˘x
->
cùhî_öfo
->
block_size
;

347 
ölöe
 
mbedés_cùhî_mode_t
 
	`mbedés_cùhî_gë_cùhî_mode
–c⁄° 
mbedés_cùhî_c⁄ãxt_t
 *
˘x
 )

349 if–
NULL
 =
˘x
 || NULL =˘x->
cùhî_öfo
 )

350  
MBEDTLS_MODE_NONE
;

352  
˘x
->
cùhî_öfo
->
mode
;

364 
ölöe
 
	`mbedés_cùhî_gë_iv_size
–c⁄° 
mbedés_cùhî_c⁄ãxt_t
 *
˘x
 )

366 if–
NULL
 =
˘x
 || NULL =˘x->
cùhî_öfo
 )

369 if–
˘x
->
iv_size
 != 0 )

370  (Ë
˘x
->
iv_size
;

372  (Ë
˘x
->
cùhî_öfo
->
iv_size
;

383 
ölöe
 
mbedés_cùhî_ty≥_t
 
	`mbedés_cùhî_gë_ty≥
–c⁄° 
mbedés_cùhî_c⁄ãxt_t
 *
˘x
 )

385 if–
NULL
 =
˘x
 || NULL =˘x->
cùhî_öfo
 )

386  
MBEDTLS_CIPHER_NONE
;

388  
˘x
->
cùhî_öfo
->
ty≥
;

398 
ölöe
 c⁄° *
	`mbedés_cùhî_gë_«me
–c⁄° 
mbedés_cùhî_c⁄ãxt_t
 *
˘x
 )

400 if–
NULL
 =
˘x
 || NULL =˘x->
cùhî_öfo
 )

403  
˘x
->
cùhî_öfo
->
«me
;

415 
ölöe
 
	`mbedés_cùhî_gë_key_bôÀn
–c⁄° 
mbedés_cùhî_c⁄ãxt_t
 *
˘x
 )

417 if–
NULL
 =
˘x
 || NULL =˘x->
cùhî_öfo
 )

418  
MBEDTLS_KEY_LENGTH_NONE
;

420  (Ë
˘x
->
cùhî_öfo
->
key_bôÀn
;

432 
ölöe
 
mbedés_›î©i⁄_t
 
	`mbedés_cùhî_gë_›î©i⁄
–c⁄° 
mbedés_cùhî_c⁄ãxt_t
 *
˘x
 )

434 if–
NULL
 =
˘x
 || NULL =˘x->
cùhî_öfo
 )

435  
MBEDTLS_OPERATION_NONE
;

437  
˘x
->
›î©i⁄
;

455 
	`mbedés_cùhî_£tkey
–
mbedés_cùhî_c⁄ãxt_t
 *
˘x
, c⁄° *
key
,

456 
key_bôÀn
, c⁄° 
mbedés_›î©i⁄_t
 
›î©i⁄
 );

458 #i‡
	`deföed
(
MBEDTLS_CIPHER_MODE_WITH_PADDING
)

471 
	`mbedés_cùhî_£t_∑ddög_mode
–
mbedés_cùhî_c⁄ãxt_t
 *
˘x
, 
mbedés_cùhî_∑ddög_t
 
mode
 );

487 
	`mbedés_cùhî_£t_iv
–
mbedés_cùhî_c⁄ãxt_t
 *
˘x
,

488 c⁄° *
iv
, 
size_t
 
iv_Àn
 );

498 
	`mbedés_cùhî_ª£t
–
mbedés_cùhî_c⁄ãxt_t
 *
˘x
 );

500 #i‡
	`deföed
(
MBEDTLS_GCM_C
)

512 
	`mbedés_cùhî_upd©e_ad
–
mbedés_cùhî_c⁄ãxt_t
 *
˘x
,

513 c⁄° *
ad
, 
size_t
 
ad_Àn
 );

545 
	`mbedés_cùhî_upd©e
–
mbedés_cùhî_c⁄ãxt_t
 *
˘x
, c⁄° *
öput
,

546 
size_t
 
ûí
, *
ouçut
, size_à*
ﬁí
 );

565 
	`mbedés_cùhî_föish
–
mbedés_cùhî_c⁄ãxt_t
 *
˘x
,

566 *
ouçut
, 
size_t
 *
ﬁí
 );

568 #i‡
	`deföed
(
MBEDTLS_GCM_C
)

580 
	`mbedés_cùhî_wrôe_èg
–
mbedés_cùhî_c⁄ãxt_t
 *
˘x
,

581 *
èg
, 
size_t
 
èg_Àn
 );

594 
	`mbedés_cùhî_check_èg
–
mbedés_cùhî_c⁄ãxt_t
 *
˘x
,

595 c⁄° *
èg
, 
size_t
 
èg_Àn
 );

625 
	`mbedés_cùhî_¸y±
–
mbedés_cùhî_c⁄ãxt_t
 *
˘x
,

626 c⁄° *
iv
, 
size_t
 
iv_Àn
,

627 c⁄° *
öput
, 
size_t
 
ûí
,

628 *
ouçut
, 
size_t
 *
ﬁí
 );

630 #i‡
	`deföed
(
MBEDTLS_CIPHER_MODE_AEAD
)

653 
	`mbedés_cùhî_auth_í¸y±
–
mbedés_cùhî_c⁄ãxt_t
 *
˘x
,

654 c⁄° *
iv
, 
size_t
 
iv_Àn
,

655 c⁄° *
ad
, 
size_t
 
ad_Àn
,

656 c⁄° *
öput
, 
size_t
 
ûí
,

657 *
ouçut
, 
size_t
 *
ﬁí
,

658 *
èg
, 
size_t
 
èg_Àn
 );

687 
	`mbedés_cùhî_auth_de¸y±
–
mbedés_cùhî_c⁄ãxt_t
 *
˘x
,

688 c⁄° *
iv
, 
size_t
 
iv_Àn
,

689 c⁄° *
ad
, 
size_t
 
ad_Àn
,

690 c⁄° *
öput
, 
size_t
 
ûí
,

691 *
ouçut
, 
size_t
 *
ﬁí
,

692 c⁄° *
èg
, 
size_t
 
èg_Àn
 );

695 #ifde‡
__˝lu•lus


696 
	}
}

	@/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/mbedtls/config.h

1 
	#MBEDTLS_CTR_DRBG_C


	)

2 
	#MBEDTLS_ENTROPY_C


	)

3 
	#MBEDTLS_SHA256_C


	)

4 
	#MBEDTLS_SHA1_C


	)

5 
	#MBEDTLS_AES_C


	)

6 
	#MBEDTLS_MD_C


	)

7 
	#MBEDTLS_FS_IO


	)

8 
	#MBEDTLS_RSA_C


	)

9 
	#MBEDTLS_BIGNUM_C


	)

10 
	#MBEDTLS_PKCS1_V15


	)

11 
	#MBEDTLS_ASN1_PARSE_C


	)

12 
	#MBEDTLS_OID_C


	)

13 
	#MBEDTLS_GENPRIME


	)

14 
	#MBEDTLS_CIPHER_MODE_CBC


	)

15 
	#MBEDTLS_ASN1_WRITE_C


	)

16 
	#MBEDTLS_PK_C


	)

17 
	#MBEDTLS_PK_WRITE_C


	)

18 
	#MBEDTLS_PK_INTERNAL_C


	)

19 
	#MBEDTLS_PK_PARSE_C


	)

20 
	#MBEDTLS_CIPHER_PADDING_PKCS7


	)

21 
	#MBEDTLS_BASE64_C


	)

22 
	#MBEDTLS_PEM_PARSE_C


	)

23 
	#MBEDTLS_PEM_WRITE_C


	)

	@/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/mbedtls/ctr_drbg.h

23 #i‚de‡
MBEDTLS_CTR_DRBG_H


24 
	#MBEDTLS_CTR_DRBG_H


	)

26 
	~"´s.h
"

28 #i‡
deföed
(
MBEDTLS_THREADING_C
)

29 
	~"mbedés/thªadög.h
"

32 
	#MBEDTLS_ERR_CTR_DRBG_ENTROPY_SOURCE_FAILED
 -0x0034

	)

33 
	#MBEDTLS_ERR_CTR_DRBG_REQUEST_TOO_BIG
 -0x0036

	)

34 
	#MBEDTLS_ERR_CTR_DRBG_INPUT_TOO_BIG
 -0x0038

	)

35 
	#MBEDTLS_ERR_CTR_DRBG_FILE_IO_ERROR
 -0x003A

	)

37 
	#MBEDTLS_CTR_DRBG_BLOCKSIZE
 16

	)

38 
	#MBEDTLS_CTR_DRBG_KEYSIZE
 32

	)

39 
	#MBEDTLS_CTR_DRBG_KEYBITS
 ( 
MBEDTLS_CTR_DRBG_KEYSIZE
 * 8 )

	)

40 
	#MBEDTLS_CTR_DRBG_SEEDLEN
 ( 
MBEDTLS_CTR_DRBG_KEYSIZE
 + 
MBEDTLS_CTR_DRBG_BLOCKSIZE
 )

	)

51 #i‡!
deföed
(
MBEDTLS_CTR_DRBG_ENTROPY_LEN
)

52 #i‡
deföed
(
MBEDTLS_SHA512_C
Ë&& !deföed(
MBEDTLS_ENTROPY_FORCE_SHA256
)

53 
	#MBEDTLS_CTR_DRBG_ENTROPY_LEN
 48

	)

55 
	#MBEDTLS_CTR_DRBG_ENTROPY_LEN
 32

	)

59 #i‡!
deföed
(
MBEDTLS_CTR_DRBG_RESEED_INTERVAL
)

60 
	#MBEDTLS_CTR_DRBG_RESEED_INTERVAL
 10000

	)

63 #i‡!
deföed
(
MBEDTLS_CTR_DRBG_MAX_INPUT
)

64 
	#MBEDTLS_CTR_DRBG_MAX_INPUT
 256

	)

67 #i‡!
deföed
(
MBEDTLS_CTR_DRBG_MAX_REQUEST
)

68 
	#MBEDTLS_CTR_DRBG_MAX_REQUEST
 1024

	)

71 #i‡!
deföed
(
MBEDTLS_CTR_DRBG_MAX_SEED_INPUT
)

72 
	#MBEDTLS_CTR_DRBG_MAX_SEED_INPUT
 384

	)

77 
	#MBEDTLS_CTR_DRBG_PR_OFF
 0

	)

78 
	#MBEDTLS_CTR_DRBG_PR_ON
 1

	)

80 #ifde‡
__˝lu•lus


89 
cou¡î
[16];

90 
ª£ed_cou¡î
;

91 
¥edi˘i⁄_ªsi°™˚
;

93 
size_t
 
íå›y_Àn
;

95 
ª£ed_öãrvÆ
;

97 
mbedés_´s_c⁄ãxt
 
´s_˘x
;

102 (*
f_íå›y
)(*, *, 
size_t
);

104 *
p_íå›y
;

106 #i‡
deföed
(
MBEDTLS_THREADING_C
)

107 
mbedés_thªadög_muãx_t
 
muãx
;

110 
	tmbedés_˘r_drbg_c⁄ãxt
;

119 
mbedés_˘r_drbg_öô
–
mbedés_˘r_drbg_c⁄ãxt
 *
˘x
 );

139 
mbedés_˘r_drbg_£ed
–
mbedés_˘r_drbg_c⁄ãxt
 *
˘x
,

140 (*
f_íå›y
)(*, *, 
size_t
),

141 *
p_íå›y
,

142 c⁄° *
cu°om
,

143 
size_t
 
Àn
 );

150 
mbedés_˘r_drbg_‰ì
–
mbedés_˘r_drbg_c⁄ãxt
 *
˘x
 );

161 
mbedés_˘r_drbg_£t_¥edi˘i⁄_ªsi°™˚
–
mbedés_˘r_drbg_c⁄ãxt
 *
˘x
,

162 
ªsi°™˚
 );

171 
mbedés_˘r_drbg_£t_íå›y_Àn
–
mbedés_˘r_drbg_c⁄ãxt
 *
˘x
,

172 
size_t
 
Àn
 );

181 
mbedés_˘r_drbg_£t_ª£ed_öãrvÆ
–
mbedés_˘r_drbg_c⁄ãxt
 *
˘x
,

182 
öãrvÆ
 );

194 
mbedés_˘r_drbg_ª£ed
–
mbedés_˘r_drbg_c⁄ãxt
 *
˘x
,

195 c⁄° *
addôi⁄Æ
, 
size_t
 
Àn
 );

208 
mbedés_˘r_drbg_upd©e
–
mbedés_˘r_drbg_c⁄ãxt
 *
˘x
,

209 c⁄° *
addôi⁄Æ
, 
size_t
 
add_Àn
 );

226 
mbedés_˘r_drbg_øndom_wôh_add
–*
p_∫g
,

227 *
ouçut
, 
size_t
 
ouçut_Àn
,

228 c⁄° *
addôi⁄Æ
, 
size_t
 
add_Àn
 );

243 
mbedés_˘r_drbg_øndom
–*
p_∫g
,

244 *
ouçut
, 
size_t
 
ouçut_Àn
 );

246 #i‡
deföed
(
MBEDTLS_FS_IO
)

257 
mbedés_˘r_drbg_wrôe_£ed_fûe
–
mbedés_˘r_drbg_c⁄ãxt
 *
˘x
, c⁄° *
∑th
 );

271 
mbedés_˘r_drbg_upd©e_£ed_fûe
–
mbedés_˘r_drbg_c⁄ãxt
 *
˘x
, c⁄° *
∑th
 );

279 
mbedés_˘r_drbg_£lf_ã°
–
vîbo£
 );

282 
mbedés_˘r_drbg_£ed_íå›y_Àn
–
mbedés_˘r_drbg_c⁄ãxt
 *,

283 (*)(*, *, 
size_t
), *,

284 c⁄° *, 
size_t
, size_t );

286 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/mbedtls/des.h

23 #i‚de‡
MBEDTLS_DES_H


24 
	#MBEDTLS_DES_H


	)

26 #i‡!
deföed
(
MBEDTLS_CONFIG_FILE
)

27 
	~"c⁄fig.h
"

29 #ö˛udê
MBEDTLS_CONFIG_FILE


32 
	~<°ddef.h
>

33 
	~<°döt.h
>

35 
	#MBEDTLS_DES_ENCRYPT
 1

	)

36 
	#MBEDTLS_DES_DECRYPT
 0

	)

38 
	#MBEDTLS_ERR_DES_INVALID_INPUT_LENGTH
 -0x0032

	)

40 
	#MBEDTLS_DES_KEY_SIZE
 8

	)

42 #i‡!
deföed
(
MBEDTLS_DES_ALT
)

46 #ifde‡
__˝lu•lus


55 
uöt32_t
 
sk
[32];

57 
	tmbedés_des_c⁄ãxt
;

64 
uöt32_t
 
sk
[96];

66 
	tmbedés_des3_c⁄ãxt
;

73 
mbedés_des_öô
–
mbedés_des_c⁄ãxt
 *
˘x
 );

80 
mbedés_des_‰ì
–
mbedés_des_c⁄ãxt
 *
˘x
 );

87 
mbedés_des3_öô
–
mbedés_des3_c⁄ãxt
 *
˘x
 );

94 
mbedés_des3_‰ì
–
mbedés_des3_c⁄ãxt
 *
˘x
 );

104 
mbedés_des_key_£t_∑rôy
–
key
[
MBEDTLS_DES_KEY_SIZE
] );

116 
mbedés_des_key_check_key_∑rôy
–c⁄° 
key
[
MBEDTLS_DES_KEY_SIZE
] );

125 
mbedés_des_key_check_wók
–c⁄° 
key
[
MBEDTLS_DES_KEY_SIZE
] );

135 
mbedés_des_£tkey_íc
–
mbedés_des_c⁄ãxt
 *
˘x
, c⁄° 
key
[
MBEDTLS_DES_KEY_SIZE
] );

145 
mbedés_des_£tkey_dec
–
mbedés_des_c⁄ãxt
 *
˘x
, c⁄° 
key
[
MBEDTLS_DES_KEY_SIZE
] );

155 
mbedés_des3_£t2key_íc
–
mbedés_des3_c⁄ãxt
 *
˘x
,

156 c⁄° 
key
[
MBEDTLS_DES_KEY_SIZE
 * 2] );

166 
mbedés_des3_£t2key_dec
–
mbedés_des3_c⁄ãxt
 *
˘x
,

167 c⁄° 
key
[
MBEDTLS_DES_KEY_SIZE
 * 2] );

177 
mbedés_des3_£t3key_íc
–
mbedés_des3_c⁄ãxt
 *
˘x
,

178 c⁄° 
key
[
MBEDTLS_DES_KEY_SIZE
 * 3] );

188 
mbedés_des3_£t3key_dec
–
mbedés_des3_c⁄ãxt
 *
˘x
,

189 c⁄° 
key
[
MBEDTLS_DES_KEY_SIZE
 * 3] );

200 
mbedés_des_¸y±_ecb
–
mbedés_des_c⁄ãxt
 *
˘x
,

201 c⁄° 
öput
[8],

202 
ouçut
[8] );

204 #i‡
deföed
(
MBEDTLS_CIPHER_MODE_CBC
)

223 
mbedés_des_¸y±_cbc
–
mbedés_des_c⁄ãxt
 *
˘x
,

224 
mode
,

225 
size_t
 
Àngth
,

226 
iv
[8],

227 c⁄° *
öput
,

228 *
ouçut
 );

240 
mbedés_des3_¸y±_ecb
–
mbedés_des3_c⁄ãxt
 *
˘x
,

241 c⁄° 
öput
[8],

242 
ouçut
[8] );

244 #i‡
deföed
(
MBEDTLS_CIPHER_MODE_CBC
)

265 
mbedés_des3_¸y±_cbc
–
mbedés_des3_c⁄ãxt
 *
˘x
,

266 
mode
,

267 
size_t
 
Àngth
,

268 
iv
[8],

269 c⁄° *
öput
,

270 *
ouçut
 );

281 
mbedés_des_£tkey
–
uöt32_t
 
SK
[32],

282 c⁄° 
key
[
MBEDTLS_DES_KEY_SIZE
] );

283 #ifde‡
__˝lu•lus


288 
	~"des_Æt.h
"

291 #ifde‡
__˝lu•lus


300 
mbedés_des_£lf_ã°
–
vîbo£
 );

302 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/mbedtls/entropy.h

23 #i‚de‡
MBEDTLS_ENTROPY_H


24 
	#MBEDTLS_ENTROPY_H


	)

26 #i‡!
deföed
(
MBEDTLS_CONFIG_FILE
)

27 
	~"c⁄fig.h
"

29 #ö˛udê
MBEDTLS_CONFIG_FILE


32 
	~<°ddef.h
>

34 #i‡
deföed
(
MBEDTLS_SHA512_C
Ë&& !deföed(
MBEDTLS_ENTROPY_FORCE_SHA256
)

35 
	~"sha512.h
"

36 
	#MBEDTLS_ENTROPY_SHA512_ACCUMULATOR


	)

38 #i‡
deföed
(
MBEDTLS_SHA256_C
)

39 
	#MBEDTLS_ENTROPY_SHA256_ACCUMULATOR


	)

40 
	~"sha256.h
"

44 #i‡
deföed
(
MBEDTLS_THREADING_C
)

45 
	~"thªadög.h
"

48 #i‡
deföed
(
MBEDTLS_HAVEGE_C
)

49 
	~"havege.h
"

52 
	#MBEDTLS_ERR_ENTROPY_SOURCE_FAILED
 -0x003C

	)

53 
	#MBEDTLS_ERR_ENTROPY_MAX_SOURCES
 -0x003E

	)

54 
	#MBEDTLS_ERR_ENTROPY_NO_SOURCES_DEFINED
 -0x0040

	)

55 
	#MBEDTLS_ERR_ENTROPY_NO_STRONG_SOURCE
 -0x003D

	)

56 
	#MBEDTLS_ERR_ENTROPY_FILE_IO_ERROR
 -0x003F

	)

66 #i‡!
deföed
(
MBEDTLS_ENTROPY_MAX_SOURCES
)

67 
	#MBEDTLS_ENTROPY_MAX_SOURCES
 20

	)

70 #i‡!
deföed
(
MBEDTLS_ENTROPY_MAX_GATHER
)

71 
	#MBEDTLS_ENTROPY_MAX_GATHER
 128

	)

76 #i‡
deföed
(
MBEDTLS_ENTROPY_SHA512_ACCUMULATOR
)

77 
	#MBEDTLS_ENTROPY_BLOCK_SIZE
 64

	)

79 
	#MBEDTLS_ENTROPY_BLOCK_SIZE
 32

	)

82 
	#MBEDTLS_ENTROPY_MAX_SEED_SIZE
 1024

	)

83 
	#MBEDTLS_ENTROPY_SOURCE_MANUAL
 
MBEDTLS_ENTROPY_MAX_SOURCES


	)

85 
	#MBEDTLS_ENTROPY_SOURCE_STRONG
 1

	)

86 
	#MBEDTLS_ENTROPY_SOURCE_WEAK
 0

	)

88 #ifde‡
__˝lu•lus


103 (*
mbedés_íå›y_f_sour˚_±r
)(*
	td©a
, *
	touçut
, 
	tsize_t
 
	tÀn
,

104 
	tsize_t
 *
	tﬁí
);

111 
mbedés_íå›y_f_sour˚_±r
 
f_sour˚
;

112 * 
p_sour˚
;

113 
size_t
 
size
;

114 
size_t
 
thªshﬁd
;

115 
°r⁄g
;

117 
	tmbedés_íå›y_sour˚_°©e
;

124 #i‡
deföed
(
MBEDTLS_ENTROPY_SHA512_ACCUMULATOR
)

125 
mbedés_sha512_c⁄ãxt
 
accumuœt‹
;

127 
mbedés_sha256_c⁄ãxt
 
accumuœt‹
;

129 
sour˚_cou¡
;

130 
mbedés_íå›y_sour˚_°©e
 
sour˚
[
MBEDTLS_ENTROPY_MAX_SOURCES
];

131 #i‡
deföed
(
MBEDTLS_HAVEGE_C
)

132 
mbedés_havege_°©e
 
havege_d©a
;

134 #i‡
deföed
(
MBEDTLS_THREADING_C
)

135 
mbedés_thªadög_muãx_t
 
muãx
;

138 
	tmbedés_íå›y_c⁄ãxt
;

145 
mbedés_íå›y_öô
–
mbedés_íå›y_c⁄ãxt
 *
˘x
 );

152 
mbedés_íå›y_‰ì
–
mbedés_íå›y_c⁄ãxt
 *
˘x
 );

171 
mbedés_íå›y_add_sour˚
–
mbedés_íå›y_c⁄ãxt
 *
˘x
,

172 
mbedés_íå›y_f_sour˚_±r
 
f_sour˚
, *
p_sour˚
,

173 
size_t
 
thªshﬁd
, 
°r⁄g
 );

183 
mbedés_íå›y_g©hî
–
mbedés_íå›y_c⁄ãxt
 *
˘x
 );

196 
mbedés_íå›y_func
–*
d©a
, *
ouçut
, 
size_t
 
Àn
 );

208 
mbedés_íå›y_upd©e_m™uÆ
–
mbedés_íå›y_c⁄ãxt
 *
˘x
,

209 c⁄° *
d©a
, 
size_t
 
Àn
 );

211 #i‡
deföed
(
MBEDTLS_FS_IO
)

222 
mbedés_íå›y_wrôe_£ed_fûe
–
mbedés_íå›y_c⁄ãxt
 *
˘x
, c⁄° *
∑th
 );

236 
mbedés_íå›y_upd©e_£ed_fûe
–
mbedés_íå›y_c⁄ãxt
 *
˘x
, c⁄° *
∑th
 );

239 #i‡
deföed
(
MBEDTLS_SELF_TEST
)

245 
mbedés_íå›y_£lf_ã°
–
vîbo£
 );

248 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/mbedtls/entropy_poll.h

23 #i‚de‡
MBEDTLS_ENTROPY_POLL_H


24 
	#MBEDTLS_ENTROPY_POLL_H


	)

26 #i‡!
deföed
(
MBEDTLS_CONFIG_FILE
)

27 
	~"c⁄fig.h
"

29 #ö˛udê
MBEDTLS_CONFIG_FILE


32 
	~<°ddef.h
>

34 #ifde‡
__˝lu•lus


41 
	#MBEDTLS_ENTROPY_MIN_PLATFORM
 32

	)

42 
	#MBEDTLS_ENTROPY_MIN_HAVEGE
 32

	)

43 
	#MBEDTLS_ENTROPY_MIN_HARDCLOCK
 4

	)

44 
	#MBEDTLS_ENTROPY_MIN_HARDWARE
 32

	)

46 #i‡!
deföed
(
MBEDTLS_NO_PLATFORM_ENTROPY
)

50 
mbedés_∂©f‹m_íå›y_pﬁl
–*
d©a
,

51 *
ouçut
, 
size_t
 
Àn
, size_à*
ﬁí
 );

54 #i‡
deföed
(
MBEDTLS_HAVEGE_C
)

60 
mbedés_havege_pﬁl
–*
d©a
,

61 *
ouçut
, 
size_t
 
Àn
, size_à*
ﬁí
 );

64 #i‡
deföed
(
MBEDTLS_TIMING_C
)

68 
mbedés_h¨d˛ock_pﬁl
–*
d©a
,

69 *
ouçut
, 
size_t
 
Àn
, size_à*
ﬁí
 );

72 #i‡
deföed
(
MBEDTLS_ENTROPY_HARDWARE_ALT
)

81 
mbedés_h¨dw¨e_pﬁl
–*
d©a
,

82 *
ouçut
, 
size_t
 
Àn
, size_à*
ﬁí
 );

85 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/mbedtls/md.h

25 #i‚de‡
MBEDTLS_MD_H


26 
	#MBEDTLS_MD_H


	)

28 
	~<°ddef.h
>

30 
	#MBEDTLS_ERR_MD_FEATURE_UNAVAILABLE
 -0x5080

	)

31 
	#MBEDTLS_ERR_MD_BAD_INPUT_DATA
 -0x5100

	)

32 
	#MBEDTLS_ERR_MD_ALLOC_FAILED
 -0x5180

	)

33 
	#MBEDTLS_ERR_MD_FILE_IO_ERROR
 -0x5200

	)

35 #ifde‡
__˝lu•lus


40 
MBEDTLS_MD_NONE
=0,

41 
MBEDTLS_MD_MD2
,

42 
MBEDTLS_MD_MD4
,

43 
MBEDTLS_MD_MD5
,

44 
MBEDTLS_MD_SHA1
,

45 
MBEDTLS_MD_SHA224
,

46 
MBEDTLS_MD_SHA256
,

47 
MBEDTLS_MD_SHA384
,

48 
MBEDTLS_MD_SHA512
,

49 
MBEDTLS_MD_RIPEMD160
,

50 } 
	tmbedés_md_ty≥_t
;

52 #i‡
deföed
(
MBEDTLS_SHA512_C
)

53 
	#MBEDTLS_MD_MAX_SIZE
 64

	)

55 
	#MBEDTLS_MD_MAX_SIZE
 32

	)

61 
mbedés_md_öfo_t
 
	tmbedés_md_öfo_t
;

68 c⁄° 
mbedés_md_öfo_t
 *
md_öfo
;

71 *
md_˘x
;

74 *
hmac_˘x
;

75 } 
	tmbedés_md_c⁄ãxt_t
;

83 c⁄° *
mbedés_md_li°
( );

94 c⁄° 
mbedés_md_öfo_t
 *
mbedés_md_öfo_‰om_°rög
–c⁄° *
md_«me
 );

105 c⁄° 
mbedés_md_öfo_t
 *
mbedés_md_öfo_‰om_ty≥
–
mbedés_md_ty≥_t
 
md_ty≥
 );

112 
mbedés_md_öô
–
mbedés_md_c⁄ãxt_t
 *
˘x
 );

119 
mbedés_md_‰ì
–
mbedés_md_c⁄ãxt_t
 *
˘x
 );

121 #i‡! 
deföed
(
MBEDTLS_DEPRECATED_REMOVED
)

122 #i‡
deföed
(
MBEDTLS_DEPRECATED_WARNING
)

123 
	#MBEDTLS_DEPRECATED
 
	`__©åibuã__
((
dïªˇãd
))

	)

125 
	#MBEDTLS_DEPRECATED


	)

141 
mbedés_md_öô_˘x
–
mbedés_md_c⁄ãxt_t
 *
˘x
, c⁄° 
mbedés_md_öfo_t
 *
md_öfo
 ) 
MBEDTLS_DEPRECATED
;

142 #unde‡
MBEDTLS_DEPRECATED


159 
mbedés_md_£tup
–
mbedés_md_c⁄ãxt_t
 *
˘x
, c⁄° 
mbedés_md_öfo_t
 *
md_öfo
, 
hmac
 );

175 
mbedés_md_˛⁄e
–
mbedés_md_c⁄ãxt_t
 *
d°
,

176 c⁄° 
mbedés_md_c⁄ãxt_t
 *
§c
 );

185 
mbedés_md_gë_size
–c⁄° 
mbedés_md_öfo_t
 *
md_öfo
 );

194 
mbedés_md_ty≥_t
 
mbedés_md_gë_ty≥
–c⁄° 
mbedés_md_öfo_t
 *
md_öfo
 );

203 c⁄° *
mbedés_md_gë_«me
–c⁄° 
mbedés_md_öfo_t
 *
md_öfo
 );

215 
mbedés_md_°¨ts
–
mbedés_md_c⁄ãxt_t
 *
˘x
 );

229 
mbedés_md_upd©e
–
mbedés_md_c⁄ãxt_t
 *
˘x
, c⁄° *
öput
, 
size_t
 
ûí
 );

242 
mbedés_md_föish
–
mbedés_md_c⁄ãxt_t
 *
˘x
, *
ouçut
 );

255 
mbedés_md
–c⁄° 
mbedés_md_öfo_t
 *
md_öfo
, c⁄° *
öput
, 
size_t
 
ûí
,

256 *
ouçut
 );

258 #i‡
deföed
(
MBEDTLS_FS_IO
)

270 
mbedés_md_fûe
–c⁄° 
mbedés_md_öfo_t
 *
md_öfo
, c⁄° *
∑th
,

271 *
ouçut
 );

285 
mbedés_md_hmac_°¨ts
–
mbedés_md_c⁄ãxt_t
 *
˘x
, c⁄° *
key
,

286 
size_t
 
keyÀn
 );

301 
mbedés_md_hmac_upd©e
–
mbedés_md_c⁄ãxt_t
 *
˘x
, c⁄° *
öput
,

302 
size_t
 
ûí
 );

316 
mbedés_md_hmac_föish
–
mbedés_md_c⁄ãxt_t
 *
˘x
, *
ouçut
);

327 
mbedés_md_hmac_ª£t
–
mbedés_md_c⁄ãxt_t
 *
˘x
 );

342 
mbedés_md_hmac
–c⁄° 
mbedés_md_öfo_t
 *
md_öfo
, c⁄° *
key
, 
size_t
 
keyÀn
,

343 c⁄° *
öput
, 
size_t
 
ûí
,

344 *
ouçut
 );

347 
mbedés_md_¥o˚ss
–
mbedés_md_c⁄ãxt_t
 *
˘x
, c⁄° *
d©a
 );

349 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/mbedtls/md5.h

23 #i‚de‡
MBEDTLS_MD5_H


24 
	#MBEDTLS_MD5_H


	)

26 #i‡!
deföed
(
MBEDTLS_CONFIG_FILE
)

27 
	~"c⁄fig.h
"

29 #ö˛udê
MBEDTLS_CONFIG_FILE


32 
	~<°ddef.h
>

33 
	~<°döt.h
>

35 #i‡!
deföed
(
MBEDTLS_MD5_ALT
)

39 #ifde‡
__˝lu•lus


48 
uöt32_t
 
tŸÆ
[2];

49 
uöt32_t
 
°©e
[4];

50 
buf„r
[64];

52 
	tmbedés_md5_c⁄ãxt
;

59 
mbedés_md5_öô
–
mbedés_md5_c⁄ãxt
 *
˘x
 );

66 
mbedés_md5_‰ì
–
mbedés_md5_c⁄ãxt
 *
˘x
 );

74 
mbedés_md5_˛⁄e
–
mbedés_md5_c⁄ãxt
 *
d°
,

75 c⁄° 
mbedés_md5_c⁄ãxt
 *
§c
 );

82 
mbedés_md5_°¨ts
–
mbedés_md5_c⁄ãxt
 *
˘x
 );

91 
mbedés_md5_upd©e
–
mbedés_md5_c⁄ãxt
 *
˘x
, c⁄° *
öput
, 
size_t
 
ûí
 );

99 
mbedés_md5_föish
–
mbedés_md5_c⁄ãxt
 *
˘x
, 
ouçut
[16] );

102 
mbedés_md5_¥o˚ss
–
mbedés_md5_c⁄ãxt
 *
˘x
, c⁄° 
d©a
[64] );

104 #ifde‡
__˝lu•lus


109 
	~"md5_Æt.h
"

112 #ifde‡
__˝lu•lus


123 
mbedés_md5
–c⁄° *
öput
, 
size_t
 
ûí
, 
ouçut
[16] );

130 
mbedés_md5_£lf_ã°
–
vîbo£
 );

132 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/mbedtls/md_internal.h

27 #i‚de‡
MBEDTLS_MD_WRAP_H


28 
	#MBEDTLS_MD_WRAP_H


	)

30 #i‡!
deföed
(
MBEDTLS_CONFIG_FILE
)

31 
	~"c⁄fig.h
"

33 #ö˛udê
MBEDTLS_CONFIG_FILE


36 
	~"md.h
"

38 #ifde‡
__˝lu•lus


46 
	smbedés_md_öfo_t


49 
mbedés_md_ty≥_t
 
ty≥
;

52 c⁄° * 
«me
;

55 
size
;

58 
block_size
;

61 (*
°¨ts_func
)–*
˘x
 );

64 (*
upd©e_func
)–*
˘x
, c⁄° *
öput
, 
size_t
 
ûí
 );

67 (*
föish_func
)–*
˘x
, *
ouçut
 );

70 (*
dige°_func
)–c⁄° *
öput
, 
size_t
 
ûí
,

71 *
ouçut
 );

74 * (*
˘x_Æloc_func
)( );

77 (*
˘x_‰ì_func
)–*
˘x
 );

80 (*
˛⁄e_func
)–*
d°
, c⁄° *
§c
 );

83 (*
¥o˚ss_func
)–*
˘x
, c⁄° *
öput
 );

86 #i‡
deföed
(
MBEDTLS_MD2_C
)

87 c⁄° 
mbedés_md_öfo_t
 
mbedés_md2_öfo
;

89 #i‡
deföed
(
MBEDTLS_MD4_C
)

90 c⁄° 
mbedés_md_öfo_t
 
mbedés_md4_öfo
;

92 #i‡
deföed
(
MBEDTLS_MD5_C
)

93 c⁄° 
mbedés_md_öfo_t
 
mbedés_md5_öfo
;

95 #i‡
deföed
(
MBEDTLS_RIPEMD160_C
)

96 c⁄° 
mbedés_md_öfo_t
 
mbedés_rùemd160_öfo
;

98 #i‡
deföed
(
MBEDTLS_SHA1_C
)

99 c⁄° 
mbedés_md_öfo_t
 
mbedés_sha1_öfo
;

101 #i‡
deföed
(
MBEDTLS_SHA256_C
)

102 c⁄° 
mbedés_md_öfo_t
 
mbedés_sha224_öfo
;

103 c⁄° 
mbedés_md_öfo_t
 
mbedés_sha256_öfo
;

105 #i‡
deföed
(
MBEDTLS_SHA512_C
)

106 c⁄° 
mbedés_md_öfo_t
 
mbedés_sha384_öfo
;

107 c⁄° 
mbedés_md_öfo_t
 
mbedés_sha512_öfo
;

110 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/mbedtls/oid.h

23 #i‚de‡
MBEDTLS_OID_H


24 
	#MBEDTLS_OID_H


	)

26 #i‡!
deföed
(
MBEDTLS_CONFIG_FILE
)

27 
	~"c⁄fig.h
"

29 #ö˛udê
MBEDTLS_CONFIG_FILE


32 
	~"a¢1.h
"

33 
	~"pk.h
"

35 
	~<°ddef.h
>

37 #i‡
deföed
(
MBEDTLS_CIPHER_C
)

38 
	~"cùhî.h
"

41 #i‡
deföed
(
MBEDTLS_MD_C
)

42 
	~"md.h
"

45 #i‡
deföed
(
MBEDTLS_X509_USE_C
Ë|| deföed(
MBEDTLS_X509_CREATE_C
)

46 
	~"x509.h
"

49 
	#MBEDTLS_ERR_OID_NOT_FOUND
 -0x002E

	)

50 
	#MBEDTLS_ERR_OID_BUF_TOO_SMALL
 -0x000B

	)

55 
	#MBEDTLS_OID_ISO_MEMBER_BODIES
 "\x2a"

	)

56 
	#MBEDTLS_OID_ISO_IDENTIFIED_ORG
 "\x2b"

	)

57 
	#MBEDTLS_OID_ISO_CCITT_DS
 "\x55"

	)

58 
	#MBEDTLS_OID_ISO_ITU_COUNTRY
 "\x60"

	)

63 
	#MBEDTLS_OID_COUNTRY_US
 "\x86\x48"

	)

64 
	#MBEDTLS_OID_ORG_RSA_DATA_SECURITY
 "\x86\xf7\x0d"

	)

65 
	#MBEDTLS_OID_RSA_COMPANY
 
MBEDTLS_OID_ISO_MEMBER_BODIES
 
MBEDTLS_OID_COUNTRY_US
 \

66 
MBEDTLS_OID_ORG_RSA_DATA_SECURITY


	)

67 
	#MBEDTLS_OID_ORG_ANSI_X9_62
 "\x˚\x3d"

	)

68 
	#MBEDTLS_OID_ANSI_X9_62
 
MBEDTLS_OID_ISO_MEMBER_BODIES
 
MBEDTLS_OID_COUNTRY_US
 \

69 
MBEDTLS_OID_ORG_ANSI_X9_62


	)

74 
	#MBEDTLS_OID_ORG_DOD
 "\x06"

	)

75 
	#MBEDTLS_OID_ORG_OIW
 "\x0e"

	)

76 
	#MBEDTLS_OID_OIW_SECSIG
 
MBEDTLS_OID_ORG_OIW
 "\x03"

	)

77 
	#MBEDTLS_OID_OIW_SECSIG_ALG
 
MBEDTLS_OID_OIW_SECSIG
 "\x02"

	)

78 
	#MBEDTLS_OID_OIW_SECSIG_SHA1
 
MBEDTLS_OID_OIW_SECSIG_ALG
 "\x1a"

	)

79 
	#MBEDTLS_OID_ORG_CERTICOM
 "\x81\x04"

	)

80 
	#MBEDTLS_OID_CERTICOM
 
MBEDTLS_OID_ISO_IDENTIFIED_ORG
 
MBEDTLS_OID_ORG_CERTICOM


	)

81 
	#MBEDTLS_OID_ORG_TELETRUST
 "\x24"

	)

82 
	#MBEDTLS_OID_TELETRUST
 
MBEDTLS_OID_ISO_IDENTIFIED_ORG
 
MBEDTLS_OID_ORG_TELETRUST


	)

87 
	#MBEDTLS_OID_ORGANIZATION
 "\x01"

	)

88 
	#MBEDTLS_OID_ISO_ITU_US_ORG
 
MBEDTLS_OID_ISO_ITU_COUNTRY
 
MBEDTLS_OID_COUNTRY_US
 
MBEDTLS_OID_ORGANIZATION


	)

90 
	#MBEDTLS_OID_ORG_GOV
 "\x65"

	)

91 
	#MBEDTLS_OID_GOV
 
MBEDTLS_OID_ISO_ITU_US_ORG
 
MBEDTLS_OID_ORG_GOV


	)

93 
	#MBEDTLS_OID_ORG_NETSCAPE
 "\x86\xF8\x42"

	)

94 
	#MBEDTLS_OID_NETSCAPE
 
MBEDTLS_OID_ISO_ITU_US_ORG
 
MBEDTLS_OID_ORG_NETSCAPE


	)

97 
	#MBEDTLS_OID_ID_CE
 
MBEDTLS_OID_ISO_CCITT_DS
 "\x1D"

	)

104 
	#MBEDTLS_OID_PKIX
 
MBEDTLS_OID_ISO_IDENTIFIED_ORG
 
MBEDTLS_OID_ORG_DOD
 "\x01\x05\x05\x07"

	)

109 
	#MBEDTLS_OID_AT
 
MBEDTLS_OID_ISO_CCITT_DS
 "\x04"

	)

110 
	#MBEDTLS_OID_AT_CN
 
MBEDTLS_OID_AT
 "\x03"

	)

111 
	#MBEDTLS_OID_AT_SUR_NAME
 
MBEDTLS_OID_AT
 "\x04"

	)

112 
	#MBEDTLS_OID_AT_SERIAL_NUMBER
 
MBEDTLS_OID_AT
 "\x05"

	)

113 
	#MBEDTLS_OID_AT_COUNTRY
 
MBEDTLS_OID_AT
 "\x06"

	)

114 
	#MBEDTLS_OID_AT_LOCALITY
 
MBEDTLS_OID_AT
 "\x07"

	)

115 
	#MBEDTLS_OID_AT_STATE
 
MBEDTLS_OID_AT
 "\x08"

	)

116 
	#MBEDTLS_OID_AT_ORGANIZATION
 
MBEDTLS_OID_AT
 "\x0A"

	)

117 
	#MBEDTLS_OID_AT_ORG_UNIT
 
MBEDTLS_OID_AT
 "\x0B"

	)

118 
	#MBEDTLS_OID_AT_TITLE
 
MBEDTLS_OID_AT
 "\x0C"

	)

119 
	#MBEDTLS_OID_AT_POSTAL_ADDRESS
 
MBEDTLS_OID_AT
 "\x10"

	)

120 
	#MBEDTLS_OID_AT_POSTAL_CODE
 
MBEDTLS_OID_AT
 "\x11"

	)

121 
	#MBEDTLS_OID_AT_GIVEN_NAME
 
MBEDTLS_OID_AT
 "\x2A"

	)

122 
	#MBEDTLS_OID_AT_INITIALS
 
MBEDTLS_OID_AT
 "\x2B"

	)

123 
	#MBEDTLS_OID_AT_GENERATION_QUALIFIER
 
MBEDTLS_OID_AT
 "\x2C"

	)

124 
	#MBEDTLS_OID_AT_UNIQUE_IDENTIFIER
 
MBEDTLS_OID_AT
 "\x2D"

	)

125 
	#MBEDTLS_OID_AT_DN_QUALIFIER
 
MBEDTLS_OID_AT
 "\x2E"

	)

126 
	#MBEDTLS_OID_AT_PSEUDONYM
 
MBEDTLS_OID_AT
 "\x41"

	)

128 
	#MBEDTLS_OID_DOMAIN_COMPONENT
 "\x09\x92\x26\x89\x93\xF2\x2C\x64\x01\x19"

	)

133 
	#MBEDTLS_OID_AUTHORITY_KEY_IDENTIFIER
 
MBEDTLS_OID_ID_CE
 "\x23"

	)

134 
	#MBEDTLS_OID_SUBJECT_KEY_IDENTIFIER
 
MBEDTLS_OID_ID_CE
 "\x0E"

	)

135 
	#MBEDTLS_OID_KEY_USAGE
 
MBEDTLS_OID_ID_CE
 "\x0F"

	)

136 
	#MBEDTLS_OID_CERTIFICATE_POLICIES
 
MBEDTLS_OID_ID_CE
 "\x20"

	)

137 
	#MBEDTLS_OID_POLICY_MAPPINGS
 
MBEDTLS_OID_ID_CE
 "\x21"

	)

138 
	#MBEDTLS_OID_SUBJECT_ALT_NAME
 
MBEDTLS_OID_ID_CE
 "\x11"

	)

139 
	#MBEDTLS_OID_ISSUER_ALT_NAME
 
MBEDTLS_OID_ID_CE
 "\x12"

	)

140 
	#MBEDTLS_OID_SUBJECT_DIRECTORY_ATTRS
 
MBEDTLS_OID_ID_CE
 "\x09"

	)

141 
	#MBEDTLS_OID_BASIC_CONSTRAINTS
 
MBEDTLS_OID_ID_CE
 "\x13"

	)

142 
	#MBEDTLS_OID_NAME_CONSTRAINTS
 
MBEDTLS_OID_ID_CE
 "\x1E"

	)

143 
	#MBEDTLS_OID_POLICY_CONSTRAINTS
 
MBEDTLS_OID_ID_CE
 "\x24"

	)

144 
	#MBEDTLS_OID_EXTENDED_KEY_USAGE
 
MBEDTLS_OID_ID_CE
 "\x25"

	)

145 
	#MBEDTLS_OID_CRL_DISTRIBUTION_POINTS
 
MBEDTLS_OID_ID_CE
 "\x1F"

	)

146 
	#MBEDTLS_OID_INIHIBIT_ANYPOLICY
 
MBEDTLS_OID_ID_CE
 "\x36"

	)

147 
	#MBEDTLS_OID_FRESHEST_CRL
 
MBEDTLS_OID_ID_CE
 "\x2E"

	)

152 
	#MBEDTLS_OID_NS_CERT
 
MBEDTLS_OID_NETSCAPE
 "\x01"

	)

153 
	#MBEDTLS_OID_NS_CERT_TYPE
 
MBEDTLS_OID_NS_CERT
 "\x01"

	)

154 
	#MBEDTLS_OID_NS_BASE_URL
 
MBEDTLS_OID_NS_CERT
 "\x02"

	)

155 
	#MBEDTLS_OID_NS_REVOCATION_URL
 
MBEDTLS_OID_NS_CERT
 "\x03"

	)

156 
	#MBEDTLS_OID_NS_CA_REVOCATION_URL
 
MBEDTLS_OID_NS_CERT
 "\x04"

	)

157 
	#MBEDTLS_OID_NS_RENEWAL_URL
 
MBEDTLS_OID_NS_CERT
 "\x07"

	)

158 
	#MBEDTLS_OID_NS_CA_POLICY_URL
 
MBEDTLS_OID_NS_CERT
 "\x08"

	)

159 
	#MBEDTLS_OID_NS_SSL_SERVER_NAME
 
MBEDTLS_OID_NS_CERT
 "\x0C"

	)

160 
	#MBEDTLS_OID_NS_COMMENT
 
MBEDTLS_OID_NS_CERT
 "\x0D"

	)

161 
	#MBEDTLS_OID_NS_DATA_TYPE
 
MBEDTLS_OID_NETSCAPE
 "\x02"

	)

162 
	#MBEDTLS_OID_NS_CERT_SEQUENCE
 
MBEDTLS_OID_NS_DATA_TYPE
 "\x05"

	)

167 
	#MBEDTLS_OID_PRIVATE_KEY_USAGE_PERIOD
 
MBEDTLS_OID_ID_CE
 "\x10"

	)

168 
	#MBEDTLS_OID_CRL_NUMBER
 
MBEDTLS_OID_ID_CE
 "\x14"

	)

173 
	#MBEDTLS_OID_ANY_EXTENDED_KEY_USAGE
 
MBEDTLS_OID_EXTENDED_KEY_USAGE
 "\x00"

	)

175 
	#MBEDTLS_OID_KP
 
MBEDTLS_OID_PKIX
 "\x03"

	)

176 
	#MBEDTLS_OID_SERVER_AUTH
 
MBEDTLS_OID_KP
 "\x01"

	)

177 
	#MBEDTLS_OID_CLIENT_AUTH
 
MBEDTLS_OID_KP
 "\x02"

	)

178 
	#MBEDTLS_OID_CODE_SIGNING
 
MBEDTLS_OID_KP
 "\x03"

	)

179 
	#MBEDTLS_OID_EMAIL_PROTECTION
 
MBEDTLS_OID_KP
 "\x04"

	)

180 
	#MBEDTLS_OID_TIME_STAMPING
 
MBEDTLS_OID_KP
 "\x08"

	)

181 
	#MBEDTLS_OID_OCSP_SIGNING
 
MBEDTLS_OID_KP
 "\x09"

	)

187 
	#MBEDTLS_OID_PKCS
 
MBEDTLS_OID_RSA_COMPANY
 "\x01"

	)

188 
	#MBEDTLS_OID_PKCS1
 
MBEDTLS_OID_PKCS
 "\x01"

	)

189 
	#MBEDTLS_OID_PKCS5
 
MBEDTLS_OID_PKCS
 "\x05"

	)

190 
	#MBEDTLS_OID_PKCS9
 
MBEDTLS_OID_PKCS
 "\x09"

	)

191 
	#MBEDTLS_OID_PKCS12
 
MBEDTLS_OID_PKCS
 "\x0c"

	)

196 
	#MBEDTLS_OID_PKCS1_RSA
 
MBEDTLS_OID_PKCS1
 "\x01"

	)

197 
	#MBEDTLS_OID_PKCS1_MD2
 
MBEDTLS_OID_PKCS1
 "\x02"

	)

198 
	#MBEDTLS_OID_PKCS1_MD4
 
MBEDTLS_OID_PKCS1
 "\x03"

	)

199 
	#MBEDTLS_OID_PKCS1_MD5
 
MBEDTLS_OID_PKCS1
 "\x04"

	)

200 
	#MBEDTLS_OID_PKCS1_SHA1
 
MBEDTLS_OID_PKCS1
 "\x05"

	)

201 
	#MBEDTLS_OID_PKCS1_SHA224
 
MBEDTLS_OID_PKCS1
 "\x0e"

	)

202 
	#MBEDTLS_OID_PKCS1_SHA256
 
MBEDTLS_OID_PKCS1
 "\x0b"

	)

203 
	#MBEDTLS_OID_PKCS1_SHA384
 
MBEDTLS_OID_PKCS1
 "\x0c"

	)

204 
	#MBEDTLS_OID_PKCS1_SHA512
 
MBEDTLS_OID_PKCS1
 "\x0d"

	)

206 
	#MBEDTLS_OID_RSA_SHA_OBS
 "\x2B\x0E\x03\x02\x1D"

	)

208 
	#MBEDTLS_OID_PKCS9_EMAIL
 
MBEDTLS_OID_PKCS9
 "\x01"

	)

211 
	#MBEDTLS_OID_RSASSA_PSS
 
MBEDTLS_OID_PKCS1
 "\x0a"

	)

212 
	#MBEDTLS_OID_MGF1
 
MBEDTLS_OID_PKCS1
 "\x08"

	)

217 
	#MBEDTLS_OID_DIGEST_ALG_MD2
 
MBEDTLS_OID_RSA_COMPANY
 "\x02\x02"

	)

218 
	#MBEDTLS_OID_DIGEST_ALG_MD4
 
MBEDTLS_OID_RSA_COMPANY
 "\x02\x04"

	)

219 
	#MBEDTLS_OID_DIGEST_ALG_MD5
 
MBEDTLS_OID_RSA_COMPANY
 "\x02\x05"

	)

220 
	#MBEDTLS_OID_DIGEST_ALG_SHA1
 
MBEDTLS_OID_ISO_IDENTIFIED_ORG
 
MBEDTLS_OID_OIW_SECSIG_SHA1


	)

221 
	#MBEDTLS_OID_DIGEST_ALG_SHA224
 
MBEDTLS_OID_GOV
 "\x03\x04\x02\x04"

	)

222 
	#MBEDTLS_OID_DIGEST_ALG_SHA256
 
MBEDTLS_OID_GOV
 "\x03\x04\x02\x01"

	)

224 
	#MBEDTLS_OID_DIGEST_ALG_SHA384
 
MBEDTLS_OID_GOV
 "\x03\x04\x02\x02"

	)

226 
	#MBEDTLS_OID_DIGEST_ALG_SHA512
 
MBEDTLS_OID_GOV
 "\x03\x04\x02\x03"

	)

228 
	#MBEDTLS_OID_HMAC_SHA1
 
MBEDTLS_OID_RSA_COMPANY
 "\x02\x07"

	)

233 
	#MBEDTLS_OID_DES_CBC
 
MBEDTLS_OID_ISO_IDENTIFIED_ORG
 
MBEDTLS_OID_OIW_SECSIG_ALG
 "\x07"

	)

234 
	#MBEDTLS_OID_DES_EDE3_CBC
 
MBEDTLS_OID_RSA_COMPANY
 "\x03\x07"

	)

239 
	#MBEDTLS_OID_PKCS5_PBKDF2
 
MBEDTLS_OID_PKCS5
 "\x0c"

	)

240 
	#MBEDTLS_OID_PKCS5_PBES2
 
MBEDTLS_OID_PKCS5
 "\x0d"

	)

241 
	#MBEDTLS_OID_PKCS5_PBMAC1
 
MBEDTLS_OID_PKCS5
 "\x0e"

	)

246 
	#MBEDTLS_OID_PKCS5_PBE_MD2_DES_CBC
 
MBEDTLS_OID_PKCS5
 "\x01"

	)

247 
	#MBEDTLS_OID_PKCS5_PBE_MD2_RC2_CBC
 
MBEDTLS_OID_PKCS5
 "\x04"

	)

248 
	#MBEDTLS_OID_PKCS5_PBE_MD5_DES_CBC
 
MBEDTLS_OID_PKCS5
 "\x03"

	)

249 
	#MBEDTLS_OID_PKCS5_PBE_MD5_RC2_CBC
 
MBEDTLS_OID_PKCS5
 "\x06"

	)

250 
	#MBEDTLS_OID_PKCS5_PBE_SHA1_DES_CBC
 
MBEDTLS_OID_PKCS5
 "\x0a"

	)

251 
	#MBEDTLS_OID_PKCS5_PBE_SHA1_RC2_CBC
 
MBEDTLS_OID_PKCS5
 "\x0b"

	)

256 
	#MBEDTLS_OID_PKCS9_CSR_EXT_REQ
 
MBEDTLS_OID_PKCS9
 "\x0e"

	)

261 
	#MBEDTLS_OID_PKCS12_PBE
 
MBEDTLS_OID_PKCS12
 "\x01"

	)

263 
	#MBEDTLS_OID_PKCS12_PBE_SHA1_RC4_128
 
MBEDTLS_OID_PKCS12_PBE
 "\x01"

	)

264 
	#MBEDTLS_OID_PKCS12_PBE_SHA1_RC4_40
 
MBEDTLS_OID_PKCS12_PBE
 "\x02"

	)

265 
	#MBEDTLS_OID_PKCS12_PBE_SHA1_DES3_EDE_CBC
 
MBEDTLS_OID_PKCS12_PBE
 "\x03"

	)

266 
	#MBEDTLS_OID_PKCS12_PBE_SHA1_DES2_EDE_CBC
 
MBEDTLS_OID_PKCS12_PBE
 "\x04"

	)

267 
	#MBEDTLS_OID_PKCS12_PBE_SHA1_RC2_128_CBC
 
MBEDTLS_OID_PKCS12_PBE
 "\x05"

	)

268 
	#MBEDTLS_OID_PKCS12_PBE_SHA1_RC2_40_CBC
 
MBEDTLS_OID_PKCS12_PBE
 "\x06"

	)

276 
	#MBEDTLS_OID_EC_ALG_UNRESTRICTED
 
MBEDTLS_OID_ANSI_X9_62
 "\x02\01"

	)

281 
	#MBEDTLS_OID_EC_ALG_ECDH
 
MBEDTLS_OID_CERTICOM
 "\x01\x0c"

	)

289 
	#MBEDTLS_OID_EC_GRP_SECP192R1
 
MBEDTLS_OID_ANSI_X9_62
 "\x03\x01\x01"

	)

293 
	#MBEDTLS_OID_EC_GRP_SECP224R1
 
MBEDTLS_OID_CERTICOM
 "\x00\x21"

	)

297 
	#MBEDTLS_OID_EC_GRP_SECP256R1
 
MBEDTLS_OID_ANSI_X9_62
 "\x03\x01\x07"

	)

301 
	#MBEDTLS_OID_EC_GRP_SECP384R1
 
MBEDTLS_OID_CERTICOM
 "\x00\x22"

	)

305 
	#MBEDTLS_OID_EC_GRP_SECP521R1
 
MBEDTLS_OID_CERTICOM
 "\x00\x23"

	)

309 
	#MBEDTLS_OID_EC_GRP_SECP192K1
 
MBEDTLS_OID_CERTICOM
 "\x00\x1f"

	)

313 
	#MBEDTLS_OID_EC_GRP_SECP224K1
 
MBEDTLS_OID_CERTICOM
 "\x00\x20"

	)

317 
	#MBEDTLS_OID_EC_GRP_SECP256K1
 
MBEDTLS_OID_CERTICOM
 "\x00\x0a"

	)

325 
	#MBEDTLS_OID_EC_BRAINPOOL_V1
 
MBEDTLS_OID_TELETRUST
 "\x03\x03\x02\x08\x01\x01"

	)

328 
	#MBEDTLS_OID_EC_GRP_BP256R1
 
MBEDTLS_OID_EC_BRAINPOOL_V1
 "\x07"

	)

331 
	#MBEDTLS_OID_EC_GRP_BP384R1
 
MBEDTLS_OID_EC_BRAINPOOL_V1
 "\x0B"

	)

334 
	#MBEDTLS_OID_EC_GRP_BP512R1
 
MBEDTLS_OID_EC_BRAINPOOL_V1
 "\x0D"

	)

342 
	#MBEDTLS_OID_ANSI_X9_62_FIELD_TYPE
 
MBEDTLS_OID_ANSI_X9_62
 "\x01"

	)

343 
	#MBEDTLS_OID_ANSI_X9_62_PRIME_FIELD
 
MBEDTLS_OID_ANSI_X9_62_FIELD_TYPE
 "\x01"

	)

348 
	#MBEDTLS_OID_ANSI_X9_62_SIG
 
MBEDTLS_OID_ANSI_X9_62
 "\x04"

	)

349 
	#MBEDTLS_OID_ANSI_X9_62_SIG_SHA2
 
MBEDTLS_OID_ANSI_X9_62_SIG
 "\x03"

	)

353 
	#MBEDTLS_OID_ECDSA_SHA1
 
MBEDTLS_OID_ANSI_X9_62_SIG
 "\x01"

	)

358 
	#MBEDTLS_OID_ECDSA_SHA224
 
MBEDTLS_OID_ANSI_X9_62_SIG_SHA2
 "\x01"

	)

363 
	#MBEDTLS_OID_ECDSA_SHA256
 
MBEDTLS_OID_ANSI_X9_62_SIG_SHA2
 "\x02"

	)

368 
	#MBEDTLS_OID_ECDSA_SHA384
 
MBEDTLS_OID_ANSI_X9_62_SIG_SHA2
 "\x03"

	)

373 
	#MBEDTLS_OID_ECDSA_SHA512
 
MBEDTLS_OID_ANSI_X9_62_SIG_SHA2
 "\x04"

	)

375 #ifde‡
__˝lu•lus


383 c⁄° *
a¢1
;

384 
size_t
 
a¢1_Àn
;

385 c⁄° *
«me
;

386 c⁄° *
des¸ùti⁄
;

387 } 
	tmbedés_oid_des¸ùt‹_t
;

400 
mbedés_oid_gë_numîic_°rög
–*
buf
, 
size_t
 
size
, c⁄° 
mbedés_a¢1_buf
 *
oid
 );

402 #i‡
deföed
(
MBEDTLS_X509_USE_C
Ë|| deföed(
MBEDTLS_X509_CREATE_C
)

411 
mbedés_oid_gë_x509_ext_ty≥
–c⁄° 
mbedés_a¢1_buf
 *
oid
, *
ext_ty≥
 );

423 
mbedés_oid_gë_©å_sh‹t_«me
–c⁄° 
mbedés_a¢1_buf
 *
oid
, c⁄° **
sh‹t_«me
 );

433 
mbedés_oid_gë_pk_Æg
–c⁄° 
mbedés_a¢1_buf
 *
oid
, 
mbedés_pk_ty≥_t
 *
pk_Æg
 );

444 
mbedés_oid_gë_oid_by_pk_Æg
–
mbedés_pk_ty≥_t
 
pk_Æg
,

445 c⁄° **
oid
, 
size_t
 *
ﬁí
 );

447 #i‡
deföed
(
MBEDTLS_ECP_C
)

456 
mbedés_oid_gë_ec_gΩ
–c⁄° 
mbedés_a¢1_buf
 *
oid
, 
mbedés_e˝_group_id
 *
gΩ_id
 );

467 
mbedés_oid_gë_oid_by_ec_gΩ
–
mbedés_e˝_group_id
 
gΩ_id
,

468 c⁄° **
oid
, 
size_t
 *
ﬁí
 );

471 #i‡
deföed
(
MBEDTLS_MD_C
)

481 
mbedés_oid_gë_sig_Æg
–c⁄° 
mbedés_a¢1_buf
 *
oid
,

482 
mbedés_md_ty≥_t
 *
md_Æg
, 
mbedés_pk_ty≥_t
 *
pk_Æg
 );

492 
mbedés_oid_gë_sig_Æg_desc
–c⁄° 
mbedés_a¢1_buf
 *
oid
, c⁄° **
desc
 );

504 
mbedés_oid_gë_oid_by_sig_Æg
–
mbedés_pk_ty≥_t
 
pk_Æg
, 
mbedés_md_ty≥_t
 
md_Æg
,

505 c⁄° **
oid
, 
size_t
 *
ﬁí
 );

515 
mbedés_oid_gë_md_Æg
–c⁄° 
mbedés_a¢1_buf
 *
oid
, 
mbedés_md_ty≥_t
 *
md_Æg
 );

526 
mbedés_oid_gë_exãnded_key_ußge
–c⁄° 
mbedés_a¢1_buf
 *
oid
, c⁄° **
desc
 );

537 
mbedés_oid_gë_oid_by_md
–
mbedés_md_ty≥_t
 
md_Æg
, c⁄° **
oid
, 
size_t
 *
ﬁí
 );

539 #i‡
deföed
(
MBEDTLS_CIPHER_C
)

548 
mbedés_oid_gë_cùhî_Æg
–c⁄° 
mbedés_a¢1_buf
 *
oid
, 
mbedés_cùhî_ty≥_t
 *
cùhî_Æg
 );

551 #i‡
deföed
(
MBEDTLS_PKCS12_C
)

562 
mbedés_oid_gë_pkcs12_pbe_Æg
–c⁄° 
mbedés_a¢1_buf
 *
oid
, 
mbedés_md_ty≥_t
 *
md_Æg
,

563 
mbedés_cùhî_ty≥_t
 *
cùhî_Æg
 );

566 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/mbedtls/pem.h

23 #i‚de‡
MBEDTLS_PEM_H


24 
	#MBEDTLS_PEM_H


	)

26 
	~<°ddef.h
>

34 
	#MBEDTLS_ERR_PEM_NO_HEADER_FOOTER_PRESENT
 -0x1080

	)

35 
	#MBEDTLS_ERR_PEM_INVALID_DATA
 -0x1100

	)

36 
	#MBEDTLS_ERR_PEM_ALLOC_FAILED
 -0x1180

	)

37 
	#MBEDTLS_ERR_PEM_INVALID_ENC_IV
 -0x1200

	)

38 
	#MBEDTLS_ERR_PEM_UNKNOWN_ENC_ALG
 -0x1280

	)

39 
	#MBEDTLS_ERR_PEM_PASSWORD_REQUIRED
 -0x1300

	)

40 
	#MBEDTLS_ERR_PEM_PASSWORD_MISMATCH
 -0x1380

	)

41 
	#MBEDTLS_ERR_PEM_FEATURE_UNAVAILABLE
 -0x1400

	)

42 
	#MBEDTLS_ERR_PEM_BAD_INPUT_DATA
 -0x1480

	)

45 #ifde‡
__˝lu•lus


49 #i‡
deföed
(
MBEDTLS_PEM_PARSE_C
)

55 *
buf
;

56 
size_t
 
buÊí
;

57 *
öfo
;

59 
	tmbedés_≥m_c⁄ãxt
;

66 
mbedés_≥m_öô
–
mbedés_≥m_c⁄ãxt
 *
˘x
 );

90 
mbedés_≥m_ªad_buf„r
–
mbedés_≥m_c⁄ãxt
 *
˘x
, c⁄° *
hódî
, c⁄° *
foŸî
,

91 c⁄° *
d©a
,

92 c⁄° *
pwd
,

93 
size_t
 
pwdÀn
, size_à*
u£_Àn
 );

100 
mbedés_≥m_‰ì
–
mbedés_≥m_c⁄ãxt
 *
˘x
 );

103 #i‡
deföed
(
MBEDTLS_PEM_WRITE_C
)

120 
mbedés_≥m_wrôe_buf„r
–c⁄° *
hódî
, c⁄° *
foŸî
,

121 c⁄° *
dî_d©a
, 
size_t
 
dî_Àn
,

122 *
buf
, 
size_t
 
buf_Àn
, size_à*
ﬁí
 );

125 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/mbedtls/pk.h

24 #i‚de‡
MBEDTLS_PK_H


25 
	#MBEDTLS_PK_H


	)

27 #i‡!
deföed
(
MBEDTLS_CONFIG_FILE
)

28 
	~"c⁄fig.h
"

30 #ö˛udê
MBEDTLS_CONFIG_FILE


33 
	~"md.h
"

35 #i‡
deföed
(
MBEDTLS_RSA_C
)

36 
	~"rß.h
"

39 #i‡
deföed
(
MBEDTLS_ECP_C
)

40 
	~"e˝.h
"

43 #i‡
deföed
(
MBEDTLS_ECDSA_C
)

44 
	~"ecdß.h
"

47 #i‡–
deföed
(
__ARMCC_VERSION
Ë|| deföed(
_MSC_VER
) ) && \

48 !
deföed
(
ölöe
Ë&& !
	$deföed
(
__˝lu•lus
)

49 
	#ölöe
 
__ölöe


	)

52 
	#MBEDTLS_ERR_PK_ALLOC_FAILED
 -0x3F80

	)

53 
	#MBEDTLS_ERR_PK_TYPE_MISMATCH
 -0x3F00

	)

54 
	#MBEDTLS_ERR_PK_BAD_INPUT_DATA
 -0x3E80

	)

55 
	#MBEDTLS_ERR_PK_FILE_IO_ERROR
 -0x3E00

	)

56 
	#MBEDTLS_ERR_PK_KEY_INVALID_VERSION
 -0x3D80

	)

57 
	#MBEDTLS_ERR_PK_KEY_INVALID_FORMAT
 -0x3D00

	)

58 
	#MBEDTLS_ERR_PK_UNKNOWN_PK_ALG
 -0x3C80

	)

59 
	#MBEDTLS_ERR_PK_PASSWORD_REQUIRED
 -0x3C00

	)

60 
	#MBEDTLS_ERR_PK_PASSWORD_MISMATCH
 -0x3B80

	)

61 
	#MBEDTLS_ERR_PK_INVALID_PUBKEY
 -0x3B00

	)

62 
	#MBEDTLS_ERR_PK_INVALID_ALG
 -0x3A80

	)

63 
	#MBEDTLS_ERR_PK_UNKNOWN_NAMED_CURVE
 -0x3A00

	)

64 
	#MBEDTLS_ERR_PK_FEATURE_UNAVAILABLE
 -0x3980

	)

65 
	#MBEDTLS_ERR_PK_SIG_LEN_MISMATCH
 -0x3900

	)

67 #ifde‡
__˝lu•lus


75 
MBEDTLS_PK_NONE
=0,

76 
MBEDTLS_PK_RSA
,

77 
MBEDTLS_PK_ECKEY
,

78 
MBEDTLS_PK_ECKEY_DH
,

79 
MBEDTLS_PK_ECDSA
,

80 
MBEDTLS_PK_RSA_ALT
,

81 
MBEDTLS_PK_RSASSA_PSS
,

82 } 
	tmbedés_pk_ty≥_t
;

90 
mbedés_md_ty≥_t
 
mgf1_hash_id
;

91 
ex≥˘ed_ß…_Àn
;

93 } 
	tmbedés_pk_rßsß_pss_›ti⁄s
;

100 
MBEDTLS_PK_DEBUG_NONE
 = 0,

101 
MBEDTLS_PK_DEBUG_MPI
,

102 
MBEDTLS_PK_DEBUG_ECP
,

103 } 
	tmbedés_pk_debug_ty≥
;

110 
mbedés_pk_debug_ty≥
 
ty≥
;

111 c⁄° *
«me
;

112 *
vÆue
;

113 } 
	tmbedés_pk_debug_ôem
;

116 
	#MBEDTLS_PK_DEBUG_MAX_ITEMS
 3

	)

121 
mbedés_pk_öfo_t
 
	tmbedés_pk_öfo_t
;

128 c⁄° 
mbedés_pk_öfo_t
 * 
pk_öfo
;

129 * 
pk_˘x
;

130 } 
	tmbedés_pk_c⁄ãxt
;

132 #i‡
	`deföed
(
MBEDTLS_RSA_C
)

139 
ölöe
 
mbedés_rß_c⁄ãxt
 *
	`mbedés_pk_rß
–c⁄° 
mbedés_pk_c⁄ãxt
 
pk
 )

141 –(
mbedés_rß_c⁄ãxt
 *Ë(
pk
).
pk_˘x
 );

145 #i‡
	`deföed
(
MBEDTLS_ECP_C
)

152 
ölöe
 
mbedés_e˝_key∑ú
 *
	`mbedés_pk_ec
–c⁄° 
mbedés_pk_c⁄ãxt
 
pk
 )

154 –(
mbedés_e˝_key∑ú
 *Ë(
pk
).
pk_˘x
 );

158 #i‡
	`deföed
(
MBEDTLS_PK_RSA_ALT_SUPPORT
)

162 (*
	tmbedés_pk_rß_Æt_de¸y±_func
)–*
	t˘x
, 
	tmode
, 
	tsize_t
 *
	tﬁí
,

163 c⁄° *
	töput
, *
	touçut
,

164 
	tsize_t
 
	touçut_max_Àn
 );

165 (*
	tmbedés_pk_rß_Æt_sign_func
)–*
	t˘x
,

166 (*
	tf_∫g
)(*, *, 
	tsize_t
), *
	tp_∫g
,

167 
	tmode
, 
	tmbedés_md_ty≥_t
 
	tmd_Æg
, 
	thashÀn
,

168 c⁄° *
	thash
, *
	tsig
 );

169 
	`size_t
 (*
	tmbedés_pk_rß_Æt_key_Àn_func
)–*
	t˘x
 );

179 c⁄° 
mbedés_pk_öfo_t
 *
	`mbedés_pk_öfo_‰om_ty≥
–
mbedés_pk_ty≥_t
 
pk_ty≥
 );

184 
	`mbedés_pk_öô
–
mbedés_pk_c⁄ãxt
 *
˘x
 );

189 
	`mbedés_pk_‰ì
–
mbedés_pk_c⁄ãxt
 *
˘x
 );

205 
	`mbedés_pk_£tup
–
mbedés_pk_c⁄ãxt
 *
˘x
, c⁄° 
mbedés_pk_öfo_t
 *
öfo
 );

207 #i‡
	`deföed
(
MBEDTLS_PK_RSA_ALT_SUPPORT
)

222 
	`mbedés_pk_£tup_rß_Æt
–
mbedés_pk_c⁄ãxt
 *
˘x
, * 
key
,

223 
mbedés_pk_rß_Æt_de¸y±_func
 
de¸y±_func
,

224 
mbedés_pk_rß_Æt_sign_func
 
sign_func
,

225 
mbedés_pk_rß_Æt_key_Àn_func
 
key_Àn_func
 );

235 
size_t
 
	`mbedés_pk_gë_bôÀn
–c⁄° 
mbedés_pk_c⁄ãxt
 *
˘x
 );

243 
ölöe
 
size_t
 
	`mbedés_pk_gë_Àn
–c⁄° 
mbedés_pk_c⁄ãxt
 *
˘x
 )

245 ––
	`mbedés_pk_gë_bôÀn
–
˘x
 ) + 7 ) / 8 );

257 
	`mbedés_pk_ˇn_do
–c⁄° 
mbedés_pk_c⁄ãxt
 *
˘x
, 
mbedés_pk_ty≥_t
 
ty≥
 );

283 
	`mbedés_pk_vîify
–
mbedés_pk_c⁄ãxt
 *
˘x
, 
mbedés_md_ty≥_t
 
md_Æg
,

284 c⁄° *
hash
, 
size_t
 
hash_Àn
,

285 c⁄° *
sig
, 
size_t
 
sig_Àn
 );

316 
	`mbedés_pk_vîify_ext
–
mbedés_pk_ty≥_t
 
ty≥
, c⁄° *
›ti⁄s
,

317 
mbedés_pk_c⁄ãxt
 *
˘x
, 
mbedés_md_ty≥_t
 
md_Æg
,

318 c⁄° *
hash
, 
size_t
 
hash_Àn
,

319 c⁄° *
sig
, 
size_t
 
sig_Àn
 );

345 
	`mbedés_pk_sign
–
mbedés_pk_c⁄ãxt
 *
˘x
, 
mbedés_md_ty≥_t
 
md_Æg
,

346 c⁄° *
hash
, 
size_t
 
hash_Àn
,

347 *
sig
, 
size_t
 *
sig_Àn
,

348 (*
f_∫g
)(*, *, 
size_t
), *
p_∫g
 );

366 
	`mbedés_pk_de¸y±
–
mbedés_pk_c⁄ãxt
 *
˘x
,

367 c⁄° *
öput
, 
size_t
 
ûí
,

368 *
ouçut
, 
size_t
 *
ﬁí
, size_à
osize
,

369 (*
f_∫g
)(*, *, 
size_t
), *
p_∫g
 );

387 
	`mbedés_pk_í¸y±
–
mbedés_pk_c⁄ãxt
 *
˘x
,

388 c⁄° *
öput
, 
size_t
 
ûí
,

389 *
ouçut
, 
size_t
 *
ﬁí
, size_à
osize
,

390 (*
f_∫g
)(*, *, 
size_t
), *
p_∫g
 );

400 
	`mbedés_pk_check_∑ú
–c⁄° 
mbedés_pk_c⁄ãxt
 *
pub
, c⁄° mbedés_pk_c⁄ãxà*
¥v
 );

410 
	`mbedés_pk_debug
–c⁄° 
mbedés_pk_c⁄ãxt
 *
˘x
, 
mbedés_pk_debug_ôem
 *
ôems
 );

419 c⁄° * 
	`mbedés_pk_gë_«me
–c⁄° 
mbedés_pk_c⁄ãxt
 *
˘x
 );

428 
mbedés_pk_ty≥_t
 
	`mbedés_pk_gë_ty≥
–c⁄° 
mbedés_pk_c⁄ãxt
 *
˘x
 );

430 #i‡
	`deföed
(
MBEDTLS_PK_PARSE_C
)

450 
	`mbedés_pk_∑r£_key
–
mbedés_pk_c⁄ãxt
 *
˘x
,

451 c⁄° *
key
, 
size_t
 
keyÀn
,

452 c⁄° *
pwd
, 
size_t
 
pwdÀn
 );

471 
	`mbedés_pk_∑r£_public_key
–
mbedés_pk_c⁄ãxt
 *
˘x
,

472 c⁄° *
key
, 
size_t
 
keyÀn
 );

474 #i‡
	`deföed
(
MBEDTLS_FS_IO
)

491 
	`mbedés_pk_∑r£_keyfûe
–
mbedés_pk_c⁄ãxt
 *
˘x
,

492 c⁄° *
∑th
, c⁄° *
∑ssw‹d
 );

509 
	`mbedés_pk_∑r£_public_keyfûe
–
mbedés_pk_c⁄ãxt
 *
˘x
, c⁄° *
∑th
 );

513 #i‡
	`deföed
(
MBEDTLS_PK_WRITE_C
)

527 
	`mbedés_pk_wrôe_key_dî
–
mbedés_pk_c⁄ãxt
 *
˘x
, *
buf
, 
size_t
 
size
 );

542 
	`mbedés_pk_wrôe_pubkey_dî
–
mbedés_pk_c⁄ãxt
 *
˘x
, *
buf
, 
size_t
 
size
 );

544 #i‡
	`deföed
(
MBEDTLS_PEM_WRITE_C
)

554 
	`mbedés_pk_wrôe_pubkey_≥m
–
mbedés_pk_c⁄ãxt
 *
˘x
, *
buf
, 
size_t
 
size
 );

565 
	`mbedés_pk_wrôe_key_≥m
–
mbedés_pk_c⁄ãxt
 *
˘x
, *
buf
, 
size_t
 
size
 );

574 #i‡
	`deföed
(
MBEDTLS_PK_PARSE_C
)

584 
	`mbedés_pk_∑r£_subpubkey
–**
p
, c⁄° *
íd
,

585 
mbedés_pk_c⁄ãxt
 *
pk
 );

588 #i‡
	`deföed
(
MBEDTLS_PK_WRITE_C
)

599 
	`mbedés_pk_wrôe_pubkey
–**
p
, *
°¨t
,

600 c⁄° 
mbedés_pk_c⁄ãxt
 *
key
 );

607 #i‡
	`deföed
(
MBEDTLS_FS_IO
)

608 
	`mbedés_pk_lﬂd_fûe
–c⁄° *
∑th
, **
buf
, 
size_t
 *
n
 );

611 #ifde‡
__˝lu•lus


612 
	}
}

	@/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/mbedtls/pk_internal.h

24 #i‚de‡
MBEDTLS_PK_WRAP_H


25 
	#MBEDTLS_PK_WRAP_H


	)

27 #i‡!
deföed
(
MBEDTLS_CONFIG_FILE
)

28 
	~"c⁄fig.h
"

30 #ö˛udê
MBEDTLS_CONFIG_FILE


33 
	~"pk.h
"

35 
	smbedés_pk_öfo_t


38 
mbedés_pk_ty≥_t
 
	mty≥
;

41 c⁄° *
	m«me
;

44 
size_t
 (*
gë_bôÀn
)( const * );

47 (*
	mˇn_do
)–
mbedés_pk_ty≥_t
 
	mty≥
 );

50 (*
	mvîify_func
)–*
	m˘x
, 
mbedés_md_ty≥_t
 
	mmd_Æg
,

51 c⁄° *
	mhash
, 
size_t
 
	mhash_Àn
,

52 c⁄° *
	msig
, 
size_t
 
	msig_Àn
 );

55 (*
	msign_func
)–*
	m˘x
, 
mbedés_md_ty≥_t
 
	mmd_Æg
,

56 c⁄° *
	mhash
, 
size_t
 
	mhash_Àn
,

57 *
	msig
, 
size_t
 *
	msig_Àn
,

58 (*
	mf_∫g
)(*, *, 
	msize_t
),

59 *
	mp_∫g
 );

62 (*
	mde¸y±_func
)–*
	m˘x
, c⁄° *
	möput
, 
size_t
 
	mûí
,

63 *
	mouçut
, 
size_t
 *
	mﬁí
, size_à
	mosize
,

64 (*
	mf_∫g
)(*, *, 
	msize_t
),

65 *
	mp_∫g
 );

68 (*
	mí¸y±_func
)–*
	m˘x
, c⁄° *
	möput
, 
size_t
 
	mûí
,

69 *
	mouçut
, 
size_t
 *
	mﬁí
, size_à
	mosize
,

70 (*
	mf_∫g
)(*, *, 
	msize_t
),

71 *
	mp_∫g
 );

74 (*
	mcheck_∑ú_func
)–c⁄° *
	mpub
, c⁄° *
	m¥v
 );

77 * (*
	m˘x_Æloc_func
)( );

80 (*
	m˘x_‰ì_func
)–*
	m˘x
 );

83 (*
	mdebug_func
)–c⁄° *
	m˘x
, 
mbedés_pk_debug_ôem
 *
	môems
 );

86 #i‡
deföed
(
MBEDTLS_PK_RSA_ALT_SUPPORT
)

90 *
	mkey
;

91 
mbedés_pk_rß_Æt_de¸y±_func
 
	mde¸y±_func
;

92 
mbedés_pk_rß_Æt_sign_func
 
	msign_func
;

93 
mbedés_pk_rß_Æt_key_Àn_func
 
	mkey_Àn_func
;

94 } 
	tmbedés_rß_Æt_c⁄ãxt
;

97 #i‡
deföed
(
MBEDTLS_RSA_C
)

98 c⁄° 
mbedés_pk_öfo_t
 
mbedés_rß_öfo
;

101 #i‡
deföed
(
MBEDTLS_ECP_C
)

102 c⁄° 
mbedés_pk_öfo_t
 
mbedés_eckey_öfo
;

103 c⁄° 
mbedés_pk_öfo_t
 
mbedés_eckeydh_öfo
;

106 #i‡
deföed
(
MBEDTLS_ECDSA_C
)

107 c⁄° 
mbedés_pk_öfo_t
 
mbedés_ecdß_öfo
;

110 #i‡
deföed
(
MBEDTLS_PK_RSA_ALT_SUPPORT
)

111 c⁄° 
mbedés_pk_öfo_t
 
mbedés_rß_Æt_öfo
;

	@/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/mbedtls/rsa.h

23 #i‚de‡
MBEDTLS_RSA_H


24 
	#MBEDTLS_RSA_H


	)

26 #i‡!
deföed
(
MBEDTLS_CONFIG_FILE
)

27 
	~"c⁄fig.h
"

29 #ö˛udê
MBEDTLS_CONFIG_FILE


32 
	~"bignum.h
"

33 
	~"md.h
"

35 #i‡
deföed
(
MBEDTLS_THREADING_C
)

36 
	~"thªadög.h
"

42 
	#MBEDTLS_ERR_RSA_BAD_INPUT_DATA
 -0x4080

	)

43 
	#MBEDTLS_ERR_RSA_INVALID_PADDING
 -0x4100

	)

44 
	#MBEDTLS_ERR_RSA_KEY_GEN_FAILED
 -0x4180

	)

45 
	#MBEDTLS_ERR_RSA_KEY_CHECK_FAILED
 -0x4200

	)

46 
	#MBEDTLS_ERR_RSA_PUBLIC_FAILED
 -0x4280

	)

47 
	#MBEDTLS_ERR_RSA_PRIVATE_FAILED
 -0x4300

	)

48 
	#MBEDTLS_ERR_RSA_VERIFY_FAILED
 -0x4380

	)

49 
	#MBEDTLS_ERR_RSA_OUTPUT_TOO_LARGE
 -0x4400

	)

50 
	#MBEDTLS_ERR_RSA_RNG_FAILED
 -0x4480

	)

55 
	#MBEDTLS_RSA_PUBLIC
 0

	)

56 
	#MBEDTLS_RSA_PRIVATE
 1

	)

58 
	#MBEDTLS_RSA_PKCS_V15
 0

	)

59 
	#MBEDTLS_RSA_PKCS_V21
 1

	)

61 
	#MBEDTLS_RSA_SIGN
 1

	)

62 
	#MBEDTLS_RSA_CRYPT
 2

	)

64 
	#MBEDTLS_RSA_SALT_LEN_ANY
 -1

	)

70 #i‡
deföed
(
MBEDTLS_RSA_C
)

72 #ifde‡
__˝lu•lus


81 
vî
;

82 
size_t
 
Àn
;

84 
mbedés_mpi
 
N
;

85 
mbedés_mpi
 
E
;

87 
mbedés_mpi
 
D
;

88 
mbedés_mpi
 
P
;

89 
mbedés_mpi
 
Q
;

90 
mbedés_mpi
 
DP
;

91 
mbedés_mpi
 
DQ
;

92 
mbedés_mpi
 
QP
;

94 
mbedés_mpi
 
RN
;

95 
mbedés_mpi
 
RP
;

96 
mbedés_mpi
 
RQ
;

98 
mbedés_mpi
 
Vi
;

99 
mbedés_mpi
 
Vf
;

101 
∑ddög
;

103 
hash_id
;

107 #i‡
deföed
(
MBEDTLS_THREADING_C
)

108 
mbedés_thªadög_muãx_t
 
muãx
;

111 
	tmbedés_rß_c⁄ãxt
;

137 
mbedés_rß_öô
–
mbedés_rß_c⁄ãxt
 *
˘x
,

138 
∑ddög
,

139 
hash_id
);

149 
mbedés_rß_£t_∑ddög
–
mbedés_rß_c⁄ãxt
 *
˘x
, 
∑ddög
, 
hash_id
);

165 
mbedés_rß_gí_key
–
mbedés_rß_c⁄ãxt
 *
˘x
,

166 (*
f_∫g
)(*, *, 
size_t
),

167 *
p_∫g
,

168 
nbôs
, 
exp⁄ít
 );

177 
mbedés_rß_check_pubkey
–c⁄° 
mbedés_rß_c⁄ãxt
 *
˘x
 );

186 
mbedés_rß_check_¥ivkey
–c⁄° 
mbedés_rß_c⁄ãxt
 *
˘x
 );

197 
mbedés_rß_check_pub_¥iv
–c⁄° 
mbedés_rß_c⁄ãxt
 *
pub
, c⁄° mbedés_rß_c⁄ãxà*
¥v
 );

215 
mbedés_rß_public
–
mbedés_rß_c⁄ãxt
 *
˘x
,

216 c⁄° *
öput
,

217 *
ouçut
 );

233 
mbedés_rß_¥iv©e
–
mbedés_rß_c⁄ãxt
 *
˘x
,

234 (*
f_∫g
)(*, *, 
size_t
),

235 *
p_∫g
,

236 c⁄° *
öput
,

237 *
ouçut
 );

258 
mbedés_rß_pkcs1_í¸y±
–
mbedés_rß_c⁄ãxt
 *
˘x
,

259 (*
f_∫g
)(*, *, 
size_t
),

260 *
p_∫g
,

261 
mode
, 
size_t
 
ûí
,

262 c⁄° *
öput
,

263 *
ouçut
 );

281 
mbedés_rß_rßes_pkcs1_v15_í¸y±
–
mbedés_rß_c⁄ãxt
 *
˘x
,

282 (*
f_∫g
)(*, *, 
size_t
),

283 *
p_∫g
,

284 
mode
, 
size_t
 
ûí
,

285 c⁄° *
öput
,

286 *
ouçut
 );

307 
mbedés_rß_rßes_ﬂï_í¸y±
–
mbedés_rß_c⁄ãxt
 *
˘x
,

308 (*
f_∫g
)(*, *, 
size_t
),

309 *
p_∫g
,

310 
mode
,

311 c⁄° *
œbñ
, 
size_t
 
œbñ_Àn
,

312 
size_t
 
ûí
,

313 c⁄° *
öput
,

314 *
ouçut
 );

336 
mbedés_rß_pkcs1_de¸y±
–
mbedés_rß_c⁄ãxt
 *
˘x
,

337 (*
f_∫g
)(*, *, 
size_t
),

338 *
p_∫g
,

339 
mode
, 
size_t
 *
ﬁí
,

340 c⁄° *
öput
,

341 *
ouçut
,

342 
size_t
 
ouçut_max_Àn
 );

362 
mbedés_rß_rßes_pkcs1_v15_de¸y±
–
mbedés_rß_c⁄ãxt
 *
˘x
,

363 (*
f_∫g
)(*, *, 
size_t
),

364 *
p_∫g
,

365 
mode
, 
size_t
 *
ﬁí
,

366 c⁄° *
öput
,

367 *
ouçut
,

368 
size_t
 
ouçut_max_Àn
 );

390 
mbedés_rß_rßes_ﬂï_de¸y±
–
mbedés_rß_c⁄ãxt
 *
˘x
,

391 (*
f_∫g
)(*, *, 
size_t
),

392 *
p_∫g
,

393 
mode
,

394 c⁄° *
œbñ
, 
size_t
 
œbñ_Àn
,

395 
size_t
 *
ﬁí
,

396 c⁄° *
öput
,

397 *
ouçut
,

398 
size_t
 
ouçut_max_Àn
 );

424 
mbedés_rß_pkcs1_sign
–
mbedés_rß_c⁄ãxt
 *
˘x
,

425 (*
f_∫g
)(*, *, 
size_t
),

426 *
p_∫g
,

427 
mode
,

428 
mbedés_md_ty≥_t
 
md_Æg
,

429 
hashÀn
,

430 c⁄° *
hash
,

431 *
sig
 );

451 
mbedés_rß_rßsß_pkcs1_v15_sign
–
mbedés_rß_c⁄ãxt
 *
˘x
,

452 (*
f_∫g
)(*, *, 
size_t
),

453 *
p_∫g
,

454 
mode
,

455 
mbedés_md_ty≥_t
 
md_Æg
,

456 
hashÀn
,

457 c⁄° *
hash
,

458 *
sig
 );

484 
mbedés_rß_rßsß_pss_sign
–
mbedés_rß_c⁄ãxt
 *
˘x
,

485 (*
f_∫g
)(*, *, 
size_t
),

486 *
p_∫g
,

487 
mode
,

488 
mbedés_md_ty≥_t
 
md_Æg
,

489 
hashÀn
,

490 c⁄° *
hash
,

491 *
sig
 );

516 
mbedés_rß_pkcs1_vîify
–
mbedés_rß_c⁄ãxt
 *
˘x
,

517 (*
f_∫g
)(*, *, 
size_t
),

518 *
p_∫g
,

519 
mode
,

520 
mbedés_md_ty≥_t
 
md_Æg
,

521 
hashÀn
,

522 c⁄° *
hash
,

523 c⁄° *
sig
 );

543 
mbedés_rß_rßsß_pkcs1_v15_vîify
–
mbedés_rß_c⁄ãxt
 *
˘x
,

544 (*
f_∫g
)(*, *, 
size_t
),

545 *
p_∫g
,

546 
mode
,

547 
mbedés_md_ty≥_t
 
md_Æg
,

548 
hashÀn
,

549 c⁄° *
hash
,

550 c⁄° *
sig
 );

577 
mbedés_rß_rßsß_pss_vîify
–
mbedés_rß_c⁄ãxt
 *
˘x
,

578 (*
f_∫g
)(*, *, 
size_t
),

579 *
p_∫g
,

580 
mode
,

581 
mbedés_md_ty≥_t
 
md_Æg
,

582 
hashÀn
,

583 c⁄° *
hash
,

584 c⁄° *
sig
 );

610 
mbedés_rß_rßsß_pss_vîify_ext
–
mbedés_rß_c⁄ãxt
 *
˘x
,

611 (*
f_∫g
)(*, *, 
size_t
),

612 *
p_∫g
,

613 
mode
,

614 
mbedés_md_ty≥_t
 
md_Æg
,

615 
hashÀn
,

616 c⁄° *
hash
,

617 
mbedés_md_ty≥_t
 
mgf1_hash_id
,

618 
ex≥˘ed_ß…_Àn
,

619 c⁄° *
sig
 );

630 
mbedés_rß_c›y
–
mbedés_rß_c⁄ãxt
 *
d°
, c⁄° mbedés_rß_c⁄ãxà*
§c
 );

637 
mbedés_rß_‰ì
–
mbedés_rß_c⁄ãxt
 *
˘x
 );

644 
mbedés_rß_£lf_ã°
–
vîbo£
 );

646 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/mbedtls/sha1.h

23 #i‚de‡
MBEDTLS_SHA1_H


24 
	#MBEDTLS_SHA1_H


	)

26 #i‡!
deföed
(
MBEDTLS_CONFIG_FILE
)

27 
	~"c⁄fig.h
"

29 #ö˛udê
MBEDTLS_CONFIG_FILE


32 
	~<°ddef.h
>

33 
	~<°döt.h
>

35 #i‡!
deföed
(
MBEDTLS_SHA1_ALT
)

39 #ifde‡
__˝lu•lus


48 
uöt32_t
 
tŸÆ
[2];

49 
uöt32_t
 
°©e
[5];

50 
buf„r
[64];

52 
	tmbedés_sha1_c⁄ãxt
;

59 
mbedés_sha1_öô
–
mbedés_sha1_c⁄ãxt
 *
˘x
 );

66 
mbedés_sha1_‰ì
–
mbedés_sha1_c⁄ãxt
 *
˘x
 );

74 
mbedés_sha1_˛⁄e
–
mbedés_sha1_c⁄ãxt
 *
d°
,

75 c⁄° 
mbedés_sha1_c⁄ãxt
 *
§c
 );

82 
mbedés_sha1_°¨ts
–
mbedés_sha1_c⁄ãxt
 *
˘x
 );

91 
mbedés_sha1_upd©e
–
mbedés_sha1_c⁄ãxt
 *
˘x
, c⁄° *
öput
, 
size_t
 
ûí
 );

99 
mbedés_sha1_föish
–
mbedés_sha1_c⁄ãxt
 *
˘x
, 
ouçut
[20] );

102 
mbedés_sha1_¥o˚ss
–
mbedés_sha1_c⁄ãxt
 *
˘x
, c⁄° 
d©a
[64] );

104 #ifde‡
__˝lu•lus


109 
	~"sha1_Æt.h
"

112 #ifde‡
__˝lu•lus


123 
mbedés_sha1
–c⁄° *
öput
, 
size_t
 
ûí
, 
ouçut
[20] );

130 
mbedés_sha1_£lf_ã°
–
vîbo£
 );

132 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/mbedtls/sha256.h

23 #i‚de‡
MBEDTLS_SHA256_H


24 
	#MBEDTLS_SHA256_H


	)

26 #i‡!
deföed
(
MBEDTLS_CONFIG_FILE
)

27 
	~"c⁄fig.h
"

29 #ö˛udê
MBEDTLS_CONFIG_FILE


32 
	~<°ddef.h
>

33 
	~<°döt.h
>

35 #i‡!
deföed
(
MBEDTLS_SHA256_ALT
)

39 #ifde‡
__˝lu•lus


48 
uöt32_t
 
tŸÆ
[2];

49 
uöt32_t
 
°©e
[8];

50 
buf„r
[64];

51 
is224
;

53 
	tmbedés_sha256_c⁄ãxt
;

60 
mbedés_sha256_öô
–
mbedés_sha256_c⁄ãxt
 *
˘x
 );

67 
mbedés_sha256_‰ì
–
mbedés_sha256_c⁄ãxt
 *
˘x
 );

75 
mbedés_sha256_˛⁄e
–
mbedés_sha256_c⁄ãxt
 *
d°
,

76 c⁄° 
mbedés_sha256_c⁄ãxt
 *
§c
 );

84 
mbedés_sha256_°¨ts
–
mbedés_sha256_c⁄ãxt
 *
˘x
, 
is224
 );

93 
mbedés_sha256_upd©e
–
mbedés_sha256_c⁄ãxt
 *
˘x
, c⁄° *
öput
,

94 
size_t
 
ûí
 );

102 
mbedés_sha256_föish
–
mbedés_sha256_c⁄ãxt
 *
˘x
, 
ouçut
[32] );

105 
mbedés_sha256_¥o˚ss
–
mbedés_sha256_c⁄ãxt
 *
˘x
, c⁄° 
d©a
[64] );

107 #ifde‡
__˝lu•lus


112 
	~"sha256_Æt.h
"

115 #ifde‡
__˝lu•lus


127 
mbedés_sha256
–c⁄° *
öput
, 
size_t
 
ûí
,

128 
ouçut
[32], 
is224
 );

135 
mbedés_sha256_£lf_ã°
–
vîbo£
 );

137 #ifde‡
__˝lu•lus


	@/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/md.c

26 #i‡!
deföed
(
MBEDTLS_CONFIG_FILE
)

27 
	~"mbedés/c⁄fig.h
"

29 #ö˛udê
MBEDTLS_CONFIG_FILE


32 #i‡
deföed
(
MBEDTLS_MD_C
)

34 
	~"mbedés/md.h
"

35 
	~"mbedés/md_öã∫Æ.h
"

37 #i‡
deföed
(
MBEDTLS_PLATFORM_C
)

38 
	~"mbedés/∂©f‹m.h
"

40 
	~<°dlib.h
>

41 
	#mbedés_ˇŒoc
 
ˇŒoc


	)

42 
	#mbedés_‰ì
 
‰ì


	)

45 
	~<°rög.h
>

47 #i‡
deföed
(
MBEDTLS_FS_IO
)

48 
	~<°dio.h
>

52 
	$mbedés_zîoize
–*
v
, 
size_t
 
n
 ) {

53 vﬁ©ûê*
p
 = 
v
;  
n
-- ) *p++ = 0;

54 
	}
}

59 c⁄° 
	gsuµ‹ãd_dige°s
[] = {

61 #i‡
deföed
(
MBEDTLS_SHA512_C
)

62 
MBEDTLS_MD_SHA512
,

63 
MBEDTLS_MD_SHA384
,

66 #i‡
deföed
(
MBEDTLS_SHA256_C
)

67 
MBEDTLS_MD_SHA256
,

68 
MBEDTLS_MD_SHA224
,

71 #i‡
deföed
(
MBEDTLS_SHA1_C
)

72 
MBEDTLS_MD_SHA1
,

75 #i‡
deföed
(
MBEDTLS_RIPEMD160_C
)

76 
MBEDTLS_MD_RIPEMD160
,

79 #i‡
deföed
(
MBEDTLS_MD5_C
)

80 
MBEDTLS_MD_MD5
,

83 #i‡
deföed
(
MBEDTLS_MD4_C
)

84 
MBEDTLS_MD_MD4
,

87 #i‡
deföed
(
MBEDTLS_MD2_C
)

88 
MBEDTLS_MD_MD2
,

91 
MBEDTLS_MD_NONE


94 c⁄° *
	$mbedés_md_li°
( )

96 –
suµ‹ãd_dige°s
 );

97 
	}
}

99 c⁄° 
mbedés_md_öfo_t
 *
	$mbedés_md_öfo_‰om_°rög
–c⁄° *
md_«me
 )

101 if–
NULL
 =
md_«me
 )

102 –
NULL
 );

105 #i‡
	`deföed
(
MBEDTLS_MD2_C
)

106 if–!
	`°rcmp
–"MD2", 
md_«me
 ) )

107  
	`mbedés_md_öfo_‰om_ty≥
–
MBEDTLS_MD_MD2
 );

109 #i‡
	`deföed
(
MBEDTLS_MD4_C
)

110 if–!
	`°rcmp
–"MD4", 
md_«me
 ) )

111  
	`mbedés_md_öfo_‰om_ty≥
–
MBEDTLS_MD_MD4
 );

113 #i‡
	`deföed
(
MBEDTLS_MD5_C
)

114 if–!
	`°rcmp
–"MD5", 
md_«me
 ) )

115  
	`mbedés_md_öfo_‰om_ty≥
–
MBEDTLS_MD_MD5
 );

117 #i‡
	`deföed
(
MBEDTLS_RIPEMD160_C
)

118 if–!
	`°rcmp
–"RIPEMD160", 
md_«me
 ) )

119  
	`mbedés_md_öfo_‰om_ty≥
–
MBEDTLS_MD_RIPEMD160
 );

121 #i‡
	`deföed
(
MBEDTLS_SHA1_C
)

122 if–!
	`°rcmp
–"SHA1", 
md_«me
 ) || !strcmp( "SHA", md_name ) )

123  
	`mbedés_md_öfo_‰om_ty≥
–
MBEDTLS_MD_SHA1
 );

125 #i‡
	`deföed
(
MBEDTLS_SHA256_C
)

126 if–!
	`°rcmp
–"SHA224", 
md_«me
 ) )

127  
	`mbedés_md_öfo_‰om_ty≥
–
MBEDTLS_MD_SHA224
 );

128 if–!
	`°rcmp
–"SHA256", 
md_«me
 ) )

129  
	`mbedés_md_öfo_‰om_ty≥
–
MBEDTLS_MD_SHA256
 );

131 #i‡
	`deföed
(
MBEDTLS_SHA512_C
)

132 if–!
	`°rcmp
–"SHA384", 
md_«me
 ) )

133  
	`mbedés_md_öfo_‰om_ty≥
–
MBEDTLS_MD_SHA384
 );

134 if–!
	`°rcmp
–"SHA512", 
md_«me
 ) )

135  
	`mbedés_md_öfo_‰om_ty≥
–
MBEDTLS_MD_SHA512
 );

137 –
NULL
 );

138 
	}
}

140 c⁄° 
mbedés_md_öfo_t
 *
	$mbedés_md_öfo_‰om_ty≥
–
mbedés_md_ty≥_t
 
md_ty≥
 )

142  
md_ty≥
 )

144 #i‡
	`deföed
(
MBEDTLS_MD2_C
)

145 
MBEDTLS_MD_MD2
:

146 –&
mbedés_md2_öfo
 );

148 #i‡
	`deföed
(
MBEDTLS_MD4_C
)

149 
MBEDTLS_MD_MD4
:

150 –&
mbedés_md4_öfo
 );

152 #i‡
	`deföed
(
MBEDTLS_MD5_C
)

153 
MBEDTLS_MD_MD5
:

154 –&
mbedés_md5_öfo
 );

156 #i‡
	`deföed
(
MBEDTLS_RIPEMD160_C
)

157 
MBEDTLS_MD_RIPEMD160
:

158 –&
mbedés_rùemd160_öfo
 );

160 #i‡
	`deföed
(
MBEDTLS_SHA1_C
)

161 
MBEDTLS_MD_SHA1
:

162 –&
mbedés_sha1_öfo
 );

164 #i‡
	`deföed
(
MBEDTLS_SHA256_C
)

165 
MBEDTLS_MD_SHA224
:

166 –&
mbedés_sha224_öfo
 );

167 
MBEDTLS_MD_SHA256
:

168 –&
mbedés_sha256_öfo
 );

170 #i‡
	`deföed
(
MBEDTLS_SHA512_C
)

171 
MBEDTLS_MD_SHA384
:

172 –&
mbedés_sha384_öfo
 );

173 
MBEDTLS_MD_SHA512
:

174 –&
mbedés_sha512_öfo
 );

177 –
NULL
 );

179 
	}
}

181 
	$mbedés_md_öô
–
mbedés_md_c⁄ãxt_t
 *
˘x
 )

183 
	`mem£t
–
˘x
, 0, –
mbedés_md_c⁄ãxt_t
 ) );

184 
	}
}

186 
	$mbedés_md_‰ì
–
mbedés_md_c⁄ãxt_t
 *
˘x
 )

188 if–
˘x
 =
NULL
 || ctx->
md_öfo
 == NULL )

191 if–
˘x
->
md_˘x
 !
NULL
 )

192 
˘x
->
md_öfo
->
	`˘x_‰ì_func
–˘x->
md_˘x
 );

194 if–
˘x
->
hmac_˘x
 !
NULL
 )

196 
	`mbedés_zîoize
–
˘x
->
hmac_˘x
, 2 * ctx->
md_öfo
->
block_size
 );

197 
	`mbedés_‰ì
–
˘x
->
hmac_˘x
 );

200 
	`mbedés_zîoize
–
˘x
, –
mbedés_md_c⁄ãxt_t
 ) );

201 
	}
}

203 
	$mbedés_md_˛⁄e
–
mbedés_md_c⁄ãxt_t
 *
d°
,

204 c⁄° 
mbedés_md_c⁄ãxt_t
 *
§c
 )

206 if–
d°
 =
NULL
 || d°->
md_öfo
 == NULL ||

207 
§c
 =
NULL
 || src->
md_öfo
 == NULL ||

208 
d°
->
md_öfo
 !
§c
->md_info )

210 –
MBEDTLS_ERR_MD_BAD_INPUT_DATA
 );

213 
d°
->
md_öfo
->
	`˛⁄e_func
–d°->
md_˘x
, 
§c
->md_ctx );

216 
	}
}

218 #i‡! 
deföed
(
MBEDTLS_DEPRECATED_REMOVED
)

219 
	$mbedés_md_öô_˘x
–
mbedés_md_c⁄ãxt_t
 *
˘x
, c⁄° 
mbedés_md_öfo_t
 *
md_öfo
 )

221  
	`mbedés_md_£tup
–
˘x
, 
md_öfo
, 1 );

222 
	}
}

225 
	$mbedés_md_£tup
–
mbedés_md_c⁄ãxt_t
 *
˘x
, c⁄° 
mbedés_md_öfo_t
 *
md_öfo
, 
hmac
 )

227 if–
md_öfo
 =
NULL
 || 
˘x
 == NULL )

228 –
MBEDTLS_ERR_MD_BAD_INPUT_DATA
 );

230 if––
˘x
->
md_˘x
 = 
md_öfo
->
	`˘x_Æloc_func
(ËË=
NULL
 )

231 –
MBEDTLS_ERR_MD_ALLOC_FAILED
 );

233 if–
hmac
 != 0 )

235 
˘x
->
hmac_˘x
 = 
	`mbedés_ˇŒoc
–2, 
md_öfo
->
block_size
 );

236 if–
˘x
->
hmac_˘x
 =
NULL
 )

238 
md_öfo
->
	`˘x_‰ì_func
–
˘x
->
md_˘x
 );

239 –
MBEDTLS_ERR_MD_ALLOC_FAILED
 );

243 
˘x
->
md_öfo
 = md_info;

246 
	}
}

248 
	$mbedés_md_°¨ts
–
mbedés_md_c⁄ãxt_t
 *
˘x
 )

250 if–
˘x
 =
NULL
 || ctx->
md_öfo
 == NULL )

251 –
MBEDTLS_ERR_MD_BAD_INPUT_DATA
 );

253 
˘x
->
md_öfo
->
	`°¨ts_func
–˘x->
md_˘x
 );

256 
	}
}

258 
	$mbedés_md_upd©e
–
mbedés_md_c⁄ãxt_t
 *
˘x
, c⁄° *
öput
, 
size_t
 
ûí
 )

260 if–
˘x
 =
NULL
 || ctx->
md_öfo
 == NULL )

261 –
MBEDTLS_ERR_MD_BAD_INPUT_DATA
 );

263 
˘x
->
md_öfo
->
	`upd©e_func
–˘x->
md_˘x
, 
öput
, 
ûí
 );

266 
	}
}

268 
	$mbedés_md_föish
–
mbedés_md_c⁄ãxt_t
 *
˘x
, *
ouçut
 )

270 if–
˘x
 =
NULL
 || ctx->
md_öfo
 == NULL )

271 –
MBEDTLS_ERR_MD_BAD_INPUT_DATA
 );

273 
˘x
->
md_öfo
->
	`föish_func
–˘x->
md_˘x
, 
ouçut
 );

276 
	}
}

278 
	$mbedés_md
–c⁄° 
mbedés_md_öfo_t
 *
md_öfo
, c⁄° *
öput
, 
size_t
 
ûí
,

279 *
ouçut
 )

281 if–
md_öfo
 =
NULL
 )

282 –
MBEDTLS_ERR_MD_BAD_INPUT_DATA
 );

284 
md_öfo
->
	`dige°_func
–
öput
, 
ûí
, 
ouçut
 );

287 
	}
}

289 #i‡
deföed
(
MBEDTLS_FS_IO
)

290 
	$mbedés_md_fûe
–c⁄° 
mbedés_md_öfo_t
 *
md_öfo
, c⁄° *
∑th
, *
ouçut
 )

292 
ªt
;

293 
FILE
 *
f
;

294 
size_t
 
n
;

295 
mbedés_md_c⁄ãxt_t
 
˘x
;

296 
buf
[1024];

298 if–
md_öfo
 =
NULL
 )

299 –
MBEDTLS_ERR_MD_BAD_INPUT_DATA
 );

301 if––
f
 = 
	`f›í
–
∑th
, "rb" ) ) =
NULL
 )

302 –
MBEDTLS_ERR_MD_FILE_IO_ERROR
 );

304 
	`mbedés_md_öô
–&
˘x
 );

306 if––
ªt
 = 
	`mbedés_md_£tup
–&
˘x
, 
md_öfo
, 0 ) ) != 0 )

307 
˛ónup
;

309 
md_öfo
->
	`°¨ts_func
–
˘x
.
md_˘x
 );

311  ( 
n
 = 
	`‰ód
–
buf
, 1, –bu‡), 
f
 ) ) > 0 )

312 
md_öfo
->
	`upd©e_func
–
˘x
.
md_˘x
, 
buf
, 
n
 );

314 if–
	`„º‹
–
f
 ) != 0 )

316 
ªt
 = 
MBEDTLS_ERR_MD_FILE_IO_ERROR
;

317 
˛ónup
;

320 
md_öfo
->
	`föish_func
–
˘x
.
md_˘x
, 
ouçut
 );

322 
˛ónup
:

323 
	`f˛o£
–
f
 );

324 
	`mbedés_md_‰ì
–&
˘x
 );

326 –
ªt
 );

327 
	}
}

330 
	$mbedés_md_hmac_°¨ts
–
mbedés_md_c⁄ãxt_t
 *
˘x
, c⁄° *
key
, 
size_t
 
keyÀn
 )

332 
sum
[
MBEDTLS_MD_MAX_SIZE
];

333 *
ùad
, *
›ad
;

334 
size_t
 
i
;

336 if–
˘x
 =
NULL
 || ctx->
md_öfo
 =NULL || ctx->
hmac_˘x
 == NULL )

337 –
MBEDTLS_ERR_MD_BAD_INPUT_DATA
 );

339 if–
keyÀn
 > (
size_t
Ë
˘x
->
md_öfo
->
block_size
 )

341 
˘x
->
md_öfo
->
	`°¨ts_func
–˘x->
md_˘x
 );

342 
˘x
->
md_öfo
->
	`upd©e_func
–˘x->
md_˘x
, 
key
, 
keyÀn
 );

343 
˘x
->
md_öfo
->
	`föish_func
–˘x->
md_˘x
, 
sum
 );

345 
keyÀn
 = 
˘x
->
md_öfo
->
size
;

346 
key
 = 
sum
;

349 
ùad
 = (*Ë
˘x
->
hmac_˘x
;

350 
›ad
 = (*Ë
˘x
->
hmac_˘x
 + ctx->
md_öfo
->
block_size
;

352 
	`mem£t
–
ùad
, 0x36, 
˘x
->
md_öfo
->
block_size
 );

353 
	`mem£t
–
›ad
, 0x5C, 
˘x
->
md_öfo
->
block_size
 );

355  
i
 = 0; i < 
keyÀn
; i++ )

357 
ùad
[
i
] = ()–ùad[i] ^ 
key
[i] );

358 
›ad
[
i
] = ()–›ad[i] ^ 
key
[i] );

361 
	`mbedés_zîoize
–
sum
, ( sum ) );

363 
˘x
->
md_öfo
->
	`°¨ts_func
–˘x->
md_˘x
 );

364 
˘x
->
md_öfo
->
	`upd©e_func
–˘x->
md_˘x
, 
ùad
, ctx->md_öfo->
block_size
 );

367 
	}
}

369 
	$mbedés_md_hmac_upd©e
–
mbedés_md_c⁄ãxt_t
 *
˘x
, c⁄° *
öput
, 
size_t
 
ûí
 )

371 if–
˘x
 =
NULL
 || ctx->
md_öfo
 =NULL || ctx->
hmac_˘x
 == NULL )

372 –
MBEDTLS_ERR_MD_BAD_INPUT_DATA
 );

374 
˘x
->
md_öfo
->
	`upd©e_func
–˘x->
md_˘x
, 
öput
, 
ûí
 );

377 
	}
}

379 
	$mbedés_md_hmac_föish
–
mbedés_md_c⁄ãxt_t
 *
˘x
, *
ouçut
 )

381 
tmp
[
MBEDTLS_MD_MAX_SIZE
];

382 *
›ad
;

384 if–
˘x
 =
NULL
 || ctx->
md_öfo
 =NULL || ctx->
hmac_˘x
 == NULL )

385 –
MBEDTLS_ERR_MD_BAD_INPUT_DATA
 );

387 
›ad
 = (*Ë
˘x
->
hmac_˘x
 + ctx->
md_öfo
->
block_size
;

389 
˘x
->
md_öfo
->
	`föish_func
–˘x->
md_˘x
, 
tmp
 );

390 
˘x
->
md_öfo
->
	`°¨ts_func
–˘x->
md_˘x
 );

391 
˘x
->
md_öfo
->
	`upd©e_func
–˘x->
md_˘x
, 
›ad
, ctx->md_öfo->
block_size
 );

392 
˘x
->
md_öfo
->
	`upd©e_func
–˘x->
md_˘x
, 
tmp
, ctx->md_öfo->
size
 );

393 
˘x
->
md_öfo
->
	`föish_func
–˘x->
md_˘x
, 
ouçut
 );

396 
	}
}

398 
	$mbedés_md_hmac_ª£t
–
mbedés_md_c⁄ãxt_t
 *
˘x
 )

400 *
ùad
;

402 if–
˘x
 =
NULL
 || ctx->
md_öfo
 =NULL || ctx->
hmac_˘x
 == NULL )

403 –
MBEDTLS_ERR_MD_BAD_INPUT_DATA
 );

405 
ùad
 = (*Ë
˘x
->
hmac_˘x
;

407 
˘x
->
md_öfo
->
	`°¨ts_func
–˘x->
md_˘x
 );

408 
˘x
->
md_öfo
->
	`upd©e_func
–˘x->
md_˘x
, 
ùad
, ctx->md_öfo->
block_size
 );

411 
	}
}

413 
	$mbedés_md_hmac
–c⁄° 
mbedés_md_öfo_t
 *
md_öfo
, c⁄° *
key
, 
size_t
 
keyÀn
,

414 c⁄° *
öput
, 
size_t
 
ûí
,

415 *
ouçut
 )

417 
mbedés_md_c⁄ãxt_t
 
˘x
;

418 
ªt
;

420 if–
md_öfo
 =
NULL
 )

421 –
MBEDTLS_ERR_MD_BAD_INPUT_DATA
 );

423 
	`mbedés_md_öô
–&
˘x
 );

425 if––
ªt
 = 
	`mbedés_md_£tup
–&
˘x
, 
md_öfo
, 1 ) ) != 0 )

426 –
ªt
 );

428 
	`mbedés_md_hmac_°¨ts
–&
˘x
, 
key
, 
keyÀn
 );

429 
	`mbedés_md_hmac_upd©e
–&
˘x
, 
öput
, 
ûí
 );

430 
	`mbedés_md_hmac_föish
–&
˘x
, 
ouçut
 );

432 
	`mbedés_md_‰ì
–&
˘x
 );

435 
	}
}

437 
	$mbedés_md_¥o˚ss
–
mbedés_md_c⁄ãxt_t
 *
˘x
, c⁄° *
d©a
 )

439 if–
˘x
 =
NULL
 || ctx->
md_öfo
 == NULL )

440 –
MBEDTLS_ERR_MD_BAD_INPUT_DATA
 );

442 
˘x
->
md_öfo
->
	`¥o˚ss_func
–˘x->
md_˘x
, 
d©a
 );

445 
	}
}

447 
	$mbedés_md_gë_size
–c⁄° 
mbedés_md_öfo_t
 *
md_öfo
 )

449 if–
md_öfo
 =
NULL
 )

452  
md_öfo
->
size
;

453 
	}
}

455 
mbedés_md_ty≥_t
 
	$mbedés_md_gë_ty≥
–c⁄° 
mbedés_md_öfo_t
 *
md_öfo
 )

457 if–
md_öfo
 =
NULL
 )

458 –
MBEDTLS_MD_NONE
 );

460  
md_öfo
->
ty≥
;

461 
	}
}

463 c⁄° *
	$mbedés_md_gë_«me
–c⁄° 
mbedés_md_öfo_t
 *
md_öfo
 )

465 if–
md_öfo
 =
NULL
 )

466 –
NULL
 );

468  
md_öfo
->
«me
;

469 
	}
}

	@/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/md_wrap.c

26 #i‡!
deföed
(
MBEDTLS_CONFIG_FILE
)

27 
	~"mbedés/c⁄fig.h
"

29 #ö˛udê
MBEDTLS_CONFIG_FILE


32 #i‡
deföed
(
MBEDTLS_MD_C
)

34 
	~"mbedés/md_öã∫Æ.h
"

36 #i‡
deföed
(
MBEDTLS_MD2_C
)

37 
	~"mbedés/md2.h
"

40 #i‡
deföed
(
MBEDTLS_MD4_C
)

41 
	~"mbedés/md4.h
"

44 #i‡
deföed
(
MBEDTLS_MD5_C
)

45 
	~"mbedés/md5.h
"

48 #i‡
deföed
(
MBEDTLS_RIPEMD160_C
)

49 
	~"mbedés/rùemd160.h
"

52 #i‡
deföed
(
MBEDTLS_SHA1_C
)

53 
	~"mbedés/sha1.h
"

56 #i‡
deföed
(
MBEDTLS_SHA256_C
)

57 
	~"mbedés/sha256.h
"

60 #i‡
deföed
(
MBEDTLS_SHA512_C
)

61 
	~"mbedés/sha512.h
"

64 #i‡
deföed
(
MBEDTLS_PLATFORM_C
)

65 
	~"mbedés/∂©f‹m.h
"

67 
	~<°dlib.h
>

68 
	#mbedés_ˇŒoc
 
ˇŒoc


	)

69 
	#mbedés_‰ì
 
‰ì


	)

72 #i‡
deföed
(
MBEDTLS_MD2_C
)

74 
	$md2_°¨ts_wøp
–*
˘x
 )

76 
	`mbedés_md2_°¨ts
–(
mbedés_md2_c⁄ãxt
 *Ë
˘x
 );

77 
	}
}

79 
	$md2_upd©e_wøp
–*
˘x
, c⁄° *
öput
,

80 
size_t
 
ûí
 )

82 
	`mbedés_md2_upd©e
–(
mbedés_md2_c⁄ãxt
 *Ë
˘x
, 
öput
, 
ûí
 );

83 
	}
}

85 
	$md2_föish_wøp
–*
˘x
, *
ouçut
 )

87 
	`mbedés_md2_föish
–(
mbedés_md2_c⁄ãxt
 *Ë
˘x
, 
ouçut
 );

88 
	}
}

90 *
	$md2_˘x_Æloc
( )

92 *
˘x
 = 
	`mbedés_ˇŒoc
–1, –
mbedés_md2_c⁄ãxt
 ) );

94 if–
˘x
 !
NULL
 )

95 
	`mbedés_md2_öô
–(
mbedés_md2_c⁄ãxt
 *Ë
˘x
 );

97 –
˘x
 );

98 
	}
}

100 
	$md2_˘x_‰ì
–*
˘x
 )

102 
	`mbedés_md2_‰ì
–(
mbedés_md2_c⁄ãxt
 *Ë
˘x
 );

103 
	`mbedés_‰ì
–
˘x
 );

104 
	}
}

106 
	$md2_˛⁄e_wøp
–*
d°
, c⁄° *
§c
 )

108 
	`mbedés_md2_˛⁄e
–(
mbedés_md2_c⁄ãxt
 *Ë
d°
,

109 (c⁄° 
mbedés_md2_c⁄ãxt
 *Ë
§c
 );

110 
	}
}

112 
	$md2_¥o˚ss_wøp
–*
˘x
, c⁄° *
d©a
 )

114 ((Ë
d©a
);

116 
	`mbedés_md2_¥o˚ss
–(
mbedés_md2_c⁄ãxt
 *Ë
˘x
 );

117 
	}
}

119 c⁄° 
mbedés_md_öfo_t
 
	gmbedés_md2_öfo
 = {

120 
MBEDTLS_MD_MD2
,

124 
md2_°¨ts_wøp
,

125 
md2_upd©e_wøp
,

126 
md2_föish_wøp
,

127 
mbedés_md2
,

128 
md2_˘x_Æloc
,

129 
md2_˘x_‰ì
,

130 
md2_˛⁄e_wøp
,

131 
md2_¥o˚ss_wøp
,

136 #i‡
deföed
(
MBEDTLS_MD4_C
)

138 
	$md4_°¨ts_wøp
–*
˘x
 )

140 
	`mbedés_md4_°¨ts
–(
mbedés_md4_c⁄ãxt
 *Ë
˘x
 );

141 
	}
}

143 
	$md4_upd©e_wøp
–*
˘x
, c⁄° *
öput
,

144 
size_t
 
ûí
 )

146 
	`mbedés_md4_upd©e
–(
mbedés_md4_c⁄ãxt
 *Ë
˘x
, 
öput
, 
ûí
 );

147 
	}
}

149 
	$md4_föish_wøp
–*
˘x
, *
ouçut
 )

151 
	`mbedés_md4_föish
–(
mbedés_md4_c⁄ãxt
 *Ë
˘x
, 
ouçut
 );

152 
	}
}

154 *
	$md4_˘x_Æloc
( )

156 *
˘x
 = 
	`mbedés_ˇŒoc
–1, –
mbedés_md4_c⁄ãxt
 ) );

158 if–
˘x
 !
NULL
 )

159 
	`mbedés_md4_öô
–(
mbedés_md4_c⁄ãxt
 *Ë
˘x
 );

161 –
˘x
 );

162 
	}
}

164 
	$md4_˘x_‰ì
–*
˘x
 )

166 
	`mbedés_md4_‰ì
–(
mbedés_md4_c⁄ãxt
 *Ë
˘x
 );

167 
	`mbedés_‰ì
–
˘x
 );

168 
	}
}

170 
	$md4_˛⁄e_wøp
–*
d°
, c⁄° *
§c
 )

172 
	`mbedés_md4_˛⁄e
–(
mbedés_md4_c⁄ãxt
 *Ë
d°
,

173 (c⁄° 
mbedés_md4_c⁄ãxt
 *Ë
§c
 );

174 
	}
}

176 
	$md4_¥o˚ss_wøp
–*
˘x
, c⁄° *
d©a
 )

178 
	`mbedés_md4_¥o˚ss
–(
mbedés_md4_c⁄ãxt
 *Ë
˘x
, 
d©a
 );

179 
	}
}

181 c⁄° 
mbedés_md_öfo_t
 
	gmbedés_md4_öfo
 = {

182 
MBEDTLS_MD_MD4
,

186 
md4_°¨ts_wøp
,

187 
md4_upd©e_wøp
,

188 
md4_föish_wøp
,

189 
mbedés_md4
,

190 
md4_˘x_Æloc
,

191 
md4_˘x_‰ì
,

192 
md4_˛⁄e_wøp
,

193 
md4_¥o˚ss_wøp
,

198 #i‡
deföed
(
MBEDTLS_MD5_C
)

200 
	$md5_°¨ts_wøp
–*
˘x
 )

202 
	`mbedés_md5_°¨ts
–(
mbedés_md5_c⁄ãxt
 *Ë
˘x
 );

203 
	}
}

205 
	$md5_upd©e_wøp
–*
˘x
, c⁄° *
öput
,

206 
size_t
 
ûí
 )

208 
	`mbedés_md5_upd©e
–(
mbedés_md5_c⁄ãxt
 *Ë
˘x
, 
öput
, 
ûí
 );

209 
	}
}

211 
	$md5_föish_wøp
–*
˘x
, *
ouçut
 )

213 
	`mbedés_md5_föish
–(
mbedés_md5_c⁄ãxt
 *Ë
˘x
, 
ouçut
 );

214 
	}
}

216 *
	$md5_˘x_Æloc
( )

218 *
˘x
 = 
	`mbedés_ˇŒoc
–1, –
mbedés_md5_c⁄ãxt
 ) );

220 if–
˘x
 !
NULL
 )

221 
	`mbedés_md5_öô
–(
mbedés_md5_c⁄ãxt
 *Ë
˘x
 );

223 –
˘x
 );

224 
	}
}

226 
	$md5_˘x_‰ì
–*
˘x
 )

228 
	`mbedés_md5_‰ì
–(
mbedés_md5_c⁄ãxt
 *Ë
˘x
 );

229 
	`mbedés_‰ì
–
˘x
 );

230 
	}
}

232 
	$md5_˛⁄e_wøp
–*
d°
, c⁄° *
§c
 )

234 
	`mbedés_md5_˛⁄e
–(
mbedés_md5_c⁄ãxt
 *Ë
d°
,

235 (c⁄° 
mbedés_md5_c⁄ãxt
 *Ë
§c
 );

236 
	}
}

238 
	$md5_¥o˚ss_wøp
–*
˘x
, c⁄° *
d©a
 )

240 
	`mbedés_md5_¥o˚ss
–(
mbedés_md5_c⁄ãxt
 *Ë
˘x
, 
d©a
 );

241 
	}
}

243 c⁄° 
mbedés_md_öfo_t
 
	gmbedés_md5_öfo
 = {

244 
MBEDTLS_MD_MD5
,

248 
md5_°¨ts_wøp
,

249 
md5_upd©e_wøp
,

250 
md5_föish_wøp
,

251 
mbedés_md5
,

252 
md5_˘x_Æloc
,

253 
md5_˘x_‰ì
,

254 
md5_˛⁄e_wøp
,

255 
md5_¥o˚ss_wøp
,

260 #i‡
deföed
(
MBEDTLS_RIPEMD160_C
)

262 
	$rùemd160_°¨ts_wøp
–*
˘x
 )

264 
	`mbedés_rùemd160_°¨ts
–(
mbedés_rùemd160_c⁄ãxt
 *Ë
˘x
 );

265 
	}
}

267 
	$rùemd160_upd©e_wøp
–*
˘x
, c⁄° *
öput
,

268 
size_t
 
ûí
 )

270 
	`mbedés_rùemd160_upd©e
–(
mbedés_rùemd160_c⁄ãxt
 *Ë
˘x
, 
öput
, 
ûí
 );

271 
	}
}

273 
	$rùemd160_föish_wøp
–*
˘x
, *
ouçut
 )

275 
	`mbedés_rùemd160_föish
–(
mbedés_rùemd160_c⁄ãxt
 *Ë
˘x
, 
ouçut
 );

276 
	}
}

278 *
	$rùemd160_˘x_Æloc
( )

280 *
˘x
 = 
	`mbedés_ˇŒoc
–1, –
mbedés_rùemd160_c⁄ãxt
 ) );

282 if–
˘x
 !
NULL
 )

283 
	`mbedés_rùemd160_öô
–(
mbedés_rùemd160_c⁄ãxt
 *Ë
˘x
 );

285 –
˘x
 );

286 
	}
}

288 
	$rùemd160_˘x_‰ì
–*
˘x
 )

290 
	`mbedés_rùemd160_‰ì
–(
mbedés_rùemd160_c⁄ãxt
 *Ë
˘x
 );

291 
	`mbedés_‰ì
–
˘x
 );

292 
	}
}

294 
	$rùemd160_˛⁄e_wøp
–*
d°
, c⁄° *
§c
 )

296 
	`mbedés_rùemd160_˛⁄e
–(
mbedés_rùemd160_c⁄ãxt
 *Ë
d°
,

297 (c⁄° 
mbedés_rùemd160_c⁄ãxt
 *Ë
§c
 );

298 
	}
}

300 
	$rùemd160_¥o˚ss_wøp
–*
˘x
, c⁄° *
d©a
 )

302 
	`mbedés_rùemd160_¥o˚ss
–(
mbedés_rùemd160_c⁄ãxt
 *Ë
˘x
, 
d©a
 );

303 
	}
}

305 c⁄° 
mbedés_md_öfo_t
 
	gmbedés_rùemd160_öfo
 = {

306 
MBEDTLS_MD_RIPEMD160
,

310 
rùemd160_°¨ts_wøp
,

311 
rùemd160_upd©e_wøp
,

312 
rùemd160_föish_wøp
,

313 
mbedés_rùemd160
,

314 
rùemd160_˘x_Æloc
,

315 
rùemd160_˘x_‰ì
,

316 
rùemd160_˛⁄e_wøp
,

317 
rùemd160_¥o˚ss_wøp
,

322 #i‡
deföed
(
MBEDTLS_SHA1_C
)

324 
	$sha1_°¨ts_wøp
–*
˘x
 )

326 
	`mbedés_sha1_°¨ts
–(
mbedés_sha1_c⁄ãxt
 *Ë
˘x
 );

327 
	}
}

329 
	$sha1_upd©e_wøp
–*
˘x
, c⁄° *
öput
,

330 
size_t
 
ûí
 )

332 
	`mbedés_sha1_upd©e
–(
mbedés_sha1_c⁄ãxt
 *Ë
˘x
, 
öput
, 
ûí
 );

333 
	}
}

335 
	$sha1_föish_wøp
–*
˘x
, *
ouçut
 )

337 
	`mbedés_sha1_föish
–(
mbedés_sha1_c⁄ãxt
 *Ë
˘x
, 
ouçut
 );

338 
	}
}

340 *
	$sha1_˘x_Æloc
( )

342 *
˘x
 = 
	`mbedés_ˇŒoc
–1, –
mbedés_sha1_c⁄ãxt
 ) );

344 if–
˘x
 !
NULL
 )

345 
	`mbedés_sha1_öô
–(
mbedés_sha1_c⁄ãxt
 *Ë
˘x
 );

347 –
˘x
 );

348 
	}
}

350 
	$sha1_˛⁄e_wøp
–*
d°
, c⁄° *
§c
 )

352 
	`mbedés_sha1_˛⁄e
–(
mbedés_sha1_c⁄ãxt
 *Ë
d°
,

353 (c⁄° 
mbedés_sha1_c⁄ãxt
 *Ë
§c
 );

354 
	}
}

356 
	$sha1_˘x_‰ì
–*
˘x
 )

358 
	`mbedés_sha1_‰ì
–(
mbedés_sha1_c⁄ãxt
 *Ë
˘x
 );

359 
	`mbedés_‰ì
–
˘x
 );

360 
	}
}

362 
	$sha1_¥o˚ss_wøp
–*
˘x
, c⁄° *
d©a
 )

364 
	`mbedés_sha1_¥o˚ss
–(
mbedés_sha1_c⁄ãxt
 *Ë
˘x
, 
d©a
 );

365 
	}
}

367 c⁄° 
mbedés_md_öfo_t
 
	gmbedés_sha1_öfo
 = {

368 
MBEDTLS_MD_SHA1
,

372 
sha1_°¨ts_wøp
,

373 
sha1_upd©e_wøp
,

374 
sha1_föish_wøp
,

375 
mbedés_sha1
,

376 
sha1_˘x_Æloc
,

377 
sha1_˘x_‰ì
,

378 
sha1_˛⁄e_wøp
,

379 
sha1_¥o˚ss_wøp
,

387 #i‡
deföed
(
MBEDTLS_SHA256_C
)

389 
	$sha224_°¨ts_wøp
–*
˘x
 )

391 
	`mbedés_sha256_°¨ts
–(
mbedés_sha256_c⁄ãxt
 *Ë
˘x
, 1 );

392 
	}
}

394 
	$sha224_upd©e_wøp
–*
˘x
, c⁄° *
öput
,

395 
size_t
 
ûí
 )

397 
	`mbedés_sha256_upd©e
–(
mbedés_sha256_c⁄ãxt
 *Ë
˘x
, 
öput
, 
ûí
 );

398 
	}
}

400 
	$sha224_föish_wøp
–*
˘x
, *
ouçut
 )

402 
	`mbedés_sha256_föish
–(
mbedés_sha256_c⁄ãxt
 *Ë
˘x
, 
ouçut
 );

403 
	}
}

405 
	$sha224_wøp
–c⁄° *
öput
, 
size_t
 
ûí
,

406 *
ouçut
 )

408 
	`mbedés_sha256
–
öput
, 
ûí
, 
ouçut
, 1 );

409 
	}
}

411 *
	$sha224_˘x_Æloc
( )

413 *
˘x
 = 
	`mbedés_ˇŒoc
–1, –
mbedés_sha256_c⁄ãxt
 ) );

415 if–
˘x
 !
NULL
 )

416 
	`mbedés_sha256_öô
–(
mbedés_sha256_c⁄ãxt
 *Ë
˘x
 );

418 –
˘x
 );

419 
	}
}

421 
	$sha224_˘x_‰ì
–*
˘x
 )

423 
	`mbedés_sha256_‰ì
–(
mbedés_sha256_c⁄ãxt
 *Ë
˘x
 );

424 
	`mbedés_‰ì
–
˘x
 );

425 
	}
}

427 
	$sha224_˛⁄e_wøp
–*
d°
, c⁄° *
§c
 )

429 
	`mbedés_sha256_˛⁄e
–(
mbedés_sha256_c⁄ãxt
 *Ë
d°
,

430 (c⁄° 
mbedés_sha256_c⁄ãxt
 *Ë
§c
 );

431 
	}
}

433 
	$sha224_¥o˚ss_wøp
–*
˘x
, c⁄° *
d©a
 )

435 
	`mbedés_sha256_¥o˚ss
–(
mbedés_sha256_c⁄ãxt
 *Ë
˘x
, 
d©a
 );

436 
	}
}

438 c⁄° 
mbedés_md_öfo_t
 
	gmbedés_sha224_öfo
 = {

439 
MBEDTLS_MD_SHA224
,

443 
sha224_°¨ts_wøp
,

444 
sha224_upd©e_wøp
,

445 
sha224_föish_wøp
,

446 
sha224_wøp
,

447 
sha224_˘x_Æloc
,

448 
sha224_˘x_‰ì
,

449 
sha224_˛⁄e_wøp
,

450 
sha224_¥o˚ss_wøp
,

453 
	$sha256_°¨ts_wøp
–*
˘x
 )

455 
	`mbedés_sha256_°¨ts
–(
mbedés_sha256_c⁄ãxt
 *Ë
˘x
, 0 );

456 
	}
}

458 
	$sha256_wøp
–c⁄° *
öput
, 
size_t
 
ûí
,

459 *
ouçut
 )

461 
	`mbedés_sha256
–
öput
, 
ûí
, 
ouçut
, 0 );

462 
	}
}

464 c⁄° 
mbedés_md_öfo_t
 
	gmbedés_sha256_öfo
 = {

465 
MBEDTLS_MD_SHA256
,

469 
sha256_°¨ts_wøp
,

470 
sha224_upd©e_wøp
,

471 
sha224_föish_wøp
,

472 
sha256_wøp
,

473 
sha224_˘x_Æloc
,

474 
sha224_˘x_‰ì
,

475 
sha224_˛⁄e_wøp
,

476 
sha224_¥o˚ss_wøp
,

481 #i‡
deföed
(
MBEDTLS_SHA512_C
)

483 
	$sha384_°¨ts_wøp
–*
˘x
 )

485 
	`mbedés_sha512_°¨ts
–(
mbedés_sha512_c⁄ãxt
 *Ë
˘x
, 1 );

486 
	}
}

488 
	$sha384_upd©e_wøp
–*
˘x
, c⁄° *
öput
,

489 
size_t
 
ûí
 )

491 
	`mbedés_sha512_upd©e
–(
mbedés_sha512_c⁄ãxt
 *Ë
˘x
, 
öput
, 
ûí
 );

492 
	}
}

494 
	$sha384_föish_wøp
–*
˘x
, *
ouçut
 )

496 
	`mbedés_sha512_föish
–(
mbedés_sha512_c⁄ãxt
 *Ë
˘x
, 
ouçut
 );

497 
	}
}

499 
	$sha384_wøp
–c⁄° *
öput
, 
size_t
 
ûí
,

500 *
ouçut
 )

502 
	`mbedés_sha512
–
öput
, 
ûí
, 
ouçut
, 1 );

503 
	}
}

505 *
	$sha384_˘x_Æloc
( )

507 *
˘x
 = 
	`mbedés_ˇŒoc
–1, –
mbedés_sha512_c⁄ãxt
 ) );

509 if–
˘x
 !
NULL
 )

510 
	`mbedés_sha512_öô
–(
mbedés_sha512_c⁄ãxt
 *Ë
˘x
 );

512 –
˘x
 );

513 
	}
}

515 
	$sha384_˘x_‰ì
–*
˘x
 )

517 
	`mbedés_sha512_‰ì
–(
mbedés_sha512_c⁄ãxt
 *Ë
˘x
 );

518 
	`mbedés_‰ì
–
˘x
 );

519 
	}
}

521 
	$sha384_˛⁄e_wøp
–*
d°
, c⁄° *
§c
 )

523 
	`mbedés_sha512_˛⁄e
–(
mbedés_sha512_c⁄ãxt
 *Ë
d°
,

524 (c⁄° 
mbedés_sha512_c⁄ãxt
 *Ë
§c
 );

525 
	}
}

527 
	$sha384_¥o˚ss_wøp
–*
˘x
, c⁄° *
d©a
 )

529 
	`mbedés_sha512_¥o˚ss
–(
mbedés_sha512_c⁄ãxt
 *Ë
˘x
, 
d©a
 );

530 
	}
}

532 c⁄° 
mbedés_md_öfo_t
 
	gmbedés_sha384_öfo
 = {

533 
MBEDTLS_MD_SHA384
,

537 
sha384_°¨ts_wøp
,

538 
sha384_upd©e_wøp
,

539 
sha384_föish_wøp
,

540 
sha384_wøp
,

541 
sha384_˘x_Æloc
,

542 
sha384_˘x_‰ì
,

543 
sha384_˛⁄e_wøp
,

544 
sha384_¥o˚ss_wøp
,

547 
	$sha512_°¨ts_wøp
–*
˘x
 )

549 
	`mbedés_sha512_°¨ts
–(
mbedés_sha512_c⁄ãxt
 *Ë
˘x
, 0 );

550 
	}
}

552 
	$sha512_wøp
–c⁄° *
öput
, 
size_t
 
ûí
,

553 *
ouçut
 )

555 
	`mbedés_sha512
–
öput
, 
ûí
, 
ouçut
, 0 );

556 
	}
}

558 c⁄° 
mbedés_md_öfo_t
 
	gmbedés_sha512_öfo
 = {

559 
MBEDTLS_MD_SHA512
,

563 
sha512_°¨ts_wøp
,

564 
sha384_upd©e_wøp
,

565 
sha384_föish_wøp
,

566 
sha512_wøp
,

567 
sha384_˘x_Æloc
,

568 
sha384_˘x_‰ì
,

569 
sha384_˛⁄e_wøp
,

570 
sha384_¥o˚ss_wøp
,

	@/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/oid.c

24 #i‡!
deföed
(
MBEDTLS_CONFIG_FILE
)

25 
	~"mbedés/c⁄fig.h
"

27 #ö˛udê
MBEDTLS_CONFIG_FILE


30 #i‡
deföed
(
MBEDTLS_OID_C
)

32 
	~"mbedés/oid.h
"

33 
	~"mbedés/rß.h
"

35 
	~<°dio.h
>

36 
	~<°rög.h
>

38 #i‡
deföed
(
MBEDTLS_PLATFORM_C
)

39 
	~"mbedés/∂©f‹m.h
"

41 
	#mbedés_¢¥ötf
 
¢¥ötf


	)

44 #i‡
deföed
(
MBEDTLS_X509_USE_C
Ë|| deföed(
MBEDTLS_X509_CREATE_C
)

45 
	~"mbedés/x509.h
"

51 
	#ADD_LEN
(
s
Ës, 
	`MBEDTLS_OID_SIZE
(s)

	)

57 
	#FN_OID_TYPED_FROM_ASN1
–
TYPE_T
, 
NAME
, 
LIST
 ) \

58 c⁄° 
TYPE_T
 * 
oid_
 ## 
NAME
 ## 
	`_‰om_a¢1
–c⁄° 
mbedés_a¢1_buf
 *
oid
 ) \

60 c⁄° 
TYPE_T
 *
p
 = 
LIST
; \

61 c⁄° 
mbedés_oid_des¸ùt‹_t
 *
cur
 = (c⁄° mbedés_oid_des¸ùt‹_à*Ë
p
; \

62 if–
p
 =
NULL
 || 
oid
 == NULL ) ( NULL ); \

63  
cur
->
a¢1
 !
NULL
 ) { \

64 if–
cur
->
a¢1_Àn
 =
oid
->
Àn
 && \

65 
	`memcmp
–
cur
->
a¢1
, 
oid
->
p
, oid->
Àn
 ) == 0 ) { \

66 –
p
 ); \

68 
p
++; \

69 
cur
 = (c⁄° 
mbedés_oid_des¸ùt‹_t
 *Ë
p
; \

71 –
NULL
 ); \

72 }

	)

78 
	#FN_OID_GET_DESCRIPTOR_ATTR1
(
FN_NAME
, 
TYPE_T
, 
TYPE_NAME
, 
ATTR1_TYPE
, 
ATTR1
) \

79 
	`FN_NAME
–c⁄° 
mbedés_a¢1_buf
 *
oid
, 
ATTR1_TYPE
 * 
ATTR1
 ) \

81 c⁄° 
TYPE_T
 *
d©a
 = 
oid_
 ## 
TYPE_NAME
 ## 
	`_‰om_a¢1
–
oid
 ); \

82 if–
d©a
 =
NULL
 ) –
MBEDTLS_ERR_OID_NOT_FOUND
 ); \

83 *
ATTR1
 = 
d©a
->
des¸ùt‹
.ATTR1; \

85 }

	)

91 
	#FN_OID_GET_ATTR1
(
FN_NAME
, 
TYPE_T
, 
TYPE_NAME
, 
ATTR1_TYPE
, 
ATTR1
) \

92 
	`FN_NAME
–c⁄° 
mbedés_a¢1_buf
 *
oid
, 
ATTR1_TYPE
 * 
ATTR1
 ) \

94 c⁄° 
TYPE_T
 *
d©a
 = 
oid_
 ## 
TYPE_NAME
 ## 
	`_‰om_a¢1
–
oid
 ); \

95 if–
d©a
 =
NULL
 ) –
MBEDTLS_ERR_OID_NOT_FOUND
 ); \

96 *
ATTR1
 = 
d©a
->ATTR1; \

98 }

	)

104 
	#FN_OID_GET_ATTR2
(
FN_NAME
, 
TYPE_T
, 
TYPE_NAME
, 
ATTR1_TYPE
, 
ATTR1
, \

105 
ATTR2_TYPE
, 
ATTR2
) \

106 
	`FN_NAME
–c⁄° 
mbedés_a¢1_buf
 *
oid
, 
ATTR1_TYPE
 * 
ATTR1
, 
ATTR2_TYPE
 * 
ATTR2
 ) \

108 c⁄° 
TYPE_T
 *
d©a
 = 
oid_
 ## 
TYPE_NAME
 ## 
	`_‰om_a¢1
–
oid
 ); \

109 if–
d©a
 =
NULL
 ) –
MBEDTLS_ERR_OID_NOT_FOUND
 ); \

110 *
ATTR1
 = 
d©a
->ATTR1; \

111 *
ATTR2
 = 
d©a
->ATTR2; \

113 }

	)

119 
	#FN_OID_GET_OID_BY_ATTR1
(
FN_NAME
, 
TYPE_T
, 
LIST
, 
ATTR1_TYPE
, 
ATTR1
) \

120 
	`FN_NAME
–
ATTR1_TYPE
 
ATTR1
, c⁄° **
oid
, 
size_t
 *
ﬁí
 ) \

122 c⁄° 
TYPE_T
 *
cur
 = 
LIST
; \

123  
cur
->
des¸ùt‹
.
a¢1
 !
NULL
 ) { \

124 if–
cur
->
ATTR1
 == ATTR1 ) { \

125 *
oid
 = 
cur
->
des¸ùt‹
.
a¢1
; \

126 *
ﬁí
 = 
cur
->
des¸ùt‹
.
a¢1_Àn
; \

129 
cur
++; \

131 –
MBEDTLS_ERR_OID_NOT_FOUND
 ); \

132 }

	)

138 
	#FN_OID_GET_OID_BY_ATTR2
(
FN_NAME
, 
TYPE_T
, 
LIST
, 
ATTR1_TYPE
, 
ATTR1
, \

139 
ATTR2_TYPE
, 
ATTR2
) \

140 
	`FN_NAME
–
ATTR1_TYPE
 
ATTR1
, 
ATTR2_TYPE
 
ATTR2
, c⁄° **
oid
 , \

141 
size_t
 *
ﬁí
 ) \

143 c⁄° 
TYPE_T
 *
cur
 = 
LIST
; \

144  
cur
->
des¸ùt‹
.
a¢1
 !
NULL
 ) { \

145 if–
cur
->
ATTR1
 =ATTR1 && cur->
ATTR2
 == ATTR2 ) { \

146 *
oid
 = 
cur
->
des¸ùt‹
.
a¢1
; \

147 *
ﬁí
 = 
cur
->
des¸ùt‹
.
a¢1_Àn
; \

150 
cur
++; \

152 –
MBEDTLS_ERR_OID_NOT_FOUND
 ); \

153 }

	)

159 
mbedés_oid_des¸ùt‹_t
 
	mdes¸ùt‹
;

160 c⁄° *
	msh‹t_«me
;

161 } 
	toid_x520_©å_t
;

163 c⁄° 
oid_x520_©å_t
 
	goid_x520_©å_ty≥
[] =

166 { 
ADD_LEN
–
MBEDTLS_OID_AT_CN
 ), "id-at-commonName", "Common Name" },

170 { 
ADD_LEN
–
MBEDTLS_OID_AT_COUNTRY
 ), "id-at-countryName", "Country" },

174 { 
ADD_LEN
–
MBEDTLS_OID_AT_LOCALITY
 ), "id-at-locality", "Locality" },

178 { 
ADD_LEN
–
MBEDTLS_OID_AT_STATE
 ), "id-at-state", "State" },

182 { 
ADD_LEN
–
MBEDTLS_OID_AT_ORGANIZATION
 ),"id-at-organizationName", "Organization" },

186 { 
ADD_LEN
–
MBEDTLS_OID_AT_ORG_UNIT
 ), "id-at-organizationalUnitName", "Org Unit" },

190 { 
ADD_LEN
–
MBEDTLS_OID_PKCS9_EMAIL
 ), "emailAddress", "E-mailáddress" },

194 { 
ADD_LEN
–
MBEDTLS_OID_AT_SERIAL_NUMBER
 ),"id-at-serialNumber", "SerialÇumber" },

198 { 
ADD_LEN
–
MBEDTLS_OID_AT_POSTAL_ADDRESS
 ),"id-at-postalAddress", "Postaláddress" },

202 { 
ADD_LEN
–
MBEDTLS_OID_AT_POSTAL_CODE
 ), "id-at-postalCode", "Postal code" },

206 { 
ADD_LEN
–
MBEDTLS_OID_AT_SUR_NAME
 ), "id-at-surName", "Surname" },

210 { 
ADD_LEN
–
MBEDTLS_OID_AT_GIVEN_NAME
 ), "id-at-givenName", "GivenÇame" },

214 { 
ADD_LEN
–
MBEDTLS_OID_AT_INITIALS
 ), "id-at-initials", "Initials" },

218 { 
ADD_LEN
–
MBEDTLS_OID_AT_GENERATION_QUALIFIER
 ), "id-at-generationQualifier", "Generation qualifier" },

222 { 
ADD_LEN
–
MBEDTLS_OID_AT_TITLE
 ), "id-at-title", "Title" },

226 { 
ADD_LEN
–
MBEDTLS_OID_AT_DN_QUALIFIER
 ),"id-at-dnQualifier", "Distinguished Name qualifier" },

230 { 
ADD_LEN
–
MBEDTLS_OID_AT_PSEUDONYM
 ), "id-at-pseudonym", "Pseudonym" },

234 { 
ADD_LEN
–
MBEDTLS_OID_DOMAIN_COMPONENT
 ), "id-domainComponent", "Domain component" },

238 { 
ADD_LEN
–
MBEDTLS_OID_AT_UNIQUE_IDENTIFIER
 ), "id-at-uniqueIdentifier", "Unique Identifier" },

242 { 
NULL
, 0, NULL, NULL },

243 
NULL
,

247 
	$FN_OID_TYPED_FROM_ASN1
(
oid_x520_©å_t
, 
x520_©å
, 
oid_x520_©å_ty≥
)

248 
	$FN_OID_GET_ATTR1
(
mbedés_oid_gë_©å_sh‹t_«me
, 
oid_x520_©å_t
, 
x520_©å
, c⁄° *, 
sh‹t_«me
)

250 #i‡
	`deföed
(
MBEDTLS_X509_USE_C
Ë|| deföed(
MBEDTLS_X509_CREATE_C
)

255 
mbedés_oid_des¸ùt‹_t
 
des¸ùt‹
;

256 
ext_ty≥
;

257 } 
	toid_x509_ext_t
;

259 c⁄° 
oid_x509_ext_t
 
oid_x509_ext
[] =

262 { 
	`ADD_LEN
–
MBEDTLS_OID_BASIC_CONSTRAINTS
 ), "id-ce-basicConstraints", "Basic Constraints" },

263 
MBEDTLS_X509_EXT_BASIC_CONSTRAINTS
,

266 { 
	`ADD_LEN
–
MBEDTLS_OID_KEY_USAGE
 ), "id-ce-keyUsage", "Key Usage" },

267 
MBEDTLS_X509_EXT_KEY_USAGE
,

270 { 
	`ADD_LEN
–
MBEDTLS_OID_EXTENDED_KEY_USAGE
 ), "id-ce-extKeyUsage", "Extended Key Usage" },

271 
MBEDTLS_X509_EXT_EXTENDED_KEY_USAGE
,

274 { 
	`ADD_LEN
–
MBEDTLS_OID_SUBJECT_ALT_NAME
 ), "id-ce-subjectAltName", "Subject Alt Name" },

275 
MBEDTLS_X509_EXT_SUBJECT_ALT_NAME
,

278 { 
	`ADD_LEN
–
MBEDTLS_OID_NS_CERT_TYPE
 ), "id-netscape-certtype", "Netscape Certificate Type" },

279 
MBEDTLS_X509_EXT_NS_CERT_TYPE
,

282 { 
NULL
, 0, NULL, NULL },

285 
	}
};

287 
	$FN_OID_TYPED_FROM_ASN1
(
oid_x509_ext_t
, 
x509_ext
, 
oid_x509_ext
)

288 
	$FN_OID_GET_ATTR1
(
mbedés_oid_gë_x509_ext_ty≥
, 
oid_x509_ext_t
, 
x509_ext
, , 
ext_ty≥
)

290 c⁄° 
mbedés_oid_des¸ùt‹_t
 
oid_ext_key_ußge
[] =

292 { 
	`ADD_LEN
–
MBEDTLS_OID_SERVER_AUTH
 ), "id-kp-serverAuth", "TLS Web Server Authentication" },

293 { 
	`ADD_LEN
–
MBEDTLS_OID_CLIENT_AUTH
 ), "id-kp-clientAuth", "TLS Web Client Authentication" },

294 { 
	`ADD_LEN
–
MBEDTLS_OID_CODE_SIGNING
 ), "id-kp-codeSigning", "Code Signing" },

295 { 
	`ADD_LEN
–
MBEDTLS_OID_EMAIL_PROTECTION
 ), "id-kp-emailProtection", "E-mail Protection" },

296 { 
	`ADD_LEN
–
MBEDTLS_OID_TIME_STAMPING
 ), "id-kp-timeStamping", "Time Stamping" },

297 { 
	`ADD_LEN
–
MBEDTLS_OID_OCSP_SIGNING
 ), "id-kp-OCSPSigning", "OCSP Signing" },

298 { 
NULL
, 0, NULL, NULL },

299 
	}
};

301 
	$FN_OID_TYPED_FROM_ASN1
(
mbedés_oid_des¸ùt‹_t
, 
ext_key_ußge
, 
oid_ext_key_ußge
)

302 
	$FN_OID_GET_ATTR1
(
mbedés_oid_gë_exãnded_key_ußge
, 
mbedés_oid_des¸ùt‹_t
, 
ext_key_ußge
, c⁄° *, 
des¸ùti⁄
)

305 #i‡
	`deföed
(
MBEDTLS_MD_C
)

310 
mbedés_oid_des¸ùt‹_t
 
des¸ùt‹
;

311 
mbedés_md_ty≥_t
 
md_Æg
;

312 
mbedés_pk_ty≥_t
 
pk_Æg
;

313 } 
	toid_sig_Æg_t
;

315 c⁄° 
oid_sig_Æg_t
 
oid_sig_Æg
[] =

318 { 
	`ADD_LEN
–
MBEDTLS_OID_PKCS1_MD2
 ), "md2WithRSAEncryption", "RSA with MD2" },

319 
MBEDTLS_MD_MD2
, 
MBEDTLS_PK_RSA
,

322 { 
	`ADD_LEN
–
MBEDTLS_OID_PKCS1_MD4
 ), "md4WithRSAEncryption", "RSA with MD4" },

323 
MBEDTLS_MD_MD4
, 
MBEDTLS_PK_RSA
,

326 { 
	`ADD_LEN
–
MBEDTLS_OID_PKCS1_MD5
 ), "md5WithRSAEncryption", "RSA with MD5" },

327 
MBEDTLS_MD_MD5
, 
MBEDTLS_PK_RSA
,

330 { 
	`ADD_LEN
–
MBEDTLS_OID_PKCS1_SHA1
 ), "sha-1WithRSAEncryption", "RSA with SHA1" },

331 
MBEDTLS_MD_SHA1
, 
MBEDTLS_PK_RSA
,

334 { 
	`ADD_LEN
–
MBEDTLS_OID_PKCS1_SHA224
 ), "sha224WithRSAEncryption", "RSA with SHA-224" },

335 
MBEDTLS_MD_SHA224
, 
MBEDTLS_PK_RSA
,

338 { 
	`ADD_LEN
–
MBEDTLS_OID_PKCS1_SHA256
 ), "sha256WithRSAEncryption", "RSA with SHA-256" },

339 
MBEDTLS_MD_SHA256
, 
MBEDTLS_PK_RSA
,

342 { 
	`ADD_LEN
–
MBEDTLS_OID_PKCS1_SHA384
 ), "sha384WithRSAEncryption", "RSA with SHA-384" },

343 
MBEDTLS_MD_SHA384
, 
MBEDTLS_PK_RSA
,

346 { 
	`ADD_LEN
–
MBEDTLS_OID_PKCS1_SHA512
 ), "sha512WithRSAEncryption", "RSA with SHA-512" },

347 
MBEDTLS_MD_SHA512
, 
MBEDTLS_PK_RSA
,

350 { 
	`ADD_LEN
–
MBEDTLS_OID_RSA_SHA_OBS
 ), "sha-1WithRSAEncryption", "RSA with SHA1" },

351 
MBEDTLS_MD_SHA1
, 
MBEDTLS_PK_RSA
,

354 { 
	`ADD_LEN
–
MBEDTLS_OID_ECDSA_SHA1
 ), "ecdsa-with-SHA1", "ECDSA with SHA1" },

355 
MBEDTLS_MD_SHA1
, 
MBEDTLS_PK_ECDSA
,

358 { 
	`ADD_LEN
–
MBEDTLS_OID_ECDSA_SHA224
 ), "ecdsa-with-SHA224", "ECDSA with SHA224" },

359 
MBEDTLS_MD_SHA224
, 
MBEDTLS_PK_ECDSA
,

362 { 
	`ADD_LEN
–
MBEDTLS_OID_ECDSA_SHA256
 ), "ecdsa-with-SHA256", "ECDSA with SHA256" },

363 
MBEDTLS_MD_SHA256
, 
MBEDTLS_PK_ECDSA
,

366 { 
	`ADD_LEN
–
MBEDTLS_OID_ECDSA_SHA384
 ), "ecdsa-with-SHA384", "ECDSA with SHA384" },

367 
MBEDTLS_MD_SHA384
, 
MBEDTLS_PK_ECDSA
,

370 { 
	`ADD_LEN
–
MBEDTLS_OID_ECDSA_SHA512
 ), "ecdsa-with-SHA512", "ECDSA with SHA512" },

371 
MBEDTLS_MD_SHA512
, 
MBEDTLS_PK_ECDSA
,

374 { 
	`ADD_LEN
–
MBEDTLS_OID_RSASSA_PSS
 ), "RSASSA-PSS", "RSASSA-PSS" },

375 
MBEDTLS_MD_NONE
, 
MBEDTLS_PK_RSASSA_PSS
,

378 { 
NULL
, 0, NULL, NULL },

379 
MBEDTLS_MD_NONE
, 
MBEDTLS_PK_NONE
,

381 
	}
};

383 
	$FN_OID_TYPED_FROM_ASN1
(
oid_sig_Æg_t
, 
sig_Æg
, 
oid_sig_Æg
)

384 
	$FN_OID_GET_DESCRIPTOR_ATTR1
(
mbedés_oid_gë_sig_Æg_desc
, 
oid_sig_Æg_t
, 
sig_Æg
, c⁄° *, 
des¸ùti⁄
)

385 
	$FN_OID_GET_ATTR2
(
mbedés_oid_gë_sig_Æg
, 
oid_sig_Æg_t
, 
sig_Æg
, 
mbedés_md_ty≥_t
, 
md_Æg
, 
mbedés_pk_ty≥_t
, 
pk_Æg
)

386 
	$FN_OID_GET_OID_BY_ATTR2
(
mbedés_oid_gë_oid_by_sig_Æg
, 
oid_sig_Æg_t
, 
oid_sig_Æg
, 
mbedés_pk_ty≥_t
, 
pk_Æg
, 
mbedés_md_ty≥_t
, 
md_Æg
)

393 
mbedés_oid_des¸ùt‹_t
 
des¸ùt‹
;

394 
mbedés_pk_ty≥_t
 
pk_Æg
;

395 } 
	toid_pk_Æg_t
;

397 c⁄° 
oid_pk_Æg_t
 
oid_pk_Æg
[] =

400 { 
	`ADD_LEN
–
MBEDTLS_OID_PKCS1_RSA
 ), "rsaEncryption", "RSA" },

401 
MBEDTLS_PK_RSA
,

404 { 
	`ADD_LEN
–
MBEDTLS_OID_EC_ALG_UNRESTRICTED
 ), "id-ecPublicKey", "Generic EC key" },

405 
MBEDTLS_PK_ECKEY
,

408 { 
	`ADD_LEN
–
MBEDTLS_OID_EC_ALG_ECDH
 ), "id-ecDH", "EC key for ECDH" },

409 
MBEDTLS_PK_ECKEY_DH
,

412 { 
NULL
, 0, NULL, NULL },

413 
MBEDTLS_PK_NONE
,

415 
	}
};

417 
	$FN_OID_TYPED_FROM_ASN1
(
oid_pk_Æg_t
, 
pk_Æg
, 
oid_pk_Æg
)

418 
	$FN_OID_GET_ATTR1
(
mbedés_oid_gë_pk_Æg
, 
oid_pk_Æg_t
, 
pk_Æg
, 
mbedés_pk_ty≥_t
,Ök_alg)

419 
	$FN_OID_GET_OID_BY_ATTR1
(
mbedés_oid_gë_oid_by_pk_Æg
, 
oid_pk_Æg_t
, 
oid_pk_Æg
, 
mbedés_pk_ty≥_t
, 
pk_Æg
)

421 #i‡
	`deföed
(
MBEDTLS_ECP_C
)

426 
mbedés_oid_des¸ùt‹_t
 
des¸ùt‹
;

427 
mbedés_e˝_group_id
 
gΩ_id
;

428 } 
	toid_e˝_gΩ_t
;

430 c⁄° 
oid_e˝_gΩ_t
 
oid_e˝_gΩ
[] =

433 { 
	`ADD_LEN
–
MBEDTLS_OID_EC_GRP_SECP192R1
 ), "secp192r1", "secp192r1" },

434 
MBEDTLS_ECP_DP_SECP192R1
,

437 { 
	`ADD_LEN
–
MBEDTLS_OID_EC_GRP_SECP224R1
 ), "secp224r1", "secp224r1" },

438 
MBEDTLS_ECP_DP_SECP224R1
,

441 { 
	`ADD_LEN
–
MBEDTLS_OID_EC_GRP_SECP256R1
 ), "secp256r1", "secp256r1" },

442 
MBEDTLS_ECP_DP_SECP256R1
,

445 { 
	`ADD_LEN
–
MBEDTLS_OID_EC_GRP_SECP384R1
 ), "secp384r1", "secp384r1" },

446 
MBEDTLS_ECP_DP_SECP384R1
,

449 { 
	`ADD_LEN
–
MBEDTLS_OID_EC_GRP_SECP521R1
 ), "secp521r1", "secp521r1" },

450 
MBEDTLS_ECP_DP_SECP521R1
,

453 { 
	`ADD_LEN
–
MBEDTLS_OID_EC_GRP_SECP192K1
 ), "secp192k1", "secp192k1" },

454 
MBEDTLS_ECP_DP_SECP192K1
,

457 { 
	`ADD_LEN
–
MBEDTLS_OID_EC_GRP_SECP224K1
 ), "secp224k1", "secp224k1" },

458 
MBEDTLS_ECP_DP_SECP224K1
,

461 { 
	`ADD_LEN
–
MBEDTLS_OID_EC_GRP_SECP256K1
 ), "secp256k1", "secp256k1" },

462 
MBEDTLS_ECP_DP_SECP256K1
,

465 { 
	`ADD_LEN
–
MBEDTLS_OID_EC_GRP_BP256R1
 ), "brainpoolP256r1","brainpool256r1" },

466 
MBEDTLS_ECP_DP_BP256R1
,

469 { 
	`ADD_LEN
–
MBEDTLS_OID_EC_GRP_BP384R1
 ), "brainpoolP384r1","brainpool384r1" },

470 
MBEDTLS_ECP_DP_BP384R1
,

473 { 
	`ADD_LEN
–
MBEDTLS_OID_EC_GRP_BP512R1
 ), "brainpoolP512r1","brainpool512r1" },

474 
MBEDTLS_ECP_DP_BP512R1
,

477 { 
NULL
, 0, NULL, NULL },

478 
MBEDTLS_ECP_DP_NONE
,

480 
	}
};

482 
	$FN_OID_TYPED_FROM_ASN1
(
oid_e˝_gΩ_t
, 
gΩ_id
, 
oid_e˝_gΩ
)

483 
	$FN_OID_GET_ATTR1
(
mbedés_oid_gë_ec_gΩ
, 
oid_e˝_gΩ_t
, 
gΩ_id
, 
mbedés_e˝_group_id
, grp_id)

484 
	$FN_OID_GET_OID_BY_ATTR1
(
mbedés_oid_gë_oid_by_ec_gΩ
, 
oid_e˝_gΩ_t
, 
oid_e˝_gΩ
, 
mbedés_e˝_group_id
, 
gΩ_id
)

487 #i‡
	`deföed
(
MBEDTLS_CIPHER_C
)

492 
mbedés_oid_des¸ùt‹_t
 
des¸ùt‹
;

493 
mbedés_cùhî_ty≥_t
 
cùhî_Æg
;

494 } 
	toid_cùhî_Æg_t
;

496 c⁄° 
oid_cùhî_Æg_t
 
oid_cùhî_Æg
[] =

499 { 
	`ADD_LEN
–
MBEDTLS_OID_DES_CBC
 ), "desCBC", "DES-CBC" },

500 
MBEDTLS_CIPHER_DES_CBC
,

503 { 
	`ADD_LEN
–
MBEDTLS_OID_DES_EDE3_CBC
 ), "des-ede3-cbc", "DES-EDE3-CBC" },

504 
MBEDTLS_CIPHER_DES_EDE3_CBC
,

507 { 
NULL
, 0, NULL, NULL },

508 
MBEDTLS_CIPHER_NONE
,

510 
	}
};

512 
	$FN_OID_TYPED_FROM_ASN1
(
oid_cùhî_Æg_t
, 
cùhî_Æg
, 
oid_cùhî_Æg
)

513 
	$FN_OID_GET_ATTR1
(
mbedés_oid_gë_cùhî_Æg
, 
oid_cùhî_Æg_t
, 
cùhî_Æg
, 
mbedés_cùhî_ty≥_t
, cipher_alg)

516 #i‡
	`deföed
(
MBEDTLS_MD_C
)

521 
mbedés_oid_des¸ùt‹_t
 
des¸ùt‹
;

522 
mbedés_md_ty≥_t
 
md_Æg
;

523 } 
	toid_md_Æg_t
;

525 c⁄° 
oid_md_Æg_t
 
oid_md_Æg
[] =

528 { 
	`ADD_LEN
–
MBEDTLS_OID_DIGEST_ALG_MD2
 ), "id-md2", "MD2" },

529 
MBEDTLS_MD_MD2
,

532 { 
	`ADD_LEN
–
MBEDTLS_OID_DIGEST_ALG_MD4
 ), "id-md4", "MD4" },

533 
MBEDTLS_MD_MD4
,

536 { 
	`ADD_LEN
–
MBEDTLS_OID_DIGEST_ALG_MD5
 ), "id-md5", "MD5" },

537 
MBEDTLS_MD_MD5
,

540 { 
	`ADD_LEN
–
MBEDTLS_OID_DIGEST_ALG_SHA1
 ), "id-sha1", "SHA-1" },

541 
MBEDTLS_MD_SHA1
,

544 { 
	`ADD_LEN
–
MBEDTLS_OID_DIGEST_ALG_SHA224
 ), "id-sha224", "SHA-224" },

545 
MBEDTLS_MD_SHA224
,

548 { 
	`ADD_LEN
–
MBEDTLS_OID_DIGEST_ALG_SHA256
 ), "id-sha256", "SHA-256" },

549 
MBEDTLS_MD_SHA256
,

552 { 
	`ADD_LEN
–
MBEDTLS_OID_DIGEST_ALG_SHA384
 ), "id-sha384", "SHA-384" },

553 
MBEDTLS_MD_SHA384
,

556 { 
	`ADD_LEN
–
MBEDTLS_OID_DIGEST_ALG_SHA512
 ), "id-sha512", "SHA-512" },

557 
MBEDTLS_MD_SHA512
,

560 { 
NULL
, 0, NULL, NULL },

561 
MBEDTLS_MD_NONE
,

563 
	}
};

565 
	$FN_OID_TYPED_FROM_ASN1
(
oid_md_Æg_t
, 
md_Æg
, 
oid_md_Æg
)

566 
	$FN_OID_GET_ATTR1
(
mbedés_oid_gë_md_Æg
, 
oid_md_Æg_t
, 
md_Æg
, 
mbedés_md_ty≥_t
, md_alg)

567 
	$FN_OID_GET_OID_BY_ATTR1
(
mbedés_oid_gë_oid_by_md
, 
oid_md_Æg_t
, 
oid_md_Æg
, 
mbedés_md_ty≥_t
, 
md_Æg
)

570 #i‡
	`deföed
(
MBEDTLS_PKCS12_C
)

575 
mbedés_oid_des¸ùt‹_t
 
des¸ùt‹
;

576 
mbedés_md_ty≥_t
 
md_Æg
;

577 
mbedés_cùhî_ty≥_t
 
cùhî_Æg
;

578 } 
	toid_pkcs12_pbe_Æg_t
;

580 c⁄° 
oid_pkcs12_pbe_Æg_t
 
oid_pkcs12_pbe_Æg
[] =

583 { 
	`ADD_LEN
–
MBEDTLS_OID_PKCS12_PBE_SHA1_DES3_EDE_CBC
 ), "pbeWithSHAAnd3-KeyTripleDES-CBC", "PBE with SHA1ánd 3-Key 3DES" },

584 
MBEDTLS_MD_SHA1
, 
MBEDTLS_CIPHER_DES_EDE3_CBC
,

587 { 
	`ADD_LEN
–
MBEDTLS_OID_PKCS12_PBE_SHA1_DES2_EDE_CBC
 ), "pbeWithSHAAnd2-KeyTripleDES-CBC", "PBE with SHA1ánd 2-Key 3DES" },

588 
MBEDTLS_MD_SHA1
, 
MBEDTLS_CIPHER_DES_EDE_CBC
,

591 { 
NULL
, 0, NULL, NULL },

592 
MBEDTLS_MD_NONE
, 
MBEDTLS_CIPHER_NONE
,

594 
	}
};

596 
	$FN_OID_TYPED_FROM_ASN1
(
oid_pkcs12_pbe_Æg_t
, 
pkcs12_pbe_Æg
, 
oid_pkcs12_pbe_Æg
)

597 
	$FN_OID_GET_ATTR2
(
mbedés_oid_gë_pkcs12_pbe_Æg
, 
oid_pkcs12_pbe_Æg_t
, 
pkcs12_pbe_Æg
, 
mbedés_md_ty≥_t
, 
md_Æg
, 
mbedés_cùhî_ty≥_t
, 
cùhî_Æg
)

600 
	#OID_SAFE_SNPRINTF
 \

602 if–
ªt
 < 0 || (
size_t
Ëªà>
n
 ) \

603 –
MBEDTLS_ERR_OID_BUF_TOO_SMALL
 ); \

605 
n
 -(
size_t
Ë
ªt
; \

606 
p
 +(
size_t
Ë
ªt
; \

607 
	}
}  0 )

	)

610 
	$mbedés_oid_gë_numîic_°rög
–*
buf
, 
size_t
 
size
,

611 c⁄° 
mbedés_a¢1_buf
 *
oid
 )

613 
ªt
;

614 
size_t
 
i
, 
n
;

615 
vÆue
;

616 *
p
;

618 
p
 = 
buf
;

619 
n
 = 
size
;

622 if–
oid
->
Àn
 > 0 )

624 
ªt
 = 
	`mbedés_¢¥ötf
–
p
, 
n
, "%d.%d", 
oid
->p[0] / 40, oid->p[0] % 40 );

625 
OID_SAFE_SNPRINTF
;

628 
vÆue
 = 0;

629  
i
 = 1; i < 
oid
->
Àn
; i++ )

632 if–––
vÆue
 << 7 ) >> 7 ) != value )

633 –
MBEDTLS_ERR_OID_BUF_TOO_SMALL
 );

635 
vÆue
 <<= 7;

636 
vÆue
 +
oid
->
p
[
i
] & 0x7F;

638 if–!–
oid
->
p
[
i
] & 0x80 ) )

641 
ªt
 = 
	`mbedés_¢¥ötf
–
p
, 
n
, ".%d", 
vÆue
 );

642 
OID_SAFE_SNPRINTF
;

643 
vÆue
 = 0;

647 –(Ë–
size
 - 
n
 ) );

648 
	}
}

	@/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/pem.c

22 #i‡!
deföed
(
MBEDTLS_CONFIG_FILE
)

23 
	~"mbedés/c⁄fig.h
"

25 #ö˛udê
MBEDTLS_CONFIG_FILE


28 #i‡
deföed
(
MBEDTLS_PEM_PARSE_C
Ë|| deföed(
MBEDTLS_PEM_WRITE_C
)

30 
	~"mbedés/≥m.h
"

31 
	~"mbedés/ba£64.h
"

32 
	~"mbedés/des.h
"

33 
	~"mbedés/´s.h
"

34 
	~"mbedés/md5.h
"

35 
	~"mbedés/cùhî.h
"

37 
	~<°rög.h
>

39 #i‡
deföed
(
MBEDTLS_PLATFORM_C
)

40 
	~"mbedés/∂©f‹m.h
"

42 
	~<°dlib.h
>

43 
	#mbedés_ˇŒoc
 
ˇŒoc


	)

44 
	#mbedés_‰ì
 
‰ì


	)

48 
	$mbedés_zîoize
–*
v
, 
size_t
 
n
 ) {

49 vﬁ©ûê*
p
 = 
v
;  
n
-- ) *p++ = 0;

50 
	}
}

52 #i‡
deföed
(
MBEDTLS_PEM_PARSE_C
)

53 
	$mbedés_≥m_öô
–
mbedés_≥m_c⁄ãxt
 *
˘x
 )

55 
	`mem£t
–
˘x
, 0, –
mbedés_≥m_c⁄ãxt
 ) );

56 
	}
}

58 #i‡
deföed
(
MBEDTLS_MD5_C
Ë&& deföed(
MBEDTLS_CIPHER_MODE_CBC
) && \

59 –
deföed
(
MBEDTLS_DES_C
Ë|| 
	$deföed
(
MBEDTLS_AES_C
) )

63 
	$≥m_gë_iv
–c⁄° *
s
, *
iv
,

64 
size_t
 
iv_Àn
 )

66 
size_t
 
i
, 
j
, 
k
;

68 
	`mem£t
–
iv
, 0, 
iv_Àn
 );

70  
i
 = 0; i < 
iv_Àn
 * 2; i++, 
s
++ )

72 if–*
s
 >'0' && *†<'9' ) 
j
 = *s - '0'; 

73 if–*
s
 >'A' && *†<'F' ) 
j
 = *s - '7'; 

74 if–*
s
 >'a' && *†<'f' ) 
j
 = *s - 'W'; 

75 –
MBEDTLS_ERR_PEM_INVALID_ENC_IV
 );

77 
k
 = ( ( 
i
 & 1 ) !0 ) ? 
j
 : j << 4;

79 
iv
[
i
 >> 1] = ()–iv[ò>> 1] | 
k
 );

83 
	}
}

85 
	$≥m_pbkdf1
–*
key
, 
size_t
 
keyÀn
,

86 *
iv
,

87 c⁄° *
pwd
, 
size_t
 
pwdÀn
 )

89 
mbedés_md5_c⁄ãxt
 
md5_˘x
;

90 
md5sum
[16];

91 
size_t
 
u£_Àn
;

93 
	`mbedés_md5_öô
–&
md5_˘x
 );

98 
	`mbedés_md5_°¨ts
–&
md5_˘x
 );

99 
	`mbedés_md5_upd©e
–&
md5_˘x
, 
pwd
, 
pwdÀn
 );

100 
	`mbedés_md5_upd©e
–&
md5_˘x
, 
iv
, 8 );

101 
	`mbedés_md5_föish
–&
md5_˘x
, 
md5sum
 );

103 if–
keyÀn
 <= 16 )

105 
	`mem˝y
–
key
, 
md5sum
, 
keyÀn
 );

107 
	`mbedés_md5_‰ì
–&
md5_˘x
 );

108 
	`mbedés_zîoize
–
md5sum
, 16 );

112 
	`mem˝y
–
key
, 
md5sum
, 16 );

117 
	`mbedés_md5_°¨ts
–&
md5_˘x
 );

118 
	`mbedés_md5_upd©e
–&
md5_˘x
, 
md5sum
, 16 );

119 
	`mbedés_md5_upd©e
–&
md5_˘x
, 
pwd
, 
pwdÀn
 );

120 
	`mbedés_md5_upd©e
–&
md5_˘x
, 
iv
, 8 );

121 
	`mbedés_md5_föish
–&
md5_˘x
, 
md5sum
 );

123 
u£_Àn
 = 16;

124 if–
keyÀn
 < 32 )

125 
u£_Àn
 = 
keyÀn
 - 16;

127 
	`mem˝y
–
key
 + 16, 
md5sum
, 
u£_Àn
 );

129 
	`mbedés_md5_‰ì
–&
md5_˘x
 );

130 
	`mbedés_zîoize
–
md5sum
, 16 );

131 
	}
}

133 #i‡
deföed
(
MBEDTLS_DES_C
)

137 
	$≥m_des_de¸y±
–
des_iv
[8],

138 *
buf
, 
size_t
 
buÊí
,

139 c⁄° *
pwd
, 
size_t
 
pwdÀn
 )

141 
mbedés_des_c⁄ãxt
 
des_˘x
;

142 
des_key
[8];

144 
	`mbedés_des_öô
–&
des_˘x
 );

146 
	`≥m_pbkdf1
–
des_key
, 8, 
des_iv
, 
pwd
, 
pwdÀn
 );

148 
	`mbedés_des_£tkey_dec
–&
des_˘x
, 
des_key
 );

149 
	`mbedés_des_¸y±_cbc
–&
des_˘x
, 
MBEDTLS_DES_DECRYPT
, 
buÊí
,

150 
des_iv
, 
buf
, buf );

152 
	`mbedés_des_‰ì
–&
des_˘x
 );

153 
	`mbedés_zîoize
–
des_key
, 8 );

154 
	}
}

159 
	$≥m_des3_de¸y±
–
des3_iv
[8],

160 *
buf
, 
size_t
 
buÊí
,

161 c⁄° *
pwd
, 
size_t
 
pwdÀn
 )

163 
mbedés_des3_c⁄ãxt
 
des3_˘x
;

164 
des3_key
[24];

166 
	`mbedés_des3_öô
–&
des3_˘x
 );

168 
	`≥m_pbkdf1
–
des3_key
, 24, 
des3_iv
, 
pwd
, 
pwdÀn
 );

170 
	`mbedés_des3_£t3key_dec
–&
des3_˘x
, 
des3_key
 );

171 
	`mbedés_des3_¸y±_cbc
–&
des3_˘x
, 
MBEDTLS_DES_DECRYPT
, 
buÊí
,

172 
des3_iv
, 
buf
, buf );

174 
	`mbedés_des3_‰ì
–&
des3_˘x
 );

175 
	`mbedés_zîoize
–
des3_key
, 24 );

176 
	}
}

179 #i‡
deföed
(
MBEDTLS_AES_C
)

183 
	$≥m_´s_de¸y±
–
´s_iv
[16], 
keyÀn
,

184 *
buf
, 
size_t
 
buÊí
,

185 c⁄° *
pwd
, 
size_t
 
pwdÀn
 )

187 
mbedés_´s_c⁄ãxt
 
´s_˘x
;

188 
´s_key
[32];

190 
	`mbedés_´s_öô
–&
´s_˘x
 );

192 
	`≥m_pbkdf1
–
´s_key
, 
keyÀn
, 
´s_iv
, 
pwd
, 
pwdÀn
 );

194 
	`mbedés_´s_£tkey_dec
–&
´s_˘x
, 
´s_key
, 
keyÀn
 * 8 );

195 
	`mbedés_´s_¸y±_cbc
–&
´s_˘x
, 
MBEDTLS_AES_DECRYPT
, 
buÊí
,

196 
´s_iv
, 
buf
, buf );

198 
	`mbedés_´s_‰ì
–&
´s_˘x
 );

199 
	`mbedés_zîoize
–
´s_key
, 
keyÀn
 );

200 
	}
}

204 –
	gMBEDTLS_AES_C
 || 
	gMBEDTLS_DES_C
 ) */

206 
	$mbedés_≥m_ªad_buf„r
–
mbedés_≥m_c⁄ãxt
 *
˘x
, c⁄° *
hódî
, c⁄° *
foŸî
,

207 c⁄° *
d©a
, c⁄° *
pwd
,

208 
size_t
 
pwdÀn
, size_à*
u£_Àn
 )

210 
ªt
, 
íc
;

211 
size_t
 
Àn
;

212 *
buf
;

213 c⁄° *
s1
, *
s2
, *
íd
;

214 #i‡
	`deföed
(
MBEDTLS_MD5_C
Ë&& deföed(
MBEDTLS_CIPHER_MODE_CBC
) && \

215 –
	`deföed
(
MBEDTLS_DES_C
Ë|| deföed(
MBEDTLS_AES_C
) )

216 
≥m_iv
[16];

217 
mbedés_cùhî_ty≥_t
 
íc_Æg
 = 
MBEDTLS_CIPHER_NONE
;

219 ((Ë
pwd
);

220 ((Ë
pwdÀn
);

222 –
MBEDTLS_AES_C
 || 
MBEDTLS_DES_C
 ) */

224 if–
˘x
 =
NULL
 )

225 –
MBEDTLS_ERR_PEM_BAD_INPUT_DATA
 );

227 
s1
 = (*Ë
	`°r°r
–(c⁄° *Ë
d©a
, 
hódî
 );

229 if–
s1
 =
NULL
 )

230 –
MBEDTLS_ERR_PEM_NO_HEADER_FOOTER_PRESENT
 );

232 
s2
 = (*Ë
	`°r°r
–(c⁄° *Ë
d©a
, 
foŸî
 );

234 if–
s2
 =
NULL
 || s2 <
s1
 )

235 –
MBEDTLS_ERR_PEM_NO_HEADER_FOOTER_PRESENT
 );

237 
s1
 +
	`°æí
–
hódî
 );

238 if–*
s1
 == ' ' ) s1++;

239 if–*
s1
 == '\r' ) s1++;

240 if–*
s1
 == '\n' ) s1++;

241 –
MBEDTLS_ERR_PEM_NO_HEADER_FOOTER_PRESENT
 );

243 
íd
 = 
s2
;

244 
íd
 +
	`°æí
–
foŸî
 );

245 if–*
íd
 == ' ' )Énd++;

246 if–*
íd
 == '\r' )Énd++;

247 if–*
íd
 == '\n' )Énd++;

248 *
u£_Àn
 = 
íd
 - 
d©a
;

250 
íc
 = 0;

252 if–
	`memcmp
–
s1
, "Proc-Type: 4,ENCRYPTED", 22 ) == 0 )

254 #i‡
	`deföed
(
MBEDTLS_MD5_C
Ë&& deföed(
MBEDTLS_CIPHER_MODE_CBC
) && \

255 –
	`deföed
(
MBEDTLS_DES_C
Ë|| deföed(
MBEDTLS_AES_C
) )

256 
íc
++;

258 
s1
 += 22;

259 if–*
s1
 == '\r' ) s1++;

260 if–*
s1
 == '\n' ) s1++;

261 –
MBEDTLS_ERR_PEM_INVALID_DATA
 );

264 #i‡
	`deföed
(
MBEDTLS_DES_C
)

265 if–
	`memcmp
–
s1
, "DEK-Info: DES-EDE3-CBC,", 23 ) == 0 )

267 
íc_Æg
 = 
MBEDTLS_CIPHER_DES_EDE3_CBC
;

269 
s1
 += 23;

270 if–
	`≥m_gë_iv
–
s1
, 
≥m_iv
, 8 ) != 0 )

271 –
MBEDTLS_ERR_PEM_INVALID_ENC_IV
 );

273 
s1
 += 16;

275 if–
	`memcmp
–
s1
, "DEK-Info: DES-CBC,", 18 ) == 0 )

277 
íc_Æg
 = 
MBEDTLS_CIPHER_DES_CBC
;

279 
s1
 += 18;

280 if–
	`≥m_gë_iv
–
s1
, 
≥m_iv
, 8) != 0 )

281 –
MBEDTLS_ERR_PEM_INVALID_ENC_IV
 );

283 
s1
 += 16;

287 #i‡
	`deföed
(
MBEDTLS_AES_C
)

288 if–
	`memcmp
–
s1
, "DEK-Info: AES-", 14 ) == 0 )

290 if–
	`memcmp
–
s1
, "DEK-Info: AES-128-CBC,", 22 ) == 0 )

291 
íc_Æg
 = 
MBEDTLS_CIPHER_AES_128_CBC
;

292 if–
	`memcmp
–
s1
, "DEK-Info: AES-192-CBC,", 22 ) == 0 )

293 
íc_Æg
 = 
MBEDTLS_CIPHER_AES_192_CBC
;

294 if–
	`memcmp
–
s1
, "DEK-Info: AES-256-CBC,", 22 ) == 0 )

295 
íc_Æg
 = 
MBEDTLS_CIPHER_AES_256_CBC
;

297 –
MBEDTLS_ERR_PEM_UNKNOWN_ENC_ALG
 );

299 
s1
 += 22;

300 if–
	`≥m_gë_iv
–
s1
, 
≥m_iv
, 16 ) != 0 )

301 –
MBEDTLS_ERR_PEM_INVALID_ENC_IV
 );

303 
s1
 += 32;

307 if–
íc_Æg
 =
MBEDTLS_CIPHER_NONE
 )

308 –
MBEDTLS_ERR_PEM_UNKNOWN_ENC_ALG
 );

310 if–*
s1
 == '\r' ) s1++;

311 if–*
s1
 == '\n' ) s1++;

312 –
MBEDTLS_ERR_PEM_INVALID_DATA
 );

314 –
MBEDTLS_ERR_PEM_FEATURE_UNAVAILABLE
 );

316 –
MBEDTLS_AES_C
 || 
MBEDTLS_DES_C
 ) */

319 if–
s1
 =
s2
 )

320 –
MBEDTLS_ERR_PEM_INVALID_DATA
 );

322 
ªt
 = 
	`mbedés_ba£64_decode
–
NULL
, 0, &
Àn
, 
s1
, 
s2
 - s1 );

324 if–
ªt
 =
MBEDTLS_ERR_BASE64_INVALID_CHARACTER
 )

325 –
MBEDTLS_ERR_PEM_INVALID_DATA
 + 
ªt
 );

327 if––
buf
 = 
	`mbedés_ˇŒoc
–1, 
Àn
 ) ) =
NULL
 )

328 –
MBEDTLS_ERR_PEM_ALLOC_FAILED
 );

330 if––
ªt
 = 
	`mbedés_ba£64_decode
–
buf
, 
Àn
, &Àn, 
s1
, 
s2
 - s1 ) ) != 0 )

332 
	`mbedés_‰ì
–
buf
 );

333 –
MBEDTLS_ERR_PEM_INVALID_DATA
 + 
ªt
 );

336 if–
íc
 != 0 )

338 #i‡
	`deföed
(
MBEDTLS_MD5_C
Ë&& deföed(
MBEDTLS_CIPHER_MODE_CBC
) && \

339 –
	`deföed
(
MBEDTLS_DES_C
Ë|| deföed(
MBEDTLS_AES_C
) )

340 if–
pwd
 =
NULL
 )

342 
	`mbedés_‰ì
–
buf
 );

343 –
MBEDTLS_ERR_PEM_PASSWORD_REQUIRED
 );

346 #i‡
	`deföed
(
MBEDTLS_DES_C
)

347 if–
íc_Æg
 =
MBEDTLS_CIPHER_DES_EDE3_CBC
 )

348 
	`≥m_des3_de¸y±
–
≥m_iv
, 
buf
, 
Àn
, 
pwd
, 
pwdÀn
 );

349 if–
íc_Æg
 =
MBEDTLS_CIPHER_DES_CBC
 )

350 
	`≥m_des_de¸y±
–
≥m_iv
, 
buf
, 
Àn
, 
pwd
, 
pwdÀn
 );

353 #i‡
	`deföed
(
MBEDTLS_AES_C
)

354 if–
íc_Æg
 =
MBEDTLS_CIPHER_AES_128_CBC
 )

355 
	`≥m_´s_de¸y±
–
≥m_iv
, 16, 
buf
, 
Àn
, 
pwd
, 
pwdÀn
 );

356 if–
íc_Æg
 =
MBEDTLS_CIPHER_AES_192_CBC
 )

357 
	`≥m_´s_de¸y±
–
≥m_iv
, 24, 
buf
, 
Àn
, 
pwd
, 
pwdÀn
 );

358 if–
íc_Æg
 =
MBEDTLS_CIPHER_AES_256_CBC
 )

359 
	`≥m_´s_de¸y±
–
≥m_iv
, 32, 
buf
, 
Àn
, 
pwd
, 
pwdÀn
 );

368 if–
Àn
 <2 || 
buf
[0] != 0x30 || buf[1] > 0x83 )

370 
	`mbedés_‰ì
–
buf
 );

371 –
MBEDTLS_ERR_PEM_PASSWORD_MISMATCH
 );

374 
	`mbedés_‰ì
–
buf
 );

375 –
MBEDTLS_ERR_PEM_FEATURE_UNAVAILABLE
 );

377 –
MBEDTLS_AES_C
 || 
MBEDTLS_DES_C
 ) */

380 
˘x
->
buf
 = buf;

381 
˘x
->
buÊí
 = 
Àn
;

384 
	}
}

386 
	$mbedés_≥m_‰ì
–
mbedés_≥m_c⁄ãxt
 *
˘x
 )

388 
	`mbedés_‰ì
–
˘x
->
buf
 );

389 
	`mbedés_‰ì
–
˘x
->
öfo
 );

391 
	`mbedés_zîoize
–
˘x
, –
mbedés_≥m_c⁄ãxt
 ) );

392 
	}
}

395 #i‡
deföed
(
MBEDTLS_PEM_WRITE_C
)

396 
	$mbedés_≥m_wrôe_buf„r
–c⁄° *
hódî
, c⁄° *
foŸî
,

397 c⁄° *
dî_d©a
, 
size_t
 
dî_Àn
,

398 *
buf
, 
size_t
 
buf_Àn
, size_à*
ﬁí
 )

400 
ªt
;

401 *
ícode_buf
, *
c
, *
p
 = 
buf
;

402 
size_t
 
Àn
 = 0, 
u£_Àn
, 
add_Àn
 = 0;

404 
	`mbedés_ba£64_ícode
–
NULL
, 0, &
u£_Àn
, 
dî_d©a
, 
dî_Àn
 );

405 
add_Àn
 = 
	`°æí
–
hódî
 ) + såÀn–
foŸî
 ) + ( 
u£_Àn
 / 64 ) + 1;

407 if–
u£_Àn
 + 
add_Àn
 > 
buf_Àn
 )

409 *
ﬁí
 = 
u£_Àn
 + 
add_Àn
;

410 –
MBEDTLS_ERR_BASE64_BUFFER_TOO_SMALL
 );

413 if––
ícode_buf
 = 
	`mbedés_ˇŒoc
–1, 
u£_Àn
 ) ) =
NULL
 )

414 –
MBEDTLS_ERR_PEM_ALLOC_FAILED
 );

416 if––
ªt
 = 
	`mbedés_ba£64_ícode
–
ícode_buf
, 
u£_Àn
, &u£_Àn, 
dî_d©a
,

417 
dî_Àn
 ) ) != 0 )

419 
	`mbedés_‰ì
–
ícode_buf
 );

420 –
ªt
 );

423 
	`mem˝y
–
p
, 
hódî
, 
	`°æí
( header ) );

424 
p
 +
	`°æí
–
hódî
 );

425 
c
 = 
ícode_buf
;

427  
u£_Àn
 )

429 
Àn
 = ( 
u£_Àn
 > 64 ) ? 64 : use_len;

430 
	`mem˝y
–
p
, 
c
, 
Àn
 );

431 
u£_Àn
 -
Àn
;

432 
p
 +
Àn
;

433 
c
 +
Àn
;

434 *
p
++ = '\n';

437 
	`mem˝y
–
p
, 
foŸî
, 
	`°æí
( footer ) );

438 
p
 +
	`°æí
–
foŸî
 );

440 *
p
++ = '\0';

441 *
ﬁí
 = 
p
 - 
buf
;

443 
	`mbedés_‰ì
–
ícode_buf
 );

445 
	}
}

	@/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/pk.c

22 #i‡!
deföed
(
MBEDTLS_CONFIG_FILE
)

23 
	~"mbedés/c⁄fig.h
"

25 #ö˛udê
MBEDTLS_CONFIG_FILE


28 #i‡
deföed
(
MBEDTLS_PK_C
)

29 
	~"mbedés/pk.h
"

30 
	~"mbedés/pk_öã∫Æ.h
"

32 #i‡
deföed
(
MBEDTLS_RSA_C
)

33 
	~"mbedés/rß.h
"

35 #i‡
deföed
(
MBEDTLS_ECP_C
)

36 
	~"mbedés/e˝.h
"

38 #i‡
deföed
(
MBEDTLS_ECDSA_C
)

39 
	~"mbedés/ecdß.h
"

43 
	$mbedés_zîoize
–*
v
, 
size_t
 
n
 ) {

44 vﬁ©ûê*
p
 = 
v
;  
n
-- ) *p++ = 0;

45 
	}
}

50 
	$mbedés_pk_öô
–
mbedés_pk_c⁄ãxt
 *
˘x
 )

52 if–
˘x
 =
NULL
 )

55 
˘x
->
pk_öfo
 = 
NULL
;

56 
˘x
->
pk_˘x
 = 
NULL
;

57 
	}
}

62 
	$mbedés_pk_‰ì
–
mbedés_pk_c⁄ãxt
 *
˘x
 )

64 if–
˘x
 =
NULL
 || ctx->
pk_öfo
 == NULL )

67 
˘x
->
pk_öfo
->
	`˘x_‰ì_func
–˘x->
pk_˘x
 );

69 
	`mbedés_zîoize
–
˘x
, –
mbedés_pk_c⁄ãxt
 ) );

70 
	}
}

75 c⁄° 
mbedés_pk_öfo_t
 * 
	$mbedés_pk_öfo_‰om_ty≥
–
mbedés_pk_ty≥_t
 
pk_ty≥
 )

77  
pk_ty≥
 ) {

78 #i‡
	`deföed
(
MBEDTLS_RSA_C
)

79 
MBEDTLS_PK_RSA
:

80 –&
mbedés_rß_öfo
 );

82 #i‡
	`deföed
(
MBEDTLS_ECP_C
)

83 
MBEDTLS_PK_ECKEY
:

84 –&
mbedés_eckey_öfo
 );

85 
MBEDTLS_PK_ECKEY_DH
:

86 –&
mbedés_eckeydh_öfo
 );

88 #i‡
	`deföed
(
MBEDTLS_ECDSA_C
)

89 
MBEDTLS_PK_ECDSA
:

90 –&
mbedés_ecdß_öfo
 );

94 –
NULL
 );

96 
	}
}

101 
	$mbedés_pk_£tup
–
mbedés_pk_c⁄ãxt
 *
˘x
, c⁄° 
mbedés_pk_öfo_t
 *
öfo
 )

103 if–
˘x
 =
NULL
 || 
öfo
 =NULL || ctx->
pk_öfo
 != NULL )

104 –
MBEDTLS_ERR_PK_BAD_INPUT_DATA
 );

106 if––
˘x
->
pk_˘x
 = 
öfo
->
	`˘x_Æloc_func
(ËË=
NULL
 )

107 –
MBEDTLS_ERR_PK_ALLOC_FAILED
 );

109 
˘x
->
pk_öfo
 = 
öfo
;

112 
	}
}

114 #i‡
deföed
(
MBEDTLS_PK_RSA_ALT_SUPPORT
)

118 
	$mbedés_pk_£tup_rß_Æt
–
mbedés_pk_c⁄ãxt
 *
˘x
, * 
key
,

119 
mbedés_pk_rß_Æt_de¸y±_func
 
de¸y±_func
,

120 
mbedés_pk_rß_Æt_sign_func
 
sign_func
,

121 
mbedés_pk_rß_Æt_key_Àn_func
 
key_Àn_func
 )

123 
mbedés_rß_Æt_c⁄ãxt
 *
rß_Æt
;

124 c⁄° 
mbedés_pk_öfo_t
 *
öfo
 = &
mbedés_rß_Æt_öfo
;

126 if–
˘x
 =
NULL
 || ctx->
pk_öfo
 != NULL )

127 –
MBEDTLS_ERR_PK_BAD_INPUT_DATA
 );

129 if––
˘x
->
pk_˘x
 = 
öfo
->
	`˘x_Æloc_func
(ËË=
NULL
 )

130 –
MBEDTLS_ERR_PK_ALLOC_FAILED
 );

132 
˘x
->
pk_öfo
 = 
öfo
;

134 
rß_Æt
 = (
mbedés_rß_Æt_c⁄ãxt
 *Ë
˘x
->
pk_˘x
;

136 
rß_Æt
->
key
 = key;

137 
rß_Æt
->
de¸y±_func
 = decrypt_func;

138 
rß_Æt
->
sign_func
 = sign_func;

139 
rß_Æt
->
key_Àn_func
 = key_len_func;

142 
	}
}

148 
	$mbedés_pk_ˇn_do
–c⁄° 
mbedés_pk_c⁄ãxt
 *
˘x
, 
mbedés_pk_ty≥_t
 
ty≥
 )

151 if–
˘x
 =
NULL
 || ctx->
pk_öfo
 == NULL )

154 –
˘x
->
pk_öfo
->
	`ˇn_do
–
ty≥
 ) );

155 
	}
}

160 
ölöe
 
	$pk_hashÀn_hñ≥r
–
mbedés_md_ty≥_t
 
md_Æg
, 
size_t
 *
hash_Àn
 )

162 c⁄° 
mbedés_md_öfo_t
 *
md_öfo
;

164 if–*
hash_Àn
 != 0 )

167 if––
md_öfo
 = 
	`mbedés_md_öfo_‰om_ty≥
–
md_Æg
 ) ) =
NULL
 )

170 *
hash_Àn
 = 
	`mbedés_md_gë_size
–
md_öfo
 );

172 
	}
}

177 
	$mbedés_pk_vîify
–
mbedés_pk_c⁄ãxt
 *
˘x
, 
mbedés_md_ty≥_t
 
md_Æg
,

178 c⁄° *
hash
, 
size_t
 
hash_Àn
,

179 c⁄° *
sig
, 
size_t
 
sig_Àn
 )

181 if–
˘x
 =
NULL
 || ctx->
pk_öfo
 == NULL ||

182 
	`pk_hashÀn_hñ≥r
–
md_Æg
, &
hash_Àn
 ) != 0 )

183 –
MBEDTLS_ERR_PK_BAD_INPUT_DATA
 );

185 if–
˘x
->
pk_öfo
->
vîify_func
 =
NULL
 )

186 –
MBEDTLS_ERR_PK_TYPE_MISMATCH
 );

188 –
˘x
->
pk_öfo
->
	`vîify_func
–˘x->
pk_˘x
, 
md_Æg
, 
hash
, 
hash_Àn
,

189 
sig
, 
sig_Àn
 ) );

190 
	}
}

195 
	$mbedés_pk_vîify_ext
–
mbedés_pk_ty≥_t
 
ty≥
, c⁄° *
›ti⁄s
,

196 
mbedés_pk_c⁄ãxt
 *
˘x
, 
mbedés_md_ty≥_t
 
md_Æg
,

197 c⁄° *
hash
, 
size_t
 
hash_Àn
,

198 c⁄° *
sig
, 
size_t
 
sig_Àn
 )

200 if–
˘x
 =
NULL
 || ctx->
pk_öfo
 == NULL )

201 –
MBEDTLS_ERR_PK_BAD_INPUT_DATA
 );

203 if–! 
	`mbedés_pk_ˇn_do
–
˘x
, 
ty≥
 ) )

204 –
MBEDTLS_ERR_PK_TYPE_MISMATCH
 );

206 if–
ty≥
 =
MBEDTLS_PK_RSASSA_PSS
 )

208 #i‡
	`deföed
(
MBEDTLS_RSA_C
Ë&& deföed(
MBEDTLS_PKCS1_V21
)

209 
ªt
;

210 c⁄° 
mbedés_pk_rßsß_pss_›ti⁄s
 *
pss_›ts
;

212 if–
›ti⁄s
 =
NULL
 )

213 –
MBEDTLS_ERR_PK_BAD_INPUT_DATA
 );

215 
pss_›ts
 = (c⁄° 
mbedés_pk_rßsß_pss_›ti⁄s
 *Ë
›ti⁄s
;

217 if–
sig_Àn
 < 
	`mbedés_pk_gë_Àn
–
˘x
 ) )

218 –
MBEDTLS_ERR_RSA_VERIFY_FAILED
 );

220 
ªt
 = 
	`mbedés_rß_rßsß_pss_vîify_ext
–
	`mbedés_pk_rß
–*
˘x
 ),

221 
NULL
, NULL, 
MBEDTLS_RSA_PUBLIC
,

222 
md_Æg
, (Ë
hash_Àn
, 
hash
,

223 
pss_›ts
->
mgf1_hash_id
,

224 
pss_›ts
->
ex≥˘ed_ß…_Àn
,

225 
sig
 );

226 if–
ªt
 != 0 )

227 –
ªt
 );

229 if–
sig_Àn
 > 
	`mbedés_pk_gë_Àn
–
˘x
 ) )

230 –
MBEDTLS_ERR_PK_SIG_LEN_MISMATCH
 );

234 –
MBEDTLS_ERR_PK_FEATURE_UNAVAILABLE
 );

239 if–
›ti⁄s
 !
NULL
 )

240 –
MBEDTLS_ERR_PK_BAD_INPUT_DATA
 );

242 –
	`mbedés_pk_vîify
–
˘x
, 
md_Æg
, 
hash
, 
hash_Àn
, 
sig
, 
sig_Àn
 ) );

243 
	}
}

248 
	$mbedés_pk_sign
–
mbedés_pk_c⁄ãxt
 *
˘x
, 
mbedés_md_ty≥_t
 
md_Æg
,

249 c⁄° *
hash
, 
size_t
 
hash_Àn
,

250 *
sig
, 
size_t
 *
sig_Àn
,

251 (*
f_∫g
)(*, *, 
size_t
), *
p_∫g
 )

253 if–
˘x
 =
NULL
 || ctx->
pk_öfo
 == NULL ||

254 
	`pk_hashÀn_hñ≥r
–
md_Æg
, &
hash_Àn
 ) != 0 )

255 –
MBEDTLS_ERR_PK_BAD_INPUT_DATA
 );

257 if–
˘x
->
pk_öfo
->
sign_func
 =
NULL
 )

258 –
MBEDTLS_ERR_PK_TYPE_MISMATCH
 );

260 –
˘x
->
pk_öfo
->
	`sign_func
–˘x->
pk_˘x
, 
md_Æg
, 
hash
, 
hash_Àn
,

261 
sig
, 
sig_Àn
, 
f_∫g
, 
p_∫g
 ) );

262 
	}
}

267 
	$mbedés_pk_de¸y±
–
mbedés_pk_c⁄ãxt
 *
˘x
,

268 c⁄° *
öput
, 
size_t
 
ûí
,

269 *
ouçut
, 
size_t
 *
ﬁí
, size_à
osize
,

270 (*
f_∫g
)(*, *, 
size_t
), *
p_∫g
 )

272 if–
˘x
 =
NULL
 || ctx->
pk_öfo
 == NULL )

273 –
MBEDTLS_ERR_PK_BAD_INPUT_DATA
 );

275 if–
˘x
->
pk_öfo
->
de¸y±_func
 =
NULL
 )

276 –
MBEDTLS_ERR_PK_TYPE_MISMATCH
 );

278 –
˘x
->
pk_öfo
->
	`de¸y±_func
–˘x->
pk_˘x
, 
öput
, 
ûí
,

279 
ouçut
, 
ﬁí
, 
osize
, 
f_∫g
, 
p_∫g
 ) );

280 
	}
}

285 
	$mbedés_pk_í¸y±
–
mbedés_pk_c⁄ãxt
 *
˘x
,

286 c⁄° *
öput
, 
size_t
 
ûí
,

287 *
ouçut
, 
size_t
 *
ﬁí
, size_à
osize
,

288 (*
f_∫g
)(*, *, 
size_t
), *
p_∫g
 )

290 if–
˘x
 =
NULL
 || ctx->
pk_öfo
 == NULL )

291 –
MBEDTLS_ERR_PK_BAD_INPUT_DATA
 );

293 if–
˘x
->
pk_öfo
->
í¸y±_func
 =
NULL
 )

294 –
MBEDTLS_ERR_PK_TYPE_MISMATCH
 );

296 –
˘x
->
pk_öfo
->
	`í¸y±_func
–˘x->
pk_˘x
, 
öput
, 
ûí
,

297 
ouçut
, 
ﬁí
, 
osize
, 
f_∫g
, 
p_∫g
 ) );

298 
	}
}

303 
	$mbedés_pk_check_∑ú
–c⁄° 
mbedés_pk_c⁄ãxt
 *
pub
, c⁄° mbedés_pk_c⁄ãxà*
¥v
 )

305 if–
pub
 =
NULL
 ||Öub->
pk_öfo
 == NULL ||

306 
¥v
 =
NULL
 ||Örv->
pk_öfo
 == NULL ||

307 
¥v
->
pk_öfo
->
check_∑ú_func
 =
NULL
 )

309 –
MBEDTLS_ERR_PK_BAD_INPUT_DATA
 );

312 if–
¥v
->
pk_öfo
->
ty≥
 =
MBEDTLS_PK_RSA_ALT
 )

314 if–
pub
->
pk_öfo
->
ty≥
 !
MBEDTLS_PK_RSA
 )

315 –
MBEDTLS_ERR_PK_TYPE_MISMATCH
 );

319 if–
pub
->
pk_öfo
 !
¥v
->pk_info )

320 –
MBEDTLS_ERR_PK_TYPE_MISMATCH
 );

323 –
¥v
->
pk_öfo
->
	`check_∑ú_func
–
pub
->
pk_˘x
,Örv->pk_ctx ) );

324 
	}
}

329 
size_t
 
	$mbedés_pk_gë_bôÀn
–c⁄° 
mbedés_pk_c⁄ãxt
 *
˘x
 )

331 if–
˘x
 =
NULL
 || ctx->
pk_öfo
 == NULL )

334 –
˘x
->
pk_öfo
->
	`gë_bôÀn
–˘x->
pk_˘x
 ) );

335 
	}
}

340 
	$mbedés_pk_debug
–c⁄° 
mbedés_pk_c⁄ãxt
 *
˘x
, 
mbedés_pk_debug_ôem
 *
ôems
 )

342 if–
˘x
 =
NULL
 || ctx->
pk_öfo
 == NULL )

343 –
MBEDTLS_ERR_PK_BAD_INPUT_DATA
 );

345 if–
˘x
->
pk_öfo
->
debug_func
 =
NULL
 )

346 –
MBEDTLS_ERR_PK_TYPE_MISMATCH
 );

348 
˘x
->
pk_öfo
->
	`debug_func
–˘x->
pk_˘x
, 
ôems
 );

350 
	}
}

355 c⁄° *
	$mbedés_pk_gë_«me
–c⁄° 
mbedés_pk_c⁄ãxt
 *
˘x
 )

357 if–
˘x
 =
NULL
 || ctx->
pk_öfo
 == NULL )

360 –
˘x
->
pk_öfo
->
«me
 );

361 
	}
}

366 
mbedés_pk_ty≥_t
 
	$mbedés_pk_gë_ty≥
–c⁄° 
mbedés_pk_c⁄ãxt
 *
˘x
 )

368 if–
˘x
 =
NULL
 || ctx->
pk_öfo
 == NULL )

369 –
MBEDTLS_PK_NONE
 );

371 –
˘x
->
pk_öfo
->
ty≥
 );

372 
	}
}

	@/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/pk_wrap.c

22 #i‡!
deföed
(
MBEDTLS_CONFIG_FILE
)

23 
	~"mbedés/c⁄fig.h
"

25 #ö˛udê
MBEDTLS_CONFIG_FILE


28 #i‡
deföed
(
MBEDTLS_PK_C
)

29 
	~"mbedés/pk_öã∫Æ.h
"

32 
	~"mbedés/rß.h
"

34 
	~<°rög.h
>

36 #i‡
deföed
(
MBEDTLS_ECP_C
)

37 
	~"mbedés/e˝.h
"

40 #i‡
deföed
(
MBEDTLS_ECDSA_C
)

41 
	~"mbedés/ecdß.h
"

44 #i‡
deföed
(
MBEDTLS_PLATFORM_C
)

45 
	~"mbedés/∂©f‹m.h
"

47 
	~<°dlib.h
>

48 
	#mbedés_ˇŒoc
 
ˇŒoc


	)

49 
	#mbedés_‰ì
 
‰ì


	)

52 #i‡
deföed
(
MBEDTLS_PK_RSA_ALT_SUPPORT
)

54 
	$mbedés_zîoize
–*
v
, 
size_t
 
n
 ) {

55 vﬁ©ûê*
p
 = 
v
;  
n
-- ) *p++ = 0;

56 
	}
}

59 #i‡
deföed
(
MBEDTLS_RSA_C
)

60 
	$rß_ˇn_do
–
mbedés_pk_ty≥_t
 
ty≥
 )

62 –
ty≥
 =
MBEDTLS_PK_RSA
 ||

63 
ty≥
 =
MBEDTLS_PK_RSASSA_PSS
 );

64 
	}
}

66 
size_t
 
	$rß_gë_bôÀn
–c⁄° *
˘x
 )

68 –8 * ((c⁄° 
mbedés_rß_c⁄ãxt
 *Ë
˘x
)->
Àn
 );

69 
	}
}

71 
	$rß_vîify_wøp
–*
˘x
, 
mbedés_md_ty≥_t
 
md_Æg
,

72 c⁄° *
hash
, 
size_t
 
hash_Àn
,

73 c⁄° *
sig
, 
size_t
 
sig_Àn
 )

75 
ªt
;

77 if–
sig_Àn
 < ((
mbedés_rß_c⁄ãxt
 *Ë
˘x
)->
Àn
 )

78 –
MBEDTLS_ERR_RSA_VERIFY_FAILED
 );

80 if––
ªt
 = 
	`mbedés_rß_pkcs1_vîify
–(
mbedés_rß_c⁄ãxt
 *Ë
˘x
, 
NULL
, NULL,

81 
MBEDTLS_RSA_PUBLIC
, 
md_Æg
,

82 (Ë
hash_Àn
, 
hash
, 
sig
 ) ) != 0 )

83 –
ªt
 );

85 if–
sig_Àn
 > ((
mbedés_rß_c⁄ãxt
 *Ë
˘x
)->
Àn
 )

86 –
MBEDTLS_ERR_PK_SIG_LEN_MISMATCH
 );

89 
	}
}

91 
	$rß_sign_wøp
–*
˘x
, 
mbedés_md_ty≥_t
 
md_Æg
,

92 c⁄° *
hash
, 
size_t
 
hash_Àn
,

93 *
sig
, 
size_t
 *
sig_Àn
,

94 (*
f_∫g
)(*, *, 
size_t
), *
p_∫g
 )

96 *
sig_Àn
 = ((
mbedés_rß_c⁄ãxt
 *Ë
˘x
)->
Àn
;

98 –
	`mbedés_rß_pkcs1_sign
–(
mbedés_rß_c⁄ãxt
 *Ë
˘x
, 
f_∫g
, 
p_∫g
, 
MBEDTLS_RSA_PRIVATE
,

99 
md_Æg
, (Ë
hash_Àn
, 
hash
, 
sig
 ) );

100 
	}
}

102 
	$rß_de¸y±_wøp
–*
˘x
,

103 c⁄° *
öput
, 
size_t
 
ûí
,

104 *
ouçut
, 
size_t
 *
ﬁí
, size_à
osize
,

105 (*
f_∫g
)(*, *, 
size_t
), *
p_∫g
 )

107 if–
ûí
 !((
mbedés_rß_c⁄ãxt
 *Ë
˘x
)->
Àn
 )

108 –
MBEDTLS_ERR_RSA_BAD_INPUT_DATA
 );

110 –
	`mbedés_rß_pkcs1_de¸y±
–(
mbedés_rß_c⁄ãxt
 *Ë
˘x
, 
f_∫g
, 
p_∫g
,

111 
MBEDTLS_RSA_PRIVATE
, 
ﬁí
, 
öput
, 
ouçut
, 
osize
 ) );

112 
	}
}

114 
	$rß_í¸y±_wøp
–*
˘x
,

115 c⁄° *
öput
, 
size_t
 
ûí
,

116 *
ouçut
, 
size_t
 *
ﬁí
, size_à
osize
,

117 (*
f_∫g
)(*, *, 
size_t
), *
p_∫g
 )

119 *
ﬁí
 = ((
mbedés_rß_c⁄ãxt
 *Ë
˘x
)->
Àn
;

121 if–*
ﬁí
 > 
osize
 )

122 –
MBEDTLS_ERR_RSA_OUTPUT_TOO_LARGE
 );

124 –
	`mbedés_rß_pkcs1_í¸y±
–(
mbedés_rß_c⁄ãxt
 *Ë
˘x
,

125 
f_∫g
, 
p_∫g
, 
MBEDTLS_RSA_PUBLIC
, 
ûí
, 
öput
, 
ouçut
 ) );

126 
	}
}

128 
	$rß_check_∑ú_wøp
–c⁄° *
pub
, c⁄° *
¥v
 )

130 –
	`mbedés_rß_check_pub_¥iv
–(c⁄° 
mbedés_rß_c⁄ãxt
 *Ë
pub
,

131 (c⁄° 
mbedés_rß_c⁄ãxt
 *Ë
¥v
 ) );

132 
	}
}

134 *
	$rß_Æloc_wøp
( )

136 *
˘x
 = 
	`mbedés_ˇŒoc
–1, –
mbedés_rß_c⁄ãxt
 ) );

138 if–
˘x
 !
NULL
 )

139 
	`mbedés_rß_öô
–(
mbedés_rß_c⁄ãxt
 *Ë
˘x
, 0, 0 );

141 –
˘x
 );

142 
	}
}

144 
	$rß_‰ì_wøp
–*
˘x
 )

146 
	`mbedés_rß_‰ì
–(
mbedés_rß_c⁄ãxt
 *Ë
˘x
 );

147 
	`mbedés_‰ì
–
˘x
 );

148 
	}
}

150 
	$rß_debug
–c⁄° *
˘x
, 
mbedés_pk_debug_ôem
 *
ôems
 )

152 
ôems
->
ty≥
 = 
MBEDTLS_PK_DEBUG_MPI
;

153 
ôems
->
«me
 = "rsa.N";

154 
ôems
->
vÆue
 = &–((
mbedés_rß_c⁄ãxt
 *Ë
˘x
)->
N
 );

156 
ôems
++;

158 
ôems
->
ty≥
 = 
MBEDTLS_PK_DEBUG_MPI
;

159 
ôems
->
«me
 = "rsa.E";

160 
ôems
->
vÆue
 = &–((
mbedés_rß_c⁄ãxt
 *Ë
˘x
)->
E
 );

161 
	}
}

163 c⁄° 
mbedés_pk_öfo_t
 
	gmbedés_rß_öfo
 = {

164 
MBEDTLS_PK_RSA
,

166 
rß_gë_bôÀn
,

167 
rß_ˇn_do
,

168 
rß_vîify_wøp
,

169 
rß_sign_wøp
,

170 
rß_de¸y±_wøp
,

171 
rß_í¸y±_wøp
,

172 
rß_check_∑ú_wøp
,

173 
rß_Æloc_wøp
,

174 
rß_‰ì_wøp
,

175 
rß_debug
,

179 #i‡
deföed
(
MBEDTLS_ECP_C
)

183 
	$eckey_ˇn_do
–
mbedés_pk_ty≥_t
 
ty≥
 )

185 –
ty≥
 =
MBEDTLS_PK_ECKEY
 ||

186 
ty≥
 =
MBEDTLS_PK_ECKEY_DH
 ||

187 
ty≥
 =
MBEDTLS_PK_ECDSA
 );

188 
	}
}

190 
size_t
 
	$eckey_gë_bôÀn
–c⁄° *
˘x
 )

192 –((
mbedés_e˝_key∑ú
 *Ë
˘x
)->
gΩ
.
pbôs
 );

193 
	}
}

195 #i‡
deföed
(
MBEDTLS_ECDSA_C
)

197 
ecdß_vîify_wøp
–*
˘x
, 
mbedés_md_ty≥_t
 
md_Æg
,

198 c⁄° *
hash
, 
size_t
 
hash_Àn
,

199 c⁄° *
sig
, 
size_t
 
sig_Àn
 );

201 
ecdß_sign_wøp
–*
˘x
, 
mbedés_md_ty≥_t
 
md_Æg
,

202 c⁄° *
hash
, 
size_t
 
hash_Àn
,

203 *
sig
, 
size_t
 *
sig_Àn
,

204 (*
f_∫g
)(*, *, 
size_t
), *
p_∫g
 );

206 
	$eckey_vîify_wøp
–*
˘x
, 
mbedés_md_ty≥_t
 
md_Æg
,

207 c⁄° *
hash
, 
size_t
 
hash_Àn
,

208 c⁄° *
sig
, 
size_t
 
sig_Àn
 )

210 
ªt
;

211 
mbedés_ecdß_c⁄ãxt
 
ecdß
;

213 
	`mbedés_ecdß_öô
–&
ecdß
 );

215 if––
ªt
 = 
	`mbedés_ecdß_‰om_key∑ú
–&
ecdß
, 
˘x
 ) ) == 0 )

216 
ªt
 = 
	`ecdß_vîify_wøp
–&
ecdß
, 
md_Æg
, 
hash
, 
hash_Àn
, 
sig
, 
sig_Àn
 );

218 
	`mbedés_ecdß_‰ì
–&
ecdß
 );

220 –
ªt
 );

221 
	}
}

223 
	$eckey_sign_wøp
–*
˘x
, 
mbedés_md_ty≥_t
 
md_Æg
,

224 c⁄° *
hash
, 
size_t
 
hash_Àn
,

225 *
sig
, 
size_t
 *
sig_Àn
,

226 (*
f_∫g
)(*, *, 
size_t
), *
p_∫g
 )

228 
ªt
;

229 
mbedés_ecdß_c⁄ãxt
 
ecdß
;

231 
	`mbedés_ecdß_öô
–&
ecdß
 );

233 if––
ªt
 = 
	`mbedés_ecdß_‰om_key∑ú
–&
ecdß
, 
˘x
 ) ) == 0 )

234 
ªt
 = 
	`ecdß_sign_wøp
–&
ecdß
, 
md_Æg
, 
hash
, 
hash_Àn
, 
sig
, 
sig_Àn
,

235 
f_∫g
, 
p_∫g
 );

237 
	`mbedés_ecdß_‰ì
–&
ecdß
 );

239 –
ªt
 );

240 
	}
}

244 
	$eckey_check_∑ú
–c⁄° *
pub
, c⁄° *
¥v
 )

246 –
	`mbedés_e˝_check_pub_¥iv
–(c⁄° 
mbedés_e˝_key∑ú
 *Ë
pub
,

247 (c⁄° 
mbedés_e˝_key∑ú
 *Ë
¥v
 ) );

248 
	}
}

250 *
	$eckey_Æloc_wøp
( )

252 *
˘x
 = 
	`mbedés_ˇŒoc
–1, –
mbedés_e˝_key∑ú
 ) );

254 if–
˘x
 !
NULL
 )

255 
	`mbedés_e˝_key∑ú_öô
–
˘x
 );

257 –
˘x
 );

258 
	}
}

260 
	$eckey_‰ì_wøp
–*
˘x
 )

262 
	`mbedés_e˝_key∑ú_‰ì
–(
mbedés_e˝_key∑ú
 *Ë
˘x
 );

263 
	`mbedés_‰ì
–
˘x
 );

264 
	}
}

266 
	$eckey_debug
–c⁄° *
˘x
, 
mbedés_pk_debug_ôem
 *
ôems
 )

268 
ôems
->
ty≥
 = 
MBEDTLS_PK_DEBUG_ECP
;

269 
ôems
->
«me
 = "eckey.Q";

270 
ôems
->
vÆue
 = &–((
mbedés_e˝_key∑ú
 *Ë
˘x
)->
Q
 );

271 
	}
}

273 c⁄° 
mbedés_pk_öfo_t
 
	gmbedés_eckey_öfo
 = {

274 
MBEDTLS_PK_ECKEY
,

276 
eckey_gë_bôÀn
,

277 
eckey_ˇn_do
,

278 #i‡
deföed
(
MBEDTLS_ECDSA_C
)

279 
eckey_vîify_wøp
,

280 
eckey_sign_wøp
,

282 
NULL
,

283 
NULL
,

285 
NULL
,

286 
NULL
,

287 
eckey_check_∑ú
,

288 
eckey_Æloc_wøp
,

289 
eckey_‰ì_wøp
,

290 
eckey_debug
,

296 
	$eckeydh_ˇn_do
–
mbedés_pk_ty≥_t
 
ty≥
 )

298 –
ty≥
 =
MBEDTLS_PK_ECKEY
 ||

299 
ty≥
 =
MBEDTLS_PK_ECKEY_DH
 );

300 
	}
}

302 c⁄° 
mbedés_pk_öfo_t
 
	gmbedés_eckeydh_öfo
 = {

303 
MBEDTLS_PK_ECKEY_DH
,

305 
eckey_gë_bôÀn
,

306 
eckeydh_ˇn_do
,

307 
NULL
,

308 
NULL
,

309 
NULL
,

310 
NULL
,

311 
eckey_check_∑ú
,

312 
eckey_Æloc_wøp
,

313 
eckey_‰ì_wøp
,

314 
eckey_debug
,

318 #i‡
deföed
(
MBEDTLS_ECDSA_C
)

319 
	$ecdß_ˇn_do
–
mbedés_pk_ty≥_t
 
ty≥
 )

321 –
ty≥
 =
MBEDTLS_PK_ECDSA
 );

322 
	}
}

324 
	$ecdß_vîify_wøp
–*
˘x
, 
mbedés_md_ty≥_t
 
md_Æg
,

325 c⁄° *
hash
, 
size_t
 
hash_Àn
,

326 c⁄° *
sig
, 
size_t
 
sig_Àn
 )

328 
ªt
;

329 ((Ë
md_Æg
);

331 
ªt
 = 
	`mbedés_ecdß_ªad_sig«tuª
–(
mbedés_ecdß_c⁄ãxt
 *Ë
˘x
,

332 
hash
, 
hash_Àn
, 
sig
, 
sig_Àn
 );

334 if–
ªt
 =
MBEDTLS_ERR_ECP_SIG_LEN_MISMATCH
 )

335 –
MBEDTLS_ERR_PK_SIG_LEN_MISMATCH
 );

337 –
ªt
 );

338 
	}
}

340 
	$ecdß_sign_wøp
–*
˘x
, 
mbedés_md_ty≥_t
 
md_Æg
,

341 c⁄° *
hash
, 
size_t
 
hash_Àn
,

342 *
sig
, 
size_t
 *
sig_Àn
,

343 (*
f_∫g
)(*, *, 
size_t
), *
p_∫g
 )

345 –
	`mbedés_ecdß_wrôe_sig«tuª
–(
mbedés_ecdß_c⁄ãxt
 *Ë
˘x
,

346 
md_Æg
, 
hash
, 
hash_Àn
, 
sig
, 
sig_Àn
, 
f_∫g
, 
p_∫g
 ) );

347 
	}
}

349 *
	$ecdß_Æloc_wøp
( )

351 *
˘x
 = 
	`mbedés_ˇŒoc
–1, –
mbedés_ecdß_c⁄ãxt
 ) );

353 if–
˘x
 !
NULL
 )

354 
	`mbedés_ecdß_öô
–(
mbedés_ecdß_c⁄ãxt
 *Ë
˘x
 );

356 –
˘x
 );

357 
	}
}

359 
	$ecdß_‰ì_wøp
–*
˘x
 )

361 
	`mbedés_ecdß_‰ì
–(
mbedés_ecdß_c⁄ãxt
 *Ë
˘x
 );

362 
	`mbedés_‰ì
–
˘x
 );

363 
	}
}

365 c⁄° 
mbedés_pk_öfo_t
 
	gmbedés_ecdß_öfo
 = {

366 
MBEDTLS_PK_ECDSA
,

368 
eckey_gë_bôÀn
,

369 
ecdß_ˇn_do
,

370 
ecdß_vîify_wøp
,

371 
ecdß_sign_wøp
,

372 
NULL
,

373 
NULL
,

374 
eckey_check_∑ú
,

375 
ecdß_Æloc_wøp
,

376 
ecdß_‰ì_wøp
,

377 
eckey_debug
,

381 #i‡
deföed
(
MBEDTLS_PK_RSA_ALT_SUPPORT
)

386 
	$rß_Æt_ˇn_do
–
mbedés_pk_ty≥_t
 
ty≥
 )

388 –
ty≥
 =
MBEDTLS_PK_RSA
 );

389 
	}
}

391 
size_t
 
	$rß_Æt_gë_bôÀn
–c⁄° *
˘x
 )

393 c⁄° 
mbedés_rß_Æt_c⁄ãxt
 *
rß_Æt
 = (c⁄° mbedés_rß_Æt_c⁄ãxà*Ë
˘x
;

395 –8 * 
rß_Æt
->
	`key_Àn_func
–rß_Æt->
key
 ) );

396 
	}
}

398 
	$rß_Æt_sign_wøp
–*
˘x
, 
mbedés_md_ty≥_t
 
md_Æg
,

399 c⁄° *
hash
, 
size_t
 
hash_Àn
,

400 *
sig
, 
size_t
 *
sig_Àn
,

401 (*
f_∫g
)(*, *, 
size_t
), *
p_∫g
 )

403 
mbedés_rß_Æt_c⁄ãxt
 *
rß_Æt
 = (mbedés_rß_Æt_c⁄ãxà*Ë
˘x
;

405 *
sig_Àn
 = 
rß_Æt
->
	`key_Àn_func
–rß_Æt->
key
 );

407 –
rß_Æt
->
	`sign_func
–rß_Æt->
key
, 
f_∫g
, 
p_∫g
, 
MBEDTLS_RSA_PRIVATE
,

408 
md_Æg
, (Ë
hash_Àn
, 
hash
, 
sig
 ) );

409 
	}
}

411 
	$rß_Æt_de¸y±_wøp
–*
˘x
,

412 c⁄° *
öput
, 
size_t
 
ûí
,

413 *
ouçut
, 
size_t
 *
ﬁí
, size_à
osize
,

414 (*
f_∫g
)(*, *, 
size_t
), *
p_∫g
 )

416 
mbedés_rß_Æt_c⁄ãxt
 *
rß_Æt
 = (mbedés_rß_Æt_c⁄ãxà*Ë
˘x
;

418 ((Ë
f_∫g
);

419 ((Ë
p_∫g
);

421 if–
ûí
 !
rß_Æt
->
	`key_Àn_func
–rß_Æt->
key
 ) )

422 –
MBEDTLS_ERR_RSA_BAD_INPUT_DATA
 );

424 –
rß_Æt
->
	`de¸y±_func
–rß_Æt->
key
,

425 
MBEDTLS_RSA_PRIVATE
, 
ﬁí
, 
öput
, 
ouçut
, 
osize
 ) );

426 
	}
}

428 #i‡
deföed
(
MBEDTLS_RSA_C
)

429 
	$rß_Æt_check_∑ú
–c⁄° *
pub
, c⁄° *
¥v
 )

431 
sig
[
MBEDTLS_MPI_MAX_SIZE
];

432 
hash
[32];

433 
size_t
 
sig_Àn
 = 0;

434 
ªt
;

436 if–
	`rß_Æt_gë_bôÀn
–
¥v
 ) !
	`rß_gë_bôÀn
–
pub
 ) )

437 –
MBEDTLS_ERR_RSA_KEY_CHECK_FAILED
 );

439 
	`mem£t
–
hash
, 0x2a, ( hash ) );

441 if––
ªt
 = 
	`rß_Æt_sign_wøp
–(*Ë
¥v
, 
MBEDTLS_MD_NONE
,

442 
hash
, ( hash ),

443 
sig
, &
sig_Àn
, 
NULL
, NULL ) ) != 0 )

445 –
ªt
 );

448 if–
	`rß_vîify_wøp
–(*Ë
pub
, 
MBEDTLS_MD_NONE
,

449 
hash
, –hash ), 
sig
, 
sig_Àn
 ) != 0 )

451 –
MBEDTLS_ERR_RSA_KEY_CHECK_FAILED
 );

455 
	}
}

458 *
	$rß_Æt_Æloc_wøp
( )

460 *
˘x
 = 
	`mbedés_ˇŒoc
–1, –
mbedés_rß_Æt_c⁄ãxt
 ) );

462 if–
˘x
 !
NULL
 )

463 
	`mem£t
–
˘x
, 0, –
mbedés_rß_Æt_c⁄ãxt
 ) );

465 –
˘x
 );

466 
	}
}

468 
	$rß_Æt_‰ì_wøp
–*
˘x
 )

470 
	`mbedés_zîoize
–
˘x
, –
mbedés_rß_Æt_c⁄ãxt
 ) );

471 
	`mbedés_‰ì
–
˘x
 );

472 
	}
}

474 c⁄° 
mbedés_pk_öfo_t
 
	gmbedés_rß_Æt_öfo
 = {

475 
MBEDTLS_PK_RSA_ALT
,

477 
rß_Æt_gë_bôÀn
,

478 
rß_Æt_ˇn_do
,

479 
NULL
,

480 
rß_Æt_sign_wøp
,

481 
rß_Æt_de¸y±_wøp
,

482 
NULL
,

483 #i‡
deföed
(
MBEDTLS_RSA_C
)

484 
rß_Æt_check_∑ú
,

486 
NULL
,

488 
rß_Æt_Æloc_wøp
,

489 
rß_Æt_‰ì_wøp
,

490 
NULL
,

	@/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/pkparse.c

22 #i‡!
deföed
(
MBEDTLS_CONFIG_FILE
)

23 
	~"mbedés/c⁄fig.h
"

25 #ö˛udê
MBEDTLS_CONFIG_FILE


28 #i‡
deföed
(
MBEDTLS_PK_PARSE_C
)

30 
	~"mbedés/pk.h
"

31 
	~"mbedés/a¢1.h
"

32 
	~"mbedés/oid.h
"

34 
	~<°rög.h
>

36 #i‡
deföed
(
MBEDTLS_RSA_C
)

37 
	~"mbedés/rß.h
"

39 #i‡
deföed
(
MBEDTLS_ECP_C
)

40 
	~"mbedés/e˝.h
"

42 #i‡
deföed
(
MBEDTLS_ECDSA_C
)

43 
	~"mbedés/ecdß.h
"

45 #i‡
deföed
(
MBEDTLS_PEM_PARSE_C
)

46 
	~"mbedés/≥m.h
"

48 #i‡
deföed
(
MBEDTLS_PKCS5_C
)

49 
	~"mbedés/pkcs5.h
"

51 #i‡
deföed
(
MBEDTLS_PKCS12_C
)

52 
	~"mbedés/pkcs12.h
"

55 #i‡
deföed
(
MBEDTLS_PLATFORM_C
)

56 
	~"mbedés/∂©f‹m.h
"

58 
	~<°dlib.h
>

59 
	#mbedés_ˇŒoc
 
ˇŒoc


	)

60 
	#mbedés_‰ì
 
‰ì


	)

63 #i‡
deföed
(
MBEDTLS_FS_IO
)

65 
	$mbedés_zîoize
–*
v
, 
size_t
 
n
 ) {

66 vﬁ©ûê*
p
 = 
v
;  
n
-- ) *p++ = 0;

67 
	}
}

76 
	$mbedés_pk_lﬂd_fûe
–c⁄° *
∑th
, **
buf
, 
size_t
 *
n
 )

78 
FILE
 *
f
;

79 
size
;

81 if––
f
 = 
	`f›í
–
∑th
, "rb" ) ) =
NULL
 )

82 –
MBEDTLS_ERR_PK_FILE_IO_ERROR
 );

84 
	`f£ek
–
f
, 0, 
SEEK_END
 );

85 if––
size
 = 
	`·ñl
–
f
 ) ) == -1 )

87 
	`f˛o£
–
f
 );

88 –
MBEDTLS_ERR_PK_FILE_IO_ERROR
 );

90 
	`f£ek
–
f
, 0, 
SEEK_SET
 );

92 *
n
 = (
size_t
Ë
size
;

94 if–*
n
 + 1 == 0 ||

95 –*
buf
 = 
	`mbedés_ˇŒoc
–1, *
n
 + 1 ) ) =
NULL
 )

97 
	`f˛o£
–
f
 );

98 –
MBEDTLS_ERR_PK_ALLOC_FAILED
 );

101 if–
	`‰ód
–*
buf
, 1, *
n
, 
f
 ) != *n )

103 
	`f˛o£
–
f
 );

104 
	`mbedés_‰ì
–*
buf
 );

105 –
MBEDTLS_ERR_PK_FILE_IO_ERROR
 );

108 
	`f˛o£
–
f
 );

110 (*
buf
)[*
n
] = '\0';

112 if–
	`°r°r
–(c⁄° *Ë*
buf
, "-----BEGIN " ) !
NULL
 )

113 ++*
n
;

116 
	}
}

121 
	$mbedés_pk_∑r£_keyfûe
–
mbedés_pk_c⁄ãxt
 *
˘x
,

122 c⁄° *
∑th
, c⁄° *
pwd
 )

124 
ªt
;

125 
size_t
 
n
;

126 *
buf
;

128 if––
ªt
 = 
	`mbedés_pk_lﬂd_fûe
–
∑th
, &
buf
, &
n
 ) ) != 0 )

129 –
ªt
 );

131 if–
pwd
 =
NULL
 )

132 
ªt
 = 
	`mbedés_pk_∑r£_key
–
˘x
, 
buf
, 
n
, 
NULL
, 0 );

134 
ªt
 = 
	`mbedés_pk_∑r£_key
–
˘x
, 
buf
, 
n
,

135 (c⁄° *Ë
pwd
, 
	`°æí
(Öwd ) );

137 
	`mbedés_zîoize
–
buf
, 
n
 );

138 
	`mbedés_‰ì
–
buf
 );

140 –
ªt
 );

141 
	}
}

146 
	$mbedés_pk_∑r£_public_keyfûe
–
mbedés_pk_c⁄ãxt
 *
˘x
, c⁄° *
∑th
 )

148 
ªt
;

149 
size_t
 
n
;

150 *
buf
;

152 if––
ªt
 = 
	`mbedés_pk_lﬂd_fûe
–
∑th
, &
buf
, &
n
 ) ) != 0 )

153 –
ªt
 );

155 
ªt
 = 
	`mbedés_pk_∑r£_public_key
–
˘x
, 
buf
, 
n
 );

157 
	`mbedés_zîoize
–
buf
, 
n
 );

158 
	`mbedés_‰ì
–
buf
 );

160 –
ªt
 );

161 
	}
}

164 #i‡
deföed
(
MBEDTLS_ECP_C
)

173 
	$pk_gë_e˝¨ams
–**
p
, c⁄° *
íd
,

174 
mbedés_a¢1_buf
 *
∑øms
 )

176 
ªt
;

179 
∑øms
->
èg
 = **
p
;

180 if–
∑øms
->
èg
 !
MBEDTLS_ASN1_OID


181 #i‡
	`deföed
(
MBEDTLS_PK_PARSE_EC_EXTENDED
)

182 && 
∑øms
->
èg
 !–
MBEDTLS_ASN1_CONSTRUCTED
 | 
MBEDTLS_ASN1_SEQUENCE
 )

186 –
MBEDTLS_ERR_PK_KEY_INVALID_FORMAT
 +

187 
MBEDTLS_ERR_ASN1_UNEXPECTED_TAG
 );

190 if––
ªt
 = 
	`mbedés_a¢1_gë_èg
–
p
, 
íd
, &
∑øms
->
Àn
,Ö¨ams->
èg
 ) ) != 0 )

192 –
MBEDTLS_ERR_PK_KEY_INVALID_FORMAT
 + 
ªt
 );

195 
∑øms
->
p
 = *p;

196 *
p
 +
∑øms
->
Àn
;

198 if–*
p
 !
íd
 )

199 –
MBEDTLS_ERR_PK_KEY_INVALID_FORMAT
 +

200 
MBEDTLS_ERR_ASN1_LENGTH_MISMATCH
 );

203 
	}
}

205 #i‡
deföed
(
MBEDTLS_PK_PARSE_EC_EXTENDED
)

225 
	$pk_group_‰om_•ecifõd
–c⁄° 
mbedés_a¢1_buf
 *
∑øms
, 
mbedés_e˝_group
 *
gΩ
 )

227 
ªt
;

228 *
p
 = 
∑øms
->p;

229 c⁄° * c⁄° 
íd
 = 
∑øms
->
p
 +Ö¨ams->
Àn
;

230 c⁄° *
íd_fõld
, *
íd_curve
;

231 
size_t
 
Àn
;

232 
vî
;

235 if––
ªt
 = 
	`mbedés_a¢1_gë_öt
–&
p
, 
íd
, &
vî
 ) ) != 0 )

236 –
MBEDTLS_ERR_PK_KEY_INVALID_FORMAT
 + 
ªt
 );

238 if–
vî
 < 1 || ver > 3 )

239 –
MBEDTLS_ERR_PK_KEY_INVALID_FORMAT
 );

247 if––
ªt
 = 
	`mbedés_a¢1_gë_èg
–&
p
, 
íd
, &
Àn
,

248 
MBEDTLS_ASN1_CONSTRUCTED
 | 
MBEDTLS_ASN1_SEQUENCE
 ) ) != 0 )

249 –
ªt
 );

251 
íd_fõld
 = 
p
 + 
Àn
;

261 if––
ªt
 = 
	`mbedés_a¢1_gë_èg
–&
p
, 
íd_fõld
, &
Àn
, 
MBEDTLS_ASN1_OID
 ) ) != 0 )

262 –
ªt
 );

264 if–
Àn
 !
	`MBEDTLS_OID_SIZE
–
MBEDTLS_OID_ANSI_X9_62_PRIME_FIELD
 ) ||

265 
	`memcmp
–
p
, 
MBEDTLS_OID_ANSI_X9_62_PRIME_FIELD
, 
Àn
 ) != 0 )

267 –
MBEDTLS_ERR_PK_FEATURE_UNAVAILABLE
 );

270 
p
 +
Àn
;

273 if––
ªt
 = 
	`mbedés_a¢1_gë_mpi
–&
p
, 
íd_fõld
, &
gΩ
->
P
 ) ) != 0 )

274 –
MBEDTLS_ERR_PK_KEY_INVALID_FORMAT
 + 
ªt
 );

276 
gΩ
->
pbôs
 = 
	`mbedés_mpi_bôÀn
–&gΩ->
P
 );

278 if–
p
 !
íd_fõld
 )

279 –
MBEDTLS_ERR_PK_KEY_INVALID_FORMAT
 +

280 
MBEDTLS_ERR_ASN1_LENGTH_MISMATCH
 );

291 if––
ªt
 = 
	`mbedés_a¢1_gë_èg
–&
p
, 
íd
, &
Àn
,

292 
MBEDTLS_ASN1_CONSTRUCTED
 | 
MBEDTLS_ASN1_SEQUENCE
 ) ) != 0 )

293 –
ªt
 );

295 
íd_curve
 = 
p
 + 
Àn
;

301 if––
ªt
 = 
	`mbedés_a¢1_gë_èg
–&
p
, 
íd_curve
, &
Àn
, 
MBEDTLS_ASN1_OCTET_STRING
 ) ) != 0 ||

302 –
ªt
 = 
	`mbedés_mpi_ªad_bö¨y
–&
gΩ
->
A
, 
p
, 
Àn
 ) ) != 0 )

304 –
MBEDTLS_ERR_PK_KEY_INVALID_FORMAT
 + 
ªt
 );

307 
p
 +
Àn
;

309 if––
ªt
 = 
	`mbedés_a¢1_gë_èg
–&
p
, 
íd_curve
, &
Àn
, 
MBEDTLS_ASN1_OCTET_STRING
 ) ) != 0 ||

310 –
ªt
 = 
	`mbedés_mpi_ªad_bö¨y
–&
gΩ
->
B
, 
p
, 
Àn
 ) ) != 0 )

312 –
MBEDTLS_ERR_PK_KEY_INVALID_FORMAT
 + 
ªt
 );

315 
p
 +
Àn
;

318 if––
ªt
 = 
	`mbedés_a¢1_gë_èg
–&
p
, 
íd_curve
, &
Àn
, 
MBEDTLS_ASN1_BIT_STRING
 ) ) == 0 )

319 
p
 +
Àn
;

321 if–
p
 !
íd_curve
 )

322 –
MBEDTLS_ERR_PK_KEY_INVALID_FORMAT
 +

323 
MBEDTLS_ERR_ASN1_LENGTH_MISMATCH
 );

328 if––
ªt
 = 
	`mbedés_a¢1_gë_èg
–&
p
, 
íd
, &
Àn
, 
MBEDTLS_ASN1_OCTET_STRING
 ) ) != 0 )

329 –
MBEDTLS_ERR_PK_KEY_INVALID_FORMAT
 + 
ªt
 );

331 if––
ªt
 = 
	`mbedés_e˝_poöt_ªad_bö¨y
–
gΩ
, &gΩ->
G
,

332 –c⁄° *Ë
p
, 
Àn
 ) ) != 0 )

338 if–
ªt
 !
MBEDTLS_ERR_ECP_FEATURE_UNAVAILABLE
 ||

339 –
p
[0] != 0x02 &&Ö[0] != 0x03 ) ||

340 
Àn
 !
	`mbedés_mpi_size
–&
gΩ
->
P
 ) + 1 ||

341 
	`mbedés_mpi_ªad_bö¨y
–&
gΩ
->
G
.
X
, 
p
 + 1, 
Àn
 - 1 ) != 0 ||

342 
	`mbedés_mpi_l£t
–&
gΩ
->
G
.
Y
, 
p
[0] - 2 ) != 0 ||

343 
	`mbedés_mpi_l£t
–&
gΩ
->
G
.
Z
, 1 ) != 0 )

345 –
MBEDTLS_ERR_PK_KEY_INVALID_FORMAT
 );

349 
p
 +
Àn
;

354 if––
ªt
 = 
	`mbedés_a¢1_gë_mpi
–&
p
, 
íd
, &
gΩ
->
N
 ) ) != 0 )

355 –
MBEDTLS_ERR_PK_KEY_INVALID_FORMAT
 + 
ªt
 );

357 
gΩ
->
nbôs
 = 
	`mbedés_mpi_bôÀn
–&gΩ->
N
 );

364 
	}
}

370 
	$pk_group_id_‰om_group
–c⁄° 
mbedés_e˝_group
 *
gΩ
, 
mbedés_e˝_group_id
 *
gΩ_id
 )

372 
ªt
 = 0;

373 
mbedés_e˝_group
 
ªf
;

374 c⁄° 
mbedés_e˝_group_id
 *
id
;

376 
	`mbedés_e˝_group_öô
–&
ªf
 );

378  
id
 = 
	`mbedés_e˝_gΩ_id_li°
(); *id !
MBEDTLS_ECP_DP_NONE
; id++ )

381 
	`mbedés_e˝_group_‰ì
–&
ªf
 );

382 
	`MBEDTLS_MPI_CHK
–
	`mbedés_e˝_group_lﬂd
–&
ªf
, *
id
 ) );

385 if–
gΩ
->
pbôs
 =
ªf
.pbô†&& gΩ->
nbôs
 ==Ñef.nbits &&

386 
	`mbedés_mpi_cmp_mpi
–&
gΩ
->
P
, &
ªf
.P ) == 0 &&

387 
	`mbedés_mpi_cmp_mpi
–&
gΩ
->
A
, &
ªf
.A ) == 0 &&

388 
	`mbedés_mpi_cmp_mpi
–&
gΩ
->
B
, &
ªf
.B ) == 0 &&

389 
	`mbedés_mpi_cmp_mpi
–&
gΩ
->
N
, &
ªf
.N ) == 0 &&

390 
	`mbedés_mpi_cmp_mpi
–&
gΩ
->
G
.
X
, &
ªf
.G.X ) == 0 &&

391 
	`mbedés_mpi_cmp_mpi
–&
gΩ
->
G
.
Z
, &
ªf
.G.Z ) == 0 &&

393 
	`mbedés_mpi_gë_bô
–&
gΩ
->
G
.
Y
, 0 ) =mbedés_mpi_gë_bô–&
ªf
.G.Y, 0 ) )

400 
˛ónup
:

401 
	`mbedés_e˝_group_‰ì
–&
ªf
 );

403 *
gΩ_id
 = *
id
;

405 if–
ªt
 =0 && *
id
 =
MBEDTLS_ECP_DP_NONE
 )

406 
ªt
 = 
MBEDTLS_ERR_ECP_FEATURE_UNAVAILABLE
;

408 –
ªt
 );

409 
	}
}

414 
	$pk_group_id_‰om_•ecifõd
–c⁄° 
mbedés_a¢1_buf
 *
∑øms
,

415 
mbedés_e˝_group_id
 *
gΩ_id
 )

417 
ªt
;

418 
mbedés_e˝_group
 
gΩ
;

420 
	`mbedés_e˝_group_öô
–&
gΩ
 );

422 if––
ªt
 = 
	`pk_group_‰om_•ecifõd
–
∑øms
, &
gΩ
 ) ) != 0 )

423 
˛ónup
;

425 
ªt
 = 
	`pk_group_id_‰om_group
–&
gΩ
, 
gΩ_id
 );

427 
˛ónup
:

428 
	`mbedés_e˝_group_‰ì
–&
gΩ
 );

430 –
ªt
 );

431 
	}
}

442 
	$pk_u£_e˝¨ams
–c⁄° 
mbedés_a¢1_buf
 *
∑øms
, 
mbedés_e˝_group
 *
gΩ
 )

444 
ªt
;

445 
mbedés_e˝_group_id
 
gΩ_id
;

447 if–
∑øms
->
èg
 =
MBEDTLS_ASN1_OID
 )

449 if–
	`mbedés_oid_gë_ec_gΩ
–
∑øms
, &
gΩ_id
 ) != 0 )

450 –
MBEDTLS_ERR_PK_UNKNOWN_NAMED_CURVE
 );

454 #i‡
	`deföed
(
MBEDTLS_PK_PARSE_EC_EXTENDED
)

455 if––
ªt
 = 
	`pk_group_id_‰om_•ecifõd
–
∑øms
, &
gΩ_id
 ) ) != 0 )

456 –
ªt
 );

458 –
MBEDTLS_ERR_PK_KEY_INVALID_FORMAT
 );

465 if–
gΩ
->
id
 !
MBEDTLS_ECP_DP_NONE
 && gΩ->id !
gΩ_id
 )

466 –
MBEDTLS_ERR_PK_KEY_INVALID_FORMAT
 );

468 if––
ªt
 = 
	`mbedés_e˝_group_lﬂd
–
gΩ
, 
gΩ_id
 ) ) != 0 )

469 –
ªt
 );

472 
	}
}

481 
	$pk_gë_e˝ubkey
–**
p
, c⁄° *
íd
,

482 
mbedés_e˝_key∑ú
 *
key
 )

484 
ªt
;

486 if––
ªt
 = 
	`mbedés_e˝_poöt_ªad_bö¨y
–&
key
->
gΩ
, &key->
Q
,

487 (c⁄° *Ë*
p
, 
íd
 - *p ) ) == 0 )

489 
ªt
 = 
	`mbedés_e˝_check_pubkey
–&
key
->
gΩ
, &key->
Q
 );

495 *
p
 = (*Ë
íd
;

497 –
ªt
 );

498 
	}
}

501 #i‡
deföed
(
MBEDTLS_RSA_C
)

508 
	$pk_gë_rßpubkey
–**
p
,

509 c⁄° *
íd
,

510 
mbedés_rß_c⁄ãxt
 *
rß
 )

512 
ªt
;

513 
size_t
 
Àn
;

515 if––
ªt
 = 
	`mbedés_a¢1_gë_èg
–
p
, 
íd
, &
Àn
,

516 
MBEDTLS_ASN1_CONSTRUCTED
 | 
MBEDTLS_ASN1_SEQUENCE
 ) ) != 0 )

517 –
MBEDTLS_ERR_PK_INVALID_PUBKEY
 + 
ªt
 );

519 if–*
p
 + 
Àn
 !
íd
 )

520 –
MBEDTLS_ERR_PK_INVALID_PUBKEY
 +

521 
MBEDTLS_ERR_ASN1_LENGTH_MISMATCH
 );

523 if––
ªt
 = 
	`mbedés_a¢1_gë_mpi
–
p
, 
íd
, &
rß
->
N
 ) ) != 0 ||

524 –
ªt
 = 
	`mbedés_a¢1_gë_mpi
–
p
, 
íd
, &
rß
->
E
 ) ) != 0 )

525 –
MBEDTLS_ERR_PK_INVALID_PUBKEY
 + 
ªt
 );

527 if–*
p
 !
íd
 )

528 –
MBEDTLS_ERR_PK_INVALID_PUBKEY
 +

529 
MBEDTLS_ERR_ASN1_LENGTH_MISMATCH
 );

531 if––
ªt
 = 
	`mbedés_rß_check_pubkey
–
rß
 ) ) != 0 )

532 –
MBEDTLS_ERR_PK_INVALID_PUBKEY
 );

534 
rß
->
Àn
 = 
	`mbedés_mpi_size
–&rß->
N
 );

537 
	}
}

546 
	$pk_gë_pk_Æg
–**
p
,

547 c⁄° *
íd
,

548 
mbedés_pk_ty≥_t
 *
pk_Æg
, 
mbedés_a¢1_buf
 *
∑øms
 )

550 
ªt
;

551 
mbedés_a¢1_buf
 
Æg_oid
;

553 
	`mem£t
–
∑øms
, 0, (
mbedés_a¢1_buf
) );

555 if––
ªt
 = 
	`mbedés_a¢1_gë_Æg
–
p
, 
íd
, &
Æg_oid
, 
∑øms
 ) ) != 0 )

556 –
MBEDTLS_ERR_PK_INVALID_ALG
 + 
ªt
 );

558 if–
	`mbedés_oid_gë_pk_Æg
–&
Æg_oid
, 
pk_Æg
 ) != 0 )

559 –
MBEDTLS_ERR_PK_UNKNOWN_PK_ALG
 );

564 if–*
pk_Æg
 =
MBEDTLS_PK_RSA
 &&

565 ––
∑øms
->
èg
 !
MBEDTLS_ASN1_NULL
 &&Öarams->tag != 0 ) ||

566 
∑øms
->
Àn
 != 0 ) )

568 –
MBEDTLS_ERR_PK_INVALID_ALG
 );

572 
	}
}

579 
	$mbedés_pk_∑r£_subpubkey
–**
p
, c⁄° *
íd
,

580 
mbedés_pk_c⁄ãxt
 *
pk
 )

582 
ªt
;

583 
size_t
 
Àn
;

584 
mbedés_a¢1_buf
 
Æg_∑øms
;

585 
mbedés_pk_ty≥_t
 
pk_Æg
 = 
MBEDTLS_PK_NONE
;

586 c⁄° 
mbedés_pk_öfo_t
 *
pk_öfo
;

588 if––
ªt
 = 
	`mbedés_a¢1_gë_èg
–
p
, 
íd
, &
Àn
,

589 
MBEDTLS_ASN1_CONSTRUCTED
 | 
MBEDTLS_ASN1_SEQUENCE
 ) ) != 0 )

591 –
MBEDTLS_ERR_PK_KEY_INVALID_FORMAT
 + 
ªt
 );

594 
íd
 = *
p
 + 
Àn
;

596 if––
ªt
 = 
	`pk_gë_pk_Æg
–
p
, 
íd
, &
pk_Æg
, &
Æg_∑øms
 ) ) != 0 )

597 –
ªt
 );

599 if––
ªt
 = 
	`mbedés_a¢1_gë_bô°rög_nuŒ
–
p
, 
íd
, &
Àn
 ) ) != 0 )

600 –
MBEDTLS_ERR_PK_INVALID_PUBKEY
 + 
ªt
 );

602 if–*
p
 + 
Àn
 !
íd
 )

603 –
MBEDTLS_ERR_PK_INVALID_PUBKEY
 +

604 
MBEDTLS_ERR_ASN1_LENGTH_MISMATCH
 );

606 if––
pk_öfo
 = 
	`mbedés_pk_öfo_‰om_ty≥
–
pk_Æg
 ) ) =
NULL
 )

607 –
MBEDTLS_ERR_PK_UNKNOWN_PK_ALG
 );

609 if––
ªt
 = 
	`mbedés_pk_£tup
–
pk
, 
pk_öfo
 ) ) != 0 )

610 –
ªt
 );

612 #i‡
	`deföed
(
MBEDTLS_RSA_C
)

613 if–
pk_Æg
 =
MBEDTLS_PK_RSA
 )

615 
ªt
 = 
	`pk_gë_rßpubkey
–
p
, 
íd
, 
	`mbedés_pk_rß
–*
pk
 ) );

618 #i‡
	`deföed
(
MBEDTLS_ECP_C
)

619 if–
pk_Æg
 =
MBEDTLS_PK_ECKEY_DH
 ||Ök_Æg =
MBEDTLS_PK_ECKEY
 )

621 
ªt
 = 
	`pk_u£_e˝¨ams
–&
Æg_∑øms
, &
	`mbedés_pk_ec
–*
pk
 )->
gΩ
 );

622 if–
ªt
 == 0 )

623 
ªt
 = 
	`pk_gë_e˝ubkey
–
p
, 
íd
, 
	`mbedés_pk_ec
–*
pk
 ) );

626 
ªt
 = 
MBEDTLS_ERR_PK_UNKNOWN_PK_ALG
;

628 if–
ªt
 =0 && *
p
 !
íd
 )

629 
ªt
 = 
MBEDTLS_ERR_PK_INVALID_PUBKEY


630 
MBEDTLS_ERR_ASN1_LENGTH_MISMATCH
;

632 if–
ªt
 != 0 )

633 
	`mbedés_pk_‰ì
–
pk
 );

635 –
ªt
 );

636 
	}
}

638 #i‡
deföed
(
MBEDTLS_RSA_C
)

642 
	$pk_∑r£_key_pkcs1_dî
–
mbedés_rß_c⁄ãxt
 *
rß
,

643 c⁄° *
key
,

644 
size_t
 
keyÀn
 )

646 
ªt
;

647 
size_t
 
Àn
;

648 *
p
, *
íd
;

650 
p
 = (*Ë
key
;

651 
íd
 = 
p
 + 
keyÀn
;

669 if––
ªt
 = 
	`mbedés_a¢1_gë_èg
–&
p
, 
íd
, &
Àn
,

670 
MBEDTLS_ASN1_CONSTRUCTED
 | 
MBEDTLS_ASN1_SEQUENCE
 ) ) != 0 )

672 –
MBEDTLS_ERR_PK_KEY_INVALID_FORMAT
 + 
ªt
 );

675 
íd
 = 
p
 + 
Àn
;

677 if––
ªt
 = 
	`mbedés_a¢1_gë_öt
–&
p
, 
íd
, &
rß
->
vî
 ) ) != 0 )

679 –
MBEDTLS_ERR_PK_KEY_INVALID_FORMAT
 + 
ªt
 );

682 if–
rß
->
vî
 != 0 )

684 –
MBEDTLS_ERR_PK_KEY_INVALID_VERSION
 );

687 if––
ªt
 = 
	`mbedés_a¢1_gë_mpi
–&
p
, 
íd
, &
rß
->
N
 ) ) != 0 ||

688 –
ªt
 = 
	`mbedés_a¢1_gë_mpi
–&
p
, 
íd
, &
rß
->
E
 ) ) != 0 ||

689 –
ªt
 = 
	`mbedés_a¢1_gë_mpi
–&
p
, 
íd
, &
rß
->
D
 ) ) != 0 ||

690 –
ªt
 = 
	`mbedés_a¢1_gë_mpi
–&
p
, 
íd
, &
rß
->
P
 ) ) != 0 ||

691 –
ªt
 = 
	`mbedés_a¢1_gë_mpi
–&
p
, 
íd
, &
rß
->
Q
 ) ) != 0 ||

692 –
ªt
 = 
	`mbedés_a¢1_gë_mpi
–&
p
, 
íd
, &
rß
->
DP
 ) ) != 0 ||

693 –
ªt
 = 
	`mbedés_a¢1_gë_mpi
–&
p
, 
íd
, &
rß
->
DQ
 ) ) != 0 ||

694 –
ªt
 = 
	`mbedés_a¢1_gë_mpi
–&
p
, 
íd
, &
rß
->
QP
 ) ) != 0 )

696 
	`mbedés_rß_‰ì
–
rß
 );

697 –
MBEDTLS_ERR_PK_KEY_INVALID_FORMAT
 + 
ªt
 );

700 
rß
->
Àn
 = 
	`mbedés_mpi_size
–&rß->
N
 );

702 if–
p
 !
íd
 )

704 
	`mbedés_rß_‰ì
–
rß
 );

705 –
MBEDTLS_ERR_PK_KEY_INVALID_FORMAT
 +

706 
MBEDTLS_ERR_ASN1_LENGTH_MISMATCH
 );

709 if––
ªt
 = 
	`mbedés_rß_check_¥ivkey
–
rß
 ) ) != 0 )

711 
	`mbedés_rß_‰ì
–
rß
 );

712 –
ªt
 );

716 
	}
}

719 #i‡
deföed
(
MBEDTLS_ECP_C
)

723 
	$pk_∑r£_key_£c1_dî
–
mbedés_e˝_key∑ú
 *
eck
,

724 c⁄° *
key
,

725 
size_t
 
keyÀn
 )

727 
ªt
;

728 
vîsi⁄
, 
pubkey_d⁄e
;

729 
size_t
 
Àn
;

730 
mbedés_a¢1_buf
 
∑øms
;

731 *
p
 = (*Ë
key
;

732 *
íd
 = 
p
 + 
keyÀn
;

733 *
íd2
;

745 if––
ªt
 = 
	`mbedés_a¢1_gë_èg
–&
p
, 
íd
, &
Àn
,

746 
MBEDTLS_ASN1_CONSTRUCTED
 | 
MBEDTLS_ASN1_SEQUENCE
 ) ) != 0 )

748 –
MBEDTLS_ERR_PK_KEY_INVALID_FORMAT
 + 
ªt
 );

751 
íd
 = 
p
 + 
Àn
;

753 if––
ªt
 = 
	`mbedés_a¢1_gë_öt
–&
p
, 
íd
, &
vîsi⁄
 ) ) != 0 )

754 –
MBEDTLS_ERR_PK_KEY_INVALID_FORMAT
 + 
ªt
 );

756 if–
vîsi⁄
 != 1 )

757 –
MBEDTLS_ERR_PK_KEY_INVALID_VERSION
 );

759 if––
ªt
 = 
	`mbedés_a¢1_gë_èg
–&
p
, 
íd
, &
Àn
, 
MBEDTLS_ASN1_OCTET_STRING
 ) ) != 0 )

760 –
MBEDTLS_ERR_PK_KEY_INVALID_FORMAT
 + 
ªt
 );

762 if––
ªt
 = 
	`mbedés_mpi_ªad_bö¨y
–&
eck
->
d
, 
p
, 
Àn
 ) ) != 0 )

764 
	`mbedés_e˝_key∑ú_‰ì
–
eck
 );

765 –
MBEDTLS_ERR_PK_KEY_INVALID_FORMAT
 + 
ªt
 );

768 
p
 +
Àn
;

770 
pubkey_d⁄e
 = 0;

771 if–
p
 !
íd
 )

776 if––
ªt
 = 
	`mbedés_a¢1_gë_èg
–&
p
, 
íd
, &
Àn
,

777 
MBEDTLS_ASN1_CONTEXT_SPECIFIC
 | 
MBEDTLS_ASN1_CONSTRUCTED
 | 0 ) ) == 0 )

779 if––
ªt
 = 
	`pk_gë_e˝¨ams
–&
p
,Ö + 
Àn
, &
∑øms
) ) != 0 ||

780 –
ªt
 = 
	`pk_u£_e˝¨ams
–&
∑øms
, &
eck
->
gΩ
 ) ) != 0 )

782 
	`mbedés_e˝_key∑ú_‰ì
–
eck
 );

783 –
ªt
 );

786 if–
ªt
 !
MBEDTLS_ERR_ASN1_UNEXPECTED_TAG
 )

788 
	`mbedés_e˝_key∑ú_‰ì
–
eck
 );

789 –
MBEDTLS_ERR_PK_KEY_INVALID_FORMAT
 + 
ªt
 );

796 if––
ªt
 = 
	`mbedés_a¢1_gë_èg
–&
p
, 
íd
, &
Àn
,

797 
MBEDTLS_ASN1_CONTEXT_SPECIFIC
 | 
MBEDTLS_ASN1_CONSTRUCTED
 | 1 ) ) == 0 )

799 
íd2
 = 
p
 + 
Àn
;

801 if––
ªt
 = 
	`mbedés_a¢1_gë_bô°rög_nuŒ
–&
p
, 
íd2
, &
Àn
 ) ) != 0 )

802 –
MBEDTLS_ERR_PK_KEY_INVALID_FORMAT
 + 
ªt
 );

804 if–
p
 + 
Àn
 !
íd2
 )

805 –
MBEDTLS_ERR_PK_KEY_INVALID_FORMAT
 +

806 
MBEDTLS_ERR_ASN1_LENGTH_MISMATCH
 );

808 if––
ªt
 = 
	`pk_gë_e˝ubkey
–&
p
, 
íd2
, 
eck
 ) ) == 0 )

809 
pubkey_d⁄e
 = 1;

816 if–
ªt
 !
MBEDTLS_ERR_ECP_FEATURE_UNAVAILABLE
 )

817 –
MBEDTLS_ERR_PK_KEY_INVALID_FORMAT
 );

820 if–
ªt
 !
MBEDTLS_ERR_ASN1_UNEXPECTED_TAG
 )

822 
	`mbedés_e˝_key∑ú_‰ì
–
eck
 );

823 –
MBEDTLS_ERR_PK_KEY_INVALID_FORMAT
 + 
ªt
 );

827 if–! 
pubkey_d⁄e
 &&

828 –
ªt
 = 
	`mbedés_e˝_mul
–&
eck
->
gΩ
, &eck->
Q
, &eck->
d
, &eck->gΩ.
G
,

829 
NULL
, NULL ) ) != 0 )

831 
	`mbedés_e˝_key∑ú_‰ì
–
eck
 );

832 –
MBEDTLS_ERR_PK_KEY_INVALID_FORMAT
 + 
ªt
 );

835 if––
ªt
 = 
	`mbedés_e˝_check_¥ivkey
–&
eck
->
gΩ
, &eck->
d
 ) ) != 0 )

837 
	`mbedés_e˝_key∑ú_‰ì
–
eck
 );

838 –
ªt
 );

842 
	}
}

848 
	$pk_∑r£_key_pkcs8_u√n¸y±ed_dî
(

849 
mbedés_pk_c⁄ãxt
 *
pk
,

850 c⁄° * 
key
,

851 
size_t
 
keyÀn
 )

853 
ªt
, 
vîsi⁄
;

854 
size_t
 
Àn
;

855 
mbedés_a¢1_buf
 
∑øms
;

856 *
p
 = (*Ë
key
;

857 *
íd
 = 
p
 + 
keyÀn
;

858 
mbedés_pk_ty≥_t
 
pk_Æg
 = 
MBEDTLS_PK_NONE
;

859 c⁄° 
mbedés_pk_öfo_t
 *
pk_öfo
;

877 if––
ªt
 = 
	`mbedés_a¢1_gë_èg
–&
p
, 
íd
, &
Àn
,

878 
MBEDTLS_ASN1_CONSTRUCTED
 | 
MBEDTLS_ASN1_SEQUENCE
 ) ) != 0 )

880 –
MBEDTLS_ERR_PK_KEY_INVALID_FORMAT
 + 
ªt
 );

883 
íd
 = 
p
 + 
Àn
;

885 if––
ªt
 = 
	`mbedés_a¢1_gë_öt
–&
p
, 
íd
, &
vîsi⁄
 ) ) != 0 )

886 –
MBEDTLS_ERR_PK_KEY_INVALID_FORMAT
 + 
ªt
 );

888 if–
vîsi⁄
 != 0 )

889 –
MBEDTLS_ERR_PK_KEY_INVALID_VERSION
 + 
ªt
 );

891 if––
ªt
 = 
	`pk_gë_pk_Æg
–&
p
, 
íd
, &
pk_Æg
, &
∑øms
 ) ) != 0 )

892 –
MBEDTLS_ERR_PK_KEY_INVALID_FORMAT
 + 
ªt
 );

894 if––
ªt
 = 
	`mbedés_a¢1_gë_èg
–&
p
, 
íd
, &
Àn
, 
MBEDTLS_ASN1_OCTET_STRING
 ) ) != 0 )

895 –
MBEDTLS_ERR_PK_KEY_INVALID_FORMAT
 + 
ªt
 );

897 if–
Àn
 < 1 )

898 –
MBEDTLS_ERR_PK_KEY_INVALID_FORMAT
 +

899 
MBEDTLS_ERR_ASN1_OUT_OF_DATA
 );

901 if––
pk_öfo
 = 
	`mbedés_pk_öfo_‰om_ty≥
–
pk_Æg
 ) ) =
NULL
 )

902 –
MBEDTLS_ERR_PK_UNKNOWN_PK_ALG
 );

904 if––
ªt
 = 
	`mbedés_pk_£tup
–
pk
, 
pk_öfo
 ) ) != 0 )

905 –
ªt
 );

907 #i‡
	`deföed
(
MBEDTLS_RSA_C
)

908 if–
pk_Æg
 =
MBEDTLS_PK_RSA
 )

910 if––
ªt
 = 
	`pk_∑r£_key_pkcs1_dî
–
	`mbedés_pk_rß
–*
pk
 ), 
p
, 
Àn
 ) ) != 0 )

912 
	`mbedés_pk_‰ì
–
pk
 );

913 –
ªt
 );

917 #i‡
	`deföed
(
MBEDTLS_ECP_C
)

918 if–
pk_Æg
 =
MBEDTLS_PK_ECKEY
 ||Ök_Æg =
MBEDTLS_PK_ECKEY_DH
 )

920 if––
ªt
 = 
	`pk_u£_e˝¨ams
–&
∑øms
, &
	`mbedés_pk_ec
–*
pk
 )->
gΩ
 ) ) != 0 ||

921 –
ªt
 = 
	`pk_∑r£_key_£c1_dî
–
	`mbedés_pk_ec
–*
pk
 ), 
p
, 
Àn
 ) ) != 0 )

923 
	`mbedés_pk_‰ì
–
pk
 );

924 –
ªt
 );

928 –
MBEDTLS_ERR_PK_UNKNOWN_PK_ALG
 );

931 
	}
}

936 #i‡
deföed
(
MBEDTLS_PKCS12_C
Ë|| deföed(
MBEDTLS_PKCS5_C
)

937 
	$pk_∑r£_key_pkcs8_í¸y±ed_dî
(

938 
mbedés_pk_c⁄ãxt
 *
pk
,

939 c⁄° *
key
, 
size_t
 
keyÀn
,

940 c⁄° *
pwd
, 
size_t
 
pwdÀn
 )

942 
ªt
, 
de¸y±ed
 = 0;

943 
size_t
 
Àn
;

944 
buf
[2048];

945 *
p
, *
íd
;

946 
mbedés_a¢1_buf
 
pbe_Æg_oid
, 
pbe_∑øms
;

947 #i‡
	`deföed
(
MBEDTLS_PKCS12_C
)

948 
mbedés_cùhî_ty≥_t
 
cùhî_Æg
;

949 
mbedés_md_ty≥_t
 
md_Æg
;

952 
	`mem£t
–
buf
, 0, ( buf ) );

954 
p
 = (*Ë
key
;

955 
íd
 = 
p
 + 
keyÀn
;

957 if–
pwdÀn
 == 0 )

958 –
MBEDTLS_ERR_PK_PASSWORD_REQUIRED
 );

974 if––
ªt
 = 
	`mbedés_a¢1_gë_èg
–&
p
, 
íd
, &
Àn
,

975 
MBEDTLS_ASN1_CONSTRUCTED
 | 
MBEDTLS_ASN1_SEQUENCE
 ) ) != 0 )

977 –
MBEDTLS_ERR_PK_KEY_INVALID_FORMAT
 + 
ªt
 );

980 
íd
 = 
p
 + 
Àn
;

982 if––
ªt
 = 
	`mbedés_a¢1_gë_Æg
–&
p
, 
íd
, &
pbe_Æg_oid
, &
pbe_∑øms
 ) ) != 0 )

983 –
MBEDTLS_ERR_PK_KEY_INVALID_FORMAT
 + 
ªt
 );

985 if––
ªt
 = 
	`mbedés_a¢1_gë_èg
–&
p
, 
íd
, &
Àn
, 
MBEDTLS_ASN1_OCTET_STRING
 ) ) != 0 )

986 –
MBEDTLS_ERR_PK_KEY_INVALID_FORMAT
 + 
ªt
 );

988 if–
Àn
 > –
buf
 ) )

989 –
MBEDTLS_ERR_PK_BAD_INPUT_DATA
 );

994 #i‡
	`deföed
(
MBEDTLS_PKCS12_C
)

995 if–
	`mbedés_oid_gë_pkcs12_pbe_Æg
–&
pbe_Æg_oid
, &
md_Æg
, &
cùhî_Æg
 ) == 0 )

997 if––
ªt
 = 
	`mbedés_pkcs12_pbe
–&
pbe_∑øms
, 
MBEDTLS_PKCS12_PBE_DECRYPT
,

998 
cùhî_Æg
, 
md_Æg
,

999 
pwd
, 
pwdÀn
, 
p
, 
Àn
, 
buf
 ) ) != 0 )

1001 if–
ªt
 =
MBEDTLS_ERR_PKCS12_PASSWORD_MISMATCH
 )

1002 –
MBEDTLS_ERR_PK_PASSWORD_MISMATCH
 );

1004 –
ªt
 );

1007 
de¸y±ed
 = 1;

1009 if–
	`MBEDTLS_OID_CMP
–
MBEDTLS_OID_PKCS12_PBE_SHA1_RC4_128
, &
pbe_Æg_oid
 ) == 0 )

1011 if––
ªt
 = 
	`mbedés_pkcs12_pbe_sha1_rc4_128
–&
pbe_∑øms
,

1012 
MBEDTLS_PKCS12_PBE_DECRYPT
,

1013 
pwd
, 
pwdÀn
,

1014 
p
, 
Àn
, 
buf
 ) ) != 0 )

1016 –
ªt
 );

1022 if–*
buf
 !–
MBEDTLS_ASN1_CONSTRUCTED
 | 
MBEDTLS_ASN1_SEQUENCE
 ) )

1023 –
MBEDTLS_ERR_PK_PASSWORD_MISMATCH
 );

1025 
de¸y±ed
 = 1;

1029 #i‡
	`deföed
(
MBEDTLS_PKCS5_C
)

1030 if–
	`MBEDTLS_OID_CMP
–
MBEDTLS_OID_PKCS5_PBES2
, &
pbe_Æg_oid
 ) == 0 )

1032 if––
ªt
 = 
	`mbedés_pkcs5_pbes2
–&
pbe_∑øms
, 
MBEDTLS_PKCS5_DECRYPT
, 
pwd
, 
pwdÀn
,

1033 
p
, 
Àn
, 
buf
 ) ) != 0 )

1035 if–
ªt
 =
MBEDTLS_ERR_PKCS5_PASSWORD_MISMATCH
 )

1036 –
MBEDTLS_ERR_PK_PASSWORD_MISMATCH
 );

1038 –
ªt
 );

1041 
de¸y±ed
 = 1;

1046 ((Ë
pwd
);

1049 if–
de¸y±ed
 == 0 )

1050 –
MBEDTLS_ERR_PK_FEATURE_UNAVAILABLE
 );

1052 –
	`pk_∑r£_key_pkcs8_u√n¸y±ed_dî
–
pk
, 
buf
, 
Àn
 ) );

1053 
	}
}

1059 
	$mbedés_pk_∑r£_key
–
mbedés_pk_c⁄ãxt
 *
pk
,

1060 c⁄° *
key
, 
size_t
 
keyÀn
,

1061 c⁄° *
pwd
, 
size_t
 
pwdÀn
 )

1063 
ªt
;

1064 c⁄° 
mbedés_pk_öfo_t
 *
pk_öfo
;

1066 #i‡
	`deföed
(
MBEDTLS_PEM_PARSE_C
)

1067 
size_t
 
Àn
;

1068 
mbedés_≥m_c⁄ãxt
 
≥m
;

1070 
	`mbedés_≥m_öô
–&
≥m
 );

1072 #i‡
	`deföed
(
MBEDTLS_RSA_C
)

1074 if–
keyÀn
 =0 || 
key
[keylen - 1] != '\0' )

1075 
ªt
 = 
MBEDTLS_ERR_PEM_NO_HEADER_FOOTER_PRESENT
;

1077 
ªt
 = 
	`mbedés_≥m_ªad_buf„r
–&
≥m
,

1080 
key
, 
pwd
, 
pwdÀn
, &
Àn
 );

1082 if–
ªt
 == 0 )

1084 if––
pk_öfo
 = 
	`mbedés_pk_öfo_‰om_ty≥
–
MBEDTLS_PK_RSA
 ) ) =
NULL
 )

1085 –
MBEDTLS_ERR_PK_UNKNOWN_PK_ALG
 );

1087 if––
ªt
 = 
	`mbedés_pk_£tup
–
pk
, 
pk_öfo
 ) ) != 0 ||

1088 –
ªt
 = 
	`pk_∑r£_key_pkcs1_dî
–
	`mbedés_pk_rß
–*
pk
 ),

1089 
≥m
.
buf
,Öem.
buÊí
 ) ) != 0 )

1091 
	`mbedés_pk_‰ì
–
pk
 );

1094 
	`mbedés_≥m_‰ì
–&
≥m
 );

1095 –
ªt
 );

1097 if–
ªt
 =
MBEDTLS_ERR_PEM_PASSWORD_MISMATCH
 )

1098 –
MBEDTLS_ERR_PK_PASSWORD_MISMATCH
 );

1099 if–
ªt
 =
MBEDTLS_ERR_PEM_PASSWORD_REQUIRED
 )

1100 –
MBEDTLS_ERR_PK_PASSWORD_REQUIRED
 );

1101 if–
ªt
 !
MBEDTLS_ERR_PEM_NO_HEADER_FOOTER_PRESENT
 )

1102 –
ªt
 );

1105 #i‡
	`deföed
(
MBEDTLS_ECP_C
)

1107 if–
keyÀn
 =0 || 
key
[keylen - 1] != '\0' )

1108 
ªt
 = 
MBEDTLS_ERR_PEM_NO_HEADER_FOOTER_PRESENT
;

1110 
ªt
 = 
	`mbedés_≥m_ªad_buf„r
–&
≥m
,

1113 
key
, 
pwd
, 
pwdÀn
, &
Àn
 );

1114 if–
ªt
 == 0 )

1116 if––
pk_öfo
 = 
	`mbedés_pk_öfo_‰om_ty≥
–
MBEDTLS_PK_ECKEY
 ) ) =
NULL
 )

1117 –
MBEDTLS_ERR_PK_UNKNOWN_PK_ALG
 );

1119 if––
ªt
 = 
	`mbedés_pk_£tup
–
pk
, 
pk_öfo
 ) ) != 0 ||

1120 –
ªt
 = 
	`pk_∑r£_key_£c1_dî
–
	`mbedés_pk_ec
–*
pk
 ),

1121 
≥m
.
buf
,Öem.
buÊí
 ) ) != 0 )

1123 
	`mbedés_pk_‰ì
–
pk
 );

1126 
	`mbedés_≥m_‰ì
–&
≥m
 );

1127 –
ªt
 );

1129 if–
ªt
 =
MBEDTLS_ERR_PEM_PASSWORD_MISMATCH
 )

1130 –
MBEDTLS_ERR_PK_PASSWORD_MISMATCH
 );

1131 if–
ªt
 =
MBEDTLS_ERR_PEM_PASSWORD_REQUIRED
 )

1132 –
MBEDTLS_ERR_PK_PASSWORD_REQUIRED
 );

1133 if–
ªt
 !
MBEDTLS_ERR_PEM_NO_HEADER_FOOTER_PRESENT
 )

1134 –
ªt
 );

1138 if–
keyÀn
 =0 || 
key
[keylen - 1] != '\0' )

1139 
ªt
 = 
MBEDTLS_ERR_PEM_NO_HEADER_FOOTER_PRESENT
;

1141 
ªt
 = 
	`mbedés_≥m_ªad_buf„r
–&
≥m
,

1144 
key
, 
NULL
, 0, &
Àn
 );

1145 if–
ªt
 == 0 )

1147 if––
ªt
 = 
	`pk_∑r£_key_pkcs8_u√n¸y±ed_dî
–
pk
,

1148 
≥m
.
buf
,Öem.
buÊí
 ) ) != 0 )

1150 
	`mbedés_pk_‰ì
–
pk
 );

1153 
	`mbedés_≥m_‰ì
–&
≥m
 );

1154 –
ªt
 );

1156 if–
ªt
 !
MBEDTLS_ERR_PEM_NO_HEADER_FOOTER_PRESENT
 )

1157 –
ªt
 );

1159 #i‡
	`deföed
(
MBEDTLS_PKCS12_C
Ë|| deföed(
MBEDTLS_PKCS5_C
)

1161 if–
keyÀn
 =0 || 
key
[keylen - 1] != '\0' )

1162 
ªt
 = 
MBEDTLS_ERR_PEM_NO_HEADER_FOOTER_PRESENT
;

1164 
ªt
 = 
	`mbedés_≥m_ªad_buf„r
–&
≥m
,

1167 
key
, 
NULL
, 0, &
Àn
 );

1168 if–
ªt
 == 0 )

1170 if––
ªt
 = 
	`pk_∑r£_key_pkcs8_í¸y±ed_dî
–
pk
,

1171 
≥m
.
buf
,Öem.
buÊí
,

1172 
pwd
, 
pwdÀn
 ) ) != 0 )

1174 
	`mbedés_pk_‰ì
–
pk
 );

1177 
	`mbedés_≥m_‰ì
–&
≥m
 );

1178 –
ªt
 );

1180 if–
ªt
 !
MBEDTLS_ERR_PEM_NO_HEADER_FOOTER_PRESENT
 )

1181 –
ªt
 );

1184 ((Ë
ªt
);

1185 ((Ë
pwd
);

1186 ((Ë
pwdÀn
);

1196 #i‡
	`deföed
(
MBEDTLS_PKCS12_C
Ë|| deföed(
MBEDTLS_PKCS5_C
)

1197 if––
ªt
 = 
	`pk_∑r£_key_pkcs8_í¸y±ed_dî
–
pk
, 
key
, 
keyÀn
,

1198 
pwd
, 
pwdÀn
 ) ) == 0 )

1203 
	`mbedés_pk_‰ì
–
pk
 );

1205 if–
ªt
 =
MBEDTLS_ERR_PK_PASSWORD_MISMATCH
 )

1207 –
ªt
 );

1211 if––
ªt
 = 
	`pk_∑r£_key_pkcs8_u√n¸y±ed_dî
–
pk
, 
key
, 
keyÀn
 ) ) == 0 )

1214 
	`mbedés_pk_‰ì
–
pk
 );

1216 #i‡
	`deföed
(
MBEDTLS_RSA_C
)

1217 if––
pk_öfo
 = 
	`mbedés_pk_öfo_‰om_ty≥
–
MBEDTLS_PK_RSA
 ) ) =
NULL
 )

1218 –
MBEDTLS_ERR_PK_UNKNOWN_PK_ALG
 );

1220 if––
ªt
 = 
	`mbedés_pk_£tup
–
pk
, 
pk_öfo
 ) ) != 0 ||

1221 –
ªt
 = 
	`pk_∑r£_key_pkcs1_dî
–
	`mbedés_pk_rß
–*
pk
 ), 
key
, 
keyÀn
 ) ) == 0 )

1226 
	`mbedés_pk_‰ì
–
pk
 );

1229 #i‡
	`deföed
(
MBEDTLS_ECP_C
)

1230 if––
pk_öfo
 = 
	`mbedés_pk_öfo_‰om_ty≥
–
MBEDTLS_PK_ECKEY
 ) ) =
NULL
 )

1231 –
MBEDTLS_ERR_PK_UNKNOWN_PK_ALG
 );

1233 if––
ªt
 = 
	`mbedés_pk_£tup
–
pk
, 
pk_öfo
 ) ) != 0 ||

1234 –
ªt
 = 
	`pk_∑r£_key_£c1_dî
–
	`mbedés_pk_ec
–*
pk
 ), 
key
, 
keyÀn
 ) ) == 0 )

1239 
	`mbedés_pk_‰ì
–
pk
 );

1242 –
MBEDTLS_ERR_PK_KEY_INVALID_FORMAT
 );

1243 
	}
}

1248 
	$mbedés_pk_∑r£_public_key
–
mbedés_pk_c⁄ãxt
 *
˘x
,

1249 c⁄° *
key
, 
size_t
 
keyÀn
 )

1251 
ªt
;

1252 *
p
;

1253 #i‡
	`deföed
(
MBEDTLS_PEM_PARSE_C
)

1254 
size_t
 
Àn
;

1255 
mbedés_≥m_c⁄ãxt
 
≥m
;

1257 
	`mbedés_≥m_öô
–&
≥m
 );

1260 if–
keyÀn
 =0 || 
key
[keylen - 1] != '\0' )

1261 
ªt
 = 
MBEDTLS_ERR_PEM_NO_HEADER_FOOTER_PRESENT
;

1263 
ªt
 = 
	`mbedés_≥m_ªad_buf„r
–&
≥m
,

1266 
key
, 
NULL
, 0, &
Àn
 );

1268 if–
ªt
 == 0 )

1273 
key
 = 
≥m
.
buf
;

1274 
keyÀn
 = 
≥m
.
buÊí
;

1276 if–
ªt
 !
MBEDTLS_ERR_PEM_NO_HEADER_FOOTER_PRESENT
 )

1278 
	`mbedés_≥m_‰ì
–&
≥m
 );

1279 –
ªt
 );

1282 
p
 = (*Ë
key
;

1284 
ªt
 = 
	`mbedés_pk_∑r£_subpubkey
–&
p
,Ö + 
keyÀn
, 
˘x
 );

1286 #i‡
	`deföed
(
MBEDTLS_PEM_PARSE_C
)

1287 
	`mbedés_≥m_‰ì
–&
≥m
 );

1290 –
ªt
 );

1291 
	}
}

	@/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/pkwrite.c

22 #i‡!
deföed
(
MBEDTLS_CONFIG_FILE
)

23 
	~"mbedés/c⁄fig.h
"

25 #ö˛udê
MBEDTLS_CONFIG_FILE


28 #i‡
deföed
(
MBEDTLS_PK_WRITE_C
)

30 
	~"mbedés/pk.h
"

31 
	~"mbedés/a¢1wrôe.h
"

32 
	~"mbedés/oid.h
"

34 
	~<°rög.h
>

36 #i‡
deföed
(
MBEDTLS_RSA_C
)

37 
	~"mbedés/rß.h
"

39 #i‡
deföed
(
MBEDTLS_ECP_C
)

40 
	~"mbedés/e˝.h
"

42 #i‡
deföed
(
MBEDTLS_ECDSA_C
)

43 
	~"mbedés/ecdß.h
"

45 #i‡
deföed
(
MBEDTLS_PEM_WRITE_C
)

46 
	~"mbedés/≥m.h
"

49 #i‡
deföed
(
MBEDTLS_PLATFORM_C
)

50 
	~"mbedés/∂©f‹m.h
"

52 
	~<°dlib.h
>

53 
	#mbedés_ˇŒoc
 
ˇŒoc


	)

54 
	#mbedés_‰ì
 
‰ì


	)

57 #i‡
deföed
(
MBEDTLS_RSA_C
)

64 
	$pk_wrôe_rß_pubkey
–**
p
, *
°¨t
,

65 
mbedés_rß_c⁄ãxt
 *
rß
 )

67 
ªt
;

68 
size_t
 
Àn
 = 0;

70 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_mpi
–
p
, 
°¨t
, &
rß
->
E
 ) );

71 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_mpi
–
p
, 
°¨t
, &
rß
->
N
 ) );

73 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_Àn
–
p
, 
°¨t
,Üen ) );

74 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_èg
–
p
, 
°¨t
, 
MBEDTLS_ASN1_CONSTRUCTED
 |

75 
MBEDTLS_ASN1_SEQUENCE
 ) );

77 –(Ë
Àn
 );

78 
	}
}

81 #i‡
deföed
(
MBEDTLS_ECP_C
)

85 
	$pk_wrôe_ec_pubkey
–**
p
, *
°¨t
,

86 
mbedés_e˝_key∑ú
 *
ec
 )

88 
ªt
;

89 
size_t
 
Àn
 = 0;

90 
buf
[
MBEDTLS_ECP_MAX_PT_LEN
];

92 if––
ªt
 = 
	`mbedés_e˝_poöt_wrôe_bö¨y
–&
ec
->
gΩ
, &ec->
Q
,

93 
MBEDTLS_ECP_PF_UNCOMPRESSED
,

94 &
Àn
, 
buf
, ( buf ) ) ) != 0 )

96 –
ªt
 );

99 if–*
p
 < 
°¨t
 || (
size_t
)–*∞- sèπ ) < 
Àn
 )

100 –
MBEDTLS_ERR_ASN1_BUF_TOO_SMALL
 );

102 *
p
 -
Àn
;

103 
	`mem˝y
–*
p
, 
buf
, 
Àn
 );

105 –(Ë
Àn
 );

106 
	}
}

113 
	$pk_wrôe_ec_∑øm
–**
p
, *
°¨t
,

114 
mbedés_e˝_key∑ú
 *
ec
 )

116 
ªt
;

117 
size_t
 
Àn
 = 0;

118 c⁄° *
oid
;

119 
size_t
 
oid_Àn
;

121 if––
ªt
 = 
	`mbedés_oid_gë_oid_by_ec_gΩ
–
ec
->
gΩ
.
id
, &
oid
, &
oid_Àn
 ) ) != 0 )

122 –
ªt
 );

124 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_oid
–
p
, 
°¨t
, 
oid
, 
oid_Àn
 ) );

126 –(Ë
Àn
 );

127 
	}
}

130 
	$mbedés_pk_wrôe_pubkey
–**
p
, *
°¨t
,

131 c⁄° 
mbedés_pk_c⁄ãxt
 *
key
 )

133 
ªt
;

134 
size_t
 
Àn
 = 0;

136 #i‡
	`deföed
(
MBEDTLS_RSA_C
)

137 if–
	`mbedés_pk_gë_ty≥
–
key
 ) =
MBEDTLS_PK_RSA
 )

138 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`pk_wrôe_rß_pubkey
–
p
, 
°¨t
, 
	`mbedés_pk_rß
–*
key
 ) ) );

141 #i‡
	`deföed
(
MBEDTLS_ECP_C
)

142 if–
	`mbedés_pk_gë_ty≥
–
key
 ) =
MBEDTLS_PK_ECKEY
 )

143 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`pk_wrôe_ec_pubkey
–
p
, 
°¨t
, 
	`mbedés_pk_ec
–*
key
 ) ) );

146 –
MBEDTLS_ERR_PK_FEATURE_UNAVAILABLE
 );

148 –(Ë
Àn
 );

149 
	}
}

151 
	$mbedés_pk_wrôe_pubkey_dî
–
mbedés_pk_c⁄ãxt
 *
key
, *
buf
, 
size_t
 
size
 )

153 
ªt
;

154 *
c
;

155 
size_t
 
Àn
 = 0, 
∑r_Àn
 = 0, 
oid_Àn
;

156 c⁄° *
oid
;

158 
c
 = 
buf
 + 
size
;

160 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_pk_wrôe_pubkey
–&
c
, 
buf
, 
key
 ) );

162 if–
c
 - 
buf
 < 1 )

163 –
MBEDTLS_ERR_ASN1_BUF_TOO_SMALL
 );

170 *--
c
 = 0;

171 
Àn
 += 1;

173 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_Àn
–&
c
, 
buf
,Üen ) );

174 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_èg
–&
c
, 
buf
, 
MBEDTLS_ASN1_BIT_STRING
 ) );

176 if––
ªt
 = 
	`mbedés_oid_gë_oid_by_pk_Æg
–
	`mbedés_pk_gë_ty≥
–
key
 ),

177 &
oid
, &
oid_Àn
 ) ) != 0 )

179 –
ªt
 );

182 #i‡
	`deföed
(
MBEDTLS_ECP_C
)

183 if–
	`mbedés_pk_gë_ty≥
–
key
 ) =
MBEDTLS_PK_ECKEY
 )

185 
	`MBEDTLS_ASN1_CHK_ADD
–
∑r_Àn
, 
	`pk_wrôe_ec_∑øm
–&
c
, 
buf
, 
	`mbedés_pk_ec
–*
key
 ) ) );

189 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_Æg‹ôhm_idítifõr
–&
c
, 
buf
, 
oid
, 
oid_Àn
,

190 
∑r_Àn
 ) );

192 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_Àn
–&
c
, 
buf
,Üen ) );

193 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_èg
–&
c
, 
buf
, 
MBEDTLS_ASN1_CONSTRUCTED
 |

194 
MBEDTLS_ASN1_SEQUENCE
 ) );

196 –(Ë
Àn
 );

197 
	}
}

199 
	$mbedés_pk_wrôe_key_dî
–
mbedés_pk_c⁄ãxt
 *
key
, *
buf
, 
size_t
 
size
 )

201 
ªt
;

202 *
c
 = 
buf
 + 
size
;

203 
size_t
 
Àn
 = 0;

205 #i‡
	`deföed
(
MBEDTLS_RSA_C
)

206 if–
	`mbedés_pk_gë_ty≥
–
key
 ) =
MBEDTLS_PK_RSA
 )

208 
mbedés_rß_c⁄ãxt
 *
rß
 = 
	`mbedés_pk_rß
–*
key
 );

210 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_mpi
–&
c
, 
buf
, &
rß
->
QP
 ) );

211 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_mpi
–&
c
, 
buf
, &
rß
->
DQ
 ) );

212 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_mpi
–&
c
, 
buf
, &
rß
->
DP
 ) );

213 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_mpi
–&
c
, 
buf
, &
rß
->
Q
 ) );

214 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_mpi
–&
c
, 
buf
, &
rß
->
P
 ) );

215 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_mpi
–&
c
, 
buf
, &
rß
->
D
 ) );

216 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_mpi
–&
c
, 
buf
, &
rß
->
E
 ) );

217 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_mpi
–&
c
, 
buf
, &
rß
->
N
 ) );

218 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_öt
–&
c
, 
buf
, 0 ) );

220 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_Àn
–&
c
, 
buf
,Üen ) );

221 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_èg
–&
c
, 
buf
, 
MBEDTLS_ASN1_CONSTRUCTED
 |

222 
MBEDTLS_ASN1_SEQUENCE
 ) );

226 #i‡
	`deföed
(
MBEDTLS_ECP_C
)

227 if–
	`mbedés_pk_gë_ty≥
–
key
 ) =
MBEDTLS_PK_ECKEY
 )

229 
mbedés_e˝_key∑ú
 *
ec
 = 
	`mbedés_pk_ec
–*
key
 );

230 
size_t
 
pub_Àn
 = 0, 
∑r_Àn
 = 0;

244 
	`MBEDTLS_ASN1_CHK_ADD
–
pub_Àn
, 
	`pk_wrôe_ec_pubkey
–&
c
, 
buf
, 
ec
 ) );

246 if–
c
 - 
buf
 < 1 )

247 –
MBEDTLS_ERR_ASN1_BUF_TOO_SMALL
 );

248 *--
c
 = 0;

249 
pub_Àn
 += 1;

251 
	`MBEDTLS_ASN1_CHK_ADD
–
pub_Àn
, 
	`mbedés_a¢1_wrôe_Àn
–&
c
, 
buf
,Öub_len ) );

252 
	`MBEDTLS_ASN1_CHK_ADD
–
pub_Àn
, 
	`mbedés_a¢1_wrôe_èg
–&
c
, 
buf
, 
MBEDTLS_ASN1_BIT_STRING
 ) );

254 
	`MBEDTLS_ASN1_CHK_ADD
–
pub_Àn
, 
	`mbedés_a¢1_wrôe_Àn
–&
c
, 
buf
,Öub_len ) );

255 
	`MBEDTLS_ASN1_CHK_ADD
–
pub_Àn
, 
	`mbedés_a¢1_wrôe_èg
–&
c
, 
buf
,

256 
MBEDTLS_ASN1_CONTEXT_SPECIFIC
 | 
MBEDTLS_ASN1_CONSTRUCTED
 | 1 ) );

257 
Àn
 +
pub_Àn
;

260 
	`MBEDTLS_ASN1_CHK_ADD
–
∑r_Àn
, 
	`pk_wrôe_ec_∑øm
–&
c
, 
buf
, 
ec
 ) );

262 
	`MBEDTLS_ASN1_CHK_ADD
–
∑r_Àn
, 
	`mbedés_a¢1_wrôe_Àn
–&
c
, 
buf
,Öar_len ) );

263 
	`MBEDTLS_ASN1_CHK_ADD
–
∑r_Àn
, 
	`mbedés_a¢1_wrôe_èg
–&
c
, 
buf
,

264 
MBEDTLS_ASN1_CONTEXT_SPECIFIC
 | 
MBEDTLS_ASN1_CONSTRUCTED
 | 0 ) );

265 
Àn
 +
∑r_Àn
;

268 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_mpi
–&
c
, 
buf
, &
ec
->
d
 ) );

269 *
c
 = 
MBEDTLS_ASN1_OCTET_STRING
;

272 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_öt
–&
c
, 
buf
, 1 ) );

274 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_Àn
–&
c
, 
buf
,Üen ) );

275 
	`MBEDTLS_ASN1_CHK_ADD
–
Àn
, 
	`mbedés_a¢1_wrôe_èg
–&
c
, 
buf
, 
MBEDTLS_ASN1_CONSTRUCTED
 |

276 
MBEDTLS_ASN1_SEQUENCE
 ) );

280 –
MBEDTLS_ERR_PK_FEATURE_UNAVAILABLE
 );

282 –(Ë
Àn
 );

283 
	}
}

285 #i‡
deföed
(
MBEDTLS_PEM_WRITE_C
)

287 
	#PEM_BEGIN_PUBLIC_KEY
 "-----BEGIN PUBLIC KEY-----\n"

	)

288 
	#PEM_END_PUBLIC_KEY
 "-----END PUBLIC KEY-----\n"

	)

290 
	#PEM_BEGIN_PRIVATE_KEY_RSA
 "-----BEGIN RSA PRIVATE KEY-----\n"

	)

291 
	#PEM_END_PRIVATE_KEY_RSA
 "-----END RSA PRIVATE KEY-----\n"

	)

292 
	#PEM_BEGIN_PRIVATE_KEY_EC
 "-----BEGIN EC PRIVATE KEY-----\n"

	)

293 
	#PEM_END_PRIVATE_KEY_EC
 "-----END EC PRIVATE KEY-----\n"

	)

299 #i‡
deföed
(
MBEDTLS_RSA_C
)

312 
	#RSA_PUB_DER_MAX_BYTES
 38 + 2 * 
MBEDTLS_MPI_MAX_SIZE


	)

329 
	#MPI_MAX_SIZE_2
 
MBEDTLS_MPI_MAX_SIZE
 / 2 + \

330 
MBEDTLS_MPI_MAX_SIZE
 % 2

	)

331 
	#RSA_PRV_DER_MAX_BYTES
 47 + 3 * 
MBEDTLS_MPI_MAX_SIZE
 \

332 + 5 * 
MPI_MAX_SIZE_2


	)

336 
	#RSA_PUB_DER_MAX_BYTES
 0

	)

337 
	#RSA_PRV_DER_MAX_BYTES
 0

	)

341 #i‡
deföed
(
MBEDTLS_ECP_C
)

353 
	#ECP_PUB_DER_MAX_BYTES
 30 + 2 * 
MBEDTLS_ECP_MAX_BYTES


	)

364 
	#ECP_PRV_DER_MAX_BYTES
 29 + 3 * 
MBEDTLS_ECP_MAX_BYTES


	)

368 
	#ECP_PUB_DER_MAX_BYTES
 0

	)

369 
	#ECP_PRV_DER_MAX_BYTES
 0

	)

373 
	#PUB_DER_MAX_BYTES
 
RSA_PUB_DER_MAX_BYTES
 > 
ECP_PUB_DER_MAX_BYTES
 ? \

374 
RSA_PUB_DER_MAX_BYTES
 : 
ECP_PUB_DER_MAX_BYTES


	)

375 
	#PRV_DER_MAX_BYTES
 
RSA_PRV_DER_MAX_BYTES
 > 
ECP_PRV_DER_MAX_BYTES
 ? \

376 
RSA_PRV_DER_MAX_BYTES
 : 
ECP_PRV_DER_MAX_BYTES


	)

378 
	$mbedés_pk_wrôe_pubkey_≥m
–
mbedés_pk_c⁄ãxt
 *
key
, *
buf
, 
size_t
 
size
 )

380 
ªt
;

381 
ouçut_buf
[
PUB_DER_MAX_BYTES
];

382 
size_t
 
ﬁí
 = 0;

384 if––
ªt
 = 
	`mbedés_pk_wrôe_pubkey_dî
–
key
, 
ouçut_buf
,

385 (
ouçut_buf
) ) ) < 0 )

387 –
ªt
 );

390 if––
ªt
 = 
	`mbedés_≥m_wrôe_buf„r
–
PEM_BEGIN_PUBLIC_KEY
, 
PEM_END_PUBLIC_KEY
,

391 
ouçut_buf
 + (ouçut_bufË- 
ªt
,

392 
ªt
, 
buf
, 
size
, &
ﬁí
 ) ) != 0 )

394 –
ªt
 );

398 
	}
}

400 
	$mbedés_pk_wrôe_key_≥m
–
mbedés_pk_c⁄ãxt
 *
key
, *
buf
, 
size_t
 
size
 )

402 
ªt
;

403 
ouçut_buf
[
PRV_DER_MAX_BYTES
];

404 c⁄° *
begö
, *
íd
;

405 
size_t
 
ﬁí
 = 0;

407 if––
ªt
 = 
	`mbedés_pk_wrôe_key_dî
–
key
, 
ouçut_buf
, (output_buf) ) ) < 0 )

408 –
ªt
 );

410 #i‡
	`deföed
(
MBEDTLS_RSA_C
)

411 if–
	`mbedés_pk_gë_ty≥
–
key
 ) =
MBEDTLS_PK_RSA
 )

413 
begö
 = 
PEM_BEGIN_PRIVATE_KEY_RSA
;

414 
íd
 = 
PEM_END_PRIVATE_KEY_RSA
;

418 #i‡
	`deföed
(
MBEDTLS_ECP_C
)

419 if–
	`mbedés_pk_gë_ty≥
–
key
 ) =
MBEDTLS_PK_ECKEY
 )

421 
begö
 = 
PEM_BEGIN_PRIVATE_KEY_EC
;

422 
íd
 = 
PEM_END_PRIVATE_KEY_EC
;

426 –
MBEDTLS_ERR_PK_FEATURE_UNAVAILABLE
 );

428 if––
ªt
 = 
	`mbedés_≥m_wrôe_buf„r
–
begö
, 
íd
,

429 
ouçut_buf
 + (ouçut_bufË- 
ªt
,

430 
ªt
, 
buf
, 
size
, &
ﬁí
 ) ) != 0 )

432 –
ªt
 );

436 
	}
}

	@/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/rsa.c

28 #i‡!
deföed
(
MBEDTLS_CONFIG_FILE
)

29 
	~"mbedés/c⁄fig.h
"

31 #ö˛udê
MBEDTLS_CONFIG_FILE


34 #i‡
deföed
(
MBEDTLS_RSA_C
)

36 
	~"mbedés/rß.h
"

37 
	~"mbedés/oid.h
"

39 
	~<°rög.h
>

41 #i‡
deföed
(
MBEDTLS_PKCS1_V21
)

42 
	~"mbedés/md.h
"

45 #i‡
deföed
(
MBEDTLS_PKCS1_V15
Ë&& !deföed(
__O≥nBSD__
)

46 
	~<°dlib.h
>

49 #i‡
deföed
(
MBEDTLS_PLATFORM_C
)

50 
	~"mbedés/∂©f‹m.h
"

52 
	~<°dio.h
>

53 
	#mbedés_¥ötf
 
¥ötf


	)

54 
	#mbedés_ˇŒoc
 
ˇŒoc


	)

55 
	#mbedés_‰ì
 
‰ì


	)

61 
	$mbedés_rß_öô
–
mbedés_rß_c⁄ãxt
 *
˘x
,

62 
∑ddög
,

63 
hash_id
 )

65 
	`mem£t
–
˘x
, 0, –
mbedés_rß_c⁄ãxt
 ) );

67 
	`mbedés_rß_£t_∑ddög
–
˘x
, 
∑ddög
, 
hash_id
 );

69 #i‡
	`deföed
(
MBEDTLS_THREADING_C
)

70 
	`mbedés_muãx_öô
–&
˘x
->
muãx
 );

72 
	}
}

77 
	$mbedés_rß_£t_∑ddög
–
mbedés_rß_c⁄ãxt
 *
˘x
, 
∑ddög
, 
hash_id
 )

79 
˘x
->
∑ddög
 =Öadding;

80 
˘x
->
hash_id
 = hash_id;

81 
	}
}

83 #i‡
deföed
(
MBEDTLS_GENPRIME
)

88 
	$mbedés_rß_gí_key
–
mbedés_rß_c⁄ãxt
 *
˘x
,

89 (*
f_∫g
)(*, *, 
size_t
),

90 *
p_∫g
,

91 
nbôs
, 
exp⁄ít
 )

93 
ªt
;

94 
mbedés_mpi
 
P1
, 
Q1
, 
H
, 
G
;

96 if–
f_∫g
 =
NULL
 || 
nbôs
 < 128 || 
exp⁄ít
 < 3 )

97 –
MBEDTLS_ERR_RSA_BAD_INPUT_DATA
 );

99 
	`mbedés_mpi_öô
–&
P1
 ); mbedés_mpi_öô–&
Q1
 ); mbedés_mpi_öô–&
H
 ); mbedés_mpi_öô–&
G
 );

105 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_l£t
–&
˘x
->
E
, 
exp⁄ít
 ) );

109 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_gí_¥ime
–&
˘x
->
P
, ( 
nbôs
 + 1 ) >> 1, 0,

110 
f_∫g
, 
p_∫g
 ) );

112 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_gí_¥ime
–&
˘x
->
Q
, ( 
nbôs
 + 1 ) >> 1, 0,

113 
f_∫g
, 
p_∫g
 ) );

115 if–
	`mbedés_mpi_cmp_mpi
–&
˘x
->
P
, &˘x->
Q
 ) < 0 )

116 
	`mbedés_mpi_sw≠
–&
˘x
->
P
, &˘x->
Q
 );

118 if–
	`mbedés_mpi_cmp_mpi
–&
˘x
->
P
, &˘x->
Q
 ) == 0 )

121 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_mul_mpi
–&
˘x
->
N
, &˘x->
P
, &˘x->
Q
 ) );

122 if–
	`mbedés_mpi_bôÀn
–&
˘x
->
N
 ) !
nbôs
 )

125 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_sub_öt
–&
P1
, &
˘x
->
P
, 1 ) );

126 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_sub_öt
–&
Q1
, &
˘x
->
Q
, 1 ) );

127 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_mul_mpi
–&
H
, &
P1
, &
Q1
 ) );

128 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_gcd
–&
G
, &
˘x
->
E
, &
H
 ) );

130  
	`mbedés_mpi_cmp_öt
–&
G
, 1 ) != 0 );

138 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_öv_mod
–&
˘x
->
D
 , &˘x->
E
, &
H
 ) );

139 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_mod_mpi
–&
˘x
->
DP
, &˘x->
D
, &
P1
 ) );

140 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_mod_mpi
–&
˘x
->
DQ
, &˘x->
D
, &
Q1
 ) );

141 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_öv_mod
–&
˘x
->
QP
, &˘x->
Q
, &˘x->
P
 ) );

143 
˘x
->
Àn
 = ( 
	`mbedés_mpi_bôÀn
–&˘x->
N
 ) + 7 ) >> 3;

145 
˛ónup
:

147 
	`mbedés_mpi_‰ì
–&
P1
 ); mbedés_mpi_‰ì–&
Q1
 ); mbedés_mpi_‰ì–&
H
 ); mbedés_mpi_‰ì–&
G
 );

149 if–
ªt
 != 0 )

151 
	`mbedés_rß_‰ì
–
˘x
 );

152 –
MBEDTLS_ERR_RSA_KEY_GEN_FAILED
 + 
ªt
 );

156 
	}
}

163 
	$mbedés_rß_check_pubkey
–c⁄° 
mbedés_rß_c⁄ãxt
 *
˘x
 )

165 if–!
˘x
->
N
.
p
 || !˘x->
E
.p )

166 –
MBEDTLS_ERR_RSA_KEY_CHECK_FAILED
 );

168 if––
˘x
->
N
.
p
[0] & 1 ) == 0 ||

169 –
˘x
->
E
.
p
[0] & 1 ) == 0 )

170 –
MBEDTLS_ERR_RSA_KEY_CHECK_FAILED
 );

172 if–
	`mbedés_mpi_bôÀn
–&
˘x
->
N
 ) < 128 ||

173 
	`mbedés_mpi_bôÀn
–&
˘x
->
N
 ) > 
MBEDTLS_MPI_MAX_BITS
 )

174 –
MBEDTLS_ERR_RSA_KEY_CHECK_FAILED
 );

176 if–
	`mbedés_mpi_bôÀn
–&
˘x
->
E
 ) < 2 ||

177 
	`mbedés_mpi_cmp_mpi
–&
˘x
->
E
, &˘x->
N
 ) >= 0 )

178 –
MBEDTLS_ERR_RSA_KEY_CHECK_FAILED
 );

181 
	}
}

186 
	$mbedés_rß_check_¥ivkey
–c⁄° 
mbedés_rß_c⁄ãxt
 *
˘x
 )

188 
ªt
;

189 
mbedés_mpi
 
PQ
, 
DE
, 
P1
, 
Q1
, 
H
, 
I
, 
G
, 
G2
, 
L1
, 
L2
, 
DP
, 
DQ
, 
QP
;

191 if––
ªt
 = 
	`mbedés_rß_check_pubkey
–
˘x
 ) ) != 0 )

192 –
ªt
 );

194 if–!
˘x
->
P
.
p
 || !˘x->
Q
.∞|| !˘x->
D
.p )

195 –
MBEDTLS_ERR_RSA_KEY_CHECK_FAILED
 );

197 
	`mbedés_mpi_öô
–&
PQ
 ); mbedés_mpi_öô–&
DE
 ); mbedés_mpi_öô–&
P1
 ); mbedés_mpi_öô–&
Q1
 );

198 
	`mbedés_mpi_öô
–&
H
 ); mbedés_mpi_öô–&
I
 ); mbedés_mpi_öô–&
G
 ); mbedés_mpi_öô–&
G2
 );

199 
	`mbedés_mpi_öô
–&
L1
 ); mbedés_mpi_öô–&
L2
 ); mbedés_mpi_öô–&
DP
 ); mbedés_mpi_öô–&
DQ
 );

200 
	`mbedés_mpi_öô
–&
QP
 );

202 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_mul_mpi
–&
PQ
, &
˘x
->
P
, &˘x->
Q
 ) );

203 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_mul_mpi
–&
DE
, &
˘x
->
D
, &˘x->
E
 ) );

204 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_sub_öt
–&
P1
, &
˘x
->
P
, 1 ) );

205 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_sub_öt
–&
Q1
, &
˘x
->
Q
, 1 ) );

206 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_mul_mpi
–&
H
, &
P1
, &
Q1
 ) );

207 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_gcd
–&
G
, &
˘x
->
E
, &
H
 ) );

209 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_gcd
–&
G2
, &
P1
, &
Q1
 ) );

210 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_div_mpi
–&
L1
, &
L2
, &
H
, &
G2
 ) );

211 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_mod_mpi
–&
I
, &
DE
, &
L1
 ) );

213 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_mod_mpi
–&
DP
, &
˘x
->
D
, &
P1
 ) );

214 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_mod_mpi
–&
DQ
, &
˘x
->
D
, &
Q1
 ) );

215 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_öv_mod
–&
QP
, &
˘x
->
Q
, &˘x->
P
 ) );

219 if–
	`mbedés_mpi_cmp_mpi
–&
PQ
, &
˘x
->
N
 ) != 0 ||

220 
	`mbedés_mpi_cmp_mpi
–&
DP
, &
˘x
->DP ) != 0 ||

221 
	`mbedés_mpi_cmp_mpi
–&
DQ
, &
˘x
->DQ ) != 0 ||

222 
	`mbedés_mpi_cmp_mpi
–&
QP
, &
˘x
->QP ) != 0 ||

223 
	`mbedés_mpi_cmp_öt
–&
L2
, 0 ) != 0 ||

224 
	`mbedés_mpi_cmp_öt
–&
I
, 1 ) != 0 ||

225 
	`mbedés_mpi_cmp_öt
–&
G
, 1 ) != 0 )

227 
ªt
 = 
MBEDTLS_ERR_RSA_KEY_CHECK_FAILED
;

230 
˛ónup
:

231 
	`mbedés_mpi_‰ì
–&
PQ
 ); mbedés_mpi_‰ì–&
DE
 ); mbedés_mpi_‰ì–&
P1
 ); mbedés_mpi_‰ì–&
Q1
 );

232 
	`mbedés_mpi_‰ì
–&
H
 ); mbedés_mpi_‰ì–&
I
 ); mbedés_mpi_‰ì–&
G
 ); mbedés_mpi_‰ì–&
G2
 );

233 
	`mbedés_mpi_‰ì
–&
L1
 ); mbedés_mpi_‰ì–&
L2
 ); mbedés_mpi_‰ì–&
DP
 ); mbedés_mpi_‰ì–&
DQ
 );

234 
	`mbedés_mpi_‰ì
–&
QP
 );

236 if–
ªt
 =
MBEDTLS_ERR_RSA_KEY_CHECK_FAILED
 )

237 –
ªt
 );

239 if–
ªt
 != 0 )

240 –
MBEDTLS_ERR_RSA_KEY_CHECK_FAILED
 + 
ªt
 );

243 
	}
}

248 
	$mbedés_rß_check_pub_¥iv
–c⁄° 
mbedés_rß_c⁄ãxt
 *
pub
, c⁄° mbedés_rß_c⁄ãxà*
¥v
 )

250 if–
	`mbedés_rß_check_pubkey
–
pub
 ) != 0 ||

251 
	`mbedés_rß_check_¥ivkey
–
¥v
 ) != 0 )

253 –
MBEDTLS_ERR_RSA_KEY_CHECK_FAILED
 );

256 if–
	`mbedés_mpi_cmp_mpi
–&
pub
->
N
, &
¥v
->N ) != 0 ||

257 
	`mbedés_mpi_cmp_mpi
–&
pub
->
E
, &
¥v
->E ) != 0 )

259 –
MBEDTLS_ERR_RSA_KEY_CHECK_FAILED
 );

263 
	}
}

268 
	$mbedés_rß_public
–
mbedés_rß_c⁄ãxt
 *
˘x
,

269 c⁄° *
öput
,

270 *
ouçut
 )

272 
ªt
;

273 
size_t
 
ﬁí
;

274 
mbedés_mpi
 
T
;

276 
	`mbedés_mpi_öô
–&
T
 );

278 #i‡
	`deföed
(
MBEDTLS_THREADING_C
)

279 if––
ªt
 = 
	`mbedés_muãx_lock
–&
˘x
->
muãx
 ) ) != 0 )

280 –
ªt
 );

283 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_ªad_bö¨y
–&
T
, 
öput
, 
˘x
->
Àn
 ) );

285 if–
	`mbedés_mpi_cmp_mpi
–&
T
, &
˘x
->
N
 ) >= 0 )

287 
ªt
 = 
MBEDTLS_ERR_MPI_BAD_INPUT_DATA
;

288 
˛ónup
;

291 
ﬁí
 = 
˘x
->
Àn
;

292 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_exp_mod
–&
T
, &T, &
˘x
->
E
, &˘x->
N
, &˘x->
RN
 ) );

293 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_wrôe_bö¨y
–&
T
, 
ouçut
, 
ﬁí
 ) );

295 
˛ónup
:

296 #i‡
	`deföed
(
MBEDTLS_THREADING_C
)

297 if–
	`mbedés_muãx_u∆ock
–&
˘x
->
muãx
 ) != 0 )

298 –
MBEDTLS_ERR_THREADING_MUTEX_ERROR
 );

301 
	`mbedés_mpi_‰ì
–&
T
 );

303 if–
ªt
 != 0 )

304 –
MBEDTLS_ERR_RSA_PUBLIC_FAILED
 + 
ªt
 );

307 
	}
}

315 
	$rß_¥ï¨e_blödög
–
mbedés_rß_c⁄ãxt
 *
˘x
,

316 (*
f_∫g
)(*, *, 
size_t
), *
p_∫g
 )

318 
ªt
, 
cou¡
 = 0;

320 if–
˘x
->
Vf
.
p
 !
NULL
 )

323 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_mul_mpi
–&
˘x
->
Vi
, &ctx->Vi, &ctx->Vi ) );

324 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_mod_mpi
–&
˘x
->
Vi
, &˘x->Vi, &˘x->
N
 ) );

325 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_mul_mpi
–&
˘x
->
Vf
, &ctx->Vf, &ctx->Vf ) );

326 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_mod_mpi
–&
˘x
->
Vf
, &˘x->Vf, &˘x->
N
 ) );

328 
˛ónup
;

333 if–
cou¡
++ > 10 )

334 –
MBEDTLS_ERR_RSA_RNG_FAILED
 );

336 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_fûl_øndom
–&
˘x
->
Vf
, ctx->
Àn
 - 1, 
f_∫g
, 
p_∫g
 ) );

337 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_gcd
–&
˘x
->
Vi
, &˘x->
Vf
, &˘x->
N
 ) );

338 }  
	`mbedés_mpi_cmp_öt
–&
˘x
->
Vi
, 1 ) != 0 );

341 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_öv_mod
–&
˘x
->
Vi
, &˘x->
Vf
, &˘x->
N
 ) );

342 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_exp_mod
–&
˘x
->
Vi
, &˘x->Vi, &˘x->
E
, &˘x->
N
, &˘x->
RN
 ) );

345 
˛ónup
:

346 –
ªt
 );

347 
	}
}

352 
	$mbedés_rß_¥iv©e
–
mbedés_rß_c⁄ãxt
 *
˘x
,

353 (*
f_∫g
)(*, *, 
size_t
),

354 *
p_∫g
,

355 c⁄° *
öput
,

356 *
ouçut
 )

358 
ªt
;

359 
size_t
 
ﬁí
;

360 
mbedés_mpi
 
T
, 
T1
, 
T2
;

363 if–
˘x
->
P
.
p
 =
NULL
 || ctx->
Q
.∞=NULL || ctx->
D
.p == NULL )

364 –
MBEDTLS_ERR_RSA_BAD_INPUT_DATA
 );

366 
	`mbedés_mpi_öô
–&
T
 ); mbedés_mpi_öô–&
T1
 ); mbedés_mpi_öô–&
T2
 );

368 #i‡
	`deföed
(
MBEDTLS_THREADING_C
)

369 if––
ªt
 = 
	`mbedés_muãx_lock
–&
˘x
->
muãx
 ) ) != 0 )

370 –
ªt
 );

373 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_ªad_bö¨y
–&
T
, 
öput
, 
˘x
->
Àn
 ) );

374 if–
	`mbedés_mpi_cmp_mpi
–&
T
, &
˘x
->
N
 ) >= 0 )

376 
ªt
 = 
MBEDTLS_ERR_MPI_BAD_INPUT_DATA
;

377 
˛ónup
;

380 if–
f_∫g
 !
NULL
 )

386 
	`MBEDTLS_MPI_CHK
–
	`rß_¥ï¨e_blödög
–
˘x
, 
f_∫g
, 
p_∫g
 ) );

387 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_mul_mpi
–&
T
, &T, &
˘x
->
Vi
 ) );

388 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_mod_mpi
–&
T
, &T, &
˘x
->
N
 ) );

391 #i‡
	`deföed
(
MBEDTLS_RSA_NO_CRT
)

392 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_exp_mod
–&
T
, &T, &
˘x
->
D
, &˘x->
N
, &˘x->
RN
 ) );

400 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_exp_mod
–&
T1
, &
T
, &
˘x
->
DP
, &˘x->
P
, &˘x->
RP
 ) );

401 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_exp_mod
–&
T2
, &
T
, &
˘x
->
DQ
, &˘x->
Q
, &˘x->
RQ
 ) );

406 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_sub_mpi
–&
T
, &
T1
, &
T2
 ) );

407 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_mul_mpi
–&
T1
, &
T
, &
˘x
->
QP
 ) );

408 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_mod_mpi
–&
T
, &
T1
, &
˘x
->
P
 ) );

413 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_mul_mpi
–&
T1
, &
T
, &
˘x
->
Q
 ) );

414 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_add_mpi
–&
T
, &
T2
, &
T1
 ) );

417 if–
f_∫g
 !
NULL
 )

423 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_mul_mpi
–&
T
, &T, &
˘x
->
Vf
 ) );

424 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_mod_mpi
–&
T
, &T, &
˘x
->
N
 ) );

427 
ﬁí
 = 
˘x
->
Àn
;

428 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_wrôe_bö¨y
–&
T
, 
ouçut
, 
ﬁí
 ) );

430 
˛ónup
:

431 #i‡
	`deföed
(
MBEDTLS_THREADING_C
)

432 if–
	`mbedés_muãx_u∆ock
–&
˘x
->
muãx
 ) != 0 )

433 –
MBEDTLS_ERR_THREADING_MUTEX_ERROR
 );

436 
	`mbedés_mpi_‰ì
–&
T
 ); mbedés_mpi_‰ì–&
T1
 ); mbedés_mpi_‰ì–&
T2
 );

438 if–
ªt
 != 0 )

439 –
MBEDTLS_ERR_RSA_PRIVATE_FAILED
 + 
ªt
 );

442 
	}
}

444 #i‡
deföed
(
MBEDTLS_PKCS1_V21
)

454 
	$mgf_mask
–*
d°
, 
size_t
 
dÀn
, *
§c
,

455 
size_t
 
¶í
, 
mbedés_md_c⁄ãxt_t
 *
md_˘x
 )

457 
mask
[
MBEDTLS_MD_MAX_SIZE
];

458 
cou¡î
[4];

459 *
p
;

460 
hÀn
;

461 
size_t
 
i
, 
u£_Àn
;

463 
	`mem£t
–
mask
, 0, 
MBEDTLS_MD_MAX_SIZE
 );

464 
	`mem£t
–
cou¡î
, 0, 4 );

466 
hÀn
 = 
	`mbedés_md_gë_size
–
md_˘x
->
md_öfo
 );

470 
p
 = 
d°
;

472  
dÀn
 > 0 )

474 
u£_Àn
 = 
hÀn
;

475 if–
dÀn
 < 
hÀn
 )

476 
u£_Àn
 = 
dÀn
;

478 
	`mbedés_md_°¨ts
–
md_˘x
 );

479 
	`mbedés_md_upd©e
–
md_˘x
, 
§c
, 
¶í
 );

480 
	`mbedés_md_upd©e
–
md_˘x
, 
cou¡î
, 4 );

481 
	`mbedés_md_föish
–
md_˘x
, 
mask
 );

483  
i
 = 0; i < 
u£_Àn
; ++i )

484 *
p
++ ^
mask
[
i
];

486 
cou¡î
[3]++;

488 
dÀn
 -
u£_Àn
;

490 
	}
}

493 #i‡
deföed
(
MBEDTLS_PKCS1_V21
)

497 
	$mbedés_rß_rßes_ﬂï_í¸y±
–
mbedés_rß_c⁄ãxt
 *
˘x
,

498 (*
f_∫g
)(*, *, 
size_t
),

499 *
p_∫g
,

500 
mode
,

501 c⁄° *
œbñ
, 
size_t
 
œbñ_Àn
,

502 
size_t
 
ûí
,

503 c⁄° *
öput
,

504 *
ouçut
 )

506 
size_t
 
ﬁí
;

507 
ªt
;

508 *
p
 = 
ouçut
;

509 
hÀn
;

510 c⁄° 
mbedés_md_öfo_t
 *
md_öfo
;

511 
mbedés_md_c⁄ãxt_t
 
md_˘x
;

513 if–
mode
 =
MBEDTLS_RSA_PRIVATE
 && 
˘x
->
∑ddög
 !
MBEDTLS_RSA_PKCS_V21
 )

514 –
MBEDTLS_ERR_RSA_BAD_INPUT_DATA
 );

516 if–
f_∫g
 =
NULL
 )

517 –
MBEDTLS_ERR_RSA_BAD_INPUT_DATA
 );

519 
md_öfo
 = 
	`mbedés_md_öfo_‰om_ty≥
–(
mbedés_md_ty≥_t
Ë
˘x
->
hash_id
 );

520 if–
md_öfo
 =
NULL
 )

521 –
MBEDTLS_ERR_RSA_BAD_INPUT_DATA
 );

523 
ﬁí
 = 
˘x
->
Àn
;

524 
hÀn
 = 
	`mbedés_md_gë_size
–
md_öfo
 );

526 if–
ﬁí
 < 
ûí
 + 2 * 
hÀn
 + 2 )

527 –
MBEDTLS_ERR_RSA_BAD_INPUT_DATA
 );

529 
	`mem£t
–
ouçut
, 0, 
ﬁí
 );

531 *
p
++ = 0;

535 if––
ªt
 = 
	`f_∫g
–
p_∫g
, 
p
, 
hÀn
 ) ) != 0 )

536 –
MBEDTLS_ERR_RSA_RNG_FAILED
 + 
ªt
 );

538 
p
 +
hÀn
;

542 
	`mbedés_md
–
md_öfo
, 
œbñ
, 
œbñ_Àn
, 
p
 );

543 
p
 +
hÀn
;

544 
p
 +
ﬁí
 - 2 * 
hÀn
 - 2 - 
ûí
;

545 *
p
++ = 1;

546 
	`mem˝y
–
p
, 
öput
, 
ûí
 );

548 
	`mbedés_md_öô
–&
md_˘x
 );

549 
	`mbedés_md_£tup
–&
md_˘x
, 
md_öfo
, 0 );

553 
	`mgf_mask
–
ouçut
 + 
hÀn
 + 1, 
ﬁí
 - hlen - 1, output + 1, hlen,

554 &
md_˘x
 );

558 
	`mgf_mask
–
ouçut
 + 1, 
hÀn
, ouçuà+ hÀ¿+ 1, 
ﬁí
 - hlen - 1,

559 &
md_˘x
 );

561 
	`mbedés_md_‰ì
–&
md_˘x
 );

563 ––
mode
 =
MBEDTLS_RSA_PUBLIC
 )

564 ? 
	`mbedés_rß_public
–
˘x
, 
ouçut
, output )

565 : 
	`mbedés_rß_¥iv©e
–
˘x
, 
f_∫g
, 
p_∫g
, 
ouçut
, output ) );

566 
	}
}

569 #i‡
deföed
(
MBEDTLS_PKCS1_V15
)

573 
	$mbedés_rß_rßes_pkcs1_v15_í¸y±
–
mbedés_rß_c⁄ãxt
 *
˘x
,

574 (*
f_∫g
)(*, *, 
size_t
),

575 *
p_∫g
,

576 
mode
, 
size_t
 
ûí
,

577 c⁄° *
öput
,

578 *
ouçut
 )

580 
size_t
 
nb_∑d
, 
ﬁí
;

581 
ªt
;

582 *
p
 = 
ouçut
;

584 if–
mode
 =
MBEDTLS_RSA_PRIVATE
 && 
˘x
->
∑ddög
 !
MBEDTLS_RSA_PKCS_V15
 )

585 –
MBEDTLS_ERR_RSA_BAD_INPUT_DATA
 );

587 if–
f_∫g
 =
NULL
 )

588 –
MBEDTLS_ERR_RSA_BAD_INPUT_DATA
 );

590 
ﬁí
 = 
˘x
->
Àn
;

592 if–
ﬁí
 < 
ûí
 + 11 )

593 –
MBEDTLS_ERR_RSA_BAD_INPUT_DATA
 );

595 
nb_∑d
 = 
ﬁí
 - 3 - 
ûí
;

597 *
p
++ = 0;

598 if–
mode
 =
MBEDTLS_RSA_PUBLIC
 )

600 *
p
++ = 
MBEDTLS_RSA_CRYPT
;

602  
nb_∑d
-- > 0 )

604 
∫g_dl
 = 100;

607 
ªt
 = 
	`f_∫g
–
p_∫g
, 
p
, 1 );

608 }  *
p
 =0 && --
∫g_dl
 && 
ªt
 == 0 );

612 if–
∫g_dl
 =0 || 
ªt
 != 0 )

613 –
MBEDTLS_ERR_RSA_RNG_FAILED
 + 
ªt
 );

615 
p
++;

620 *
p
++ = 
MBEDTLS_RSA_SIGN
;

622  
nb_∑d
-- > 0 )

623 *
p
++ = 0xFF;

626 *
p
++ = 0;

627 
	`mem˝y
–
p
, 
öput
, 
ûí
 );

629 ––
mode
 =
MBEDTLS_RSA_PUBLIC
 )

630 ? 
	`mbedés_rß_public
–
˘x
, 
ouçut
, output )

631 : 
	`mbedés_rß_¥iv©e
–
˘x
, 
f_∫g
, 
p_∫g
, 
ouçut
, output ) );

632 
	}
}

638 
	$mbedés_rß_pkcs1_í¸y±
–
mbedés_rß_c⁄ãxt
 *
˘x
,

639 (*
f_∫g
)(*, *, 
size_t
),

640 *
p_∫g
,

641 
mode
, 
size_t
 
ûí
,

642 c⁄° *
öput
,

643 *
ouçut
 )

645  
˘x
->
∑ddög
 )

647 #i‡
	`deföed
(
MBEDTLS_PKCS1_V15
)

648 
MBEDTLS_RSA_PKCS_V15
:

649  
	`mbedés_rß_rßes_pkcs1_v15_í¸y±
–
˘x
, 
f_∫g
, 
p_∫g
, 
mode
, 
ûí
,

650 
öput
, 
ouçut
 );

653 #i‡
	`deföed
(
MBEDTLS_PKCS1_V21
)

654 
MBEDTLS_RSA_PKCS_V21
:

655  
	`mbedés_rß_rßes_ﬂï_í¸y±
–
˘x
, 
f_∫g
, 
p_∫g
, 
mode
, 
NULL
, 0,

656 
ûí
, 
öput
, 
ouçut
 );

660 –
MBEDTLS_ERR_RSA_INVALID_PADDING
 );

662 
	}
}

664 #i‡
deföed
(
MBEDTLS_PKCS1_V21
)

668 
	$mbedés_rß_rßes_ﬂï_de¸y±
–
mbedés_rß_c⁄ãxt
 *
˘x
,

669 (*
f_∫g
)(*, *, 
size_t
),

670 *
p_∫g
,

671 
mode
,

672 c⁄° *
œbñ
, 
size_t
 
œbñ_Àn
,

673 
size_t
 *
ﬁí
,

674 c⁄° *
öput
,

675 *
ouçut
,

676 
size_t
 
ouçut_max_Àn
 )

678 
ªt
;

679 
size_t
 
ûí
, 
i
, 
∑d_Àn
;

680 *
p
, 
bad
, 
∑d_d⁄e
;

681 
buf
[
MBEDTLS_MPI_MAX_SIZE
];

682 
lhash
[
MBEDTLS_MD_MAX_SIZE
];

683 
hÀn
;

684 c⁄° 
mbedés_md_öfo_t
 *
md_öfo
;

685 
mbedés_md_c⁄ãxt_t
 
md_˘x
;

690 if–
mode
 =
MBEDTLS_RSA_PRIVATE
 && 
˘x
->
∑ddög
 !
MBEDTLS_RSA_PKCS_V21
 )

691 –
MBEDTLS_ERR_RSA_BAD_INPUT_DATA
 );

693 
ûí
 = 
˘x
->
Àn
;

695 if–
ûí
 < 16 || iÀ¿> –
buf
 ) )

696 –
MBEDTLS_ERR_RSA_BAD_INPUT_DATA
 );

698 
md_öfo
 = 
	`mbedés_md_öfo_‰om_ty≥
–(
mbedés_md_ty≥_t
Ë
˘x
->
hash_id
 );

699 if–
md_öfo
 =
NULL
 )

700 –
MBEDTLS_ERR_RSA_BAD_INPUT_DATA
 );

705 
ªt
 = ( 
mode
 =
MBEDTLS_RSA_PUBLIC
 )

706 ? 
	`mbedés_rß_public
–
˘x
, 
öput
, 
buf
 )

707 : 
	`mbedés_rß_¥iv©e
–
˘x
, 
f_∫g
, 
p_∫g
, 
öput
, 
buf
 );

709 if–
ªt
 != 0 )

710 –
ªt
 );

715 
hÀn
 = 
	`mbedés_md_gë_size
–
md_öfo
 );

717 
	`mbedés_md_öô
–&
md_˘x
 );

718 
	`mbedés_md_£tup
–&
md_˘x
, 
md_öfo
, 0 );

721 
	`mbedés_md
–
md_öfo
, 
œbñ
, 
œbñ_Àn
, 
lhash
 );

724 
	`mgf_mask
–
buf
 + 1, 
hÀn
, bu‡+ hÀ¿+ 1, 
ûí
 - hlen - 1,

725 &
md_˘x
 );

728 
	`mgf_mask
–
buf
 + 
hÀn
 + 1, 
ûí
 - hlen - 1, buf + 1, hlen,

729 &
md_˘x
 );

731 
	`mbedés_md_‰ì
–&
md_˘x
 );

736 
p
 = 
buf
;

737 
bad
 = 0;

739 
bad
 |*
p
++;

741 
p
 +
hÀn
;

744  
i
 = 0; i < 
hÀn
; i++ )

745 
bad
 |
lhash
[
i
] ^ *
p
++;

749 
∑d_Àn
 = 0;

750 
∑d_d⁄e
 = 0;

751  
i
 = 0; i < 
ûí
 - 2 * 
hÀn
 - 2; i++ )

753 
∑d_d⁄e
 |
p
[
i
];

754 
∑d_Àn
 +((
∑d_d⁄e
 | ()-pad_done) >> 7) ^ 1;

757 
p
 +
∑d_Àn
;

758 
bad
 |*
p
++ ^ 0x01;

766 if–
bad
 != 0 )

767 –
MBEDTLS_ERR_RSA_INVALID_PADDING
 );

769 if–
ûí
 - ( 
p
 - 
buf
 ) > 
ouçut_max_Àn
 )

770 –
MBEDTLS_ERR_RSA_OUTPUT_TOO_LARGE
 );

772 *
ﬁí
 = 
ûí
 - (
p
 - 
buf
);

773 
	`mem˝y
–
ouçut
, 
p
, *
ﬁí
 );

776 
	}
}

779 #i‡
deföed
(
MBEDTLS_PKCS1_V15
)

783 
	$mbedés_rß_rßes_pkcs1_v15_de¸y±
–
mbedés_rß_c⁄ãxt
 *
˘x
,

784 (*
f_∫g
)(*, *, 
size_t
),

785 *
p_∫g
,

786 
mode
, 
size_t
 *
ﬁí
,

787 c⁄° *
öput
,

788 *
ouçut
,

789 
size_t
 
ouçut_max_Àn
)

791 
ªt
;

792 
size_t
 
ûí
, 
∑d_cou¡
 = 0, 
i
;

793 *
p
, 
bad
, 
∑d_d⁄e
 = 0;

794 
buf
[
MBEDTLS_MPI_MAX_SIZE
];

796 if–
mode
 =
MBEDTLS_RSA_PRIVATE
 && 
˘x
->
∑ddög
 !
MBEDTLS_RSA_PKCS_V15
 )

797 –
MBEDTLS_ERR_RSA_BAD_INPUT_DATA
 );

799 
ûí
 = 
˘x
->
Àn
;

801 if–
ûí
 < 16 || iÀ¿> –
buf
 ) )

802 –
MBEDTLS_ERR_RSA_BAD_INPUT_DATA
 );

804 
ªt
 = ( 
mode
 =
MBEDTLS_RSA_PUBLIC
 )

805 ? 
	`mbedés_rß_public
–
˘x
, 
öput
, 
buf
 )

806 : 
	`mbedés_rß_¥iv©e
–
˘x
, 
f_∫g
, 
p_∫g
, 
öput
, 
buf
 );

808 if–
ªt
 != 0 )

809 –
ªt
 );

811 
p
 = 
buf
;

812 
bad
 = 0;

817 
bad
 |*
p
++;

820 if–
mode
 =
MBEDTLS_RSA_PRIVATE
 )

822 
bad
 |*
p
++ ^ 
MBEDTLS_RSA_CRYPT
;

826  
i
 = 0; i < 
ûí
 - 3; i++ )

828 
∑d_d⁄e
 |((
p
[
i
] | ()-p[i]) >> 7) ^ 1;

829 
∑d_cou¡
 +((
∑d_d⁄e
 | ()-pad_done) >> 7) ^ 1;

832 
p
 +
∑d_cou¡
;

833 
bad
 |*
p
++;

837 
bad
 |*
p
++ ^ 
MBEDTLS_RSA_SIGN
;

841  
i
 = 0; i < 
ûí
 - 3; i++ )

843 
∑d_d⁄e
 |–
p
[
i
] != 0xFF );

844 
∑d_cou¡
 +–
∑d_d⁄e
 == 0 );

847 
p
 +
∑d_cou¡
;

848 
bad
 |*
p
++;

851 if–
bad
 )

852 –
MBEDTLS_ERR_RSA_INVALID_PADDING
 );

854 if–
ûí
 - ( 
p
 - 
buf
 ) > 
ouçut_max_Àn
 )

855 –
MBEDTLS_ERR_RSA_OUTPUT_TOO_LARGE
 );

857 *
ﬁí
 = 
ûí
 - (
p
 - 
buf
);

858 
	`mem˝y
–
ouçut
, 
p
, *
ﬁí
 );

861 
	}
}

867 
	$mbedés_rß_pkcs1_de¸y±
–
mbedés_rß_c⁄ãxt
 *
˘x
,

868 (*
f_∫g
)(*, *, 
size_t
),

869 *
p_∫g
,

870 
mode
, 
size_t
 *
ﬁí
,

871 c⁄° *
öput
,

872 *
ouçut
,

873 
size_t
 
ouçut_max_Àn
)

875  
˘x
->
∑ddög
 )

877 #i‡
	`deföed
(
MBEDTLS_PKCS1_V15
)

878 
MBEDTLS_RSA_PKCS_V15
:

879  
	`mbedés_rß_rßes_pkcs1_v15_de¸y±
–
˘x
, 
f_∫g
, 
p_∫g
, 
mode
, 
ﬁí
,

880 
öput
, 
ouçut
, 
ouçut_max_Àn
 );

883 #i‡
	`deföed
(
MBEDTLS_PKCS1_V21
)

884 
MBEDTLS_RSA_PKCS_V21
:

885  
	`mbedés_rß_rßes_ﬂï_de¸y±
–
˘x
, 
f_∫g
, 
p_∫g
, 
mode
, 
NULL
, 0,

886 
ﬁí
, 
öput
, 
ouçut
,

887 
ouçut_max_Àn
 );

891 –
MBEDTLS_ERR_RSA_INVALID_PADDING
 );

893 
	}
}

895 #i‡
deföed
(
MBEDTLS_PKCS1_V21
)

899 
	$mbedés_rß_rßsß_pss_sign
–
mbedés_rß_c⁄ãxt
 *
˘x
,

900 (*
f_∫g
)(*, *, 
size_t
),

901 *
p_∫g
,

902 
mode
,

903 
mbedés_md_ty≥_t
 
md_Æg
,

904 
hashÀn
,

905 c⁄° *
hash
,

906 *
sig
 )

908 
size_t
 
ﬁí
;

909 *
p
 = 
sig
;

910 
ß…
[
MBEDTLS_MD_MAX_SIZE
];

911 
¶í
, 
hÀn
, 
off£t
 = 0;

912 
ªt
;

913 
size_t
 
msb
;

914 c⁄° 
mbedés_md_öfo_t
 *
md_öfo
;

915 
mbedés_md_c⁄ãxt_t
 
md_˘x
;

917 if–
mode
 =
MBEDTLS_RSA_PRIVATE
 && 
˘x
->
∑ddög
 !
MBEDTLS_RSA_PKCS_V21
 )

918 –
MBEDTLS_ERR_RSA_BAD_INPUT_DATA
 );

920 if–
f_∫g
 =
NULL
 )

921 –
MBEDTLS_ERR_RSA_BAD_INPUT_DATA
 );

923 
ﬁí
 = 
˘x
->
Àn
;

925 if–
md_Æg
 !
MBEDTLS_MD_NONE
 )

929 
md_öfo
 = 
	`mbedés_md_öfo_‰om_ty≥
–
md_Æg
 );

930 if–
md_öfo
 =
NULL
 )

931 –
MBEDTLS_ERR_RSA_BAD_INPUT_DATA
 );

933 
hashÀn
 = 
	`mbedés_md_gë_size
–
md_öfo
 );

936 
md_öfo
 = 
	`mbedés_md_öfo_‰om_ty≥
–(
mbedés_md_ty≥_t
Ë
˘x
->
hash_id
 );

937 if–
md_öfo
 =
NULL
 )

938 –
MBEDTLS_ERR_RSA_BAD_INPUT_DATA
 );

940 
hÀn
 = 
	`mbedés_md_gë_size
–
md_öfo
 );

941 
¶í
 = 
hÀn
;

943 if–
ﬁí
 < 
hÀn
 + 
¶í
 + 2 )

944 –
MBEDTLS_ERR_RSA_BAD_INPUT_DATA
 );

946 
	`mem£t
–
sig
, 0, 
ﬁí
 );

950 if––
ªt
 = 
	`f_∫g
–
p_∫g
, 
ß…
, 
¶í
 ) ) != 0 )

951 –
MBEDTLS_ERR_RSA_RNG_FAILED
 + 
ªt
 );

955 
msb
 = 
	`mbedés_mpi_bôÀn
–&
˘x
->
N
 ) - 1;

956 
p
 +
ﬁí
 - 
hÀn
 * 2 - 2;

957 *
p
++ = 0x01;

958 
	`mem˝y
–
p
, 
ß…
, 
¶í
 );

959 
p
 +
¶í
;

961 
	`mbedés_md_öô
–&
md_˘x
 );

962 
	`mbedés_md_£tup
–&
md_˘x
, 
md_öfo
, 0 );

966 
	`mbedés_md_°¨ts
–&
md_˘x
 );

967 
	`mbedés_md_upd©e
–&
md_˘x
, 
p
, 8 );

968 
	`mbedés_md_upd©e
–&
md_˘x
, 
hash
, 
hashÀn
 );

969 
	`mbedés_md_upd©e
–&
md_˘x
, 
ß…
, 
¶í
 );

970 
	`mbedés_md_föish
–&
md_˘x
, 
p
 );

974 if–
msb
 % 8 == 0 )

975 
off£t
 = 1;

979 
	`mgf_mask
–
sig
 + 
off£t
, 
ﬁí
 - 
hÀn
 - 1 - off£t, 
p
, hÀn, &
md_˘x
 );

981 
	`mbedés_md_‰ì
–&
md_˘x
 );

983 
msb
 = 
	`mbedés_mpi_bôÀn
–&
˘x
->
N
 ) - 1;

984 
sig
[0] &0xFF >> ( 
ﬁí
 * 8 - 
msb
 );

986 
p
 +
hÀn
;

987 *
p
++ = 0xBC;

989 ––
mode
 =
MBEDTLS_RSA_PUBLIC
 )

990 ? 
	`mbedés_rß_public
–
˘x
, 
sig
, sig )

991 : 
	`mbedés_rß_¥iv©e
–
˘x
, 
f_∫g
, 
p_∫g
, 
sig
, sig ) );

992 
	}
}

995 #i‡
deföed
(
MBEDTLS_PKCS1_V15
)

1002 
	$mbedés_rß_rßsß_pkcs1_v15_sign
–
mbedés_rß_c⁄ãxt
 *
˘x
,

1003 (*
f_∫g
)(*, *, 
size_t
),

1004 *
p_∫g
,

1005 
mode
,

1006 
mbedés_md_ty≥_t
 
md_Æg
,

1007 
hashÀn
,

1008 c⁄° *
hash
,

1009 *
sig
 )

1011 
size_t
 
nb_∑d
, 
ﬁí
, 
oid_size
 = 0;

1012 *
p
 = 
sig
;

1013 c⁄° *
oid
 = 
NULL
;

1014 *
sig_åy
 = 
NULL
, *
vîif
 = NULL;

1015 
size_t
 
i
;

1016 
diff
;

1017 vﬁ©ûê
diff_no_›timize
;

1018 
ªt
;

1020 if–
mode
 =
MBEDTLS_RSA_PRIVATE
 && 
˘x
->
∑ddög
 !
MBEDTLS_RSA_PKCS_V15
 )

1021 –
MBEDTLS_ERR_RSA_BAD_INPUT_DATA
 );

1023 
ﬁí
 = 
˘x
->
Àn
;

1024 
nb_∑d
 = 
ﬁí
 - 3;

1026 if–
md_Æg
 !
MBEDTLS_MD_NONE
 )

1028 c⁄° 
mbedés_md_öfo_t
 *
md_öfo
 = 
	`mbedés_md_öfo_‰om_ty≥
–
md_Æg
 );

1029 if–
md_öfo
 =
NULL
 )

1030 –
MBEDTLS_ERR_RSA_BAD_INPUT_DATA
 );

1032 if–
	`mbedés_oid_gë_oid_by_md
–
md_Æg
, &
oid
, &
oid_size
 ) != 0 )

1033 –
MBEDTLS_ERR_RSA_BAD_INPUT_DATA
 );

1035 
nb_∑d
 -10 + 
oid_size
;

1037 
hashÀn
 = 
	`mbedés_md_gë_size
–
md_öfo
 );

1040 
nb_∑d
 -
hashÀn
;

1042 if––
nb_∑d
 < 8 ) || (Çb_∑d > 
ﬁí
 ) )

1043 –
MBEDTLS_ERR_RSA_BAD_INPUT_DATA
 );

1045 *
p
++ = 0;

1046 *
p
++ = 
MBEDTLS_RSA_SIGN
;

1047 
	`mem£t
–
p
, 0xFF, 
nb_∑d
 );

1048 
p
 +
nb_∑d
;

1049 *
p
++ = 0;

1051 if–
md_Æg
 =
MBEDTLS_MD_NONE
 )

1053 
	`mem˝y
–
p
, 
hash
, 
hashÀn
 );

1066 *
p
++ = 
MBEDTLS_ASN1_SEQUENCE
 | 
MBEDTLS_ASN1_CONSTRUCTED
;

1067 *
p
++ = (Ë–0x08 + 
oid_size
 + 
hashÀn
 );

1068 *
p
++ = 
MBEDTLS_ASN1_SEQUENCE
 | 
MBEDTLS_ASN1_CONSTRUCTED
;

1069 *
p
++ = (Ë–0x04 + 
oid_size
 );

1070 *
p
++ = 
MBEDTLS_ASN1_OID
;

1071 *
p
++ = 
oid_size
 & 0xFF;

1072 
	`mem˝y
–
p
, 
oid
, 
oid_size
 );

1073 
p
 +
oid_size
;

1074 *
p
++ = 
MBEDTLS_ASN1_NULL
;

1075 *
p
++ = 0x00;

1076 *
p
++ = 
MBEDTLS_ASN1_OCTET_STRING
;

1077 *
p
++ = 
hashÀn
;

1078 
	`mem˝y
–
p
, 
hash
, 
hashÀn
 );

1081 if–
mode
 =
MBEDTLS_RSA_PUBLIC
 )

1082 –
	`mbedés_rß_public
–
˘x
, 
sig
, sig ) );

1088 
sig_åy
 = 
	`mbedés_ˇŒoc
–1, 
˘x
->
Àn
 );

1089 if–
sig_åy
 =
NULL
 )

1090 –
MBEDTLS_ERR_MPI_ALLOC_FAILED
 );

1092 
vîif
 = 
	`mbedés_ˇŒoc
–1, 
˘x
->
Àn
 );

1093 if–
vîif
 =
NULL
 )

1095 
	`mbedés_‰ì
–
sig_åy
 );

1096 –
MBEDTLS_ERR_MPI_ALLOC_FAILED
 );

1099 
	`MBEDTLS_MPI_CHK
–
	`mbedés_rß_¥iv©e
–
˘x
, 
f_∫g
, 
p_∫g
, 
sig
, 
sig_åy
 ) );

1100 
	`MBEDTLS_MPI_CHK
–
	`mbedés_rß_public
–
˘x
, 
sig_åy
, 
vîif
 ) );

1103  
diff
 = 0, 
i
 = 0; i < 
˘x
->
Àn
; i++ )

1104 
diff
 |
vîif
[
i
] ^ 
sig
[i];

1105 
diff_no_›timize
 = 
diff
;

1107 if–
diff_no_›timize
 != 0 )

1109 
ªt
 = 
MBEDTLS_ERR_RSA_PRIVATE_FAILED
;

1110 
˛ónup
;

1113 
	`mem˝y
–
sig
, 
sig_åy
, 
˘x
->
Àn
 );

1115 
˛ónup
:

1116 
	`mbedés_‰ì
–
sig_åy
 );

1117 
	`mbedés_‰ì
–
vîif
 );

1119 –
ªt
 );

1120 
	}
}

1126 
	$mbedés_rß_pkcs1_sign
–
mbedés_rß_c⁄ãxt
 *
˘x
,

1127 (*
f_∫g
)(*, *, 
size_t
),

1128 *
p_∫g
,

1129 
mode
,

1130 
mbedés_md_ty≥_t
 
md_Æg
,

1131 
hashÀn
,

1132 c⁄° *
hash
,

1133 *
sig
 )

1135  
˘x
->
∑ddög
 )

1137 #i‡
	`deföed
(
MBEDTLS_PKCS1_V15
)

1138 
MBEDTLS_RSA_PKCS_V15
:

1139  
	`mbedés_rß_rßsß_pkcs1_v15_sign
–
˘x
, 
f_∫g
, 
p_∫g
, 
mode
, 
md_Æg
,

1140 
hashÀn
, 
hash
, 
sig
 );

1143 #i‡
	`deföed
(
MBEDTLS_PKCS1_V21
)

1144 
MBEDTLS_RSA_PKCS_V21
:

1145  
	`mbedés_rß_rßsß_pss_sign
–
˘x
, 
f_∫g
, 
p_∫g
, 
mode
, 
md_Æg
,

1146 
hashÀn
, 
hash
, 
sig
 );

1150 –
MBEDTLS_ERR_RSA_INVALID_PADDING
 );

1152 
	}
}

1154 #i‡
deföed
(
MBEDTLS_PKCS1_V21
)

1158 
	$mbedés_rß_rßsß_pss_vîify_ext
–
mbedés_rß_c⁄ãxt
 *
˘x
,

1159 (*
f_∫g
)(*, *, 
size_t
),

1160 *
p_∫g
,

1161 
mode
,

1162 
mbedés_md_ty≥_t
 
md_Æg
,

1163 
hashÀn
,

1164 c⁄° *
hash
,

1165 
mbedés_md_ty≥_t
 
mgf1_hash_id
,

1166 
ex≥˘ed_ß…_Àn
,

1167 c⁄° *
sig
 )

1169 
ªt
;

1170 
size_t
 
sigÀn
;

1171 *
p
;

1172 
buf
[
MBEDTLS_MPI_MAX_SIZE
];

1173 
ªsu…
[
MBEDTLS_MD_MAX_SIZE
];

1174 
zîos
[8];

1175 
hÀn
;

1176 
size_t
 
¶í
, 
msb
;

1177 c⁄° 
mbedés_md_öfo_t
 *
md_öfo
;

1178 
mbedés_md_c⁄ãxt_t
 
md_˘x
;

1180 if–
mode
 =
MBEDTLS_RSA_PRIVATE
 && 
˘x
->
∑ddög
 !
MBEDTLS_RSA_PKCS_V21
 )

1181 –
MBEDTLS_ERR_RSA_BAD_INPUT_DATA
 );

1183 
sigÀn
 = 
˘x
->
Àn
;

1185 if–
sigÀn
 < 16 || sigÀ¿> –
buf
 ) )

1186 –
MBEDTLS_ERR_RSA_BAD_INPUT_DATA
 );

1188 
ªt
 = ( 
mode
 =
MBEDTLS_RSA_PUBLIC
 )

1189 ? 
	`mbedés_rß_public
–
˘x
, 
sig
, 
buf
 )

1190 : 
	`mbedés_rß_¥iv©e
–
˘x
, 
f_∫g
, 
p_∫g
, 
sig
, 
buf
 );

1192 if–
ªt
 != 0 )

1193 –
ªt
 );

1195 
p
 = 
buf
;

1197 if–
buf
[
sigÀn
 - 1] != 0xBC )

1198 –
MBEDTLS_ERR_RSA_INVALID_PADDING
 );

1200 if–
md_Æg
 !
MBEDTLS_MD_NONE
 )

1204 
md_öfo
 = 
	`mbedés_md_öfo_‰om_ty≥
–
md_Æg
 );

1205 if–
md_öfo
 =
NULL
 )

1206 –
MBEDTLS_ERR_RSA_BAD_INPUT_DATA
 );

1208 
hashÀn
 = 
	`mbedés_md_gë_size
–
md_öfo
 );

1211 
md_öfo
 = 
	`mbedés_md_öfo_‰om_ty≥
–
mgf1_hash_id
 );

1212 if–
md_öfo
 =
NULL
 )

1213 –
MBEDTLS_ERR_RSA_BAD_INPUT_DATA
 );

1215 
hÀn
 = 
	`mbedés_md_gë_size
–
md_öfo
 );

1216 
¶í
 = 
sigÀn
 - 
hÀn
 - 1;

1218 
	`mem£t
–
zîos
, 0, 8 );

1222 
msb
 = 
	`mbedés_mpi_bôÀn
–&
˘x
->
N
 ) - 1;

1226 if–
msb
 % 8 == 0 )

1228 
p
++;

1229 
sigÀn
 -= 1;

1231 if–
buf
[0] >> ( 8 - 
sigÀn
 * 8 + 
msb
 ) )

1232 –
MBEDTLS_ERR_RSA_BAD_INPUT_DATA
 );

1234 
	`mbedés_md_öô
–&
md_˘x
 );

1235 
	`mbedés_md_£tup
–&
md_˘x
, 
md_öfo
, 0 );

1237 
	`mgf_mask
–
p
, 
sigÀn
 - 
hÀn
 - 1,Ö + sigÀ¿- hÀ¿- 1, hÀn, &
md_˘x
 );

1239 
buf
[0] &0xFF >> ( 
sigÀn
 * 8 - 
msb
 );

1241  
p
 < 
buf
 + 
sigÀn
 && *p == 0 )

1242 
p
++;

1244 if–
p
 =
buf
 + 
sigÀn
 ||

1245 *
p
++ != 0x01 )

1247 
	`mbedés_md_‰ì
–&
md_˘x
 );

1248 –
MBEDTLS_ERR_RSA_INVALID_PADDING
 );

1252 
¶í
 -
p
 - 
buf
;

1254 if–
ex≥˘ed_ß…_Àn
 !
MBEDTLS_RSA_SALT_LEN_ANY
 &&

1255 
¶í
 !(
size_t
Ë
ex≥˘ed_ß…_Àn
 )

1257 
	`mbedés_md_‰ì
–&
md_˘x
 );

1258 –
MBEDTLS_ERR_RSA_INVALID_PADDING
 );

1263 
	`mbedés_md_°¨ts
–&
md_˘x
 );

1264 
	`mbedés_md_upd©e
–&
md_˘x
, 
zîos
, 8 );

1265 
	`mbedés_md_upd©e
–&
md_˘x
, 
hash
, 
hashÀn
 );

1266 
	`mbedés_md_upd©e
–&
md_˘x
, 
p
, 
¶í
 );

1267 
	`mbedés_md_föish
–&
md_˘x
, 
ªsu…
 );

1269 
	`mbedés_md_‰ì
–&
md_˘x
 );

1271 if–
	`memcmp
–
p
 + 
¶í
, 
ªsu…
, 
hÀn
 ) == 0 )

1274 –
MBEDTLS_ERR_RSA_VERIFY_FAILED
 );

1275 
	}
}

1280 
	$mbedés_rß_rßsß_pss_vîify
–
mbedés_rß_c⁄ãxt
 *
˘x
,

1281 (*
f_∫g
)(*, *, 
size_t
),

1282 *
p_∫g
,

1283 
mode
,

1284 
mbedés_md_ty≥_t
 
md_Æg
,

1285 
hashÀn
,

1286 c⁄° *
hash
,

1287 c⁄° *
sig
 )

1289 
mbedés_md_ty≥_t
 
mgf1_hash_id
 = ( 
˘x
->
hash_id
 !
MBEDTLS_MD_NONE
 )

1290 ? (
mbedés_md_ty≥_t
Ë
˘x
->
hash_id


1291 : 
md_Æg
;

1293 –
	`mbedés_rß_rßsß_pss_vîify_ext
–
˘x
, 
f_∫g
, 
p_∫g
, 
mode
,

1294 
md_Æg
, 
hashÀn
, 
hash
,

1295 
mgf1_hash_id
, 
MBEDTLS_RSA_SALT_LEN_ANY
,

1296 
sig
 ) );

1298 
	}
}

1301 #i‡
deföed
(
MBEDTLS_PKCS1_V15
)

1305 
	$mbedés_rß_rßsß_pkcs1_v15_vîify
–
mbedés_rß_c⁄ãxt
 *
˘x
,

1306 (*
f_∫g
)(*, *, 
size_t
),

1307 *
p_∫g
,

1308 
mode
,

1309 
mbedés_md_ty≥_t
 
md_Æg
,

1310 
hashÀn
,

1311 c⁄° *
hash
,

1312 c⁄° *
sig
 )

1314 
ªt
;

1315 
size_t
 
Àn
, 
sigÀn
, 
a¢1_Àn
;

1316 *
p
, *
íd
;

1317 
buf
[
MBEDTLS_MPI_MAX_SIZE
];

1318 
mbedés_md_ty≥_t
 
msg_md_Æg
;

1319 c⁄° 
mbedés_md_öfo_t
 *
md_öfo
;

1320 
mbedés_a¢1_buf
 
oid
;

1322 if–
mode
 =
MBEDTLS_RSA_PRIVATE
 && 
˘x
->
∑ddög
 !
MBEDTLS_RSA_PKCS_V15
 )

1323 –
MBEDTLS_ERR_RSA_BAD_INPUT_DATA
 );

1325 
sigÀn
 = 
˘x
->
Àn
;

1327 if–
sigÀn
 < 16 || sigÀ¿> –
buf
 ) )

1328 –
MBEDTLS_ERR_RSA_BAD_INPUT_DATA
 );

1330 
ªt
 = ( 
mode
 =
MBEDTLS_RSA_PUBLIC
 )

1331 ? 
	`mbedés_rß_public
–
˘x
, 
sig
, 
buf
 )

1332 : 
	`mbedés_rß_¥iv©e
–
˘x
, 
f_∫g
, 
p_∫g
, 
sig
, 
buf
 );

1334 if–
ªt
 != 0 )

1335 –
ªt
 );

1337 
p
 = 
buf
;

1339 if–*
p
++ !0 || *p++ !
MBEDTLS_RSA_SIGN
 )

1340 –
MBEDTLS_ERR_RSA_INVALID_PADDING
 );

1342  *
p
 != 0 )

1344 if–
p
 >
buf
 + 
sigÀn
 - 1 || *p != 0xFF )

1345 –
MBEDTLS_ERR_RSA_INVALID_PADDING
 );

1346 
p
++;

1348 
p
++;

1350 
Àn
 = 
sigÀn
 - ( 
p
 - 
buf
 );

1352 if–
Àn
 =
hashÀn
 && 
md_Æg
 =
MBEDTLS_MD_NONE
 )

1354 if–
	`memcmp
–
p
, 
hash
, 
hashÀn
 ) == 0 )

1357 –
MBEDTLS_ERR_RSA_VERIFY_FAILED
 );

1360 
md_öfo
 = 
	`mbedés_md_öfo_‰om_ty≥
–
md_Æg
 );

1361 if–
md_öfo
 =
NULL
 )

1362 –
MBEDTLS_ERR_RSA_BAD_INPUT_DATA
 );

1363 
hashÀn
 = 
	`mbedés_md_gë_size
–
md_öfo
 );

1365 
íd
 = 
p
 + 
Àn
;

1369 if––
ªt
 = 
	`mbedés_a¢1_gë_èg
–&
p
, 
íd
, &
a¢1_Àn
,

1370 
MBEDTLS_ASN1_CONSTRUCTED
 | 
MBEDTLS_ASN1_SEQUENCE
 ) ) != 0 )

1371 –
MBEDTLS_ERR_RSA_VERIFY_FAILED
 );

1373 if–
a¢1_Àn
 + 2 !
Àn
 )

1374 –
MBEDTLS_ERR_RSA_VERIFY_FAILED
 );

1376 if––
ªt
 = 
	`mbedés_a¢1_gë_èg
–&
p
, 
íd
, &
a¢1_Àn
,

1377 
MBEDTLS_ASN1_CONSTRUCTED
 | 
MBEDTLS_ASN1_SEQUENCE
 ) ) != 0 )

1378 –
MBEDTLS_ERR_RSA_VERIFY_FAILED
 );

1380 if–
a¢1_Àn
 + 6 + 
hashÀn
 !
Àn
 )

1381 –
MBEDTLS_ERR_RSA_VERIFY_FAILED
 );

1383 if––
ªt
 = 
	`mbedés_a¢1_gë_èg
–&
p
, 
íd
, &
oid
.
Àn
, 
MBEDTLS_ASN1_OID
 ) ) != 0 )

1384 –
MBEDTLS_ERR_RSA_VERIFY_FAILED
 );

1386 
oid
.
p
 =Ö;

1387 
p
 +
oid
.
Àn
;

1389 if–
	`mbedés_oid_gë_md_Æg
–&
oid
, &
msg_md_Æg
 ) != 0 )

1390 –
MBEDTLS_ERR_RSA_VERIFY_FAILED
 );

1392 if–
md_Æg
 !
msg_md_Æg
 )

1393 –
MBEDTLS_ERR_RSA_VERIFY_FAILED
 );

1398 if––
ªt
 = 
	`mbedés_a¢1_gë_èg
–&
p
, 
íd
, &
a¢1_Àn
, 
MBEDTLS_ASN1_NULL
 ) ) != 0 )

1399 –
MBEDTLS_ERR_RSA_VERIFY_FAILED
 );

1401 if––
ªt
 = 
	`mbedés_a¢1_gë_èg
–&
p
, 
íd
, &
a¢1_Àn
, 
MBEDTLS_ASN1_OCTET_STRING
 ) ) != 0 )

1402 –
MBEDTLS_ERR_RSA_VERIFY_FAILED
 );

1404 if–
a¢1_Àn
 !
hashÀn
 )

1405 –
MBEDTLS_ERR_RSA_VERIFY_FAILED
 );

1407 if–
	`memcmp
–
p
, 
hash
, 
hashÀn
 ) != 0 )

1408 –
MBEDTLS_ERR_RSA_VERIFY_FAILED
 );

1410 
p
 +
hashÀn
;

1412 if–
p
 !
íd
 )

1413 –
MBEDTLS_ERR_RSA_VERIFY_FAILED
 );

1416 
	}
}

1422 
	$mbedés_rß_pkcs1_vîify
–
mbedés_rß_c⁄ãxt
 *
˘x
,

1423 (*
f_∫g
)(*, *, 
size_t
),

1424 *
p_∫g
,

1425 
mode
,

1426 
mbedés_md_ty≥_t
 
md_Æg
,

1427 
hashÀn
,

1428 c⁄° *
hash
,

1429 c⁄° *
sig
 )

1431  
˘x
->
∑ddög
 )

1433 #i‡
	`deföed
(
MBEDTLS_PKCS1_V15
)

1434 
MBEDTLS_RSA_PKCS_V15
:

1435  
	`mbedés_rß_rßsß_pkcs1_v15_vîify
–
˘x
, 
f_∫g
, 
p_∫g
, 
mode
, 
md_Æg
,

1436 
hashÀn
, 
hash
, 
sig
 );

1439 #i‡
	`deföed
(
MBEDTLS_PKCS1_V21
)

1440 
MBEDTLS_RSA_PKCS_V21
:

1441  
	`mbedés_rß_rßsß_pss_vîify
–
˘x
, 
f_∫g
, 
p_∫g
, 
mode
, 
md_Æg
,

1442 
hashÀn
, 
hash
, 
sig
 );

1446 –
MBEDTLS_ERR_RSA_INVALID_PADDING
 );

1448 
	}
}

1453 
	$mbedés_rß_c›y
–
mbedés_rß_c⁄ãxt
 *
d°
, c⁄° mbedés_rß_c⁄ãxà*
§c
 )

1455 
ªt
;

1457 
d°
->
vî
 = 
§c
->ver;

1458 
d°
->
Àn
 = 
§c
->len;

1460 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_c›y
–&
d°
->
N
, &
§c
->N ) );

1461 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_c›y
–&
d°
->
E
, &
§c
->E ) );

1463 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_c›y
–&
d°
->
D
, &
§c
->D ) );

1464 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_c›y
–&
d°
->
P
, &
§c
->P ) );

1465 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_c›y
–&
d°
->
Q
, &
§c
->Q ) );

1466 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_c›y
–&
d°
->
DP
, &
§c
->DP ) );

1467 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_c›y
–&
d°
->
DQ
, &
§c
->DQ ) );

1468 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_c›y
–&
d°
->
QP
, &
§c
->QP ) );

1470 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_c›y
–&
d°
->
RN
, &
§c
->RN ) );

1471 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_c›y
–&
d°
->
RP
, &
§c
->RP ) );

1472 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_c›y
–&
d°
->
RQ
, &
§c
->RQ ) );

1474 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_c›y
–&
d°
->
Vi
, &
§c
->Vi ) );

1475 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_c›y
–&
d°
->
Vf
, &
§c
->Vf ) );

1477 
d°
->
∑ddög
 = 
§c
->padding;

1478 
d°
->
hash_id
 = 
§c
->hash_id;

1480 
˛ónup
:

1481 if–
ªt
 != 0 )

1482 
	`mbedés_rß_‰ì
–
d°
 );

1484 –
ªt
 );

1485 
	}
}

1490 
	$mbedés_rß_‰ì
–
mbedés_rß_c⁄ãxt
 *
˘x
 )

1492 
	`mbedés_mpi_‰ì
–&
˘x
->
Vi
 ); mbedés_mpi_‰ì–&˘x->
Vf
 );

1493 
	`mbedés_mpi_‰ì
–&
˘x
->
RQ
 ); mbedés_mpi_‰ì–&˘x->
RP
 ); mbedés_mpi_‰ì–&˘x->
RN
 );

1494 
	`mbedés_mpi_‰ì
–&
˘x
->
QP
 ); mbedés_mpi_‰ì–&˘x->
DQ
 ); mbedés_mpi_‰ì–&˘x->
DP
 );

1495 
	`mbedés_mpi_‰ì
–&
˘x
->
Q
 ); mbedés_mpi_‰ì–&˘x->
P
 ); mbedés_mpi_‰ì–&˘x->
D
 );

1496 
	`mbedés_mpi_‰ì
–&
˘x
->
E
 ); mbedés_mpi_‰ì–&˘x->
N
 );

1498 #i‡
	`deföed
(
MBEDTLS_THREADING_C
)

1499 
	`mbedés_muãx_‰ì
–&
˘x
->
muãx
 );

1501 
	}
}

1503 #i‡
deföed
(
MBEDTLS_SELF_TEST
)

1505 
	~"mbedés/sha1.h
"

1510 
	#KEY_LEN
 128

	)

1512 
	#RSA_N
 "9292758453063D803DD603D5E777D788" \

1519 "5E94BB77B07507233A0BC7BAC8F90F79"

	)

1521 
	#RSA_E
 "10001"

	)

1523 
	#RSA_D
 "24BF6185468786FDD303083D25E64EFC" \

1530 "071513A1E85B5DFA031F21ECAE91A34D"

	)

1532 
	#RSA_P
 "C36D0EB7FCD285223CFB5AABA5BDA3D8" \

1535 "C3D9E75E1EFC42488BB4F1D13AC30A57"

	)

1537 
	#RSA_Q
 "C000DF51A7C77AE8D7C7370C1FF55B69" \

1540 "8452DD96A9A5EA5D9DCA68DA636032AF"

	)

1542 
	#RSA_DP
 "C1ACF567564274FB07A0BBAD5D26E298" \

1545 "3CC559CD27BC2D1CA488811730BB5725"

	)

1547 
	#RSA_DQ
 "4959CBF6F8FEF750AEE6977C155579C7" \

1550 "407A1BD76C164B93DA2D32A383E58357"

	)

1552 
	#RSA_QP
 "9AE7FBC99546432DF71896FC239EADAE" \

1555 "A74206CEC169D74BF5A8C50D6F48EA08"

	)

1557 
	#PT_LEN
 24

	)

1558 
	#RSA_PT
 "\xAA\xBB\xCC\x03\x02\x01\x00\xFF\xFF\xFF\xFF\xFF" \

1559 "\x11\x22\x33\x0A\x0B\x0C\xCC\xDD\xDD\xDD\xDD\xDD"

	)

1560 
	#MBEDTLS_PKCS1_V15


	)

1561 #i‡
deföed
(
MBEDTLS_PKCS1_V15
)

1562 
	$myønd
–*
∫g_°©e
, *
ouçut
, 
size_t
 
Àn
 )

1564 #i‡!
	`deföed
(
__O≥nBSD__
)

1565 
size_t
 
i
;

1567 if–
∫g_°©e
 !
NULL
 )

1568 
∫g_°©e
 = 
NULL
;

1570  
i
 = 0; i < 
Àn
; ++i )

1571 
ouçut
[
i
] = 
	`ønd
();

1573 if–
∫g_°©e
 !
NULL
 )

1574 
∫g_°©e
 = 
NULL
;

1576 
	`¨c4øndom_buf
–
ouçut
, 
Àn
 );

1580 
	}
}

1586 
	$mbedés_rß_£lf_ã°
–
vîbo£
 )

1588 
ªt
 = 0;

1589 #i‡
	`deföed
(
MBEDTLS_PKCS1_V15
)

1590 
size_t
 
Àn
;

1591 
mbedés_rß_c⁄ãxt
 
rß
;

1592 
rß_∂aöãxt
[
PT_LEN
];

1593 
rß_de¸y±ed
[
PT_LEN
];

1594 
rß_cùhîãxt
[
KEY_LEN
];

1595 #i‡
	`deföed
(
MBEDTLS_SHA1_C
)

1596 
sha1sum
[20];

1599 
	`mbedés_rß_öô
–&
rß
, 
MBEDTLS_RSA_PKCS_V15
, 0 );

1601 
rß
.
Àn
 = 
KEY_LEN
;

1602 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_ªad_°rög
–&
rß
.
N
 , 16, 
RSA_N
 ) );

1603 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_ªad_°rög
–&
rß
.
E
 , 16, 
RSA_E
 ) );

1604 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_ªad_°rög
–&
rß
.
D
 , 16, 
RSA_D
 ) );

1605 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_ªad_°rög
–&
rß
.
P
 , 16, 
RSA_P
 ) );

1606 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_ªad_°rög
–&
rß
.
Q
 , 16, 
RSA_Q
 ) );

1607 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_ªad_°rög
–&
rß
.
DP
, 16, 
RSA_DP
 ) );

1608 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_ªad_°rög
–&
rß
.
DQ
, 16, 
RSA_DQ
 ) );

1609 
	`MBEDTLS_MPI_CHK
–
	`mbedés_mpi_ªad_°rög
–&
rß
.
QP
, 16, 
RSA_QP
 ) );

1611 if–
vîbo£
 != 0 )

1612 
	`mbedés_¥ötf
( " RSA key validation: " );

1614 if–
	`mbedés_rß_check_pubkey
–&
rß
 ) != 0 ||

1615 
	`mbedés_rß_check_¥ivkey
–&
rß
 ) != 0 )

1617 if–
vîbo£
 != 0 )

1618 
	`mbedés_¥ötf
( "failed\n" );

1623 if–
vîbo£
 != 0 )

1624 
	`mbedés_¥ötf
( "passed\n PKCS#1Éncryption : " );

1626 
	`mem˝y
–
rß_∂aöãxt
, 
RSA_PT
, 
PT_LEN
 );

1628 if–
	`mbedés_rß_pkcs1_í¸y±
–&
rß
, 
myønd
, 
NULL
, 
MBEDTLS_RSA_PUBLIC
, 
PT_LEN
,

1629 
rß_∂aöãxt
, 
rß_cùhîãxt
 ) != 0 )

1631 if–
vîbo£
 != 0 )

1632 
	`mbedés_¥ötf
( "failed\n" );

1637 if–
vîbo£
 != 0 )

1638 
	`mbedés_¥ötf
( "passed\n PKCS#1 decryption : " );

1640 if–
	`mbedés_rß_pkcs1_de¸y±
–&
rß
, 
myønd
, 
NULL
, 
MBEDTLS_RSA_PRIVATE
, &
Àn
,

1641 
rß_cùhîãxt
, 
rß_de¸y±ed
,

1642 (
rß_de¸y±ed
) ) != 0 )

1644 if–
vîbo£
 != 0 )

1645 
	`mbedés_¥ötf
( "failed\n" );

1650 if–
	`memcmp
–
rß_de¸y±ed
, 
rß_∂aöãxt
, 
Àn
 ) != 0 )

1652 if–
vîbo£
 != 0 )

1653 
	`mbedés_¥ötf
( "failed\n" );

1658 if–
vîbo£
 != 0 )

1659 
	`mbedés_¥ötf
( "passed\n" );

1661 #i‡
	`deföed
(
MBEDTLS_SHA1_C
)

1662 if–
vîbo£
 != 0 )

1663 
	`mbedés_¥ötf
( "PKCS#1 data sign : " );

1665 
	`mbedés_sha1
–
rß_∂aöãxt
, 
PT_LEN
, 
sha1sum
 );

1667 if–
	`mbedés_rß_pkcs1_sign
–&
rß
, 
myønd
, 
NULL
, 
MBEDTLS_RSA_PRIVATE
, 
MBEDTLS_MD_SHA1
, 0,

1668 
sha1sum
, 
rß_cùhîãxt
 ) != 0 )

1670 if–
vîbo£
 != 0 )

1671 
	`mbedés_¥ötf
( "failed\n" );

1676 if–
vîbo£
 != 0 )

1677 
	`mbedés_¥ötf
( "passed\n PKCS#1 sig. verify: " );

1679 if–
	`mbedés_rß_pkcs1_vîify
–&
rß
, 
NULL
, NULL, 
MBEDTLS_RSA_PUBLIC
, 
MBEDTLS_MD_SHA1
, 0,

1680 
sha1sum
, 
rß_cùhîãxt
 ) != 0 )

1682 if–
vîbo£
 != 0 )

1683 
	`mbedés_¥ötf
( "failed\n" );

1688 if–
vîbo£
 != 0 )

1689 
	`mbedés_¥ötf
( "passed\n" );

1692 if–
vîbo£
 != 0 )

1693 
	`mbedés_¥ötf
( "\n" );

1695 
˛ónup
:

1696 
	`mbedés_rß_‰ì
–&
rß
 );

1698 ((Ë
vîbo£
);

1700 –
ªt
 );

1701 
	}
}

	@/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/rsa_encrypt.c

20 #i‡!
deföed
(
MBEDTLS_CONFIG_FILE
)

21 
	~"mbedés/c⁄fig.h
"

23 #ö˛udê
MBEDTLS_CONFIG_FILE


26 #i‡
deföed
(
MBEDTLS_PLATFORM_C
)

27 
	~"mbedés/∂©f‹m.h
"

29 
	~<°dio.h
>

30 
	#mbedés_¥ötf
 
¥ötf


	)

33 #i‡
deföed
(
MBEDTLS_BIGNUM_C
Ë&& deföed(
MBEDTLS_PK_PARSE_C
) && \

34 
deföed
(
MBEDTLS_FS_IO
Ë&& deföed(
MBEDTLS_ENTROPY_C
) && \

35 
	$deföed
(
MBEDTLS_CTR_DRBG_C
)

36 
	~"mbedés/pk.h
"

37 
	~"mbedés/íå›y.h
"

38 
	~"mbedés/˘r_drbg.h
"

40 
	~<°dio.h
>

41 
	~<°rög.h
>

45 #i‡!
	`deföed
(
MBEDTLS_BIGNUM_C
Ë|| !deföed(
MBEDTLS_PK_PARSE_C
) || \

46 !
	`deföed
(
MBEDTLS_FS_IO
Ë|| !deföed(
MBEDTLS_ENTROPY_C
) || \

47 !
	$deföed
(
MBEDTLS_CTR_DRBG_C
)

48 
	$rß_í¸y±
( )

50 
	`mbedés_¥ötf
("MBEDTLS_BIGNUM_Cánd/or MBEDTLS_PK_PARSE_Cánd/or "

54 
	}
}

58 
	gMBEDTLS_FS_IO
 && 
	gMBEDTLS_CTR_DRBG_C
 */

	@/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/sha1.c

27 #i‡!
deföed
(
MBEDTLS_CONFIG_FILE
)

28 
	~"mbedés/c⁄fig.h
"

30 #ö˛udê
MBEDTLS_CONFIG_FILE


33 #i‡
deföed
(
MBEDTLS_SHA1_C
)

35 
	~"mbedés/sha1.h
"

37 
	~<°rög.h
>

39 #i‡
deföed
(
MBEDTLS_SELF_TEST
)

40 #i‡
deföed
(
MBEDTLS_PLATFORM_C
)

41 
	~"mbedés/∂©f‹m.h
"

43 
	~<°dio.h
>

44 
	#mbedés_¥ötf
 
¥ötf


	)

48 #i‡!
deföed
(
MBEDTLS_SHA1_ALT
)

51 
	$mbedés_zîoize
–*
v
, 
size_t
 
n
 ) {

52 vﬁ©ûê*
p
 = 
v
;  
n
-- ) *p++ = 0;

53 
	}
}

58 #i‚de‡
GET_UINT32_BE


59 
	#GET_UINT32_BE
(
n
,
b
,
i
) \

61 (
n
Ë–(
uöt32_t
Ë(
b
)[(
i
) ] << 24 ) \

62 | ( (
uöt32_t
Ë(
b
)[(
i
) + 1] << 16 ) \

63 | ( (
uöt32_t
Ë(
b
)[(
i
) + 2] << 8 ) \

64 | ( (
uöt32_t
Ë(
b
)[(
i
) + 3] ); \

65 }

	)

68 #i‚de‡
PUT_UINT32_BE


69 
	#PUT_UINT32_BE
(
n
,
b
,
i
) \

71 (
b
)[(
i
Ë] = (Ë–(
n
) >> 24 ); \

72 (
b
)[(
i
Ë+ 1] = (Ë–(
n
) >> 16 ); \

73 (
b
)[(
i
Ë+ 2] = (Ë–(
n
) >> 8 ); \

74 (
b
)[(
i
Ë+ 3] = (Ë–(
n
) ); \

75 }

	)

78 
	$mbedés_sha1_öô
–
mbedés_sha1_c⁄ãxt
 *
˘x
 )

80 
	`mem£t
–
˘x
, 0, –
mbedés_sha1_c⁄ãxt
 ) );

81 
	}
}

83 
	$mbedés_sha1_‰ì
–
mbedés_sha1_c⁄ãxt
 *
˘x
 )

85 if–
˘x
 =
NULL
 )

88 
	`mbedés_zîoize
–
˘x
, –
mbedés_sha1_c⁄ãxt
 ) );

89 
	}
}

91 
	$mbedés_sha1_˛⁄e
–
mbedés_sha1_c⁄ãxt
 *
d°
,

92 c⁄° 
mbedés_sha1_c⁄ãxt
 *
§c
 )

94 *
d°
 = *
§c
;

95 
	}
}

100 
	$mbedés_sha1_°¨ts
–
mbedés_sha1_c⁄ãxt
 *
˘x
 )

102 
˘x
->
tŸÆ
[0] = 0;

103 
˘x
->
tŸÆ
[1] = 0;

105 
˘x
->
°©e
[0] = 0x67452301;

106 
˘x
->
°©e
[1] = 0xEFCDAB89;

107 
˘x
->
°©e
[2] = 0x98BADCFE;

108 
˘x
->
°©e
[3] = 0x10325476;

109 
˘x
->
°©e
[4] = 0xC3D2E1F0;

110 
	}
}

112 #i‡!
deföed
(
MBEDTLS_SHA1_PROCESS_ALT
)

113 
	$mbedés_sha1_¥o˚ss
–
mbedés_sha1_c⁄ãxt
 *
˘x
, c⁄° 
d©a
[64] )

115 
uöt32_t
 
ãmp
, 
W
[16], 
A
, 
B
, 
C
, 
D
, 
E
;

117 
	`GET_UINT32_BE
–
W
[ 0], 
d©a
, 0 );

118 
	`GET_UINT32_BE
–
W
[ 1], 
d©a
, 4 );

119 
	`GET_UINT32_BE
–
W
[ 2], 
d©a
, 8 );

120 
	`GET_UINT32_BE
–
W
[ 3], 
d©a
, 12 );

121 
	`GET_UINT32_BE
–
W
[ 4], 
d©a
, 16 );

122 
	`GET_UINT32_BE
–
W
[ 5], 
d©a
, 20 );

123 
	`GET_UINT32_BE
–
W
[ 6], 
d©a
, 24 );

124 
	`GET_UINT32_BE
–
W
[ 7], 
d©a
, 28 );

125 
	`GET_UINT32_BE
–
W
[ 8], 
d©a
, 32 );

126 
	`GET_UINT32_BE
–
W
[ 9], 
d©a
, 36 );

127 
	`GET_UINT32_BE
–
W
[10], 
d©a
, 40 );

128 
	`GET_UINT32_BE
–
W
[11], 
d©a
, 44 );

129 
	`GET_UINT32_BE
–
W
[12], 
d©a
, 48 );

130 
	`GET_UINT32_BE
–
W
[13], 
d©a
, 52 );

131 
	`GET_UINT32_BE
–
W
[14], 
d©a
, 56 );

132 
	`GET_UINT32_BE
–
W
[15], 
d©a
, 60 );

134 
	#S
(
x
,
n
Ë((x <<ÇË| ((x & 0xFFFFFFFFË>> (32 -Ç)))

	)

136 
	#R
(
t
) \

138 
ãmp
 = 
W
[–
t
 - 3 ) & 0x0F] ^ W[(Å - 8 ) & 0x0F] ^ \

139 
W
[–
t
 - 14 ) & 0x0F] ^ W[Å & 0x0F], \

140 –
W
[
t
 & 0x0F] = 
	`S
(
ãmp
,1) ) \

141 )

	)

143 
	#P
(
a
,
b
,
c
,
d
,
e
,
x
) \

145 
e
 +
	`S
(
a
,5Ë+ 
	`F
(
b
,
c
,
d
Ë+ 
K
 + 
x
; b = S(b,30); \

146 }

	)

148 
A
 = 
˘x
->
°©e
[0];

149 
B
 = 
˘x
->
°©e
[1];

150 
C
 = 
˘x
->
°©e
[2];

151 
D
 = 
˘x
->
°©e
[3];

152 
E
 = 
˘x
->
°©e
[4];

154 
	#F
(
x
,
y
,
z
Ë(z ^ (x & (y ^ z)))

	)

155 
	#K
 0x5A827999

	)

157 
	`P
–
A
, 
B
, 
C
, 
D
, 
E
, 
W
[0] );

158 
	`P
–
E
, 
A
, 
B
, 
C
, 
D
, 
W
[1] );

159 
	`P
–
D
, 
E
, 
A
, 
B
, 
C
, 
W
[2] );

160 
	`P
–
C
, 
D
, 
E
, 
A
, 
B
, 
W
[3] );

161 
	`P
–
B
, 
C
, 
D
, 
E
, 
A
, 
W
[4] );

162 
	`P
–
A
, 
B
, 
C
, 
D
, 
E
, 
W
[5] );

163 
	`P
–
E
, 
A
, 
B
, 
C
, 
D
, 
W
[6] );

164 
	`P
–
D
, 
E
, 
A
, 
B
, 
C
, 
W
[7] );

165 
	`P
–
C
, 
D
, 
E
, 
A
, 
B
, 
W
[8] );

166 
	`P
–
B
, 
C
, 
D
, 
E
, 
A
, 
W
[9] );

167 
	`P
–
A
, 
B
, 
C
, 
D
, 
E
, 
W
[10] );

168 
	`P
–
E
, 
A
, 
B
, 
C
, 
D
, 
W
[11] );

169 
	`P
–
D
, 
E
, 
A
, 
B
, 
C
, 
W
[12] );

170 
	`P
–
C
, 
D
, 
E
, 
A
, 
B
, 
W
[13] );

171 
	`P
–
B
, 
C
, 
D
, 
E
, 
A
, 
W
[14] );

172 
	`P
–
A
, 
B
, 
C
, 
D
, 
E
, 
W
[15] );

173 
	`P
–
E
, 
A
, 
B
, 
C
, 
D
, 
	`R
(16) );

174 
	`P
–
D
, 
E
, 
A
, 
B
, 
C
, 
	`R
(17) );

175 
	`P
–
C
, 
D
, 
E
, 
A
, 
B
, 
	`R
(18) );

176 
	`P
–
B
, 
C
, 
D
, 
E
, 
A
, 
	`R
(19) );

178 #unde‡
K


179 #unde‡
F


181 
	#F
(
x
,
y
,
z
Ë(x ^ y ^ z)

	)

182 
	#K
 0x6ED9EBA1

	)

184 
	`P
–
A
, 
B
, 
C
, 
D
, 
E
, 
	`R
(20) );

185 
	`P
–
E
, 
A
, 
B
, 
C
, 
D
, 
	`R
(21) );

186 
	`P
–
D
, 
E
, 
A
, 
B
, 
C
, 
	`R
(22) );

187 
	`P
–
C
, 
D
, 
E
, 
A
, 
B
, 
	`R
(23) );

188 
	`P
–
B
, 
C
, 
D
, 
E
, 
A
, 
	`R
(24) );

189 
	`P
–
A
, 
B
, 
C
, 
D
, 
E
, 
	`R
(25) );

190 
	`P
–
E
, 
A
, 
B
, 
C
, 
D
, 
	`R
(26) );

191 
	`P
–
D
, 
E
, 
A
, 
B
, 
C
, 
	`R
(27) );

192 
	`P
–
C
, 
D
, 
E
, 
A
, 
B
, 
	`R
(28) );

193 
	`P
–
B
, 
C
, 
D
, 
E
, 
A
, 
	`R
(29) );

194 
	`P
–
A
, 
B
, 
C
, 
D
, 
E
, 
	`R
(30) );

195 
	`P
–
E
, 
A
, 
B
, 
C
, 
D
, 
	`R
(31) );

196 
	`P
–
D
, 
E
, 
A
, 
B
, 
C
, 
	`R
(32) );

197 
	`P
–
C
, 
D
, 
E
, 
A
, 
B
, 
	`R
(33) );

198 
	`P
–
B
, 
C
, 
D
, 
E
, 
A
, 
	`R
(34) );

199 
	`P
–
A
, 
B
, 
C
, 
D
, 
E
, 
	`R
(35) );

200 
	`P
–
E
, 
A
, 
B
, 
C
, 
D
, 
	`R
(36) );

201 
	`P
–
D
, 
E
, 
A
, 
B
, 
C
, 
	`R
(37) );

202 
	`P
–
C
, 
D
, 
E
, 
A
, 
B
, 
	`R
(38) );

203 
	`P
–
B
, 
C
, 
D
, 
E
, 
A
, 
	`R
(39) );

205 #unde‡
K


206 #unde‡
F


208 
	#F
(
x
,
y
,
z
Ë((x & yË| (z & (x | y)))

	)

209 
	#K
 0x8F1BBCDC

	)

211 
	`P
–
A
, 
B
, 
C
, 
D
, 
E
, 
	`R
(40) );

212 
	`P
–
E
, 
A
, 
B
, 
C
, 
D
, 
	`R
(41) );

213 
	`P
–
D
, 
E
, 
A
, 
B
, 
C
, 
	`R
(42) );

214 
	`P
–
C
, 
D
, 
E
, 
A
, 
B
, 
	`R
(43) );

215 
	`P
–
B
, 
C
, 
D
, 
E
, 
A
, 
	`R
(44) );

216 
	`P
–
A
, 
B
, 
C
, 
D
, 
E
, 
	`R
(45) );

217 
	`P
–
E
, 
A
, 
B
, 
C
, 
D
, 
	`R
(46) );

218 
	`P
–
D
, 
E
, 
A
, 
B
, 
C
, 
	`R
(47) );

219 
	`P
–
C
, 
D
, 
E
, 
A
, 
B
, 
	`R
(48) );

220 
	`P
–
B
, 
C
, 
D
, 
E
, 
A
, 
	`R
(49) );

221 
	`P
–
A
, 
B
, 
C
, 
D
, 
E
, 
	`R
(50) );

222 
	`P
–
E
, 
A
, 
B
, 
C
, 
D
, 
	`R
(51) );

223 
	`P
–
D
, 
E
, 
A
, 
B
, 
C
, 
	`R
(52) );

224 
	`P
–
C
, 
D
, 
E
, 
A
, 
B
, 
	`R
(53) );

225 
	`P
–
B
, 
C
, 
D
, 
E
, 
A
, 
	`R
(54) );

226 
	`P
–
A
, 
B
, 
C
, 
D
, 
E
, 
	`R
(55) );

227 
	`P
–
E
, 
A
, 
B
, 
C
, 
D
, 
	`R
(56) );

228 
	`P
–
D
, 
E
, 
A
, 
B
, 
C
, 
	`R
(57) );

229 
	`P
–
C
, 
D
, 
E
, 
A
, 
B
, 
	`R
(58) );

230 
	`P
–
B
, 
C
, 
D
, 
E
, 
A
, 
	`R
(59) );

232 #unde‡
K


233 #unde‡
F


235 
	#F
(
x
,
y
,
z
Ë(x ^ y ^ z)

	)

236 
	#K
 0xCA62C1D6

	)

238 
	`P
–
A
, 
B
, 
C
, 
D
, 
E
, 
	`R
(60) );

239 
	`P
–
E
, 
A
, 
B
, 
C
, 
D
, 
	`R
(61) );

240 
	`P
–
D
, 
E
, 
A
, 
B
, 
C
, 
	`R
(62) );

241 
	`P
–
C
, 
D
, 
E
, 
A
, 
B
, 
	`R
(63) );

242 
	`P
–
B
, 
C
, 
D
, 
E
, 
A
, 
	`R
(64) );

243 
	`P
–
A
, 
B
, 
C
, 
D
, 
E
, 
	`R
(65) );

244 
	`P
–
E
, 
A
, 
B
, 
C
, 
D
, 
	`R
(66) );

245 
	`P
–
D
, 
E
, 
A
, 
B
, 
C
, 
	`R
(67) );

246 
	`P
–
C
, 
D
, 
E
, 
A
, 
B
, 
	`R
(68) );

247 
	`P
–
B
, 
C
, 
D
, 
E
, 
A
, 
	`R
(69) );

248 
	`P
–
A
, 
B
, 
C
, 
D
, 
E
, 
	`R
(70) );

249 
	`P
–
E
, 
A
, 
B
, 
C
, 
D
, 
	`R
(71) );

250 
	`P
–
D
, 
E
, 
A
, 
B
, 
C
, 
	`R
(72) );

251 
	`P
–
C
, 
D
, 
E
, 
A
, 
B
, 
	`R
(73) );

252 
	`P
–
B
, 
C
, 
D
, 
E
, 
A
, 
	`R
(74) );

253 
	`P
–
A
, 
B
, 
C
, 
D
, 
E
, 
	`R
(75) );

254 
	`P
–
E
, 
A
, 
B
, 
C
, 
D
, 
	`R
(76) );

255 
	`P
–
D
, 
E
, 
A
, 
B
, 
C
, 
	`R
(77) );

256 
	`P
–
C
, 
D
, 
E
, 
A
, 
B
, 
	`R
(78) );

257 
	`P
–
B
, 
C
, 
D
, 
E
, 
A
, 
	`R
(79) );

259 #unde‡
K


260 #unde‡
F


262 
˘x
->
°©e
[0] +
A
;

263 
˘x
->
°©e
[1] +
B
;

264 
˘x
->
°©e
[2] +
C
;

265 
˘x
->
°©e
[3] +
D
;

266 
˘x
->
°©e
[4] +
E
;

267 
	}
}

273 
	$mbedés_sha1_upd©e
–
mbedés_sha1_c⁄ãxt
 *
˘x
, c⁄° *
öput
, 
size_t
 
ûí
 )

275 
size_t
 
fûl
;

276 
uöt32_t
 
À·
;

278 if–
ûí
 == 0 )

281 
À·
 = 
˘x
->
tŸÆ
[0] & 0x3F;

282 
fûl
 = 64 - 
À·
;

284 
˘x
->
tŸÆ
[0] +(
uöt32_t
Ë
ûí
;

285 
˘x
->
tŸÆ
[0] &= 0xFFFFFFFF;

287 if–
˘x
->
tŸÆ
[0] < (
uöt32_t
Ë
ûí
 )

288 
˘x
->
tŸÆ
[1]++;

290 if–
À·
 && 
ûí
 >
fûl
 )

292 
	`mem˝y
–(*Ë(
˘x
->
buf„r
 + 
À·
), 
öput
, 
fûl
 );

293 
	`mbedés_sha1_¥o˚ss
–
˘x
, ctx->
buf„r
 );

294 
öput
 +
fûl
;

295 
ûí
 -
fûl
;

296 
À·
 = 0;

299  
ûí
 >= 64 )

301 
	`mbedés_sha1_¥o˚ss
–
˘x
, 
öput
 );

302 
öput
 += 64;

303 
ûí
 -= 64;

306 if–
ûí
 > 0 )

307 
	`mem˝y
–(*Ë(
˘x
->
buf„r
 + 
À·
), 
öput
, 
ûí
 );

308 
	}
}

310 c⁄° 
	gsha1_∑ddög
[64] =

321 
	$mbedés_sha1_föish
–
mbedés_sha1_c⁄ãxt
 *
˘x
, 
ouçut
[20] )

323 
uöt32_t
 
œ°
, 
∑dn
;

324 
uöt32_t
 
high
, 
low
;

325 
msgÀn
[8];

327 
high
 = ( 
˘x
->
tŸÆ
[0] >> 29 )

328 | ( 
˘x
->
tŸÆ
[1] << 3 );

329 
low
 = ( 
˘x
->
tŸÆ
[0] << 3 );

331 
	`PUT_UINT32_BE
–
high
, 
msgÀn
, 0 );

332 
	`PUT_UINT32_BE
–
low
, 
msgÀn
, 4 );

334 
œ°
 = 
˘x
->
tŸÆ
[0] & 0x3F;

335 
∑dn
 = ( 
œ°
 < 56 ) ? ( 56 -Üast ) : ( 120 -Üast );

337 
	`mbedés_sha1_upd©e
–
˘x
, 
sha1_∑ddög
, 
∑dn
 );

338 
	`mbedés_sha1_upd©e
–
˘x
, 
msgÀn
, 8 );

340 
	`PUT_UINT32_BE
–
˘x
->
°©e
[0], 
ouçut
, 0 );

341 
	`PUT_UINT32_BE
–
˘x
->
°©e
[1], 
ouçut
, 4 );

342 
	`PUT_UINT32_BE
–
˘x
->
°©e
[2], 
ouçut
, 8 );

343 
	`PUT_UINT32_BE
–
˘x
->
°©e
[3], 
ouçut
, 12 );

344 
	`PUT_UINT32_BE
–
˘x
->
°©e
[4], 
ouçut
, 16 );

345 
	}
}

352 
	$mbedés_sha1
–c⁄° *
öput
, 
size_t
 
ûí
, 
ouçut
[20] )

354 
mbedés_sha1_c⁄ãxt
 
˘x
;

356 
	`mbedés_sha1_öô
–&
˘x
 );

357 
	`mbedés_sha1_°¨ts
–&
˘x
 );

358 
	`mbedés_sha1_upd©e
–&
˘x
, 
öput
, 
ûí
 );

359 
	`mbedés_sha1_föish
–&
˘x
, 
ouçut
 );

360 
	`mbedés_sha1_‰ì
–&
˘x
 );

361 
	}
}

363 #i‡
deföed
(
MBEDTLS_SELF_TEST
)

367 c⁄° 
	gsha1_ã°_buf
[3][57] =

374 c⁄° 
	gsha1_ã°_buÊí
[3] =

379 c⁄° 
	gsha1_ã°_sum
[3][20] =

392 
	$mbedés_sha1_£lf_ã°
–
vîbo£
 )

394 
i
, 
j
, 
buÊí
, 
ªt
 = 0;

395 
buf
[1024];

396 
sha1sum
[20];

397 
mbedés_sha1_c⁄ãxt
 
˘x
;

399 
	`mbedés_sha1_öô
–&
˘x
 );

404  
i
 = 0; i < 3; i++ )

406 if–
vîbo£
 != 0 )

407 
	`mbedés_¥ötf
–" SHA-1Åe° #%d: ", 
i
 + 1 );

409 
	`mbedés_sha1_°¨ts
–&
˘x
 );

411 if–
i
 == 2 )

413 
	`mem£t
–
buf
, 'a', 
buÊí
 = 1000 );

415  
j
 = 0; j < 1000; j++ )

416 
	`mbedés_sha1_upd©e
–&
˘x
, 
buf
, 
buÊí
 );

419 
	`mbedés_sha1_upd©e
–&
˘x
, 
sha1_ã°_buf
[
i
],

420 
sha1_ã°_buÊí
[
i
] );

422 
	`mbedés_sha1_föish
–&
˘x
, 
sha1sum
 );

424 if–
	`memcmp
–
sha1sum
, 
sha1_ã°_sum
[
i
], 20 ) != 0 )

426 if–
vîbo£
 != 0 )

427 
	`mbedés_¥ötf
( "failed\n" );

429 
ªt
 = 1;

430 
exô
;

433 if–
vîbo£
 != 0 )

434 
	`mbedés_¥ötf
( "passed\n" );

437 if–
vîbo£
 != 0 )

438 
	`mbedés_¥ötf
( "\n" );

440 
exô
:

441 
	`mbedés_sha1_‰ì
–&
˘x
 );

443 –
ªt
 );

444 
	}
}

	@/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/sha256.c

27 #i‡!
deföed
(
MBEDTLS_CONFIG_FILE
)

28 
	~"mbedés/c⁄fig.h
"

30 #ö˛udê
MBEDTLS_CONFIG_FILE


33 #i‡
deföed
(
MBEDTLS_SHA256_C
)

35 
	~"mbedés/sha256.h
"

37 
	~<°rög.h
>

39 #i‡
deföed
(
MBEDTLS_SELF_TEST
)

40 #i‡
deföed
(
MBEDTLS_PLATFORM_C
)

41 
	~"mbedés/∂©f‹m.h
"

43 
	~<°dio.h
>

44 
	#mbedés_¥ötf
 
¥ötf


	)

48 #i‡!
deföed
(
MBEDTLS_SHA256_ALT
)

51 
	$mbedés_zîoize
–*
v
, 
size_t
 
n
 ) {

52 vﬁ©ûê*
p
 = 
v
;  
n
-- ) *p++ = 0;

53 
	}
}

58 #i‚de‡
GET_UINT32_BE


59 
	#GET_UINT32_BE
(
n
,
b
,
i
) \

61 (
n
Ë–(
uöt32_t
Ë(
b
)[(
i
) ] << 24 ) \

62 | ( (
uöt32_t
Ë(
b
)[(
i
) + 1] << 16 ) \

63 | ( (
uöt32_t
Ë(
b
)[(
i
) + 2] << 8 ) \

64 | ( (
uöt32_t
Ë(
b
)[(
i
) + 3] ); \

65 }  0 )

	)

68 #i‚de‡
PUT_UINT32_BE


69 
	#PUT_UINT32_BE
(
n
,
b
,
i
) \

71 (
b
)[(
i
Ë] = (Ë–(
n
) >> 24 ); \

72 (
b
)[(
i
Ë+ 1] = (Ë–(
n
) >> 16 ); \

73 (
b
)[(
i
Ë+ 2] = (Ë–(
n
) >> 8 ); \

74 (
b
)[(
i
Ë+ 3] = (Ë–(
n
) ); \

75 }  0 )

	)

78 
	$mbedés_sha256_öô
–
mbedés_sha256_c⁄ãxt
 *
˘x
 )

80 
	`mem£t
–
˘x
, 0, –
mbedés_sha256_c⁄ãxt
 ) );

81 
	}
}

83 
	$mbedés_sha256_‰ì
–
mbedés_sha256_c⁄ãxt
 *
˘x
 )

85 if–
˘x
 =
NULL
 )

88 
	`mbedés_zîoize
–
˘x
, –
mbedés_sha256_c⁄ãxt
 ) );

89 
	}
}

91 
	$mbedés_sha256_˛⁄e
–
mbedés_sha256_c⁄ãxt
 *
d°
,

92 c⁄° 
mbedés_sha256_c⁄ãxt
 *
§c
 )

94 *
d°
 = *
§c
;

95 
	}
}

100 
	$mbedés_sha256_°¨ts
–
mbedés_sha256_c⁄ãxt
 *
˘x
, 
is224
 )

102 
˘x
->
tŸÆ
[0] = 0;

103 
˘x
->
tŸÆ
[1] = 0;

105 if–
is224
 == 0 )

108 
˘x
->
°©e
[0] = 0x6A09E667;

109 
˘x
->
°©e
[1] = 0xBB67AE85;

110 
˘x
->
°©e
[2] = 0x3C6EF372;

111 
˘x
->
°©e
[3] = 0xA54FF53A;

112 
˘x
->
°©e
[4] = 0x510E527F;

113 
˘x
->
°©e
[5] = 0x9B05688C;

114 
˘x
->
°©e
[6] = 0x1F83D9AB;

115 
˘x
->
°©e
[7] = 0x5BE0CD19;

120 
˘x
->
°©e
[0] = 0xC1059ED8;

121 
˘x
->
°©e
[1] = 0x367CD507;

122 
˘x
->
°©e
[2] = 0x3070DD17;

123 
˘x
->
°©e
[3] = 0xF70E5939;

124 
˘x
->
°©e
[4] = 0xFFC00B31;

125 
˘x
->
°©e
[5] = 0x68581511;

126 
˘x
->
°©e
[6] = 0x64F98FA7;

127 
˘x
->
°©e
[7] = 0xBEFA4FA4;

130 
˘x
->
is224
 = is224;

131 
	}
}

133 #i‡!
deföed
(
MBEDTLS_SHA256_PROCESS_ALT
)

134 c⁄° 
uöt32_t
 
	gK
[] =

154 
	#SHR
(
x
,
n
Ë((x & 0xFFFFFFFFË>>Ç)

	)

155 
	#ROTR
(
x
,
n
Ë(
	`SHR
(x,nË| (x << (32 -Ç)))

	)

157 
	#S0
(
x
Ë(
	`ROTR
(x, 7Ë^ ROTR(x,18Ë^ 
	`SHR
(x, 3))

	)

158 
	#S1
(
x
Ë(
	`ROTR
(x,17Ë^ ROTR(x,19Ë^ 
	`SHR
(x,10))

	)

160 
	#S2
(
x
Ë(
	`ROTR
(x, 2Ë^ ROTR(x,13Ë^ ROTR(x,22))

	)

161 
	#S3
(
x
Ë(
	`ROTR
(x, 6Ë^ ROTR(x,11Ë^ ROTR(x,25))

	)

163 
	#F0
(
x
,
y
,
z
Ë((x & yË| (z & (x | y)))

	)

164 
	#F1
(
x
,
y
,
z
Ë(z ^ (x & (y ^ z)))

	)

166 
	#R
(
t
) \

168 
W
[
t
] = 
	`S1
(W[t - 2]) + W[t - 7] + \

169 
	`S0
(
W
[
t
 - 15]) + W[t - 16] \

170 )

	)

172 
	#P
(
a
,
b
,
c
,
d
,
e
,
f
,
g
,
h
,
x
,
K
) \

174 
ãmp1
 = 
h
 + 
	`S3
(
e
Ë+ 
	`F1
”,
f
,
g
Ë+ 
K
 + 
x
; \

175 
ãmp2
 = 
	`S2
(
a
Ë+ 
	`F0
◊,
b
,
c
); \

176 
d
 +
ãmp1
; 
h
 =Åemp1 + 
ãmp2
; \

177 }

	)

179 
	$mbedés_sha256_¥o˚ss
–
mbedés_sha256_c⁄ãxt
 *
˘x
, c⁄° 
d©a
[64] )

181 
uöt32_t
 
ãmp1
, 
ãmp2
, 
W
[64];

182 
uöt32_t
 
A
[8];

183 
i
;

185  
i
 = 0; i < 8; i++ )

186 
A
[
i
] = 
˘x
->
°©e
[i];

188 #i‡
	`deföed
(
MBEDTLS_SHA256_SMALLER
)

189  
i
 = 0; i < 64; i++ )

191 if–
i
 < 16 )

192 
	`GET_UINT32_BE
–
W
[
i
], 
d©a
, 4 * i );

194 
	`R
–
i
 );

196 
	`P
–
A
[0], A[1], A[2], A[3], A[4], A[5], A[6], A[7], 
W
[
i
], 
K
[i] );

198 
ãmp1
 = 
A
[7]; A[7] = A[6]; A[6] = A[5]; A[5] = A[4]; A[4] = A[3];

199 
A
[3] = A[2]; A[2] = A[1]; A[1] = A[0]; A[0] = 
ãmp1
;

202  
i
 = 0; i < 16; i++ )

203 
	`GET_UINT32_BE
–
W
[
i
], 
d©a
, 4 * i );

205  
i
 = 0; i < 16; i += 8 )

207 
	`P
–
A
[0], A[1], A[2], A[3], A[4], A[5], A[6], A[7], 
W
[
i
+0], 
K
[i+0] );

208 
	`P
–
A
[7], A[0], A[1], A[2], A[3], A[4], A[5], A[6], 
W
[
i
+1], 
K
[i+1] );

209 
	`P
–
A
[6], A[7], A[0], A[1], A[2], A[3], A[4], A[5], 
W
[
i
+2], 
K
[i+2] );

210 
	`P
–
A
[5], A[6], A[7], A[0], A[1], A[2], A[3], A[4], 
W
[
i
+3], 
K
[i+3] );

211 
	`P
–
A
[4], A[5], A[6], A[7], A[0], A[1], A[2], A[3], 
W
[
i
+4], 
K
[i+4] );

212 
	`P
–
A
[3], A[4], A[5], A[6], A[7], A[0], A[1], A[2], 
W
[
i
+5], 
K
[i+5] );

213 
	`P
–
A
[2], A[3], A[4], A[5], A[6], A[7], A[0], A[1], 
W
[
i
+6], 
K
[i+6] );

214 
	`P
–
A
[1], A[2], A[3], A[4], A[5], A[6], A[7], A[0], 
W
[
i
+7], 
K
[i+7] );

217  
i
 = 16; i < 64; i += 8 )

219 
	`P
–
A
[0], A[1], A[2], A[3], A[4], A[5], A[6], A[7], 
	`R
(
i
+0), 
K
[i+0] );

220 
	`P
–
A
[7], A[0], A[1], A[2], A[3], A[4], A[5], A[6], 
	`R
(
i
+1), 
K
[i+1] );

221 
	`P
–
A
[6], A[7], A[0], A[1], A[2], A[3], A[4], A[5], 
	`R
(
i
+2), 
K
[i+2] );

222 
	`P
–
A
[5], A[6], A[7], A[0], A[1], A[2], A[3], A[4], 
	`R
(
i
+3), 
K
[i+3] );

223 
	`P
–
A
[4], A[5], A[6], A[7], A[0], A[1], A[2], A[3], 
	`R
(
i
+4), 
K
[i+4] );

224 
	`P
–
A
[3], A[4], A[5], A[6], A[7], A[0], A[1], A[2], 
	`R
(
i
+5), 
K
[i+5] );

225 
	`P
–
A
[2], A[3], A[4], A[5], A[6], A[7], A[0], A[1], 
	`R
(
i
+6), 
K
[i+6] );

226 
	`P
–
A
[1], A[2], A[3], A[4], A[5], A[6], A[7], A[0], 
	`R
(
i
+7), 
K
[i+7] );

230  
i
 = 0; i < 8; i++ )

231 
˘x
->
°©e
[
i
] +
A
[i];

232 
	}
}

238 
	$mbedés_sha256_upd©e
–
mbedés_sha256_c⁄ãxt
 *
˘x
, c⁄° *
öput
,

239 
size_t
 
ûí
 )

241 
size_t
 
fûl
;

242 
uöt32_t
 
À·
;

244 if–
ûí
 == 0 )

247 
À·
 = 
˘x
->
tŸÆ
[0] & 0x3F;

248 
fûl
 = 64 - 
À·
;

250 
˘x
->
tŸÆ
[0] +(
uöt32_t
Ë
ûí
;

251 
˘x
->
tŸÆ
[0] &= 0xFFFFFFFF;

253 if–
˘x
->
tŸÆ
[0] < (
uöt32_t
Ë
ûí
 )

254 
˘x
->
tŸÆ
[1]++;

256 if–
À·
 && 
ûí
 >
fûl
 )

258 
	`mem˝y
–(*Ë(
˘x
->
buf„r
 + 
À·
), 
öput
, 
fûl
 );

259 
	`mbedés_sha256_¥o˚ss
–
˘x
, ctx->
buf„r
 );

260 
öput
 +
fûl
;

261 
ûí
 -
fûl
;

262 
À·
 = 0;

265  
ûí
 >= 64 )

267 
	`mbedés_sha256_¥o˚ss
–
˘x
, 
öput
 );

268 
öput
 += 64;

269 
ûí
 -= 64;

272 if–
ûí
 > 0 )

273 
	`mem˝y
–(*Ë(
˘x
->
buf„r
 + 
À·
), 
öput
, 
ûí
 );

274 
	}
}

276 c⁄° 
	gsha256_∑ddög
[64] =

287 
	$mbedés_sha256_föish
–
mbedés_sha256_c⁄ãxt
 *
˘x
, 
ouçut
[32] )

289 
uöt32_t
 
œ°
, 
∑dn
;

290 
uöt32_t
 
high
, 
low
;

291 
msgÀn
[8];

293 
high
 = ( 
˘x
->
tŸÆ
[0] >> 29 )

294 | ( 
˘x
->
tŸÆ
[1] << 3 );

295 
low
 = ( 
˘x
->
tŸÆ
[0] << 3 );

297 
	`PUT_UINT32_BE
–
high
, 
msgÀn
, 0 );

298 
	`PUT_UINT32_BE
–
low
, 
msgÀn
, 4 );

300 
œ°
 = 
˘x
->
tŸÆ
[0] & 0x3F;

301 
∑dn
 = ( 
œ°
 < 56 ) ? ( 56 -Üast ) : ( 120 -Üast );

303 
	`mbedés_sha256_upd©e
–
˘x
, 
sha256_∑ddög
, 
∑dn
 );

304 
	`mbedés_sha256_upd©e
–
˘x
, 
msgÀn
, 8 );

306 
	`PUT_UINT32_BE
–
˘x
->
°©e
[0], 
ouçut
, 0 );

307 
	`PUT_UINT32_BE
–
˘x
->
°©e
[1], 
ouçut
, 4 );

308 
	`PUT_UINT32_BE
–
˘x
->
°©e
[2], 
ouçut
, 8 );

309 
	`PUT_UINT32_BE
–
˘x
->
°©e
[3], 
ouçut
, 12 );

310 
	`PUT_UINT32_BE
–
˘x
->
°©e
[4], 
ouçut
, 16 );

311 
	`PUT_UINT32_BE
–
˘x
->
°©e
[5], 
ouçut
, 20 );

312 
	`PUT_UINT32_BE
–
˘x
->
°©e
[6], 
ouçut
, 24 );

314 if–
˘x
->
is224
 == 0 )

315 
	`PUT_UINT32_BE
–
˘x
->
°©e
[7], 
ouçut
, 28 );

316 
	}
}

323 
	$mbedés_sha256
–c⁄° *
öput
, 
size_t
 
ûí
,

324 
ouçut
[32], 
is224
 )

326 
mbedés_sha256_c⁄ãxt
 
˘x
;

328 
	`mbedés_sha256_öô
–&
˘x
 );

329 
	`mbedés_sha256_°¨ts
–&
˘x
, 
is224
 );

330 
	`mbedés_sha256_upd©e
–&
˘x
, 
öput
, 
ûí
 );

331 
	`mbedés_sha256_föish
–&
˘x
, 
ouçut
 );

332 
	`mbedés_sha256_‰ì
–&
˘x
 );

333 
	}
}

335 #i‡
deföed
(
MBEDTLS_SELF_TEST
)

339 c⁄° 
	gsha256_ã°_buf
[3][57] =

346 c⁄° 
	gsha256_ã°_buÊí
[3] =

351 c⁄° 
	gsha256_ã°_sum
[6][32] =

389 
	$mbedés_sha256_£lf_ã°
–
vîbo£
 )

391 
i
, 
j
, 
k
, 
buÊí
, 
ªt
 = 0;

392 
buf
[1024];

393 
sha256sum
[32];

394 
mbedés_sha256_c⁄ãxt
 
˘x
;

396 
	`mbedés_sha256_öô
–&
˘x
 );

398  
i
 = 0; i < 6; i++ )

400 
j
 = 
i
 % 3;

401 
k
 = 
i
 < 3;

403 if–
vîbo£
 != 0 )

404 
	`mbedés_¥ötf
–" SHA-%dÅe° #%d: ", 256 - 
k
 * 32, 
j
 + 1 );

406 
	`mbedés_sha256_°¨ts
–&
˘x
, 
k
 );

408 if–
j
 == 2 )

410 
	`mem£t
–
buf
, 'a', 
buÊí
 = 1000 );

412  
j
 = 0; j < 1000; j++ )

413 
	`mbedés_sha256_upd©e
–&
˘x
, 
buf
, 
buÊí
 );

416 
	`mbedés_sha256_upd©e
–&
˘x
, 
sha256_ã°_buf
[
j
],

417 
sha256_ã°_buÊí
[
j
] );

419 
	`mbedés_sha256_föish
–&
˘x
, 
sha256sum
 );

421 if–
	`memcmp
–
sha256sum
, 
sha256_ã°_sum
[
i
], 32 - 
k
 * 4 ) != 0 )

423 if–
vîbo£
 != 0 )

424 
	`mbedés_¥ötf
( "failed\n" );

426 
ªt
 = 1;

427 
exô
;

430 if–
vîbo£
 != 0 )

431 
	`mbedés_¥ötf
( "passed\n" );

434 if–
vîbo£
 != 0 )

435 
	`mbedés_¥ötf
( "\n" );

437 
exô
:

438 
	`mbedés_sha256_‰ì
–&
˘x
 );

440 –
ªt
 );

441 
	}
}

	@/var/www/html/debian/gateway/kaa/tools/kaa_encryption/kaa_rsa_key_gen_app.c

17 
	~<kØ_rß_key_gí.h
>

21 
ídpoöt_keys_t
 
	gkeys
;

22 
mbedés_pk_c⁄ãxt
 
	gpk_c⁄ãxt_
;

24 
	$maö
()

26 
keys
.
public_key_Àngth
 = 
KAA_RSA_PUBLIC_KEY_LENGTH_MAX
;

27 
keys
.
¥iv©e_key_Àngth
 = 
KAA_RSA_PRIVATE_KEY_LENGTH_MAX
;

29 
îr‹
 = 
	`rß_keys_¸óã
(&
pk_c⁄ãxt_
, 
keys
.
public_key
, &keys.
public_key_Àngth
,

30 
keys
.
¥iv©e_key
, &keys.
¥iv©e_key_Àngth
);

31 i‡(
îr‹
) {

32 
	`¥ötf
("Eº‹: c™'àgíî©êkey†(%i)\n", 
îr‹
);

35 
îr‹
 = 
	`kØ_keys_°‹e
(
keys
.
public_key
, keys.
public_key_Àngth
, keys.
¥iv©e_key
, keys.
¥iv©e_key_Àngth
);

36 i‡(
îr‹
) {

37 
	`¥ötf
("Error: Can't storeÅhe keys\n");

40 
	`mbedés_pk_‰ì
(&
pk_c⁄ãxt_
);

41  
îr‹
 ? 
EXIT_FAILURE
 : 
EXIT_SUCCESS
;

42 
	}
}

	@/var/www/html/debian/gateway/kaa/tools/kaa_encryption/rsa_key_gen/include/kaa_rsa_key_gen.h

21 #i‚de‡
KAA_RSA_KEY_GEN_H_


22 
	#KAA_RSA_KEY_GEN_H_


	)

24 
	~<°dboﬁ.h
>

25 
	~<°ddef.h
>

26 
	~<°döt.h
>

27 
	~<°dio.h
>

28 
	~<sys/°©.h
>

29 
	~<°rög.h
>

30 
	~<°dlib.h
>

32 
	~<mbedés/pk.h
>

33 
	~<mbedés/íå›y.h
>

34 
	~<mbedés/˘r_drbg.h
>

35 
	~<mbedés/md.h
>

36 
	~<mbedés/sha1.h
>

37 
	~<mbedés/ba£64.h
>

40 
	#KAA_KEYS_STORAGE
 "kØ_keys_gí.h"

	)

43 
	#KAA_RSA_KEY_LENGTH
 2048

	)

44 
	#KAA_RSA_EXPONENT
 65537

	)

46 
	#KAA_RSA_PUBLIC_KEY_LENGTH_MAX
 294

	)

47 
	#KAA_RSA_PRIVATE_KEY_LENGTH_MAX
 1200

	)

49 
	#SHA1_LENGTH
 20

	)

51 
	#PRIVATE_KEY
 0

	)

52 
	#PUBLIC_KEY
 1

	)

64 
uöt8_t
 
	mpublic_key
[
KAA_RSA_PUBLIC_KEY_LENGTH_MAX
];

65 
uöt8_t
 
	m¥iv©e_key
[
KAA_RSA_PRIVATE_KEY_LENGTH_MAX
];

66 
size_t
 
	mpublic_key_Àngth
;

67 
size_t
 
	m¥iv©e_key_Àngth
;

68 } 
	tídpoöt_keys_t
;

74 
rß_gíkey
(
mbedés_pk_c⁄ãxt
 *
pk
);

79 
rß_keys_¸óã
(
mbedés_pk_c⁄ãxt
 *
pk
, 
uöt8_t
 *
public_key
,

80 
size_t
 *
public_key_Àngth
, 
uöt8_t
 *
¥iv©e_key
,

81 
size_t
 *
¥iv©e_key_Àngth
);

86 
sha1_‰om_public_key
(
uöt8_t
 *
key
, 
size_t
 
Àngth
, uöt8_à*
sha1
);

91 
sha1_to_ba£64
(
uöt8_t
 *
key
, 
size_t
 
Àngth
, uöt8_à*
ba£64
, size_à
ba£64_Àn
, size_à*
ouçut_Àn
);

96 
kØ_keys_°‹e
(
uöt8_t
 *
public_key
, 
size_t
 
public_key_Àngth
,

97 
uöt8_t
 *
¥iv©e_key
, 
size_t
 
¥iv©e_key_Àngth
);

106 
wrôe_rß_key
(
mbedés_pk_c⁄ãxt
 *
key
, c⁄° *
ouçut_fûe
, 
mode
);

	@/var/www/html/debian/gateway/kaa/tools/kaa_encryption/rsa_key_gen/kaa_rsa_key_gen.c

17 
	~<kØ_rß_key_gí.h
>

18 
	~<as£π.h
>

21 
	#GUARD_IFNDEF
 "#i‚de‡KAA_RSA_KEYS_H_\n"

	)

22 
	#GUARD_DEF
 "#deföêKAA_RSA_KEYS_H_\n\n\n"

	)

23 
	#PUBLIC_KEY_LEN
 "#deföêKAA_RSA_PUBLIC_KEY_LENGTH %zu\n"

	)

24 
	#PRIVATE_KEY_LEN
 "#deföêKAA_RSA_PRIVATE_KEY_LENGTH %zu\n\n\n"

	)

25 
	#KAA_SHA1_PUB_LEN
 "#deföêKAA_SHA1_PUB_LEN %zu\n"

	)

26 
	#KAA_SHA1_PUB_BASE64_LEN
 "#deföêKAA_SHA1_PUB_BASE64_LEN %zu\n\n\n"

	)

27 
	#KEY_STARTS
 "{ "

	)

28 
	#KEY_SEPARATOR
 ", "

	)

29 
	#KEY_ENDS
 " };\n\n"

	)

30 
	#KAA_RSA_PUBLIC_KEY
 "uöt8_àKAA_RSA_PUBLIC_KEY[] = "

	)

31 
	#KAA_RSA_PRIVATE_KEY
 "uöt8_àKAA_RSA_PRIVATE_KEY[] = "

	)

32 
	#KAA_SHA1_PUB
 "uöt8_àKAA_SHA1_PUB[] = "

	)

33 
	#KAA_SHA1_PUB_BASE64
 "uöt8_àKAA_SHA1_PUB_BASE64[] = "

	)

34 
	#GUARD_ENDIF
 "#ídi‡/* KAA_RSA_KEYS_H */\n"

	)

38 
ídpoöt_keys_t
 
	gkeys
;

40 
	$fwrôe_check
(
n
, 
cou¡
)

42  (
n
 !
cou¡
) ? 1 : 0;

43 
	}
}

45 
size_t
 
	$¢¥ötf_check
(
buf„r_size
, 
wrôãn
)

47 ()
buf„r_size
;

48 
	`as£π
(
buf„r_size
 >
wrôãn
);

49  
wrôãn
;

50 
	}
}

57 
	$kØ_wrôe_keys
(
mbedés_pk_c⁄ãxt
 *
pk
, 
uöt8_t
 *
public_key
,

58 
size_t
 *
public_key_Àngth
, 
uöt8_t
 *
¥iv©e_key
,

59 
size_t
 *
¥iv©e_key_Àngth
)

62 
key_Àngth
 = 
	`mbedés_pk_wrôe_pubkey_dî
(
pk
, 
public_key
, *
public_key_Àngth
);

63 i‡(
key_Àngth
 < 0) {

67 *
public_key_Àngth
 = (
size_t
)
key_Àngth
;

69 
key_Àngth
 = 
	`mbedés_pk_wrôe_key_dî
(
pk
, 
¥iv©e_key
, *
¥iv©e_key_Àngth
);

70 i‡(
key_Àngth
 < 0) {

74 *
¥iv©e_key_Àngth
 = 
key_Àngth
;

77 
	}
}

79 
	$rß_keys_¸óã
(
mbedés_pk_c⁄ãxt
 *
pk
, 
uöt8_t
 *
public_key
,

80 
size_t
 *
public_key_Àngth
, 
uöt8_t
 *
¥iv©e_key
,

81 
size_t
 *
¥iv©e_key_Àngth
)

84 i‡(
	`rß_gíkey
(
pk
)) {

88  
	`kØ_wrôe_keys
(
pk
, 
public_key
, 
public_key_Àngth
,

89 
¥iv©e_key
, 
¥iv©e_key_Àngth
);

90 
	}
}

92 
	$rß_gíkey
(
mbedés_pk_c⁄ãxt
 *
pk
)

94 
ªt
 = 0;

95 c⁄° *
≥rs
 = "gen_key";

97 
	`mbedés_pk_öô
(
pk
);

99 
mbedés_˘r_drbg_c⁄ãxt
 
˘r_drbg
;

100 
	`mbedés_˘r_drbg_öô
(&
˘r_drbg
);

102 
mbedés_íå›y_c⁄ãxt
 
íå›y
;

103 
	`mbedés_íå›y_öô
(&
íå›y
);

106 i‡((
ªt
 = 
	`mbedés_˘r_drbg_£ed
(&
˘r_drbg
, 
mbedés_íå›y_func
, &
íå›y
,

107 (c⁄° *Ë
≥rs
,

108 
	`°æí
(
≥rs
))) != 0) {

109 
exô
;

112 i‡((
ªt
 = 
	`mbedés_pk_£tup
(
pk
, 
	`mbedés_pk_öfo_‰om_ty≥
(
MBEDTLS_PK_RSA
))) != 0) {

113 
exô
;

116 
mbedés_rß_c⁄ãxt
 *
c⁄ãxt
 = 
	`mbedés_pk_rß
(*
pk
);

117 
	`mbedés_rß_öô
(
c⁄ãxt
, 
MBEDTLS_RSA_PKCS_V15
, 0);

119 
ªt
 = 
	`mbedés_rß_gí_key
(
c⁄ãxt
, 
mbedés_˘r_drbg_øndom
, &
˘r_drbg
,

120 
KAA_RSA_KEY_LENGTH
, 
KAA_RSA_EXPONENT
);

121 i‡(
ªt
) {

122 
exô
;

125 
exô
:

126 
	`mbedés_˘r_drbg_‰ì
(&
˘r_drbg
);

127 
	`mbedés_íå›y_‰ì
(&
íå›y
);

129  
ªt
;

130 
	}
}

133 
	$°‹e_key
(
FILE
 *
fd
, c⁄° *
¥efix
, 
size_t
 
¥efix_size
,

134 
uöt8_t
 *
key
, 
size_t
 
Àngth
)

136 i‡(!
¥efix
 || !
¥efix_size
 || !
key
 || !
Àngth
) {

139 
buf„r
[512];

140 i‡(
	`fwrôe_check
(
	`fwrôe
(
¥efix
, 
¥efix_size
, 1, 
fd
), 1)) {

143 i‡(
	`Âuts
(
KEY_STARTS
, 
fd
) <= 0) {

147 
size_t
 
i
 = 0; i < 
Àngth
; i++) {

148 
size_t
 
wrôãn
 = 
	`¢¥ötf_check
((
buf„r
) - 1,

149 
	`¢¥ötf
(
buf„r
, (buf„rË- 1, "0x%02X, ", (Ë
key
[
i
]));

150 i‡(
	`fwrôe_check
(
	`fwrôe
(
buf„r
, 
wrôãn
, 1, 
fd
), 1)) {

154 i‡(
	`Âuts
(
KEY_ENDS
, 
fd
) <= 0) {

158 
	}
}

161 
	$sha1_°‹e
(
FILE
 *
fd
, 
uöt8_t
 *
sha1
, 
size_t
 
sha1_Àn
, uöt8_à*
sha1_ba£64
, size_à
sha1_ba£64_Àn
)

163 i‡(
	`°‹e_key
(
fd
, 
KAA_SHA1_PUB
, (KAA_SHA1_PUBË- 1, 
sha1
, 
sha1_Àn
)) {

166 i‡(
	`°‹e_key
(
fd
, 
KAA_SHA1_PUB_BASE64
, (KAA_SHA1_PUB_BASE64Ë- 1, 
sha1_ba£64
, 
sha1_ba£64_Àn
)) {

170 
	}
}

172 
	$sha1_‰om_public_key
(
uöt8_t
 *
key
, 
size_t
 
Àngth
, uöt8_à*
sha1
)

174 i‡(!
key
 || !
Àngth
) {

175 
	`¥ötf
("Can't generate sha1\n");

178 
mbedés_sha1_c⁄ãxt
 
sha1_˘x
;

179 
	`mbedés_sha1_öô
(&
sha1_˘x
);

180 
	`mbedés_sha1_°¨ts
(&
sha1_˘x
);

181 
	`mbedés_sha1_upd©e
(&
sha1_˘x
, (*)
key
, ()
Àngth
);

182 
	`mbedés_sha1_föish
(&
sha1_˘x
, (*)
sha1
);

183 
	`mbedés_sha1_‰ì
(&
sha1_˘x
);

186 
	}
}

188 
	$sha1_to_ba£64
(
uöt8_t
 *
key
, 
size_t
 
Àngth
, uöt8_à*
ba£64
, size_à
ba£64_Àn
, size_à*
ouçut_Àn
)

190 i‡(!
key
 || !
Àngth
) {

191 
	`¥ötf
("Can't generate base64Ñepresentation ofÅheÖublic key\n");

195  
	`mbedés_ba£64_ícode
((*)
ba£64
, 
ba£64_Àn
, 
ouçut_Àn
, 
key
, 
Àngth
);

196 
	}
}

198 
	$kØ_keys_°‹e
(
uöt8_t
 *
public_key
, 
size_t
 
public_key_Àngth
,

199 
uöt8_t
 *
¥iv©e_key
, 
size_t
 
¥iv©e_key_Àngth
)

201 
FILE
 *
fd
 = 
	`f›í
(
KAA_KEYS_STORAGE
, "w");

202 i‡(!
fd
) {

206 
îr‹
 = 0;

207 
size_t
 
wrôãn
;

208 
buf„r
[512];

209 i‡(
	`Âuts
(
GUARD_IFNDEF
, 
fd
) <= 0) {

210 
îr‹
 = 1;

211 
exô
;

213 i‡(
	`Âuts
(
GUARD_DEF
, 
fd
) <= 0) {

214 
îr‹
 = 1;

215 
exô
;

218 
wrôãn
 = 
	`¢¥ötf_check
((
buf„r
Ë- 1, 
	`¢¥ötf
(buf„r, (buf„rË- 1, 
PUBLIC_KEY_LEN
, 
public_key_Àngth
));

219 i‡(
	`fwrôe_check
(
	`fwrôe
(
buf„r
, 
wrôãn
, 1, 
fd
), 1)) {

220 
îr‹
 = 1;

221 
exô
;

224 
wrôãn
 = 
	`¢¥ötf_check
((
buf„r
Ë- 1, 
	`¢¥ötf
(buf„r, (buf„rË- 1, 
PRIVATE_KEY_LEN
, 
¥iv©e_key_Àngth
));

225 i‡(
	`fwrôe_check
(
	`fwrôe
(
buf„r
, 
wrôãn
, 1, 
fd
), 1)) {

226 
îr‹
 = 1;

227 
exô
;

231 
uöt8_t
 *
key_begös
 = 
public_key
 + 
KAA_RSA_PUBLIC_KEY_LENGTH_MAX
 - 
public_key_Àngth
;

232 i‡(
	`°‹e_key
(
fd
, 
KAA_RSA_PUBLIC_KEY
, (KAA_RSA_PUBLIC_KEYË- 1, 
key_begös
, 
public_key_Àngth
)) {

233 
îr‹
 = 1;

234 
exô
;

237 
key_begös
 = 
¥iv©e_key
 + 
KAA_RSA_PRIVATE_KEY_LENGTH_MAX
 - 
¥iv©e_key_Àngth
;

238 i‡(
	`°‹e_key
(
fd
, 
KAA_RSA_PRIVATE_KEY
, (KAA_RSA_PRIVATE_KEYË- 1, 
key_begös
, 
¥iv©e_key_Àngth
)) {

239 
îr‹
 = 1;

240 
exô
;

243 
size_t
 
sha1_ba£64_Àn
 = 0;

244 
uöt8_t
 
sha1
[
SHA1_LENGTH
];

245 
sha1_ba£64_buf„r
[1024];

246 
	`mem£t
(
sha1_ba£64_buf„r
, 0, (sha1_base64_buffer));

247 
	`sha1_‰om_public_key
(
keys
.
public_key
, keys.
public_key_Àngth
, 
sha1
);

249 
îr‹
 = 
	`sha1_to_ba£64
(
sha1
, (sha1), 
sha1_ba£64_buf„r
, (sha1_ba£64_buf„r), &
sha1_ba£64_Àn
);

250 i‡(
îr‹
) {

251 
	`¥ötf
("Error whileÉncoding base64");

252 
exô
;

255 
wrôãn
 = 
	`¢¥ötf_check
((
buf„r
Ë- 1, 
	`¢¥ötf
(buf„r, (buf„rË- 1, 
KAA_SHA1_PUB_LEN
, (
sha1
)));

256 i‡(
	`fwrôe_check
(
	`fwrôe
(
buf„r
, 
wrôãn
, 1, 
fd
), 1)) {

257 
îr‹
 = 1;

258 
exô
;

261 
wrôãn
 = 
	`¢¥ötf_check
((
buf„r
Ë- 1, 
	`¢¥ötf
(buf„r, (buf„rË- 1, 
KAA_SHA1_PUB_BASE64_LEN
, 
sha1_ba£64_Àn
));

262 i‡(
	`fwrôe_check
(
	`fwrôe
(
buf„r
, 
wrôãn
, 1, 
fd
), 1)) {

263 
îr‹
 = 1;

264 
exô
;

267 
îr‹
 = 
	`sha1_°‹e
(
fd
, 
sha1
, (sha1), 
sha1_ba£64_buf„r
, 
sha1_ba£64_Àn
);

268 i‡(
îr‹
) {

269 
	`¥ötf
("Can't store sha1\n");

272 i‡(
	`Âuts
(
GUARD_ENDIF
, 
fd
) <= 0) {

273 
îr‹
 = 1;

276 
exô
:

277 
	`f˛o£
(
fd
);

278  
îr‹
;

279 
	}
}

281 
	$wrôe_rß_key
(
mbedés_pk_c⁄ãxt
 *
key
, c⁄° *
ouçut_fûe
, 
mode
)

283 
FILE
 *
f
;

284 
ouçut_buf
[16000];

285 *
c
 = 
ouçut_buf
;

286 
size_t
 
Àn
 = 0;

288 
	`mem£t
(
ouçut_buf
, 0, 16000);

289 i‡(
mode
 =
PRIVATE_KEY
) {

290 i‡(
	`mbedés_pk_wrôe_key_≥m
–
key
, 
ouçut_buf
, 16000) != 0) {

293 } i‡(
mode
 =
PUBLIC_KEY
) {

294 i‡(
	`mbedés_pk_wrôe_pubkey_≥m
(
key
, 
ouçut_buf
, 16000) != 0) {

301 
Àn
 = 
	`°æí
((*)
ouçut_buf
 );

303 i‡((
f
 = 
	`f›í
–
ouçut_fûe
, "wb")Ë=
NULL
) {

307 i‡(
	`fwrôe
(
c
, 1, 
Àn
, 
f
) !=Üen)

309 
	`f˛o£
(
f
);

313 
	`f˛o£
(
f
);

316 
	}
}

	@/var/www/html/debian/gateway/main.c

1 
	~<°dio.h
>

2 
	~<°dlib.h
>

3 
	~<°döt.h
>

4 
	~<time.h
>

5 
	~<±hªad.h
>

6 
	~<kØ.h
>

7 
	~<∂©f‹m/kØ_˛õ¡.h
>

8 
	~<kØ_îr‹.h
>

9 
	~<kØ_c⁄figuøti⁄_m™agî.h
>

10 
	~<kØ_loggög.h
>

11 
	~<gí/kØ_loggög_gí.h
>

12 
	~<∂©f‹m/kØ_˛õ¡.h
>

13 
	~<utûôõs/kØ_log.h
>

15 
	~"avro_§c/avro/io.h
"

16 
	~"avro_§c/ícodög.h
"

17 
	~"utûôõs/kØ_mem.h
"

19 
	~<∂©f‹m-im∂/comm⁄/ext_log_u∂ﬂd_°øãgõs.h
>

22 
	~"js⁄-c/js⁄.h
"

23 
	~"MQTTAsync.h
"

24 
	~"MQTTClõ¡Pîsi°í˚.h
"

26 
	~<°dio.h
>

27 
	~<sig«l.h
>

28 
	~<°rög.h
>

29 
	~<°dlib.h
>

31 
	~<sys/time.h
>

32 
	~<uni°d.h
>

34 vﬁ©ûê
	gföished
 = 0;

36 
	gsubs¸ibed
 = 0;

37 
	gdisc⁄√˘ed
 = 0;

39 *
	gt›ic
 = "kaa/12";

40 *
	g˛õ¡id
 = "paho-c-sub";

41 
	gqos
 = 0;

47 
	gkì∑live
 = 10;

48 
	gMQTTVîsi⁄
 = 
MQTTVERSION_DEFAULT
;

50 
±hªad_t
 
	gt_mqâ
;

52 
öt32_t
 
	gãm≥øtuª
 = -1;

54 
	$mesßgeAºived
(*
c⁄ãxt
, *
t›icName
, 
t›icLí
, 
MQTTAsync_mesßge
 *
mesßge
) {

55 
js⁄_obje˘
 *
jobj
;

57 
	`¥ötf
("%d %s\t", 
mesßge
->
∑ylﬂdÀn
, 
t›icName
);

58 
	`¥ötf
("%.*s\n", 
mesßge
->
∑ylﬂdÀn
, (*)mesßge->
∑ylﬂd
);

59 
buf
[
BUFSIZ
] = "";

60 
	`•rötf
(
buf
, "%.*s\n", 
mesßge
->
∑ylﬂdÀn
, (*)mesßge->
∑ylﬂd
);

62 
jobj
 = 
	`js⁄_tokíî_∑r£
(
buf
);

63 
	`¥ötf
("JSON:\n%s\n\n", 
	`js⁄_obje˘_to_js⁄_°rög_ext
(
jobj
, 
JSON_C_TO_STRING_SPACED
 | 
JSON_C_TO_STRING_PRETTY
));

65 
ãm≥øtuª
 = 
	`©oi
(
buf
);

66 
	`¥ötf
("ãm≥øtuª = %d \n", 
ãm≥øtuª
);

67 
	`fÊush
(
°dout
);

70 
	`MQTTAsync_‰ìMesßge
(&
mesßge
);

71 
	`MQTTAsync_‰ì
(
t›icName
);

73 
	}
}

75 
	$⁄Disc⁄√˘
(* 
c⁄ãxt
, 
MQTTAsync_suc˚ssD©a
* 
ª•⁄£
) {

76 
disc⁄√˘ed
 = 1;

77 
	}
}

79 
	$⁄Subs¸ibe
(* 
c⁄ãxt
, 
MQTTAsync_suc˚ssD©a
* 
ª•⁄£
) {

80 
subs¸ibed
 = 1;

81 
	}
}

83 
	$⁄Subs¸ibeFaûuª
(* 
c⁄ãxt
, 
MQTTAsync_ÁûuªD©a
* 
ª•⁄£
) {

84 
	`Ârötf
(
°dîr
, "Subs¸ibêÁûed,Ñ¯%s\n", 
	`MQTTAsync_°ªº‹
(
ª•⁄£
->
code
));

85 
föished
 = 1;

86 
	}
}

88 
	$⁄C⁄√˘Faûuª
(* 
c⁄ãxt
, 
MQTTAsync_ÁûuªD©a
* 
ª•⁄£
) {

89 
	`Ârötf
(
°dîr
, "C⁄√˘ faûed,Ñ¯%s\n", 
ª•⁄£
 ? 
	`MQTTAsync_°ªº‹
‘e•⁄£->
code
) : "none");

90 
föished
 = 1;

91 
	}
}

93 
	$⁄C⁄√˘
(* 
c⁄ãxt
, 
MQTTAsync_suc˚ssD©a
* 
ª•⁄£
) {

94 
MQTTAsync
 
˛õ¡
 = (MQTTAsync)
c⁄ãxt
;

95 
MQTTAsync_ª•⁄£O±i⁄s
 
r›ts
 = 
MQTTAsync_ª•⁄£O±i⁄s_öôülizî
;

96 
rc
;

98 
	`¥ötf
("Subs¸ibögÅÿt›i¯%†wôh clõ¡ %†© QoS %d\n", 
t›ic
, 
˛õ¡id
, 
qos
);

100 
r›ts
.
⁄Suc˚ss
 = 
⁄Subs¸ibe
;

101 
r›ts
.
⁄Faûuª
 = 
⁄Subs¸ibeFaûuª
;

102 
r›ts
.
c⁄ãxt
 = 
˛õ¡
;

103 i‡((
rc
 = 
	`MQTTAsync_subs¸ibe
(
˛õ¡
, 
t›ic
, 
qos
, &
r›ts
)Ë!
MQTTASYNC_SUCCESS
) {

104 
	`Ârötf
(
°dîr
, "FaûedÅÿ°¨àsubs¸ibe,Ñëu∫ codê%s\n", 
	`MQTTAsync_°ªº‹
(
rc
));

105 
föished
 = 1;

107 
	}
}

109 
MQTTAsync_c⁄√˘O±i⁄s
 
	gc⁄n_›ts
 = 
MQTTAsync_c⁄√˘O±i⁄s_öôülizî
;

111 * 
	$mqâ_èsk
(* 
¨gs
) {

112 
MQTTAsync
 
˛õ¡
;

113 
MQTTAsync_disc⁄√˘O±i⁄s
 
disc_›ts
 = 
MQTTAsync_disc⁄√˘O±i⁄s_öôülizî
;

114 
MQTTAsync_¸óãO±i⁄s
 
¸óã_›ts
 = 
MQTTAsync_¸óãO±i⁄s_öôülizî
;

115 
rc
 = 0;

117 
rc
 = 
	`MQTTAsync_¸óãWôhO±i⁄s
(&
˛õ¡
, "127.0.0.1:1883", 
˛õ¡id
, 
MQTTCLIENT_PERSISTENCE_NONE
, 
NULL
, &
¸óã_›ts
);

118 i‡(
rc
 !
MQTTASYNC_SUCCESS
) {

119 
	`Ârötf
(
°dîr
, "FaûedÅÿ¸óã clõ¡,Ñëu∫ code: %s\n", 
	`MQTTAsync_°ªº‹
(
rc
));

120 
	`exô
(
EXIT_FAILURE
);

123 
rc
 = 
	`MQTTAsync_£tCÆlbacks
(
˛õ¡
, clõ¡, 
NULL
, 
mesßgeAºived
, NULL);

124 i‡(
rc
 !
MQTTASYNC_SUCCESS
) {

125 
	`Ârötf
(
°dîr
, "FaûedÅÿ£àˇŒbacks,Ñëu∫ code: %s\n", 
	`MQTTAsync_°ªº‹
(
rc
));

126 
	`exô
(
EXIT_FAILURE
);

129 
c⁄n_›ts
.
⁄Suc˚ss
 = 
⁄C⁄√˘
;

130 
c⁄n_›ts
.
⁄Faûuª
 = 
⁄C⁄√˘Faûuª
;

131 
c⁄n_›ts
.
˛ón£ssi⁄
 = 1;

132 
c⁄n_›ts
.
kìpAliveI¡îvÆ
 = 
kì∑live
;

133 
c⁄n_›ts
.
MQTTVîsi⁄
 = MQTTVersion;

134 
c⁄n_›ts
.
c⁄ãxt
 = 
˛õ¡
;

135 
c⁄n_›ts
.
autom©icRec⁄√˘
 = 1;

137 i‡((
rc
 = 
	`MQTTAsync_c⁄√˘
(
˛õ¡
, &
c⁄n_›ts
)Ë!
MQTTASYNC_SUCCESS
) {

138 
	`Ârötf
(
°dîr
, "FaûedÅÿ°¨àc⁄√˘,Ñëu∫ codê%s\n", 
	`MQTTAsync_°ªº‹
(
rc
));

139 
	`exô
(
EXIT_FAILURE
);

141 !
subs¸ibed
Ë
	`u¶ìp
(100 * 1000);

143 i‡(
föished
)

144 
exô
;

146 !
föished
Ë
	`u¶ìp
(100 * 1000);

148 
disc_›ts
.
⁄Suc˚ss
 = 
⁄Disc⁄√˘
;

149 i‡((
rc
 = 
	`MQTTAsync_disc⁄√˘
(
˛õ¡
, &
disc_›ts
)Ë!
MQTTASYNC_SUCCESS
) {

150 
	`Ârötf
(
°dîr
, "FaûedÅÿ°¨àdisc⁄√˘,Ñëu∫ code: %s\n", 
	`MQTTAsync_°ªº‹
(
rc
));

151 
	`exô
(
EXIT_FAILURE
);

153 !
disc⁄√˘ed
Ë
	`u¶ìp
(100 * 1000);

155 
exô
:

156 
	`MQTTAsync_de°roy
(&
˛õ¡
);

157 
	`exô
(
EXIT_SUCCESS
);

158 
	}
}

165 
öt32_t
 
	mãm≥øtuª
;

166 
öt32_t
 
	mhumidôy
;

168 
£rülize_‚
 
	m£rülize
;

169 
gë_size_‚
 
	mgë_size
;

170 
de°roy_‚
 
	mde°roy
;

171 } 
	tkØ_loggög_t
;

173 
	$kØ_loggög_£rülize
(
avro_wrôî_t
 
wrôî
, *
d©a
) {

174 i‡(
d©a
) {

175 
kØ_loggög_t
 *
ªc‹d
 = (kØ_loggög_à*)
d©a
;

176 
	`kØ_öt_£rülize
(
wrôî
, &
ªc‹d
->
ãm≥øtuª
);

178 
	}
}

180 
size_t
 
	$kØ_loggög_gë_size
(*
d©a
) {

181 i‡(
d©a
) {

182 
size_t
 
ªc‹d_size
 = 0;

183 
kØ_loggög_t
 *
ªc‹d
 = (kØ_loggög_à*)
d©a
;

184 
ªc‹d_size
 +
	`kØ_öt_gë_size
(&
ªc‹d
->
ãm≥øtuª
);

185  
ªc‹d_size
;

188 
	}
}

190 
kØ_loggög_t
 *
	$kØ_loggög_¸óã
() {

191 
kØ_loggög_t
 *
ªc‹d
 = (kØ_loggög_à*)
	`KAA_CALLOC
(1, (kaa_logging_t));

193 i‡(
ªc‹d
) {

194 
ªc‹d
->
£rülize
 = 
kØ_loggög_£rülize
;

195 
ªc‹d
->
gë_size
 = 
kØ_loggög_gë_size
;

196 
ªc‹d
->
de°roy
 = 
kØ_d©a_de°roy
;

198  
ªc‹d
;

199 
	}
}

201 
kØ_loggög_t
 *
	$kØ_loggög_de£rülize
(
avro_ªadî_t
 
ªadî
) {

202 
kØ_loggög_t
 *
ªc‹d
 = (kØ_loggög_à*)
	`KAA_MALLOC
((kaa_logging_t));

204 i‡(
ªc‹d
) {

205 
ªc‹d
->
£rülize
 = 
kØ_loggög_£rülize
;

206 
ªc‹d
->
gë_size
 = 
kØ_loggög_gë_size
;

207 
ªc‹d
->
de°roy
 = 
kØ_d©a_de°roy
;

208 
avro_bö¨y_ícodög
.
	`ªad_öt
(
ªadî
, &
ªc‹d
->
ãm≥øtuª
);

210  
ªc‹d
;

211 
	}
}

215 
öt32_t
 
	gßm∂e_≥riod
;

216 
time_t
 
	gœ°_ßm∂e_time
;

217 
kØ_îr‹_t
 
ext_u∆imôed_log_°‹age_¸óã
(**
log_°‹age_c⁄ãxt_p
, 
kØ_loggî_t
 *
loggî
);

220 
	$exam∂e_ˇŒback
(*
c⁄ãxt
)

222 
time_t
 
cuºít_time
 = 
	`time
(
NULL
);

225 i‡(
	`dif·ime
(
cuºít_time
, 
œ°_ßm∂e_time
Ë>
ßm∂e_≥riod
) {

226 
œ°_ßm∂e_time
 = 
cuºít_time
;

230 if(
ãm≥øtuª
 > 0) {

231 
	`¥ötf
("(hyhw™gËLoggögÑec‹d cª©êwôhÅem≥øtuª %d \n", 
ãm≥øtuª
);

232 
kØ_loggög_t
 *
log_ªc‹d
 = 
	`kØ_loggög_¸óã
();

233 
log_ªc‹d
->
ãm≥øtuª
 =Åemperature;

234 
	`kØ_loggög_add_ªc‹d
(
	`kØ_˛õ¡_gë_c⁄ãxt
(
c⁄ãxt
)->
log_cﬁÀ˘‹
, 
log_ªc‹d
, 
NULL
);

235 
ãm≥øtuª
 = -1;

238 
	}
}

241 
kØ_îr‹_t
 
	$⁄_c⁄figuøti⁄_upd©ed
(*
c⁄ãxt
, c⁄° 
kØ_roŸ_c⁄figuøti⁄_t
 *
c⁄f
) {

242 (Ë
c⁄ãxt
;

243 
	`¥ötf
("Re˚ived c⁄figuøti⁄ d©a. New sam∂ê≥riod: %ò£c⁄ds\n", 
c⁄f
->
ßm∂e_≥riod
);

244 
ßm∂e_≥riod
 = 
c⁄f
->sample_period;

246  
KAA_ERR_NONE
;

247 
	}
}

249 
	$maö
() {

250 
	`±hªad_¸óã
(&
t_mqâ
, 
NULL
, 
mqâ_èsk
, NULL);

253 
	`§™d
(
	`time
(
NULL
));

255 
kØ_˛õ¡_t
 *
kØ_˛õ¡
 = 
NULL
;

256 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_˛õ¡_¸óã
(&
kØ_˛õ¡
, 
NULL
);

257 i‡(
îr‹
) {

258  
EXIT_FAILURE
;

261 
kØ_c⁄figuøti⁄_roŸ_ª˚ivî_t
 
ª˚ivî
 = {

262 .
c⁄ãxt
 = 
NULL
,

263 .
⁄_c⁄figuøti⁄_upd©ed
 = on_configuration_updated

265 
îr‹
 = 
	`kØ_c⁄figuøti⁄_m™agî_£t_roŸ_ª˚ivî
(

266 
	`kØ_˛õ¡_gë_c⁄ãxt
(
kØ_˛õ¡
)->
c⁄figuøti⁄_m™agî
,

267 &
ª˚ivî
);

268 i‡(
îr‹
) {

269  
EXIT_FAILURE
;

272 c⁄° 
kØ_roŸ_c⁄figuøti⁄_t
 *
dÊt
 = 
	`kØ_c⁄figuøti⁄_m™agî_gë_c⁄figuøti⁄
(
	`kØ_˛õ¡_gë_c⁄ãxt
(
kØ_˛õ¡
)->
c⁄figuøti⁄_m™agî
);

273 
	`¥ötf
("DeÁu… sam∂ê≥riod: %ò£c⁄ds\n", 
dÊt
->
ßm∂e_≥riod
);

274 
ßm∂e_≥riod
 = 
dÊt
->sample_period;

277 *
log_°‹age_c⁄ãxt
 = 
NULL
;

278 *
log_u∂ﬂd_°øãgy_c⁄ãxt
 = 
NULL
;

280 
îr‹
 = 
	`ext_u∆imôed_log_°‹age_¸óã
(&
log_°‹age_c⁄ãxt
,

281 
	`kØ_˛õ¡_gë_c⁄ãxt
(
kØ_˛õ¡
)->
loggî
);

282 i‡(
îr‹
) {

283  
EXIT_FAILURE
;

286 
îr‹
 = 
	`ext_log_u∂ﬂd_°øãgy_¸óã
(

287 
	`kØ_˛õ¡_gë_c⁄ãxt
(
kØ_˛õ¡
), &
log_u∂ﬂd_°øãgy_c⁄ãxt
,

288 
KAA_LOG_UPLOAD_BY_TIMEOUT_STRATEGY
);

289 i‡(
îr‹
) {

290  
EXIT_FAILURE
;

293 
îr‹
 = 
	`ext_log_u∂ﬂd_°øãgy_£t_u∂ﬂd_timeout
(
log_u∂ﬂd_°øãgy_c⁄ãxt
, 5);

294 i‡(
îr‹
) {

295  
EXIT_FAILURE
;

298 
kØ_log_buckë_c⁄°øöts_t
 
buckë_sizes
 = {

299 .
max_buckë_size
 = 32,

300 .
max_buckë_log_cou¡
 = 1,

304 
îr‹
 = 
	`kØ_loggög_öô
(
	`kØ_˛õ¡_gë_c⁄ãxt
(
kØ_˛õ¡
)->
log_cﬁÀ˘‹
,

305 
log_°‹age_c⁄ãxt
, 
log_u∂ﬂd_°øãgy_c⁄ãxt
, &
buckë_sizes
);

306 i‡(
îr‹
) {

307  
EXIT_FAILURE
;

310 
îr‹
 = 
	`kØ_˛õ¡_°¨t
(
kØ_˛õ¡
, 
exam∂e_ˇŒback
, kaa_client, 1);

312 
	`kØ_˛õ¡_de°roy
(
kØ_˛õ¡
);

314 i‡(
îr‹
) {

315  
EXIT_FAILURE
;

317  
EXIT_SUCCESS
;

318 
	}
}

	@/var/www/html/debian/gateway/main.new.c

1 
	~<°dio.h
>

2 
	~<°dlib.h
>

3 
	~<°döt.h
>

4 
	~<time.h
>

5 
	~<±hªad.h
>

6 
	~<kØ.h
>

7 
	~<∂©f‹m/kØ_˛õ¡.h
>

8 
	~<kØ_îr‹.h
>

9 
	~<kØ_c⁄figuøti⁄_m™agî.h
>

10 
	~<kØ_loggög.h
>

11 
	~<gí/kØ_loggög_gí.h
>

12 
	~<∂©f‹m/kØ_˛õ¡.h
>

13 
	~<utûôõs/kØ_log.h
>

15 
	~"avro_§c/avro/io.h
"

16 
	~"avro_§c/ícodög.h
"

17 
	~"utûôõs/kØ_mem.h
"

19 
	~<∂©f‹m-im∂/comm⁄/ext_log_u∂ﬂd_°øãgõs.h
>

22 
	~"js⁄-c/js⁄.h
"

23 
	~"MQTTAsync.h
"

24 
	~"MQTTClõ¡Pîsi°í˚.h
"

26 
	~<°dio.h
>

27 
	~<sig«l.h
>

28 
	~<°rög.h
>

29 
	~<°dlib.h
>

31 
	~<sys/time.h
>

32 
	~<uni°d.h
>

34 vﬁ©ûê
	gföished
 = 0;

36 
	gsubs¸ibed
 = 0;

37 
	gdisc⁄√˘ed
 = 0;

39 *
	gt›ic
 = "kaa/12";

40 *
	g˛õ¡id
 = "paho-c-sub";

41 
	gqos
 = 0;

47 
	gkì∑live
 = 10;

48 
	gMQTTVîsi⁄
 = 
MQTTVERSION_DEFAULT
;

50 
±hªad_t
 
	gt_mqâ
;

52 
öt32_t
 
	gãm≥øtuª
 = 0;

54 
	$mesßgeAºived
(*
c⁄ãxt
, *
t›icName
, 
t›icLí
, 
MQTTAsync_mesßge
 *
mesßge
) {

55 
js⁄_obje˘
 *
jobj
;

57 
	`¥ötf
("%d %s\t", 
mesßge
->
∑ylﬂdÀn
, 
t›icName
);

58 
	`¥ötf
("%.*s\n", 
mesßge
->
∑ylﬂdÀn
, (*)mesßge->
∑ylﬂd
);

59 
buf
[
BUFSIZ
] = "";

60 
	`•rötf
(
buf
, "%.*s\n", 
mesßge
->
∑ylﬂdÀn
, (*)mesßge->
∑ylﬂd
);

62 
jobj
 = 
	`js⁄_tokíî_∑r£
(
buf
);

63 
	`¥ötf
("JSON:\n%s\n\n", 
	`js⁄_obje˘_to_js⁄_°rög_ext
(
jobj
, 
JSON_C_TO_STRING_SPACED
 | 
JSON_C_TO_STRING_PRETTY
));

65 
ãm≥øtuª
 = 
	`©oi
(
buf
);

66 
	`fÊush
(
°dout
);

69 
	`MQTTAsync_‰ìMesßge
(&
mesßge
);

70 
	`MQTTAsync_‰ì
(
t›icName
);

72 
	}
}

74 
	$⁄Disc⁄√˘
(* 
c⁄ãxt
, 
MQTTAsync_suc˚ssD©a
* 
ª•⁄£
) {

75 
disc⁄√˘ed
 = 1;

76 
	}
}

78 
	$⁄Subs¸ibe
(* 
c⁄ãxt
, 
MQTTAsync_suc˚ssD©a
* 
ª•⁄£
) {

79 
subs¸ibed
 = 1;

80 
	}
}

82 
	$⁄Subs¸ibeFaûuª
(* 
c⁄ãxt
, 
MQTTAsync_ÁûuªD©a
* 
ª•⁄£
) {

83 
	`Ârötf
(
°dîr
, "Subs¸ibêÁûed,Ñ¯%s\n", 
	`MQTTAsync_°ªº‹
(
ª•⁄£
->
code
));

84 
föished
 = 1;

85 
	}
}

87 
	$⁄C⁄√˘Faûuª
(* 
c⁄ãxt
, 
MQTTAsync_ÁûuªD©a
* 
ª•⁄£
) {

88 
	`Ârötf
(
°dîr
, "C⁄√˘ faûed,Ñ¯%s\n", 
ª•⁄£
 ? 
	`MQTTAsync_°ªº‹
‘e•⁄£->
code
) : "none");

89 
föished
 = 1;

90 
	}
}

92 
	$⁄C⁄√˘
(* 
c⁄ãxt
, 
MQTTAsync_suc˚ssD©a
* 
ª•⁄£
) {

93 
MQTTAsync
 
˛õ¡
 = (MQTTAsync)
c⁄ãxt
;

94 
MQTTAsync_ª•⁄£O±i⁄s
 
r›ts
 = 
MQTTAsync_ª•⁄£O±i⁄s_öôülizî
;

95 
rc
;

97 
	`¥ötf
("Subs¸ibögÅÿt›i¯%†wôh clõ¡ %†© QoS %d\n", 
t›ic
, 
˛õ¡id
, 
qos
);

99 
r›ts
.
⁄Suc˚ss
 = 
⁄Subs¸ibe
;

100 
r›ts
.
⁄Faûuª
 = 
⁄Subs¸ibeFaûuª
;

101 
r›ts
.
c⁄ãxt
 = 
˛õ¡
;

102 i‡((
rc
 = 
	`MQTTAsync_subs¸ibe
(
˛õ¡
, 
t›ic
, 
qos
, &
r›ts
)Ë!
MQTTASYNC_SUCCESS
) {

103 
	`Ârötf
(
°dîr
, "FaûedÅÿ°¨àsubs¸ibe,Ñëu∫ codê%s\n", 
	`MQTTAsync_°ªº‹
(
rc
));

104 
föished
 = 1;

106 
	}
}

108 
MQTTAsync_c⁄√˘O±i⁄s
 
	gc⁄n_›ts
 = 
MQTTAsync_c⁄√˘O±i⁄s_öôülizî
;

110 * 
	$mqâ_èsk
(* 
¨gs
) {

111 
MQTTAsync
 
˛õ¡
;

112 
MQTTAsync_disc⁄√˘O±i⁄s
 
disc_›ts
 = 
MQTTAsync_disc⁄√˘O±i⁄s_öôülizî
;

113 
MQTTAsync_¸óãO±i⁄s
 
¸óã_›ts
 = 
MQTTAsync_¸óãO±i⁄s_öôülizî
;

114 
rc
 = 0;

116 
rc
 = 
	`MQTTAsync_¸óãWôhO±i⁄s
(&
˛õ¡
, "127.0.0.1:1883", 
˛õ¡id
, 
MQTTCLIENT_PERSISTENCE_NONE
, 
NULL
, &
¸óã_›ts
);

117 i‡(
rc
 !
MQTTASYNC_SUCCESS
) {

118 
	`Ârötf
(
°dîr
, "FaûedÅÿ¸óã clõ¡,Ñëu∫ code: %s\n", 
	`MQTTAsync_°ªº‹
(
rc
));

119 
	`exô
(
EXIT_FAILURE
);

122 
rc
 = 
	`MQTTAsync_£tCÆlbacks
(
˛õ¡
, clõ¡, 
NULL
, 
mesßgeAºived
, NULL);

123 i‡(
rc
 !
MQTTASYNC_SUCCESS
) {

124 
	`Ârötf
(
°dîr
, "FaûedÅÿ£àˇŒbacks,Ñëu∫ code: %s\n", 
	`MQTTAsync_°ªº‹
(
rc
));

125 
	`exô
(
EXIT_FAILURE
);

128 
c⁄n_›ts
.
⁄Suc˚ss
 = 
⁄C⁄√˘
;

129 
c⁄n_›ts
.
⁄Faûuª
 = 
⁄C⁄√˘Faûuª
;

130 
c⁄n_›ts
.
˛ón£ssi⁄
 = 1;

131 
c⁄n_›ts
.
kìpAliveI¡îvÆ
 = 
kì∑live
;

132 
c⁄n_›ts
.
MQTTVîsi⁄
 = MQTTVersion;

133 
c⁄n_›ts
.
c⁄ãxt
 = 
˛õ¡
;

134 
c⁄n_›ts
.
autom©icRec⁄√˘
 = 1;

136 i‡((
rc
 = 
	`MQTTAsync_c⁄√˘
(
˛õ¡
, &
c⁄n_›ts
)Ë!
MQTTASYNC_SUCCESS
) {

137 
	`Ârötf
(
°dîr
, "FaûedÅÿ°¨àc⁄√˘,Ñëu∫ codê%s\n", 
	`MQTTAsync_°ªº‹
(
rc
));

138 
	`exô
(
EXIT_FAILURE
);

140 !
subs¸ibed
Ë
	`u¶ìp
(100 * 1000);

142 i‡(
föished
)

143 
exô
;

145 !
föished
Ë
	`u¶ìp
(100 * 1000);

147 
disc_›ts
.
⁄Suc˚ss
 = 
⁄Disc⁄√˘
;

148 i‡((
rc
 = 
	`MQTTAsync_disc⁄√˘
(
˛õ¡
, &
disc_›ts
)Ë!
MQTTASYNC_SUCCESS
) {

149 
	`Ârötf
(
°dîr
, "FaûedÅÿ°¨àdisc⁄√˘,Ñëu∫ code: %s\n", 
	`MQTTAsync_°ªº‹
(
rc
));

150 
	`exô
(
EXIT_FAILURE
);

152 !
disc⁄√˘ed
Ë
	`u¶ìp
(100 * 1000);

154 
exô
:

155 
	`MQTTAsync_de°roy
(&
˛õ¡
);

156 
	`exô
(
EXIT_SUCCESS
);

157 
	}
}

164 
öt32_t
 
	mãm≥øtuª
;

166 
£rülize_‚
 
	m£rülize
;

167 
gë_size_‚
 
	mgë_size
;

168 
de°roy_‚
 
	mde°roy
;

169 } 
	tkØ_loggög_t
;

171 
	$kØ_loggög_£rülize
(
avro_wrôî_t
 
wrôî
, *
d©a
) {

172 i‡(
d©a
) {

173 
kØ_loggög_t
 *
ªc‹d
 = (kØ_loggög_à*)
d©a
;

174 
	`kØ_öt_£rülize
(
wrôî
, &
ªc‹d
->
ãm≥øtuª
);

176 
	}
}

178 
size_t
 
	$kØ_loggög_gë_size
(*
d©a
) {

179 i‡(
d©a
) {

180 
size_t
 
ªc‹d_size
 = 0;

181 
kØ_loggög_t
 *
ªc‹d
 = (kØ_loggög_à*)
d©a
;

182 
ªc‹d_size
 +
	`kØ_öt_gë_size
(&
ªc‹d
->
ãm≥øtuª
);

183  
ªc‹d_size
;

186 
	}
}

188 
kØ_loggög_t
 *
	$kØ_loggög_¸óã
() {

189 
kØ_loggög_t
 *
ªc‹d
 = (kØ_loggög_à*)
	`KAA_CALLOC
(1, (kaa_logging_t));

191 i‡(
ªc‹d
) {

192 
ªc‹d
->
£rülize
 = 
kØ_loggög_£rülize
;

193 
ªc‹d
->
gë_size
 = 
kØ_loggög_gë_size
;

194 
ªc‹d
->
de°roy
 = 
kØ_d©a_de°roy
;

196  
ªc‹d
;

197 
	}
}

199 
kØ_loggög_t
 *
	$kØ_loggög_de£rülize
(
avro_ªadî_t
 
ªadî
) {

200 
kØ_loggög_t
 *
ªc‹d
 = (kØ_loggög_à*)
	`KAA_MALLOC
((kaa_logging_t));

202 i‡(
ªc‹d
) {

203 
ªc‹d
->
£rülize
 = 
kØ_loggög_£rülize
;

204 
ªc‹d
->
gë_size
 = 
kØ_loggög_gë_size
;

205 
ªc‹d
->
de°roy
 = 
kØ_d©a_de°roy
;

206 
avro_bö¨y_ícodög
.
	`ªad_öt
(
ªadî
, &
ªc‹d
->
ãm≥øtuª
);

208  
ªc‹d
;

209 
	}
}

213 
öt32_t
 
	gßm∂e_≥riod
;

214 
time_t
 
	gœ°_ßm∂e_time
;

215 
kØ_îr‹_t
 
ext_u∆imôed_log_°‹age_¸óã
(**
log_°‹age_c⁄ãxt_p
, 
kØ_loggî_t
 *
loggî
);

218 
	$exam∂e_ˇŒback
(*
c⁄ãxt
)

220 
time_t
 
cuºít_time
 = 
	`time
(
NULL
);

223 i‡(
	`dif·ime
(
cuºít_time
, 
œ°_ßm∂e_time
Ë>
ßm∂e_≥riod
) {

224 
œ°_ßm∂e_time
 = 
cuºít_time
;

228 
	`¥ötf
("(hyhw™gËLoggögÑec‹d cª©êwôhÅem≥øtuª %d \n", 
ãm≥øtuª
);

229 
kØ_loggög_t
 *
log_ªc‹d
 = 
	`kØ_loggög_¸óã
();

230 
log_ªc‹d
->
ãm≥øtuª
 =Åemperature;

231 
	`kØ_loggög_add_ªc‹d
(
	`kØ_˛õ¡_gë_c⁄ãxt
(
c⁄ãxt
)->
log_cﬁÀ˘‹
, 
log_ªc‹d
, 
NULL
);

233 
	}
}

236 
kØ_îr‹_t
 
	$⁄_c⁄figuøti⁄_upd©ed
(*
c⁄ãxt
, c⁄° 
kØ_roŸ_c⁄figuøti⁄_t
 *
c⁄f
) {

237 (Ë
c⁄ãxt
;

238 
	`¥ötf
("Re˚ived c⁄figuøti⁄ d©a. New sam∂ê≥riod: %ò£c⁄ds\n", 
c⁄f
->
ßm∂e_≥riod
);

239 
ßm∂e_≥riod
 = 
c⁄f
->sample_period;

241  
KAA_ERR_NONE
;

242 
	}
}

244 
	$maö
() {

245 
	`±hªad_¸óã
(&
t_mqâ
, 
NULL
, 
mqâ_èsk
, NULL);

248 
	`§™d
(
	`time
(
NULL
));

250 
kØ_˛õ¡_t
 *
kØ_˛õ¡
 = 
NULL
;

251 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_˛õ¡_¸óã
(&
kØ_˛õ¡
, 
NULL
);

252 i‡(
îr‹
) {

253  
EXIT_FAILURE
;

256 
kØ_c⁄figuøti⁄_roŸ_ª˚ivî_t
 
ª˚ivî
 = {

257 .
c⁄ãxt
 = 
NULL
,

258 .
⁄_c⁄figuøti⁄_upd©ed
 = on_configuration_updated

260 
îr‹
 = 
	`kØ_c⁄figuøti⁄_m™agî_£t_roŸ_ª˚ivî
(

261 
	`kØ_˛õ¡_gë_c⁄ãxt
(
kØ_˛õ¡
)->
c⁄figuøti⁄_m™agî
,

262 &
ª˚ivî
);

263 i‡(
îr‹
) {

264  
EXIT_FAILURE
;

267 c⁄° 
kØ_roŸ_c⁄figuøti⁄_t
 *
dÊt
 = 
	`kØ_c⁄figuøti⁄_m™agî_gë_c⁄figuøti⁄
(
	`kØ_˛õ¡_gë_c⁄ãxt
(
kØ_˛õ¡
)->
c⁄figuøti⁄_m™agî
);

268 
	`¥ötf
("DeÁu… sam∂ê≥riod: %ò£c⁄ds\n", 
dÊt
->
ßm∂e_≥riod
);

269 
ßm∂e_≥riod
 = 
dÊt
->sample_period;

272 *
log_°‹age_c⁄ãxt
 = 
NULL
;

273 *
log_u∂ﬂd_°øãgy_c⁄ãxt
 = 
NULL
;

275 
îr‹
 = 
	`ext_u∆imôed_log_°‹age_¸óã
(&
log_°‹age_c⁄ãxt
,

276 
	`kØ_˛õ¡_gë_c⁄ãxt
(
kØ_˛õ¡
)->
loggî
);

277 i‡(
îr‹
) {

278  
EXIT_FAILURE
;

281 
îr‹
 = 
	`ext_log_u∂ﬂd_°øãgy_¸óã
(

282 
	`kØ_˛õ¡_gë_c⁄ãxt
(
kØ_˛õ¡
), &
log_u∂ﬂd_°øãgy_c⁄ãxt
,

283 
KAA_LOG_UPLOAD_BY_TIMEOUT_STRATEGY
);

284 i‡(
îr‹
) {

285  
EXIT_FAILURE
;

288 
îr‹
 = 
	`ext_log_u∂ﬂd_°øãgy_£t_u∂ﬂd_timeout
(
log_u∂ﬂd_°øãgy_c⁄ãxt
, 5);

289 i‡(
îr‹
) {

290  
EXIT_FAILURE
;

293 
kØ_log_buckë_c⁄°øöts_t
 
buckë_sizes
 = {

294 .
max_buckë_size
 = 32,

295 .
max_buckë_log_cou¡
 = 1,

299 
îr‹
 = 
	`kØ_loggög_öô
(
	`kØ_˛õ¡_gë_c⁄ãxt
(
kØ_˛õ¡
)->
log_cﬁÀ˘‹
,

300 
log_°‹age_c⁄ãxt
, 
log_u∂ﬂd_°øãgy_c⁄ãxt
, &
buckë_sizes
);

301 i‡(
îr‹
) {

302  
EXIT_FAILURE
;

305 
îr‹
 = 
	`kØ_˛õ¡_°¨t
(
kØ_˛õ¡
, 
exam∂e_ˇŒback
, kaa_client, 1);

307 
	`kØ_˛õ¡_de°roy
(
kØ_˛õ¡
);

309 i‡(
îr‹
) {

310  
EXIT_FAILURE
;

312  
EXIT_SUCCESS
;

313 
	}
}

	@/var/www/html/debian/gateway/main.old.c

1 
	~<°dio.h
>

2 
	~<°dlib.h
>

3 
	~<°döt.h
>

4 
	~<time.h
>

5 
	~<±hªad.h
>

6 
	~<kØ.h
>

7 
	~<∂©f‹m/kØ_˛õ¡.h
>

8 
	~<kØ_îr‹.h
>

9 
	~<kØ_c⁄figuøti⁄_m™agî.h
>

10 
	~<kØ_loggög.h
>

11 
	~<gí/kØ_loggög_gí.h
>

12 
	~<∂©f‹m/kØ_˛õ¡.h
>

13 
	~<utûôõs/kØ_log.h
>

15 
	~<∂©f‹m-im∂/comm⁄/ext_log_u∂ﬂd_°øãgõs.h
>

18 
	~"js⁄-c/js⁄.h
"

19 
	~"MQTTAsync.h
"

20 
	~"MQTTClõ¡Pîsi°í˚.h
"

22 
	~<°dio.h
>

23 
	~<sig«l.h
>

24 
	~<°rög.h
>

25 
	~<°dlib.h
>

27 
	~<sys/time.h
>

28 
	~<uni°d.h
>

29 
	~<cuæ/cuæ.h
>

31 vﬁ©ûê
	gföished
 = 0;

32 
	gsubs¸ibed
 = 0;

33 
	gdisc⁄√˘ed
 = 0;

35 *
	gt›ic
 = "kaa/12";

36 *
	g˛õ¡id
 = "paho-c-sub";

37 
	gqos
 = 0;

39 
	gkì∑live
 = 10;

40 
	gMQTTVîsi⁄
 = 
MQTTVERSION_DEFAULT
;

42 
±hªad_t
 
	gt_mqâ
;

44 
öt32_t
 
	gãm≥øtuª
 = 0;

46 
CURL
 *
	gcuæ
;

47 
CURLcode
 
	gªs
;

50 
	$po°Dwìt
(*
«me
, 
vÆue
)

52 
d©a
[
BUFSIZ
] = "";

54 
cuæ
 = 
	`cuæ_ósy_öô
();

56 if(
cuæ
) {

57 
	`•rötf
(
d©a
, "{\"%s\": %d}", 
«me
, 
vÆue
);

58 
	`¥ötf
("> %†\n", 
d©a
);

60 
cuæ_¶i°
 *
hódîs
 = 
NULL
;

61 
hódîs
 = 
	`cuæ_¶i°_≠≥nd
(headers, "Accept:ápplication/json");

62 
hódîs
 = 
	`cuæ_¶i°_≠≥nd
(headers, "Content-Type:ápplication/json");

63 
hódîs
 = 
	`cuæ_¶i°_≠≥nd
(headers, "charsets: utf-8");

65 
	`cuæ_ósy_£t›t
(
cuæ
, 
CURLOPT_URL
, "https://dweet.io:443/dweet/for/fopis-iot");

66 
	`cuæ_ósy_£t›t
(
cuæ
, 
CURLOPT_HTTPHEADER
, 
hódîs
);

67 
	`cuæ_ósy_£t›t
(
cuæ
, 
CURLOPT_POSTFIELDS
, 
d©a
);

68 
	`cuæ_ósy_£t›t
(
cuæ
, 
CURLOPT_FOLLOWLOCATION
, 1L);

69 
	`cuæ_ósy_£t›t
(
cuæ
, 
CURLOPT_SSL_VERIFYPEER
, 0);

70 
ªs
 = 
	`cuæ_ósy_≥rf‹m
(
cuæ
);

71 if(
ªs
 !
CURLE_OK
)

72 
	`Ârötf
(
°dîr
, "cuæ_ósy_≥rf‹m(ËÁûed: %s\n", 
	`cuæ_ósy_°ªº‹
(
ªs
));

74 
	}
}

76 
	$mesßgeAºived
(*
c⁄ãxt
, *
t›icName
, 
t›icLí
, 
MQTTAsync_mesßge
 *
mesßge
)

78 
js⁄_obje˘
 *
jobj
;

80 
	`¥ötf
("%d %s\t", 
mesßge
->
∑ylﬂdÀn
, 
t›icName
);

81 
	`¥ötf
("%.*s\n", 
mesßge
->
∑ylﬂdÀn
, (*)mesßge->
∑ylﬂd
);

82 
buf
[
BUFSIZ
] = "";

83 
	`•rötf
(
buf
, "%.*s\n", 
mesßge
->
∑ylﬂdÀn
, (*)mesßge->
∑ylﬂd
);

85 
jobj
 = 
	`js⁄_tokíî_∑r£
(
buf
);

86 
	`¥ötf
("jobj from så:\n---\n%s\n---\n", 
	`js⁄_obje˘_to_js⁄_°rög_ext
(
jobj
, 
JSON_C_TO_STRING_SPACED
 | 
JSON_C_TO_STRING_PRETTY
));

88 
ãm≥øtuª
 = 
	`©oi
(
buf
);

89 
	`fÊush
(
°dout
);

92 
	`MQTTAsync_‰ìMesßge
(&
mesßge
);

93 
	`MQTTAsync_‰ì
(
t›icName
);

95 
	}
}

98 
	$⁄Disc⁄√˘
(* 
c⁄ãxt
, 
MQTTAsync_suc˚ssD©a
* 
ª•⁄£
)

100 
disc⁄√˘ed
 = 1;

101 
	}
}

103 
	$⁄Subs¸ibe
(* 
c⁄ãxt
, 
MQTTAsync_suc˚ssD©a
* 
ª•⁄£
)

105 
subs¸ibed
 = 1;

106 
	}
}

108 
	$⁄Subs¸ibeFaûuª
(* 
c⁄ãxt
, 
MQTTAsync_ÁûuªD©a
* 
ª•⁄£
)

110 
	`Ârötf
(
°dîr
, "Subs¸ibêÁûed,Ñ¯%s\n", 
	`MQTTAsync_°ªº‹
(
ª•⁄£
->
code
));

111 
föished
 = 1;

112 
	}
}

115 
	$⁄C⁄√˘Faûuª
(* 
c⁄ãxt
, 
MQTTAsync_ÁûuªD©a
* 
ª•⁄£
)

117 
	`Ârötf
(
°dîr
, "C⁄√˘ faûed,Ñ¯%s\n", 
ª•⁄£
 ? 
	`MQTTAsync_°ªº‹
‘e•⁄£->
code
) : "none");

118 
föished
 = 1;

119 
	}
}

121 
	$⁄C⁄√˘
(* 
c⁄ãxt
, 
MQTTAsync_suc˚ssD©a
* 
ª•⁄£
)

123 
MQTTAsync
 
˛õ¡
 = (MQTTAsync)
c⁄ãxt
;

124 
MQTTAsync_ª•⁄£O±i⁄s
 
r›ts
 = 
MQTTAsync_ª•⁄£O±i⁄s_öôülizî
;

125 
rc
;

127 
	`¥ötf
("%†\n",
__FUNCTION__
);

128 
	`¥ötf
("Subs¸ibögÅÿt›i¯%†wôh clõ¡ %†© QoS %d\n", 
t›ic
, 
˛õ¡id
, 
qos
);

130 
r›ts
.
⁄Suc˚ss
 = 
⁄Subs¸ibe
;

131 
r›ts
.
⁄Faûuª
 = 
⁄Subs¸ibeFaûuª
;

132 
r›ts
.
c⁄ãxt
 = 
˛õ¡
;

133 i‡((
rc
 = 
	`MQTTAsync_subs¸ibe
(
˛õ¡
, 
t›ic
, 
qos
, &
r›ts
)Ë!
MQTTASYNC_SUCCESS
)

135 
	`Ârötf
(
°dîr
, "FaûedÅÿ°¨àsubs¸ibe,Ñëu∫ codê%s\n", 
	`MQTTAsync_°ªº‹
(
rc
));

136 
föished
 = 1;

138 
	}
}

140 
MQTTAsync_c⁄√˘O±i⁄s
 
	gc⁄n_›ts
 = 
MQTTAsync_c⁄√˘O±i⁄s_öôülizî
;

144 
	$mqâ_èsk
(* 
¨gs
)

146 
MQTTAsync
 
˛õ¡
;

147 
MQTTAsync_disc⁄√˘O±i⁄s
 
disc_›ts
 = 
MQTTAsync_disc⁄√˘O±i⁄s_öôülizî
;

148 
MQTTAsync_¸óãO±i⁄s
 
¸óã_›ts
 = 
MQTTAsync_¸óãO±i⁄s_öôülizî
;

149 
rc
 = 0;

151 
rc
 = 
	`MQTTAsync_¸óãWôhO±i⁄s
(&
˛õ¡
, "127.0.0.1:1883", 
˛õ¡id
, 
MQTTCLIENT_PERSISTENCE_NONE
,

152 
NULL
, &
¸óã_›ts
);

153 i‡(
rc
 !
MQTTASYNC_SUCCESS
)

155 
	`Ârötf
(
°dîr
, "FaûedÅÿ¸óã clõ¡,Ñëu∫ code: %s\n", 
	`MQTTAsync_°ªº‹
(
rc
));

156 
	`exô
(
EXIT_FAILURE
);

159 
rc
 = 
	`MQTTAsync_£tCÆlbacks
(
˛õ¡
, clõ¡, 
NULL
, 
mesßgeAºived
, NULL);

160 i‡(
rc
 !
MQTTASYNC_SUCCESS
)

162 
	`Ârötf
(
°dîr
, "FaûedÅÿ£àˇŒbacks,Ñëu∫ code: %s\n", 
	`MQTTAsync_°ªº‹
(
rc
));

163 
	`exô
(
EXIT_FAILURE
);

166 
c⁄n_›ts
.
⁄Suc˚ss
 = 
⁄C⁄√˘
;

167 
c⁄n_›ts
.
⁄Faûuª
 = 
⁄C⁄√˘Faûuª
;

168 
c⁄n_›ts
.
˛ón£ssi⁄
 = 1;

169 
c⁄n_›ts
.
kìpAliveI¡îvÆ
 = 
kì∑live
;

170 
c⁄n_›ts
.
MQTTVîsi⁄
 = MQTTVersion;

171 
c⁄n_›ts
.
c⁄ãxt
 = 
˛õ¡
;

172 
c⁄n_›ts
.
autom©icRec⁄√˘
 = 1;

174 i‡((
rc
 = 
	`MQTTAsync_c⁄√˘
(
˛õ¡
, &
c⁄n_›ts
)Ë!
MQTTASYNC_SUCCESS
)

176 
	`Ârötf
(
°dîr
, "FaûedÅÿ°¨àc⁄√˘,Ñëu∫ codê%s\n", 
	`MQTTAsync_°ªº‹
(
rc
));

177 
	`exô
(
EXIT_FAILURE
);

179 !
subs¸ibed
Ë
	`u¶ìp
(100 * 1000);

181 i‡(
föished
)

182 
exô
;

184 !
föished
Ë
	`u¶ìp
(100 * 1000);

186 
disc_›ts
.
⁄Suc˚ss
 = 
⁄Disc⁄√˘
;

187 i‡((
rc
 = 
	`MQTTAsync_disc⁄√˘
(
˛õ¡
, &
disc_›ts
)Ë!
MQTTASYNC_SUCCESS
)

189 
	`Ârötf
(
°dîr
, "FaûedÅÿ°¨àdisc⁄√˘,Ñëu∫ code: %s\n", 
	`MQTTAsync_°ªº‹
(
rc
));

190 
	`exô
(
EXIT_FAILURE
);

192 !
disc⁄√˘ed
Ë
	`u¶ìp
(100 * 1000);

194 
exô
:

195 
	`MQTTAsync_de°roy
(&
˛õ¡
);

196 
	`exô
(
EXIT_SUCCESS
);

197 
	}
}

200 
öt32_t
 
	gßm∂e_≥riod
;

201 
time_t
 
	gœ°_ßm∂e_time
;

202 
kØ_îr‹_t
 
ext_u∆imôed_log_°‹age_¸óã
(**
log_°‹age_c⁄ãxt_p
, 
kØ_loggî_t
 *
loggî
);

204 
	$exam∂e_ˇŒback
(*
c⁄ãxt
)

206 
time_t
 
cuºít_time
 = 
	`time
(
NULL
);

208 i‡(
	`dif·ime
(
cuºít_time
, 
œ°_ßm∂e_time
Ë>
ßm∂e_≥riod
) {

209 
œ°_ßm∂e_time
 = 
cuºít_time
;

210 
kØ_u£r_log_ªc‹d_t
 *
log_ªc‹d
 = 
	`kØ_loggög_d©a_cﬁÀ˘i⁄_¸óã
();

211 
log_ªc‹d
->
ãm≥øtuª
 =Åemperature;

212 
	`kØ_loggög_add_ªc‹d
(
	`kØ_˛õ¡_gë_c⁄ãxt
(
c⁄ãxt
)->
log_cﬁÀ˘‹
, 
log_ªc‹d
, 
NULL
);

214 
	`po°Dwìt
("ãm≥øtuª", 
ãm≥øtuª
);

216 
	}
}

218 
kØ_îr‹_t
 
	$⁄_c⁄figuøti⁄_upd©ed
(*
c⁄ãxt
, c⁄° 
kØ_roŸ_c⁄figuøti⁄_t
 *
c⁄f
)

220 (Ë
c⁄ãxt
;

221 
	`¥ötf
("Re˚ived c⁄figuøti⁄ d©a. New sam∂ê≥riod: %ò£c⁄ds\n", 
c⁄f
->
ßm∂e_≥riod
);

222 
ßm∂e_≥riod
 = 
c⁄f
->sample_period;

223  
KAA_ERR_NONE
;

224 
	}
}

226 
	$maö
()

228 
cuæ
 = 
	`cuæ_ósy_öô
();

229 
	`±hªad_¸óã
(&
t_mqâ
, 
NULL
, 
mqâ_èsk
, NULL);

232 
	`§™d
(
	`time
(
NULL
));

234 
kØ_˛õ¡_t
 *
kØ_˛õ¡
 = 
NULL
;

235 
kØ_îr‹_t
 
îr‹
 = 
	`kØ_˛õ¡_¸óã
(&
kØ_˛õ¡
, 
NULL
);

236 i‡(
îr‹
) {

237  
EXIT_FAILURE
;

240 
kØ_c⁄figuøti⁄_roŸ_ª˚ivî_t
 
ª˚ivî
 = {

241 .
c⁄ãxt
 = 
NULL
,

242 .
⁄_c⁄figuøti⁄_upd©ed
 = on_configuration_updated

244 
îr‹
 = 
	`kØ_c⁄figuøti⁄_m™agî_£t_roŸ_ª˚ivî
(

245 
	`kØ_˛õ¡_gë_c⁄ãxt
(
kØ_˛õ¡
)->
c⁄figuøti⁄_m™agî
,

246 &
ª˚ivî
);

247 i‡(
îr‹
) {

248  
EXIT_FAILURE
;

251 c⁄° 
kØ_roŸ_c⁄figuøti⁄_t
 *
dÊt
 = 
	`kØ_c⁄figuøti⁄_m™agî_gë_c⁄figuøti⁄
(

252 
	`kØ_˛õ¡_gë_c⁄ãxt
(
kØ_˛õ¡
)->
c⁄figuøti⁄_m™agî
);

253 
	`¥ötf
("DeÁu… sam∂ê≥riod: %ò£c⁄ds\n", 
dÊt
->
ßm∂e_≥riod
);

254 
ßm∂e_≥riod
 = 
dÊt
->sample_period;

257 *
log_°‹age_c⁄ãxt
 = 
NULL
;

258 *
log_u∂ﬂd_°øãgy_c⁄ãxt
 = 
NULL
;

260 
îr‹
 = 
	`ext_u∆imôed_log_°‹age_¸óã
(&
log_°‹age_c⁄ãxt
,

261 
	`kØ_˛õ¡_gë_c⁄ãxt
(
kØ_˛õ¡
)->
loggî
);

262 i‡(
îr‹
) {

263  
EXIT_FAILURE
;

266 
îr‹
 = 
	`ext_log_u∂ﬂd_°øãgy_¸óã
(

267 
	`kØ_˛õ¡_gë_c⁄ãxt
(
kØ_˛õ¡
), &
log_u∂ﬂd_°øãgy_c⁄ãxt
,

268 
KAA_LOG_UPLOAD_BY_TIMEOUT_STRATEGY
);

269 i‡(
îr‹
) {

270  
EXIT_FAILURE
;

273 
îr‹
 = 
	`ext_log_u∂ﬂd_°øãgy_£t_u∂ﬂd_timeout
(
log_u∂ﬂd_°øãgy_c⁄ãxt
, 5);

274 i‡(
îr‹
) {

275  
EXIT_FAILURE
;

278 
kØ_log_buckë_c⁄°øöts_t
 
buckë_sizes
 = {

279 .
max_buckë_size
 = 32,

280 .
max_buckë_log_cou¡
 = 1,

284 
îr‹
 = 
	`kØ_loggög_öô
(
	`kØ_˛õ¡_gë_c⁄ãxt
(
kØ_˛õ¡
)->
log_cﬁÀ˘‹
,

285 
log_°‹age_c⁄ãxt
, 
log_u∂ﬂd_°øãgy_c⁄ãxt
, &
buckë_sizes
);

286 i‡(
îr‹
) {

287  
EXIT_FAILURE
;

290 
îr‹
 = 
	`kØ_˛õ¡_°¨t
(
kØ_˛õ¡
, 
exam∂e_ˇŒback
, kaa_client, 1);

292 
	`kØ_˛õ¡_de°roy
(
kØ_˛õ¡
);

294 i‡(
îr‹
) {

295  
EXIT_FAILURE
;

297  
EXIT_SUCCESS
;

298 
	}
}

	@/usr/include/arpa/inet.h

18 #i‚de‡
_ARPA_INET_H


19 
	#_ARPA_INET_H
 1

	)

21 
	~<„©uªs.h
>

22 
	~<√töë/ö.h
>

25 #i‚de‡
__sockÀn_t_deföed


26 
__sockÀn_t
 
	tsockÀn_t
;

27 
	#__sockÀn_t_deföed


	)

30 
__BEGIN_DECLS


34 
ö_addr_t
 
	$öë_addr
 (c⁄° *
__˝
Ë
__THROW
;

37 
ö_addr_t
 
	$öë_ aof
 (
ö_addr
 
__ö
Ë
__THROW
;

41 
ö_addr
 
	$öë_makóddr
 (
ö_addr_t
 
__√t
, in_addr_à
__ho°
)

42 
__THROW
;

45 
ö_addr_t
 
	$öë_√tof
 (
ö_addr
 
__ö
Ë
__THROW
;

49 
ö_addr_t
 
	$öë_√tw‹k
 (c⁄° *
__˝
Ë
__THROW
;

53 *
	$öë_¡ﬂ
 (
ö_addr
 
__ö
Ë
__THROW
;

58 
	$öë_±⁄
 (
__af
, c⁄° *
__ª°ri˘
 
__˝
,

59 *
__ª°ri˘
 
__buf
Ë
__THROW
;

64 c⁄° *
	$öë_¡›
 (
__af
, c⁄° *
__ª°ri˘
 
__˝
,

65 *
__ª°ri˘
 
__buf
, 
sockÀn_t
 
__Àn
)

66 
__THROW
;

70 #ifde‡
__USE_MISC


73 
	$öë_©⁄
 (c⁄° *
__˝
, 
ö_addr
 *
__öp
Ë
__THROW
;

77 *
	$öë_√è
 (
ö_addr_t
 
__√t
, *
__buf
, 
size_t
 
__Àn
Ë
__THROW
;

82 *
	$öë_√t_¡›
 (
__af
, c⁄° *
__˝
, 
__bôs
,

83 *
__buf
, 
size_t
 
__Àn
Ë
__THROW
;

88 
	$öë_√t_±⁄
 (
__af
, c⁄° *
__˝
,

89 *
__buf
, 
size_t
 
__Àn
Ë
__THROW
;

94 
	$öë_nßp_addr
 (c⁄° *
__˝
,

95 *
__buf
, 
__Àn
Ë
__THROW
;

99 *
	$öë_nßp_¡ﬂ
 (
__Àn
, c⁄° *
__˝
,

100 *
__buf
Ë
__THROW
;

103 
__END_DECLS


	@/usr/include/assert.h

22 #ifdef 
_ASSERT_H


24 #unde‡
_ASSERT_H


25 #unde‡
as£π


26 #unde‡
__ASSERT_VOID_CAST


28 #ifdef 
__USE_GNU


29 #unde‡
as£π_≥º‹


34 
	#_ASSERT_H
 1

	)

35 
	~<„©uªs.h
>

37 #i‡
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (2,95)

38 
	#__ASSERT_VOID_CAST
 
°©ic_ˇ°
<>

	)

40 
	#__ASSERT_VOID_CAST
 ()

	)

48 #ifdef 
NDEBUG


50 
	#as£π
(
ex¥
Ë(
	`__ASSERT_VOID_CAST
 (0))

	)

58 #ifdef 
__USE_GNU


59 
	#as£π_≥º‹
(
î∫um
Ë(
	`__ASSERT_VOID_CAST
 (0))

	)

64 #i‚de‡
_ASSERT_H_DECLS


65 
	#_ASSERT_H_DECLS


	)

66 
__BEGIN_DECLS


69 
	$__as£π_Áû
 (c⁄° *
__as£πi⁄
, c⁄° *
__fûe
,

70 
__löe
, c⁄° *
__fun˘i⁄
)

71 
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

74 
	$__as£π_≥º‹_Áû
 (
__î∫um
, c⁄° *
__fûe
,

75 
__löe
, c⁄° *
__fun˘i⁄
)

76 
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

81 
	$__as£π
 (c⁄° *
__as£πi⁄
, c⁄° *
__fûe
, 
__löe
)

82 
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

85 
__END_DECLS


88 
	#as£π
(
ex¥
) \

89 ((
ex¥
) \

90 ? 
	`__ASSERT_VOID_CAST
 (0) \

91 : 
	`__as£π_Áû
 (#ex¥, 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

93 #ifdef 
__USE_GNU


94 
	#as£π_≥º‹
(
î∫um
) \

95 (!(
î∫um
) \

96 ? 
	`__ASSERT_VOID_CAST
 (0) \

97 : 
	`__as£π_≥º‹_Áû
 ((
î∫um
), 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

105 #i‡
deföed
 
__˝lu•lus
 ? 
	`__GNUC_PREREQ
 (2, 6) : __GNUC_PREREQ (2, 4)

106 
	#__ASSERT_FUNCTION
 
__PRETTY_FUNCTION__


	)

108 #i‡
deföed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

109 
	#__ASSERT_FUNCTION
 
__func__


	)

111 
	#__ASSERT_FUNCTION
 ((c⁄° *Ë0)

	)

118 #i‡
deföed
 
__USE_ISOC11
 && !deföed 
__˝lu•lus


119 #unde‡
°©ic_as£π


120 
	#°©ic_as£π
 
_Sètic_as£π


	)

	@/usr/include/ctype.h

22 #i‚def 
_CTYPE_H


23 
	#_CTYPE_H
 1

	)

25 
	~<„©uªs.h
>

26 
	~<bôs/ty≥s.h
>

28 
	g__BEGIN_DECLS


30 #i‚de‡
_ISbô


39 
	~<ídün.h
>

40 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


41 
	#_ISbô
(
bô
Ë(1 << (bô))

	)

43 
	#_ISbô
(
bô
Ë((bôË< 8 ? ((1 << (bô)Ë<< 8Ë: ((1 << (bô)Ë>> 8))

	)

48 
	m_ISuµî
 = 
_ISbô
 (0),

49 
	m_ISlowî
 = 
_ISbô
 (1),

50 
	m_ISÆpha
 = 
_ISbô
 (2),

51 
	m_ISdigô
 = 
_ISbô
 (3),

52 
	m_ISxdigô
 = 
_ISbô
 (4),

53 
	m_IS•a˚
 = 
_ISbô
 (5),

54 
	m_IS¥öt
 = 
_ISbô
 (6),

55 
	m_ISgøph
 = 
_ISbô
 (7),

56 
	m_ISbœnk
 = 
_ISbô
 (8),

57 
	m_IS˙ål
 = 
_ISbô
 (9),

58 
	m_ISpun˘
 = 
_ISbô
 (10),

59 
	m_ISÆnum
 = 
_ISbô
 (11)

79 c⁄° **
	$__˘y≥_b_loc
 ()

80 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

81 c⁄° 
__öt32_t
 **
	$__˘y≥_tﬁowî_loc
 ()

82 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

83 c⁄° 
__öt32_t
 **
	$__˘y≥_touµî_loc
 ()

84 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

87 #i‚de‡
__˝lu•lus


88 
	#__is˘y≥
(
c
, 
ty≥
) \

89 ((*
	`__˘y≥_b_loc
 ())[(Ë(
c
)] & (Ë
ty≥
)

	)

90 #ñi‡
deföed
 
__USE_EXTERN_INLINES


91 
	#__is˘y≥_f
(
ty≥
) \

92 
__exã∫_ölöe
 \

93 
is
##
	`ty≥
 (
__c
Ë
__THROW
 \

95  (*
	`__˘y≥_b_loc
 ())[(Ë(
__c
)] & (Ë
_IS
##
ty≥
; \

96 
	}

	)
}

99 
	#__ißscii
(
c
Ë(((cË& ~0x7fË=0Ë

	)

100 
	#__tﬂscii
(
c
Ë((cË& 0x7fË

	)

102 
	#__ex˘y≥
(
«me
Ë
	`«me
 (Ë
__THROW


	)

104 
__BEGIN_NAMESPACE_STD


110 
__ex˘y≥
 (
iß um
);

111 
__ex˘y≥
 (
ißÕha
);

112 
__ex˘y≥
 (
is˙ål
);

113 
__ex˘y≥
 (
isdigô
);

114 
__ex˘y≥
 (
i¶owî
);

115 
__ex˘y≥
 (
isgøph
);

116 
__ex˘y≥
 (
i•röt
);

117 
__ex˘y≥
 (
i•un˘
);

118 
__ex˘y≥
 (
is•a˚
);

119 
__ex˘y≥
 (
isuµî
);

120 
__ex˘y≥
 (
isxdigô
);

124 
	$tﬁowî
 (
__c
Ë
__THROW
;

127 
	$touµî
 (
__c
Ë
__THROW
;

129 
__END_NAMESPACE_STD


133 #ifdef 
__USE_ISOC99


134 
__BEGIN_NAMESPACE_C99


136 
	`__ex˘y≥
 (
isbœnk
);

138 
__END_NAMESPACE_C99


141 #ifde‡
__USE_GNU


143 
	$is˘y≥
 (
__c
, 
__mask
Ë
__THROW
;

146 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


150 
	$ißscii
 (
__c
Ë
__THROW
;

154 
	$tﬂscii
 (
__c
Ë
__THROW
;

158 
	`__ex˘y≥
 (
_touµî
);

159 
	`__ex˘y≥
 (
_tﬁowî
);

163 
	#__tobody
(
c
, 
f
, 
a
, 
¨gs
) \

164 (
__exãnsi⁄__
 \

165 ({ 
__ªs
; \

166 i‡( (
c
) > 1) \

168 i‡(
	`__buûtö_c⁄°™t_p
 (
c
)) \

170 
__c
 = (
c
); \

171 
__ªs
 = 
__c
 < -128 || __¯> 255 ? __¯: (
a
)[__c]; \

174 
__ªs
 = 
f
 
¨gs
; \

177 
__ªs
 = (
a
)[(Ë(
c
)]; \

178 
__ªs
; 
	}
}))

	)

180 #i‡!
deföed
 
__NO_CTYPE


181 #ifde‡
__is˘y≥_f


182 
	$__is˘y≥_f
 (
Ænum
)

183 
	$__is˘y≥_f
 (
Æpha
)

184 
	$__is˘y≥_f
 (
˙ål
)

185 
	$__is˘y≥_f
 (
digô
)

186 
	$__is˘y≥_f
 (
lowî
)

187 
	$__is˘y≥_f
 (
gøph
)

188 
	$__is˘y≥_f
 (
¥öt
)

189 
	$__is˘y≥_f
 (
pun˘
)

190 
	$__is˘y≥_f
 (
•a˚
)

191 
	$__is˘y≥_f
 (
uµî
)

192 
	$__is˘y≥_f
 (
xdigô
)

193 #ifde‡
__USE_ISOC99


194 
	$__is˘y≥_f
 (
bœnk
)

196 #ñi‡
deföed
 
__is˘y≥


197 
	#iß um
(
c
Ë
	`__is˘y≥
((c), 
_ISÆnum
)

	)

198 
	#ißÕha
(
c
Ë
	`__is˘y≥
((c), 
_ISÆpha
)

	)

199 
	#is˙ål
(
c
Ë
	`__is˘y≥
((c), 
_IS˙ål
)

	)

200 
	#isdigô
(
c
Ë
	`__is˘y≥
((c), 
_ISdigô
)

	)

201 
	#i¶owî
(
c
Ë
	`__is˘y≥
((c), 
_ISlowî
)

	)

202 
	#isgøph
(
c
Ë
	`__is˘y≥
((c), 
_ISgøph
)

	)

203 
	#i•röt
(
c
Ë
	`__is˘y≥
((c), 
_IS¥öt
)

	)

204 
	#i•un˘
(
c
Ë
	`__is˘y≥
((c), 
_ISpun˘
)

	)

205 
	#is•a˚
(
c
Ë
	`__is˘y≥
((c), 
_IS•a˚
)

	)

206 
	#isuµî
(
c
Ë
	`__is˘y≥
((c), 
_ISuµî
)

	)

207 
	#isxdigô
(
c
Ë
	`__is˘y≥
((c), 
_ISxdigô
)

	)

208 #ifde‡
__USE_ISOC99


209 
	#isbœnk
(
c
Ë
	`__is˘y≥
((c), 
_ISbœnk
)

	)

213 #ifde‡
__USE_EXTERN_INLINES


214 
__exã∫_ölöe
 

215 
	`__NTH
 (
	$tﬁowî
 (
__c
))

217  
__c
 >-128 && __¯< 256 ? (*
	`__˘y≥_tﬁowî_loc
 ())[__c] : __c;

218 
	}
}

220 
__exã∫_ölöe
 

221 
__NTH
 (
	$touµî
 (
__c
))

223  
__c
 >-128 && __¯< 256 ? (*
	`__˘y≥_touµî_loc
 ())[__c] : __c;

224 
	}
}

227 #i‡
__GNUC__
 >2 && 
deföed
 
__OPTIMIZE__
 && !deföed 
__˝lu•lus


228 
	#tﬁowî
(
c
Ë
	`__tobody
 (c, 
tﬁowî
, *
	`__˘y≥_tﬁowî_loc
 (), (c))

	)

229 
	#touµî
(
c
Ë
	`__tobody
 (c, 
touµî
, *
	`__˘y≥_touµî_loc
 (), (c))

	)

232 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


233 
	#ißscii
(
c
Ë
	`__ißscii
 (c)

	)

234 
	#tﬂscii
(
c
Ë
	`__tﬂscii
 (c)

	)

236 
	#_tﬁowî
(
c
Ë((Ë(*
	`__˘y≥_tﬁowî_loc
 ())[(Ë(c)])

	)

237 
	#_touµî
(
c
Ë((Ë(*
	`__˘y≥_touµî_loc
 ())[(Ë(c)])

	)

243 #ifde‡
__USE_XOPEN2K8


257 
	~<xloˇÀ.h
>

261 
	#__is˘y≥_l
(
c
, 
ty≥
, 
loˇÀ
) \

262 ((
loˇÀ
)->
__˘y≥_b
[(Ë(
c
)] & (Ë
ty≥
)

	)

264 
	#__ex˘y≥_l
(
«me
) \

265 
	`«me
 (, 
__loˇÀ_t
Ë
__THROW


	)

271 
__ex˘y≥_l
 (
iß um_l
);

272 
__ex˘y≥_l
 (
ißÕha_l
);

273 
__ex˘y≥_l
 (
is˙ål_l
);

274 
__ex˘y≥_l
 (
isdigô_l
);

275 
__ex˘y≥_l
 (
i¶owî_l
);

276 
__ex˘y≥_l
 (
isgøph_l
);

277 
__ex˘y≥_l
 (
i•röt_l
);

278 
__ex˘y≥_l
 (
i•un˘_l
);

279 
__ex˘y≥_l
 (
is•a˚_l
);

280 
__ex˘y≥_l
 (
isuµî_l
);

281 
__ex˘y≥_l
 (
isxdigô_l
);

283 
__ex˘y≥_l
 (
isbœnk_l
);

287 
	$__tﬁowî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

288 
	$tﬁowî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

291 
	$__touµî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

292 
	$touµî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

294 #i‡
__GNUC__
 >2 && 
deföed
 
__OPTIMIZE__
 && !deföed 
__˝lu•lus


295 
	#__tﬁowî_l
(
c
, 
loˇÀ
) \

296 
	`__tobody
 (
c
, 
__tﬁowî_l
, (
loˇÀ
)->
__˘y≥_tﬁowî
, (c,ÜoˇÀ))

	)

297 
	#__touµî_l
(
c
, 
loˇÀ
) \

298 
	`__tobody
 (
c
, 
__touµî_l
, (
loˇÀ
)->
__˘y≥_touµî
, (c,ÜoˇÀ))

	)

299 
	#tﬁowî_l
(
c
, 
loˇÀ
Ë
	`__tﬁowî_l
 ((c), (loˇÀ))

	)

300 
	#touµî_l
(
c
, 
loˇÀ
Ë
	`__touµî_l
 ((c), (loˇÀ))

	)

304 #i‚de‡
__NO_CTYPE


305 
	#__iß um_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISÆnum
, (l))

	)

306 
	#__ißÕha_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISÆpha
, (l))

	)

307 
	#__is˙ål_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_IS˙ål
, (l))

	)

308 
	#__isdigô_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISdigô
, (l))

	)

309 
	#__i¶owî_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISlowî
, (l))

	)

310 
	#__isgøph_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISgøph
, (l))

	)

311 
	#__i•röt_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_IS¥öt
, (l))

	)

312 
	#__i•un˘_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISpun˘
, (l))

	)

313 
	#__is•a˚_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_IS•a˚
, (l))

	)

314 
	#__isuµî_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISuµî
, (l))

	)

315 
	#__isxdigô_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISxdigô
, (l))

	)

317 
	#__isbœnk_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISbœnk
, (l))

	)

319 #ifde‡
__USE_MISC


320 
	#__ißscii_l
(
c
,
l
Ë(÷), 
	`__ißscii
 (c))

	)

321 
	#__tﬂscii_l
(
c
,
l
Ë(÷), 
	`__tﬂscii
 (c))

	)

324 
	#iß um_l
(
c
,
l
Ë
	`__iß um_l
 ((c), (l))

	)

325 
	#ißÕha_l
(
c
,
l
Ë
	`__ißÕha_l
 ((c), (l))

	)

326 
	#is˙ål_l
(
c
,
l
Ë
	`__is˙ål_l
 ((c), (l))

	)

327 
	#isdigô_l
(
c
,
l
Ë
	`__isdigô_l
 ((c), (l))

	)

328 
	#i¶owî_l
(
c
,
l
Ë
	`__i¶owî_l
 ((c), (l))

	)

329 
	#isgøph_l
(
c
,
l
Ë
	`__isgøph_l
 ((c), (l))

	)

330 
	#i•röt_l
(
c
,
l
Ë
	`__i•röt_l
 ((c), (l))

	)

331 
	#i•un˘_l
(
c
,
l
Ë
	`__i•un˘_l
 ((c), (l))

	)

332 
	#is•a˚_l
(
c
,
l
Ë
	`__is•a˚_l
 ((c), (l))

	)

333 
	#isuµî_l
(
c
,
l
Ë
	`__isuµî_l
 ((c), (l))

	)

334 
	#isxdigô_l
(
c
,
l
Ë
	`__isxdigô_l
 ((c), (l))

	)

336 
	#isbœnk_l
(
c
,
l
Ë
	`__isbœnk_l
 ((c), (l))

	)

338 #ifde‡
__USE_MISC


339 
	#ißscii_l
(
c
,
l
Ë
	`__ißscii_l
 ((c), (l))

	)

340 
	#tﬂscii_l
(
c
,
l
Ë
	`__tﬂscii_l
 ((c), (l))

	)

347 
__END_DECLS


	@/usr/include/curl/curl.h

1 #i‚de‡
__CURL_CURL_H


2 
	#__CURL_CURL_H


	)

33 
	~"cuævî.h
"

34 
	~"cuæbuûd.h
"

35 
	~"cuæruÀs.h
"

41 #i‡(
deföed
(
_WIN32
Ë|| deföed(
__WIN32__
)) && \

42 !
deföed
(
WIN32
Ë&& !
	$deföed
(
__SYMBIAN32__
)

43 
	#WIN32


	)

46 
	~<°dio.h
>

47 
	~<limôs.h
>

49 #i‡
	`deföed
(
__FªeBSD__
) && (__FreeBSD__ >= 2)

51 
	~<o§ñd©e.h
>

55 
	~<sys/ty≥s.h
>

56 
	~<time.h
>

58 #i‡
	`deföed
(
WIN32
Ë&& !deföed(
_WIN32_WCE
Ë&& !deföed(
__CYGWIN__
)

59 #i‡!(
	`deföed
(
_WINSOCKAPI_
Ë|| deföed(
_WINSOCK_H
) || \

60 
	`deföed
(
__LWIP_OPT_H__
Ë|| 
	$deföed
(
LWIP_HDR_OPT_H
))

63 
	~<wösock2.h
>

64 
	~<ws2t˝ù.h
>

71 #i‡
	`deföed
(
_AIX
Ë|| deföed(
__NOVELL_LIBC__
Ë|| deföed(
__NëBSD__
) || \

72 
	`deföed
(
__möix
Ë|| deföed(
__SYMBIAN32__
Ë|| deföed(
__INTEGRITY
) || \

73 
	`deföed
(
ANDROID
Ë|| deföed(
__ANDROID__
Ë|| deföed(
__O≥nBSD__
) || \

74 (
	`deföed
(
__FªeBSD_vîsi⁄
) && (__FreeBSD_version < 800000))

75 
	~<sys/£À˘.h
>

78 #i‡!
	`deföed
(
WIN32
Ë&& !deföed(
_WIN32_WCE
)

79 
	~<sys/sockë.h
>

82 #i‡!
	`deföed
(
WIN32
Ë&& !deföed(
__WATCOMC__
Ë&& !deföed(
__VXWORKS__
)

83 
	~<sys/time.h
>

86 #ifde‡
__BEOS__


87 
	~<suµ‹t/Suµ‹tDefs.h
>

90 #ifde‡ 
__˝lu•lus


94 
	tCURL
;

100 #ifde‡
CURL_STATICLIB


101 
	#CURL_EXTERN


	)

102 #ñi‡
	`deföed
(
WIN32
Ë|| deföed(
_WIN32
Ë|| deföed(
__SYMBIAN32__
)

103 #i‡
	`deföed
(
BUILDING_LIBCURL
)

104 
	#CURL_EXTERN
 
	`__de˛•ec
(
dŒexp‹t
)

	)

106 
	#CURL_EXTERN
 
	`__de˛•ec
(
dŒimp‹t
)

	)

108 #ñi‡
	`deföed
(
BUILDING_LIBCURL
Ë&& deföed(
CURL_HIDDEN_SYMBOLS
)

109 
	#CURL_EXTERN
 
CURL_EXTERN_SYMBOL


	)

111 
	#CURL_EXTERN


	)

114 #i‚de‡
cuæ_sockë_ty≥def


116 #i‡
	`deföed
(
WIN32
Ë&& !deföed(
__LWIP_OPT_H__
Ë&& !deföed(
LWIP_HDR_OPT_H
)

117 
SOCKET
 
	tcuæ_sockë_t
;

118 
	#CURL_SOCKET_BAD
 
INVALID_SOCKET


	)

120 
	tcuæ_sockë_t
;

121 
	#CURL_SOCKET_BAD
 -1

	)

123 
	#cuæ_sockë_ty≥def


	)

126 
	scuæ_hâµo°
 {

127 
cuæ_hâµo°
 *
√xt
;

128 *
«me
;

129 
«mñígth
;

130 *
c⁄ã¡s
;

131 
c⁄ã¡¶ígth
;

133 *
buf„r
;

134 
buf„æígth
;

135 *
c⁄ã¡ty≥
;

136 
cuæ_¶i°
* 
c⁄ã¡hódî
;

137 
cuæ_hâµo°
 *
m‹e
;

140 
Êags
;

143 
	#CURL_HTTPPOST_FILENAME
 (1<<0)

	)

145 
	#CURL_HTTPPOST_READFILE
 (1<<1)

	)

147 
	#CURL_HTTPPOST_PTRNAME
 (1<<2)

	)

149 
	#CURL_HTTPPOST_PTRCONTENTS
 (1<<3)

	)

151 
	#CURL_HTTPPOST_BUFFER
 (1<<4)

	)

153 
	#CURL_HTTPPOST_PTRBUFFER
 (1<<5)

	)

156 
	#CURL_HTTPPOST_CALLBACK
 (1<<6)

	)

158 
	#CURL_HTTPPOST_LARGE
 (1<<7)

	)

160 *
showfûíame
;

163 *
u£Ω
;

165 
cuæ_off_t
 
c⁄ã¡Àn
;

172 (*
	tcuæ_¥ogªss_ˇŒback
)(*
	t˛õ¡p
,

173 
	td…ŸÆ
,

174 
	td ow
,

175 
	tu…ŸÆ
,

176 
	tu ow
);

180 (*
	tcuæ_x„röfo_ˇŒback
)(*
	t˛õ¡p
,

181 
	tcuæ_off_t
 
	td…ŸÆ
,

182 
	tcuæ_off_t
 
	td ow
,

183 
	tcuæ_off_t
 
	tu…ŸÆ
,

184 
	tcuæ_off_t
 
	tu ow
);

186 #i‚de‡
CURL_MAX_WRITE_SIZE


193 
	#CURL_MAX_WRITE_SIZE
 16384

	)

196 #i‚de‡
CURL_MAX_HTTP_HEADER


200 
	#CURL_MAX_HTTP_HEADER
 (100*1024)

	)

205 
	#CURL_WRITEFUNC_PAUSE
 0x10000001

	)

207 
	`size_t
 (*
	tcuæ_wrôe_ˇŒback
)(*
	tbuf„r
,

208 
	tsize_t
 
	tsize
,

209 
	tsize_t
 
	tnôems
,

210 *
	tout°ªam
);

216 
CURLFILETYPE_FILE
 = 0,

217 
CURLFILETYPE_DIRECTORY
,

218 
CURLFILETYPE_SYMLINK
,

219 
CURLFILETYPE_DEVICE_BLOCK
,

220 
CURLFILETYPE_DEVICE_CHAR
,

221 
CURLFILETYPE_NAMEDPIPE
,

222 
CURLFILETYPE_SOCKET
,

223 
CURLFILETYPE_DOOR
,

225 
CURLFILETYPE_UNKNOWN


226 } 
	tcuæfûëy≥
;

228 
	#CURLFINFOFLAG_KNOWN_FILENAME
 (1<<0)

	)

229 
	#CURLFINFOFLAG_KNOWN_FILETYPE
 (1<<1)

	)

230 
	#CURLFINFOFLAG_KNOWN_TIME
 (1<<2)

	)

231 
	#CURLFINFOFLAG_KNOWN_PERM
 (1<<3)

	)

232 
	#CURLFINFOFLAG_KNOWN_UID
 (1<<4)

	)

233 
	#CURLFINFOFLAG_KNOWN_GID
 (1<<5)

	)

234 
	#CURLFINFOFLAG_KNOWN_SIZE
 (1<<6)

	)

235 
	#CURLFINFOFLAG_KNOWN_HLINKCOUNT
 (1<<7)

	)

241 
	scuæ_fûeöfo
 {

242 *
fûíame
;

243 
cuæfûëy≥
 
fûëy≥
;

244 
time_t
 
time
;

245 
≥rm
;

246 
uid
;

247 
gid
;

248 
cuæ_off_t
 
size
;

249 
h¨dlöks
;

253 *
time
;

254 *
≥rm
;

255 *
u£r
;

256 *
group
;

257 *
èrgë
;

258 } 
°rögs
;

260 
Êags
;

263 * 
b_d©a
;

264 
size_t
 
b_size
;

265 
size_t
 
b_u£d
;

269 
	#CURL_CHUNK_BGN_FUNC_OK
 0

	)

270 
	#CURL_CHUNK_BGN_FUNC_FAIL
 1

	)

271 
	#CURL_CHUNK_BGN_FUNC_SKIP
 2

	)

276 (*
	tcuæ_chunk_bgn_ˇŒback
)(c⁄° *
	tå™s„r_öfo
,

277 *
	t±r
,

278 
	tªmaös
);

281 
	#CURL_CHUNK_END_FUNC_OK
 0

	)

282 
	#CURL_CHUNK_END_FUNC_FAIL
 1

	)

290 (*
	tcuæ_chunk_íd_ˇŒback
)(*
	t±r
);

293 
	#CURL_FNMATCHFUNC_MATCH
 0

	)

294 
	#CURL_FNMATCHFUNC_NOMATCH
 1

	)

295 
	#CURL_FNMATCHFUNC_FAIL
 2

	)

299 (*
	tcuæ_‚m©ch_ˇŒback
)(*
	t±r
,

300 c⁄° *
	t∑âîn
,

301 c⁄° *
	t°rög
);

304 
	#CURL_SEEKFUNC_OK
 0

	)

305 
	#CURL_SEEKFUNC_FAIL
 1

	)

306 
	#CURL_SEEKFUNC_CANTSEEK
 2

	)

308 (*
	tcuæ_£ek_ˇŒback
)(*
	tö°ªam
,

309 
	tcuæ_off_t
 
	toff£t
,

310 
	t‹igö
);

314 
	#CURL_READFUNC_ABORT
 0x10000000

	)

317 
	#CURL_READFUNC_PAUSE
 0x10000001

	)

319 
	`size_t
 (*
	tcuæ_ªad_ˇŒback
)(*
	tbuf„r
,

320 
	tsize_t
 
	tsize
,

321 
	tsize_t
 
	tnôems
,

322 *
	tö°ªam
);

325 
CURLSOCKTYPE_IPCXN
,

326 
CURLSOCKTYPE_ACCEPT
,

327 
CURLSOCKTYPE_LAST


328 } 
	tcuæsockty≥
;

332 
	#CURL_SOCKOPT_OK
 0

	)

333 
	#CURL_SOCKOPT_ERROR
 1

	)

335 
	#CURL_SOCKOPT_ALREADY_CONNECTED
 2

	)

337 (*
	tcuæ_sock›t_ˇŒback
)(*
	t˛õ¡p
,

338 
	tcuæ_sockë_t
 
	tcuæfd
,

339 
	tcuæsockty≥
 
	tpuΩo£
);

341 
	scuæ_sockaddr
 {

342 
Ámûy
;

343 
sockty≥
;

344 
¥Ÿocﬁ
;

345 
addæí
;

348 
sockaddr
 
addr
;

351 
cuæ_sockë_t


352 (*
	tcuæ_›ísockë_ˇŒback
)(*
	t˛õ¡p
,

353 
	tcuæsockty≥
 
	tpuΩo£
,

354 
	tcuæ_sockaddr
 *
	taddªss
);

357 (*
	tcuæ_˛o£sockë_ˇŒback
)(*
	t˛õ¡p
, 
	tcuæ_sockë_t
 
	tôem
);

360 
CURLIOE_OK
,

361 
CURLIOE_UNKNOWNCMD
,

362 
CURLIOE_FAILRESTART
,

363 
CURLIOE_LAST


364 } 
	tcuæi€º
;

367 
CURLIOCMD_NOP
,

368 
CURLIOCMD_RESTARTREAD
,

369 
CURLIOCMD_LAST


370 } 
	tcuæiocmd
;

372 
	`cuæi€º
 (*
	tcuæ_io˘l_ˇŒback
)(
	tCURL
 *
	th™dÀ
,

373 
	tcmd
,

374 *
	t˛õ¡p
);

382 *(*
	tcuæ_mÆloc_ˇŒback
)(
	tsize_t
 
	tsize
);

383 (*
	tcuæ_‰ì_ˇŒback
)(*
	t±r
);

384 *(*
	tcuæ_ªÆloc_ˇŒback
)(*
	t±r
, 
	tsize_t
 
	tsize
);

385 *(*
	tcuæ_°rdup_ˇŒback
)(c⁄° *
	t°r
);

386 *(*
	tcuæ_ˇŒoc_ˇŒback
)(
	tsize_t
 
	tnmemb
, size_à
	tsize
);

390 
CURLINFO_TEXT
 = 0,

391 
CURLINFO_HEADER_IN
,

392 
CURLINFO_HEADER_OUT
,

393 
CURLINFO_DATA_IN
,

394 
CURLINFO_DATA_OUT
,

395 
CURLINFO_SSL_DATA_IN
,

396 
CURLINFO_SSL_DATA_OUT
,

397 
CURLINFO_END


398 } 
	tcuæ_öfŸy≥
;

400 (*
	tcuæ_debug_ˇŒback
)

401 (
	tCURL
 *
	th™dÀ
,

402 
	tcuæ_öfŸy≥
 
	tty≥
,

403 *
	td©a
,

404 
	tsize_t
 
	tsize
,

405 *
	tu£Ωå
);

415 
CURLE_OK
 = 0,

416 
CURLE_UNSUPPORTED_PROTOCOL
,

417 
CURLE_FAILED_INIT
,

418 
CURLE_URL_MALFORMAT
,

419 
CURLE_NOT_BUILT_IN
,

421 
CURLE_COULDNT_RESOLVE_PROXY
,

422 
CURLE_COULDNT_RESOLVE_HOST
,

423 
CURLE_COULDNT_CONNECT
,

424 
CURLE_FTP_WEIRD_SERVER_REPLY
,

425 
CURLE_REMOTE_ACCESS_DENIED
,

428 
CURLE_FTP_ACCEPT_FAILED
,

430 
CURLE_FTP_WEIRD_PASS_REPLY
,

431 
CURLE_FTP_ACCEPT_TIMEOUT
,

434 
CURLE_FTP_WEIRD_PASV_REPLY
,

435 
CURLE_FTP_WEIRD_227_FORMAT
,

436 
CURLE_FTP_CANT_GET_HOST
,

437 
CURLE_HTTP2
,

440 
CURLE_FTP_COULDNT_SET_TYPE
,

441 
CURLE_PARTIAL_FILE
,

442 
CURLE_FTP_COULDNT_RETR_FILE
,

443 
CURLE_OBSOLETE20
,

444 
CURLE_QUOTE_ERROR
,

445 
CURLE_HTTP_RETURNED_ERROR
,

446 
CURLE_WRITE_ERROR
,

447 
CURLE_OBSOLETE24
,

448 
CURLE_UPLOAD_FAILED
,

449 
CURLE_READ_ERROR
,

450 
CURLE_OUT_OF_MEMORY
,

455 
CURLE_OPERATION_TIMEDOUT
,

456 
CURLE_OBSOLETE29
,

457 
CURLE_FTP_PORT_FAILED
,

458 
CURLE_FTP_COULDNT_USE_REST
,

459 
CURLE_OBSOLETE32
,

460 
CURLE_RANGE_ERROR
,

461 
CURLE_HTTP_POST_ERROR
,

462 
CURLE_SSL_CONNECT_ERROR
,

463 
CURLE_BAD_DOWNLOAD_RESUME
,

464 
CURLE_FILE_COULDNT_READ_FILE
,

465 
CURLE_LDAP_CANNOT_BIND
,

466 
CURLE_LDAP_SEARCH_FAILED
,

467 
CURLE_OBSOLETE40
,

468 
CURLE_FUNCTION_NOT_FOUND
,

469 
CURLE_ABORTED_BY_CALLBACK
,

470 
CURLE_BAD_FUNCTION_ARGUMENT
,

471 
CURLE_OBSOLETE44
,

472 
CURLE_INTERFACE_FAILED
,

473 
CURLE_OBSOLETE46
,

474 
CURLE_TOO_MANY_REDIRECTS
 ,

475 
CURLE_UNKNOWN_OPTION
,

476 
CURLE_TELNET_OPTION_SYNTAX
 ,

477 
CURLE_OBSOLETE50
,

478 
CURLE_PEER_FAILED_VERIFICATION
,

480 
CURLE_GOT_NOTHING
,

481 
CURLE_SSL_ENGINE_NOTFOUND
,

482 
CURLE_SSL_ENGINE_SETFAILED
,

484 
CURLE_SEND_ERROR
,

485 
CURLE_RECV_ERROR
,

486 
CURLE_OBSOLETE57
,

487 
CURLE_SSL_CERTPROBLEM
,

488 
CURLE_SSL_CIPHER
,

489 
CURLE_SSL_CACERT
,

490 
CURLE_BAD_CONTENT_ENCODING
,

491 
CURLE_LDAP_INVALID_URL
,

492 
CURLE_FILESIZE_EXCEEDED
,

493 
CURLE_USE_SSL_FAILED
,

494 
CURLE_SEND_FAIL_REWIND
,

496 
CURLE_SSL_ENGINE_INITFAILED
,

497 
CURLE_LOGIN_DENIED
,

499 
CURLE_TFTP_NOTFOUND
,

500 
CURLE_TFTP_PERM
,

501 
CURLE_REMOTE_DISK_FULL
,

502 
CURLE_TFTP_ILLEGAL
,

503 
CURLE_TFTP_UNKNOWNID
,

504 
CURLE_REMOTE_FILE_EXISTS
,

505 
CURLE_TFTP_NOSUCHUSER
,

506 
CURLE_CONV_FAILED
,

507 
CURLE_CONV_REQD
,

512 
CURLE_SSL_CACERT_BADFILE
,

514 
CURLE_REMOTE_FILE_NOT_FOUND
,

515 
CURLE_SSH
,

519 
CURLE_SSL_SHUTDOWN_FAILED
,

521 
CURLE_AGAIN
,

524 
CURLE_SSL_CRL_BADFILE
,

526 
CURLE_SSL_ISSUER_ERROR
,

528 
CURLE_FTP_PRET_FAILED
,

529 
CURLE_RTSP_CSEQ_ERROR
,

530 
CURLE_RTSP_SESSION_ERROR
,

531 
CURLE_FTP_BAD_FILE_LIST
,

532 
CURLE_CHUNK_FAILED
,

533 
CURLE_NO_CONNECTION_AVAILABLE
,

535 
CURLE_SSL_PINNEDPUBKEYNOTMATCH
,

537 
CURLE_SSL_INVALIDCERTSTATUS
,

538 
CURL_LAST


539 } 
	tCURLcode
;

541 #i‚de‡
CURL_NO_OLDIES


545 
	#CURLE_OBSOLETE16
 
CURLE_HTTP2


	)

548 
	#CURLE_OBSOLETE10
 
CURLE_FTP_ACCEPT_FAILED


	)

549 
	#CURLE_OBSOLETE12
 
CURLE_FTP_ACCEPT_TIMEOUT


	)

552 
	#CURLOPT_ENCODING
 
CURLOPT_ACCEPT_ENCODING


	)

555 
	#CURLE_UNKNOWN_TELNET_OPTION
 
CURLE_UNKNOWN_OPTION


	)

559 
	#CURLE_SSL_PEER_CERTIFICATE
 
CURLE_PEER_FAILED_VERIFICATION


	)

563 
	#CURLE_OBSOLETE
 
CURLE_OBSOLETE50


	)

564 
	#CURLE_BAD_PASSWORD_ENTERED
 
CURLE_OBSOLETE46


	)

565 
	#CURLE_BAD_CALLING_ORDER
 
CURLE_OBSOLETE44


	)

566 
	#CURLE_FTP_USER_PASSWORD_INCORRECT
 
CURLE_OBSOLETE10


	)

567 
	#CURLE_FTP_CANT_RECONNECT
 
CURLE_OBSOLETE16


	)

568 
	#CURLE_FTP_COULDNT_GET_SIZE
 
CURLE_OBSOLETE32


	)

569 
	#CURLE_FTP_COULDNT_SET_ASCII
 
CURLE_OBSOLETE29


	)

570 
	#CURLE_FTP_WEIRD_USER_REPLY
 
CURLE_OBSOLETE12


	)

571 
	#CURLE_FTP_WRITE_ERROR
 
CURLE_OBSOLETE20


	)

572 
	#CURLE_LIBRARY_NOT_FOUND
 
CURLE_OBSOLETE40


	)

573 
	#CURLE_MALFORMAT_USER
 
CURLE_OBSOLETE24


	)

574 
	#CURLE_SHARE_IN_USE
 
CURLE_OBSOLETE57


	)

575 
	#CURLE_URL_MALFORMAT_USER
 
CURLE_NOT_BUILT_IN


	)

577 
	#CURLE_FTP_ACCESS_DENIED
 
CURLE_REMOTE_ACCESS_DENIED


	)

578 
	#CURLE_FTP_COULDNT_SET_BINARY
 
CURLE_FTP_COULDNT_SET_TYPE


	)

579 
	#CURLE_FTP_QUOTE_ERROR
 
CURLE_QUOTE_ERROR


	)

580 
	#CURLE_TFTP_DISKFULL
 
CURLE_REMOTE_DISK_FULL


	)

581 
	#CURLE_TFTP_EXISTS
 
CURLE_REMOTE_FILE_EXISTS


	)

582 
	#CURLE_HTTP_RANGE_ERROR
 
CURLE_RANGE_ERROR


	)

583 
	#CURLE_FTP_SSL_FAILED
 
CURLE_USE_SSL_FAILED


	)

587 
	#CURLE_OPERATION_TIMEOUTED
 
CURLE_OPERATION_TIMEDOUT


	)

589 
	#CURLE_HTTP_NOT_FOUND
 
CURLE_HTTP_RETURNED_ERROR


	)

590 
	#CURLE_HTTP_PORT_FAILED
 
CURLE_INTERFACE_FAILED


	)

591 
	#CURLE_FTP_COULDNT_STOR_FILE
 
CURLE_UPLOAD_FAILED


	)

593 
	#CURLE_FTP_PARTIAL_FILE
 
CURLE_PARTIAL_FILE


	)

594 
	#CURLE_FTP_BAD_DOWNLOAD_RESUME
 
CURLE_BAD_DOWNLOAD_RESUME


	)

599 
	#CURLE_ALREADY_COMPLETE
 99999

	)

602 
	#CURLOPT_FILE
 
CURLOPT_WRITEDATA


	)

603 
	#CURLOPT_INFILE
 
CURLOPT_READDATA


	)

604 
	#CURLOPT_WRITEHEADER
 
CURLOPT_HEADERDATA


	)

608 
	#CURLOPT_WRITEINFO
 
CURLOPT_OBSOLETE40


	)

609 
	#CURLOPT_CLOSEPOLICY
 
CURLOPT_OBSOLETE72


	)

614 
	`CURLcode
 (*
	tcuæ_c⁄v_ˇŒback
)(*
	tbuf„r
, 
	tsize_t
 
	tÀngth
);

616 
	`CURLcode
 (*
	tcuæ_s¶_˘x_ˇŒback
)(
	tCURL
 *
	tcuæ
,

617 *
	ts¶_˘x
,

619 *
	tu£Ωå
);

622 
CURLPROXY_HTTP
 = 0,

624 
CURLPROXY_HTTP_1_0
 = 1,

626 
CURLPROXY_SOCKS4
 = 4,

628 
CURLPROXY_SOCKS5
 = 5,

629 
CURLPROXY_SOCKS4A
 = 6,

630 
CURLPROXY_SOCKS5_HOSTNAME
 = 7

633 } 
	tcuæ_¥oxyty≥
;

652 
	#CURLAUTH_NONE
 (()0)

	)

653 
	#CURLAUTH_BASIC
 ((()1)<<0)

	)

654 
	#CURLAUTH_DIGEST
 ((()1)<<1)

	)

655 
	#CURLAUTH_NEGOTIATE
 ((()1)<<2)

	)

657 
	#CURLAUTH_GSSNEGOTIATE
 
CURLAUTH_NEGOTIATE


	)

658 
	#CURLAUTH_NTLM
 ((()1)<<3)

	)

659 
	#CURLAUTH_DIGEST_IE
 ((()1)<<4)

	)

660 
	#CURLAUTH_NTLM_WB
 ((()1)<<5)

	)

661 
	#CURLAUTH_ONLY
 ((()1)<<31)

	)

662 
	#CURLAUTH_ANY
 (~
CURLAUTH_DIGEST_IE
)

	)

663 
	#CURLAUTH_ANYSAFE
 (~(
CURLAUTH_BASIC
|
CURLAUTH_DIGEST_IE
))

	)

665 
	#CURLSSH_AUTH_ANY
 ~0

	)

666 
	#CURLSSH_AUTH_NONE
 0

	)

667 
	#CURLSSH_AUTH_PUBLICKEY
 (1<<0Ë

	)

668 
	#CURLSSH_AUTH_PASSWORD
 (1<<1Ë

	)

669 
	#CURLSSH_AUTH_HOST
 (1<<2Ë

	)

670 
	#CURLSSH_AUTH_KEYBOARD
 (1<<3Ë

	)

671 
	#CURLSSH_AUTH_AGENT
 (1<<4Ë

	)

672 
	#CURLSSH_AUTH_DEFAULT
 
CURLSSH_AUTH_ANY


	)

674 
	#CURLGSSAPI_DELEGATION_NONE
 0

	)

675 
	#CURLGSSAPI_DELEGATION_POLICY_FLAG
 (1<<0Ë

	)

676 
	#CURLGSSAPI_DELEGATION_FLAG
 (1<<1Ë

	)

678 
	#CURL_ERROR_SIZE
 256

	)

680 
	ecuæ_khty≥
 {

681 
CURLKHTYPE_UNKNOWN
,

682 
CURLKHTYPE_RSA1
,

683 
CURLKHTYPE_RSA
,

684 
CURLKHTYPE_DSS


687 
	scuæ_khkey
 {

688 c⁄° *
key
;

690 
size_t
 
Àn
;

691 
cuæ_khty≥
 
keyty≥
;

696 
	ecuæ_kh°©
 {

697 
CURLKHSTAT_FINE_ADD_TO_FILE
,

698 
CURLKHSTAT_FINE
,

699 
CURLKHSTAT_REJECT
,

700 
CURLKHSTAT_DEFER
,

703 
CURLKHSTAT_LAST


707 
	ecuæ_khm©ch
 {

708 
CURLKHMATCH_OK
,

709 
CURLKHMATCH_MISMATCH
,

710 
CURLKHMATCH_MISSING
,

711 
CURLKHMATCH_LAST


715 (*
	tcuæ_sshkeyˇŒback
Ë(
	tCURL
 *
	tósy
,

716 c⁄° 
	tcuæ_khkey
 *
	tknownkey
,

717 c⁄° 
	tcuæ_khkey
 *
	tfoundkey
,

718 
	tcuæ_khm©ch
,

719 *
	t˛õ¡p
);

723 
CURLUSESSL_NONE
,

724 
CURLUSESSL_TRY
,

725 
CURLUSESSL_CONTROL
,

726 
CURLUSESSL_ALL
,

727 
CURLUSESSL_LAST


728 } 
	tcuæ_u£s¶
;

737 
	#CURLSSLOPT_ALLOW_BEAST
 (1<<0)

	)

741 
	#CURLSSLOPT_NO_REVOKE
 (1<<1)

	)

743 #i‚de‡
CURL_NO_OLDIES


749 
	#CURLFTPSSL_NONE
 
CURLUSESSL_NONE


	)

750 
	#CURLFTPSSL_TRY
 
CURLUSESSL_TRY


	)

751 
	#CURLFTPSSL_CONTROL
 
CURLUSESSL_CONTROL


	)

752 
	#CURLFTPSSL_ALL
 
CURLUSESSL_ALL


	)

753 
	#CURLFTPSSL_LAST
 
CURLUSESSL_LAST


	)

754 
	#cuæ_·ps¶
 
cuæ_u£s¶


	)

759 
CURLFTPSSL_CCC_NONE
,

760 
CURLFTPSSL_CCC_PASSIVE
,

761 
CURLFTPSSL_CCC_ACTIVE
,

762 
CURLFTPSSL_CCC_LAST


763 } 
	tcuæ_·pccc
;

767 
CURLFTPAUTH_DEFAULT
,

768 
CURLFTPAUTH_SSL
,

769 
CURLFTPAUTH_TLS
,

770 
CURLFTPAUTH_LAST


771 } 
	tcuæ_·∑uth
;

775 
CURLFTP_CREATE_DIR_NONE
,

776 
CURLFTP_CREATE_DIR
,

779 
CURLFTP_CREATE_DIR_RETRY
,

781 
CURLFTP_CREATE_DIR_LAST


782 } 
	tcuæ_·p¸óãdú
;

786 
CURLFTPMETHOD_DEFAULT
,

787 
CURLFTPMETHOD_MULTICWD
,

788 
CURLFTPMETHOD_NOCWD
,

789 
CURLFTPMETHOD_SINGLECWD
,

790 
CURLFTPMETHOD_LAST


791 } 
	tcuæ_·pmëhod
;

794 
	#CURLHEADER_UNIFIED
 0

	)

795 
	#CURLHEADER_SEPARATE
 (1<<0)

	)

798 
	#CURLPROTO_HTTP
 (1<<0)

	)

799 
	#CURLPROTO_HTTPS
 (1<<1)

	)

800 
	#CURLPROTO_FTP
 (1<<2)

	)

801 
	#CURLPROTO_FTPS
 (1<<3)

	)

802 
	#CURLPROTO_SCP
 (1<<4)

	)

803 
	#CURLPROTO_SFTP
 (1<<5)

	)

804 
	#CURLPROTO_TELNET
 (1<<6)

	)

805 
	#CURLPROTO_LDAP
 (1<<7)

	)

806 
	#CURLPROTO_LDAPS
 (1<<8)

	)

807 
	#CURLPROTO_DICT
 (1<<9)

	)

808 
	#CURLPROTO_FILE
 (1<<10)

	)

809 
	#CURLPROTO_TFTP
 (1<<11)

	)

810 
	#CURLPROTO_IMAP
 (1<<12)

	)

811 
	#CURLPROTO_IMAPS
 (1<<13)

	)

812 
	#CURLPROTO_POP3
 (1<<14)

	)

813 
	#CURLPROTO_POP3S
 (1<<15)

	)

814 
	#CURLPROTO_SMTP
 (1<<16)

	)

815 
	#CURLPROTO_SMTPS
 (1<<17)

	)

816 
	#CURLPROTO_RTSP
 (1<<18)

	)

817 
	#CURLPROTO_RTMP
 (1<<19)

	)

818 
	#CURLPROTO_RTMPT
 (1<<20)

	)

819 
	#CURLPROTO_RTMPE
 (1<<21)

	)

820 
	#CURLPROTO_RTMPTE
 (1<<22)

	)

821 
	#CURLPROTO_RTMPS
 (1<<23)

	)

822 
	#CURLPROTO_RTMPTS
 (1<<24)

	)

823 
	#CURLPROTO_GOPHER
 (1<<25)

	)

824 
	#CURLPROTO_SMB
 (1<<26)

	)

825 
	#CURLPROTO_SMBS
 (1<<27)

	)

826 
	#CURLPROTO_ALL
 (~0Ë

	)

830 
	#CURLOPTTYPE_LONG
 0

	)

831 
	#CURLOPTTYPE_OBJECTPOINT
 10000

	)

832 
	#CURLOPTTYPE_STRINGPOINT
 10000

	)

833 
	#CURLOPTTYPE_FUNCTIONPOINT
 20000

	)

834 
	#CURLOPTTYPE_OFF_T
 30000

	)

842 #ifde‡
CINIT


843 #unde‡
CINIT


846 #ifde‡
CURL_ISOCPP


847 
	#CINIT
(
«
,
t
,
nu
Ë
CURLOPT_
 ##Ç®
CURLOPTTYPE_
 ##Å + 
	)
nu

850 
	#LONG
 
CURLOPTTYPE_LONG


	)

851 
	#OBJECTPOINT
 
CURLOPTTYPE_OBJECTPOINT


	)

852 
	#STRINGPOINT
 
CURLOPTTYPE_OBJECTPOINT


	)

853 
	#FUNCTIONPOINT
 
CURLOPTTYPE_FUNCTIONPOINT


	)

854 
	#OFF_T
 
CURLOPTTYPE_OFF_T


	)

855 
	#CINIT
(
«me
,
ty≥
,
numbî
Ë
CURLOPT_
Çamêty≥ + 
	)
number

866 
	`CINIT
(
WRITEDATA
, 
OBJECTPOINT
, 1),

869 
	`CINIT
(
URL
, 
STRINGPOINT
, 2),

872 
	`CINIT
(
PORT
, 
LONG
, 3),

875 
	`CINIT
(
PROXY
, 
STRINGPOINT
, 4),

878 
	`CINIT
(
USERPWD
, 
STRINGPOINT
, 5),

881 
	`CINIT
(
PROXYUSERPWD
, 
STRINGPOINT
, 6),

884 
	`CINIT
(
RANGE
, 
STRINGPOINT
, 7),

889 
	`CINIT
(
READDATA
, 
OBJECTPOINT
, 9),

893 
	`CINIT
(
ERRORBUFFER
, 
OBJECTPOINT
, 10),

897 
	`CINIT
(
WRITEFUNCTION
, 
FUNCTIONPOINT
, 11),

901 
	`CINIT
(
READFUNCTION
, 
FUNCTIONPOINT
, 12),

904 
	`CINIT
(
TIMEOUT
, 
LONG
, 13),

915 
	`CINIT
(
INFILESIZE
, 
LONG
, 14),

918 
	`CINIT
(
POSTFIELDS
, 
OBJECTPOINT
, 15),

921 
	`CINIT
(
REFERER
, 
STRINGPOINT
, 16),

925 
	`CINIT
(
FTPPORT
, 
STRINGPOINT
, 17),

928 
	`CINIT
(
USERAGENT
, 
STRINGPOINT
, 18),

937 
	`CINIT
(
LOW_SPEED_LIMIT
, 
LONG
, 19),

940 
	`CINIT
(
LOW_SPEED_TIME
, 
LONG
, 20),

948 
	`CINIT
(
RESUME_FROM
, 
LONG
, 21),

951 
	`CINIT
(
COOKIE
, 
STRINGPOINT
, 22),

955 
	`CINIT
(
HTTPHEADER
, 
OBJECTPOINT
, 23),

958 
	`CINIT
(
HTTPPOST
, 
OBJECTPOINT
, 24),

961 
	`CINIT
(
SSLCERT
, 
STRINGPOINT
, 25),

964 
	`CINIT
(
KEYPASSWD
, 
STRINGPOINT
, 26),

967 
	`CINIT
(
CRLF
, 
LONG
, 27),

970 
	`CINIT
(
QUOTE
, 
OBJECTPOINT
, 28),

974 
	`CINIT
(
HEADERDATA
, 
OBJECTPOINT
, 29),

978 
	`CINIT
(
COOKIEFILE
, 
STRINGPOINT
, 31),

982 
	`CINIT
(
SSLVERSION
, 
LONG
, 32),

985 
	`CINIT
(
TIMECONDITION
, 
LONG
, 33),

989 
	`CINIT
(
TIMEVALUE
, 
LONG
, 34),

997 
	`CINIT
(
CUSTOMREQUEST
, 
STRINGPOINT
, 36),

1000 
	`CINIT
(
STDERR
, 
OBJECTPOINT
, 37),

1005 
	`CINIT
(
POSTQUOTE
, 
OBJECTPOINT
, 39),

1007 
	`CINIT
(
OBSOLETE40
, 
OBJECTPOINT
, 40),

1009 
	`CINIT
(
VERBOSE
, 
LONG
, 41),

1010 
	`CINIT
(
HEADER
, 
LONG
, 42),

1011 
	`CINIT
(
NOPROGRESS
, 
LONG
, 43),

1012 
	`CINIT
(
NOBODY
, 
LONG
, 44),

1013 
	`CINIT
(
FAILONERROR
, 
LONG
, 45),

1014 
	`CINIT
(
UPLOAD
, 
LONG
, 46),

1015 
	`CINIT
(
POST
, 
LONG
, 47),

1016 
	`CINIT
(
DIRLISTONLY
, 
LONG
, 48),

1018 
	`CINIT
(
APPEND
, 
LONG
, 50),

1022 
	`CINIT
(
NETRC
, 
LONG
, 51),

1024 
	`CINIT
(
FOLLOWLOCATION
, 
LONG
, 52),

1026 
	`CINIT
(
TRANSFERTEXT
, 
LONG
, 53),

1027 
	`CINIT
(
PUT
, 
LONG
, 54),

1035 
	`CINIT
(
PROGRESSFUNCTION
, 
FUNCTIONPOINT
, 56),

1039 
	`CINIT
(
PROGRESSDATA
, 
OBJECTPOINT
, 57),

1040 
	#CURLOPT_XFERINFODATA
 
CURLOPT_PROGRESSDATA


	)

1043 
	`CINIT
(
AUTOREFERER
, 
LONG
, 58),

1047 
	`CINIT
(
PROXYPORT
, 
LONG
, 59),

1050 
	`CINIT
(
POSTFIELDSIZE
, 
LONG
, 60),

1053 
	`CINIT
(
HTTPPROXYTUNNEL
, 
LONG
, 61),

1056 
	`CINIT
(
INTERFACE
, 
STRINGPOINT
, 62),

1061 
	`CINIT
(
KRBLEVEL
, 
STRINGPOINT
, 63),

1064 
	`CINIT
(
SSL_VERIFYPEER
, 
LONG
, 64),

1068 
	`CINIT
(
CAINFO
, 
STRINGPOINT
, 65),

1074 
	`CINIT
(
MAXREDIRS
, 
LONG
, 68),

1078 
	`CINIT
(
FILETIME
, 
LONG
, 69),

1081 
	`CINIT
(
TELNETOPTIONS
, 
OBJECTPOINT
, 70),

1084 
	`CINIT
(
MAXCONNECTS
, 
LONG
, 71),

1086 
	`CINIT
(
OBSOLETE72
, 
LONG
, 72),

1093 
	`CINIT
(
FRESH_CONNECT
, 
LONG
, 74),

1098 
	`CINIT
(
FORBID_REUSE
, 
LONG
, 75),

1102 
	`CINIT
(
RANDOM_FILE
, 
STRINGPOINT
, 76),

1105 
	`CINIT
(
EGDSOCKET
, 
STRINGPOINT
, 77),

1109 
	`CINIT
(
CONNECTTIMEOUT
, 
LONG
, 78),

1113 
	`CINIT
(
HEADERFUNCTION
, 
FUNCTIONPOINT
, 79),

1118 
	`CINIT
(
HTTPGET
, 
LONG
, 80),

1123 
	`CINIT
(
SSL_VERIFYHOST
, 
LONG
, 81),

1127 
	`CINIT
(
COOKIEJAR
, 
STRINGPOINT
, 82),

1130 
	`CINIT
(
SSL_CIPHER_LIST
, 
STRINGPOINT
, 83),

1134 
	`CINIT
(
HTTP_VERSION
, 
LONG
, 84),

1139 
	`CINIT
(
FTP_USE_EPSV
, 
LONG
, 85),

1142 
	`CINIT
(
SSLCERTTYPE
, 
STRINGPOINT
, 86),

1145 
	`CINIT
(
SSLKEY
, 
STRINGPOINT
, 87),

1148 
	`CINIT
(
SSLKEYTYPE
, 
STRINGPOINT
, 88),

1151 
	`CINIT
(
SSLENGINE
, 
STRINGPOINT
, 89),

1156 
	`CINIT
(
SSLENGINE_DEFAULT
, 
LONG
, 90),

1159 
	`CINIT
(
DNS_USE_GLOBAL_CACHE
, 
LONG
, 91),

1162 
	`CINIT
(
DNS_CACHE_TIMEOUT
, 
LONG
, 92),

1165 
	`CINIT
(
PREQUOTE
, 
OBJECTPOINT
, 93),

1168 
	`CINIT
(
DEBUGFUNCTION
, 
FUNCTIONPOINT
, 94),

1171 
	`CINIT
(
DEBUGDATA
, 
OBJECTPOINT
, 95),

1174 
	`CINIT
(
COOKIESESSION
, 
LONG
, 96),

1178 
	`CINIT
(
CAPATH
, 
STRINGPOINT
, 97),

1181 
	`CINIT
(
BUFFERSIZE
, 
LONG
, 98),

1186 
	`CINIT
(
NOSIGNAL
, 
LONG
, 99),

1189 
	`CINIT
(
SHARE
, 
OBJECTPOINT
, 100),

1193 
	`CINIT
(
PROXYTYPE
, 
LONG
, 101),

1198 
	`CINIT
(
ACCEPT_ENCODING
, 
STRINGPOINT
, 102),

1201 
	`CINIT
(
PRIVATE
, 
OBJECTPOINT
, 103),

1204 
	`CINIT
(
HTTP200ALIASES
, 
OBJECTPOINT
, 104),

1209 
	`CINIT
(
UNRESTRICTED_AUTH
, 
LONG
, 105),

1214 
	`CINIT
(
FTP_USE_EPRT
, 
LONG
, 106),

1219 
	`CINIT
(
HTTPAUTH
, 
LONG
, 107),

1224 
	`CINIT
(
SSL_CTX_FUNCTION
, 
FUNCTIONPOINT
, 108),

1228 
	`CINIT
(
SSL_CTX_DATA
, 
OBJECTPOINT
, 109),

1234 
	`CINIT
(
FTP_CREATE_MISSING_DIRS
, 
LONG
, 110),

1239 
	`CINIT
(
PROXYAUTH
, 
LONG
, 111),

1245 
	`CINIT
(
FTP_RESPONSE_TIMEOUT
, 
LONG
, 112),

1246 
	#CURLOPT_SERVER_RESPONSE_TIMEOUT
 
CURLOPT_FTP_RESPONSE_TIMEOUT


	)

1251 
	`CINIT
(
IPRESOLVE
, 
LONG
, 113),

1258 
	`CINIT
(
MAXFILESIZE
, 
LONG
, 114),

1263 
	`CINIT
(
INFILESIZE_LARGE
, 
OFF_T
, 115),

1268 
	`CINIT
(
RESUME_FROM_LARGE
, 
OFF_T
, 116),

1273 
	`CINIT
(
MAXFILESIZE_LARGE
, 
OFF_T
, 117),

1279 
	`CINIT
(
NETRC_FILE
, 
STRINGPOINT
, 118),

1286 
	`CINIT
(
USE_SSL
, 
LONG
, 119),

1289 
	`CINIT
(
POSTFIELDSIZE_LARGE
, 
OFF_T
, 120),

1292 
	`CINIT
(
TCP_NODELAY
, 
LONG
, 121),

1312 
	`CINIT
(
FTPSSLAUTH
, 
LONG
, 129),

1314 
	`CINIT
(
IOCTLFUNCTION
, 
FUNCTIONPOINT
, 130),

1315 
	`CINIT
(
IOCTLDATA
, 
OBJECTPOINT
, 131),

1322 
	`CINIT
(
FTP_ACCOUNT
, 
STRINGPOINT
, 134),

1325 
	`CINIT
(
COOKIELIST
, 
STRINGPOINT
, 135),

1328 
	`CINIT
(
IGNORE_CONTENT_LENGTH
, 
LONG
, 136),

1334 
	`CINIT
(
FTP_SKIP_PASV_IP
, 
LONG
, 137),

1338 
	`CINIT
(
FTP_FILEMETHOD
, 
LONG
, 138),

1341 
	`CINIT
(
LOCALPORT
, 
LONG
, 139),

1346 
	`CINIT
(
LOCALPORTRANGE
, 
LONG
, 140),

1350 
	`CINIT
(
CONNECT_ONLY
, 
LONG
, 141),

1354 
	`CINIT
(
CONV_FROM_NETWORK_FUNCTION
, 
FUNCTIONPOINT
, 142),

1358 
	`CINIT
(
CONV_TO_NETWORK_FUNCTION
, 
FUNCTIONPOINT
, 143),

1363 
	`CINIT
(
CONV_FROM_UTF8_FUNCTION
, 
FUNCTIONPOINT
, 144),

1367 
	`CINIT
(
MAX_SEND_SPEED_LARGE
, 
OFF_T
, 145),

1368 
	`CINIT
(
MAX_RECV_SPEED_LARGE
, 
OFF_T
, 146),

1371 
	`CINIT
(
FTP_ALTERNATIVE_TO_USER
, 
STRINGPOINT
, 147),

1374 
	`CINIT
(
SOCKOPTFUNCTION
, 
FUNCTIONPOINT
, 148),

1375 
	`CINIT
(
SOCKOPTDATA
, 
OBJECTPOINT
, 149),

1379 
	`CINIT
(
SSL_SESSIONID_CACHE
, 
LONG
, 150),

1382 
	`CINIT
(
SSH_AUTH_TYPES
, 
LONG
, 151),

1385 
	`CINIT
(
SSH_PUBLIC_KEYFILE
, 
STRINGPOINT
, 152),

1386 
	`CINIT
(
SSH_PRIVATE_KEYFILE
, 
STRINGPOINT
, 153),

1389 
	`CINIT
(
FTP_SSL_CCC
, 
LONG
, 154),

1392 
	`CINIT
(
TIMEOUT_MS
, 
LONG
, 155),

1393 
	`CINIT
(
CONNECTTIMEOUT_MS
, 
LONG
, 156),

1397 
	`CINIT
(
HTTP_TRANSFER_DECODING
, 
LONG
, 157),

1398 
	`CINIT
(
HTTP_CONTENT_DECODING
, 
LONG
, 158),

1402 
	`CINIT
(
NEW_FILE_PERMS
, 
LONG
, 159),

1403 
	`CINIT
(
NEW_DIRECTORY_PERMS
, 
LONG
, 160),

1407 
	`CINIT
(
POSTREDIR
, 
LONG
, 161),

1410 
	`CINIT
(
SSH_HOST_PUBLIC_KEY_MD5
, 
STRINGPOINT
, 162),

1416 
	`CINIT
(
OPENSOCKETFUNCTION
, 
FUNCTIONPOINT
, 163),

1417 
	`CINIT
(
OPENSOCKETDATA
, 
OBJECTPOINT
, 164),

1420 
	`CINIT
(
COPYPOSTFIELDS
, 
OBJECTPOINT
, 165),

1423 
	`CINIT
(
PROXY_TRANSFER_MODE
, 
LONG
, 166),

1426 
	`CINIT
(
SEEKFUNCTION
, 
FUNCTIONPOINT
, 167),

1427 
	`CINIT
(
SEEKDATA
, 
OBJECTPOINT
, 168),

1430 
	`CINIT
(
CRLFILE
, 
STRINGPOINT
, 169),

1433 
	`CINIT
(
ISSUERCERT
, 
STRINGPOINT
, 170),

1436 
	`CINIT
(
ADDRESS_SCOPE
, 
LONG
, 171),

1440 
	`CINIT
(
CERTINFO
, 
LONG
, 172),

1443 
	`CINIT
(
USERNAME
, 
STRINGPOINT
, 173),

1444 
	`CINIT
(
PASSWORD
, 
STRINGPOINT
, 174),

1447 
	`CINIT
(
PROXYUSERNAME
, 
STRINGPOINT
, 175),

1448 
	`CINIT
(
PROXYPASSWORD
, 
STRINGPOINT
, 176),

1457 
	`CINIT
(
NOPROXY
, 
STRINGPOINT
, 177),

1460 
	`CINIT
(
TFTP_BLKSIZE
, 
LONG
, 178),

1463 
	`CINIT
(
SOCKS5_GSSAPI_SERVICE
, 
STRINGPOINT
, 179),

1466 
	`CINIT
(
SOCKS5_GSSAPI_NEC
, 
LONG
, 180),

1472 
	`CINIT
(
PROTOCOLS
, 
LONG
, 181),

1478 
	`CINIT
(
REDIR_PROTOCOLS
, 
LONG
, 182),

1481 
	`CINIT
(
SSH_KNOWNHOSTS
, 
STRINGPOINT
, 183),

1485 
	`CINIT
(
SSH_KEYFUNCTION
, 
FUNCTIONPOINT
, 184),

1488 
	`CINIT
(
SSH_KEYDATA
, 
OBJECTPOINT
, 185),

1491 
	`CINIT
(
MAIL_FROM
, 
STRINGPOINT
, 186),

1494 
	`CINIT
(
MAIL_RCPT
, 
OBJECTPOINT
, 187),

1497 
	`CINIT
(
FTP_USE_PRET
, 
LONG
, 188),

1500 
	`CINIT
(
RTSP_REQUEST
, 
LONG
, 189),

1503 
	`CINIT
(
RTSP_SESSION_ID
, 
STRINGPOINT
, 190),

1506 
	`CINIT
(
RTSP_STREAM_URI
, 
STRINGPOINT
, 191),

1509 
	`CINIT
(
RTSP_TRANSPORT
, 
STRINGPOINT
, 192),

1512 
	`CINIT
(
RTSP_CLIENT_CSEQ
, 
LONG
, 193),

1515 
	`CINIT
(
RTSP_SERVER_CSEQ
, 
LONG
, 194),

1518 
	`CINIT
(
INTERLEAVEDATA
, 
OBJECTPOINT
, 195),

1521 
	`CINIT
(
INTERLEAVEFUNCTION
, 
FUNCTIONPOINT
, 196),

1524 
	`CINIT
(
WILDCARDMATCH
, 
LONG
, 197),

1528 
	`CINIT
(
CHUNK_BGN_FUNCTION
, 
FUNCTIONPOINT
, 198),

1532 
	`CINIT
(
CHUNK_END_FUNCTION
, 
FUNCTIONPOINT
, 199),

1535 
	`CINIT
(
FNMATCH_FUNCTION
, 
FUNCTIONPOINT
, 200),

1538 
	`CINIT
(
CHUNK_DATA
, 
OBJECTPOINT
, 201),

1541 
	`CINIT
(
FNMATCH_DATA
, 
OBJECTPOINT
, 202),

1544 
	`CINIT
(
RESOLVE
, 
OBJECTPOINT
, 203),

1547 
	`CINIT
(
TLSAUTH_USERNAME
, 
STRINGPOINT
, 204),

1550 
	`CINIT
(
TLSAUTH_PASSWORD
, 
STRINGPOINT
, 205),

1553 
	`CINIT
(
TLSAUTH_TYPE
, 
STRINGPOINT
, 206),

1565 
	`CINIT
(
TRANSFER_ENCODING
, 
LONG
, 207),

1569 
	`CINIT
(
CLOSESOCKETFUNCTION
, 
FUNCTIONPOINT
, 208),

1570 
	`CINIT
(
CLOSESOCKETDATA
, 
OBJECTPOINT
, 209),

1573 
	`CINIT
(
GSSAPI_DELEGATION
, 
LONG
, 210),

1576 
	`CINIT
(
DNS_SERVERS
, 
STRINGPOINT
, 211),

1580 
	`CINIT
(
ACCEPTTIMEOUT_MS
, 
LONG
, 212),

1583 
	`CINIT
(
TCP_KEEPALIVE
, 
LONG
, 213),

1586 
	`CINIT
(
TCP_KEEPIDLE
, 
LONG
, 214),

1587 
	`CINIT
(
TCP_KEEPINTVL
, 
LONG
, 215),

1590 
	`CINIT
(
SSL_OPTIONS
, 
LONG
, 216),

1593 
	`CINIT
(
MAIL_AUTH
, 
STRINGPOINT
, 217),

1596 
	`CINIT
(
SASL_IR
, 
LONG
, 218),

1601 
	`CINIT
(
XFERINFOFUNCTION
, 
FUNCTIONPOINT
, 219),

1604 
	`CINIT
(
XOAUTH2_BEARER
, 
STRINGPOINT
, 220),

1609 
	`CINIT
(
DNS_INTERFACE
, 
STRINGPOINT
, 221),

1613 
	`CINIT
(
DNS_LOCAL_IP4
, 
STRINGPOINT
, 222),

1617 
	`CINIT
(
DNS_LOCAL_IP6
, 
STRINGPOINT
, 223),

1620 
	`CINIT
(
LOGIN_OPTIONS
, 
STRINGPOINT
, 224),

1623 
	`CINIT
(
SSL_ENABLE_NPN
, 
LONG
, 225),

1626 
	`CINIT
(
SSL_ENABLE_ALPN
, 
LONG
, 226),

1630 
	`CINIT
(
EXPECT_100_TIMEOUT_MS
, 
LONG
, 227),

1634 
	`CINIT
(
PROXYHEADER
, 
OBJECTPOINT
, 228),

1637 
	`CINIT
(
HEADEROPT
, 
LONG
, 229),

1641 
	`CINIT
(
PINNEDPUBLICKEY
, 
STRINGPOINT
, 230),

1644 
	`CINIT
(
UNIX_SOCKET_PATH
, 
STRINGPOINT
, 231),

1647 
	`CINIT
(
SSL_VERIFYSTATUS
, 
LONG
, 232),

1650 
	`CINIT
(
SSL_FALSESTART
, 
LONG
, 233),

1653 
	`CINIT
(
PATH_AS_IS
, 
LONG
, 234),

1656 
	`CINIT
(
PROXY_SERVICE_NAME
, 
STRINGPOINT
, 235),

1659 
	`CINIT
(
SERVICE_NAME
, 
STRINGPOINT
, 236),

1662 
	`CINIT
(
PIPEWAIT
, 
LONG
, 237),

1665 
	`CINIT
(
DEFAULT_PROTOCOL
, 
STRINGPOINT
, 238),

1668 
	`CINIT
(
STREAM_WEIGHT
, 
LONG
, 239),

1671 
	`CINIT
(
STREAM_DEPENDS
, 
OBJECTPOINT
, 240),

1674 
	`CINIT
(
STREAM_DEPENDS_E
, 
OBJECTPOINT
, 241),

1676 
CURLOPT_LASTENTRY


1677 } 
	tCURL›ti⁄
;

1679 #i‚de‡
CURL_NO_OLDIES


1686 
	#CURLOPT_POST301
 
CURLOPT_POSTREDIR


	)

1691 
	#CURLOPT_SSLKEYPASSWD
 
CURLOPT_KEYPASSWD


	)

1692 
	#CURLOPT_FTPAPPEND
 
CURLOPT_APPEND


	)

1693 
	#CURLOPT_FTPLISTONLY
 
CURLOPT_DIRLISTONLY


	)

1694 
	#CURLOPT_FTP_SSL
 
CURLOPT_USE_SSL


	)

1698 
	#CURLOPT_SSLCERTPASSWD
 
CURLOPT_KEYPASSWD


	)

1699 
	#CURLOPT_KRB4LEVEL
 
CURLOPT_KRBLEVEL


	)

1703 #unde‡
CURLOPT_DNS_USE_GLOBAL_CACHE


1710 
	#CURL_IPRESOLVE_WHATEVER
 0

	)

1712 
	#CURL_IPRESOLVE_V4
 1

	)

1713 
	#CURL_IPRESOLVE_V6
 2

	)

1716 
	#CURLOPT_RTSPHEADER
 
CURLOPT_HTTPHEADER


	)

1720 
CURL_HTTP_VERSION_NONE
,

1723 
CURL_HTTP_VERSION_1_0
,

1724 
CURL_HTTP_VERSION_1_1
,

1725 
CURL_HTTP_VERSION_2_0
,

1726 
CURL_HTTP_VERSION_2TLS
,

1728 
CURL_HTTP_VERSION_LAST


1734 
	#CURL_HTTP_VERSION_2
 
CURL_HTTP_VERSION_2_0


	)

1740 
CURL_RTSPREQ_NONE
,

1741 
CURL_RTSPREQ_OPTIONS
,

1742 
CURL_RTSPREQ_DESCRIBE
,

1743 
CURL_RTSPREQ_ANNOUNCE
,

1744 
CURL_RTSPREQ_SETUP
,

1745 
CURL_RTSPREQ_PLAY
,

1746 
CURL_RTSPREQ_PAUSE
,

1747 
CURL_RTSPREQ_TEARDOWN
,

1748 
CURL_RTSPREQ_GET_PARAMETER
,

1749 
CURL_RTSPREQ_SET_PARAMETER
,

1750 
CURL_RTSPREQ_RECORD
,

1751 
CURL_RTSPREQ_RECEIVE
,

1752 
CURL_RTSPREQ_LAST


1756 
	eCURL_NETRC_OPTION
 {

1757 
CURL_NETRC_IGNORED
,

1759 
CURL_NETRC_OPTIONAL
,

1761 
CURL_NETRC_REQUIRED
,

1764 
CURL_NETRC_LAST


1768 
CURL_SSLVERSION_DEFAULT
,

1769 
CURL_SSLVERSION_TLSv1
,

1770 
CURL_SSLVERSION_SSLv2
,

1771 
CURL_SSLVERSION_SSLv3
,

1772 
CURL_SSLVERSION_TLSv1_0
,

1773 
CURL_SSLVERSION_TLSv1_1
,

1774 
CURL_SSLVERSION_TLSv1_2
,

1776 
CURL_SSLVERSION_LAST


1779 
	eCURL_TLSAUTH
 {

1780 
CURL_TLSAUTH_NONE
,

1781 
CURL_TLSAUTH_SRP
,

1782 
CURL_TLSAUTH_LAST


1790 
	#CURL_REDIR_GET_ALL
 0

	)

1791 
	#CURL_REDIR_POST_301
 1

	)

1792 
	#CURL_REDIR_POST_302
 2

	)

1793 
	#CURL_REDIR_POST_303
 4

	)

1794 
	#CURL_REDIR_POST_ALL
 \

1795 (
CURL_REDIR_POST_301
|
CURL_REDIR_POST_302
|
CURL_REDIR_POST_303
)

	)

1798 
CURL_TIMECOND_NONE
,

1800 
CURL_TIMECOND_IFMODSINCE
,

1801 
CURL_TIMECOND_IFUNMODSINCE
,

1802 
CURL_TIMECOND_LASTMOD
,

1804 
CURL_TIMECOND_LAST


1805 } 
	tcuæ_TimeC⁄d
;

1810 
CURL_EXTERN
 (
cuæ_°ªquÆ
)(c⁄° *
s1
, c⁄° *
s2
);

1811 
CURL_EXTERN
 (
cuæ_°∫equÆ
)(c⁄° *
s1
, c⁄° *
s2
, 
size_t
 
n
);

1814 #ifde‡
CFINIT


1815 #unde‡
CFINIT


1818 #ifde‡
CURL_ISOCPP


1819 
	#CFINIT
(
«me
Ë
CURLFORM_
 ## 
	)
name

1822 
	#CFINIT
(
«me
Ë
CURLFORM_
 
	)
name

1826 
	`CFINIT
(
NOTHING
),

1829 
	`CFINIT
(
COPYNAME
),

1830 
	`CFINIT
(
PTRNAME
),

1831 
	`CFINIT
(
NAMELENGTH
),

1832 
	`CFINIT
(
COPYCONTENTS
),

1833 
	`CFINIT
(
PTRCONTENTS
),

1834 
	`CFINIT
(
CONTENTSLENGTH
),

1835 
	`CFINIT
(
FILECONTENT
),

1836 
	`CFINIT
(
ARRAY
),

1837 
	`CFINIT
(
OBSOLETE
),

1838 
	`CFINIT
(
FILE
),

1840 
	`CFINIT
(
BUFFER
),

1841 
	`CFINIT
(
BUFFERPTR
),

1842 
	`CFINIT
(
BUFFERLENGTH
),

1844 
	`CFINIT
(
CONTENTTYPE
),

1845 
	`CFINIT
(
CONTENTHEADER
),

1846 
	`CFINIT
(
FILENAME
),

1847 
	`CFINIT
(
END
),

1848 
	`CFINIT
(
OBSOLETE2
),

1850 
	`CFINIT
(
STREAM
),

1851 
	`CFINIT
(
CONTENTLEN
),

1853 
CURLFORM_LASTENTRY


1854 } 
	tCURLf‹m›ti⁄
;

1856 #unde‡
CFINIT


1859 
	scuæ_f‹ms
 {

1860 
CURLf‹m›ti⁄
 
›ti⁄
;

1861 c⁄° *
vÆue
;

1881 
CURL_FORMADD_OK
,

1883 
CURL_FORMADD_MEMORY
,

1884 
CURL_FORMADD_OPTION_TWICE
,

1885 
CURL_FORMADD_NULL
,

1886 
CURL_FORMADD_UNKNOWN_OPTION
,

1887 
CURL_FORMADD_INCOMPLETE
,

1888 
CURL_FORMADD_ILLEGAL_ARRAY
,

1889 
CURL_FORMADD_DISABLED
,

1891 
CURL_FORMADD_LAST


1892 } 
	tCURLFORMcode
;

1903 
CURL_EXTERN
 
CURLFORMcode
 
	`cuæ_f‹madd
(
cuæ_hâµo°
 **
hâµo°
,

1904 
cuæ_hâµo°
 **
œ°_po°
,

1915 
	`size_t
 (*
	tcuæ_f‹mgë_ˇŒback
)(*
	t¨g
, c⁄° *
	tbuf
,

1916 
	tsize_t
 
	tÀn
);

1928 
CURL_EXTERN
 
	`cuæ_f‹mgë
(
cuæ_hâµo°
 *
f‹m
, *
¨g
,

1929 
cuæ_f‹mgë_ˇŒback
 
≠≥nd
);

1937 
CURL_EXTERN
 
	`cuæ_f‹m‰ì
(
cuæ_hâµo°
 *
f‹m
);

1947 
CURL_EXTERN
 *
	`cuæ_gëív
(c⁄° *
v¨übÀ
);

1956 
CURL_EXTERN
 *
	`cuæ_vîsi⁄
();

1967 
CURL_EXTERN
 *
	`cuæ_ósy_esˇ≥
(
CURL
 *
h™dÀ
,

1968 c⁄° *
°rög
,

1969 
Àngth
);

1972 
CURL_EXTERN
 *
	`cuæ_esˇ≥
(c⁄° *
°rög
,

1973 
Àngth
);

1987 
CURL_EXTERN
 *
	`cuæ_ósy_u√sˇ≥
(
CURL
 *
h™dÀ
,

1988 c⁄° *
°rög
,

1989 
Àngth
,

1990 *
ouéígth
);

1993 
CURL_EXTERN
 *
	`cuæ_u√sˇ≥
(c⁄° *
°rög
,

1994 
Àngth
);

2004 
CURL_EXTERN
 
	`cuæ_‰ì
(*
p
);

2016 
CURL_EXTERN
 
CURLcode
 
	`cuæ_globÆ_öô
(
Êags
);

2031 
CURL_EXTERN
 
CURLcode
 
	`cuæ_globÆ_öô_mem
(
Êags
,

2032 
cuæ_mÆloc_ˇŒback
 
m
,

2033 
cuæ_‰ì_ˇŒback
 
f
,

2034 
cuæ_ªÆloc_ˇŒback
 
r
,

2035 
cuæ_°rdup_ˇŒback
 
s
,

2036 
cuæ_ˇŒoc_ˇŒback
 
c
);

2046 
CURL_EXTERN
 
	`cuæ_globÆ_˛ónup
();

2049 
	scuæ_¶i°
 {

2050 *
d©a
;

2051 
cuæ_¶i°
 *
√xt
;

2062 
CURL_EXTERN
 
cuæ_¶i°
 *
	`cuæ_¶i°_≠≥nd
(curl_slist *,

2072 
CURL_EXTERN
 
	`cuæ_¶i°_‰ì_Æl
(
cuæ_¶i°
 *);

2083 
CURL_EXTERN
 
time_t
 
	`cuæ_gëd©e
(c⁄° *
p
, c⁄°Åime_à*
unu£d
);

2087 
	scuæ_˚πöfo
 {

2088 
num_of_˚πs
;

2089 
cuæ_¶i°
 **
˚πöfo
;

2096 
CURLSSLBACKEND_NONE
 = 0,

2097 
CURLSSLBACKEND_OPENSSL
 = 1,

2098 
CURLSSLBACKEND_GNUTLS
 = 2,

2099 
CURLSSLBACKEND_NSS
 = 3,

2100 
CURLSSLBACKEND_OBSOLETE4
 = 4,

2101 
CURLSSLBACKEND_GSKIT
 = 5,

2102 
CURLSSLBACKEND_POLARSSL
 = 6,

2103 
CURLSSLBACKEND_CYASSL
 = 7,

2104 
CURLSSLBACKEND_SCHANNEL
 = 8,

2105 
CURLSSLBACKEND_DARWINSSL
 = 9,

2106 
CURLSSLBACKEND_AXTLS
 = 10,

2107 
CURLSSLBACKEND_MBEDTLS
 = 11

2108 } 
	tcuæ_s¶backíd
;

2113 
	scuæ_és£ssi⁄öfo
 {

2114 
cuæ_s¶backíd
 
backíd
;

2115 *
öã∫Æs
;

2118 
	#CURLINFO_STRING
 0x100000

	)

2119 
	#CURLINFO_LONG
 0x200000

	)

2120 
	#CURLINFO_DOUBLE
 0x300000

	)

2121 
	#CURLINFO_SLIST
 0x400000

	)

2122 
	#CURLINFO_SOCKET
 0x500000

	)

2123 
	#CURLINFO_MASK
 0x0fffff

	)

2124 
	#CURLINFO_TYPEMASK
 0xf00000

	)

2127 
CURLINFO_NONE
,

2128 
CURLINFO_EFFECTIVE_URL
 = 
CURLINFO_STRING
 + 1,

2129 
CURLINFO_RESPONSE_CODE
 = 
CURLINFO_LONG
 + 2,

2130 
CURLINFO_TOTAL_TIME
 = 
CURLINFO_DOUBLE
 + 3,

2131 
CURLINFO_NAMELOOKUP_TIME
 = 
CURLINFO_DOUBLE
 + 4,

2132 
CURLINFO_CONNECT_TIME
 = 
CURLINFO_DOUBLE
 + 5,

2133 
CURLINFO_PRETRANSFER_TIME
 = 
CURLINFO_DOUBLE
 + 6,

2134 
CURLINFO_SIZE_UPLOAD
 = 
CURLINFO_DOUBLE
 + 7,

2135 
CURLINFO_SIZE_DOWNLOAD
 = 
CURLINFO_DOUBLE
 + 8,

2136 
CURLINFO_SPEED_DOWNLOAD
 = 
CURLINFO_DOUBLE
 + 9,

2137 
CURLINFO_SPEED_UPLOAD
 = 
CURLINFO_DOUBLE
 + 10,

2138 
CURLINFO_HEADER_SIZE
 = 
CURLINFO_LONG
 + 11,

2139 
CURLINFO_REQUEST_SIZE
 = 
CURLINFO_LONG
 + 12,

2140 
CURLINFO_SSL_VERIFYRESULT
 = 
CURLINFO_LONG
 + 13,

2141 
CURLINFO_FILETIME
 = 
CURLINFO_LONG
 + 14,

2142 
CURLINFO_CONTENT_LENGTH_DOWNLOAD
 = 
CURLINFO_DOUBLE
 + 15,

2143 
CURLINFO_CONTENT_LENGTH_UPLOAD
 = 
CURLINFO_DOUBLE
 + 16,

2144 
CURLINFO_STARTTRANSFER_TIME
 = 
CURLINFO_DOUBLE
 + 17,

2145 
CURLINFO_CONTENT_TYPE
 = 
CURLINFO_STRING
 + 18,

2146 
CURLINFO_REDIRECT_TIME
 = 
CURLINFO_DOUBLE
 + 19,

2147 
CURLINFO_REDIRECT_COUNT
 = 
CURLINFO_LONG
 + 20,

2148 
CURLINFO_PRIVATE
 = 
CURLINFO_STRING
 + 21,

2149 
CURLINFO_HTTP_CONNECTCODE
 = 
CURLINFO_LONG
 + 22,

2150 
CURLINFO_HTTPAUTH_AVAIL
 = 
CURLINFO_LONG
 + 23,

2151 
CURLINFO_PROXYAUTH_AVAIL
 = 
CURLINFO_LONG
 + 24,

2152 
CURLINFO_OS_ERRNO
 = 
CURLINFO_LONG
 + 25,

2153 
CURLINFO_NUM_CONNECTS
 = 
CURLINFO_LONG
 + 26,

2154 
CURLINFO_SSL_ENGINES
 = 
CURLINFO_SLIST
 + 27,

2155 
CURLINFO_COOKIELIST
 = 
CURLINFO_SLIST
 + 28,

2156 
CURLINFO_LASTSOCKET
 = 
CURLINFO_LONG
 + 29,

2157 
CURLINFO_FTP_ENTRY_PATH
 = 
CURLINFO_STRING
 + 30,

2158 
CURLINFO_REDIRECT_URL
 = 
CURLINFO_STRING
 + 31,

2159 
CURLINFO_PRIMARY_IP
 = 
CURLINFO_STRING
 + 32,

2160 
CURLINFO_APPCONNECT_TIME
 = 
CURLINFO_DOUBLE
 + 33,

2161 
CURLINFO_CERTINFO
 = 
CURLINFO_SLIST
 + 34,

2162 
CURLINFO_CONDITION_UNMET
 = 
CURLINFO_LONG
 + 35,

2163 
CURLINFO_RTSP_SESSION_ID
 = 
CURLINFO_STRING
 + 36,

2164 
CURLINFO_RTSP_CLIENT_CSEQ
 = 
CURLINFO_LONG
 + 37,

2165 
CURLINFO_RTSP_SERVER_CSEQ
 = 
CURLINFO_LONG
 + 38,

2166 
CURLINFO_RTSP_CSEQ_RECV
 = 
CURLINFO_LONG
 + 39,

2167 
CURLINFO_PRIMARY_PORT
 = 
CURLINFO_LONG
 + 40,

2168 
CURLINFO_LOCAL_IP
 = 
CURLINFO_STRING
 + 41,

2169 
CURLINFO_LOCAL_PORT
 = 
CURLINFO_LONG
 + 42,

2170 
CURLINFO_TLS_SESSION
 = 
CURLINFO_SLIST
 + 43,

2171 
CURLINFO_ACTIVESOCKET
 = 
CURLINFO_SOCKET
 + 44,

2174 
CURLINFO_LASTONE
 = 44

2175 } 
	tCURLINFO
;

2179 
	#CURLINFO_HTTP_CODE
 
CURLINFO_RESPONSE_CODE


	)

2182 
CURLCLOSEPOLICY_NONE
,

2184 
CURLCLOSEPOLICY_OLDEST
,

2185 
CURLCLOSEPOLICY_LEAST_RECENTLY_USED
,

2186 
CURLCLOSEPOLICY_LEAST_TRAFFIC
,

2187 
CURLCLOSEPOLICY_SLOWEST
,

2188 
CURLCLOSEPOLICY_CALLBACK
,

2190 
CURLCLOSEPOLICY_LAST


2191 } 
	tcuæ_˛o£pﬁicy
;

2193 
	#CURL_GLOBAL_SSL
 (1<<0)

	)

2194 
	#CURL_GLOBAL_WIN32
 (1<<1)

	)

2195 
	#CURL_GLOBAL_ALL
 (
CURL_GLOBAL_SSL
|
CURL_GLOBAL_WIN32
)

	)

2196 
	#CURL_GLOBAL_NOTHING
 0

	)

2197 
	#CURL_GLOBAL_DEFAULT
 
CURL_GLOBAL_ALL


	)

2198 
	#CURL_GLOBAL_ACK_EINTR
 (1<<2)

	)

2207 
CURL_LOCK_DATA_NONE
 = 0,

2212 
CURL_LOCK_DATA_SHARE
,

2213 
CURL_LOCK_DATA_COOKIE
,

2214 
CURL_LOCK_DATA_DNS
,

2215 
CURL_LOCK_DATA_SSL_SESSION
,

2216 
CURL_LOCK_DATA_CONNECT
,

2217 
CURL_LOCK_DATA_LAST


2218 } 
	tcuæ_lock_d©a
;

2222 
CURL_LOCK_ACCESS_NONE
 = 0,

2223 
CURL_LOCK_ACCESS_SHARED
 = 1,

2224 
CURL_LOCK_ACCESS_SINGLE
 = 2,

2225 
CURL_LOCK_ACCESS_LAST


2226 } 
	tcuæ_lock_ac˚ss
;

2228 (*
	tcuæ_lock_fun˘i⁄
)(
	tCURL
 *
	th™dÀ
,

2229 
	tcuæ_lock_d©a
 
	td©a
,

2230 
	tcuæ_lock_ac˚ss
 
	tlockty≥
,

2231 *
	tu£Ωå
);

2232 (*
	tcuæ_u∆ock_fun˘i⁄
)(
	tCURL
 *
	th™dÀ
,

2233 
	tcuæ_lock_d©a
 
	td©a
,

2234 *
	tu£Ωå
);

2236 
	tCURLSH
;

2239 
CURLSHE_OK
,

2240 
CURLSHE_BAD_OPTION
,

2241 
CURLSHE_IN_USE
,

2242 
CURLSHE_INVALID
,

2243 
CURLSHE_NOMEM
,

2244 
CURLSHE_NOT_BUILT_IN
,

2245 
CURLSHE_LAST


2246 } 
	tCURLSHcode
;

2249 
CURLSHOPT_NONE
,

2250 
CURLSHOPT_SHARE
,

2251 
CURLSHOPT_UNSHARE
,

2252 
CURLSHOPT_LOCKFUNC
,

2253 
CURLSHOPT_UNLOCKFUNC
,

2254 
CURLSHOPT_USERDATA
,

2256 
CURLSHOPT_LAST


2257 } 
	tCURLSH›ti⁄
;

2259 
CURL_EXTERN
 
CURLSH
 *
	`cuæ_sh¨e_öô
();

2260 
CURL_EXTERN
 
CURLSHcode
 
	`cuæ_sh¨e_£t›t
(
CURLSH
 *, 
CURLSH›ti⁄
 
›ti⁄
, ...);

2261 
CURL_EXTERN
 
CURLSHcode
 
	`cuæ_sh¨e_˛ónup
(
CURLSH
 *);

2268 
CURLVERSION_FIRST
,

2269 
CURLVERSION_SECOND
,

2270 
CURLVERSION_THIRD
,

2271 
CURLVERSION_FOURTH
,

2272 
CURLVERSION_LAST


2273 } 
	tCURLvîsi⁄
;

2280 
	#CURLVERSION_NOW
 
CURLVERSION_FOURTH


	)

2283 
CURLvîsi⁄
 
age
;

2284 c⁄° *
vîsi⁄
;

2285 
vîsi⁄_num
;

2286 c⁄° *
ho°
;

2287 
„©uªs
;

2288 c⁄° *
s¶_vîsi⁄
;

2289 
s¶_vîsi⁄_num
;

2290 c⁄° *
libz_vîsi⁄
;

2292 c⁄° * c⁄° *
¥Ÿocﬁs
;

2295 c⁄° *
¨es
;

2296 
¨es_num
;

2299 c⁄° *
libidn
;

2304 
ic⁄v_vî_num
;

2306 c⁄° *
libssh_vîsi⁄
;

2308 } 
	tcuæ_vîsi⁄_öfo_d©a
;

2310 
	#CURL_VERSION_IPV6
 (1<<0Ë

	)

2311 
	#CURL_VERSION_KERBEROS4
 (1<<1Ë

	)

2313 
	#CURL_VERSION_SSL
 (1<<2Ë

	)

2314 
	#CURL_VERSION_LIBZ
 (1<<3Ë

	)

2315 
	#CURL_VERSION_NTLM
 (1<<4Ë

	)

2316 
	#CURL_VERSION_GSSNEGOTIATE
 (1<<5Ë

	)

2318 
	#CURL_VERSION_DEBUG
 (1<<6Ë

	)

2319 
	#CURL_VERSION_ASYNCHDNS
 (1<<7Ë

	)

2320 
	#CURL_VERSION_SPNEGO
 (1<<8Ë

	)

2321 
	#CURL_VERSION_LARGEFILE
 (1<<9Ë

	)

2322 
	#CURL_VERSION_IDN
 (1<<10Ë

	)

2324 
	#CURL_VERSION_SSPI
 (1<<11Ë

	)

2325 
	#CURL_VERSION_CONV
 (1<<12Ë

	)

2326 
	#CURL_VERSION_CURLDEBUG
 (1<<13Ë

	)

2327 
	#CURL_VERSION_TLSAUTH_SRP
 (1<<14Ë

	)

2328 
	#CURL_VERSION_NTLM_WB
 (1<<15Ë

	)

2330 
	#CURL_VERSION_HTTP2
 (1<<16Ë

	)

2331 
	#CURL_VERSION_GSSAPI
 (1<<17Ë

	)

2332 
	#CURL_VERSION_KERBEROS5
 (1<<18Ë

	)

2333 
	#CURL_VERSION_UNIX_SOCKETS
 (1<<19Ë

	)

2334 
	#CURL_VERSION_PSL
 (1<<20Ë

	)

2345 
CURL_EXTERN
 
cuæ_vîsi⁄_öfo_d©a
 *
	`cuæ_vîsi⁄_öfo
(
CURLvîsi⁄
);

2356 
CURL_EXTERN
 c⁄° *
	`cuæ_ósy_°ªº‹
(
CURLcode
);

2367 
CURL_EXTERN
 c⁄° *
	`cuæ_sh¨e_°ªº‹
(
CURLSHcode
);

2378 
CURL_EXTERN
 
CURLcode
 
	`cuæ_ósy_∑u£
(
CURL
 *
h™dÀ
, 
bômask
);

2380 
	#CURLPAUSE_RECV
 (1<<0)

	)

2381 
	#CURLPAUSE_RECV_CONT
 (0)

	)

2383 
	#CURLPAUSE_SEND
 (1<<2)

	)

2384 
	#CURLPAUSE_SEND_CONT
 (0)

	)

2386 
	#CURLPAUSE_ALL
 (
CURLPAUSE_RECV
|
CURLPAUSE_SEND
)

	)

2387 
	#CURLPAUSE_CONT
 (
CURLPAUSE_RECV_CONT
|
CURLPAUSE_SEND_CONT
)

	)

2389 #ifde‡ 
__˝lu•lus


2390 
	}
}

2395 
	~"ósy.h
"

2396 
	~"mu…i.h
"

2399 #i‡
deföed
(
__GNUC__
Ë&& deföed(
__GNUC_MINOR__
) && \

2400 ((
__GNUC__
 > 4Ë|| (__GNUC__ =4 && 
__GNUC_MINOR__
 >= 3)) && \

2401 !
deföed
(
__˝lu•lus
Ë&& !
	$deföed
(
CURL_DISABLE_TYPECHECK
)

2402 
	~"ty≥check-gcc.h
"

2404 #i‡
	`deföed
(
__STDC__
) && (__STDC__ >= 1)

2408 
	#cuæ_ósy_£t›t
(
h™dÀ
,
›t
,
∑øm
Ë
	`cuæ_ósy_£t›t
(h™dÀ,›t,∑øm)

	)

2409 
	#cuæ_ósy_gëöfo
(
h™dÀ
,
öfo
,
¨g
Ë
	`cuæ_ósy_gëöfo
(h™dÀ,öfo,¨g)

	)

2410 
	#cuæ_sh¨e_£t›t
(
sh¨e
,
›t
,
∑øm
Ë
	`cuæ_sh¨e_£t›t
(sh¨e,›t,∑øm)

	)

2411 
	#cuæ_mu…i_£t›t
(
h™dÀ
,
›t
,
∑øm
Ë
	`cuæ_mu…i_£t›t
(h™dÀ,›t,∑øm)

	)

	@/usr/include/errno.h

22 #i‚def 
_ERRNO_H


26 #i‚def 
__√ed_Em©h


27 
	#_ERRNO_H
 1

	)

28 
	~<„©uªs.h
>

31 
	g__BEGIN_DECLS


35 
	~<bôs/î∫o.h
>

36 #unde‡
__√ed_Em©h


38 #ifdef 
_ERRNO_H


45 #i‚def 
î∫o


46 
î∫o
;

49 #ifde‡
__USE_GNU


54 *
¥ogøm_övoˇti⁄_«me
, *
¥ogøm_övoˇti⁄_sh‹t_«me
;

58 
	g__END_DECLS


66 #i‡
deföed
 
__USE_GNU
 || deföed 
__√ed_îr‹_t


67 #i‚de‡
__îr‹_t_deföed


68 
	tîr‹_t
;

69 
	#__îr‹_t_deföed
 1

	)

71 #unde‡
__√ed_îr‹_t


	@/usr/include/fcntl.h

22 #i‚def 
_FCNTL_H


23 
	#_FCNTL_H
 1

	)

25 
	~<„©uªs.h
>

28 
	g__BEGIN_DECLS


31 
	~<bôs/ty≥s.h
>

35 
	~<bôs/f˙é.h
>

39 #ifde‡
__O_TMPFILE


40 
	#__OPEN_NEEDS_MODE
(
oÊag
) \

41 (((
oÊag
Ë& 
O_CREAT
Ë!0 || ((oÊagË& 
__O_TMPFILE
Ë=__O_TMPFILE)

	)

43 
	#__OPEN_NEEDS_MODE
(
oÊag
Ë(((oÊagË& 
O_CREAT
Ë!0)

	)

49 #i‚de‡
__mode_t_deföed


50 
__mode_t
 
	tmode_t
;

51 
	#__mode_t_deföed


	)

54 #i‚de‡
__off_t_deföed


55 #i‚de‡
__USE_FILE_OFFSET64


56 
__off_t
 
	toff_t
;

58 
__off64_t
 
	toff_t
;

60 
	#__off_t_deföed


	)

63 #i‡
deföed
 
__USE_LARGEFILE64
 && !deföed 
__off64_t_deföed


64 
__off64_t
 
	toff64_t
;

65 
	#__off64_t_deföed


	)

68 #i‚de‡
__pid_t_deföed


69 
__pid_t
 
	tpid_t
;

70 
	#__pid_t_deföed


	)

74 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8


75 
	#__√ed_time•ec


	)

76 
	~<time.h
>

77 
	~<bôs/°©.h
>

79 
	#S_IFMT
 
__S_IFMT


	)

80 
	#S_IFDIR
 
__S_IFDIR


	)

81 
	#S_IFCHR
 
__S_IFCHR


	)

82 
	#S_IFBLK
 
__S_IFBLK


	)

83 
	#S_IFREG
 
__S_IFREG


	)

84 #ifde‡
__S_IFIFO


85 
	#S_IFIFO
 
__S_IFIFO


	)

87 #ifde‡
__S_IFLNK


88 
	#S_IFLNK
 
__S_IFLNK


	)

90 #i‡(
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K8
Ë&& deföed 
__S_IFSOCK


91 
	#S_IFSOCK
 
__S_IFSOCK


	)

96 
	#S_ISUID
 
__S_ISUID


	)

97 
	#S_ISGID
 
__S_ISGID


	)

99 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


101 
	#S_ISVTX
 
__S_ISVTX


	)

104 
	#S_IRUSR
 
__S_IREAD


	)

105 
	#S_IWUSR
 
__S_IWRITE


	)

106 
	#S_IXUSR
 
__S_IEXEC


	)

108 
	#S_IRWXU
 (
__S_IREAD
|
__S_IWRITE
|
__S_IEXEC
)

	)

110 
	#S_IRGRP
 (
S_IRUSR
 >> 3Ë

	)

111 
	#S_IWGRP
 (
S_IWUSR
 >> 3Ë

	)

112 
	#S_IXGRP
 (
S_IXUSR
 >> 3Ë

	)

114 
	#S_IRWXG
 (
S_IRWXU
 >> 3)

	)

116 
	#S_IROTH
 (
S_IRGRP
 >> 3Ë

	)

117 
	#S_IWOTH
 (
S_IWGRP
 >> 3Ë

	)

118 
	#S_IXOTH
 (
S_IXGRP
 >> 3Ë

	)

120 
	#S_IRWXO
 (
S_IRWXG
 >> 3)

	)

123 #ifdef 
__USE_MISC


124 #i‚de‡
R_OK


127 
	#R_OK
 4

	)

128 
	#W_OK
 2

	)

129 
	#X_OK
 1

	)

130 
	#F_OK
 0

	)

135 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8


136 
	#SEEK_SET
 0

	)

137 
	#SEEK_CUR
 1

	)

138 
	#SEEK_END
 2

	)

146 
f˙é
 (
__fd
, 
__cmd
, ...);

155 #i‚de‡
__USE_FILE_OFFSET64


156 
	$›í
 (c⁄° *
__fûe
, 
__oÊag
, ...Ë
	`__n⁄nuŒ
 ((1));

158 #ifde‡
__REDIRECT


159 
	`__REDIRECT
 (
›í
, (c⁄° *
__fûe
, 
__oÊag
, ...), 
›í64
)

160 
	`__n⁄nuŒ
 ((1));

162 
	#›í
 
›í64


	)

165 #ifde‡
__USE_LARGEFILE64


166 
	$›í64
 (c⁄° *
__fûe
, 
__oÊag
, ...Ë
	`__n⁄nuŒ
 ((1));

169 #ifde‡
__USE_ATFILE


179 #i‚de‡
__USE_FILE_OFFSET64


180 
	$›í©
 (
__fd
, c⁄° *
__fûe
, 
__oÊag
, ...)

181 
	`__n⁄nuŒ
 ((2));

183 #ifde‡
__REDIRECT


184 
	`__REDIRECT
 (
›í©
, (
__fd
, c⁄° *
__fûe
, 
__oÊag
,

185 ...), 
›í©64
Ë
	`__n⁄nuŒ
 ((2));

187 
	#›í©
 
›í©64


	)

190 #ifde‡
__USE_LARGEFILE64


191 
	$›í©64
 (
__fd
, c⁄° *
__fûe
, 
__oÊag
, ...)

192 
	`__n⁄nuŒ
 ((2));

201 #i‚de‡
__USE_FILE_OFFSET64


202 
	$¸ót
 (c⁄° *
__fûe
, 
mode_t
 
__mode
Ë
	`__n⁄nuŒ
 ((1));

204 #ifde‡
__REDIRECT


205 
	`__REDIRECT
 (
¸ót
, (c⁄° *
__fûe
, 
mode_t
 
__mode
),

206 
¸ót64
Ë
	`__n⁄nuŒ
 ((1));

208 
	#¸ót
 
¸ót64


	)

211 #ifde‡
__USE_LARGEFILE64


212 
	$¸ót64
 (c⁄° *
__fûe
, 
mode_t
 
__mode
Ë
	`__n⁄nuŒ
 ((1));

215 #i‡!
deföed
 
F_LOCK
 && (deföed 
__USE_MISC
 || (deföed 
__USE_XOPEN_EXTENDED
 \

216 && !
deföed
 
__USE_POSIX
))

225 
	#F_ULOCK
 0

	)

226 
	#F_LOCK
 1

	)

227 
	#F_TLOCK
 2

	)

228 
	#F_TEST
 3

	)

230 #i‚de‡
__USE_FILE_OFFSET64


231 
	`lockf
 (
__fd
, 
__cmd
, 
off_t
 
__Àn
);

233 #ifde‡
__REDIRECT


234 
	`__REDIRECT
 (
lockf
, (
__fd
, 
__cmd
, 
__off64_t
 
__Àn
), 
lockf64
);

236 
	#lockf
 
lockf64


	)

239 #ifde‡
__USE_LARGEFILE64


240 
	`lockf64
 (
__fd
, 
__cmd
, 
off64_t
 
__Àn
);

244 #ifde‡
__USE_XOPEN2K


247 #i‚de‡
__USE_FILE_OFFSET64


248 
	$posix_Ádvi£
 (
__fd
, 
off_t
 
__off£t
, off_à
__Àn
,

249 
__advi£
Ë
__THROW
;

251 #ifde‡
__REDIRECT_NTH


252 
	`__REDIRECT_NTH
 (
posix_Ádvi£
, (
__fd
, 
__off64_t
 
__off£t
,

253 
__off64_t
 
__Àn
, 
__advi£
),

254 
posix_Ádvi£64
);

256 
	#posix_Ádvi£
 
posix_Ádvi£64


	)

259 #ifde‡
__USE_LARGEFILE64


260 
	$posix_Ádvi£64
 (
__fd
, 
off64_t
 
__off£t
, off64_à
__Àn
,

261 
__advi£
Ë
__THROW
;

269 #i‚de‡
__USE_FILE_OFFSET64


270 
	`posix_ÁŒoˇã
 (
__fd
, 
off_t
 
__off£t
, off_à
__Àn
);

272 #ifde‡
__REDIRECT


273 
	`__REDIRECT
 (
posix_ÁŒoˇã
, (
__fd
, 
__off64_t
 
__off£t
,

274 
__off64_t
 
__Àn
),

275 
posix_ÁŒoˇã64
);

277 
	#posix_ÁŒoˇã
 
posix_ÁŒoˇã64


	)

280 #ifde‡
__USE_LARGEFILE64


281 
	`posix_ÁŒoˇã64
 (
__fd
, 
off64_t
 
__off£t
, off64_à
__Àn
);

287 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__f‹tify_fun˘i⁄
 \

288 && 
deföed
 
__va_¨g_∑ck_Àn


289 
	~<bôs/f˙é2.h
>

292 
__END_DECLS


	@/usr/include/inttypes.h

22 #i‚de‡
_INTTYPES_H


23 
	#_INTTYPES_H
 1

	)

25 
	~<„©uªs.h
>

27 
	~<°döt.h
>

30 #i‚de‡
____gwch¨_t_deföed


31 #ifde‡
__˝lu•lus


32 
	#__gwch¨_t
 
wch¨_t


	)

33 #ñi‡
deföed
 
__WCHAR_TYPE__


34 
__WCHAR_TYPE__
 
	t__gwch¨_t
;

36 
	#__√ed_wch¨_t


	)

37 
	~<°ddef.h
>

38 
wch¨_t
 
	t__gwch¨_t
;

40 
	#____gwch¨_t_deföed
 1

	)

43 #i‡
__WORDSIZE
 == 64

44 
	#__PRI64_PREFIX
 "l"

	)

45 
	#__PRIPTR_PREFIX
 "l"

	)

47 
	#__PRI64_PREFIX
 "Œ"

	)

48 
	#__PRIPTR_PREFIX


	)

54 
	#PRId8
 "d"

	)

55 
	#PRId16
 "d"

	)

56 
	#PRId32
 "d"

	)

57 
	#PRId64
 
__PRI64_PREFIX
 "d"

	)

59 
	#PRIdLEAST8
 "d"

	)

60 
	#PRIdLEAST16
 "d"

	)

61 
	#PRIdLEAST32
 "d"

	)

62 
	#PRIdLEAST64
 
__PRI64_PREFIX
 "d"

	)

64 
	#PRIdFAST8
 "d"

	)

65 
	#PRIdFAST16
 
__PRIPTR_PREFIX
 "d"

	)

66 
	#PRIdFAST32
 
__PRIPTR_PREFIX
 "d"

	)

67 
	#PRIdFAST64
 
__PRI64_PREFIX
 "d"

	)

70 
	#PRIi8
 "i"

	)

71 
	#PRIi16
 "i"

	)

72 
	#PRIi32
 "i"

	)

73 
	#PRIi64
 
__PRI64_PREFIX
 "i"

	)

75 
	#PRIiLEAST8
 "i"

	)

76 
	#PRIiLEAST16
 "i"

	)

77 
	#PRIiLEAST32
 "i"

	)

78 
	#PRIiLEAST64
 
__PRI64_PREFIX
 "i"

	)

80 
	#PRIiFAST8
 "i"

	)

81 
	#PRIiFAST16
 
__PRIPTR_PREFIX
 "i"

	)

82 
	#PRIiFAST32
 
__PRIPTR_PREFIX
 "i"

	)

83 
	#PRIiFAST64
 
__PRI64_PREFIX
 "i"

	)

86 
	#PRIo8
 "o"

	)

87 
	#PRIo16
 "o"

	)

88 
	#PRIo32
 "o"

	)

89 
	#PRIo64
 
__PRI64_PREFIX
 "o"

	)

91 
	#PRIoLEAST8
 "o"

	)

92 
	#PRIoLEAST16
 "o"

	)

93 
	#PRIoLEAST32
 "o"

	)

94 
	#PRIoLEAST64
 
__PRI64_PREFIX
 "o"

	)

96 
	#PRIoFAST8
 "o"

	)

97 
	#PRIoFAST16
 
__PRIPTR_PREFIX
 "o"

	)

98 
	#PRIoFAST32
 
__PRIPTR_PREFIX
 "o"

	)

99 
	#PRIoFAST64
 
__PRI64_PREFIX
 "o"

	)

102 
	#PRIu8
 "u"

	)

103 
	#PRIu16
 "u"

	)

104 
	#PRIu32
 "u"

	)

105 
	#PRIu64
 
__PRI64_PREFIX
 "u"

	)

107 
	#PRIuLEAST8
 "u"

	)

108 
	#PRIuLEAST16
 "u"

	)

109 
	#PRIuLEAST32
 "u"

	)

110 
	#PRIuLEAST64
 
__PRI64_PREFIX
 "u"

	)

112 
	#PRIuFAST8
 "u"

	)

113 
	#PRIuFAST16
 
__PRIPTR_PREFIX
 "u"

	)

114 
	#PRIuFAST32
 
__PRIPTR_PREFIX
 "u"

	)

115 
	#PRIuFAST64
 
__PRI64_PREFIX
 "u"

	)

118 
	#PRIx8
 "x"

	)

119 
	#PRIx16
 "x"

	)

120 
	#PRIx32
 "x"

	)

121 
	#PRIx64
 
__PRI64_PREFIX
 "x"

	)

123 
	#PRIxLEAST8
 "x"

	)

124 
	#PRIxLEAST16
 "x"

	)

125 
	#PRIxLEAST32
 "x"

	)

126 
	#PRIxLEAST64
 
__PRI64_PREFIX
 "x"

	)

128 
	#PRIxFAST8
 "x"

	)

129 
	#PRIxFAST16
 
__PRIPTR_PREFIX
 "x"

	)

130 
	#PRIxFAST32
 
__PRIPTR_PREFIX
 "x"

	)

131 
	#PRIxFAST64
 
__PRI64_PREFIX
 "x"

	)

134 
	#PRIX8
 "X"

	)

135 
	#PRIX16
 "X"

	)

136 
	#PRIX32
 "X"

	)

137 
	#PRIX64
 
__PRI64_PREFIX
 "X"

	)

139 
	#PRIXLEAST8
 "X"

	)

140 
	#PRIXLEAST16
 "X"

	)

141 
	#PRIXLEAST32
 "X"

	)

142 
	#PRIXLEAST64
 
__PRI64_PREFIX
 "X"

	)

144 
	#PRIXFAST8
 "X"

	)

145 
	#PRIXFAST16
 
__PRIPTR_PREFIX
 "X"

	)

146 
	#PRIXFAST32
 
__PRIPTR_PREFIX
 "X"

	)

147 
	#PRIXFAST64
 
__PRI64_PREFIX
 "X"

	)

151 
	#PRIdMAX
 
__PRI64_PREFIX
 "d"

	)

152 
	#PRIiMAX
 
__PRI64_PREFIX
 "i"

	)

153 
	#PRIoMAX
 
__PRI64_PREFIX
 "o"

	)

154 
	#PRIuMAX
 
__PRI64_PREFIX
 "u"

	)

155 
	#PRIxMAX
 
__PRI64_PREFIX
 "x"

	)

156 
	#PRIXMAX
 
__PRI64_PREFIX
 "X"

	)

160 
	#PRIdPTR
 
__PRIPTR_PREFIX
 "d"

	)

161 
	#PRIiPTR
 
__PRIPTR_PREFIX
 "i"

	)

162 
	#PRIoPTR
 
__PRIPTR_PREFIX
 "o"

	)

163 
	#PRIuPTR
 
__PRIPTR_PREFIX
 "u"

	)

164 
	#PRIxPTR
 
__PRIPTR_PREFIX
 "x"

	)

165 
	#PRIXPTR
 
__PRIPTR_PREFIX
 "X"

	)

171 
	#SCNd8
 "hhd"

	)

172 
	#SCNd16
 "hd"

	)

173 
	#SCNd32
 "d"

	)

174 
	#SCNd64
 
__PRI64_PREFIX
 "d"

	)

176 
	#SCNdLEAST8
 "hhd"

	)

177 
	#SCNdLEAST16
 "hd"

	)

178 
	#SCNdLEAST32
 "d"

	)

179 
	#SCNdLEAST64
 
__PRI64_PREFIX
 "d"

	)

181 
	#SCNdFAST8
 "hhd"

	)

182 
	#SCNdFAST16
 
__PRIPTR_PREFIX
 "d"

	)

183 
	#SCNdFAST32
 
__PRIPTR_PREFIX
 "d"

	)

184 
	#SCNdFAST64
 
__PRI64_PREFIX
 "d"

	)

187 
	#SCNi8
 "hhi"

	)

188 
	#SCNi16
 "hi"

	)

189 
	#SCNi32
 "i"

	)

190 
	#SCNi64
 
__PRI64_PREFIX
 "i"

	)

192 
	#SCNiLEAST8
 "hhi"

	)

193 
	#SCNiLEAST16
 "hi"

	)

194 
	#SCNiLEAST32
 "i"

	)

195 
	#SCNiLEAST64
 
__PRI64_PREFIX
 "i"

	)

197 
	#SCNiFAST8
 "hhi"

	)

198 
	#SCNiFAST16
 
__PRIPTR_PREFIX
 "i"

	)

199 
	#SCNiFAST32
 
__PRIPTR_PREFIX
 "i"

	)

200 
	#SCNiFAST64
 
__PRI64_PREFIX
 "i"

	)

203 
	#SCNu8
 "hhu"

	)

204 
	#SCNu16
 "hu"

	)

205 
	#SCNu32
 "u"

	)

206 
	#SCNu64
 
__PRI64_PREFIX
 "u"

	)

208 
	#SCNuLEAST8
 "hhu"

	)

209 
	#SCNuLEAST16
 "hu"

	)

210 
	#SCNuLEAST32
 "u"

	)

211 
	#SCNuLEAST64
 
__PRI64_PREFIX
 "u"

	)

213 
	#SCNuFAST8
 "hhu"

	)

214 
	#SCNuFAST16
 
__PRIPTR_PREFIX
 "u"

	)

215 
	#SCNuFAST32
 
__PRIPTR_PREFIX
 "u"

	)

216 
	#SCNuFAST64
 
__PRI64_PREFIX
 "u"

	)

219 
	#SCNo8
 "hho"

	)

220 
	#SCNo16
 "ho"

	)

221 
	#SCNo32
 "o"

	)

222 
	#SCNo64
 
__PRI64_PREFIX
 "o"

	)

224 
	#SCNoLEAST8
 "hho"

	)

225 
	#SCNoLEAST16
 "ho"

	)

226 
	#SCNoLEAST32
 "o"

	)

227 
	#SCNoLEAST64
 
__PRI64_PREFIX
 "o"

	)

229 
	#SCNoFAST8
 "hho"

	)

230 
	#SCNoFAST16
 
__PRIPTR_PREFIX
 "o"

	)

231 
	#SCNoFAST32
 
__PRIPTR_PREFIX
 "o"

	)

232 
	#SCNoFAST64
 
__PRI64_PREFIX
 "o"

	)

235 
	#SCNx8
 "hhx"

	)

236 
	#SCNx16
 "hx"

	)

237 
	#SCNx32
 "x"

	)

238 
	#SCNx64
 
__PRI64_PREFIX
 "x"

	)

240 
	#SCNxLEAST8
 "hhx"

	)

241 
	#SCNxLEAST16
 "hx"

	)

242 
	#SCNxLEAST32
 "x"

	)

243 
	#SCNxLEAST64
 
__PRI64_PREFIX
 "x"

	)

245 
	#SCNxFAST8
 "hhx"

	)

246 
	#SCNxFAST16
 
__PRIPTR_PREFIX
 "x"

	)

247 
	#SCNxFAST32
 
__PRIPTR_PREFIX
 "x"

	)

248 
	#SCNxFAST64
 
__PRI64_PREFIX
 "x"

	)

252 
	#SCNdMAX
 
__PRI64_PREFIX
 "d"

	)

253 
	#SCNiMAX
 
__PRI64_PREFIX
 "i"

	)

254 
	#SCNoMAX
 
__PRI64_PREFIX
 "o"

	)

255 
	#SCNuMAX
 
__PRI64_PREFIX
 "u"

	)

256 
	#SCNxMAX
 
__PRI64_PREFIX
 "x"

	)

259 
	#SCNdPTR
 
__PRIPTR_PREFIX
 "d"

	)

260 
	#SCNiPTR
 
__PRIPTR_PREFIX
 "i"

	)

261 
	#SCNoPTR
 
__PRIPTR_PREFIX
 "o"

	)

262 
	#SCNuPTR
 
__PRIPTR_PREFIX
 "u"

	)

263 
	#SCNxPTR
 
__PRIPTR_PREFIX
 "x"

	)

266 
	g__BEGIN_DECLS


268 #i‡
__WORDSIZE
 == 64

273 
	mquŸ
;

274 
	mªm
;

275 } 
	timaxdiv_t
;

282 
__exãnsi⁄__
 
	mquŸ
;

283 
__exãnsi⁄__
 
	mªm
;

284 } 
	timaxdiv_t
;

290 
ötmax_t
 
	$imaxabs
 (
ötmax_t
 
__n
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

293 
imaxdiv_t
 
	$imaxdiv
 (
ötmax_t
 
__numî
, i¡max_à
__díom
)

294 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

297 
ötmax_t
 
	$°πoimax
 (c⁄° *
__ª°ri˘
 
__≈å
,

298 **
__ª°ri˘
 
__íd±r
, 
__ba£
Ë
__THROW
;

301 
uötmax_t
 
	$°πoumax
 (c⁄° *
__ª°ri˘
 
__≈å
,

302 ** 
__ª°ri˘
 
__íd±r
, 
__ba£
Ë
__THROW
;

305 
ötmax_t
 
	$wc°oimax
 (c⁄° 
__gwch¨_t
 *
__ª°ri˘
 
__≈å
,

306 
__gwch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

307 
__THROW
;

310 
uötmax_t
 
	$wc°oumax
 (c⁄° 
__gwch¨_t
 *
__ª°ri˘
 
__≈å
,

311 
__gwch¨_t
 ** 
__ª°ri˘
 
__íd±r
, 
__ba£
)

312 
__THROW
;

314 #ifde‡
__USE_EXTERN_INLINES


316 #i‡
__WORDSIZE
 == 64

318 
	$__°πﬁ_öã∫Æ
 (c⁄° *
__ª°ri˘
 
__≈å
,

319 **
__ª°ri˘
 
__íd±r
,

320 
__ba£
, 
__group
)

321 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

323 
__exã∫_ölöe
 
ötmax_t


324 
	`__NTH
 (
	$°πoimax
 (c⁄° *
__ª°ri˘
 
≈å
, **__ª°ri˘ 
íd±r
,

325 
ba£
))

327  
	`__°πﬁ_öã∫Æ
 (
≈å
, 
íd±r
, 
ba£
, 0);

328 
	}
}

330 
	$__°πoul_öã∫Æ
 (c⁄° *
__ª°ri˘
 
__≈å
,

331 ** 
__ª°ri˘
 
__íd±r
,

332 
__ba£
, 
__group
)

333 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

335 
__exã∫_ölöe
 
uötmax_t


336 
	`__NTH
 (
	$°πoumax
 (c⁄° *
__ª°ri˘
 
≈å
, **__ª°ri˘ 
íd±r
,

337 
ba£
))

339  
	`__°πoul_öã∫Æ
 (
≈å
, 
íd±r
, 
ba£
, 0);

340 
	}
}

342 
	$__wc°ﬁ_öã∫Æ
 (c⁄° 
__gwch¨_t
 * 
__ª°ri˘
 
__≈å
,

343 
__gwch¨_t
 **
__ª°ri˘
 
__íd±r
,

344 
__ba£
, 
__group
)

345 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

347 
__exã∫_ölöe
 
ötmax_t


348 
	`__NTH
 (
	$wc°oimax
 (c⁄° 
__gwch¨_t
 *
__ª°ri˘
 
≈å
,

349 
__gwch¨_t
 **
__ª°ri˘
 
íd±r
, 
ba£
))

351  
	`__wc°ﬁ_öã∫Æ
 (
≈å
, 
íd±r
, 
ba£
, 0);

352 
	}
}

354 
	$__wc°oul_öã∫Æ
 (c⁄° 
__gwch¨_t
 *

355 
__ª°ri˘
 
__≈å
,

356 
__gwch¨_t
 **

357 
__ª°ri˘
 
__íd±r
,

358 
__ba£
, 
__group
)

359 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

361 
__exã∫_ölöe
 
uötmax_t


362 
	`__NTH
 (
	$wc°oumax
 (c⁄° 
__gwch¨_t
 *
__ª°ri˘
 
≈å
,

363 
__gwch¨_t
 **
__ª°ri˘
 
íd±r
, 
ba£
))

365  
	`__wc°oul_öã∫Æ
 (
≈å
, 
íd±r
, 
ba£
, 0);

366 
	}
}

370 
__exãnsi⁄__


371 
	$__°πﬁl_öã∫Æ
 (c⁄° *
__ª°ri˘
 
__≈å
,

372 **
__ª°ri˘
 
__íd±r
,

373 
__ba£
, 
__group
)

374 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

376 
__exã∫_ölöe
 
ötmax_t


377 
	`__NTH
 (
	$°πoimax
 (c⁄° *
__ª°ri˘
 
≈å
, **__ª°ri˘ 
íd±r
,

378 
ba£
))

380  
	`__°πﬁl_öã∫Æ
 (
≈å
, 
íd±r
, 
ba£
, 0);

381 
	}
}

383 
__exãnsi⁄__


384 
	$__°πouŒ_öã∫Æ
 (const *

385 
__ª°ri˘
 
__≈å
,

387 
__ª°ri˘
 
__íd±r
,

388 
__ba£
,

389 
__group
)

390 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

392 
__exã∫_ölöe
 
uötmax_t


393 
	`__NTH
 (
	$°πoumax
 (c⁄° *
__ª°ri˘
 
≈å
, **__ª°ri˘ 
íd±r
,

394 
ba£
))

396  
	`__°πouŒ_öã∫Æ
 (
≈å
, 
íd±r
, 
ba£
, 0);

397 
	}
}

399 
__exãnsi⁄__


400 
	$__wc°ﬁl_öã∫Æ
 (c⁄° 
__gwch¨_t
 *
__ª°ri˘
 
__≈å
,

401 
__gwch¨_t
 **
__ª°ri˘
 
__íd±r
,

402 
__ba£
, 
__group
)

403 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

405 
__exã∫_ölöe
 
ötmax_t


406 
	`__NTH
 (
	$wc°oimax
 (c⁄° 
__gwch¨_t
 *
__ª°ri˘
 
≈å
,

407 
__gwch¨_t
 **
__ª°ri˘
 
íd±r
, 
ba£
))

409  
	`__wc°ﬁl_öã∫Æ
 (
≈å
, 
íd±r
, 
ba£
, 0);

410 
	}
}

413 
__exãnsi⁄__


414 
	$__wc°ouŒ_öã∫Æ
 (c⁄° 
__gwch¨_t
 *

415 
__ª°ri˘
 
__≈å
,

416 
__gwch¨_t
 **

417 
__ª°ri˘
 
__íd±r
,

418 
__ba£
,

419 
__group
)

420 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

422 
__exã∫_ölöe
 
uötmax_t


423 
	`__NTH
 (
	$wc°oumax
 (c⁄° 
__gwch¨_t
 *
__ª°ri˘
 
≈å
,

424 
__gwch¨_t
 **
__ª°ri˘
 
íd±r
, 
ba£
))

426  
	`__wc°ouŒ_öã∫Æ
 (
≈å
, 
íd±r
, 
ba£
, 0);

427 
	}
}

432 
	g__END_DECLS


	@/usr/include/limits.h

22 #i‚de‡
_LIBC_LIMITS_H_


23 
	#_LIBC_LIMITS_H_
 1

	)

25 
	~<„©uªs.h
>

31 
	#MB_LEN_MAX
 16

	)

36 #i‡!
deföed
 
__GNUC__
 || __GNUC__ < 2

41 #i‚de‡
_LIMITS_H


42 
	#_LIMITS_H
 1

	)

44 
	~<bôs/w‹dsize.h
>

53 
	#CHAR_BIT
 8

	)

56 
	#SCHAR_MIN
 (-128)

	)

57 
	#SCHAR_MAX
 127

	)

60 
	#UCHAR_MAX
 255

	)

63 #ifde‡
__CHAR_UNSIGNED__


64 
	#CHAR_MIN
 0

	)

65 
	#CHAR_MAX
 
UCHAR_MAX


	)

67 
	#CHAR_MIN
 
SCHAR_MIN


	)

68 
	#CHAR_MAX
 
SCHAR_MAX


	)

72 
	#SHRT_MIN
 (-32768)

	)

73 
	#SHRT_MAX
 32767

	)

76 
	#USHRT_MAX
 65535

	)

79 
	#INT_MIN
 (-
INT_MAX
 - 1)

	)

80 
	#INT_MAX
 2147483647

	)

83 
	#UINT_MAX
 4294967295U

	)

86 #i‡
__WORDSIZE
 == 64

87 
	#LONG_MAX
 9223372036854775807L

	)

89 
	#LONG_MAX
 2147483647L

	)

91 
	#LONG_MIN
 (-
LONG_MAX
 - 1L)

	)

94 #i‡
__WORDSIZE
 == 64

95 
	#ULONG_MAX
 18446744073709551615UL

	)

97 
	#ULONG_MAX
 4294967295UL

	)

100 #ifde‡
__USE_ISOC99


103 
	#LLONG_MAX
 9223372036854775807LL

	)

104 
	#LLONG_MIN
 (-
LLONG_MAX
 - 1LL)

	)

107 
	#ULLONG_MAX
 18446744073709551615ULL

	)

121 #i‡
deföed
 
__GNUC__
 && !deföed 
_GCC_LIMITS_H_


123 #ö˛ude_√xà<
limôs
.
h
>

129 #i‡
deföed
 
__USE_ISOC99
 && deföed 
__GNUC__


130 #i‚de‡
LLONG_MIN


131 
	#LLONG_MIN
 (-
LLONG_MAX
-1)

	)

133 #i‚de‡
LLONG_MAX


134 
	#LLONG_MAX
 
__LONG_LONG_MAX__


	)

136 #i‚de‡
ULLONG_MAX


137 
	#ULLONG_MAX
 (
LLONG_MAX
 * 2ULL + 1)

	)

141 #ifdef 
__USE_POSIX


143 
	~<bôs/posix1_lim.h
>

146 #ifdef 
__USE_POSIX2


147 
	~<bôs/posix2_lim.h
>

150 #ifdef 
__USE_XOPEN


151 
	~<bôs/x›í_lim.h
>

	@/usr/include/netdb.h

22 #i‚def 
_NETDB_H


23 
	#_NETDB_H
 1

	)

25 
	~<„©uªs.h
>

27 
	~<√töë/ö.h
>

28 
	~<°döt.h
>

29 #ifde‡
__USE_MISC


32 
	~<Ωc/√tdb.h
>

35 #ifde‡
__USE_GNU


36 
	#__√ed_sigevít_t


	)

37 
	~<bôs/sigöfo.h
>

38 
	#__√ed_time•ec


	)

39 
	~<time.h
>

42 
	~<bôs/√tdb.h
>

45 
	#_PATH_HEQUIV
 "/ëc/ho°s.equiv"

	)

46 
	#_PATH_HOSTS
 "/ëc/ho°s"

	)

47 
	#_PATH_NETWORKS
 "/ëc/√tw‹ks"

	)

48 
	#_PATH_NSSWITCH_CONF
 "/ëc/nsswôch.c⁄f"

	)

49 
	#_PATH_PROTOCOLS
 "/ëc/¥Ÿocﬁs"

	)

50 
	#_PATH_SERVICES
 "/ëc/£rvi˚s"

	)

53 
	g__BEGIN_DECLS


55 #i‡
deföed
 
__USE_MISC
 || !deföed 
__USE_XOPEN2K8


58 
	#h_î∫o
 (*
	`__h_î∫o_loˇti⁄
 ())

	)

61 *
	$__h_î∫o_loˇti⁄
 (Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

65 
	#HOST_NOT_FOUND
 1

	)

66 
	#TRY_AGAIN
 2

	)

68 
	#NO_RECOVERY
 3

	)

70 
	#NO_DATA
 4

	)

73 #ifde‡
__USE_MISC


74 
	#NETDB_INTERNAL
 -1

	)

75 
	#NETDB_SUCCESS
 0

	)

76 
	#NO_ADDRESS
 
NO_DATA


	)

79 #i‡
deföed
 
__USE_XOPEN2K
 || deföed 
__USE_XOPEN_EXTENDED


81 
	#IPPORT_RESERVED
 1024

	)

84 #ifde‡
__USE_GNU


86 
	#SCOPE_DELIMITER
 '%'

	)

89 #ifde‡
__USE_MISC


92 
	$hîr‹
 (c⁄° *
__°r
Ë
__THROW
;

95 c⁄° *
	$h°ªº‹
 (
__îr_num
Ë
__THROW
;

100 
	sho°ít


102 *
h_«me
;

103 **
h_Æü£s
;

104 
h_addπy≥
;

105 
h_Àngth
;

106 **
h_addr_li°
;

107 #ifde‡
__USE_MISC


108 
	#h_addr
 
h_addr_li°
[0]

	)

117 
	`£tho°ít
 (
__°ay_›í
);

123 
	`ídho°ít
 ();

130 
ho°ít
 *
	`gëho°ít
 ();

137 
ho°ít
 *
	`gëho°byaddr
 (c⁄° *
__addr
, 
__sockÀn_t
 
__Àn
,

138 
__ty≥
);

144 
ho°ít
 *
	`gëho°by«me
 (c⁄° *
__«me
);

146 #ifde‡
__USE_MISC


155 
ho°ít
 *
	`gëho°by«me2
 (c⁄° *
__«me
, 
__af
);

167 
	`gëho°ít_r
 (
ho°ít
 *
__ª°ri˘
 
__ªsu…_buf
,

168 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

169 
ho°ít
 **
__ª°ri˘
 
__ªsu…
,

170 *
__ª°ri˘
 
__h_î∫›
);

172 
	`gëho°byaddr_r
 (c⁄° *
__ª°ri˘
 
__addr
, 
__sockÀn_t
 
__Àn
,

173 
__ty≥
,

174 
ho°ít
 *
__ª°ri˘
 
__ªsu…_buf
,

175 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

176 
ho°ít
 **
__ª°ri˘
 
__ªsu…
,

177 *
__ª°ri˘
 
__h_î∫›
);

179 
	`gëho°by«me_r
 (c⁄° *
__ª°ri˘
 
__«me
,

180 
ho°ít
 *
__ª°ri˘
 
__ªsu…_buf
,

181 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

182 
ho°ít
 **
__ª°ri˘
 
__ªsu…
,

183 *
__ª°ri˘
 
__h_î∫›
);

185 
	`gëho°by«me2_r
 (c⁄° *
__ª°ri˘
 
__«me
, 
__af
,

186 
ho°ít
 *
__ª°ri˘
 
__ªsu…_buf
,

187 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

188 
ho°ít
 **
__ª°ri˘
 
__ªsu…
,

189 *
__ª°ri˘
 
__h_î∫›
);

198 
	`£äëít
 (
__°ay_›í
);

204 
	`íd√ã¡
 ();

211 
√ã¡
 *
	`gë√ã¡
 ();

218 
√ã¡
 *
	`gë√tbyaddr
 (
uöt32_t
 
__√t
, 
__ty≥
);

224 
√ã¡
 *
	`gë√tby«me
 (c⁄° *
__«me
);

226 #ifdef 
__USE_MISC


237 
	`gë√ã¡_r
 (
√ã¡
 *
__ª°ri˘
 
__ªsu…_buf
,

238 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

239 
√ã¡
 **
__ª°ri˘
 
__ªsu…
,

240 *
__ª°ri˘
 
__h_î∫›
);

242 
	`gë√tbyaddr_r
 (
uöt32_t
 
__√t
, 
__ty≥
,

243 
√ã¡
 *
__ª°ri˘
 
__ªsu…_buf
,

244 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

245 
√ã¡
 **
__ª°ri˘
 
__ªsu…
,

246 *
__ª°ri˘
 
__h_î∫›
);

248 
	`gë√tby«me_r
 (c⁄° *
__ª°ri˘
 
__«me
,

249 
√ã¡
 *
__ª°ri˘
 
__ªsu…_buf
,

250 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

251 
√ã¡
 **
__ª°ri˘
 
__ªsu…
,

252 *
__ª°ri˘
 
__h_î∫›
);

257 
	s£rvít


259 *
s_«me
;

260 **
s_Æü£s
;

261 
s_p‹t
;

262 *
s_¥Ÿo
;

270 
	`£t£rvít
 (
__°ay_›í
);

276 
	`íd£rvít
 ();

283 
£rvít
 *
	`gë£rvít
 ();

290 
£rvít
 *
	`gë£rvby«me
 (c⁄° *
__«me
, c⁄° *
__¥Ÿo
);

297 
£rvít
 *
	`gë£rvbyp‹t
 (
__p‹t
, c⁄° *
__¥Ÿo
);

300 #ifdef 
__USE_MISC


308 
	`gë£rvít_r
 (
£rvít
 *
__ª°ri˘
 
__ªsu…_buf
,

309 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

310 
£rvít
 **
__ª°ri˘
 
__ªsu…
);

312 
	`gë£rvby«me_r
 (c⁄° *
__ª°ri˘
 
__«me
,

313 c⁄° *
__ª°ri˘
 
__¥Ÿo
,

314 
£rvít
 *
__ª°ri˘
 
__ªsu…_buf
,

315 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

316 
£rvít
 **
__ª°ri˘
 
__ªsu…
);

318 
	`gë£rvbyp‹t_r
 (
__p‹t
, c⁄° *
__ª°ri˘
 
__¥Ÿo
,

319 
£rvít
 *
__ª°ri˘
 
__ªsu…_buf
,

320 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

321 
£rvít
 **
__ª°ri˘
 
__ªsu…
);

326 
	s¥Ÿ€¡


328 *
p_«me
;

329 **
p_Æü£s
;

330 
p_¥Ÿo
;

338 
	`£çrŸ€¡
 (
__°ay_›í
);

344 
	`íd¥Ÿ€¡
 ();

351 
¥Ÿ€¡
 *
	`gë¥Ÿ€¡
 ();

357 
¥Ÿ€¡
 *
	`gë¥Ÿoby«me
 (c⁄° *
__«me
);

363 
¥Ÿ€¡
 *
	`gë¥Ÿobynumbî
 (
__¥Ÿo
);

366 #ifdef 
__USE_MISC


374 
	`gë¥Ÿ€¡_r
 (
¥Ÿ€¡
 *
__ª°ri˘
 
__ªsu…_buf
,

375 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

376 
¥Ÿ€¡
 **
__ª°ri˘
 
__ªsu…
);

378 
	`gë¥Ÿoby«me_r
 (c⁄° *
__ª°ri˘
 
__«me
,

379 
¥Ÿ€¡
 *
__ª°ri˘
 
__ªsu…_buf
,

380 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

381 
¥Ÿ€¡
 **
__ª°ri˘
 
__ªsu…
);

383 
	`gë¥Ÿobynumbî_r
 (
__¥Ÿo
,

384 
¥Ÿ€¡
 *
__ª°ri˘
 
__ªsu…_buf
,

385 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

386 
¥Ÿ€¡
 **
__ª°ri˘
 
__ªsu…
);

395 
	`£äëgª¡
 (c⁄° *
__√tgroup
);

403 
	`íd√tgª¡
 ();

412 
	`gë√tgª¡
 (**
__ª°ri˘
 
__ho°p
,

413 **
__ª°ri˘
 
__u£Ω
,

414 **
__ª°ri˘
 
__domaöp
);

423 
	`ö√tgr
 (c⁄° *
__√tgroup
, c⁄° *
__ho°
,

424 c⁄° *
__u£r
, c⁄° *
__domaö
);

432 
	`gë√tgª¡_r
 (**
__ª°ri˘
 
__ho°p
,

433 **
__ª°ri˘
 
__u£Ω
,

434 **
__ª°ri˘
 
__domaöp
,

435 *
__ª°ri˘
 
__buf„r
, 
size_t
 
__buÊí
);

439 #ifde‡
__USE_MISC


451 
	`rcmd
 (**
__ª°ri˘
 
__aho°
, 
__Ω‹t
,

452 c⁄° *
__ª°ri˘
 
__locu£r
,

453 c⁄° *
__ª°ri˘
 
__ªmu£r
,

454 c⁄° *
__ª°ri˘
 
__cmd
, *__ª°ri˘ 
__fd2p
);

463 
	`rcmd_af
 (**
__ª°ri˘
 
__aho°
, 
__Ω‹t
,

464 c⁄° *
__ª°ri˘
 
__locu£r
,

465 c⁄° *
__ª°ri˘
 
__ªmu£r
,

466 c⁄° *
__ª°ri˘
 
__cmd
, *__ª°ri˘ 
__fd2p
,

467 
ß_Ámûy_t
 
__af
);

479 
	`ªxec
 (**
__ª°ri˘
 
__aho°
, 
__Ω‹t
,

480 c⁄° *
__ª°ri˘
 
__«me
,

481 c⁄° *
__ª°ri˘
 
__∑ss
,

482 c⁄° *
__ª°ri˘
 
__cmd
, *__ª°ri˘ 
__fd2p
);

491 
	`ªxec_af
 (**
__ª°ri˘
 
__aho°
, 
__Ω‹t
,

492 c⁄° *
__ª°ri˘
 
__«me
,

493 c⁄° *
__ª°ri˘
 
__∑ss
,

494 c⁄° *
__ª°ri˘
 
__cmd
, *__ª°ri˘ 
__fd2p
,

495 
ß_Ámûy_t
 
__af
);

505 
	`ru£rok
 (c⁄° *
__rho°
, 
__su£r
,

506 c⁄° *
__ªmu£r
, c⁄° *
__locu£r
);

515 
	`ru£rok_af
 (c⁄° *
__rho°
, 
__su£r
,

516 c⁄° *
__ªmu£r
, c⁄° *
__locu£r
,

517 
ß_Ámûy_t
 
__af
);

528 
	`úu£rok
 (
uöt32_t
 
__øddr
, 
__su£r
,

529 c⁄° *
__ªmu£r
, c⁄° *
__locu£r
);

539 
	`úu£rok_af
 (c⁄° *
__øddr
, 
__su£r
,

540 c⁄° *
__ªmu£r
, c⁄° *
__locu£r
,

541 
ß_Ámûy_t
 
__af
);

551 
	`ºesvp‹t
 (*
__Æp‹t
);

560 
	`ºesvp‹t_af
 (*
__Æp‹t
, 
ß_Ámûy_t
 
__af
);

565 #ifde‡
__USE_XOPEN2K


567 
	saddröfo


569 
ai_Êags
;

570 
ai_Ámûy
;

571 
ai_sockty≥
;

572 
ai_¥Ÿocﬁ
;

573 
sockÀn_t
 
ai_addæí
;

574 
sockaddr
 *
ai_addr
;

575 *
ai_ˇn⁄«me
;

576 
addröfo
 *
ai_√xt
;

579 #ifde‡
__USE_GNU


581 
	sgaicb


583 c⁄° *
¨_«me
;

584 c⁄° *
¨_£rvi˚
;

585 c⁄° 
addröfo
 *
¨_ªque°
;

586 
addröfo
 *
¨_ªsu…
;

588 
__ªtu∫
;

589 
__glibc_ª£rved
[5];

593 
	#GAI_WAIT
 0

	)

594 
	#GAI_NOWAIT
 1

	)

598 
	#AI_PASSIVE
 0x0001

	)

599 
	#AI_CANONNAME
 0x0002

	)

600 
	#AI_NUMERICHOST
 0x0004

	)

601 
	#AI_V4MAPPED
 0x0008

	)

602 
	#AI_ALL
 0x0010

	)

603 
	#AI_ADDRCONFIG
 0x0020

	)

605 #ifde‡
__USE_GNU


606 
	#AI_IDN
 0x0040

	)

609 
	#AI_CANONIDN
 0x0080

	)

610 
	#AI_IDN_ALLOW_UNASSIGNED
 0x0100

	)

612 
	#AI_IDN_USE_STD3_ASCII_RULES
 0x0200

	)

615 
	#AI_NUMERICSERV
 0x0400

	)

618 
	#EAI_BADFLAGS
 -1

	)

619 
	#EAI_NONAME
 -2

	)

620 
	#EAI_AGAIN
 -3

	)

621 
	#EAI_FAIL
 -4

	)

622 
	#EAI_FAMILY
 -6

	)

623 
	#EAI_SOCKTYPE
 -7

	)

624 
	#EAI_SERVICE
 -8

	)

625 
	#EAI_MEMORY
 -10

	)

626 
	#EAI_SYSTEM
 -11

	)

627 
	#EAI_OVERFLOW
 -12

	)

628 #ifde‡
__USE_GNU


629 
	#EAI_NODATA
 -5

	)

630 
	#EAI_ADDRFAMILY
 -9

	)

631 
	#EAI_INPROGRESS
 -100

	)

632 
	#EAI_CANCELED
 -101

	)

633 
	#EAI_NOTCANCELED
 -102

	)

634 
	#EAI_ALLDONE
 -103

	)

635 
	#EAI_INTR
 -104

	)

636 
	#EAI_IDN_ENCODE
 -105

	)

639 #ifde‡
__USE_MISC


640 
	#NI_MAXHOST
 1025

	)

641 
	#NI_MAXSERV
 32

	)

644 
	#NI_NUMERICHOST
 1

	)

645 
	#NI_NUMERICSERV
 2

	)

646 
	#NI_NOFQDN
 4

	)

647 
	#NI_NAMEREQD
 8

	)

648 
	#NI_DGRAM
 16

	)

649 #ifde‡
__USE_GNU


650 
	#NI_IDN
 32

	)

651 
	#NI_IDN_ALLOW_UNASSIGNED
 64

	)

653 
	#NI_IDN_USE_STD3_ASCII_RULES
 128

	)

662 
	`gëaddröfo
 (c⁄° *
__ª°ri˘
 
__«me
,

663 c⁄° *
__ª°ri˘
 
__£rvi˚
,

664 c⁄° 
addröfo
 *
__ª°ri˘
 
__ªq
,

665 
addröfo
 **
__ª°ri˘
 
__∑i
);

668 
	$‰ìaddröfo
 (
addröfo
 *
__ai
Ë
__THROW
;

671 c⁄° *
	$gai_°ªº‹
 (
__ecode
Ë
__THROW
;

677 
	`gë«meöfo
 (c⁄° 
sockaddr
 *
__ª°ri˘
 
__ß
,

678 
sockÀn_t
 
__ßÀn
, *
__ª°ri˘
 
__ho°
,

679 
sockÀn_t
 
__ho°Àn
, *
__ª°ri˘
 
__£rv
,

680 
sockÀn_t
 
__£rvÀn
, 
__Êags
);

683 #ifde‡
__USE_GNU


692 
	`gëaddröfo_a
 (
__mode
, 
gaicb
 *
__li°
[
__ª°ri˘_¨r
],

693 
__ít
, 
sigevít
 *
__ª°ri˘
 
__sig
);

703 
	`gai_su•íd
 (c⁄° 
gaicb
 *c⁄° 
__li°
[], 
__ít
,

704 c⁄° 
time•ec
 *
__timeout
);

707 
	$gai_îr‹
 (
gaicb
 *
__ªq
Ë
__THROW
;

710 
	$gai_ˇn˚l
 (
gaicb
 *
__gaicbp
Ë
__THROW
;

713 
__END_DECLS


	@/usr/include/netinet/in.h

18 #i‚def 
_NETINET_IN_H


19 
	#_NETINET_IN_H
 1

	)

21 
	~<„©uªs.h
>

22 
	~<°döt.h
>

23 
	~<sys/sockë.h
>

24 
	~<bôs/ty≥s.h
>

27 
__BEGIN_DECLS


30 
uöt32_t
 
	tö_addr_t
;

31 
	sö_addr


33 
ö_addr_t
 
	ms_addr
;

37 
	~<bôs/ö.h
>

42 
	mIPPROTO_IP
 = 0,

43 
	#IPPROTO_IP
 
IPPROTO_IP


	)

44 
	mIPPROTO_ICMP
 = 1,

45 
	#IPPROTO_ICMP
 
IPPROTO_ICMP


	)

46 
	mIPPROTO_IGMP
 = 2,

47 
	#IPPROTO_IGMP
 
IPPROTO_IGMP


	)

48 
	mIPPROTO_IPIP
 = 4,

49 
	#IPPROTO_IPIP
 
IPPROTO_IPIP


	)

50 
	mIPPROTO_TCP
 = 6,

51 
	#IPPROTO_TCP
 
IPPROTO_TCP


	)

52 
	mIPPROTO_EGP
 = 8,

53 
	#IPPROTO_EGP
 
IPPROTO_EGP


	)

54 
	mIPPROTO_PUP
 = 12,

55 
	#IPPROTO_PUP
 
IPPROTO_PUP


	)

56 
	mIPPROTO_UDP
 = 17,

57 
	#IPPROTO_UDP
 
IPPROTO_UDP


	)

58 
	mIPPROTO_IDP
 = 22,

59 
	#IPPROTO_IDP
 
IPPROTO_IDP


	)

60 
	mIPPROTO_TP
 = 29,

61 
	#IPPROTO_TP
 
IPPROTO_TP


	)

62 
	mIPPROTO_DCCP
 = 33,

63 
	#IPPROTO_DCCP
 
IPPROTO_DCCP


	)

64 
	mIPPROTO_IPV6
 = 41,

65 
	#IPPROTO_IPV6
 
IPPROTO_IPV6


	)

66 
	mIPPROTO_RSVP
 = 46,

67 
	#IPPROTO_RSVP
 
IPPROTO_RSVP


	)

68 
	mIPPROTO_GRE
 = 47,

69 
	#IPPROTO_GRE
 
IPPROTO_GRE


	)

70 
	mIPPROTO_ESP
 = 50,

71 
	#IPPROTO_ESP
 
IPPROTO_ESP


	)

72 
	mIPPROTO_AH
 = 51,

73 
	#IPPROTO_AH
 
IPPROTO_AH


	)

74 
	mIPPROTO_MTP
 = 92,

75 
	#IPPROTO_MTP
 
IPPROTO_MTP


	)

76 
	mIPPROTO_BEETPH
 = 94,

77 
	#IPPROTO_BEETPH
 
IPPROTO_BEETPH


	)

78 
	mIPPROTO_ENCAP
 = 98,

79 
	#IPPROTO_ENCAP
 
IPPROTO_ENCAP


	)

80 
	mIPPROTO_PIM
 = 103,

81 
	#IPPROTO_PIM
 
IPPROTO_PIM


	)

82 
	mIPPROTO_COMP
 = 108,

83 
	#IPPROTO_COMP
 
IPPROTO_COMP


	)

84 
	mIPPROTO_SCTP
 = 132,

85 
	#IPPROTO_SCTP
 
IPPROTO_SCTP


	)

86 
	mIPPROTO_UDPLITE
 = 136,

87 
	#IPPROTO_UDPLITE
 
IPPROTO_UDPLITE


	)

88 
	mIPPROTO_MPLS
 = 137,

89 
	#IPPROTO_MPLS
 
IPPROTO_MPLS


	)

90 
	mIPPROTO_RAW
 = 255,

91 
	#IPPROTO_RAW
 
IPPROTO_RAW


	)

92 
	mIPPROTO_MAX


98 #i‚de‡
__USE_KERNEL_IPV6_DEFS


101 
	mIPPROTO_HOPOPTS
 = 0,

102 
	#IPPROTO_HOPOPTS
 
IPPROTO_HOPOPTS


	)

103 
	mIPPROTO_ROUTING
 = 43,

104 
	#IPPROTO_ROUTING
 
IPPROTO_ROUTING


	)

105 
	mIPPROTO_FRAGMENT
 = 44,

106 
	#IPPROTO_FRAGMENT
 
IPPROTO_FRAGMENT


	)

107 
	mIPPROTO_ICMPV6
 = 58,

108 
	#IPPROTO_ICMPV6
 
IPPROTO_ICMPV6


	)

109 
	mIPPROTO_NONE
 = 59,

110 
	#IPPROTO_NONE
 
IPPROTO_NONE


	)

111 
	mIPPROTO_DSTOPTS
 = 60,

112 
	#IPPROTO_DSTOPTS
 
IPPROTO_DSTOPTS


	)

113 
	mIPPROTO_MH
 = 135

114 
	#IPPROTO_MH
 
IPPROTO_MH


	)

119 
uöt16_t
 
	tö_p‹t_t
;

124 
	mIPPORT_ECHO
 = 7,

125 
	mIPPORT_DISCARD
 = 9,

126 
	mIPPORT_SYSTAT
 = 11,

127 
	mIPPORT_DAYTIME
 = 13,

128 
	mIPPORT_NETSTAT
 = 15,

129 
	mIPPORT_FTP
 = 21,

130 
	mIPPORT_TELNET
 = 23,

131 
	mIPPORT_SMTP
 = 25,

132 
	mIPPORT_TIMESERVER
 = 37,

133 
	mIPPORT_NAMESERVER
 = 42,

134 
	mIPPORT_WHOIS
 = 43,

135 
	mIPPORT_MTP
 = 57,

137 
	mIPPORT_TFTP
 = 69,

138 
	mIPPORT_RJE
 = 77,

139 
	mIPPORT_FINGER
 = 79,

140 
	mIPPORT_TTYLINK
 = 87,

141 
	mIPPORT_SUPDUP
 = 95,

144 
	mIPPORT_EXECSERVER
 = 512,

145 
	mIPPORT_LOGINSERVER
 = 513,

146 
	mIPPORT_CMDSERVER
 = 514,

147 
	mIPPORT_EFSSERVER
 = 520,

150 
	mIPPORT_BIFFUDP
 = 512,

151 
	mIPPORT_WHOSERVER
 = 513,

152 
	mIPPORT_ROUTESERVER
 = 520,

155 
	mIPPORT_RESERVED
 = 1024,

158 
	mIPPORT_USERRESERVED
 = 5000

166 
	#IN_CLASSA
(
a
Ë((((
ö_addr_t
)◊)Ë& 0x80000000Ë=0)

	)

167 
	#IN_CLASSA_NET
 0xff000000

	)

168 
	#IN_CLASSA_NSHIFT
 24

	)

169 
	#IN_CLASSA_HOST
 (0xfffffff‡& ~
IN_CLASSA_NET
)

	)

170 
	#IN_CLASSA_MAX
 128

	)

172 
	#IN_CLASSB
(
a
Ë((((
ö_addr_t
)◊)Ë& 0xc0000000Ë=0x80000000)

	)

173 
	#IN_CLASSB_NET
 0xffff0000

	)

174 
	#IN_CLASSB_NSHIFT
 16

	)

175 
	#IN_CLASSB_HOST
 (0xfffffff‡& ~
IN_CLASSB_NET
)

	)

176 
	#IN_CLASSB_MAX
 65536

	)

178 
	#IN_CLASSC
(
a
Ë((((
ö_addr_t
)◊)Ë& 0xe0000000Ë=0xc0000000)

	)

179 
	#IN_CLASSC_NET
 0xffffff00

	)

180 
	#IN_CLASSC_NSHIFT
 8

	)

181 
	#IN_CLASSC_HOST
 (0xfffffff‡& ~
IN_CLASSC_NET
)

	)

183 
	#IN_CLASSD
(
a
Ë((((
ö_addr_t
)◊)Ë& 0xf0000000Ë=0xe0000000)

	)

184 
	#IN_MULTICAST
(
a
Ë
	`IN_CLASSD
◊)

	)

186 
	#IN_EXPERIMENTAL
(
a
Ë((((
ö_addr_t
)◊)Ë& 0xe0000000Ë=0xe0000000)

	)

187 
	#IN_BADCLASS
(
a
Ë((((
ö_addr_t
)◊)Ë& 0xf0000000Ë=0xf0000000)

	)

190 
	#INADDR_ANY
 ((
ö_addr_t
Ë0x00000000)

	)

192 
	#INADDR_BROADCAST
 ((
ö_addr_t
Ë0xffffffff)

	)

194 
	#INADDR_NONE
 ((
ö_addr_t
Ë0xffffffff)

	)

197 
	#IN_LOOPBACKNET
 127

	)

199 #i‚de‡
INADDR_LOOPBACK


200 
	#INADDR_LOOPBACK
 ((
ö_addr_t
Ë0x7f000001Ë

	)

204 
	#INADDR_UNSPEC_GROUP
 ((
ö_addr_t
Ë0xe0000000Ë

	)

205 
	#INADDR_ALLHOSTS_GROUP
 ((
ö_addr_t
Ë0xe0000001Ë

	)

206 
	#INADDR_ALLRTRS_GROUP
 ((
ö_addr_t
Ë0xe0000002Ë

	)

207 
	#INADDR_MAX_LOCAL_GROUP
 ((
ö_addr_t
Ë0xe00000ffË

	)

209 #i‚de‡
__USE_KERNEL_IPV6_DEFS


211 
	sö6_addr


215 
uöt8_t
 
	m__u6_addr8
[16];

216 #ifde‡
__USE_MISC


217 
uöt16_t
 
	m__u6_addr16
[8];

218 
uöt32_t
 
	m__u6_addr32
[4];

220 } 
	m__ö6_u
;

221 
	#s6_addr
 
__ö6_u
.
__u6_addr8


	)

222 #ifde‡
__USE_MISC


223 
	#s6_addr16
 
__ö6_u
.
__u6_addr16


	)

224 
	#s6_addr32
 
__ö6_u
.
__u6_addr32


	)

229 c⁄° 
ö6_addr
 
ö6addr_™y
;

230 c⁄° 
ö6_addr
 
ö6addr_lo›back
;

231 
	#IN6ADDR_ANY_INIT
 { { { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 } } }

	)

232 
	#IN6ADDR_LOOPBACK_INIT
 { { { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1 } } }

	)

234 
	#INET_ADDRSTRLEN
 16

	)

235 
	#INET6_ADDRSTRLEN
 46

	)

239 
	ssockaddr_ö


241 
__SOCKADDR_COMMON
 (
sö_
);

242 
ö_p‹t_t
 
	msö_p‹t
;

243 
ö_addr
 
	msö_addr
;

246 
	msö_zîo
[ (
sockaddr
) -

247 
__SOCKADDR_COMMON_SIZE
 -

248  (
ö_p‹t_t
) -

249  (
ö_addr
)];

252 #i‚de‡
__USE_KERNEL_IPV6_DEFS


254 
	ssockaddr_ö6


256 
__SOCKADDR_COMMON
 (
sö6_
);

257 
ö_p‹t_t
 
	msö6_p‹t
;

258 
uöt32_t
 
	msö6_Êowöfo
;

259 
ö6_addr
 
	msö6_addr
;

260 
uöt32_t
 
	msö6_sc›e_id
;

264 #ifde‡
__USE_MISC


266 
	sù_mªq


269 
ö_addr
 
	mimr_mu…üddr
;

272 
ö_addr
 
	mimr_öãrÁ˚
;

275 
	sù_mªq_sour˚


278 
ö_addr
 
	mimr_mu…üddr
;

281 
ö_addr
 
	mimr_öãrÁ˚
;

284 
ö_addr
 
	mimr_sour˚addr
;

288 #i‚de‡
__USE_KERNEL_IPV6_DEFS


290 
	sùv6_mªq


293 
ö6_addr
 
	mùv6mr_mu…üddr
;

296 
	mùv6mr_öãrÁ˚
;

300 #ifde‡
__USE_MISC


302 
	sgroup_ªq


305 
uöt32_t
 
	mgr_öãrÁ˚
;

308 
sockaddr_°‹age
 
	mgr_group
;

311 
	sgroup_sour˚_ªq


314 
uöt32_t
 
	mg§_öãrÁ˚
;

317 
sockaddr_°‹age
 
	mg§_group
;

320 
sockaddr_°‹age
 
	mg§_sour˚
;

325 
	sù_msfûãr


328 
ö_addr
 
	mimsf_mu…üddr
;

331 
ö_addr
 
	mimsf_öãrÁ˚
;

334 
uöt32_t
 
	mimsf_fmode
;

337 
uöt32_t
 
	mimsf_num§c
;

339 
ö_addr
 
	mimsf_¶i°
[1];

342 
	#IP_MSFILTER_SIZE
(
num§c
Ë( (
ù_msfûãr
) \

343 -  (
ö_addr
) \

344 + (
num§c
Ë*  (
ö_addr
))

	)

346 
	sgroup_fûãr


349 
uöt32_t
 
	mgf_öãrÁ˚
;

352 
sockaddr_°‹age
 
	mgf_group
;

355 
uöt32_t
 
	mgf_fmode
;

358 
uöt32_t
 
	mgf_num§c
;

360 
sockaddr_°‹age
 
	mgf_¶i°
[1];

363 
	#GROUP_FILTER_SIZE
(
num§c
Ë( (
group_fûãr
) \

364 -  (
sockaddr_°‹age
) \

365 + ((
num§c
) \

366 *  (
sockaddr_°‹age
)))

	)

376 
uöt32_t
 
	$¡ohl
 (
uöt32_t
 
__√é⁄g
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

377 
uöt16_t
 
	$¡ohs
 (
uöt16_t
 
__√tsh‹t
)

378 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

379 
uöt32_t
 
	$ht⁄l
 (
uöt32_t
 
__ho°l⁄g
)

380 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

381 
uöt16_t
 
	$ht⁄s
 (
uöt16_t
 
__ho°sh‹t
)

382 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

384 
	~<ídün.h
>

387 
	~<bôs/byãsw≠.h
>

389 #ifde‡
__OPTIMIZE__


393 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


396 
	#¡ohl
(
x
Ë(x)

	)

397 
	#¡ohs
(
x
Ë(x)

	)

398 
	#ht⁄l
(
x
Ë(x)

	)

399 
	#ht⁄s
(
x
Ë(x)

	)

401 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


402 
	#¡ohl
(
x
Ë
	`__bsw≠_32
 (x)

	)

403 
	#¡ohs
(
x
Ë
	`__bsw≠_16
 (x)

	)

404 
	#ht⁄l
(
x
Ë
	`__bsw≠_32
 (x)

	)

405 
	#ht⁄s
(
x
Ë
	`__bsw≠_16
 (x)

	)

410 #ifde‡
__GNUC__


411 
	#IN6_IS_ADDR_UNSPECIFIED
(
a
) \

412 (
__exãnsi⁄__
 \

413 ({ c⁄° 
ö6_addr
 *
__a
 = (c⁄° ö6_add∏*Ë(
a
); \

414 
__a
->
s6_addr32
[0] == 0 \

415 && 
__a
->
s6_addr32
[1] == 0 \

416 && 
__a
->
s6_addr32
[2] == 0 \

417 && 
__a
->
s6_addr32
[3] =0; 
	}
}))

	)

419 
	#IN6_IS_ADDR_LOOPBACK
(
a
) \

420 (
__exãnsi⁄__
 \

421 ({ c⁄° 
ö6_addr
 *
__a
 = (c⁄° ö6_add∏*Ë(
a
); \

422 
__a
->
s6_addr32
[0] == 0 \

423 && 
__a
->
s6_addr32
[1] == 0 \

424 && 
__a
->
s6_addr32
[2] == 0 \

425 && 
__a
->
s6_addr32
[3] =
	`ht⁄l
 (1); }))

	)

427 
	#IN6_IS_ADDR_LINKLOCAL
(
a
) \

428 (
__exãnsi⁄__
 \

429 ({ c⁄° 
ö6_addr
 *
__a
 = (c⁄° ö6_add∏*Ë(
a
); \

430 (
__a
->
s6_addr32
[0] & 
	`ht⁄l
 (0xffc00000)Ë=ht⁄»(0x„800000); }))

	)

432 
	#IN6_IS_ADDR_SITELOCAL
(
a
) \

433 (
__exãnsi⁄__
 \

434 ({ c⁄° 
ö6_addr
 *
__a
 = (c⁄° ö6_add∏*Ë(
a
); \

435 (
__a
->
s6_addr32
[0] & 
	`ht⁄l
 (0xffc00000)Ë=ht⁄»(0x„c00000); }))

	)

437 
	#IN6_IS_ADDR_V4MAPPED
(
a
) \

438 (
__exãnsi⁄__
 \

439 ({ c⁄° 
ö6_addr
 *
__a
 = (c⁄° ö6_add∏*Ë(
a
); \

440 
__a
->
s6_addr32
[0] == 0 \

441 && 
__a
->
s6_addr32
[1] == 0 \

442 && 
__a
->
s6_addr32
[2] =
	`ht⁄l
 (0xffff); }))

	)

444 
	#IN6_IS_ADDR_V4COMPAT
(
a
) \

445 (
__exãnsi⁄__
 \

446 ({ c⁄° 
ö6_addr
 *
__a
 = (c⁄° ö6_add∏*Ë(
a
); \

447 
__a
->
s6_addr32
[0] == 0 \

448 && 
__a
->
s6_addr32
[1] == 0 \

449 && 
__a
->
s6_addr32
[2] == 0 \

450 && 
	`¡ohl
 (
__a
->
s6_addr32
[3]Ë> 1; }))

	)

452 
	#IN6_ARE_ADDR_EQUAL
(
a
,
b
) \

453 (
__exãnsi⁄__
 \

454 ({ c⁄° 
ö6_addr
 *
__a
 = (c⁄° ö6_add∏*Ë(
a
); \

455 c⁄° 
ö6_addr
 *
__b
 = (c⁄° ö6_add∏*Ë(
b
); \

456 
__a
->
s6_addr32
[0] =
__b
->s6_addr32[0] \

457 && 
__a
->
s6_addr32
[1] =
__b
->s6_addr32[1] \

458 && 
__a
->
s6_addr32
[2] =
__b
->s6_addr32[2] \

459 && 
__a
->
s6_addr32
[3] =
__b
->s6_addr32[3]; }))

	)

461 
	#IN6_IS_ADDR_UNSPECIFIED
(
a
) \

462 (((c⁄° 
uöt32_t
 *Ë(
a
))[0] == 0 \

463 && ((c⁄° 
uöt32_t
 *Ë(
a
))[1] == 0 \

464 && ((c⁄° 
uöt32_t
 *Ë(
a
))[2] == 0 \

465 && ((c⁄° 
uöt32_t
 *Ë(
a
))[3] =0)

	)

467 
	#IN6_IS_ADDR_LOOPBACK
(
a
) \

468 (((c⁄° 
uöt32_t
 *Ë(
a
))[0] == 0 \

469 && ((c⁄° 
uöt32_t
 *Ë(
a
))[1] == 0 \

470 && ((c⁄° 
uöt32_t
 *Ë(
a
))[2] == 0 \

471 && ((c⁄° 
uöt32_t
 *Ë(
a
))[3] =
	`ht⁄l
 (1))

	)

473 
	#IN6_IS_ADDR_LINKLOCAL
(
a
) \

474 ((((c⁄° 
uöt32_t
 *Ë(
a
))[0] & 
	`ht⁄l
 (0xffc00000)) \

475 =
	`ht⁄l
 (0x„800000))

	)

477 
	#IN6_IS_ADDR_SITELOCAL
(
a
) \

478 ((((c⁄° 
uöt32_t
 *Ë(
a
))[0] & 
	`ht⁄l
 (0xffc00000)) \

479 =
	`ht⁄l
 (0x„c00000))

	)

481 
	#IN6_IS_ADDR_V4MAPPED
(
a
) \

482 ((((c⁄° 
uöt32_t
 *Ë(
a
))[0] == 0) \

483 && (((c⁄° 
uöt32_t
 *Ë(
a
))[1] == 0) \

484 && (((c⁄° 
uöt32_t
 *Ë(
a
))[2] =
	`ht⁄l
 (0xffff)))

	)

486 
	#IN6_IS_ADDR_V4COMPAT
(
a
) \

487 ((((c⁄° 
uöt32_t
 *Ë(
a
))[0] == 0) \

488 && (((c⁄° 
uöt32_t
 *Ë(
a
))[1] == 0) \

489 && (((c⁄° 
uöt32_t
 *Ë(
a
))[2] == 0) \

490 && (
	`¡ohl
 (((c⁄° 
uöt32_t
 *Ë(
a
))[3]Ë> 1))

	)

492 
	#IN6_ARE_ADDR_EQUAL
(
a
,
b
) \

493 ((((c⁄° 
uöt32_t
 *Ë(
a
))[0] =((c⁄° uöt32_à*Ë(
b
))[0]) \

494 && (((c⁄° 
uöt32_t
 *Ë(
a
))[1] =((c⁄° uöt32_à*Ë(
b
))[1]) \

495 && (((c⁄° 
uöt32_t
 *Ë(
a
))[2] =((c⁄° uöt32_à*Ë(
b
))[2]) \

496 && (((c⁄° 
uöt32_t
 *Ë(
a
))[3] =((c⁄° uöt32_à*Ë(
b
))[3]))

	)

499 
	#IN6_IS_ADDR_MULTICAST
(
a
Ë(((c⁄° 
uöt8_t
 *Ë◊))[0] =0xff)

	)

501 #ifde‡
__USE_MISC


503 
	$bödªsvp‹t
 (
__sockfd
, 
sockaddr_ö
 *
__sock_ö
Ë
__THROW
;

506 
	$bödªsvp‹t6
 (
__sockfd
, 
sockaddr_ö6
 *
__sock_ö
)

507 
__THROW
;

511 
	#IN6_IS_ADDR_MC_NODELOCAL
(
a
) \

512 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

513 && ((((c⁄° 
uöt8_t
 *Ë(
a
))[1] & 0xfË=0x1))

	)

515 
	#IN6_IS_ADDR_MC_LINKLOCAL
(
a
) \

516 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

517 && ((((c⁄° 
uöt8_t
 *Ë(
a
))[1] & 0xfË=0x2))

	)

519 
	#IN6_IS_ADDR_MC_SITELOCAL
(
a
) \

520 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

521 && ((((c⁄° 
uöt8_t
 *Ë(
a
))[1] & 0xfË=0x5))

	)

523 
	#IN6_IS_ADDR_MC_ORGLOCAL
(
a
) \

524 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

525 && ((((c⁄° 
uöt8_t
 *Ë(
a
))[1] & 0xfË=0x8))

	)

527 
	#IN6_IS_ADDR_MC_GLOBAL
(
a
) \

528 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

529 && ((((c⁄° 
uöt8_t
 *Ë(
a
))[1] & 0xfË=0xe))

	)

532 #ifde‡
__USE_GNU


533 
cmsghdr
;

535 #i‚de‡
__USE_KERNEL_IPV6_DEFS


537 
	sö6_pktöfo


539 
ö6_addr
 
ùi6_addr
;

540 
ùi6_ifödex
;

544 
	sù6_mtuöfo


546 
sockaddr_ö6
 
ù6m_addr
;

547 
uöt32_t
 
ù6m_mtu
;

552 
	$öë6_›ti⁄_•a˚
 (
__nbyãs
)

553 
__THROW
 
__©åibuã_dïªˇãd__
;

554 
	$öë6_›ti⁄_öô
 (*
__bp
, 
cmsghdr
 **
__cmsgp
,

555 
__ty≥
Ë
__THROW
 
__©åibuã_dïªˇãd__
;

556 
	$öë6_›ti⁄_≠≥nd
 (
cmsghdr
 *
__cmsg
,

557 c⁄° 
uöt8_t
 *
__ty≥p
, 
__mu…x
,

558 
__∂usy
Ë
__THROW
 
__©åibuã_dïªˇãd__
;

559 
uöt8_t
 *
	$öë6_›ti⁄_Æloc
 (
cmsghdr
 *
__cmsg
, 
__d©Æí
,

560 
__mu…x
, 
__∂usy
)

561 
__THROW
 
__©åibuã_dïªˇãd__
;

562 
	$öë6_›ti⁄_√xt
 (c⁄° 
cmsghdr
 *
__cmsg
,

563 
uöt8_t
 **
__çåp
)

564 
__THROW
 
__©åibuã_dïªˇãd__
;

565 
	$öë6_›ti⁄_föd
 (c⁄° 
cmsghdr
 *
__cmsg
,

566 
uöt8_t
 **
__çåp
, 
__ty≥
)

567 
__THROW
 
__©åibuã_dïªˇãd__
;

571 
	$öë6_›t_öô
 (*
__extbuf
, 
sockÀn_t
 
__exéí
Ë
__THROW
;

572 
	$öë6_›t_≠≥nd
 (*
__extbuf
, 
sockÀn_t
 
__exéí
, 
__off£t
,

573 
uöt8_t
 
__ty≥
, 
sockÀn_t
 
__Àn
, uöt8_à
__Æign
,

574 **
__d©abuÂ
Ë
__THROW
;

575 
	$öë6_›t_föish
 (*
__extbuf
, 
sockÀn_t
 
__exéí
, 
__off£t
)

576 
__THROW
;

577 
	$öë6_›t_£t_vÆ
 (*
__d©abuf
, 
__off£t
, *
__vÆ
,

578 
sockÀn_t
 
__vÆÀn
Ë
__THROW
;

579 
	$öë6_›t_√xt
 (*
__extbuf
, 
sockÀn_t
 
__exéí
, 
__off£t
,

580 
uöt8_t
 *
__ty≥p
, 
sockÀn_t
 *
__À≈
,

581 **
__d©abuÂ
Ë
__THROW
;

582 
	$öë6_›t_föd
 (*
__extbuf
, 
sockÀn_t
 
__exéí
, 
__off£t
,

583 
uöt8_t
 
__ty≥
, 
sockÀn_t
 *
__À≈
,

584 **
__d©abuÂ
Ë
__THROW
;

585 
	$öë6_›t_gë_vÆ
 (*
__d©abuf
, 
__off£t
, *
__vÆ
,

586 
sockÀn_t
 
__vÆÀn
Ë
__THROW
;

590 
sockÀn_t
 
	$öë6_πh_•a˚
 (
__ty≥
, 
__£gmíts
Ë
__THROW
;

591 *
	$öë6_πh_öô
 (*
__bp
, 
sockÀn_t
 
__bp_Àn
, 
__ty≥
,

592 
__£gmíts
Ë
__THROW
;

593 
	$öë6_πh_add
 (*
__bp
, c⁄° 
ö6_addr
 *
__addr
Ë
__THROW
;

594 
	$öë6_πh_ªvî£
 (c⁄° *
__ö
, *
__out
Ë
__THROW
;

595 
	$öë6_πh_£gmíts
 (c⁄° *
__bp
Ë
__THROW
;

596 
ö6_addr
 *
	$öë6_πh_gëaddr
 (c⁄° *
__bp
, 
__ödex
)

597 
__THROW
;

603 
	$gëùv4sour˚fûãr
 (
__s
, 
ö_addr
 
__öãrÁ˚_addr
,

604 
ö_addr
 
__group
, 
uöt32_t
 *
__fmode
,

605 
uöt32_t
 *
__num§c
, 
ö_addr
 *
__¶i°
)

606 
__THROW
;

609 
	$£tùv4sour˚fûãr
 (
__s
, 
ö_addr
 
__öãrÁ˚_addr
,

610 
ö_addr
 
__group
, 
uöt32_t
 
__fmode
,

611 
uöt32_t
 
__num§c
,

612 c⁄° 
ö_addr
 *
__¶i°
)

613 
__THROW
;

617 
	$gësour˚fûãr
 (
__s
, 
uöt32_t
 
__öãrÁ˚_addr
,

618 c⁄° 
sockaddr
 *
__group
,

619 
sockÀn_t
 
__grou∂í
, 
uöt32_t
 *
__fmode
,

620 
uöt32_t
 *
__num§c
,

621 
sockaddr_°‹age
 *
__¶i°
Ë
__THROW
;

624 
	$£tsour˚fûãr
 (
__s
, 
uöt32_t
 
__öãrÁ˚_addr
,

625 c⁄° 
sockaddr
 *
__group
,

626 
sockÀn_t
 
__grou∂í
, 
uöt32_t
 
__fmode
,

627 
uöt32_t
 
__num§c
,

628 c⁄° 
sockaddr_°‹age
 *
__¶i°
Ë
__THROW
;

631 
__END_DECLS


	@/usr/include/pthread.h

18 #i‚de‡
_PTHREAD_H


19 
	#_PTHREAD_H
 1

	)

21 
	~<„©uªs.h
>

22 
	~<ídün.h
>

23 
	~<sched.h
>

24 
	~<time.h
>

26 
	~<bôs/±hªadty≥s.h
>

27 
	~<bôs/£tjmp.h
>

28 
	~<bôs/w‹dsize.h
>

34 
	mPTHREAD_CREATE_JOINABLE
,

35 
	#PTHREAD_CREATE_JOINABLE
 
PTHREAD_CREATE_JOINABLE


	)

36 
	mPTHREAD_CREATE_DETACHED


37 
	#PTHREAD_CREATE_DETACHED
 
PTHREAD_CREATE_DETACHED


	)

44 
	mPTHREAD_MUTEX_TIMED_NP
,

45 
	mPTHREAD_MUTEX_RECURSIVE_NP
,

46 
	mPTHREAD_MUTEX_ERRORCHECK_NP
,

47 
	mPTHREAD_MUTEX_ADAPTIVE_NP


48 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K8


50 
	mPTHREAD_MUTEX_NORMAL
 = 
PTHREAD_MUTEX_TIMED_NP
,

51 
	mPTHREAD_MUTEX_RECURSIVE
 = 
PTHREAD_MUTEX_RECURSIVE_NP
,

52 
	mPTHREAD_MUTEX_ERRORCHECK
 = 
PTHREAD_MUTEX_ERRORCHECK_NP
,

53 
	mPTHREAD_MUTEX_DEFAULT
 = 
PTHREAD_MUTEX_NORMAL


55 #ifde‡
__USE_GNU


57 , 
	mPTHREAD_MUTEX_FAST_NP
 = 
PTHREAD_MUTEX_TIMED_NP


62 #ifde‡
__USE_XOPEN2K


66 
	mPTHREAD_MUTEX_STALLED
,

67 
	mPTHREAD_MUTEX_STALLED_NP
 = 
PTHREAD_MUTEX_STALLED
,

68 
	mPTHREAD_MUTEX_ROBUST
,

69 
	mPTHREAD_MUTEX_ROBUST_NP
 = 
PTHREAD_MUTEX_ROBUST


74 #i‡
deföed
 
__USE_POSIX199506
 || deföed 
__USE_UNIX98


78 
	mPTHREAD_PRIO_NONE
,

79 
	mPTHREAD_PRIO_INHERIT
,

80 
	mPTHREAD_PRIO_PROTECT


85 #ifde‡
__PTHREAD_MUTEX_HAVE_PREV


86 
	#PTHREAD_MUTEX_INITIALIZER
 \

87 { { 0, 0, 0, 0, 0, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

88 #ifde‡
__USE_GNU


89 
	#PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
 \

90 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_RECURSIVE_NP
, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

91 
	#PTHREAD_ERRORCHECK_MUTEX_INITIALIZER_NP
 \

92 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_ERRORCHECK_NP
, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

93 
	#PTHREAD_ADAPTIVE_MUTEX_INITIALIZER_NP
 \

94 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_ADAPTIVE_NP
, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

98 
	#PTHREAD_MUTEX_INITIALIZER
 \

99 { { 0, 0, 0, 0, 0, { 
__PTHREAD_SPINS
 } } }

	)

100 #ifde‡
__USE_GNU


101 
	#PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
 \

102 { { 0, 0, 0, 
PTHREAD_MUTEX_RECURSIVE_NP
, 0, { 
__PTHREAD_SPINS
 } } }

	)

103 
	#PTHREAD_ERRORCHECK_MUTEX_INITIALIZER_NP
 \

104 { { 0, 0, 0, 
PTHREAD_MUTEX_ERRORCHECK_NP
, 0, { 
__PTHREAD_SPINS
 } } }

	)

105 
	#PTHREAD_ADAPTIVE_MUTEX_INITIALIZER_NP
 \

106 { { 0, 0, 0, 
PTHREAD_MUTEX_ADAPTIVE_NP
, 0, { 
__PTHREAD_SPINS
 } } }

	)

113 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


116 
	mPTHREAD_RWLOCK_PREFER_READER_NP
,

117 
	mPTHREAD_RWLOCK_PREFER_WRITER_NP
,

118 
	mPTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
,

119 
	mPTHREAD_RWLOCK_DEFAULT_NP
 = 
PTHREAD_RWLOCK_PREFER_READER_NP


125 #i‚de‡
__PTHREAD_RWLOCK_INT_FLAGS_SHARED


126 #i‡
__WORDSIZE
 == 64

127 
	#__PTHREAD_RWLOCK_INT_FLAGS_SHARED
 1

	)

132 
	#PTHREAD_RWLOCK_INITIALIZER
 \

133 { { 0, 0, 0, 0, 0, 0, 0, 0, 
__PTHREAD_RWLOCK_ELISION_EXTRA
, 0, 0 } }

	)

134 #ifde‡
__USE_GNU


135 #ifde‡
__PTHREAD_RWLOCK_INT_FLAGS_SHARED


136 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

137 { { 0, 0, 0, 0, 0, 0, 0, 0, 
__PTHREAD_RWLOCK_ELISION_EXTRA
, 0, \

138 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
 } }

	)

140 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


141 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

142 { { 0, 0, 0, 0, 0, 0, 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
, \

143 0, 
__PTHREAD_RWLOCK_ELISION_EXTRA
, 0, 0 } }

	)

145 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

146 { { 0, 0, 0, 0, 0, 0, 0, 0, 0, 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
,\

147 0 } }

	)

157 
	mPTHREAD_INHERIT_SCHED
,

158 
	#PTHREAD_INHERIT_SCHED
 
PTHREAD_INHERIT_SCHED


	)

159 
	mPTHREAD_EXPLICIT_SCHED


160 
	#PTHREAD_EXPLICIT_SCHED
 
PTHREAD_EXPLICIT_SCHED


	)

167 
	mPTHREAD_SCOPE_SYSTEM
,

168 
	#PTHREAD_SCOPE_SYSTEM
 
PTHREAD_SCOPE_SYSTEM


	)

169 
	mPTHREAD_SCOPE_PROCESS


170 
	#PTHREAD_SCOPE_PROCESS
 
PTHREAD_SCOPE_PROCESS


	)

177 
	mPTHREAD_PROCESS_PRIVATE
,

178 
	#PTHREAD_PROCESS_PRIVATE
 
PTHREAD_PROCESS_PRIVATE


	)

179 
	mPTHREAD_PROCESS_SHARED


180 
	#PTHREAD_PROCESS_SHARED
 
PTHREAD_PROCESS_SHARED


	)

186 
	#PTHREAD_COND_INITIALIZER
 { { 0, 0, 0, 0, 0, (*Ë0, 0, 0 } }

	)

190 
	s_±hªad_˛ónup_buf„r


192 (*
	m__routöe
) (*);

193 *
	m__¨g
;

194 
	m__ˇn˚…y≥
;

195 
_±hªad_˛ónup_buf„r
 *
	m__¥ev
;

201 
	mPTHREAD_CANCEL_ENABLE
,

202 
	#PTHREAD_CANCEL_ENABLE
 
PTHREAD_CANCEL_ENABLE


	)

203 
	mPTHREAD_CANCEL_DISABLE


204 
	#PTHREAD_CANCEL_DISABLE
 
PTHREAD_CANCEL_DISABLE


	)

208 
	mPTHREAD_CANCEL_DEFERRED
,

209 
	#PTHREAD_CANCEL_DEFERRED
 
PTHREAD_CANCEL_DEFERRED


	)

210 
	mPTHREAD_CANCEL_ASYNCHRONOUS


211 
	#PTHREAD_CANCEL_ASYNCHRONOUS
 
PTHREAD_CANCEL_ASYNCHRONOUS


	)

213 
	#PTHREAD_CANCELED
 ((*Ë-1)

	)

217 
	#PTHREAD_ONCE_INIT
 0

	)

220 #ifde‡
__USE_XOPEN2K


224 
	#PTHREAD_BARRIER_SERIAL_THREAD
 -1

	)

228 
__BEGIN_DECLS


233 
	$±hªad_¸óã
 (
±hªad_t
 *
__ª°ri˘
 
__√wthªad
,

234 c⁄° 
±hªad_©å_t
 *
__ª°ri˘
 
__©å
,

235 *(*
__°¨t_routöe
) (*),

236 *
__ª°ri˘
 
__¨g
Ë
__THROWNL
 
	`__n⁄nuŒ
 ((1, 3));

242 
	$±hªad_exô
 (*
__ªtvÆ
Ë
	`__©åibuã__
 ((
__n‹ëu∫__
));

250 
	`±hªad_joö
 (
±hªad_t
 
__th
, **
__thªad_ªtu∫
);

252 #ifde‡
__USE_GNU


255 
	$±hªad_åyjoö_≈
 (
±hªad_t
 
__th
, **
__thªad_ªtu∫
Ë
__THROW
;

263 
	`±hªad_timedjoö_≈
 (
±hªad_t
 
__th
, **
__thªad_ªtu∫
,

264 c⁄° 
time•ec
 *
__ab°ime
);

271 
	$±hªad_dëach
 (
±hªad_t
 
__th
Ë
__THROW
;

275 
±hªad_t
 
	$±hªad_£lf
 (Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

278 
	$±hªad_equÆ
 (
±hªad_t
 
__thªad1
,Öthªad_à
__thªad2
)

279 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

287 
	$±hªad_©å_öô
 (
±hªad_©å_t
 *
__©å
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

290 
	$±hªad_©å_de°roy
 (
±hªad_©å_t
 *
__©å
)

291 
__THROW
 
	`__n⁄nuŒ
 ((1));

294 
	$±hªad_©å_gëdëach°©e
 (c⁄° 
±hªad_©å_t
 *
__©å
,

295 *
__dëach°©e
)

296 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

299 
	$±hªad_©å_£tdëach°©e
 (
±hªad_©å_t
 *
__©å
,

300 
__dëach°©e
)

301 
__THROW
 
	`__n⁄nuŒ
 ((1));

305 
	$±hªad_©å_gëgu¨dsize
 (c⁄° 
±hªad_©å_t
 *
__©å
,

306 
size_t
 *
__gu¨dsize
)

307 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

310 
	$±hªad_©å_£tgu¨dsize
 (
±hªad_©å_t
 *
__©å
,

311 
size_t
 
__gu¨dsize
)

312 
__THROW
 
	`__n⁄nuŒ
 ((1));

316 
	$±hªad_©å_gësched∑øm
 (c⁄° 
±hªad_©å_t
 *
__ª°ri˘
 
__©å
,

317 
sched_∑øm
 *
__ª°ri˘
 
__∑øm
)

318 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

321 
	$±hªad_©å_£tsched∑øm
 (
±hªad_©å_t
 *
__ª°ri˘
 
__©å
,

322 c⁄° 
sched_∑øm
 *
__ª°ri˘


323 
__∑øm
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

326 
	$±hªad_©å_gëschedpﬁicy
 (c⁄° 
±hªad_©å_t
 *
__ª°ri˘


327 
__©å
, *
__ª°ri˘
 
__pﬁicy
)

328 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

331 
	$±hªad_©å_£tschedpﬁicy
 (
±hªad_©å_t
 *
__©å
, 
__pﬁicy
)

332 
__THROW
 
	`__n⁄nuŒ
 ((1));

335 
	$±hªad_©å_gëöhîôsched
 (c⁄° 
±hªad_©å_t
 *
__ª°ri˘


336 
__©å
, *
__ª°ri˘
 
__öhîô
)

337 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

340 
	$±hªad_©å_£töhîôsched
 (
±hªad_©å_t
 *
__©å
,

341 
__öhîô
)

342 
__THROW
 
	`__n⁄nuŒ
 ((1));

346 
	$±hªad_©å_gësc›e
 (c⁄° 
±hªad_©å_t
 *
__ª°ri˘
 
__©å
,

347 *
__ª°ri˘
 
__sc›e
)

348 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

351 
	$±hªad_©å_£tsc›e
 (
±hªad_©å_t
 *
__©å
, 
__sc›e
)

352 
__THROW
 
	`__n⁄nuŒ
 ((1));

355 
	$±hªad_©å_gë°ackaddr
 (c⁄° 
±hªad_©å_t
 *
__ª°ri˘


356 
__©å
, **
__ª°ri˘
 
__°ackaddr
)

357 
__THROW
 
	`__n⁄nuŒ
 ((1, 2)Ë
__©åibuã_dïªˇãd__
;

363 
	$±hªad_©å_£t°ackaddr
 (
±hªad_©å_t
 *
__©å
,

364 *
__°ackaddr
)

365 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__©åibuã_dïªˇãd__
;

368 
	$±hªad_©å_gë°acksize
 (c⁄° 
±hªad_©å_t
 *
__ª°ri˘


369 
__©å
, 
size_t
 *
__ª°ri˘
 
__°acksize
)

370 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

375 
	$±hªad_©å_£t°acksize
 (
±hªad_©å_t
 *
__©å
,

376 
size_t
 
__°acksize
)

377 
__THROW
 
	`__n⁄nuŒ
 ((1));

379 #ifde‡
__USE_XOPEN2K


381 
	$±hªad_©å_gë°ack
 (c⁄° 
±hªad_©å_t
 *
__ª°ri˘
 
__©å
,

382 **
__ª°ri˘
 
__°ackaddr
,

383 
size_t
 *
__ª°ri˘
 
__°acksize
)

384 
__THROW
 
	`__n⁄nuŒ
 ((1, 2, 3));

389 
	$±hªad_©å_£t°ack
 (
±hªad_©å_t
 *
__©å
, *
__°ackaddr
,

390 
size_t
 
__°acksize
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

393 #ifde‡
__USE_GNU


396 
	$±hªad_©å_£èfföôy_≈
 (
±hªad_©å_t
 *
__©å
,

397 
size_t
 
__˝u£tsize
,

398 c⁄° 
˝u_£t_t
 *
__˝u£t
)

399 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

403 
	$±hªad_©å_gëafföôy_≈
 (c⁄° 
±hªad_©å_t
 *
__©å
,

404 
size_t
 
__˝u£tsize
,

405 
˝u_£t_t
 *
__˝u£t
)

406 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

409 
	$±hªad_gë©å_deÁu…_≈
 (
±hªad_©å_t
 *
__©å
)

410 
__THROW
 
	`__n⁄nuŒ
 ((1));

414 
	$±hªad_£èâr_deÁu…_≈
 (c⁄° 
±hªad_©å_t
 *
__©å
)

415 
__THROW
 
	`__n⁄nuŒ
 ((1));

420 
	$±hªad_gë©å_≈
 (
±hªad_t
 
__th
, 
±hªad_©å_t
 *
__©å
)

421 
__THROW
 
	`__n⁄nuŒ
 ((2));

429 
	$±hªad_£tsched∑øm
 (
±hªad_t
 
__èrgë_thªad
, 
__pﬁicy
,

430 c⁄° 
sched_∑øm
 *
__∑øm
)

431 
__THROW
 
	`__n⁄nuŒ
 ((3));

434 
	$±hªad_gësched∑øm
 (
±hªad_t
 
__èrgë_thªad
,

435 *
__ª°ri˘
 
__pﬁicy
,

436 
sched_∑øm
 *
__ª°ri˘
 
__∑øm
)

437 
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

440 
	$±hªad_£tsched¥io
 (
±hªad_t
 
__èrgë_thªad
, 
__¥io
)

441 
__THROW
;

444 #ifde‡
__USE_GNU


446 
	$±hªad_gë«me_≈
 (
±hªad_t
 
__èrgë_thªad
, *
__buf
,

447 
size_t
 
__buÊí
)

448 
__THROW
 
	`__n⁄nuŒ
 ((2));

451 
	$±hªad_£äame_≈
 (
±hªad_t
 
__èrgë_thªad
, c⁄° *
__«me
)

452 
__THROW
 
	`__n⁄nuŒ
 ((2));

456 #ifde‡
__USE_UNIX98


458 
	$±hªad_gëc⁄cuºícy
 (Ë
__THROW
;

461 
	$±hªad_£tc⁄cuºícy
 (
__Àvñ
Ë
__THROW
;

464 #ifde‡
__USE_GNU


469 
	$±hªad_yõld
 (Ë
__THROW
;

474 
	$±hªad_£èfföôy_≈
 (
±hªad_t
 
__th
, 
size_t
 
__˝u£tsize
,

475 c⁄° 
˝u_£t_t
 *
__˝u£t
)

476 
__THROW
 
	`__n⁄nuŒ
 ((3));

479 
	$±hªad_gëafföôy_≈
 (
±hªad_t
 
__th
, 
size_t
 
__˝u£tsize
,

480 
˝u_£t_t
 *
__˝u£t
)

481 
__THROW
 
	`__n⁄nuŒ
 ((3));

494 
	$±hªad_⁄˚
 (
±hªad_⁄˚_t
 *
__⁄˚_c⁄åﬁ
,

495 (*
__öô_routöe
Ë()Ë
	`__n⁄nuŒ
 ((1, 2));

506 
	`±hªad_£tˇn˚l°©e
 (
__°©e
, *
__ﬁd°©e
);

510 
	`±hªad_£tˇn˚…y≥
 (
__ty≥
, *
__ﬁdty≥
);

513 
	`±hªad_ˇn˚l
 (
±hªad_t
 
__th
);

518 
	`±hªad_ã°ˇn˚l
 ();

527 
__jmp_buf
 
__ˇn˚l_jmp_buf
;

528 
__mask_was_ßved
;

529 } 
__ˇn˚l_jmp_buf
[1];

530 *
__∑d
[4];

531 } 
	t__±hªad_unwöd_buf_t
 
	t__©åibuã__
 ((
	t__Æig√d__
));

534 #i‚de‡
__˛ónup_f˘_©åibuã


535 
	#__˛ónup_f˘_©åibuã


	)

540 
	s__±hªad_˛ónup_‰ame


542 (*
__ˇn˚l_routöe
) (*);

543 *
__ˇn˚l_¨g
;

544 
__do_ô
;

545 
__ˇn˚l_ty≥
;

548 #i‡
deföed
 
__GNUC__
 && deföed 
__EXCEPTIONS


549 #ifde‡
__˝lu•lus


551 ˛as†
	c__±hªad_˛ónup_˛ass


553 (*
__ˇn˚l_routöe
) (*);

554 *
__ˇn˚l_¨g
;

555 
__do_ô
;

556 
__ˇn˚l_ty≥
;

558 
public
:

559 
	$__±hªad_˛ónup_˛ass
 ((*
__f˘
Ë(*), *
__¨g
)

560 : 
	`__ˇn˚l_routöe
 (
__f˘
), 
	`__ˇn˚l_¨g
 (
__¨g
), 
	$__do_ô
 (1) { }

561 ~
	$__±hªad_˛ónup_˛ass
 (Ë{ i‡(
__do_ô
Ë
	`__ˇn˚l_routöe
 (
__ˇn˚l_¨g
); 
	}
}

562 
	$__£tdoô
 (
__√wvÆ
Ë{ 
__do_ô
 = __√wvÆ; 
	}
}

563 
	$__de„r
 (Ë{ 
	`±hªad_£tˇn˚…y≥
 (
PTHREAD_CANCEL_DEFERRED
,

564 &
__ˇn˚l_ty≥
); 
	}
}

565 
	$__ª°‹e
 (Ëc⁄° { 
	`±hªad_£tˇn˚…y≥
 (
__ˇn˚l_ty≥
, 0); 
	}
}

575 
	#±hªad_˛ónup_push
(
routöe
, 
¨g
) \

577 
__±hªad_˛ónup_˛ass
 
	`__˛‰ame
 (
routöe
, 
¨g
)

	)

581 
	#±hªad_˛ónup_p›
(
execuã
) \

582 
__˛‰ame
.
	`__£tdoô
 (
execuã
); \

583 } 0)

	)

585 #ifde‡
__USE_GNU


589 
	#±hªad_˛ónup_push_de„r_≈
(
routöe
, 
¨g
) \

591 
__±hªad_˛ónup_˛ass
 
	`__˛‰ame
 (
routöe
, 
¨g
); \

592 
__˛‰ame
.
	`__de„r
 ()

	)

597 
	#±hªad_˛ónup_p›_ª°‹e_≈
(
execuã
) \

598 
__˛‰ame
.
	`__ª°‹e
 (); \

599 
__˛‰ame
.
	`__£tdoô
 (
execuã
); \

600 } 0)

	)

607 
__exã∫_ölöe
 

608 
	$__±hªad_˛ónup_routöe
 (
__±hªad_˛ónup_‰ame
 *
__‰ame
)

610 i‡(
__‰ame
->
__do_ô
)

611 
__‰ame
->
	`__ˇn˚l_routöe
 (__‰ame->
__ˇn˚l_¨g
);

612 
	}
}

621 
	#±hªad_˛ónup_push
(
routöe
, 
¨g
) \

623 
__±hªad_˛ónup_‰ame
 
__˛‰ame
 \

624 
	`__©åibuã__
 ((
	`__˛ónup__
 (
__±hªad_˛ónup_routöe
))) \

625 { .
__ˇn˚l_routöe
 = (
routöe
), .
__ˇn˚l_¨g
 = (
¨g
), \

626 .
__do_ô
 = 1 };

	)

630 
	#±hªad_˛ónup_p›
(
execuã
) \

631 
__˛‰ame
.
__do_ô
 = (
execuã
); \

632 } 0)

	)

634 #ifde‡
__USE_GNU


638 
	#±hªad_˛ónup_push_de„r_≈
(
routöe
, 
¨g
) \

640 
__±hªad_˛ónup_‰ame
 
__˛‰ame
 \

641 
	`__©åibuã__
 ((
	`__˛ónup__
 (
__±hªad_˛ónup_routöe
))) \

642 { .
__ˇn˚l_routöe
 = (
routöe
), .
__ˇn˚l_¨g
 = (
¨g
), \

643 .
__do_ô
 = 1 }; \

644 (Ë
	`±hªad_£tˇn˚…y≥
 (
PTHREAD_CANCEL_DEFERRED
, \

645 &
__˛‰ame
.
__ˇn˚l_ty≥
)

	)

650 
	#±hªad_˛ónup_p›_ª°‹e_≈
(
execuã
) \

651 (Ë
	`±hªad_£tˇn˚…y≥
 (
__˛‰ame
.
__ˇn˚l_ty≥
, 
NULL
); \

652 
__˛‰ame
.
__do_ô
 = (
execuã
); \

653 } 0)

	)

664 
	#±hªad_˛ónup_push
(
routöe
, 
¨g
) \

666 
__±hªad_unwöd_buf_t
 
__ˇn˚l_buf
; \

667 (*
__ˇn˚l_routöe
Ë(*Ë(
routöe
); \

668 *
__ˇn˚l_¨g
 = (
¨g
); \

669 
__nŸ_fú°_ˇŒ
 = 
	`__sig£tjmp
 ((
__jmp_buf_èg
 *) (*) \

670 
__ˇn˚l_buf
.
__ˇn˚l_jmp_buf
, 0); \

671 i‡(
	`__glibc_u∆ikñy
 (
__nŸ_fú°_ˇŒ
)) \

673 
	`__ˇn˚l_routöe
 (
__ˇn˚l_¨g
); \

674 
	`__±hªad_unwöd_√xt
 (&
__ˇn˚l_buf
); \

678 
	`__±hªad_ªgi°î_ˇn˚l
 (&
__ˇn˚l_buf
); \

679 dÿ{

	)

680 
__±hªad_ªgi°î_ˇn˚l
 (
__±hªad_unwöd_buf_t
 *
__buf
)

681 
__˛ónup_f˘_©åibuã
;

685 
	#±hªad_˛ónup_p›
(
execuã
) \

688 
	`__±hªad_uƒegi°î_ˇn˚l
 (&
__ˇn˚l_buf
); \

689 i‡(
execuã
) \

690 
	`__ˇn˚l_routöe
 (
__ˇn˚l_¨g
); \

691 } 0)

	)

692 
	$__±hªad_uƒegi°î_ˇn˚l
 (
__±hªad_unwöd_buf_t
 *
__buf
)

693 
__˛ónup_f˘_©åibuã
;

695 #ifde‡
__USE_GNU


699 
	#±hªad_˛ónup_push_de„r_≈
(
routöe
, 
¨g
) \

701 
__±hªad_unwöd_buf_t
 
__ˇn˚l_buf
; \

702 (*
__ˇn˚l_routöe
Ë(*Ë(
routöe
); \

703 *
__ˇn˚l_¨g
 = (
¨g
); \

704 
__nŸ_fú°_ˇŒ
 = 
	`__sig£tjmp
 ((
__jmp_buf_èg
 *) (*) \

705 
__ˇn˚l_buf
.
__ˇn˚l_jmp_buf
, 0); \

706 i‡(
	`__glibc_u∆ikñy
 (
__nŸ_fú°_ˇŒ
)) \

708 
	`__ˇn˚l_routöe
 (
__ˇn˚l_¨g
); \

709 
	`__±hªad_unwöd_√xt
 (&
__ˇn˚l_buf
); \

713 
	`__±hªad_ªgi°î_ˇn˚l_de„r
 (&
__ˇn˚l_buf
); \

714 dÿ{

	)

715 
	`__±hªad_ªgi°î_ˇn˚l_de„r
 (
__±hªad_unwöd_buf_t
 *
__buf
)

716 
__˛ónup_f˘_©åibuã
;

721 
	#±hªad_˛ónup_p›_ª°‹e_≈
(
execuã
) \

724 
	`__±hªad_uƒegi°î_ˇn˚l_ª°‹e
 (&
__ˇn˚l_buf
); \

725 i‡(
execuã
) \

726 
	`__ˇn˚l_routöe
 (
__ˇn˚l_¨g
); \

727 
	}
} 0)

	)

728 
	$__±hªad_uƒegi°î_ˇn˚l_ª°‹e
 (
__±hªad_unwöd_buf_t
 *
__buf
)

729 
__˛ónup_f˘_©åibuã
;

733 
	$__±hªad_unwöd_√xt
 (
__±hªad_unwöd_buf_t
 *
__buf
)

734 
__˛ónup_f˘_©åibuã
 
	`__©åibuã__
 ((
__n‹ëu∫__
))

735 #i‚de‡
SHARED


736 
	`__©åibuã__
 ((
__wók__
))

742 
__jmp_buf_èg
;

743 
	$__sig£tjmp
 (
__jmp_buf_èg
 *
__ív
, 
__ßvemask
Ë
__THROWNL
;

749 
	$±hªad_muãx_öô
 (
±hªad_muãx_t
 *
__muãx
,

750 c⁄° 
±hªad_muãx©å_t
 *
__muãx©å
)

751 
__THROW
 
	`__n⁄nuŒ
 ((1));

754 
	$±hªad_muãx_de°roy
 (
±hªad_muãx_t
 *
__muãx
)

755 
__THROW
 
	`__n⁄nuŒ
 ((1));

758 
	$±hªad_muãx_åylock
 (
±hªad_muãx_t
 *
__muãx
)

759 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

762 
	$±hªad_muãx_lock
 (
±hªad_muãx_t
 *
__muãx
)

763 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

765 #ifde‡
__USE_XOPEN2K


767 
	$±hªad_muãx_timedlock
 (
±hªad_muãx_t
 *
__ª°ri˘
 
__muãx
,

768 c⁄° 
time•ec
 *
__ª°ri˘


769 
__ab°ime
Ë
__THROWNL
 
	`__n⁄nuŒ
 ((1, 2));

773 
	$±hªad_muãx_u∆ock
 (
±hªad_muãx_t
 *
__muãx
)

774 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

778 
	$±hªad_muãx_gë¥io˚ûög
 (c⁄° 
±hªad_muãx_t
 *

779 
__ª°ri˘
 
__muãx
,

780 *
__ª°ri˘
 
__¥io˚ûög
)

781 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

785 
	$±hªad_muãx_£çrio˚ûög
 (
±hªad_muãx_t
 *
__ª°ri˘
 
__muãx
,

786 
__¥io˚ûög
,

787 *
__ª°ri˘
 
__ﬁd_˚ûög
)

788 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

791 #ifde‡
__USE_XOPEN2K8


793 
	$±hªad_muãx_c⁄si°ít
 (
±hªad_muãx_t
 *
__muãx
)

794 
__THROW
 
	`__n⁄nuŒ
 ((1));

795 #ifde‡
__USE_GNU


796 
	$±hªad_muãx_c⁄si°ít_≈
 (
±hªad_muãx_t
 *
__muãx
)

797 
__THROW
 
	`__n⁄nuŒ
 ((1));

806 
	$±hªad_muãx©å_öô
 (
±hªad_muãx©å_t
 *
__©å
)

807 
__THROW
 
	`__n⁄nuŒ
 ((1));

810 
	$±hªad_muãx©å_de°roy
 (
±hªad_muãx©å_t
 *
__©å
)

811 
__THROW
 
	`__n⁄nuŒ
 ((1));

814 
	$±hªad_muãx©å_gëpsh¨ed
 (c⁄° 
±hªad_muãx©å_t
 *

815 
__ª°ri˘
 
__©å
,

816 *
__ª°ri˘
 
__psh¨ed
)

817 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

820 
	$±hªad_muãx©å_£çsh¨ed
 (
±hªad_muãx©å_t
 *
__©å
,

821 
__psh¨ed
)

822 
__THROW
 
	`__n⁄nuŒ
 ((1));

824 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K8


826 
	$±hªad_muãx©å_gëty≥
 (c⁄° 
±hªad_muãx©å_t
 *
__ª°ri˘


827 
__©å
, *
__ª°ri˘
 
__köd
)

828 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

833 
	$±hªad_muãx©å_£ây≥
 (
±hªad_muãx©å_t
 *
__©å
, 
__köd
)

834 
__THROW
 
	`__n⁄nuŒ
 ((1));

838 
	$±hªad_muãx©å_gë¥Ÿocﬁ
 (c⁄° 
±hªad_muãx©å_t
 *

839 
__ª°ri˘
 
__©å
,

840 *
__ª°ri˘
 
__¥Ÿocﬁ
)

841 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

845 
	$±hªad_muãx©å_£çrŸocﬁ
 (
±hªad_muãx©å_t
 *
__©å
,

846 
__¥Ÿocﬁ
)

847 
__THROW
 
	`__n⁄nuŒ
 ((1));

850 
	$±hªad_muãx©å_gë¥io˚ûög
 (c⁄° 
±hªad_muãx©å_t
 *

851 
__ª°ri˘
 
__©å
,

852 *
__ª°ri˘
 
__¥io˚ûög
)

853 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

856 
	$±hªad_muãx©å_£çrio˚ûög
 (
±hªad_muãx©å_t
 *
__©å
,

857 
__¥io˚ûög
)

858 
__THROW
 
	`__n⁄nuŒ
 ((1));

860 #ifde‡
__USE_XOPEN2K


862 
	$±hªad_muãx©å_gërobu°
 (c⁄° 
±hªad_muãx©å_t
 *
__©å
,

863 *
__robu°√ss
)

864 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

865 #ifde‡
__USE_GNU


866 
	$±hªad_muãx©å_gërobu°_≈
 (c⁄° 
±hªad_muãx©å_t
 *
__©å
,

867 *
__robu°√ss
)

868 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

872 
	$±hªad_muãx©å_£åobu°
 (
±hªad_muãx©å_t
 *
__©å
,

873 
__robu°√ss
)

874 
__THROW
 
	`__n⁄nuŒ
 ((1));

875 #ifde‡
__USE_GNU


876 
	$±hªad_muãx©å_£åobu°_≈
 (
±hªad_muãx©å_t
 *
__©å
,

877 
__robu°√ss
)

878 
__THROW
 
	`__n⁄nuŒ
 ((1));

883 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


888 
	$±hªad_rwlock_öô
 (
±hªad_rwlock_t
 *
__ª°ri˘
 
__rwlock
,

889 c⁄° 
±hªad_rwlock©å_t
 *
__ª°ri˘


890 
__©å
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

893 
	$±hªad_rwlock_de°roy
 (
±hªad_rwlock_t
 *
__rwlock
)

894 
__THROW
 
	`__n⁄nuŒ
 ((1));

897 
	$±hªad_rwlock_rdlock
 (
±hªad_rwlock_t
 *
__rwlock
)

898 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

901 
	$±hªad_rwlock_åyrdlock
 (
±hªad_rwlock_t
 *
__rwlock
)

902 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

904 #ifde‡
__USE_XOPEN2K


906 
	$±hªad_rwlock_timedrdlock
 (
±hªad_rwlock_t
 *
__ª°ri˘
 
__rwlock
,

907 c⁄° 
time•ec
 *
__ª°ri˘


908 
__ab°ime
Ë
__THROWNL
 
	`__n⁄nuŒ
 ((1, 2));

912 
	$±hªad_rwlock_wæock
 (
±hªad_rwlock_t
 *
__rwlock
)

913 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

916 
	$±hªad_rwlock_åywæock
 (
±hªad_rwlock_t
 *
__rwlock
)

917 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

919 #ifde‡
__USE_XOPEN2K


921 
	$±hªad_rwlock_timedwæock
 (
±hªad_rwlock_t
 *
__ª°ri˘
 
__rwlock
,

922 c⁄° 
time•ec
 *
__ª°ri˘


923 
__ab°ime
Ë
__THROWNL
 
	`__n⁄nuŒ
 ((1, 2));

927 
	$±hªad_rwlock_u∆ock
 (
±hªad_rwlock_t
 *
__rwlock
)

928 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

934 
	$±hªad_rwlock©å_öô
 (
±hªad_rwlock©å_t
 *
__©å
)

935 
__THROW
 
	`__n⁄nuŒ
 ((1));

938 
	$±hªad_rwlock©å_de°roy
 (
±hªad_rwlock©å_t
 *
__©å
)

939 
__THROW
 
	`__n⁄nuŒ
 ((1));

942 
	$±hªad_rwlock©å_gëpsh¨ed
 (c⁄° 
±hªad_rwlock©å_t
 *

943 
__ª°ri˘
 
__©å
,

944 *
__ª°ri˘
 
__psh¨ed
)

945 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

948 
	$±hªad_rwlock©å_£çsh¨ed
 (
±hªad_rwlock©å_t
 *
__©å
,

949 
__psh¨ed
)

950 
__THROW
 
	`__n⁄nuŒ
 ((1));

953 
	$±hªad_rwlock©å_gëköd_≈
 (c⁄° 
±hªad_rwlock©å_t
 *

954 
__ª°ri˘
 
__©å
,

955 *
__ª°ri˘
 
__¥ef
)

956 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

959 
	$±hªad_rwlock©å_£tköd_≈
 (
±hªad_rwlock©å_t
 *
__©å
,

960 
__¥ef
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

968 
	$±hªad_c⁄d_öô
 (
±hªad_c⁄d_t
 *
__ª°ri˘
 
__c⁄d
,

969 c⁄° 
±hªad_c⁄d©å_t
 *
__ª°ri˘
 
__c⁄d_©å
)

970 
__THROW
 
	`__n⁄nuŒ
 ((1));

973 
	$±hªad_c⁄d_de°roy
 (
±hªad_c⁄d_t
 *
__c⁄d
)

974 
__THROW
 
	`__n⁄nuŒ
 ((1));

977 
	$±hªad_c⁄d_sig«l
 (
±hªad_c⁄d_t
 *
__c⁄d
)

978 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

981 
	$±hªad_c⁄d_brﬂdˇ°
 (
±hªad_c⁄d_t
 *
__c⁄d
)

982 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

989 
	$±hªad_c⁄d_waô
 (
±hªad_c⁄d_t
 *
__ª°ri˘
 
__c⁄d
,

990 
±hªad_muãx_t
 *
__ª°ri˘
 
__muãx
)

991 
	`__n⁄nuŒ
 ((1, 2));

1000 
	$±hªad_c⁄d_timedwaô
 (
±hªad_c⁄d_t
 *
__ª°ri˘
 
__c⁄d
,

1001 
±hªad_muãx_t
 *
__ª°ri˘
 
__muãx
,

1002 c⁄° 
time•ec
 *
__ª°ri˘
 
__ab°ime
)

1003 
	`__n⁄nuŒ
 ((1, 2, 3));

1008 
	$±hªad_c⁄d©å_öô
 (
±hªad_c⁄d©å_t
 *
__©å
)

1009 
__THROW
 
	`__n⁄nuŒ
 ((1));

1012 
	$±hªad_c⁄d©å_de°roy
 (
±hªad_c⁄d©å_t
 *
__©å
)

1013 
__THROW
 
	`__n⁄nuŒ
 ((1));

1016 
	$±hªad_c⁄d©å_gëpsh¨ed
 (c⁄° 
±hªad_c⁄d©å_t
 *

1017 
__ª°ri˘
 
__©å
,

1018 *
__ª°ri˘
 
__psh¨ed
)

1019 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

1022 
	$±hªad_c⁄d©å_£çsh¨ed
 (
±hªad_c⁄d©å_t
 *
__©å
,

1023 
__psh¨ed
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

1025 #ifde‡
__USE_XOPEN2K


1027 
	$±hªad_c⁄d©å_gë˛ock
 (c⁄° 
±hªad_c⁄d©å_t
 *

1028 
__ª°ri˘
 
__©å
,

1029 
__˛ockid_t
 *
__ª°ri˘
 
__˛ock_id
)

1030 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

1033 
	$±hªad_c⁄d©å_£t˛ock
 (
±hªad_c⁄d©å_t
 *
__©å
,

1034 
__˛ockid_t
 
__˛ock_id
)

1035 
__THROW
 
	`__n⁄nuŒ
 ((1));

1039 #ifde‡
__USE_XOPEN2K


1044 
	$±hªad_•ö_öô
 (
±hªad_•ölock_t
 *
__lock
, 
__psh¨ed
)

1045 
__THROW
 
	`__n⁄nuŒ
 ((1));

1048 
	$±hªad_•ö_de°roy
 (
±hªad_•ölock_t
 *
__lock
)

1049 
__THROW
 
	`__n⁄nuŒ
 ((1));

1052 
	$±hªad_•ö_lock
 (
±hªad_•ölock_t
 *
__lock
)

1053 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

1056 
	$±hªad_•ö_åylock
 (
±hªad_•ölock_t
 *
__lock
)

1057 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

1060 
	$±hªad_•ö_u∆ock
 (
±hªad_•ölock_t
 *
__lock
)

1061 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

1068 
	$±hªad_b¨rõr_öô
 (
±hªad_b¨rõr_t
 *
__ª°ri˘
 
__b¨rõr
,

1069 c⁄° 
±hªad_b¨rõøâr_t
 *
__ª°ri˘


1070 
__©å
, 
__cou¡
)

1071 
__THROW
 
	`__n⁄nuŒ
 ((1));

1074 
	$±hªad_b¨rõr_de°roy
 (
±hªad_b¨rõr_t
 *
__b¨rõr
)

1075 
__THROW
 
	`__n⁄nuŒ
 ((1));

1078 
	$±hªad_b¨rõr_waô
 (
±hªad_b¨rõr_t
 *
__b¨rõr
)

1079 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

1083 
	$±hªad_b¨rõøâr_öô
 (
±hªad_b¨rõøâr_t
 *
__©å
)

1084 
__THROW
 
	`__n⁄nuŒ
 ((1));

1087 
	$±hªad_b¨rõøâr_de°roy
 (
±hªad_b¨rõøâr_t
 *
__©å
)

1088 
__THROW
 
	`__n⁄nuŒ
 ((1));

1091 
	$±hªad_b¨rõøâr_gëpsh¨ed
 (c⁄° 
±hªad_b¨rõøâr_t
 *

1092 
__ª°ri˘
 
__©å
,

1093 *
__ª°ri˘
 
__psh¨ed
)

1094 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

1097 
	$±hªad_b¨rõøâr_£çsh¨ed
 (
±hªad_b¨rõøâr_t
 *
__©å
,

1098 
__psh¨ed
)

1099 
__THROW
 
	`__n⁄nuŒ
 ((1));

1111 
	$±hªad_key_¸óã
 (
±hªad_key_t
 *
__key
,

1112 (*
__de°r_fun˘i⁄
) (*))

1113 
__THROW
 
	`__n⁄nuŒ
 ((1));

1116 
	$±hªad_key_dñëe
 (
±hªad_key_t
 
__key
Ë
__THROW
;

1119 *
	$±hªad_gë•ecific
 (
±hªad_key_t
 
__key
Ë
__THROW
;

1122 
	$±hªad_£t•ecific
 (
±hªad_key_t
 
__key
,

1123 c⁄° *
__poöãr
Ë
__THROW
 ;

1126 #ifde‡
__USE_XOPEN2K


1128 
	$±hªad_gë˝u˛ockid
 (
±hªad_t
 
__thªad_id
,

1129 
__˛ockid_t
 *
__˛ock_id
)

1130 
__THROW
 
	`__n⁄nuŒ
 ((2));

1145 
	$±hªad_©f‹k
 ((*
__¥ï¨e
) (),

1146 (*
__∑ª¡
) (),

1147 (*
__chûd
Ë()Ë
__THROW
;

1150 #ifde‡
__USE_EXTERN_INLINES


1152 
__exã∫_ölöe
 

1153 
	`__NTH
 (
	$±hªad_equÆ
 (
±hªad_t
 
__thªad1
,Öthªad_à
__thªad2
))

1155  
__thªad1
 =
__thªad2
;

1156 
	}
}

1159 
	g__END_DECLS


	@/usr/include/setjmp.h

22 #i‚def 
_SETJMP_H


23 
	#_SETJMP_H
 1

	)

25 
	~<„©uªs.h
>

27 
	g__BEGIN_DECLS


29 
	~<bôs/£tjmp.h
>

30 
	~<bôs/sig£t.h
>

34 
	s__jmp_buf_èg


40 
__jmp_buf
 
	m__jmpbuf
;

41 
	m__mask_was_ßved
;

42 
__sig£t_t
 
	m__ßved_mask
;

46 
__BEGIN_NAMESPACE_STD


48 
__jmp_buf_èg
 
	tjmp_buf
[1];

52 
	$£tjmp
 (
jmp_buf
 
__ív
Ë
__THROWNL
;

54 
__END_NAMESPACE_STD


59 
	$__sig£tjmp
 (
__jmp_buf_èg
 
__ív
[1], 
__ßvemask
Ë
__THROWNL
;

63 
	$_£tjmp
 (
__jmp_buf_èg
 
__ív
[1]Ë
__THROWNL
;

67 
	#£tjmp
(
ív
Ë
	`_£tjmp
 (ív)

	)

70 
__BEGIN_NAMESPACE_STD


74 
	$l⁄gjmp
 (
__jmp_buf_èg
 
__ív
[1], 
__vÆ
)

75 
__THROWNL
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

77 
__END_NAMESPACE_STD


79 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


83 
	$_l⁄gjmp
 (
__jmp_buf_èg
 
__ív
[1], 
__vÆ
)

84 
__THROWNL
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

88 #ifdef 
__USE_POSIX


92 
__jmp_buf_èg
 
	tsigjmp_buf
[1];

96 
	#sig£tjmp
(
ív
, 
ßvemask
Ë
	`__sig£tjmp
 (ív, savemask)

	)

102 
	$sigl⁄gjmp
 (
sigjmp_buf
 
__ív
, 
__vÆ
)

103 
__THROWNL
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

108 #i‡
__USE_FORTIFY_LEVEL
 > 0

109 
	~<bôs/£tjmp2.h
>

112 
__END_DECLS


	@/usr/include/signal.h

22 #i‚def 
_SIGNAL_H


24 #i‡!
deföed
 
__√ed_sig_©omic_t
 && !deföed 
__√ed_sig£t_t


25 
	#_SIGNAL_H


	)

28 
	~<„©uªs.h
>

30 
	g__BEGIN_DECLS


32 
	~<bôs/sig£t.h
>

36 #i‡
deföed
 
__√ed_sig_©omic_t
 || deföed 
_SIGNAL_H


37 #i‚de‡
__sig_©omic_t_deföed


38 
	#__sig_©omic_t_deföed


	)

39 
__BEGIN_NAMESPACE_STD


40 
__sig_©omic_t
 
	tsig_©omic_t
;

41 
	g__END_NAMESPACE_STD


43 #unde‡
__√ed_sig_©omic_t


46 #i‡
deföed
 
__√ed_sig£t_t
 || (deföed 
_SIGNAL_H
 && deföed 
__USE_POSIX
)

47 #i‚de‡
__sig£t_t_deföed


48 
	#__sig£t_t_deföed


	)

49 
__sig£t_t
 
	tsig£t_t
;

51 #unde‡
__√ed_sig£t_t


54 #ifde‡
_SIGNAL_H


56 
	~<bôs/ty≥s.h
>

57 
	~<bôs/signum.h
>

59 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K


60 #i‚de‡
__pid_t_deföed


61 
__pid_t
 
	tpid_t
;

62 
	#__pid_t_deföed


	)

64 #ifde‡
__USE_XOPEN


66 #i‚de‡
__uid_t_deföed


67 
__uid_t
 
	tuid_t
;

68 
	#__uid_t_deföed


	)

72 #ifde‡
__USE_POSIX199309


74 
	#__√ed_time•ec


	)

75 
	~<time.h
>

78 #i‡
deföed
 
__USE_POSIX199309
 || deföed 
__USE_XOPEN_EXTENDED


80 
	~<bôs/sigöfo.h
>

85 (*
	t__sigh™dÀr_t
) ();

90 
__sigh™dÀr_t
 
	$__sysv_sig«l
 (
__sig
, 
__sigh™dÀr_t
 
__h™dÀr
)

91 
__THROW
;

92 #ifde‡
__USE_GNU


93 
__sigh™dÀr_t
 
	$sysv_sig«l
 (
__sig
, 
__sigh™dÀr_t
 
__h™dÀr
)

94 
__THROW
;

100 
__BEGIN_NAMESPACE_STD


101 #ifde‡
__USE_MISC


102 
__sigh™dÀr_t
 
	$sig«l
 (
__sig
, 
__sigh™dÀr_t
 
__h™dÀr
)

103 
__THROW
;

106 #ifde‡
__REDIRECT_NTH


107 
__sigh™dÀr_t
 
	`__REDIRECT_NTH
 (
sig«l
,

108 (
__sig
, 
__sigh™dÀr_t
 
__h™dÀr
),

109 
__sysv_sig«l
);

111 
	#sig«l
 
__sysv_sig«l


	)

114 
__END_NAMESPACE_STD


116 #ifde‡
__USE_XOPEN


119 
__sigh™dÀr_t
 
	$bsd_sig«l
 (
__sig
, 
__sigh™dÀr_t
 
__h™dÀr
)

120 
__THROW
;

126 #ifde‡
__USE_POSIX


127 
	$kûl
 (
__pid_t
 
__pid
, 
__sig
Ë
__THROW
;

130 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED


134 
	$kûÕg
 (
__pid_t
 
__pgΩ
, 
__sig
Ë
__THROW
;

137 
__BEGIN_NAMESPACE_STD


139 
	$øi£
 (
__sig
Ë
__THROW
;

140 
__END_NAMESPACE_STD


142 #ifde‡
__USE_MISC


144 
__sigh™dÀr_t
 
	$ssig«l
 (
__sig
, 
__sigh™dÀr_t
 
__h™dÀr
)

145 
__THROW
;

146 
	$gsig«l
 (
__sig
Ë
__THROW
;

149 #ifde‡
__USE_XOPEN2K8


151 
	`psig«l
 (
__sig
, c⁄° *
__s
);

154 
	`psigöfo
 (c⁄° 
sigöfo_t
 *
__pöfo
, c⁄° *
__s
);

166 #ifde‡
__USE_XOPEN


167 #ifde‡
__GNUC__


168 
	$sig∑u£
 (
__sig
Ë
	`__asm__
 ("__xpg_sigpause");

170 
	`__sig∑u£
 (
__sig_‹_mask
, 
__is_sig
);

172 
	#sig∑u£
(
sig
Ë
	`__sig∑u£
 ((sig), 1)

	)

177 #ifde‡
__USE_MISC


184 
	#sigmask
(
sig
Ë
	`__sigmask
(sig)

	)

187 
	$sigblock
 (
__mask
Ë
__THROW
 
__©åibuã_dïªˇãd__
;

190 
	$sig£tmask
 (
__mask
Ë
__THROW
 
__©åibuã_dïªˇãd__
;

193 
	$siggëmask
 (Ë
__THROW
 
__©åibuã_dïªˇãd__
;

197 #ifde‡
__USE_MISC


198 
	#NSIG
 
_NSIG


	)

201 #ifde‡
__USE_GNU


202 
__sigh™dÀr_t
 
	tsigh™dÀr_t
;

206 #ifde‡
__USE_MISC


207 
__sigh™dÀr_t
 
	tsig_t
;

210 #ifde‡
__USE_POSIX


213 
	$sigem±y£t
 (
sig£t_t
 *
__£t
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

216 
	$sigfûl£t
 (
sig£t_t
 *
__£t
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

219 
	$sigadd£t
 (
sig£t_t
 *
__£t
, 
__signo
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

222 
	$sigdñ£t
 (
sig£t_t
 *
__£t
, 
__signo
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

225 
	$sigismembî
 (c⁄° 
sig£t_t
 *
__£t
, 
__signo
)

226 
__THROW
 
	`__n⁄nuŒ
 ((1));

228 #ifde‡
__USE_GNU


230 
	$sigi£m±y£t
 (c⁄° 
sig£t_t
 *
__£t
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

233 
	$sig™d£t
 (
sig£t_t
 *
__£t
, c⁄° sig£t_à*
__À·
,

234 c⁄° 
sig£t_t
 *
__right
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2, 3));

237 
	$sig‹£t
 (
sig£t_t
 *
__£t
, c⁄° sig£t_à*
__À·
,

238 c⁄° 
sig£t_t
 *
__right
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2, 3));

243 
	~<bôs/siga˘i⁄.h
>

246 
	$sig¥ocmask
 (
__how
, c⁄° 
sig£t_t
 *
__ª°ri˘
 
__£t
,

247 
sig£t_t
 *
__ª°ri˘
 
__o£t
Ë
__THROW
;

254 
	$sigsu•íd
 (c⁄° 
sig£t_t
 *
__£t
Ë
	`__n⁄nuŒ
 ((1));

257 
	$siga˘i⁄
 (
__sig
, c⁄° 
siga˘i⁄
 *
__ª°ri˘
 
__a˘
,

258 
siga˘i⁄
 *
__ª°ri˘
 
__ﬂ˘
Ë
__THROW
;

261 
	$sig≥ndög
 (
sig£t_t
 *
__£t
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

268 
	$sigwaô
 (c⁄° 
sig£t_t
 *
__ª°ri˘
 
__£t
, *__ª°ri˘ 
__sig
)

269 
	`__n⁄nuŒ
 ((1, 2));

271 #ifde‡
__USE_POSIX199309


276 
	$sigwaôöfo
 (c⁄° 
sig£t_t
 *
__ª°ri˘
 
__£t
,

277 
sigöfo_t
 *
__ª°ri˘
 
__öfo
Ë
	`__n⁄nuŒ
 ((1));

284 
	$sigtimedwaô
 (c⁄° 
sig£t_t
 *
__ª°ri˘
 
__£t
,

285 
sigöfo_t
 *
__ª°ri˘
 
__öfo
,

286 c⁄° 
time•ec
 *
__ª°ri˘
 
__timeout
)

287 
	`__n⁄nuŒ
 ((1));

291 
	$sigqueue
 (
__pid_t
 
__pid
, 
__sig
, c⁄° 
sigvÆ
 
__vÆ
)

292 
__THROW
;

297 #ifde‡
__USE_MISC


301 c⁄° *c⁄° 
_sys_sigli°
[
_NSIG
];

302 c⁄° *c⁄° 
sys_sigli°
[
_NSIG
];

306 
	~<bôs/sigc⁄ãxt.h
>

309 
	$sigªtu∫
 (
sigc⁄ãxt
 *
__s˝
Ë
__THROW
;

314 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


315 
	#__√ed_size_t


	)

316 
	~<°ddef.h
>

321 
	$sigöãºu±
 (
__sig
, 
__öãºu±
Ë
__THROW
;

323 
	~<bôs/sig°ack.h
>

324 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8


326 
	~<sys/uc⁄ãxt.h
>

332 
	$sig°ack
 (
sig°ack
 *
__ss
, sig°ack *
__oss
)

333 
__THROW
 
__©åibuã_dïªˇãd__
;

337 
	$sigÆt°ack
 (c⁄° 
sigÆt°ack
 *
__ª°ri˘
 
__ss
,

338 
sigÆt°ack
 *
__ª°ri˘
 
__oss
Ë
__THROW
;

342 #ifde‡
__USE_XOPEN_EXTENDED


346 
	$sighﬁd
 (
__sig
Ë
__THROW
;

349 
	$sigªl£
 (
__sig
Ë
__THROW
;

352 
	$sigign‹e
 (
__sig
Ë
__THROW
;

355 
__sigh™dÀr_t
 
	$sig£t
 (
__sig
, 
__sigh™dÀr_t
 
__di•
Ë
__THROW
;

358 #i‡
deföed
 
__USE_POSIX199506
 || deföed 
__USE_UNIX98


361 
	~<bôs/±hªadty≥s.h
>

362 
	~<bôs/sigthªad.h
>

369 
	$__libc_cuºít_sigπmö
 (Ë
__THROW
;

371 
	$__libc_cuºít_sigπmax
 (Ë
__THROW
;

375 
__END_DECLS


	@/usr/include/stdint.h

22 #i‚de‡
_STDINT_H


23 
	#_STDINT_H
 1

	)

25 
	~<„©uªs.h
>

26 
	~<bôs/wch¨.h
>

27 
	~<bôs/w‹dsize.h
>

34 #i‚de‡
__öt8_t_deföed


35 
	#__öt8_t_deföed


	)

36 sig√d 
	töt8_t
;

37 
	töt16_t
;

38 
	töt32_t
;

39 #i‡
__WORDSIZE
 == 64

40 
	töt64_t
;

42 
__exãnsi⁄__


43 
	töt64_t
;

48 
	tuöt8_t
;

49 
	tuöt16_t
;

50 #i‚de‡
__uöt32_t_deföed


51 
	tuöt32_t
;

52 
	#__uöt32_t_deföed


	)

54 #i‡
__WORDSIZE
 == 64

55 
	tuöt64_t
;

57 
__exãnsi⁄__


58 
	tuöt64_t
;

65 sig√d 
	töt_Àa°8_t
;

66 
	töt_Àa°16_t
;

67 
	töt_Àa°32_t
;

68 #i‡
__WORDSIZE
 == 64

69 
	töt_Àa°64_t
;

71 
__exãnsi⁄__


72 
	töt_Àa°64_t
;

76 
	tuöt_Àa°8_t
;

77 
	tuöt_Àa°16_t
;

78 
	tuöt_Àa°32_t
;

79 #i‡
__WORDSIZE
 == 64

80 
	tuöt_Àa°64_t
;

82 
__exãnsi⁄__


83 
	tuöt_Àa°64_t
;

90 sig√d 
	töt_Á°8_t
;

91 #i‡
__WORDSIZE
 == 64

92 
	töt_Á°16_t
;

93 
	töt_Á°32_t
;

94 
	töt_Á°64_t
;

96 
	töt_Á°16_t
;

97 
	töt_Á°32_t
;

98 
__exãnsi⁄__


99 
	töt_Á°64_t
;

103 
	tuöt_Á°8_t
;

104 #i‡
__WORDSIZE
 == 64

105 
	tuöt_Á°16_t
;

106 
	tuöt_Á°32_t
;

107 
	tuöt_Á°64_t
;

109 
	tuöt_Á°16_t
;

110 
	tuöt_Á°32_t
;

111 
__exãnsi⁄__


112 
	tuöt_Á°64_t
;

117 #i‡
__WORDSIZE
 == 64

118 #i‚de‡
__öçå_t_deföed


119 
	töçå_t
;

120 
	#__öçå_t_deföed


	)

122 
	tuöçå_t
;

124 #i‚de‡
__öçå_t_deföed


125 
	töçå_t
;

126 
	#__öçå_t_deföed


	)

128 
	tuöçå_t
;

133 #i‡
__WORDSIZE
 == 64

134 
	tötmax_t
;

135 
	tuötmax_t
;

137 
__exãnsi⁄__


138 
	tötmax_t
;

139 
__exãnsi⁄__


140 
	tuötmax_t
;

144 #i‡
__WORDSIZE
 == 64

145 
	#__INT64_C
(
c
Ë¯## 
L


	)

146 
	#__UINT64_C
(
c
Ë¯## 
UL


	)

148 
	#__INT64_C
(
c
Ë¯## 
LL


	)

149 
	#__UINT64_C
(
c
Ë¯## 
ULL


	)

155 
	#INT8_MIN
 (-128)

	)

156 
	#INT16_MIN
 (-32767-1)

	)

157 
	#INT32_MIN
 (-2147483647-1)

	)

158 
	#INT64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

160 
	#INT8_MAX
 (127)

	)

161 
	#INT16_MAX
 (32767)

	)

162 
	#INT32_MAX
 (2147483647)

	)

163 
	#INT64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

166 
	#UINT8_MAX
 (255)

	)

167 
	#UINT16_MAX
 (65535)

	)

168 
	#UINT32_MAX
 (4294967295U)

	)

169 
	#UINT64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

173 
	#INT_LEAST8_MIN
 (-128)

	)

174 
	#INT_LEAST16_MIN
 (-32767-1)

	)

175 
	#INT_LEAST32_MIN
 (-2147483647-1)

	)

176 
	#INT_LEAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

178 
	#INT_LEAST8_MAX
 (127)

	)

179 
	#INT_LEAST16_MAX
 (32767)

	)

180 
	#INT_LEAST32_MAX
 (2147483647)

	)

181 
	#INT_LEAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

184 
	#UINT_LEAST8_MAX
 (255)

	)

185 
	#UINT_LEAST16_MAX
 (65535)

	)

186 
	#UINT_LEAST32_MAX
 (4294967295U)

	)

187 
	#UINT_LEAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

191 
	#INT_FAST8_MIN
 (-128)

	)

192 #i‡
__WORDSIZE
 == 64

193 
	#INT_FAST16_MIN
 (-9223372036854775807L-1)

	)

194 
	#INT_FAST32_MIN
 (-9223372036854775807L-1)

	)

196 
	#INT_FAST16_MIN
 (-2147483647-1)

	)

197 
	#INT_FAST32_MIN
 (-2147483647-1)

	)

199 
	#INT_FAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

201 
	#INT_FAST8_MAX
 (127)

	)

202 #i‡
__WORDSIZE
 == 64

203 
	#INT_FAST16_MAX
 (9223372036854775807L)

	)

204 
	#INT_FAST32_MAX
 (9223372036854775807L)

	)

206 
	#INT_FAST16_MAX
 (2147483647)

	)

207 
	#INT_FAST32_MAX
 (2147483647)

	)

209 
	#INT_FAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

212 
	#UINT_FAST8_MAX
 (255)

	)

213 #i‡
__WORDSIZE
 == 64

214 
	#UINT_FAST16_MAX
 (18446744073709551615UL)

	)

215 
	#UINT_FAST32_MAX
 (18446744073709551615UL)

	)

217 
	#UINT_FAST16_MAX
 (4294967295U)

	)

218 
	#UINT_FAST32_MAX
 (4294967295U)

	)

220 
	#UINT_FAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

224 #i‡
__WORDSIZE
 == 64

225 
	#INTPTR_MIN
 (-9223372036854775807L-1)

	)

226 
	#INTPTR_MAX
 (9223372036854775807L)

	)

227 
	#UINTPTR_MAX
 (18446744073709551615UL)

	)

229 
	#INTPTR_MIN
 (-2147483647-1)

	)

230 
	#INTPTR_MAX
 (2147483647)

	)

231 
	#UINTPTR_MAX
 (4294967295U)

	)

236 
	#INTMAX_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

238 
	#INTMAX_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

241 
	#UINTMAX_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

247 #i‡
__WORDSIZE
 == 64

248 
	#PTRDIFF_MIN
 (-9223372036854775807L-1)

	)

249 
	#PTRDIFF_MAX
 (9223372036854775807L)

	)

251 
	#PTRDIFF_MIN
 (-2147483647-1)

	)

252 
	#PTRDIFF_MAX
 (2147483647)

	)

256 
	#SIG_ATOMIC_MIN
 (-2147483647-1)

	)

257 
	#SIG_ATOMIC_MAX
 (2147483647)

	)

260 #i‡
__WORDSIZE
 == 64

261 
	#SIZE_MAX
 (18446744073709551615UL)

	)

263 #ifde‡
__WORDSIZE32_SIZE_ULONG


264 
	#SIZE_MAX
 (4294967295UL)

	)

266 
	#SIZE_MAX
 (4294967295U)

	)

271 #i‚de‡
WCHAR_MIN


273 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

274 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

278 
	#WINT_MIN
 (0u)

	)

279 
	#WINT_MAX
 (4294967295u)

	)

282 
	#INT8_C
(
c
Ë
	)
c

283 
	#INT16_C
(
c
Ë
	)
c

284 
	#INT32_C
(
c
Ë
	)
c

285 #i‡
__WORDSIZE
 == 64

286 
	#INT64_C
(
c
Ë¯## 
L


	)

288 
	#INT64_C
(
c
Ë¯## 
LL


	)

292 
	#UINT8_C
(
c
Ë
	)
c

293 
	#UINT16_C
(
c
Ë
	)
c

294 
	#UINT32_C
(
c
Ë¯## 
U


	)

295 #i‡
__WORDSIZE
 == 64

296 
	#UINT64_C
(
c
Ë¯## 
UL


	)

298 
	#UINT64_C
(
c
Ë¯## 
ULL


	)

302 #i‡
__WORDSIZE
 == 64

303 
	#INTMAX_C
(
c
Ë¯## 
L


	)

304 
	#UINTMAX_C
(
c
Ë¯## 
UL


	)

306 
	#INTMAX_C
(
c
Ë¯## 
LL


	)

307 
	#UINTMAX_C
(
c
Ë¯## 
ULL


	)

	@/usr/include/stdio.h

23 #i‚de‡
_STDIO_H


25 #i‡!
deföed
 
__√ed_FILE
 && !deföed 
__√ed___FILE


26 
	#_STDIO_H
 1

	)

27 
	~<„©uªs.h
>

29 
	g__BEGIN_DECLS


31 
	#__√ed_size_t


	)

32 
	#__√ed_NULL


	)

33 
	~<°ddef.h
>

35 
	~<bôs/ty≥s.h
>

36 
	#__√ed_FILE


	)

37 
	#__√ed___FILE


	)

41 #i‡!
deföed
 
__FILE_deföed
 && deföed 
__√ed_FILE


44 
	g_IO_FILE
;

46 
__BEGIN_NAMESPACE_STD


48 
_IO_FILE
 
	tFILE
;

49 
	g__END_NAMESPACE_STD


50 #i‡
deföed
 
__USE_LARGEFILE64
 || deföed 
__USE_POSIX
 \

51 || 
deföed
 
	g__USE_ISOC99
 || deföed 
	g__USE_XOPEN
 \

52 || 
deföed
 
__USE_POSIX2


53 
	$__USING_NAMESPACE_STD
(
FILE
)

56 
	#__FILE_deföed
 1

	)

58 #unde‡
__√ed_FILE


61 #i‡!
deföed
 
____FILE_deföed
 && deföed 
__√ed___FILE


64 
_IO_FILE
 
	t__FILE
;

66 
	#____FILE_deföed
 1

	)

68 #unde‡
__√ed___FILE


71 #ifdef 
_STDIO_H


72 
	#_STDIO_USES_IOSTREAM


	)

74 
	~<libio.h
>

76 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8


77 #ifde‡
__GNUC__


78 #i‚de‡
_VA_LIST_DEFINED


79 
_G_va_li°
 
	tva_li°
;

80 
	#_VA_LIST_DEFINED


	)

83 
	~<°d¨g.h
>

87 #ifde‡
__USE_XOPEN2K8


88 #i‚de‡
__off_t_deföed


89 #i‚de‡
__USE_FILE_OFFSET64


90 
__off_t
 
	toff_t
;

92 
__off64_t
 
	toff_t
;

94 
	#__off_t_deföed


	)

96 #i‡
deföed
 
__USE_LARGEFILE64
 && !deföed 
__off64_t_deföed


97 
__off64_t
 
	toff64_t
;

98 
	#__off64_t_deföed


	)

101 #i‚de‡
__ssize_t_deföed


102 
__ssize_t
 
	tssize_t
;

103 
	#__ssize_t_deföed


	)

108 
__BEGIN_NAMESPACE_STD


109 #i‚de‡
__USE_FILE_OFFSET64


110 
_G_Âos_t
 
	tÂos_t
;

112 
_G_Âos64_t
 
	tÂos_t
;

114 
__END_NAMESPACE_STD


115 #ifde‡
__USE_LARGEFILE64


116 
_G_Âos64_t
 
	tÂos64_t
;

120 
	#_IOFBF
 0

	)

121 
	#_IOLBF
 1

	)

122 
	#_IONBF
 2

	)

126 #i‚de‡
BUFSIZ


127 
	#BUFSIZ
 
_IO_BUFSIZ


	)

133 #i‚de‡
EOF


134 
	#EOF
 (-1)

	)

140 
	#SEEK_SET
 0

	)

141 
	#SEEK_CUR
 1

	)

142 
	#SEEK_END
 2

	)

143 #ifde‡
__USE_GNU


144 
	#SEEK_DATA
 3

	)

145 
	#SEEK_HOLE
 4

	)

149 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


151 
	#P_tmpdú
 "/tmp"

	)

164 
	~<bôs/°dio_lim.h
>

168 
_IO_FILE
 *
°dö
;

169 
_IO_FILE
 *
°dout
;

170 
_IO_FILE
 *
°dîr
;

172 
	#°dö
 
°dö


	)

173 
	#°dout
 
°dout


	)

174 
	#°dîr
 
°dîr


	)

176 
__BEGIN_NAMESPACE_STD


178 
	$ªmove
 (c⁄° *
__fûíame
Ë
__THROW
;

180 
	$ª«me
 (c⁄° *
__ﬁd
, c⁄° *
__√w
Ë
__THROW
;

181 
__END_NAMESPACE_STD


183 #ifde‡
__USE_ATFILE


185 
	$ª«mót
 (
__ﬁdfd
, c⁄° *
__ﬁd
, 
__√wfd
,

186 c⁄° *
__√w
Ë
__THROW
;

189 
__BEGIN_NAMESPACE_STD


194 #i‚de‡
__USE_FILE_OFFSET64


195 
FILE
 *
	$tmpfûe
 (Ë
__wur
;

197 #ifde‡
__REDIRECT


198 
FILE
 *
	`__REDIRECT
 (
tmpfûe
, (), 
tmpfûe64
Ë
__wur
;

200 
	#tmpfûe
 
tmpfûe64


	)

204 #ifde‡
__USE_LARGEFILE64


205 
FILE
 *
	$tmpfûe64
 (Ë
__wur
;

209 *
	$tm≤am
 (*
__s
Ë
__THROW
 
__wur
;

210 
__END_NAMESPACE_STD


212 #ifde‡
__USE_MISC


215 *
	$tm≤am_r
 (*
__s
Ë
__THROW
 
__wur
;

219 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


227 *
	$ãm≤am
 (c⁄° *
__dú
, c⁄° *
__pfx
)

228 
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

232 
__BEGIN_NAMESPACE_STD


237 
	`f˛o£
 (
FILE
 *
__°ªam
);

242 
	`fÊush
 (
FILE
 *
__°ªam
);

243 
__END_NAMESPACE_STD


245 #ifde‡
__USE_MISC


252 
	`fÊush_u∆ocked
 (
FILE
 *
__°ªam
);

255 #ifde‡
__USE_GNU


262 
	`f˛o£Æl
 ();

266 
__BEGIN_NAMESPACE_STD


267 #i‚de‡
__USE_FILE_OFFSET64


272 
FILE
 *
	$f›í
 (c⁄° *
__ª°ri˘
 
__fûíame
,

273 c⁄° *
__ª°ri˘
 
__modes
Ë
__wur
;

278 
FILE
 *
	$‰e›í
 (c⁄° *
__ª°ri˘
 
__fûíame
,

279 c⁄° *
__ª°ri˘
 
__modes
,

280 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

282 #ifde‡
__REDIRECT


283 
FILE
 *
	`__REDIRECT
 (
f›í
, (c⁄° *
__ª°ri˘
 
__fûíame
,

284 c⁄° *
__ª°ri˘
 
__modes
), 
f›í64
)

285 
__wur
;

286 
FILE
 *
	`__REDIRECT
 (
‰e›í
, (c⁄° *
__ª°ri˘
 
__fûíame
,

287 c⁄° *
__ª°ri˘
 
__modes
,

288 
FILE
 *
__ª°ri˘
 
__°ªam
), 
‰e›í64
)

289 
__wur
;

291 
	#f›í
 
f›í64


	)

292 
	#‰e›í
 
‰e›í64


	)

295 
__END_NAMESPACE_STD


296 #ifde‡
__USE_LARGEFILE64


297 
FILE
 *
	$f›í64
 (c⁄° *
__ª°ri˘
 
__fûíame
,

298 c⁄° *
__ª°ri˘
 
__modes
Ë
__wur
;

299 
FILE
 *
	$‰e›í64
 (c⁄° *
__ª°ri˘
 
__fûíame
,

300 c⁄° *
__ª°ri˘
 
__modes
,

301 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

304 #ifdef 
__USE_POSIX


306 
FILE
 *
	$fd›í
 (
__fd
, c⁄° *
__modes
Ë
__THROW
 
__wur
;

309 #ifdef 
__USE_GNU


312 
FILE
 *
	$f›ícookõ
 (*
__ª°ri˘
 
__magic_cookõ
,

313 c⁄° *
__ª°ri˘
 
__modes
,

314 
_IO_cookõ_io_fun˘i⁄s_t
 
__io_funcs
Ë
__THROW
 
__wur
;

317 #ifde‡
__USE_XOPEN2K8


319 
FILE
 *
	$fmem›í
 (*
__s
, 
size_t
 
__Àn
, c⁄° *
__modes
)

320 
__THROW
 
__wur
;

325 
FILE
 *
	$›í_mem°ªam
 (**
__buÊoc
, 
size_t
 *
__sizñoc
Ë
__THROW
 
__wur
;

329 
__BEGIN_NAMESPACE_STD


332 
	$£tbuf
 (
FILE
 *
__ª°ri˘
 
__°ªam
, *__ª°ri˘ 
__buf
Ë
__THROW
;

336 
	$£tvbuf
 (
FILE
 *
__ª°ri˘
 
__°ªam
, *__ª°ri˘ 
__buf
,

337 
__modes
, 
size_t
 
__n
Ë
__THROW
;

338 
__END_NAMESPACE_STD


340 #ifdef 
__USE_MISC


343 
	$£tbuf„r
 (
FILE
 *
__ª°ri˘
 
__°ªam
, *__ª°ri˘ 
__buf
,

344 
size_t
 
__size
Ë
__THROW
;

347 
	$£éöebuf
 (
FILE
 *
__°ªam
Ë
__THROW
;

351 
__BEGIN_NAMESPACE_STD


356 
	`Ârötf
 (
FILE
 *
__ª°ri˘
 
__°ªam
,

357 c⁄° *
__ª°ri˘
 
__f‹m©
, ...);

362 
	`¥ötf
 (c⁄° *
__ª°ri˘
 
__f‹m©
, ...);

364 
	$•rötf
 (*
__ª°ri˘
 
__s
,

365 c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__THROWNL
;

371 
	`vÂrötf
 (
FILE
 *
__ª°ri˘
 
__s
, c⁄° *__ª°ri˘ 
__f‹m©
,

372 
_G_va_li°
 
__¨g
);

377 
	`v¥ötf
 (c⁄° *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
);

379 
	$v•rötf
 (*
__ª°ri˘
 
__s
, c⁄° *__ª°ri˘ 
__f‹m©
,

380 
_G_va_li°
 
__¨g
Ë
__THROWNL
;

381 
__END_NAMESPACE_STD


383 #i‡
deföed
 
__USE_ISOC99
 || deföed 
__USE_UNIX98


384 
__BEGIN_NAMESPACE_C99


386 
	$¢¥ötf
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxÀn
,

387 c⁄° *
__ª°ri˘
 
__f‹m©
, ...)

388 
__THROWNL
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 3, 4)));

390 
	$v¢¥ötf
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxÀn
,

391 c⁄° *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
)

392 
__THROWNL
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 3, 0)));

393 
__END_NAMESPACE_C99


396 #ifde‡
__USE_GNU


399 
	$va•rötf
 (**
__ª°ri˘
 
__±r
, c⁄° *__ª°ri˘ 
__f
,

400 
_G_va_li°
 
__¨g
)

401 
__THROWNL
 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__¥ötf__
, 2, 0))Ë
__wur
;

402 
	$__a•rötf
 (**
__ª°ri˘
 
__±r
,

403 c⁄° *
__ª°ri˘
 
__fmt
, ...)

404 
__THROWNL
 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__¥ötf__
, 2, 3))Ë
__wur
;

405 
	$a•rötf
 (**
__ª°ri˘
 
__±r
,

406 c⁄° *
__ª°ri˘
 
__fmt
, ...)

407 
__THROWNL
 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__¥ötf__
, 2, 3))Ë
__wur
;

410 #ifde‡
__USE_XOPEN2K8


412 
	$vd¥ötf
 (
__fd
, c⁄° *
__ª°ri˘
 
__fmt
,

413 
_G_va_li°
 
__¨g
)

414 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 2, 0)));

415 
	$d¥ötf
 (
__fd
, c⁄° *
__ª°ri˘
 
__fmt
, ...)

416 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 2, 3)));

420 
__BEGIN_NAMESPACE_STD


425 
	$fsˇnf
 (
FILE
 *
__ª°ri˘
 
__°ªam
,

426 c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__wur
;

431 
	$sˇnf
 (c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__wur
;

433 
	$ssˇnf
 (c⁄° *
__ª°ri˘
 
__s
,

434 c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__THROW
;

436 #i‡
deföed
 
__USE_ISOC99
 && !deföed 
__USE_GNU
 \

437 && (!
deföed
 
__LDBL_COMPAT
 || !deföed 
__REDIRECT
) \

438 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

439 #ifde‡
__REDIRECT


443 
	`__REDIRECT
 (
fsˇnf
, (
FILE
 *
__ª°ri˘
 
__°ªam
,

444 c⁄° *
__ª°ri˘
 
__f‹m©
, ...),

445 
__isoc99_fsˇnf
Ë
__wur
;

446 
	`__REDIRECT
 (
sˇnf
, (c⁄° *
__ª°ri˘
 
__f‹m©
, ...),

447 
__isoc99_sˇnf
Ë
__wur
;

448 
	`__REDIRECT_NTH
 (
ssˇnf
, (c⁄° *
__ª°ri˘
 
__s
,

449 c⁄° *
__ª°ri˘
 
__f‹m©
, ...),

450 
__isoc99_ssˇnf
);

452 
	$__isoc99_fsˇnf
 (
FILE
 *
__ª°ri˘
 
__°ªam
,

453 c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__wur
;

454 
	$__isoc99_sˇnf
 (c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__wur
;

455 
	$__isoc99_ssˇnf
 (c⁄° *
__ª°ri˘
 
__s
,

456 c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__THROW
;

457 
	#fsˇnf
 
__isoc99_fsˇnf


	)

458 
	#sˇnf
 
__isoc99_sˇnf


	)

459 
	#ssˇnf
 
__isoc99_ssˇnf


	)

463 
__END_NAMESPACE_STD


465 #ifdef 
__USE_ISOC99


466 
__BEGIN_NAMESPACE_C99


471 
	$vfsˇnf
 (
FILE
 *
__ª°ri˘
 
__s
, c⁄° *__ª°ri˘ 
__f‹m©
,

472 
_G_va_li°
 
__¨g
)

473 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__sˇnf__
, 2, 0))Ë
__wur
;

479 
	$vsˇnf
 (c⁄° *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
)

480 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__sˇnf__
, 1, 0))Ë
__wur
;

483 
	$vssˇnf
 (c⁄° *
__ª°ri˘
 
__s
,

484 c⁄° *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
)

485 
__THROW
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__sˇnf__
, 2, 0)));

487 #i‡!
deföed
 
__USE_GNU
 \

488 && (!
deföed
 
__LDBL_COMPAT
 || !deföed 
__REDIRECT
) \

489 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

490 #ifde‡
__REDIRECT


494 
	`__REDIRECT
 (
vfsˇnf
,

495 (
FILE
 *
__ª°ri˘
 
__s
,

496 c⁄° *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
),

497 
__isoc99_vfsˇnf
)

498 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__sˇnf__
, 2, 0))Ë
__wur
;

499 
	`__REDIRECT
 (
vsˇnf
, (c⁄° *
__ª°ri˘
 
__f‹m©
,

500 
_G_va_li°
 
__¨g
), 
__isoc99_vsˇnf
)

501 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__sˇnf__
, 1, 0))Ë
__wur
;

502 
	`__REDIRECT_NTH
 (
vssˇnf
,

503 (c⁄° *
__ª°ri˘
 
__s
,

504 c⁄° *
__ª°ri˘
 
__f‹m©
,

505 
_G_va_li°
 
__¨g
), 
__isoc99_vssˇnf
)

506 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__sˇnf__
, 2, 0)));

508 
	$__isoc99_vfsˇnf
 (
FILE
 *
__ª°ri˘
 
__s
,

509 c⁄° *
__ª°ri˘
 
__f‹m©
,

510 
_G_va_li°
 
__¨g
Ë
__wur
;

511 
	$__isoc99_vsˇnf
 (c⁄° *
__ª°ri˘
 
__f‹m©
,

512 
_G_va_li°
 
__¨g
Ë
__wur
;

513 
	$__isoc99_vssˇnf
 (c⁄° *
__ª°ri˘
 
__s
,

514 c⁄° *
__ª°ri˘
 
__f‹m©
,

515 
_G_va_li°
 
__¨g
Ë
__THROW
;

516 
	#vfsˇnf
 
__isoc99_vfsˇnf


	)

517 
	#vsˇnf
 
__isoc99_vsˇnf


	)

518 
	#vssˇnf
 
__isoc99_vssˇnf


	)

522 
__END_NAMESPACE_C99


526 
__BEGIN_NAMESPACE_STD


531 
	`fgëc
 (
FILE
 *
__°ªam
);

532 
	`gëc
 (
FILE
 *
__°ªam
);

538 
	`gëch¨
 ();

539 
__END_NAMESPACE_STD


543 
	#gëc
(
_Â
Ë
	`_IO_gëc
 (_Â)

	)

545 #ifde‡
__USE_POSIX


550 
	`gëc_u∆ocked
 (
FILE
 *
__°ªam
);

551 
	`gëch¨_u∆ocked
 ();

554 #ifde‡
__USE_MISC


561 
	`fgëc_u∆ocked
 (
FILE
 *
__°ªam
);

565 
__BEGIN_NAMESPACE_STD


573 
	`Âutc
 (
__c
, 
FILE
 *
__°ªam
);

574 
	`putc
 (
__c
, 
FILE
 *
__°ªam
);

580 
	`putch¨
 (
__c
);

581 
__END_NAMESPACE_STD


585 
	#putc
(
_ch
, 
_Â
Ë
	`_IO_putc
 (_ch, _Â)

	)

587 #ifde‡
__USE_MISC


594 
	`Âutc_u∆ocked
 (
__c
, 
FILE
 *
__°ªam
);

597 #ifde‡
__USE_POSIX


602 
	`putc_u∆ocked
 (
__c
, 
FILE
 *
__°ªam
);

603 
	`putch¨_u∆ocked
 (
__c
);

607 #i‡
deföed
 
__USE_MISC
 \

608 || (
deföed
 
__USE_XOPEN
 && !deföed 
__USE_XOPEN2K
)

610 
	`gëw
 (
FILE
 *
__°ªam
);

613 
	`putw
 (
__w
, 
FILE
 *
__°ªam
);

617 
__BEGIN_NAMESPACE_STD


622 *
	$fgës
 (*
__ª°ri˘
 
__s
, 
__n
, 
FILE
 *__ª°ri˘ 
__°ªam
)

623 
__wur
;

625 #i‡!
deföed
 
__USE_ISOC11
 \

626 || (
deföed
 
__˝lu•lus
 && __cplusplus <= 201103L)

638 *
	$gës
 (*
__s
Ë
__wur
 
__©åibuã_dïªˇãd__
;

640 
__END_NAMESPACE_STD


642 #ifde‡
__USE_GNU


649 *
	$fgës_u∆ocked
 (*
__ª°ri˘
 
__s
, 
__n
,

650 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

654 #ifdef 
__USE_XOPEN2K8


665 
_IO_ssize_t
 
	$__gëdñim
 (**
__ª°ri˘
 
__löïå
,

666 
size_t
 *
__ª°ri˘
 
__n
, 
__dñimôî
,

667 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

668 
_IO_ssize_t
 
	$gëdñim
 (**
__ª°ri˘
 
__löïå
,

669 
size_t
 *
__ª°ri˘
 
__n
, 
__dñimôî
,

670 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

678 
_IO_ssize_t
 
	$gëlöe
 (**
__ª°ri˘
 
__löïå
,

679 
size_t
 *
__ª°ri˘
 
__n
,

680 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

684 
__BEGIN_NAMESPACE_STD


689 
	`Âuts
 (c⁄° *
__ª°ri˘
 
__s
, 
FILE
 *__ª°ri˘ 
__°ªam
);

695 
	`puts
 (c⁄° *
__s
);

702 
	`ungëc
 (
__c
, 
FILE
 *
__°ªam
);

709 
size_t
 
	$‰ód
 (*
__ª°ri˘
 
__±r
, 
size_t
 
__size
,

710 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

715 
size_t
 
	`fwrôe
 (c⁄° *
__ª°ri˘
 
__±r
, size_à
__size
,

716 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__s
);

717 
__END_NAMESPACE_STD


719 #ifde‡
__USE_GNU


726 
	`Âuts_u∆ocked
 (c⁄° *
__ª°ri˘
 
__s
,

727 
FILE
 *
__ª°ri˘
 
__°ªam
);

730 #ifde‡
__USE_MISC


737 
size_t
 
	$‰ód_u∆ocked
 (*
__ª°ri˘
 
__±r
, 
size_t
 
__size
,

738 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

739 
size_t
 
	`fwrôe_u∆ocked
 (c⁄° *
__ª°ri˘
 
__±r
, size_à
__size
,

740 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__°ªam
);

744 
__BEGIN_NAMESPACE_STD


749 
	`f£ek
 (
FILE
 *
__°ªam
, 
__off
, 
__whí˚
);

754 
	$·ñl
 (
FILE
 *
__°ªam
Ë
__wur
;

759 
	`ªwöd
 (
FILE
 *
__°ªam
);

760 
__END_NAMESPACE_STD


767 #i‡
deföed
 
__USE_LARGEFILE
 || deföed 
__USE_XOPEN2K


768 #i‚de‡
__USE_FILE_OFFSET64


773 
	`f£eko
 (
FILE
 *
__°ªam
, 
__off_t
 
__off
, 
__whí˚
);

778 
__off_t
 
	$·ñlo
 (
FILE
 *
__°ªam
Ë
__wur
;

780 #ifde‡
__REDIRECT


781 
	`__REDIRECT
 (
f£eko
,

782 (
FILE
 *
__°ªam
, 
__off64_t
 
__off
, 
__whí˚
),

783 
f£eko64
);

784 
__off64_t
 
	`__REDIRECT
 (
·ñlo
, (
FILE
 *
__°ªam
), 
·ñlo64
);

786 
	#f£eko
 
f£eko64


	)

787 
	#·ñlo
 
·ñlo64


	)

792 
__BEGIN_NAMESPACE_STD


793 #i‚de‡
__USE_FILE_OFFSET64


798 
	`fgëpos
 (
FILE
 *
__ª°ri˘
 
__°ªam
, 
Âos_t
 *__ª°ri˘ 
__pos
);

803 
	`f£ços
 (
FILE
 *
__°ªam
, c⁄° 
Âos_t
 *
__pos
);

805 #ifde‡
__REDIRECT


806 
	`__REDIRECT
 (
fgëpos
, (
FILE
 *
__ª°ri˘
 
__°ªam
,

807 
Âos_t
 *
__ª°ri˘
 
__pos
), 
fgëpos64
);

808 
	`__REDIRECT
 (
f£ços
,

809 (
FILE
 *
__°ªam
, c⁄° 
Âos_t
 *
__pos
), 
f£ços64
);

811 
	#fgëpos
 
fgëpos64


	)

812 
	#f£ços
 
f£ços64


	)

815 
__END_NAMESPACE_STD


817 #ifde‡
__USE_LARGEFILE64


818 
	`f£eko64
 (
FILE
 *
__°ªam
, 
__off64_t
 
__off
, 
__whí˚
);

819 
__off64_t
 
	$·ñlo64
 (
FILE
 *
__°ªam
Ë
__wur
;

820 
	`fgëpos64
 (
FILE
 *
__ª°ri˘
 
__°ªam
, 
Âos64_t
 *__ª°ri˘ 
__pos
);

821 
	`f£ços64
 (
FILE
 *
__°ªam
, c⁄° 
Âos64_t
 *
__pos
);

824 
__BEGIN_NAMESPACE_STD


826 
	$˛óªº
 (
FILE
 *
__°ªam
Ë
__THROW
;

828 
	$„of
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

830 
	$„º‹
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

831 
__END_NAMESPACE_STD


833 #ifde‡
__USE_MISC


835 
	$˛óªº_u∆ocked
 (
FILE
 *
__°ªam
Ë
__THROW
;

836 
	$„of_u∆ocked
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

837 
	$„º‹_u∆ocked
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

841 
__BEGIN_NAMESPACE_STD


846 
	`≥º‹
 (c⁄° *
__s
);

847 
__END_NAMESPACE_STD


853 
	~<bôs/sys_îæi°.h
>

856 #ifdef 
__USE_POSIX


858 
	$fûío
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

861 #ifde‡
__USE_MISC


863 
	$fûío_u∆ocked
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

867 #ifde‡
__USE_POSIX2


872 
FILE
 *
	$p›í
 (c⁄° *
__comm™d
, c⁄° *
__modes
Ë
__wur
;

878 
	`p˛o£
 (
FILE
 *
__°ªam
);

882 #ifdef 
__USE_POSIX


884 *
	$˘îmid
 (*
__s
Ë
__THROW
;

888 #ifde‡
__USE_XOPEN


890 *
	`cu£rid
 (*
__s
);

894 #ifdef 
__USE_GNU


895 
ob°ack
;

898 
	$ob°ack_¥ötf
 (
ob°ack
 *
__ª°ri˘
 
__ob°ack
,

899 c⁄° *
__ª°ri˘
 
__f‹m©
, ...)

900 
__THROWNL
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 2, 3)));

901 
	$ob°ack_v¥ötf
 (
ob°ack
 *
__ª°ri˘
 
__ob°ack
,

902 c⁄° *
__ª°ri˘
 
__f‹m©
,

903 
_G_va_li°
 
__¨gs
)

904 
__THROWNL
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 2, 0)));

908 #ifde‡
__USE_POSIX


912 
	$Êockfûe
 (
FILE
 *
__°ªam
Ë
__THROW
;

916 
	$·rylockfûe
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

919 
	$fu∆ockfûe
 (
FILE
 *
__°ªam
Ë
__THROW
;

922 #i‡
deföed
 
__USE_XOPEN
 && !deföed 
__USE_XOPEN2K
 && !deföed 
__USE_GNU


926 
	#__√ed_gë›t


	)

927 
	~<gë›t.h
>

932 #ifde‡
__USE_EXTERN_INLINES


933 
	~<bôs/°dio.h
>

935 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__f‹tify_fun˘i⁄


936 
	~<bôs/°dio2.h
>

938 #ifde‡
__LDBL_COMPAT


939 
	~<bôs/°dio-ldbl.h
>

942 
__END_DECLS


	@/usr/include/stdlib.h

22 #i‚def 
_STDLIB_H


24 
	~<„©uªs.h
>

27 
	#__√ed_size_t


	)

28 #i‚de‡
__√ed_mÆloc_™d_ˇŒoc


29 
	#__√ed_wch¨_t


	)

30 
	#__√ed_NULL


	)

32 
	~<°ddef.h
>

34 
	g__BEGIN_DECLS


36 #i‚de‡
__√ed_mÆloc_™d_ˇŒoc


37 
	#_STDLIB_H
 1

	)

39 #i‡(
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8
Ë&& !deföed 
_SYS_WAIT_H


41 
	~<bôs/waôÊags.h
>

42 
	~<bôs/waô°©us.h
>

44 #ifde‡
__USE_MISC


49 #i‡
deföed
 
__GNUC__
 && !deföed 
__˝lu•lus


50 
	#__WAIT_INT
(
°©us
) \

51 (
	`__exãnsi⁄__
 (((uni⁄ { 
	`__ty≥of
(
°©us
Ë
__ö
; 
__i
; }) \

52 { .
__ö
 = (
°©us
Ë}).
__i
))

	)

54 
	#__WAIT_INT
(
°©us
Ë(*(*Ë&(°©us))

	)

62 #i‡!
deföed
 
__GNUC__
 || __GNUC__ < 2 || deföed 
__˝lu•lus


63 
	#__WAIT_STATUS
 *

	)

64 
	#__WAIT_STATUS_DEFN
 *

	)

69 
waô
 *
	m__u±r
;

70 *
	m__ùå
;

71 } 
	t__WAIT_STATUS
 
	t__©åibuã__
 ((
	t__å™•¨ít_uni⁄__
));

72 
	#__WAIT_STATUS_DEFN
 *

	)

77 
	#__WAIT_INT
(
°©us
Ë(°©us)

	)

78 
	#__WAIT_STATUS
 *

	)

79 
	#__WAIT_STATUS_DEFN
 *

	)

84 
	#WEXITSTATUS
(
°©us
Ë
	`__WEXITSTATUS
 (
	`__WAIT_INT
 (°©us))

	)

85 
	#WTERMSIG
(
°©us
Ë
	`__WTERMSIG
 (
	`__WAIT_INT
 (°©us))

	)

86 
	#WSTOPSIG
(
°©us
Ë
	`__WSTOPSIG
 (
	`__WAIT_INT
 (°©us))

	)

87 
	#WIFEXITED
(
°©us
Ë
	`__WIFEXITED
 (
	`__WAIT_INT
 (°©us))

	)

88 
	#WIFSIGNALED
(
°©us
Ë
	`__WIFSIGNALED
 (
	`__WAIT_INT
 (°©us))

	)

89 
	#WIFSTOPPED
(
°©us
Ë
	`__WIFSTOPPED
 (
	`__WAIT_INT
 (°©us))

	)

90 #ifde‡
__WIFCONTINUED


91 
	#WIFCONTINUED
(
°©us
Ë
	`__WIFCONTINUED
 (
	`__WAIT_INT
 (°©us))

	)

95 
__BEGIN_NAMESPACE_STD


99 
	mquŸ
;

100 
	mªm
;

101 } 
	tdiv_t
;

104 #i‚de‡
__ldiv_t_deföed


107 
	mquŸ
;

108 
	mªm
;

109 } 
	tldiv_t
;

110 
	#__ldiv_t_deföed
 1

	)

112 
	g__END_NAMESPACE_STD


114 #i‡
deföed
 
__USE_ISOC99
 && !deföed 
__Œdiv_t_deföed


115 
__BEGIN_NAMESPACE_C99


117 
__exãnsi⁄__
 struct

119 
	mquŸ
;

120 
	mªm
;

121 } 
	tŒdiv_t
;

122 
	#__Œdiv_t_deföed
 1

	)

123 
	g__END_NAMESPACE_C99


128 
	#RAND_MAX
 2147483647

	)

133 
	#EXIT_FAILURE
 1

	)

134 
	#EXIT_SUCCESS
 0

	)

138 
	#MB_CUR_MAX
 (
	`__˘y≥_gë_mb_cur_max
 ())

	)

139 
size_t
 
	$__˘y≥_gë_mb_cur_max
 (Ë
__THROW
 
__wur
;

142 
__BEGIN_NAMESPACE_STD


144 
	$©of
 (c⁄° *
__≈å
)

145 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

147 
	$©oi
 (c⁄° *
__≈å
)

148 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

150 
	$©ﬁ
 (c⁄° *
__≈å
)

151 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

152 
__END_NAMESPACE_STD


154 #ifde‡
__USE_ISOC99


155 
__BEGIN_NAMESPACE_C99


157 
__exãnsi⁄__
 
	$©ﬁl
 (c⁄° *
__≈å
)

158 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

159 
__END_NAMESPACE_C99


162 
__BEGIN_NAMESPACE_STD


164 
	$°πod
 (c⁄° *
__ª°ri˘
 
__≈å
,

165 **
__ª°ri˘
 
__íd±r
)

166 
__THROW
 
	`__n⁄nuŒ
 ((1));

167 
__END_NAMESPACE_STD


169 #ifdef 
__USE_ISOC99


170 
__BEGIN_NAMESPACE_C99


172 
	$°πof
 (c⁄° *
__ª°ri˘
 
__≈å
,

173 **
__ª°ri˘
 
__íd±r
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

175 
	$°πﬁd
 (c⁄° *
__ª°ri˘
 
__≈å
,

176 **
__ª°ri˘
 
__íd±r
)

177 
__THROW
 
	`__n⁄nuŒ
 ((1));

178 
__END_NAMESPACE_C99


181 
__BEGIN_NAMESPACE_STD


183 
	$°πﬁ
 (c⁄° *
__ª°ri˘
 
__≈å
,

184 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

185 
__THROW
 
	`__n⁄nuŒ
 ((1));

187 
	$°πoul
 (c⁄° *
__ª°ri˘
 
__≈å
,

188 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

189 
__THROW
 
	`__n⁄nuŒ
 ((1));

190 
__END_NAMESPACE_STD


192 #ifde‡
__USE_MISC


194 
__exãnsi⁄__


195 
	$°πoq
 (c⁄° *
__ª°ri˘
 
__≈å
,

196 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

197 
__THROW
 
	`__n⁄nuŒ
 ((1));

199 
__exãnsi⁄__


200 
	$°πouq
 (c⁄° *
__ª°ri˘
 
__≈å
,

201 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

202 
__THROW
 
	`__n⁄nuŒ
 ((1));

205 #ifde‡
__USE_ISOC99


206 
__BEGIN_NAMESPACE_C99


208 
__exãnsi⁄__


209 
	$°πﬁl
 (c⁄° *
__ª°ri˘
 
__≈å
,

210 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

211 
__THROW
 
	`__n⁄nuŒ
 ((1));

213 
__exãnsi⁄__


214 
	$°πouŒ
 (c⁄° *
__ª°ri˘
 
__≈å
,

215 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

216 
__THROW
 
	`__n⁄nuŒ
 ((1));

217 
__END_NAMESPACE_C99


221 #ifde‡
__USE_GNU


235 
	~<xloˇÀ.h
>

239 
	$°πﬁ_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

240 **
__ª°ri˘
 
__íd±r
, 
__ba£
,

241 
__loˇÀ_t
 
__loc
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 4));

243 
	$°πoul_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

244 **
__ª°ri˘
 
__íd±r
,

245 
__ba£
, 
__loˇÀ_t
 
__loc
)

246 
__THROW
 
	`__n⁄nuŒ
 ((1, 4));

248 
__exãnsi⁄__


249 
	$°πﬁl_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

250 **
__ª°ri˘
 
__íd±r
, 
__ba£
,

251 
__loˇÀ_t
 
__loc
)

252 
__THROW
 
	`__n⁄nuŒ
 ((1, 4));

254 
__exãnsi⁄__


255 
	$°πouŒ_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

256 **
__ª°ri˘
 
__íd±r
,

257 
__ba£
, 
__loˇÀ_t
 
__loc
)

258 
__THROW
 
	`__n⁄nuŒ
 ((1, 4));

260 
	$°πod_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

261 **
__ª°ri˘
 
__íd±r
, 
__loˇÀ_t
 
__loc
)

262 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

264 
	$°πof_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

265 **
__ª°ri˘
 
__íd±r
, 
__loˇÀ_t
 
__loc
)

266 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

268 
	$°πﬁd_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

269 **
__ª°ri˘
 
__íd±r
,

270 
__loˇÀ_t
 
__loc
)

271 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

275 #ifde‡
__USE_EXTERN_INLINES


276 
__BEGIN_NAMESPACE_STD


277 
__exã∫_ölöe
 

278 
	`__NTH
 (
	$©oi
 (c⁄° *
__≈å
))

280  (Ë
	`°πﬁ
 (
__≈å
, (**Ë
NULL
, 10);

281 
	}
}

282 
__exã∫_ölöe
 

283 
__NTH
 (
	$©ﬁ
 (c⁄° *
__≈å
))

285  
	`°πﬁ
 (
__≈å
, (**Ë
NULL
, 10);

286 
	}
}

287 
	g__END_NAMESPACE_STD


289 #ifde‡
__USE_ISOC99


290 
__BEGIN_NAMESPACE_C99


291 
__exãnsi⁄__
 
__exã∫_ölöe
 

292 
__NTH
 (
	$©ﬁl
 (c⁄° *
__≈å
))

294  
	`°πﬁl
 (
__≈å
, (**Ë
NULL
, 10);

295 
	}
}

296 
	g__END_NAMESPACE_C99


301 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED


305 *
	$l64a
 (
__n
Ë
__THROW
 
__wur
;

308 
	$a64l
 (c⁄° *
__s
)

309 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

313 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED


314 
	~<sys/ty≥s.h
>

321 
	$øndom
 (Ë
__THROW
;

324 
	$§™dom
 (
__£ed
Ë
__THROW
;

330 *
	$öô°©e
 (
__£ed
, *
__°©ebuf
,

331 
size_t
 
__°©ñí
Ë
__THROW
 
	`__n⁄nuŒ
 ((2));

335 *
	$£t°©e
 (*
__°©ebuf
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

338 #ifde‡
__USE_MISC


343 
	søndom_d©a


345 
öt32_t
 *
Âå
;

346 
öt32_t
 *
Ωå
;

347 
öt32_t
 *
°©e
;

348 
ønd_ty≥
;

349 
ønd_deg
;

350 
ønd_£p
;

351 
öt32_t
 *
íd_±r
;

354 
	$øndom_r
 (
øndom_d©a
 *
__ª°ri˘
 
__buf
,

355 
öt32_t
 *
__ª°ri˘
 
__ªsu…
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

357 
	$§™dom_r
 (
__£ed
, 
øndom_d©a
 *
__buf
)

358 
__THROW
 
	`__n⁄nuŒ
 ((2));

360 
	$öô°©e_r
 (
__£ed
, *
__ª°ri˘
 
__°©ebuf
,

361 
size_t
 
__°©ñí
,

362 
øndom_d©a
 *
__ª°ri˘
 
__buf
)

363 
__THROW
 
	`__n⁄nuŒ
 ((2, 4));

365 
	$£t°©e_r
 (*
__ª°ri˘
 
__°©ebuf
,

366 
øndom_d©a
 *
__ª°ri˘
 
__buf
)

367 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

372 
__BEGIN_NAMESPACE_STD


374 
	$ønd
 (Ë
__THROW
;

376 
	$§™d
 (
__£ed
Ë
__THROW
;

377 
__END_NAMESPACE_STD


379 #ifde‡
__USE_POSIX


381 
	$ønd_r
 (*
__£ed
Ë
__THROW
;

385 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


389 
	$dønd48
 (Ë
__THROW
;

390 
	$î™d48
 (
__xsubi
[3]Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

393 
	$Ã™d48
 (Ë
__THROW
;

394 
	$ƒ™d48
 (
__xsubi
[3])

395 
__THROW
 
	`__n⁄nuŒ
 ((1));

398 
	$mønd48
 (Ë
__THROW
;

399 
	$jønd48
 (
__xsubi
[3])

400 
__THROW
 
	`__n⁄nuŒ
 ((1));

403 
	$§™d48
 (
__£edvÆ
Ë
__THROW
;

404 *
	$£ed48
 (
__£ed16v
[3])

405 
__THROW
 
	`__n⁄nuŒ
 ((1));

406 
	$lc⁄g48
 (
__∑øm
[7]Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

408 #ifde‡
__USE_MISC


412 
	sdønd48_d©a


414 
__x
[3];

415 
__ﬁd_x
[3];

416 
__c
;

417 
__öô
;

418 
__exãnsi⁄__
 
__a
;

423 
	$dønd48_r
 (
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

424 *
__ª°ri˘
 
__ªsu…
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

425 
	$î™d48_r
 (
__xsubi
[3],

426 
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

427 *
__ª°ri˘
 
__ªsu…
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

430 
	$Ã™d48_r
 (
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

431 *
__ª°ri˘
 
__ªsu…
)

432 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

433 
	$ƒ™d48_r
 (
__xsubi
[3],

434 
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

435 *
__ª°ri˘
 
__ªsu…
)

436 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

439 
	$mønd48_r
 (
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

440 *
__ª°ri˘
 
__ªsu…
)

441 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

442 
	$jønd48_r
 (
__xsubi
[3],

443 
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

444 *
__ª°ri˘
 
__ªsu…
)

445 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

448 
	$§™d48_r
 (
__£edvÆ
, 
dønd48_d©a
 *
__buf„r
)

449 
__THROW
 
	`__n⁄nuŒ
 ((2));

451 
	$£ed48_r
 (
__£ed16v
[3],

452 
dønd48_d©a
 *
__buf„r
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

454 
	$lc⁄g48_r
 (
__∑øm
[7],

455 
dønd48_d©a
 *
__buf„r
)

456 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

462 #i‚de‡
__mÆloc_™d_ˇŒoc_deföed


463 
	#__mÆloc_™d_ˇŒoc_deföed


	)

464 
__BEGIN_NAMESPACE_STD


466 *
	$mÆloc
 (
size_t
 
__size
Ë
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

468 *
	$ˇŒoc
 (
size_t
 
__nmemb
, size_à
__size
)

469 
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

470 
__END_NAMESPACE_STD


473 #i‚de‡
__√ed_mÆloc_™d_ˇŒoc


474 
__BEGIN_NAMESPACE_STD


480 *
	$ªÆloc
 (*
__±r
, 
size_t
 
__size
)

481 
__THROW
 
__©åibuã_w¨n_unu£d_ªsu…__
;

483 
	$‰ì
 (*
__±r
Ë
__THROW
;

484 
__END_NAMESPACE_STD


486 #ifdef 
__USE_MISC


488 
	$c‰ì
 (*
__±r
Ë
__THROW
;

491 #ifde‡
__USE_MISC


492 
	~<Æloˇ.h
>

495 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K
) \

496 || 
deföed
 
__USE_MISC


498 *
	$vÆloc
 (
size_t
 
__size
Ë
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

501 #ifde‡
__USE_XOPEN2K


503 
	$posix_memÆign
 (**
__mem±r
, 
size_t
 
__Æignmít
, size_à
__size
)

504 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

507 #ifde‡
__USE_ISOC11


509 *
	$Æig√d_Æloc
 (
size_t
 
__Æignmít
, size_à
__size
)

510 
__THROW
 
__©åibuã_mÆloc__
 
	`__©åibuã_Æloc_size__
 ((2)Ë
__wur
;

513 
__BEGIN_NAMESPACE_STD


515 
	$ab‹t
 (Ë
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

519 
	$©exô
 ((*
__func
Ë()Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

521 #i‡
deföed
 
__USE_ISOC11
 || deföed 
__USE_ISOCXX11


523 #ifde‡
__˝lu•lus


524 "C++" 
	$©_quick_exô
 ((*
__func
) ())

525 
__THROW
 
	`__asm
 ("©_quick_exô"Ë
	`__n⁄nuŒ
 ((1));

527 
	$©_quick_exô
 ((*
__func
Ë()Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

530 
__END_NAMESPACE_STD


532 #ifdef 
__USE_MISC


535 
	$⁄_exô
 ((*
__func
Ë(
__°©us
, *
__¨g
), *__arg)

536 
__THROW
 
	`__n⁄nuŒ
 ((1));

539 
__BEGIN_NAMESPACE_STD


543 
	$exô
 (
__°©us
Ë
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

545 #i‡
deföed
 
__USE_ISOC11
 || deföed 
__USE_ISOCXX11


549 
	$quick_exô
 (
__°©us
Ë
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

551 
__END_NAMESPACE_STD


553 #ifde‡
__USE_ISOC99


554 
__BEGIN_NAMESPACE_C99


557 
	$_Exô
 (
__°©us
Ë
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

558 
__END_NAMESPACE_C99


562 
__BEGIN_NAMESPACE_STD


564 *
	$gëív
 (c⁄° *
__«me
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

565 
__END_NAMESPACE_STD


567 #ifde‡
__USE_GNU


570 *
	$£cuª_gëív
 (c⁄° *
__«me
)

571 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

574 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


578 
	$puãnv
 (*
__°rög
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

581 #ifde‡
__USE_XOPEN2K


584 
	$£ãnv
 (c⁄° *
__«me
, c⁄° *
__vÆue
, 
__ª∂a˚
)

585 
__THROW
 
	`__n⁄nuŒ
 ((2));

588 
	$un£ãnv
 (c⁄° *
__«me
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

591 #ifdef 
__USE_MISC


595 
	$˛óªnv
 (Ë
__THROW
;

599 #i‡
deföed
 
__USE_MISC
 \

600 || (
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K8
)

606 *
	$mkãmp
 (*
__ãm∂©e
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

609 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


618 #i‚de‡
__USE_FILE_OFFSET64


619 
	$mk°emp
 (*
__ãm∂©e
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

621 #ifde‡
__REDIRECT


622 
	`__REDIRECT
 (
mk°emp
, (*
__ãm∂©e
), 
mk°emp64
)

623 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

625 
	#mk°emp
 
mk°emp64


	)

628 #ifde‡
__USE_LARGEFILE64


629 
	$mk°emp64
 (*
__ãm∂©e
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

633 #ifde‡
__USE_MISC


640 #i‚de‡
__USE_FILE_OFFSET64


641 
	$mk°emps
 (*
__ãm∂©e
, 
__suffixÀn
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

643 #ifde‡
__REDIRECT


644 
	`__REDIRECT
 (
mk°emps
, (*
__ãm∂©e
, 
__suffixÀn
),

645 
mk°emps64
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

647 
	#mk°emps
 
mk°emps64


	)

650 #ifde‡
__USE_LARGEFILE64


651 
	$mk°emps64
 (*
__ãm∂©e
, 
__suffixÀn
)

652 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

656 #ifde‡
__USE_XOPEN2K8


662 *
	$mkdãmp
 (*
__ãm∂©e
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

665 #ifde‡
__USE_GNU


672 #i‚de‡
__USE_FILE_OFFSET64


673 
	$mko°emp
 (*
__ãm∂©e
, 
__Êags
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

675 #ifde‡
__REDIRECT


676 
	`__REDIRECT
 (
mko°emp
, (*
__ãm∂©e
, 
__Êags
), 
mko°emp64
)

677 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

679 
	#mko°emp
 
mko°emp64


	)

682 #ifde‡
__USE_LARGEFILE64


683 
	$mko°emp64
 (*
__ãm∂©e
, 
__Êags
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

692 #i‚de‡
__USE_FILE_OFFSET64


693 
	$mko°emps
 (*
__ãm∂©e
, 
__suffixÀn
, 
__Êags
)

694 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

696 #ifde‡
__REDIRECT


697 
	`__REDIRECT
 (
mko°emps
, (*
__ãm∂©e
, 
__suffixÀn
,

698 
__Êags
), 
mko°emps64
)

699 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

701 
	#mko°emps
 
mko°emps64


	)

704 #ifde‡
__USE_LARGEFILE64


705 
	$mko°emps64
 (*
__ãm∂©e
, 
__suffixÀn
, 
__Êags
)

706 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

711 
__BEGIN_NAMESPACE_STD


716 
	$sy°em
 (c⁄° *
__comm™d
Ë
__wur
;

717 
__END_NAMESPACE_STD


720 #ifdef 
__USE_GNU


723 *
	$ˇn⁄iˇlize_fûe_«me
 (c⁄° *
__«me
)

724 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

727 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED


733 *
	$ªÆ∑th
 (c⁄° *
__ª°ri˘
 
__«me
,

734 *
__ª°ri˘
 
__ªsﬁved
Ë
__THROW
 
__wur
;

739 #i‚de‡
__COMPAR_FN_T


740 
	#__COMPAR_FN_T


	)

741 (*
	t__com∑r_‚_t
) (const *, const *);

743 #ifdef 
__USE_GNU


744 
__com∑r_‚_t
 
	tcom∑ris⁄_‚_t
;

747 #ifde‡
__USE_GNU


748 (*
	t__com∑r_d_‚_t
) (const *, const *, *);

751 
__BEGIN_NAMESPACE_STD


754 *
	$b£¨ch
 (c⁄° *
__key
, c⁄° *
__ba£
,

755 
size_t
 
__nmemb
, size_à
__size
, 
__com∑r_‚_t
 
__com∑r
)

756 
	`__n⁄nuŒ
 ((1, 2, 5)Ë
__wur
;

758 #ifde‡
__USE_EXTERN_INLINES


759 
	~<bôs/°dlib-b£¨ch.h
>

764 
	$qs‹t
 (*
__ba£
, 
size_t
 
__nmemb
, size_à
__size
,

765 
__com∑r_‚_t
 
__com∑r
Ë
	`__n⁄nuŒ
 ((1, 4));

766 #ifde‡
__USE_GNU


767 
	$qs‹t_r
 (*
__ba£
, 
size_t
 
__nmemb
, size_à
__size
,

768 
__com∑r_d_‚_t
 
__com∑r
, *
__¨g
)

769 
	`__n⁄nuŒ
 ((1, 4));

774 
	$abs
 (
__x
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

775 
	$œbs
 (
__x
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

776 
__END_NAMESPACE_STD


778 #ifde‡
__USE_ISOC99


779 
__exãnsi⁄__
 
	$Œabs
 (
__x
)

780 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

784 
__BEGIN_NAMESPACE_STD


788 
div_t
 
	$div
 (
__numî
, 
__díom
)

789 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

790 
ldiv_t
 
	$ldiv
 (
__numî
, 
__díom
)

791 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

792 
__END_NAMESPACE_STD


794 #ifde‡
__USE_ISOC99


795 
__BEGIN_NAMESPACE_C99


796 
__exãnsi⁄__
 
Œdiv_t
 
	$Œdiv
 (
__numî
,

797 
__díom
)

798 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

799 
__END_NAMESPACE_C99


803 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K8
) \

804 || 
deföed
 
__USE_MISC


811 *
	$ecvt
 (
__vÆue
, 
__ndigô
, *
__ª°ri˘
 
__de˝t
,

812 *
__ª°ri˘
 
__sign
Ë
__THROW
 
	`__n⁄nuŒ
 ((3, 4)Ë
__wur
;

817 *
	$fcvt
 (
__vÆue
, 
__ndigô
, *
__ª°ri˘
 
__de˝t
,

818 *
__ª°ri˘
 
__sign
Ë
__THROW
 
	`__n⁄nuŒ
 ((3, 4)Ë
__wur
;

823 *
	$gcvt
 (
__vÆue
, 
__ndigô
, *
__buf
)

824 
__THROW
 
	`__n⁄nuŒ
 ((3)Ë
__wur
;

827 #ifde‡
__USE_MISC


829 *
	$qecvt
 (
__vÆue
, 
__ndigô
,

830 *
__ª°ri˘
 
__de˝t
, *__ª°ri˘ 
__sign
)

831 
__THROW
 
	`__n⁄nuŒ
 ((3, 4)Ë
__wur
;

832 *
	$qfcvt
 (
__vÆue
, 
__ndigô
,

833 *
__ª°ri˘
 
__de˝t
, *__ª°ri˘ 
__sign
)

834 
__THROW
 
	`__n⁄nuŒ
 ((3, 4)Ë
__wur
;

835 *
	$qgcvt
 (
__vÆue
, 
__ndigô
, *
__buf
)

836 
__THROW
 
	`__n⁄nuŒ
 ((3)Ë
__wur
;

841 
	$ecvt_r
 (
__vÆue
, 
__ndigô
, *
__ª°ri˘
 
__de˝t
,

842 *
__ª°ri˘
 
__sign
, *__ª°ri˘ 
__buf
,

843 
size_t
 
__Àn
Ë
__THROW
 
	`__n⁄nuŒ
 ((3, 4, 5));

844 
	$fcvt_r
 (
__vÆue
, 
__ndigô
, *
__ª°ri˘
 
__de˝t
,

845 *
__ª°ri˘
 
__sign
, *__ª°ri˘ 
__buf
,

846 
size_t
 
__Àn
Ë
__THROW
 
	`__n⁄nuŒ
 ((3, 4, 5));

848 
	$qecvt_r
 (
__vÆue
, 
__ndigô
,

849 *
__ª°ri˘
 
__de˝t
, *__ª°ri˘ 
__sign
,

850 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
)

851 
__THROW
 
	`__n⁄nuŒ
 ((3, 4, 5));

852 
	$qfcvt_r
 (
__vÆue
, 
__ndigô
,

853 *
__ª°ri˘
 
__de˝t
, *__ª°ri˘ 
__sign
,

854 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
)

855 
__THROW
 
	`__n⁄nuŒ
 ((3, 4, 5));

859 
__BEGIN_NAMESPACE_STD


862 
	$mbÀn
 (c⁄° *
__s
, 
size_t
 
__n
Ë
__THROW
;

865 
	$mbtowc
 (
wch¨_t
 *
__ª°ri˘
 
__pwc
,

866 c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
Ë
__THROW
;

869 
	$w˘omb
 (*
__s
, 
wch¨_t
 
__wch¨
Ë
__THROW
;

873 
size_t
 
	$mb°owcs
 (
wch¨_t
 *
__ª°ri˘
 
__pwcs
,

874 c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
Ë
__THROW
;

876 
size_t
 
	$wc°ombs
 (*
__ª°ri˘
 
__s
,

877 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__pwcs
, 
size_t
 
__n
)

878 
__THROW
;

879 
__END_NAMESPACE_STD


882 #ifde‡
__USE_MISC


887 
	$Ωm©ch
 (c⁄° *
__ª•⁄£
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

891 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


898 
	$gësub›t
 (**
__ª°ri˘
 
__›ti⁄p
,

899 *c⁄° *
__ª°ri˘
 
__tokís
,

900 **
__ª°ri˘
 
__vÆuï
)

901 
__THROW
 
	`__n⁄nuŒ
 ((1, 2, 3)Ë
__wur
;

905 #ifde‡
__USE_XOPEN


907 
	$£tkey
 (c⁄° *
__key
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

913 #ifde‡
__USE_XOPEN2KXSI


915 
	$posix_›í±
 (
__oÊag
Ë
__wur
;

918 #ifde‡
__USE_XOPEN


923 
	$gø¡±
 (
__fd
Ë
__THROW
;

927 
	$u∆ock±
 (
__fd
Ë
__THROW
;

932 *
	$±¢ame
 (
__fd
Ë
__THROW
 
__wur
;

935 #ifde‡
__USE_GNU


939 
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buÊí
)

940 
__THROW
 
	`__n⁄nuŒ
 ((2));

943 
	`gë±
 ();

946 #ifde‡
__USE_MISC


950 
	$gëlﬂdavg
 (
__lﬂdavg
[], 
__√Àm
)

951 
__THROW
 
	`__n⁄nuŒ
 ((1));

954 
	~<bôs/°dlib-Êﬂt.h
>

957 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__f‹tify_fun˘i⁄


958 
	~<bôs/°dlib.h
>

960 #ifde‡
__LDBL_COMPAT


961 
	~<bôs/°dlib-ldbl.h
>

965 #unde‡
__√ed_mÆloc_™d_ˇŒoc


967 
__END_DECLS


	@/usr/include/string.h

22 #i‚def 
_STRING_H


23 
	#_STRING_H
 1

	)

25 
	~<„©uªs.h
>

27 
	g__BEGIN_DECLS


30 
	#__√ed_size_t


	)

31 
	#__√ed_NULL


	)

32 
	~<°ddef.h
>

35 #i‡
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (4, 4)

36 
	#__CORRECT_ISO_CPP_STRING_H_PROTO


	)

40 
__BEGIN_NAMESPACE_STD


42 *
	$mem˝y
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
,

43 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

46 *
	$memmove
 (*
__de°
, c⁄° *
__§c
, 
size_t
 
__n
)

47 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

48 
__END_NAMESPACE_STD


53 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


54 *
	$memc˝y
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
,

55 
__c
, 
size_t
 
__n
)

56 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

60 
__BEGIN_NAMESPACE_STD


62 *
	$mem£t
 (*
__s
, 
__c
, 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

65 
	$memcmp
 (c⁄° *
__s1
, c⁄° *
__s2
, 
size_t
 
__n
)

66 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

69 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


72 *
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

73 
__THROW
 
	`__asm
 ("memchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

74 c⁄° *
	`memchr
 (c⁄° *
__s
, 
__c
, 
size_t
 
__n
)

75 
__THROW
 
	`__asm
 ("memchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

77 #ifde‡
__OPTIMIZE__


78 
__exã∫_Æways_ölöe
 *

79 
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
Ë
__THROW


81  
	`__buûtö_memchr
 (
__s
, 
__c
, 
__n
);

84 
__exã∫_Æways_ölöe
 const *

85 
	`memchr
 (c⁄° *
__s
, 
__c
, 
size_t
 
__n
Ë
__THROW


87  
	`__buûtö_memchr
 (
__s
, 
__c
, 
__n
);

90 
	}
}

92 *
	$memchr
 (c⁄° *
__s
, 
__c
, 
size_t
 
__n
)

93 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

95 
__END_NAMESPACE_STD


97 #ifde‡
__USE_GNU


100 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


101 "C++" *
	$øwmemchr
 (*
__s
, 
__c
)

102 
__THROW
 
	`__asm
 ("øwmemchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

103 "C++" c⁄° *
	$øwmemchr
 (c⁄° *
__s
, 
__c
)

104 
__THROW
 
	`__asm
 ("øwmemchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

106 *
	$øwmemchr
 (c⁄° *
__s
, 
__c
)

107 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

111 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


112 "C++" *
	$memrchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

113 
__THROW
 
	`__asm
 ("memrchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

114 "C++" c⁄° *
	$memrchr
 (c⁄° *
__s
, 
__c
, 
size_t
 
__n
)

115 
__THROW
 
	`__asm
 ("memrchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

117 *
	$memrchr
 (c⁄° *
__s
, 
__c
, 
size_t
 
__n
)

118 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

123 
__BEGIN_NAMESPACE_STD


125 *
	$°r˝y
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
)

126 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

128 *
	$°∫˝y
 (*
__ª°ri˘
 
__de°
,

129 c⁄° *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

130 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

133 *
	$°rˇt
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
)

134 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

136 *
	$°∫ˇt
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
,

137 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

140 
	$°rcmp
 (c⁄° *
__s1
, c⁄° *
__s2
)

141 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

143 
	$°∫cmp
 (c⁄° *
__s1
, c⁄° *
__s2
, 
size_t
 
__n
)

144 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

147 
	$°rcﬁl
 (c⁄° *
__s1
, c⁄° *
__s2
)

148 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

150 
size_t
 
	$°rx‰m
 (*
__ª°ri˘
 
__de°
,

151 c⁄° *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

152 
__THROW
 
	`__n⁄nuŒ
 ((2));

153 
__END_NAMESPACE_STD


155 #ifde‡
__USE_XOPEN2K8


159 
	~<xloˇÀ.h
>

162 
	$°rcﬁl_l
 (c⁄° *
__s1
, c⁄° *
__s2
, 
__loˇÀ_t
 
__l
)

163 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2, 3));

165 
size_t
 
	$°rx‰m_l
 (*
__de°
, c⁄° *
__§c
, 
size_t
 
__n
,

166 
__loˇÀ_t
 
__l
Ë
__THROW
 
	`__n⁄nuŒ
 ((2, 4));

169 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


171 *
	$°rdup
 (c⁄° *
__s
)

172 
__THROW
 
__©åibuã_mÆloc__
 
	`__n⁄nuŒ
 ((1));

178 #i‡
deföed
 
__USE_XOPEN2K8


179 *
	$°∫dup
 (c⁄° *
__°rög
, 
size_t
 
__n
)

180 
__THROW
 
__©åibuã_mÆloc__
 
	`__n⁄nuŒ
 ((1));

183 #i‡
deföed
 
__USE_GNU
 && deföed 
__GNUC__


185 
	#°rdu∑
(
s
) \

186 (
__exãnsi⁄__
 \

188 c⁄° *
__ﬁd
 = (
s
); \

189 
size_t
 
__Àn
 = 
	`°æí
 (
__ﬁd
) + 1; \

190 *
__√w
 = (*Ë
	`__buûtö_Æloˇ
 (
__Àn
); \

191 (*Ë
	`mem˝y
 (
__√w
, 
__ﬁd
, 
__Àn
); \

192 
	}
}))

	)

195 
	#°∫du∑
(
s
, 
n
) \

196 (
__exãnsi⁄__
 \

198 c⁄° *
__ﬁd
 = (
s
); \

199 
size_t
 
__Àn
 = 
	`°∫Àn
 (
__ﬁd
, (
n
)); \

200 *
__√w
 = (*Ë
	`__buûtö_Æloˇ
 (
__Àn
 + 1); \

201 
__√w
[
__Àn
] = '\0'; \

202 (*Ë
	`mem˝y
 (
__√w
, 
__ﬁd
, 
__Àn
); \

203 }))

	)

206 
	g__BEGIN_NAMESPACE_STD


208 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


211 *
°rchr
 (*
__s
, 
__c
)

212 
__THROW
 
__asm
 ("°rchr"Ë
__©åibuã_puª__
 
__n⁄nuŒ
 ((1));

213 c⁄° *
°rchr
 (c⁄° *
__s
, 
__c
)

214 
__THROW
 
__asm
 ("°rchr"Ë
__©åibuã_puª__
 
__n⁄nuŒ
 ((1));

216 #ifde‡
__OPTIMIZE__


217 
__exã∫_Æways_ölöe
 *

218 
°rchr
 (*
__s
, 
__c
Ë
	g__THROW


220  
__buûtö_°rchr
 (
__s
, 
__c
);

223 
__exã∫_Æways_ölöe
 const *

224 
°rchr
 (c⁄° *
__s
, 
__c
Ë
	g__THROW


226  
__buûtö_°rchr
 (
__s
, 
__c
);

231 *
	$°rchr
 (c⁄° *
__s
, 
__c
)

232 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

235 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


238 *
	`°ºchr
 (*
__s
, 
__c
)

239 
__THROW
 
	`__asm
 ("°ºchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

240 c⁄° *
	`°ºchr
 (c⁄° *
__s
, 
__c
)

241 
__THROW
 
	`__asm
 ("°ºchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

243 #ifde‡
__OPTIMIZE__


244 
__exã∫_Æways_ölöe
 *

245 
	`°ºchr
 (*
__s
, 
__c
Ë
__THROW


247  
	`__buûtö_°ºchr
 (
__s
, 
__c
);

250 
__exã∫_Æways_ölöe
 const *

251 
	`°ºchr
 (c⁄° *
__s
, 
__c
Ë
__THROW


253  
	`__buûtö_°ºchr
 (
__s
, 
__c
);

256 
	}
}

258 *
	$°ºchr
 (c⁄° *
__s
, 
__c
)

259 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

261 
__END_NAMESPACE_STD


263 #ifde‡
__USE_GNU


266 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


267 "C++" *
	$°rch∫ul
 (*
__s
, 
__c
)

268 
__THROW
 
	`__asm
 ("°rch∫ul"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

269 "C++" c⁄° *
	$°rch∫ul
 (c⁄° *
__s
, 
__c
)

270 
__THROW
 
	`__asm
 ("°rch∫ul"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

272 *
	$°rch∫ul
 (c⁄° *
__s
, 
__c
)

273 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

277 
__BEGIN_NAMESPACE_STD


280 
size_t
 
	$°rc•n
 (c⁄° *
__s
, c⁄° *
__ªje˘
)

281 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

284 
size_t
 
	$°r•n
 (c⁄° *
__s
, c⁄° *
__ac˚±
)

285 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

287 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


290 *
	`°Ωbrk
 (*
__s
, c⁄° *
__ac˚±
)

291 
__THROW
 
	`__asm
 ("°Ωbrk"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

292 c⁄° *
	`°Ωbrk
 (c⁄° *
__s
, c⁄° *
__ac˚±
)

293 
__THROW
 
	`__asm
 ("°Ωbrk"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

295 #ifde‡
__OPTIMIZE__


296 
__exã∫_Æways_ölöe
 *

297 
	`°Ωbrk
 (*
__s
, c⁄° *
__ac˚±
Ë
__THROW


299  
	`__buûtö_°Ωbrk
 (
__s
, 
__ac˚±
);

302 
__exã∫_Æways_ölöe
 const *

303 
	`°Ωbrk
 (c⁄° *
__s
, c⁄° *
__ac˚±
Ë
__THROW


305  
	`__buûtö_°Ωbrk
 (
__s
, 
__ac˚±
);

308 
	}
}

310 *
	$°Ωbrk
 (c⁄° *
__s
, c⁄° *
__ac˚±
)

311 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

314 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


317 *
	`°r°r
 (*
__hay°ack
, c⁄° *
__√edÀ
)

318 
__THROW
 
	`__asm
 ("°r°r"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

319 c⁄° *
	`°r°r
 (c⁄° *
__hay°ack
, c⁄° *
__√edÀ
)

320 
__THROW
 
	`__asm
 ("°r°r"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

322 #ifde‡
__OPTIMIZE__


323 
__exã∫_Æways_ölöe
 *

324 
	`°r°r
 (*
__hay°ack
, c⁄° *
__√edÀ
Ë
__THROW


326  
	`__buûtö_°r°r
 (
__hay°ack
, 
__√edÀ
);

329 
__exã∫_Æways_ölöe
 const *

330 
	`°r°r
 (c⁄° *
__hay°ack
, c⁄° *
__√edÀ
Ë
__THROW


332  
	`__buûtö_°r°r
 (
__hay°ack
, 
__√edÀ
);

335 
	}
}

337 *
	$°r°r
 (c⁄° *
__hay°ack
, c⁄° *
__√edÀ
)

338 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

343 *
	$°πok
 (*
__ª°ri˘
 
__s
, c⁄° *__ª°ri˘ 
__dñim
)

344 
__THROW
 
	`__n⁄nuŒ
 ((2));

345 
__END_NAMESPACE_STD


349 *
	$__°πok_r
 (*
__ª°ri˘
 
__s
,

350 c⁄° *
__ª°ri˘
 
__dñim
,

351 **
__ª°ri˘
 
__ßve_±r
)

352 
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

353 #ifde‡
__USE_POSIX


354 *
	$°πok_r
 (*
__ª°ri˘
 
__s
, c⁄° *__ª°ri˘ 
__dñim
,

355 **
__ª°ri˘
 
__ßve_±r
)

356 
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

359 #ifde‡
__USE_GNU


361 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


362 "C++" *
	$°rˇ£°r
 (*
__hay°ack
, c⁄° *
__√edÀ
)

363 
__THROW
 
	`__asm
 ("°rˇ£°r"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

364 "C++" c⁄° *
	$°rˇ£°r
 (c⁄° *
__hay°ack
,

365 c⁄° *
__√edÀ
)

366 
__THROW
 
	`__asm
 ("°rˇ£°r"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

368 *
	$°rˇ£°r
 (c⁄° *
__hay°ack
, c⁄° *
__√edÀ
)

369 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

373 #ifde‡
__USE_GNU


377 *
	$memmem
 (c⁄° *
__hay°ack
, 
size_t
 
__hay°ackÀn
,

378 c⁄° *
__√edÀ
, 
size_t
 
__√edÀÀn
)

379 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 3));

383 *
	$__memp˝y
 (*
__ª°ri˘
 
__de°
,

384 c⁄° *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

385 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

386 *
	$memp˝y
 (*
__ª°ri˘
 
__de°
,

387 c⁄° *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

388 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

392 
__BEGIN_NAMESPACE_STD


394 
size_t
 
	$°æí
 (c⁄° *
__s
)

395 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

396 
__END_NAMESPACE_STD


398 #ifdef 
__USE_XOPEN2K8


401 
size_t
 
	$°∫Àn
 (c⁄° *
__°rög
, 
size_t
 
__maxÀn
)

402 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

406 
__BEGIN_NAMESPACE_STD


408 *
	$°ªº‹
 (
__î∫um
Ë
__THROW
;

409 
__END_NAMESPACE_STD


410 #ifde‡
__USE_XOPEN2K


418 #i‡
deföed
 
__USE_XOPEN2K
 && !deföed 
__USE_GNU


421 #ifde‡
__REDIRECT_NTH


422 
	`__REDIRECT_NTH
 (
°ªº‹_r
,

423 (
__î∫um
, *
__buf
, 
size_t
 
__buÊí
),

424 
__xpg_°ªº‹_r
Ë
	`__n⁄nuŒ
 ((2));

426 
	$__xpg_°ªº‹_r
 (
__î∫um
, *
__buf
, 
size_t
 
__buÊí
)

427 
__THROW
 
	`__n⁄nuŒ
 ((2));

428 
	#°ªº‹_r
 
__xpg_°ªº‹_r


	)

433 *
	$°ªº‹_r
 (
__î∫um
, *
__buf
, 
size_t
 
__buÊí
)

434 
__THROW
 
	`__n⁄nuŒ
 ((2)Ë
__wur
;

438 #ifde‡
__USE_XOPEN2K8


440 *
	$°ªº‹_l
 (
__î∫um
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

446 
	$__bzîo
 (*
__s
, 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

448 #ifde‡
__USE_MISC


450 
	$bc›y
 (c⁄° *
__§c
, *
__de°
, 
size_t
 
__n
)

451 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

454 
	$bzîo
 (*
__s
, 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

457 
	$bcmp
 (c⁄° *
__s1
, c⁄° *
__s2
, 
size_t
 
__n
)

458 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

461 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


464 *
	`ödex
 (*
__s
, 
__c
)

465 
__THROW
 
	`__asm
 ("ödex"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

466 c⁄° *
	`ödex
 (c⁄° *
__s
, 
__c
)

467 
__THROW
 
	`__asm
 ("ödex"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

469 #i‡
deföed
 
__OPTIMIZE__
 && !deföed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


470 
__exã∫_Æways_ölöe
 *

471 
	`ödex
 (*
__s
, 
__c
Ë
__THROW


473  
	`__buûtö_ödex
 (
__s
, 
__c
);

476 
__exã∫_Æways_ölöe
 const *

477 
	`ödex
 (c⁄° *
__s
, 
__c
Ë
__THROW


479  
	`__buûtö_ödex
 (
__s
, 
__c
);

482 
	}
}

484 *
	$ödex
 (c⁄° *
__s
, 
__c
)

485 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

489 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


492 *
	`rödex
 (*
__s
, 
__c
)

493 
__THROW
 
	`__asm
 ("rödex"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

494 c⁄° *
	`rödex
 (c⁄° *
__s
, 
__c
)

495 
__THROW
 
	`__asm
 ("rödex"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

497 #i‡
deföed
 
__OPTIMIZE__
 && !deföed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


498 
__exã∫_Æways_ölöe
 *

499 
	`rödex
 (*
__s
, 
__c
Ë
__THROW


501  
	`__buûtö_rödex
 (
__s
, 
__c
);

504 
__exã∫_Æways_ölöe
 const *

505 
	`rödex
 (c⁄° *
__s
, 
__c
Ë
__THROW


507  
	`__buûtö_rödex
 (
__s
, 
__c
);

510 
	}
}

512 *
	$rödex
 (c⁄° *
__s
, 
__c
)

513 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

518 
	$ffs
 (
__i
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

522 #ifdef 
__USE_GNU


523 
	$ff¶
 (
__l
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

524 
__exãnsi⁄__
 
	$ff¶l
 (
__Œ
)

525 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

529 
	$°rˇ£cmp
 (c⁄° *
__s1
, c⁄° *
__s2
)

530 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

533 
	$°∫ˇ£cmp
 (c⁄° *
__s1
, c⁄° *
__s2
, 
size_t
 
__n
)

534 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

537 #ifdef 
__USE_GNU


540 
	$°rˇ£cmp_l
 (c⁄° *
__s1
, c⁄° *
__s2
,

541 
__loˇÀ_t
 
__loc
)

542 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2, 3));

544 
	$°∫ˇ£cmp_l
 (c⁄° *
__s1
, c⁄° *
__s2
,

545 
size_t
 
__n
, 
__loˇÀ_t
 
__loc
)

546 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2, 4));

549 #ifdef 
__USE_MISC


552 *
	$°r£p
 (**
__ª°ri˘
 
__°rögp
,

553 c⁄° *
__ª°ri˘
 
__dñim
)

554 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

557 #ifdef 
__USE_XOPEN2K8


559 *
	$°rsig«l
 (
__sig
Ë
__THROW
;

562 *
	$__°p˝y
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
)

563 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

564 *
	$°p˝y
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
)

565 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

569 *
	$__°≤˝y
 (*
__ª°ri˘
 
__de°
,

570 c⁄° *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

571 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

572 *
	$°≤˝y
 (*
__ª°ri˘
 
__de°
,

573 c⁄° *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

574 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

577 #ifdef 
__USE_GNU


579 
	$°rvîscmp
 (c⁄° *
__s1
, c⁄° *
__s2
)

580 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

583 *
	$°r‰y
 (*
__°rög
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

586 *
	$mem‰ob
 (*
__s
, 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

588 #i‚de‡
ba£«me


593 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


594 "C++" *
	$ba£«me
 (*
__fûíame
)

595 
__THROW
 
	`__asm
 ("ba£«me"Ë
	`__n⁄nuŒ
 ((1));

596 "C++" c⁄° *
	$ba£«me
 (c⁄° *
__fûíame
)

597 
__THROW
 
	`__asm
 ("ba£«me"Ë
	`__n⁄nuŒ
 ((1));

599 *
	$ba£«me
 (c⁄° *
__fûíame
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

605 #i‡
deföed
 
__GNUC__
 && __GNUC__ >= 2

606 #i‡
deföed
 
__OPTIMIZE__
 && !deföed 
__OPTIMIZE_SIZE__
 \

607 && !
deföed
 
__NO_INLINE__
 && !deföed 
__˝lu•lus


627 
	~<bôs/°rög.h
>

630 
	~<bôs/°rög2.h
>

633 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__f‹tify_fun˘i⁄


635 
	~<bôs/°rög3.h
>

639 #i‡
deföed
 
__USE_GNU
 && deföed 
__OPTIMIZE__
 \

640 && 
deföed
 
__exã∫_Æways_ölöe
 && 
	$__GNUC_PREREQ
 (3,2)

641 #i‡!
deföed
 
_FORCE_INLINES
 && !deföed 
_HAVE_STRING_ARCH_memp˝y


643 #unde‡
memp˝y


644 #unde‡
__memp˝y


645 
	#memp˝y
(
de°
, 
§c
, 
n
Ë
	`__memp˝y_ölöe
 (de°, src,Ç)

	)

646 
	#__memp˝y
(
de°
, 
§c
, 
n
Ë
	`__memp˝y_ölöe
 (de°, src,Ç)

	)

648 
__exã∫_Æways_ölöe
 *

649 
	$__memp˝y_ölöe
 (*
__ª°ri˘
 
__de°
,

650 c⁄° *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

652  (*Ë
	`mem˝y
 (
__de°
, 
__§c
, 
__n
) + __n;

653 
	}
}

658 
	g__END_DECLS


	@/usr/include/time.h

22 #i‚def 
_TIME_H


24 #i‡(! 
deföed
 
__√ed_time_t
 && !deföed 
__√ed_˛ock_t
 && \

25 ! 
deföed
 
	g__√ed_time•ec
)

26 
	#_TIME_H
 1

	)

27 
	~<„©uªs.h
>

29 
	g__BEGIN_DECLS


33 #ifdef 
_TIME_H


35 
	#__√ed_size_t


	)

36 
	#__√ed_NULL


	)

37 
	~<°ddef.h
>

41 
	~<bôs/time.h
>

44 #i‡!
deföed
 
__STRICT_ANSI__
 && !deföed 
__USE_XOPEN2K


45 #i‚de‡
CLK_TCK


46 
	#CLK_TCK
 
CLOCKS_PER_SEC


	)

52 #i‡!
deföed
 
__˛ock_t_deföed
 && (deföed 
_TIME_H
 || deföed 
__√ed_˛ock_t
)

53 
	#__˛ock_t_deföed
 1

	)

55 
	~<bôs/ty≥s.h
>

57 
__BEGIN_NAMESPACE_STD


59 
__˛ock_t
 
	t˛ock_t
;

60 
	g__END_NAMESPACE_STD


61 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_POSIX


62 
	$__USING_NAMESPACE_STD
(
˛ock_t
)

66 #unde‡
__√ed_˛ock_t


68 #i‡!
deföed
 
__time_t_deföed
 && (deföed 
_TIME_H
 || deföed 
__√ed_time_t
)

69 
	#__time_t_deföed
 1

	)

71 
	~<bôs/ty≥s.h
>

73 
__BEGIN_NAMESPACE_STD


75 
__time_t
 
	ttime_t
;

76 
__END_NAMESPACE_STD


77 #ifde‡
__USE_POSIX


78 
	$__USING_NAMESPACE_STD
(
time_t
)

82 #unde‡
__√ed_time_t


84 #i‡!
deföed
 
__˛ockid_t_deföed
 && \

85 ((
deföed
 
_TIME_H
 && deföed 
__USE_POSIX199309
Ë|| deföed 
__√ed_˛ockid_t
)

86 
	#__˛ockid_t_deföed
 1

	)

88 
	~<bôs/ty≥s.h
>

91 
__˛ockid_t
 
	t˛ockid_t
;

94 #unde‡
__˛ockid_time_t


96 #i‡!
deföed
 
__timî_t_deföed
 && \

97 ((
deföed
 
_TIME_H
 && deföed 
__USE_POSIX199309
Ë|| deföed 
__√ed_timî_t
)

98 
	#__timî_t_deföed
 1

	)

100 
	~<bôs/ty≥s.h
>

103 
__timî_t
 
	ttimî_t
;

106 #unde‡
__√ed_timî_t


109 #i‡(!
deföed
 
__time•ec_deföed
 \

110 && ((
deföed
 
_TIME_H
 \

111 && (
deföed
 
__USE_POSIX199309
 \

112 || 
deföed
 
__USE_ISOC11
)) \

113 || 
deföed
 
__√ed_time•ec
))

114 
	#__time•ec_deföed
 1

	)

116 
	~<bôs/ty≥s.h
>

120 
	stime•ec


122 
__time_t
 
tv_£c
;

123 
__sysˇŒ_¶⁄g_t
 
tv_n£c
;

127 #unde‡
__√ed_time•ec


130 #ifdef 
_TIME_H


131 
__BEGIN_NAMESPACE_STD


133 
	stm


135 
tm_£c
;

136 
tm_mö
;

137 
tm_hour
;

138 
tm_mday
;

139 
tm_m⁄
;

140 
tm_yór
;

141 
tm_wday
;

142 
tm_yday
;

143 
tm_isd°
;

145 #ifdef 
__USE_MISC


146 
tm_gmtoff
;

147 c⁄° *
tm_z⁄e
;

149 
__tm_gmtoff
;

150 c⁄° *
__tm_z⁄e
;

153 
__END_NAMESPACE_STD


154 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_POSIX


155 
	$__USING_NAMESPACE_STD
(
tm
)

159 #ifde‡
__USE_POSIX199309


161 
	sôimî•ec


163 
time•ec
 
ô_öãrvÆ
;

164 
time•ec
 
ô_vÆue
;

168 
sigevít
;

172 #ifde‡
__USE_XOPEN2K


173 #i‚de‡
__pid_t_deföed


174 
__pid_t
 
	tpid_t
;

175 
	#__pid_t_deföed


	)

180 #ifde‡
__USE_ISOC11


182 
	#TIME_UTC
 1

	)

186 
__BEGIN_NAMESPACE_STD


189 
˛ock_t
 
	$˛ock
 (Ë
__THROW
;

192 
time_t
 
	$time
 (
time_t
 *
__timî
Ë
__THROW
;

195 
	$dif·ime
 (
time_t
 
__time1
,Åime_à
__time0
)

196 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

199 
time_t
 
	$mktime
 (
tm
 *
__ç
Ë
__THROW
;

205 
size_t
 
	$°r·ime
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

206 c⁄° *
__ª°ri˘
 
__f‹m©
,

207 c⁄° 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

208 
__END_NAMESPACE_STD


210 #ifde‡
__USE_XOPEN


213 *
	$°Ωtime
 (c⁄° *
__ª°ri˘
 
__s
,

214 c⁄° *
__ª°ri˘
 
__fmt
, 
tm
 *
__ç
)

215 
__THROW
;

218 #ifde‡
__USE_XOPEN2K8


221 
	~<xloˇÀ.h
>

223 
size_t
 
	$°r·ime_l
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

224 c⁄° *
__ª°ri˘
 
__f‹m©
,

225 c⁄° 
tm
 *
__ª°ri˘
 
__ç
,

226 
__loˇÀ_t
 
__loc
Ë
__THROW
;

229 #ifde‡
__USE_GNU


230 *
	$°Ωtime_l
 (c⁄° *
__ª°ri˘
 
__s
,

231 c⁄° *
__ª°ri˘
 
__fmt
, 
tm
 *
__ç
,

232 
__loˇÀ_t
 
__loc
Ë
__THROW
;

236 
__BEGIN_NAMESPACE_STD


239 
tm
 *
	$gmtime
 (c⁄° 
time_t
 *
__timî
Ë
__THROW
;

243 
tm
 *
	$loˇ…ime
 (c⁄° 
time_t
 *
__timî
Ë
__THROW
;

244 
__END_NAMESPACE_STD


246 #ifde‡
__USE_POSIX


249 
tm
 *
	$gmtime_r
 (c⁄° 
time_t
 *
__ª°ri˘
 
__timî
,

250 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

254 
tm
 *
	$loˇ…ime_r
 (c⁄° 
time_t
 *
__ª°ri˘
 
__timî
,

255 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

258 
__BEGIN_NAMESPACE_STD


261 *
	$as˘ime
 (c⁄° 
tm
 *
__ç
Ë
__THROW
;

264 *
	$˘ime
 (c⁄° 
time_t
 *
__timî
Ë
__THROW
;

265 
__END_NAMESPACE_STD


267 #ifde‡
__USE_POSIX


272 *
	$as˘ime_r
 (c⁄° 
tm
 *
__ª°ri˘
 
__ç
,

273 *
__ª°ri˘
 
__buf
Ë
__THROW
;

276 *
	$˘ime_r
 (c⁄° 
time_t
 *
__ª°ri˘
 
__timî
,

277 *
__ª°ri˘
 
__buf
Ë
__THROW
;

282 *
__tz«me
[2];

283 
__daylight
;

284 
__timez⁄e
;

287 #ifdef 
__USE_POSIX


289 *
tz«me
[2];

293 
	$tz£t
 (Ë
__THROW
;

296 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


297 
daylight
;

298 
timez⁄e
;

301 #ifde‡
__USE_MISC


304 
	$°ime
 (c⁄° 
time_t
 *
__whí
Ë
__THROW
;

310 
	#__i¶óp
(
yór
) \

311 ((
yór
Ë% 4 =0 && ((yórË% 100 !0 || (yórË% 400 =0))

	)

314 #ifde‡
__USE_MISC


319 
time_t
 
	$timegm
 (
tm
 *
__ç
Ë
__THROW
;

322 
time_t
 
	$timñoˇl
 (
tm
 *
__ç
Ë
__THROW
;

325 
	$dysize
 (
__yór
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

329 #ifde‡
__USE_POSIX199309


334 
	`«no¶ìp
 (c⁄° 
time•ec
 *
__ªque°ed_time
,

335 
time•ec
 *
__ªmaöög
);

339 
	$˛ock_gëªs
 (
˛ockid_t
 
__˛ock_id
, 
time•ec
 *
__ªs
Ë
__THROW
;

342 
	$˛ock_gëtime
 (
˛ockid_t
 
__˛ock_id
, 
time•ec
 *
__ç
Ë
__THROW
;

345 
	$˛ock_£âime
 (
˛ockid_t
 
__˛ock_id
, c⁄° 
time•ec
 *
__ç
)

346 
__THROW
;

348 #ifde‡
__USE_XOPEN2K


353 
	`˛ock_«no¶ìp
 (
˛ockid_t
 
__˛ock_id
, 
__Êags
,

354 c⁄° 
time•ec
 *
__ªq
,

355 
time•ec
 *
__ªm
);

358 
	$˛ock_gë˝u˛ockid
 (
pid_t
 
__pid
, 
˛ockid_t
 *
__˛ock_id
Ë
__THROW
;

363 
	$timî_¸óã
 (
˛ockid_t
 
__˛ock_id
,

364 
sigevít
 *
__ª°ri˘
 
__evp
,

365 
timî_t
 *
__ª°ri˘
 
__timîid
Ë
__THROW
;

368 
	$timî_dñëe
 (
timî_t
 
__timîid
Ë
__THROW
;

371 
	$timî_£âime
 (
timî_t
 
__timîid
, 
__Êags
,

372 c⁄° 
ôimî•ec
 *
__ª°ri˘
 
__vÆue
,

373 
ôimî•ec
 *
__ª°ri˘
 
__ovÆue
Ë
__THROW
;

376 
	$timî_gëtime
 (
timî_t
 
__timîid
, 
ôimî•ec
 *
__vÆue
)

377 
__THROW
;

380 
	$timî_gëovîrun
 (
timî_t
 
__timîid
Ë
__THROW
;

384 #ifde‡
__USE_ISOC11


386 
	$time•ec_gë
 (
time•ec
 *
__ts
, 
__ba£
)

387 
__THROW
 
	`__n⁄nuŒ
 ((1));

391 #ifde‡
__USE_XOPEN_EXTENDED


403 
gëd©e_îr
;

412 
tm
 *
	`gëd©e
 (c⁄° *
__°rög
);

415 #ifde‡
__USE_GNU


426 
	`gëd©e_r
 (c⁄° *
__ª°ri˘
 
__°rög
,

427 
tm
 *
__ª°ri˘
 
__ªsbuÂ
);

430 
__END_DECLS


	@/usr/include/unistd.h

22 #i‚def 
_UNISTD_H


23 
	#_UNISTD_H
 1

	)

25 
	~<„©uªs.h
>

27 
	g__BEGIN_DECLS


32 #ifde‡
__USE_XOPEN2K8


34 
	#_POSIX_VERSION
 200809L

	)

35 #ñi‡
deföed
 
__USE_XOPEN2K


37 
	#_POSIX_VERSION
 200112L

	)

38 #ñi‡
deföed
 
__USE_POSIX199506


40 
	#_POSIX_VERSION
 199506L

	)

41 #ñi‡
deföed
 
__USE_POSIX199309


43 
	#_POSIX_VERSION
 199309L

	)

46 
	#_POSIX_VERSION
 199009L

	)

52 #ifde‡
__USE_XOPEN2K8


53 
	#__POSIX2_THIS_VERSION
 200809L

	)

55 #ñi‡
deföed
 
__USE_XOPEN2K


57 
	#__POSIX2_THIS_VERSION
 200112L

	)

58 #ñi‡
deföed
 
__USE_POSIX199506


60 
	#__POSIX2_THIS_VERSION
 199506L

	)

63 
	#__POSIX2_THIS_VERSION
 199209L

	)

67 
	#_POSIX2_VERSION
 
__POSIX2_THIS_VERSION


	)

70 
	#_POSIX2_C_VERSION
 
__POSIX2_THIS_VERSION


	)

74 
	#_POSIX2_C_BIND
 
__POSIX2_THIS_VERSION


	)

78 
	#_POSIX2_C_DEV
 
__POSIX2_THIS_VERSION


	)

82 
	#_POSIX2_SW_DEV
 
__POSIX2_THIS_VERSION


	)

86 
	#_POSIX2_LOCALEDEF
 
__POSIX2_THIS_VERSION


	)

89 #ifde‡
__USE_XOPEN2K8


90 
	#_XOPEN_VERSION
 700

	)

91 #ñi‡
deföed
 
__USE_XOPEN2K


92 
	#_XOPEN_VERSION
 600

	)

93 #ñi‡
deföed
 
__USE_UNIX98


94 
	#_XOPEN_VERSION
 500

	)

96 
	#_XOPEN_VERSION
 4

	)

100 
	#_XOPEN_XCU_VERSION
 4

	)

103 
	#_XOPEN_XPG2
 1

	)

104 
	#_XOPEN_XPG3
 1

	)

105 
	#_XOPEN_XPG4
 1

	)

108 
	#_XOPEN_UNIX
 1

	)

111 
	#_XOPEN_CRYPT
 1

	)

115 
	#_XOPEN_ENH_I18N
 1

	)

118 
	#_XOPEN_LEGACY
 1

	)

205 
	~<bôs/posix_›t.h
>

208 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


209 
	~<bôs/ívú⁄míts.h
>

213 
	#STDIN_FILENO
 0

	)

214 
	#STDOUT_FILENO
 1

	)

215 
	#STDERR_FILENO
 2

	)

220 
	~<bôs/ty≥s.h
>

222 #i‚def 
__ssize_t_deföed


223 
__ssize_t
 
	tssize_t
;

224 
	#__ssize_t_deföed


	)

227 
	#__√ed_size_t


	)

228 
	#__√ed_NULL


	)

229 
	~<°ddef.h
>

231 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K


234 #i‚de‡
__gid_t_deföed


235 
__gid_t
 
	tgid_t
;

236 
	#__gid_t_deföed


	)

239 #i‚de‡
__uid_t_deföed


240 
__uid_t
 
	tuid_t
;

241 
	#__uid_t_deföed


	)

244 #i‚de‡
__off_t_deföed


245 #i‚de‡
__USE_FILE_OFFSET64


246 
__off_t
 
	toff_t
;

248 
__off64_t
 
	toff_t
;

250 
	#__off_t_deföed


	)

252 #i‡
deföed
 
__USE_LARGEFILE64
 && !deföed 
__off64_t_deföed


253 
__off64_t
 
	toff64_t
;

254 
	#__off64_t_deföed


	)

257 #i‚de‡
__u£c⁄ds_t_deföed


258 
__u£c⁄ds_t
 
	tu£c⁄ds_t
;

259 
	#__u£c⁄ds_t_deföed


	)

262 #i‚de‡
__pid_t_deföed


263 
__pid_t
 
	tpid_t
;

264 
	#__pid_t_deföed


	)

268 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K


269 #i‚de‡
__öçå_t_deföed


270 
__öçå_t
 
	töçå_t
;

271 
	#__öçå_t_deföed


	)

275 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


276 #i‚de‡
__sockÀn_t_deföed


277 
__sockÀn_t
 
	tsockÀn_t
;

278 
	#__sockÀn_t_deföed


	)

284 
	#R_OK
 4

	)

285 
	#W_OK
 2

	)

286 
	#X_OK
 1

	)

287 
	#F_OK
 0

	)

290 
	$ac˚ss
 (c⁄° *
__«me
, 
__ty≥
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

292 #ifde‡
__USE_GNU


295 
	$euidac˚ss
 (c⁄° *
__«me
, 
__ty≥
)

296 
__THROW
 
	`__n⁄nuŒ
 ((1));

299 
	$óc˚ss
 (c⁄° *
__«me
, 
__ty≥
)

300 
__THROW
 
	`__n⁄nuŒ
 ((1));

303 #ifde‡
__USE_ATFILE


307 
	$Ác˚sßt
 (
__fd
, c⁄° *
__fûe
, 
__ty≥
, 
__Êag
)

308 
__THROW
 
	`__n⁄nuŒ
 ((2)Ë
__wur
;

313 #i‚def 
_STDIO_H


314 
	#SEEK_SET
 0

	)

315 
	#SEEK_CUR
 1

	)

316 
	#SEEK_END
 2

	)

317 #ifde‡
__USE_GNU


318 
	#SEEK_DATA
 3

	)

319 
	#SEEK_HOLE
 4

	)

323 #i‡
deföed
 
__USE_MISC
 && !deföed 
L_SET


325 
	#L_SET
 
SEEK_SET


	)

326 
	#L_INCR
 
SEEK_CUR


	)

327 
	#L_XTND
 
SEEK_END


	)

336 #i‚de‡
__USE_FILE_OFFSET64


337 
__off_t
 
	$l£ek
 (
__fd
, 
__off_t
 
__off£t
, 
__whí˚
Ë
__THROW
;

339 #ifde‡
__REDIRECT_NTH


340 
__off64_t
 
	`__REDIRECT_NTH
 (
l£ek
,

341 (
__fd
, 
__off64_t
 
__off£t
, 
__whí˚
),

342 
l£ek64
);

344 
	#l£ek
 
l£ek64


	)

347 #ifde‡
__USE_LARGEFILE64


348 
__off64_t
 
	$l£ek64
 (
__fd
, 
__off64_t
 
__off£t
, 
__whí˚
)

349 
__THROW
;

356 
	`˛o£
 (
__fd
);

363 
ssize_t
 
	$ªad
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
Ë
__wur
;

369 
ssize_t
 
	$wrôe
 (
__fd
, c⁄° *
__buf
, 
size_t
 
__n
Ë
__wur
;

371 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K8


372 #i‚de‡
__USE_FILE_OFFSET64


379 
ssize_t
 
	$¥ód
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

380 
__off_t
 
__off£t
Ë
__wur
;

387 
ssize_t
 
	$pwrôe
 (
__fd
, c⁄° *
__buf
, 
size_t
 
__n
,

388 
__off_t
 
__off£t
Ë
__wur
;

390 #ifde‡
__REDIRECT


391 
ssize_t
 
	`__REDIRECT
 (
¥ód
, (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

392 
__off64_t
 
__off£t
),

393 
¥ód64
Ë
__wur
;

394 
ssize_t
 
	`__REDIRECT
 (
pwrôe
, (
__fd
, c⁄° *
__buf
,

395 
size_t
 
__nbyãs
, 
__off64_t
 
__off£t
),

396 
pwrôe64
Ë
__wur
;

398 
	#¥ód
 
¥ód64


	)

399 
	#pwrôe
 
pwrôe64


	)

403 #ifde‡
__USE_LARGEFILE64


407 
ssize_t
 
	$¥ód64
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

408 
__off64_t
 
__off£t
Ë
__wur
;

411 
ssize_t
 
	$pwrôe64
 (
__fd
, c⁄° *
__buf
, 
size_t
 
__n
,

412 
__off64_t
 
__off£t
Ë
__wur
;

420 
	$pùe
 (
__pùedes
[2]Ë
__THROW
 
__wur
;

422 #ifde‡
__USE_GNU


425 
	$pùe2
 (
__pùedes
[2], 
__Êags
Ë
__THROW
 
__wur
;

435 
	$Æ¨m
 (
__£c⁄ds
Ë
__THROW
;

447 
	`¶ìp
 (
__£c⁄ds
);

449 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K8
) \

450 || 
deföed
 
__USE_MISC


455 
__u£c⁄ds_t
 
	$uÆ¨m
 (
__u£c⁄ds_t
 
__vÆue
, __u£c⁄ds_à
__öãrvÆ
)

456 
__THROW
;

463 
	`u¶ìp
 (
__u£c⁄ds_t
 
__u£c⁄ds
);

472 
	`∑u£
 ();

476 
	$chown
 (c⁄° *
__fûe
, 
__uid_t
 
__ow√r
, 
__gid_t
 
__group
)

477 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

479 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


481 
	$fchown
 (
__fd
, 
__uid_t
 
__ow√r
, 
__gid_t
 
__group
Ë
__THROW
 
__wur
;

486 
	$lchown
 (c⁄° *
__fûe
, 
__uid_t
 
__ow√r
, 
__gid_t
 
__group
)

487 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

491 #ifde‡
__USE_ATFILE


494 
	$fchow«t
 (
__fd
, c⁄° *
__fûe
, 
__uid_t
 
__ow√r
,

495 
__gid_t
 
__group
, 
__Êag
)

496 
__THROW
 
	`__n⁄nuŒ
 ((2)Ë
__wur
;

500 
	$chdú
 (c⁄° *
__∑th
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

502 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


504 
	$fchdú
 (
__fd
Ë
__THROW
 
__wur
;

514 *
	$gëcwd
 (*
__buf
, 
size_t
 
__size
Ë
__THROW
 
__wur
;

516 #ifdef 
__USE_GNU


520 *
	$gë_cuºít_dú_«me
 (Ë
__THROW
;

523 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K8
) \

524 || 
deföed
 
__USE_MISC


528 *
	$gëwd
 (*
__buf
)

529 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__©åibuã_dïªˇãd__
 
__wur
;

534 
	$dup
 (
__fd
Ë
__THROW
 
__wur
;

537 
	$dup2
 (
__fd
, 
__fd2
Ë
__THROW
;

539 #ifde‡
__USE_GNU


542 
	$dup3
 (
__fd
, 
__fd2
, 
__Êags
Ë
__THROW
;

546 **
__ívú⁄
;

547 #ifde‡
__USE_GNU


548 **
ívú⁄
;

554 
	$execve
 (c⁄° *
__∑th
, *c⁄° 
__¨gv
[],

555 *c⁄° 
__ívp
[]Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

557 #ifde‡
__USE_XOPEN2K8


560 
	$„xecve
 (
__fd
, *c⁄° 
__¨gv
[], *c⁄° 
__ívp
[])

561 
__THROW
 
	`__n⁄nuŒ
 ((2));

566 
	$execv
 (c⁄° *
__∑th
, *c⁄° 
__¨gv
[])

567 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

571 
	$exe˛e
 (c⁄° *
__∑th
, c⁄° *
__¨g
, ...)

572 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

576 
	$exe˛
 (c⁄° *
__∑th
, c⁄° *
__¨g
, ...)

577 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

581 
	$execvp
 (c⁄° *
__fûe
, *c⁄° 
__¨gv
[])

582 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

587 
	$exe˛p
 (c⁄° *
__fûe
, c⁄° *
__¨g
, ...)

588 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

590 #ifde‡
__USE_GNU


593 
	$execv≥
 (c⁄° *
__fûe
, *c⁄° 
__¨gv
[],

594 *c⁄° 
__ívp
[])

595 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

599 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


601 
	$ni˚
 (
__öc
Ë
__THROW
 
__wur
;

606 
	$_exô
 (
__°©us
Ë
	`__©åibuã__
 ((
__n‹ëu∫__
));

612 
	~<bôs/c⁄‚ame.h
>

615 
	$∑thc⁄f
 (c⁄° *
__∑th
, 
__«me
)

616 
__THROW
 
	`__n⁄nuŒ
 ((1));

619 
	$Â©hc⁄f
 (
__fd
, 
__«me
Ë
__THROW
;

622 
	$sysc⁄f
 (
__«me
Ë
__THROW
;

624 #ifdef 
__USE_POSIX2


626 
size_t
 
	$c⁄f°r
 (
__«me
, *
__buf
, 
size_t
 
__Àn
Ë
__THROW
;

631 
__pid_t
 
	$gëpid
 (Ë
__THROW
;

634 
__pid_t
 
	$gëµid
 (Ë
__THROW
;

637 
__pid_t
 
	$gëpgΩ
 (Ë
__THROW
;

640 
__pid_t
 
	$__gëpgid
 (
__pid_t
 
__pid
Ë
__THROW
;

641 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


642 
__pid_t
 
	$gëpgid
 (
__pid_t
 
__pid
Ë
__THROW
;

649 
	$£çgid
 (
__pid_t
 
__pid
, __pid_à
__pgid
Ë
__THROW
;

651 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED


663 
	$£çgΩ
 (Ë
__THROW
;

670 
__pid_t
 
	$£tsid
 (Ë
__THROW
;

672 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


674 
__pid_t
 
	$gësid
 (
__pid_t
 
__pid
Ë
__THROW
;

678 
__uid_t
 
	$gëuid
 (Ë
__THROW
;

681 
__uid_t
 
	$gëeuid
 (Ë
__THROW
;

684 
__gid_t
 
	$gëgid
 (Ë
__THROW
;

687 
__gid_t
 
	$gëegid
 (Ë
__THROW
;

692 
	$gëgroups
 (
__size
, 
__gid_t
 
__li°
[]Ë
__THROW
 
__wur
;

694 #ifdef 
__USE_GNU


696 
	$group_membî
 (
__gid_t
 
__gid
Ë
__THROW
;

703 
	$£tuid
 (
__uid_t
 
__uid
Ë
__THROW
 
__wur
;

705 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED


708 
	$£åeuid
 (
__uid_t
 
__ruid
, __uid_à
__euid
Ë
__THROW
 
__wur
;

711 #ifde‡
__USE_XOPEN2K


713 
	$£ãuid
 (
__uid_t
 
__uid
Ë
__THROW
 
__wur
;

720 
	$£tgid
 (
__gid_t
 
__gid
Ë
__THROW
 
__wur
;

722 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED


725 
	$£åegid
 (
__gid_t
 
__rgid
, __gid_à
__egid
Ë
__THROW
 
__wur
;

728 #ifde‡
__USE_XOPEN2K


730 
	$£ãgid
 (
__gid_t
 
__gid
Ë
__THROW
 
__wur
;

733 #ifde‡
__USE_GNU


736 
	$gëªsuid
 (
__uid_t
 *
__ruid
, __uid_à*
__euid
, __uid_à*
__suid
)

737 
__THROW
;

741 
	$gëªsgid
 (
__gid_t
 *
__rgid
, __gid_à*
__egid
, __gid_à*
__sgid
)

742 
__THROW
;

746 
	$£åesuid
 (
__uid_t
 
__ruid
, __uid_à
__euid
, __uid_à
__suid
)

747 
__THROW
 
__wur
;

751 
	$£åesgid
 (
__gid_t
 
__rgid
, __gid_à
__egid
, __gid_à
__sgid
)

752 
__THROW
 
__wur
;

759 
__pid_t
 
	$f‹k
 (Ë
__THROWNL
;

761 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K8
) \

762 || 
deföed
 
__USE_MISC


767 
__pid_t
 
	$vf‹k
 (Ë
__THROW
;

773 *
	$ây«me
 (
__fd
Ë
__THROW
;

777 
	$ây«me_r
 (
__fd
, *
__buf
, 
size_t
 
__buÊí
)

778 
__THROW
 
	`__n⁄nuŒ
 ((2)Ë
__wur
;

782 
	$ißây
 (
__fd
Ë
__THROW
;

784 #i‡
deföed
 
__USE_MISC
 \

785 || (
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_UNIX98
)

788 
	$ây¶Ÿ
 (Ë
__THROW
;

793 
	$lök
 (c⁄° *
__‰om
, c⁄° *
__to
)

794 
__THROW
 
	`__n⁄nuŒ
 ((1, 2)Ë
__wur
;

796 #ifde‡
__USE_ATFILE


799 
	$lök©
 (
__‰omfd
, c⁄° *
__‰om
, 
__tofd
,

800 c⁄° *
__to
, 
__Êags
)

801 
__THROW
 
	`__n⁄nuŒ
 ((2, 4)Ë
__wur
;

804 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K


806 
	$symlök
 (c⁄° *
__‰om
, c⁄° *
__to
)

807 
__THROW
 
	`__n⁄nuŒ
 ((1, 2)Ë
__wur
;

812 
ssize_t
 
	$ªadlök
 (c⁄° *
__ª°ri˘
 
__∑th
,

813 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
)

814 
__THROW
 
	`__n⁄nuŒ
 ((1, 2)Ë
__wur
;

817 #ifde‡
__USE_ATFILE


819 
	$symlök©
 (c⁄° *
__‰om
, 
__tofd
,

820 c⁄° *
__to
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 3)Ë
__wur
;

823 
ssize_t
 
	$ªadlök©
 (
__fd
, c⁄° *
__ª°ri˘
 
__∑th
,

824 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
)

825 
__THROW
 
	`__n⁄nuŒ
 ((2, 3)Ë
__wur
;

829 
	$u∆ök
 (c⁄° *
__«me
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

831 #ifde‡
__USE_ATFILE


833 
	$u∆ök©
 (
__fd
, c⁄° *
__«me
, 
__Êag
)

834 
__THROW
 
	`__n⁄nuŒ
 ((2));

838 
	$rmdú
 (c⁄° *
__∑th
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

842 
__pid_t
 
	$tcgëpgΩ
 (
__fd
Ë
__THROW
;

845 
	$tc£çgΩ
 (
__fd
, 
__pid_t
 
__pgΩ_id
Ë
__THROW
;

852 *
	`gëlogö
 ();

853 #i‡
deföed
 
__USE_REENTRANT
 || deföed 
__USE_POSIX199506


860 
	$gëlogö_r
 (*
__«me
, 
size_t
 
__«me_Àn
Ë
	`__n⁄nuŒ
 ((1));

863 #ifdef 
__USE_MISC


865 
	$£éogö
 (c⁄° *
__«me
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

869 #ifdef 
__USE_POSIX2


873 
	#__√ed_gë›t


	)

874 
	~<gë›t.h
>

878 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


882 
	$gëho°«me
 (*
__«me
, 
size_t
 
__Àn
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

886 #i‡
deföed
 
__USE_MISC


889 
	$£tho°«me
 (c⁄° *
__«me
, 
size_t
 
__Àn
)

890 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

894 
	$£tho°id
 (
__id
Ë
__THROW
 
__wur
;

900 
	$gëdomaö«me
 (*
__«me
, 
size_t
 
__Àn
)

901 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

902 
	$£tdomaö«me
 (c⁄° *
__«me
, 
size_t
 
__Àn
)

903 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

909 
	$vh™gup
 (Ë
__THROW
;

912 
	$ªvoke
 (c⁄° *
__fûe
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

920 
	$¥ofû
 (*
__ßm∂e_buf„r
, 
size_t
 
__size
,

921 
size_t
 
__off£t
, 
__sˇÀ
)

922 
__THROW
 
	`__n⁄nuŒ
 ((1));

928 
	$ac˘
 (c⁄° *
__«me
Ë
__THROW
;

932 *
	$gëu£rshñl
 (Ë
__THROW
;

933 
	$ídu£rshñl
 (Ë
__THROW
;

934 
	$£tu£rshñl
 (Ë
__THROW
;

940 
	$d´m⁄
 (
__nochdú
, 
__no˛o£
Ë
__THROW
 
__wur
;

944 #i‡
deföed
 
__USE_MISC
 || (deföed 
__USE_XOPEN
 && !deföed 
__USE_XOPEN2K
)

947 
	$chroŸ
 (c⁄° *
__∑th
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

951 *
	$gë∑ss
 (c⁄° *
__¥om±
Ë
	`__n⁄nuŒ
 ((1));

959 
	`fsync
 (
__fd
);

962 #ifde‡
__USE_GNU


965 
	$syncfs
 (
__fd
Ë
__THROW
;

969 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED


972 
	`gëho°id
 ();

975 
	$sync
 (Ë
__THROW
;

978 #i‡
deföed
 
__USE_MISC
 || !deföed 
__USE_XOPEN2K


981 
	$gë∑gesize
 (Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

986 
	$gëdèbÀsize
 (Ë
__THROW
;

992 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


995 #i‚de‡
__USE_FILE_OFFSET64


996 
	$åunˇã
 (c⁄° *
__fûe
, 
__off_t
 
__Àngth
)

997 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

999 #ifde‡
__REDIRECT_NTH


1000 
	`__REDIRECT_NTH
 (
åunˇã
,

1001 (c⁄° *
__fûe
, 
__off64_t
 
__Àngth
),

1002 
åunˇã64
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

1004 
	#åunˇã
 
åunˇã64


	)

1007 #ifde‡
__USE_LARGEFILE64


1008 
	$åunˇã64
 (c⁄° *
__fûe
, 
__off64_t
 
__Àngth
)

1009 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

1014 #i‡
deföed
 
__USE_POSIX199309
 \

1015 || 
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K


1018 #i‚de‡
__USE_FILE_OFFSET64


1019 
	$·runˇã
 (
__fd
, 
__off_t
 
__Àngth
Ë
__THROW
 
__wur
;

1021 #ifde‡
__REDIRECT_NTH


1022 
	`__REDIRECT_NTH
 (
·runˇã
, (
__fd
, 
__off64_t
 
__Àngth
),

1023 
·runˇã64
Ë
__wur
;

1025 
	#·runˇã
 
·runˇã64


	)

1028 #ifde‡
__USE_LARGEFILE64


1029 
	$·runˇã64
 (
__fd
, 
__off64_t
 
__Àngth
Ë
__THROW
 
__wur
;

1035 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K
) \

1036 || 
deföed
 
__USE_MISC


1040 
	$brk
 (*
__addr
Ë
__THROW
 
__wur
;

1046 *
	$sbrk
 (
öçå_t
 
__dñè
Ë
__THROW
;

1050 #ifde‡
__USE_MISC


1061 
	$sysˇŒ
 (
__sy¢o
, ...Ë
__THROW
;

1066 #i‡(
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED
Ë&& !deföed 
F_LOCK


1078 
	#F_ULOCK
 0

	)

1079 
	#F_LOCK
 1

	)

1080 
	#F_TLOCK
 2

	)

1081 
	#F_TEST
 3

	)

1083 #i‚de‡
__USE_FILE_OFFSET64


1084 
	$lockf
 (
__fd
, 
__cmd
, 
__off_t
 
__Àn
Ë
__wur
;

1086 #ifde‡
__REDIRECT


1087 
	`__REDIRECT
 (
lockf
, (
__fd
, 
__cmd
, 
__off64_t
 
__Àn
),

1088 
lockf64
Ë
__wur
;

1090 
	#lockf
 
lockf64


	)

1093 #ifde‡
__USE_LARGEFILE64


1094 
	$lockf64
 (
__fd
, 
__cmd
, 
__off64_t
 
__Àn
Ë
__wur
;

1099 #ifde‡
__USE_GNU


1104 
	#TEMP_FAILURE_RETRY
(
ex¥essi⁄
) \

1105 (
__exãnsi⁄__
 \

1106 ({ 
__ªsu…
; \

1107 dÿ
__ªsu…
 = (Ë(
ex¥essi⁄
); \

1108 
__ªsu…
 =-1L && 
î∫o
 =
EINTR
); \

1109 
__ªsu…
; 
	}
}))

	)

1112 #i‡
deföed
 
__USE_POSIX199309
 || deföed 
__USE_UNIX98


1115 
fd©async
 (
__fûdes
);

1121 #ifdef 
__USE_XOPEN


1123 *
	$¸y±
 (c⁄° *
__key
, c⁄° *
__ß…
)

1124 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

1128 
	$í¸y±
 (*
__glibc_block
, 
__edÊag
)

1129 
__THROW
 
	`__n⁄nuŒ
 ((1));

1136 
	$swab
 (c⁄° *
__ª°ri˘
 
__‰om
, *__ª°ri˘ 
__to
,

1137 
ssize_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

1143 #i‡
deföed
 
__USE_XOPEN
 && !deföed 
__USE_XOPEN2K


1145 *
	$˘îmid
 (*
__s
Ë
__THROW
;

1150 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__f‹tify_fun˘i⁄


1151 
	~<bôs/uni°d.h
>

1154 
__END_DECLS


	@/usr/include/alloca.h

18 #i‚def 
_ALLOCA_H


19 
	#_ALLOCA_H
 1

	)

21 
	~<„©uªs.h
>

23 
	#__√ed_size_t


	)

24 
	~<°ddef.h
>

26 
	g__BEGIN_DECLS


29 #unde‡
Æloˇ


32 *
	$Æloˇ
 (
size_t
 
__size
Ë
__THROW
;

34 #ifdef 
__GNUC__


35 
	#Æloˇ
(
size
Ë
	`__buûtö_Æloˇ
 (size)

	)

38 
__END_DECLS


	@/usr/include/endian.h

18 #i‚def 
_ENDIAN_H


19 
	#_ENDIAN_H
 1

	)

21 
	~<„©uªs.h
>

31 
	#__LITTLE_ENDIAN
 1234

	)

32 
	#__BIG_ENDIAN
 4321

	)

33 
	#__PDP_ENDIAN
 3412

	)

36 
	~<bôs/ídün.h
>

40 #i‚de‡
__FLOAT_WORD_ORDER


41 
	#__FLOAT_WORD_ORDER
 
__BYTE_ORDER


	)

44 #ifdef 
__USE_MISC


45 
	#LITTLE_ENDIAN
 
__LITTLE_ENDIAN


	)

46 
	#BIG_ENDIAN
 
__BIG_ENDIAN


	)

47 
	#PDP_ENDIAN
 
__PDP_ENDIAN


	)

48 
	#BYTE_ORDER
 
__BYTE_ORDER


	)

51 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


52 
	#__LONG_LONG_PAIR
(
HI
, 
LO
ËLO, 
	)
HI

53 #ñi‡
__BYTE_ORDER
 =
__BIG_ENDIAN


54 
	#__LONG_LONG_PAIR
(
HI
, 
LO
ËHI, 
	)
LO

58 #i‡
deföed
 
__USE_MISC
 && !deföed 
__ASSEMBLER__


60 
	~<bôs/byãsw≠.h
>

62 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


63 
	#htobe16
(
x
Ë
	`__bsw≠_16
 (x)

	)

64 
	#htﬁe16
(
x
Ë(x)

	)

65 
	#be16toh
(
x
Ë
	`__bsw≠_16
 (x)

	)

66 
	#À16toh
(
x
Ë(x)

	)

68 
	#htobe32
(
x
Ë
	`__bsw≠_32
 (x)

	)

69 
	#htﬁe32
(
x
Ë(x)

	)

70 
	#be32toh
(
x
Ë
	`__bsw≠_32
 (x)

	)

71 
	#À32toh
(
x
Ë(x)

	)

73 
	#htobe64
(
x
Ë
	`__bsw≠_64
 (x)

	)

74 
	#htﬁe64
(
x
Ë(x)

	)

75 
	#be64toh
(
x
Ë
	`__bsw≠_64
 (x)

	)

76 
	#À64toh
(
x
Ë(x)

	)

79 
	#htobe16
(
x
Ë(x)

	)

80 
	#htﬁe16
(
x
Ë
	`__bsw≠_16
 (x)

	)

81 
	#be16toh
(
x
Ë(x)

	)

82 
	#À16toh
(
x
Ë
	`__bsw≠_16
 (x)

	)

84 
	#htobe32
(
x
Ë(x)

	)

85 
	#htﬁe32
(
x
Ë
	`__bsw≠_32
 (x)

	)

86 
	#be32toh
(
x
Ë(x)

	)

87 
	#À32toh
(
x
Ë
	`__bsw≠_32
 (x)

	)

89 
	#htobe64
(
x
Ë(x)

	)

90 
	#htﬁe64
(
x
Ë
	`__bsw≠_64
 (x)

	)

91 
	#be64toh
(
x
Ë(x)

	)

92 
	#À64toh
(
x
Ë
	`__bsw≠_64
 (x)

	)

	@/usr/include/features.h

18 #i‚def 
_FEATURES_H


19 
	#_FEATURES_H
 1

	)

97 #unde‡
__USE_ISOC11


98 #unde‡
__USE_ISOC99


99 #unde‡
__USE_ISOC95


100 #unde‡
__USE_ISOCXX11


101 #unde‡
__USE_POSIX


102 #unde‡
__USE_POSIX2


103 #unde‡
__USE_POSIX199309


104 #unde‡
__USE_POSIX199506


105 #unde‡
__USE_XOPEN


106 #unde‡
__USE_XOPEN_EXTENDED


107 #unde‡
__USE_UNIX98


108 #unde‡
__USE_XOPEN2K


109 #unde‡
__USE_XOPEN2KXSI


110 #unde‡
__USE_XOPEN2K8


111 #unde‡
__USE_XOPEN2K8XSI


112 #unde‡
__USE_LARGEFILE


113 #unde‡
__USE_LARGEFILE64


114 #unde‡
__USE_FILE_OFFSET64


115 #unde‡
__USE_MISC


116 #unde‡
__USE_ATFILE


117 #unde‡
__USE_GNU


118 #unde‡
__USE_REENTRANT


119 #unde‡
__USE_FORTIFY_LEVEL


120 #unde‡
__KERNEL_STRICT_NAMES


124 #i‚de‡
_LOOSE_KERNEL_NAMES


125 
	#__KERNEL_STRICT_NAMES


	)

135 #i‡
deföed
 
__GNUC__
 && deföed 
__GNUC_MINOR__


136 
	#__GNUC_PREREQ
(
maj
, 
mö
) \

137 ((
__GNUC__
 << 16Ë+ 
__GNUC_MINOR__
 >((
maj
Ë<< 16Ë+ (
mö
))

	)

139 
	#__GNUC_PREREQ
(
maj
, 
mö
Ë0

	)

146 #i‡(
deföed
 
_BSD_SOURCE
 || deföed 
_SVID_SOURCE
) \

147 && !
deföed
 
	g_DEFAULT_SOURCE


152 #unde‡
_DEFAULT_SOURCE


153 
	#_DEFAULT_SOURCE
 1

	)

157 #ifde‡
_GNU_SOURCE


158 #unde‡
_ISOC95_SOURCE


159 
	#_ISOC95_SOURCE
 1

	)

160 #unde‡
_ISOC99_SOURCE


161 
	#_ISOC99_SOURCE
 1

	)

162 #unde‡
_ISOC11_SOURCE


163 
	#_ISOC11_SOURCE
 1

	)

164 #unde‡
_POSIX_SOURCE


165 
	#_POSIX_SOURCE
 1

	)

166 #unde‡
_POSIX_C_SOURCE


167 
	#_POSIX_C_SOURCE
 200809L

	)

168 #unde‡
_XOPEN_SOURCE


169 
	#_XOPEN_SOURCE
 700

	)

170 #unde‡
_XOPEN_SOURCE_EXTENDED


171 
	#_XOPEN_SOURCE_EXTENDED
 1

	)

172 #unde‡
_LARGEFILE64_SOURCE


173 
	#_LARGEFILE64_SOURCE
 1

	)

174 #unde‡
_DEFAULT_SOURCE


175 
	#_DEFAULT_SOURCE
 1

	)

176 #unde‡
_ATFILE_SOURCE


177 
	#_ATFILE_SOURCE
 1

	)

182 #i‡(
deföed
 
_DEFAULT_SOURCE
 \

183 || (!
deföed
 
	g__STRICT_ANSI__
 \

184 && !
deföed
 
	g_ISOC99_SOURCE
 \

185 && !
deföed
 
	g_POSIX_SOURCE
 && !deföed 
	g_POSIX_C_SOURCE
 \

186 && !
deföed
 
	g_XOPEN_SOURCE
))

187 #unde‡
_DEFAULT_SOURCE


188 
	#_DEFAULT_SOURCE
 1

	)

192 #i‡(
deföed
 
_ISOC11_SOURCE
 \

193 || (
deföed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 201112L))

194 
	#__USE_ISOC11
 1

	)

198 #i‡(
deföed
 
_ISOC99_SOURCE
 || deföed 
_ISOC11_SOURCE
 \

199 || (
deföed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L))

200 
	#__USE_ISOC99
 1

	)

204 #i‡(
deföed
 
_ISOC99_SOURCE
 || deföed 
_ISOC11_SOURCE
 \

205 || (
deföed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199409L))

206 
	#__USE_ISOC95
 1

	)

213 #i‡((
deföed
 
__˝lu•lus
 && __cplusplus >= 201103L) \

214 || 
deföed
 
__GXX_EXPERIMENTAL_CXX0X__
)

215 
	#__USE_ISOCXX11
 1

	)

221 #ifde‡
_DEFAULT_SOURCE


222 #i‡!
deföed
 
_POSIX_SOURCE
 && !deföed 
_POSIX_C_SOURCE


223 
	#__USE_POSIX_IMPLICITLY
 1

	)

225 #unde‡
_POSIX_SOURCE


226 
	#_POSIX_SOURCE
 1

	)

227 #unde‡
_POSIX_C_SOURCE


228 
	#_POSIX_C_SOURCE
 200809L

	)

230 #i‡((!
deföed
 
__STRICT_ANSI__
 \

231 || (
deföed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) >= 500)) \

232 && !
deföed
 
_POSIX_SOURCE
 && !deföed 
_POSIX_C_SOURCE
)

233 
	#_POSIX_SOURCE
 1

	)

234 #i‡
deföed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 500

235 
	#_POSIX_C_SOURCE
 2

	)

236 #ñi‡
deföed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 600

237 
	#_POSIX_C_SOURCE
 199506L

	)

238 #ñi‡
deföed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 700

239 
	#_POSIX_C_SOURCE
 200112L

	)

241 
	#_POSIX_C_SOURCE
 200809L

	)

243 
	#__USE_POSIX_IMPLICITLY
 1

	)

246 #i‡(
deföed
 
_POSIX_SOURCE
 \

247 || (
deföed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >= 1) \

248 || 
deföed
 
_XOPEN_SOURCE
)

249 
	#__USE_POSIX
 1

	)

252 #i‡
deföed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >2 || deföed 
_XOPEN_SOURCE


253 
	#__USE_POSIX2
 1

	)

256 #i‡
deföed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 199309L

257 
	#__USE_POSIX199309
 1

	)

260 #i‡
deföed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 199506L

261 
	#__USE_POSIX199506
 1

	)

264 #i‡
deföed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 200112L

265 
	#__USE_XOPEN2K
 1

	)

266 #unde‡
__USE_ISOC95


267 
	#__USE_ISOC95
 1

	)

268 #unde‡
__USE_ISOC99


269 
	#__USE_ISOC99
 1

	)

272 #i‡
deföed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 200809L

273 
	#__USE_XOPEN2K8
 1

	)

274 #unde‡
_ATFILE_SOURCE


275 
	#_ATFILE_SOURCE
 1

	)

278 #ifdef 
_XOPEN_SOURCE


279 
	#__USE_XOPEN
 1

	)

280 #i‡(
_XOPEN_SOURCE
 - 0) >= 500

281 
	#__USE_XOPEN_EXTENDED
 1

	)

282 
	#__USE_UNIX98
 1

	)

283 #unde‡
_LARGEFILE_SOURCE


284 
	#_LARGEFILE_SOURCE
 1

	)

285 #i‡(
_XOPEN_SOURCE
 - 0) >= 600

286 #i‡(
_XOPEN_SOURCE
 - 0) >= 700

287 
	#__USE_XOPEN2K8
 1

	)

288 
	#__USE_XOPEN2K8XSI
 1

	)

290 
	#__USE_XOPEN2K
 1

	)

291 
	#__USE_XOPEN2KXSI
 1

	)

292 #unde‡
__USE_ISOC95


293 
	#__USE_ISOC95
 1

	)

294 #unde‡
__USE_ISOC99


295 
	#__USE_ISOC99
 1

	)

298 #ifde‡
_XOPEN_SOURCE_EXTENDED


299 
	#__USE_XOPEN_EXTENDED
 1

	)

304 #ifde‡
_LARGEFILE_SOURCE


305 
	#__USE_LARGEFILE
 1

	)

308 #ifde‡
_LARGEFILE64_SOURCE


309 
	#__USE_LARGEFILE64
 1

	)

312 #i‡
deföed
 
_FILE_OFFSET_BITS
 && _FILE_OFFSET_BITS == 64

313 
	#__USE_FILE_OFFSET64
 1

	)

316 #i‡
deföed
 
_DEFAULT_SOURCE


317 
	#__USE_MISC
 1

	)

320 #ifdef 
_ATFILE_SOURCE


321 
	#__USE_ATFILE
 1

	)

324 #ifdef 
_GNU_SOURCE


325 
	#__USE_GNU
 1

	)

328 #i‡
deföed
 
_REENTRANT
 || deföed 
_THREAD_SAFE


329 
	#__USE_REENTRANT
 1

	)

332 #i‡
deföed
 
_FORTIFY_SOURCE
 && _FORTIFY_SOURCE > 0 \

333 && 
__GNUC_PREREQ
 (4, 1Ë&& 
deföed
 
	g__OPTIMIZE__
 && __OPTIMIZE__ > 0

334 #i‡
_FORTIFY_SOURCE
 > 1

335 
	#__USE_FORTIFY_LEVEL
 2

	)

337 
	#__USE_FORTIFY_LEVEL
 1

	)

340 
	#__USE_FORTIFY_LEVEL
 0

	)

345 
	~<°dc-¥edef.h
>

353 #unde‡
__GNU_LIBRARY__


354 
	#__GNU_LIBRARY__
 6

	)

358 
	#__GLIBC__
 2

	)

359 
	#__GLIBC_MINOR__
 23

	)

361 
	#__GLIBC_PREREQ
(
maj
, 
mö
) \

362 ((
__GLIBC__
 << 16Ë+ 
__GLIBC_MINOR__
 >((
maj
Ë<< 16Ë+ (
mö
))

	)

365 #i‚de‡
__ASSEMBLER__


366 #i‚de‡
_SYS_CDEFS_H


367 
	~<sys/cdefs.h
>

372 #i‡
deföed
 
__USE_FILE_OFFSET64
 && !deföed 
__REDIRECT


373 
	#__USE_LARGEFILE
 1

	)

374 
	#__USE_LARGEFILE64
 1

	)

380 #i‡
__GNUC_PREREQ
 (2, 7Ë&& 
deföed
 
__OPTIMIZE__
 \

381 && !
deföed
 
	g__OPTIMIZE_SIZE__
 && !deföed 
	g__NO_INLINE__
 \

382 && 
deföed
 
	g__exã∫_ölöe


383 
	#__USE_EXTERN_INLINES
 1

	)

391 
	~<gnu/°ubs.h
>

	@/usr/include/getopt.h

19 #i‚de‡
_GETOPT_H


21 #i‚de‡
__√ed_gë›t


22 
	#_GETOPT_H
 1

	)

32 #i‡!
deföed
 
__GNU_LIBRARY__


33 
	~<˘y≥.h
>

36 #i‚de‡
__THROW


37 #i‚de‡
__GNUC_PREREQ


38 
	#__GNUC_PREREQ
(
maj
, 
mö
Ë(0)

	)

40 #i‡
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (2,8)

41 
	#__THROW
 
	`throw
 ()

	)

43 
	#__THROW


	)

47 #ifdef 
__˝lu•lus


57 *
›èrg
;

71 
›töd
;

76 
›ãº
;

80 
›t›t
;

82 #i‚de‡
__√ed_gë›t


104 
	s›ti⁄


106 c⁄° *
	g«me
;

109 
	ghas_¨g
;

110 *
	gÊag
;

111 
	gvÆ
;

116 
	#no_¨gumít
 0

	)

117 
	#ªquúed_¨gumít
 1

	)

118 
	#›ti⁄Æ_¨gumít
 2

	)

146 #ifde‡
__GNU_LIBRARY__


150 
gë›t
 (
___¨gc
, *c⁄° *
___¨gv
, c⁄° *
__sh‹t›ts
)

151 
__THROW
;

153 #i‡
deföed
 
__√ed_gë›t
 && deföed 
__USE_POSIX2
 \

154 && !
deföed
 
	g__USE_POSIX_IMPLICITLY
 && !deföed 
	g__USE_GNU


158 #ifde‡
__REDIRECT


159 
__REDIRECT_NTH
 (
gë›t
, (
___¨gc
, *c⁄° *
___¨gv
,

160 c⁄° *
__sh‹t›ts
),

161 
__posix_gë›t
);

163 
__posix_gë›t
 (
___¨gc
, *c⁄° *
___¨gv
,

164 c⁄° *
__sh‹t›ts
Ë
__THROW
;

165 
	#gë›t
 
__posix_gë›t


	)

169 
gë›t
 ();

172 #i‚de‡
__√ed_gë›t


173 
gë›t_l⁄g
 (
___¨gc
, *c⁄° *
___¨gv
,

174 c⁄° *
__sh‹t›ts
,

175 c⁄° 
›ti⁄
 *
__l⁄g›ts
, *
__l⁄göd
)

176 
__THROW
;

177 
gë›t_l⁄g_⁄ly
 (
___¨gc
, *c⁄° *
___¨gv
,

178 c⁄° *
__sh‹t›ts
,

179 c⁄° 
›ti⁄
 *
__l⁄g›ts
, *
__l⁄göd
)

180 
__THROW
;

184 #ifdef 
__˝lu•lus


189 #unde‡
__√ed_gë›t


	@/usr/include/libio.h

28 #i‚de‡
_IO_STDIO_H


29 
	#_IO_STDIO_H


	)

31 
	~<_G_c⁄fig.h
>

33 
	#_IO_Âos_t
 
_G_Âos_t


	)

34 
	#_IO_Âos64_t
 
_G_Âos64_t


	)

35 
	#_IO_size_t
 
size_t


	)

36 
	#_IO_ssize_t
 
__ssize_t


	)

37 
	#_IO_off_t
 
__off_t


	)

38 
	#_IO_off64_t
 
__off64_t


	)

39 
	#_IO_pid_t
 
__pid_t


	)

40 
	#_IO_uid_t
 
__uid_t


	)

41 
	#_IO_ic⁄v_t
 
_G_ic⁄v_t


	)

42 
	#_IO_HAVE_ST_BLKSIZE
 
_G_HAVE_ST_BLKSIZE


	)

43 
	#_IO_BUFSIZ
 
_G_BUFSIZ


	)

44 
	#_IO_va_li°
 
_G_va_li°


	)

45 
	#_IO_wöt_t
 
wöt_t


	)

48 
	#__√ed___va_li°


	)

49 
	~<°d¨g.h
>

50 #ifde‡
__GNUC_VA_LIST


51 #unde‡
_IO_va_li°


52 
	#_IO_va_li°
 
__gnuc_va_li°


	)

55 #i‚de‡
__P


56 
	~<sys/cdefs.h
>

59 
	#_IO_UNIFIED_JUMPTABLES
 1

	)

61 #i‚de‡
EOF


62 
	#EOF
 (-1)

	)

64 #i‚de‡
NULL


65 #i‡
deföed
 
__GNUG__
 && \

66 (
	g__GNUC__
 > 2 || (__GNUC__ =2 && 
__GNUC_MINOR__
 >= 8))

67 
	#NULL
 (
__nuŒ
)

	)

69 #i‡!
deföed
(
__˝lu•lus
)

70 
	#NULL
 ((*)0)

	)

72 
	#NULL
 (0)

	)

77 
	#_IOS_INPUT
 1

	)

78 
	#_IOS_OUTPUT
 2

	)

79 
	#_IOS_ATEND
 4

	)

80 
	#_IOS_APPEND
 8

	)

81 
	#_IOS_TRUNC
 16

	)

82 
	#_IOS_NOCREATE
 32

	)

83 
	#_IOS_NOREPLACE
 64

	)

84 
	#_IOS_BIN
 128

	)

92 
	#_IO_MAGIC
 0xFBAD0000

	)

93 
	#_OLD_STDIO_MAGIC
 0xFABC0000

	)

94 
	#_IO_MAGIC_MASK
 0xFFFF0000

	)

95 
	#_IO_USER_BUF
 1

	)

96 
	#_IO_UNBUFFERED
 2

	)

97 
	#_IO_NO_READS
 4

	)

98 
	#_IO_NO_WRITES
 8

	)

99 
	#_IO_EOF_SEEN
 0x10

	)

100 
	#_IO_ERR_SEEN
 0x20

	)

101 
	#_IO_DELETE_DONT_CLOSE
 0x40

	)

102 
	#_IO_LINKED
 0x80

	)

103 
	#_IO_IN_BACKUP
 0x100

	)

104 
	#_IO_LINE_BUF
 0x200

	)

105 
	#_IO_TIED_PUT_GET
 0x400

	)

106 
	#_IO_CURRENTLY_PUTTING
 0x800

	)

107 
	#_IO_IS_APPENDING
 0x1000

	)

108 
	#_IO_IS_FILEBUF
 0x2000

	)

109 
	#_IO_BAD_SEEN
 0x4000

	)

110 
	#_IO_USER_LOCK
 0x8000

	)

112 
	#_IO_FLAGS2_MMAP
 1

	)

113 
	#_IO_FLAGS2_NOTCANCEL
 2

	)

114 #ifde‡
_LIBC


115 
	#_IO_FLAGS2_FORTIFY
 4

	)

117 
	#_IO_FLAGS2_USER_WBUF
 8

	)

118 #ifde‡
_LIBC


119 
	#_IO_FLAGS2_SCANF_STD
 16

	)

120 
	#_IO_FLAGS2_NOCLOSE
 32

	)

121 
	#_IO_FLAGS2_CLOEXEC
 64

	)

125 
	#_IO_SKIPWS
 01

	)

126 
	#_IO_LEFT
 02

	)

127 
	#_IO_RIGHT
 04

	)

128 
	#_IO_INTERNAL
 010

	)

129 
	#_IO_DEC
 020

	)

130 
	#_IO_OCT
 040

	)

131 
	#_IO_HEX
 0100

	)

132 
	#_IO_SHOWBASE
 0200

	)

133 
	#_IO_SHOWPOINT
 0400

	)

134 
	#_IO_UPPERCASE
 01000

	)

135 
	#_IO_SHOWPOS
 02000

	)

136 
	#_IO_SCIENTIFIC
 04000

	)

137 
	#_IO_FIXED
 010000

	)

138 
	#_IO_UNITBUF
 020000

	)

139 
	#_IO_STDIO
 040000

	)

140 
	#_IO_DONT_CLOSE
 0100000

	)

141 
	#_IO_BOOLALPHA
 0200000

	)

144 
_IO_jump_t
; 
	g_IO_FILE
;

147 #ifde‡
_IO_MTSAFE_IO


150 
	t_IO_lock_t
;

156 
	s_IO_m¨kî
 {

157 
_IO_m¨kî
 *
	m_√xt
;

158 
_IO_FILE
 *
	m_sbuf
;

162 
	m_pos
;

164 
£t_°ªampos
(
°ªampos
 
•
Ë{ 
	m_•os
 = sp; }

165 
£t_off£t
(
off£t
Ë{ 
	m_pos
 = off£t; 
	m_•os
 = (
°ªampos
)(-2); }

166 
	mpublic
:

167 
°ªamm¨kî
(
°ªambuf
 *
sb
);

168 ~
°ªamm¨kî
();

169 
ßvög
(Ë{  
	m_•os
 == -2; }

170 
dñè
(
°ªamm¨kî
&);

171 
dñè
();

176 
	e__codecvt_ªsu…


178 
	m__codecvt_ok
,

179 
	m__codecvt_∑πül
,

180 
	m__codecvt_îr‹
,

181 
	m__codecvt_noc⁄v


184 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


187 
	s_IO_codecvt


189 (*
	m__codecvt_de°r
Ë(
	m_IO_codecvt
 *);

190 
__codecvt_ªsu…
 (*
__codecvt_do_out
Ë(
	m_IO_codecvt
 *,

191 
	m__mb°©e_t
 *,

192 c⁄° 
	mwch¨_t
 *,

193 c⁄° 
	mwch¨_t
 *,

194 c⁄° 
	mwch¨_t
 **, *,

196 
__codecvt_ªsu…
 (*
__codecvt_do_unshi·
Ë(
	m_IO_codecvt
 *,

197 
	m__mb°©e_t
 *, *,

199 
__codecvt_ªsu…
 (*
__codecvt_do_ö
Ë(
	m_IO_codecvt
 *,

200 
	m__mb°©e_t
 *,

202 c⁄° **, 
	mwch¨_t
 *,

203 
	mwch¨_t
 *, wchar_t **);

204 (*
	m__codecvt_do_ícodög
Ë(
	m_IO_codecvt
 *);

205 (*
	m__codecvt_do_Æways_noc⁄v
Ë(
	m_IO_codecvt
 *);

206 (*
	m__codecvt_do_Àngth
Ë(
	m_IO_codecvt
 *, 
	m__mb°©e_t
 *,

207 c⁄° *, c⁄° *, 
	m_IO_size_t
);

208 (*
	m__codecvt_do_max_Àngth
Ë(
	m_IO_codecvt
 *);

210 
_IO_ic⁄v_t
 
	m__cd_ö
;

211 
_IO_ic⁄v_t
 
	m__cd_out
;

215 
	s_IO_wide_d©a


217 
wch¨_t
 *
	m_IO_ªad_±r
;

218 
wch¨_t
 *
	m_IO_ªad_íd
;

219 
wch¨_t
 *
	m_IO_ªad_ba£
;

220 
wch¨_t
 *
	m_IO_wrôe_ba£
;

221 
wch¨_t
 *
	m_IO_wrôe_±r
;

222 
wch¨_t
 *
	m_IO_wrôe_íd
;

223 
wch¨_t
 *
	m_IO_buf_ba£
;

224 
wch¨_t
 *
	m_IO_buf_íd
;

226 
wch¨_t
 *
	m_IO_ßve_ba£
;

227 
wch¨_t
 *
	m_IO_backup_ba£
;

229 
wch¨_t
 *
	m_IO_ßve_íd
;

231 
__mb°©e_t
 
	m_IO_°©e
;

232 
__mb°©e_t
 
	m_IO_œ°_°©e
;

233 
_IO_codecvt
 
	m_codecvt
;

235 
wch¨_t
 
	m_sh‹tbuf
[1];

237 c⁄° 
_IO_jump_t
 *
	m_wide_vèbÀ
;

241 
	s_IO_FILE
 {

242 
	m_Êags
;

243 
	#_IO_fûe_Êags
 
_Êags


	)

247 * 
	m_IO_ªad_±r
;

248 * 
	m_IO_ªad_íd
;

249 * 
	m_IO_ªad_ba£
;

250 * 
	m_IO_wrôe_ba£
;

251 * 
	m_IO_wrôe_±r
;

252 * 
	m_IO_wrôe_íd
;

253 * 
	m_IO_buf_ba£
;

254 * 
	m_IO_buf_íd
;

256 *
	m_IO_ßve_ba£
;

257 *
	m_IO_backup_ba£
;

258 *
	m_IO_ßve_íd
;

260 
_IO_m¨kî
 *
	m_m¨kîs
;

262 
_IO_FILE
 *
	m_chaö
;

264 
	m_fûío
;

266 
	m_blksize
;

268 
	m_Êags2
;

270 
_IO_off_t
 
	m_ﬁd_off£t
;

272 
	#__HAVE_COLUMN


	)

274 
	m_cur_cﬁumn
;

275 sig√d 
	m_vèbÀ_off£t
;

276 
	m_sh‹tbuf
[1];

280 
_IO_lock_t
 *
	m_lock
;

281 #ifde‡
_IO_USE_OLD_IO_FILE


284 
	s_IO_FILE_com∂ëe


286 
_IO_FILE
 
	m_fûe
;

288 #i‡
deföed
 
_G_IO_IO_FILE_VERSION
 && _G_IO_IO_FILE_VERSION == 0x20001

289 
_IO_off64_t
 
	m_off£t
;

290 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


292 
_IO_codecvt
 *
	m_codecvt
;

293 
_IO_wide_d©a
 *
	m_wide_d©a
;

294 
_IO_FILE
 *
	m_‰ìªs_li°
;

295 *
	m_‰ìªs_buf
;

297 *
	m__∑d1
;

298 *
	m__∑d2
;

299 *
	m__∑d3
;

300 *
	m__∑d4
;

302 
size_t
 
	m__∑d5
;

303 
	m_mode
;

305 
	m_unu£d2
[15 *  (Ë- 4 *  (*Ë-  (
size_t
)];

309 #i‚de‡
__˝lu•lus


310 
_IO_FILE
 
	t_IO_FILE
;

313 
	g_IO_FILE_∂us
;

315 
_IO_FILE_∂us
 
_IO_2_1_°dö_
;

316 
_IO_FILE_∂us
 
_IO_2_1_°dout_
;

317 
_IO_FILE_∂us
 
_IO_2_1_°dîr_
;

318 #i‚de‡
_LIBC


319 
	#_IO_°dö
 ((
_IO_FILE
*)(&
_IO_2_1_°dö_
))

	)

320 
	#_IO_°dout
 ((
_IO_FILE
*)(&
_IO_2_1_°dout_
))

	)

321 
	#_IO_°dîr
 ((
_IO_FILE
*)(&
_IO_2_1_°dîr_
))

	)

323 
_IO_FILE
 *
_IO_°dö
 
©åibuã_hiddí
;

324 
_IO_FILE
 *
_IO_°dout
 
©åibuã_hiddí
;

325 
_IO_FILE
 *
_IO_°dîr
 
©åibuã_hiddí
;

333 
__ssize_t
 
	t__io_ªad_‚
 (*
	t__cookõ
, *
	t__buf
, 
	tsize_t
 
	t__nbyãs
);

341 
__ssize_t
 
	t__io_wrôe_‚
 (*
	t__cookõ
, c⁄° *
	t__buf
,

342 
	tsize_t
 
	t__n
);

350 
	t__io_£ek_‚
 (*
	t__cookõ
, 
	t_IO_off64_t
 *
	t__pos
, 
	t__w
);

353 
	t__io_˛o£_‚
 (*
	t__cookõ
);

356 #ifde‡
_GNU_SOURCE


358 
__io_ªad_‚
 
	tcookõ_ªad_fun˘i⁄_t
;

359 
__io_wrôe_‚
 
	tcookõ_wrôe_fun˘i⁄_t
;

360 
__io_£ek_‚
 
	tcookõ_£ek_fun˘i⁄_t
;

361 
__io_˛o£_‚
 
	tcookõ_˛o£_fun˘i⁄_t
;

366 
__io_ªad_‚
 *
	mªad
;

367 
__io_wrôe_‚
 *
	mwrôe
;

368 
__io_£ek_‚
 *
	m£ek
;

369 
__io_˛o£_‚
 *
	m˛o£
;

370 } 
	t_IO_cookõ_io_fun˘i⁄s_t
;

371 
_IO_cookõ_io_fun˘i⁄s_t
 
	tcookõ_io_fun˘i⁄s_t
;

373 
	g_IO_cookõ_fûe
;

376 
_IO_cookõ_öô
 (
_IO_cookõ_fûe
 *
__cfûe
, 
__ªad_wrôe
,

377 *
__cookõ
, 
_IO_cookõ_io_fun˘i⁄s_t
 
__‚s
);

381 #ifde‡
__˝lu•lus


385 
__undîÊow
 (
_IO_FILE
 *);

386 
__uÊow
 (
_IO_FILE
 *);

387 
__ovîÊow
 (
_IO_FILE
 *, );

388 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


389 
_IO_wöt_t
 
__wundîÊow
 (
_IO_FILE
 *);

390 
_IO_wöt_t
 
__wuÊow
 (
_IO_FILE
 *);

391 
_IO_wöt_t
 
__wovîÊow
 (
_IO_FILE
 *, _IO_wint_t);

394 #i‡ 
__GNUC__
 >= 3

395 
	#_IO_BE
(
ex¥
, 
ªs
Ë
	`__buûtö_ex≥˘
 (”x¥),Ñes)

	)

397 
	#_IO_BE
(
ex¥
, 
ªs
Ë”x¥)

	)

400 
	#_IO_gëc_u∆ocked
(
_Â
) \

401 (
	`_IO_BE
 ((
_Â
)->
_IO_ªad_±r
 >(_Â)->
_IO_ªad_íd
, 0) \

402 ? 
	`__uÊow
 (
_Â
Ë: *(*Ë(_Â)->
_IO_ªad_±r
++)

	)

403 
	#_IO_≥ekc_u∆ocked
(
_Â
) \

404 (
	`_IO_BE
 ((
_Â
)->
_IO_ªad_±r
 >(_Â)->
_IO_ªad_íd
, 0) \

405 && 
	`__undîÊow
 (
_Â
Ë=
EOF
 ? EOF \

406 : *(*Ë(
_Â
)->
_IO_ªad_±r
)

	)

407 
	#_IO_putc_u∆ocked
(
_ch
, 
_Â
) \

408 (
	`_IO_BE
 ((
_Â
)->
_IO_wrôe_±r
 >(_Â)->
_IO_wrôe_íd
, 0) \

409 ? 
	`__ovîÊow
 (
_Â
, (Ë(
_ch
)) \

410 : (Ë(*(
_Â
)->
_IO_wrôe_±r
++ = (
_ch
)))

	)

412 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


413 
	#_IO_gëwc_u∆ocked
(
_Â
) \

414 (
	`_IO_BE
 ((
_Â
)->
_wide_d©a
 =
NULL
 \

415 || ((
_Â
)->
_wide_d©a
->
_IO_ªad_±r
 \

416 >(
_Â
)->
_wide_d©a
->
_IO_ªad_íd
), 0) \

417 ? 
	`__wuÊow
 (
_Â
Ë: (
_IO_wöt_t
Ë*(_Â)->
_wide_d©a
->
_IO_ªad_±r
++)

	)

418 
	#_IO_putwc_u∆ocked
(
_wch
, 
_Â
) \

419 (
	`_IO_BE
 ((
_Â
)->
_wide_d©a
 =
NULL
 \

420 || ((
_Â
)->
_wide_d©a
->
_IO_wrôe_±r
 \

421 >(
_Â
)->
_wide_d©a
->
_IO_wrôe_íd
), 0) \

422 ? 
	`__wovîÊow
 (
_Â
, 
_wch
) \

423 : (
_IO_wöt_t
Ë(*(
_Â
)->
_wide_d©a
->
_IO_wrôe_±r
++ = (
_wch
)))

	)

426 
	#_IO_„of_u∆ocked
(
__Â
Ë(((__Â)->
_Êags
 & 
_IO_EOF_SEEN
Ë!0)

	)

427 
	#_IO_„º‹_u∆ocked
(
__Â
Ë(((__Â)->
_Êags
 & 
_IO_ERR_SEEN
Ë!0)

	)

429 
_IO_gëc
 (
_IO_FILE
 *
__Â
);

430 
_IO_putc
 (
__c
, 
_IO_FILE
 *
__Â
);

431 
_IO_„of
 (
_IO_FILE
 *
__Â
Ë
__THROW
;

432 
_IO_„º‹
 (
_IO_FILE
 *
__Â
Ë
__THROW
;

434 
_IO_≥ekc_locked
 (
_IO_FILE
 *
__Â
);

437 
	#_IO_PENDING_OUTPUT_COUNT
(
_Â
) \

438 ((
_Â
)->
_IO_wrôe_±r
 - (_Â)->
_IO_wrôe_ba£
)

	)

440 
_IO_Êockfûe
 (
_IO_FILE
 *Ë
__THROW
;

441 
_IO_fu∆ockfûe
 (
_IO_FILE
 *Ë
__THROW
;

442 
_IO_·rylockfûe
 (
_IO_FILE
 *Ë
__THROW
;

444 #ifde‡
_IO_MTSAFE_IO


445 
	#_IO_≥ekc
(
_Â
Ë
	`_IO_≥ekc_locked
 (_Â)

	)

446 
	#_IO_Êockfûe
(
_Â
) \

447 i‡(((
_Â
)->
_Êags
 & 
_IO_USER_LOCK
Ë=0Ë
	`_IO_Êockfûe
 (_Â)

	)

448 
	#_IO_fu∆ockfûe
(
_Â
) \

449 i‡(((
_Â
)->
_Êags
 & 
_IO_USER_LOCK
Ë=0Ë
	`_IO_fu∆ockfûe
 (_Â)

	)

451 
	#_IO_≥ekc
(
_Â
Ë
	`_IO_≥ekc_u∆ocked
 (_Â)

	)

452 
	#_IO_Êockfûe
(
_Â
Ë

	)

453 
	#_IO_fu∆ockfûe
(
_Â
Ë

	)

454 
	#_IO_·rylockfûe
(
_Â
Ë

	)

455 
	#_IO_˛ónup_ªgi⁄_°¨t
(
_f˘
, 
_Â
Ë

	)

456 
	#_IO_˛ónup_ªgi⁄_íd
(
_Doô
Ë

	)

459 
_IO_vfsˇnf
 (
_IO_FILE
 * 
__ª°ri˘
, const * __restrict,

460 
_IO_va_li°
, *
__ª°ri˘
);

461 
_IO_vÂrötf
 (
_IO_FILE
 *
__ª°ri˘
, const *__restrict,

462 
_IO_va_li°
);

463 
_IO_ssize_t
 
_IO_∑dn
 (
_IO_FILE
 *, , _IO_ssize_t);

464 
_IO_size_t
 
_IO_sgën
 (
_IO_FILE
 *, *, _IO_size_t);

466 
_IO_off64_t
 
_IO_£ekoff
 (
_IO_FILE
 *, _IO_off64_t, , );

467 
_IO_off64_t
 
_IO_£ekpos
 (
_IO_FILE
 *, _IO_off64_t, );

469 
_IO_‰ì_backup_¨ó
 (
_IO_FILE
 *Ë
__THROW
;

471 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


472 
_IO_wöt_t
 
_IO_gëwc
 (
_IO_FILE
 *
__Â
);

473 
_IO_wöt_t
 
_IO_putwc
 (
wch¨_t
 
__wc
, 
_IO_FILE
 *
__Â
);

474 
_IO_fwide
 (
_IO_FILE
 *
__Â
, 
__mode
Ë
__THROW
;

475 #i‡
__GNUC__
 >= 2

478 #i‡
deföed
 
_LIBC
 && deföed 
SHARED


479 
	~<shlib-com∑t.h
>

480 #i‡
SHLIB_COMPAT
 (
libc
, 
GLIBC_2_0
, 
GLIBC_2_1
)

481 
	#_IO_fwide_maybe_öcom∑tibÀ
 \

482 (
	`__buûtö_ex≥˘
 (&
_IO_°dö_u£d
 =
NULL
, 0))

	)

483 c⁄° 
_IO_°dö_u£d
;

484 
wók_exã∫
 (
_IO_°dö_u£d
);

487 #i‚de‡
_IO_fwide_maybe_öcom∑tibÀ


488 
	#_IO_fwide_maybe_öcom∑tibÀ
 (0)

	)

492 
	#_IO_fwide
(
__Â
, 
__mode
) \

493 ({ 
__ªsu…
 = (
__mode
); \

494 i‡(
__ªsu…
 < 0 && ! 
_IO_fwide_maybe_öcom∑tibÀ
) \

496 i‡((
__Â
)->
_mode
 == 0) \

498 (
__Â
)->
_mode
 = -1; \

499 
__ªsu…
 = (
__Â
)->
_mode
; \

501 i‡(
	`__buûtö_c⁄°™t_p
 (
__mode
) && (__mode) == 0) \

502 
__ªsu…
 = 
_IO_fwide_maybe_öcom∑tibÀ
 ? -1 : (
__Â
)->
_mode
; \

504 
__ªsu…
 = 
	`_IO_fwide
 (
__Â
, __result); \

505 
__ªsu…
; })

	)

508 
_IO_vfwsˇnf
 (
_IO_FILE
 * 
__ª°ri˘
, c⁄° 
wch¨_t
 * __restrict,

509 
_IO_va_li°
, *
__ª°ri˘
);

510 
_IO_vfw¥ötf
 (
_IO_FILE
 *
__ª°ri˘
, c⁄° 
wch¨_t
 *__restrict,

511 
_IO_va_li°
);

512 
_IO_ssize_t
 
_IO_w∑dn
 (
_IO_FILE
 *, 
wöt_t
, _IO_ssize_t);

513 
_IO_‰ì_wbackup_¨ó
 (
_IO_FILE
 *Ë
__THROW
;

516 #ifde‡
__LDBL_COMPAT


517 
	~<bôs/libio-ldbl.h
>

520 #ifde‡
__˝lu•lus


	@/usr/include/rpc/netdb.h

36 #i‚de‡
_RPC_NETDB_H


37 
	#_RPC_NETDB_H
 1

	)

39 
	~<„©uªs.h
>

41 
	#__√ed_size_t


	)

42 
	~<°ddef.h
>

44 
__BEGIN_DECLS


46 
	sΩ˚¡


48 *
	mr_«me
;

49 **
	mr_Æü£s
;

50 
	mr_numbî
;

53 
	$£åp˚¡
 (
__°ay›í
Ë
__THROW
;

54 
	$ídΩ˚¡
 (Ë
__THROW
;

55 
Ω˚¡
 *
	$gëΩcby«me
 (c⁄° *
__«me
Ë
__THROW
;

56 
Ω˚¡
 *
	$gëΩcbynumbî
 (
__numbî
Ë
__THROW
;

57 
Ω˚¡
 *
	$gëΩ˚¡
 (Ë
__THROW
;

59 #ifde‡
__USE_MISC


60 
	$gëΩcby«me_r
 (c⁄° *
__«me
, 
Ω˚¡
 *
__ªsu…_buf
,

61 *
__buf„r
, 
size_t
 
__buÊí
,

62 
Ω˚¡
 **
__ªsu…
Ë
__THROW
;

64 
	$gëΩcbynumbî_r
 (
__numbî
, 
Ω˚¡
 *
__ªsu…_buf
,

65 *
__buf„r
, 
size_t
 
__buÊí
,

66 
Ω˚¡
 **
__ªsu…
Ë
__THROW
;

68 
	$gëΩ˚¡_r
 (
Ω˚¡
 *
__ªsu…_buf
, *
__buf„r
,

69 
size_t
 
__buÊí
, 
Ω˚¡
 **
__ªsu…
Ë
__THROW
;

72 
__END_DECLS


	@/usr/include/sched.h

19 #i‚def 
_SCHED_H


20 
	#_SCHED_H
 1

	)

22 
	~<„©uªs.h
>

25 
	~<bôs/ty≥s.h
>

27 
	#__√ed_size_t


	)

28 
	~<°ddef.h
>

30 #ifde‡
__USE_XOPEN2K


31 
	#__√ed_time_t


	)

32 
	#__√ed_time•ec


	)

34 
	~<time.h
>

36 #i‚de‡
__pid_t_deföed


37 
__pid_t
 
	tpid_t
;

38 
	#__pid_t_deföed


	)

43 
	~<bôs/sched.h
>

45 
	#sched_¥i‹ôy
 
__sched_¥i‹ôy


	)

48 
__BEGIN_DECLS


51 
	$sched_£ç¨am
 (
__pid_t
 
__pid
, c⁄° 
sched_∑øm
 *
__∑øm
)

52 
__THROW
;

55 
	$sched_gë∑øm
 (
__pid_t
 
__pid
, 
sched_∑øm
 *
__∑øm
Ë
__THROW
;

58 
	$sched_£tscheduÀr
 (
__pid_t
 
__pid
, 
__pﬁicy
,

59 c⁄° 
sched_∑øm
 *
__∑øm
Ë
__THROW
;

62 
	$sched_gëscheduÀr
 (
__pid_t
 
__pid
Ë
__THROW
;

65 
	$sched_yõld
 (Ë
__THROW
;

68 
	$sched_gë_¥i‹ôy_max
 (
__Æg‹ôhm
Ë
__THROW
;

71 
	$sched_gë_¥i‹ôy_mö
 (
__Æg‹ôhm
Ë
__THROW
;

74 
	$sched_º_gë_öãrvÆ
 (
__pid_t
 
__pid
, 
time•ec
 *
__t
Ë
__THROW
;

77 #ifde‡
__USE_GNU


79 
	#CPU_SETSIZE
 
__CPU_SETSIZE


	)

80 
	#CPU_SET
(
˝u
, 
˝u£ç
Ë
	`__CPU_SET_S
 (˝u,  (
˝u_£t_t
), cpu£ç)

	)

81 
	#CPU_CLR
(
˝u
, 
˝u£ç
Ë
	`__CPU_CLR_S
 (˝u,  (
˝u_£t_t
), cpu£ç)

	)

82 
	#CPU_ISSET
(
˝u
, 
˝u£ç
Ë
	`__CPU_ISSET_S
 (˝u,  (
˝u_£t_t
), \

83 
˝u£ç
)

	)

84 
	#CPU_ZERO
(
˝u£ç
Ë
	`__CPU_ZERO_S
 ( (
˝u_£t_t
), cpu£ç)

	)

85 
	#CPU_COUNT
(
˝u£ç
Ë
	`__CPU_COUNT_S
 ( (
˝u_£t_t
), cpu£ç)

	)

87 
	#CPU_SET_S
(
˝u
, 
£tsize
, 
˝u£ç
Ë
	`__CPU_SET_S
 (˝u, sësize, cpu£ç)

	)

88 
	#CPU_CLR_S
(
˝u
, 
£tsize
, 
˝u£ç
Ë
	`__CPU_CLR_S
 (˝u, sësize, cpu£ç)

	)

89 
	#CPU_ISSET_S
(
˝u
, 
£tsize
, 
˝u£ç
Ë
	`__CPU_ISSET_S
 (cpu, setsize, \

90 
˝u£ç
)

	)

91 
	#CPU_ZERO_S
(
£tsize
, 
˝u£ç
Ë
	`__CPU_ZERO_S
 (£tsize, cpu£ç)

	)

92 
	#CPU_COUNT_S
(
£tsize
, 
˝u£ç
Ë
	`__CPU_COUNT_S
 (£tsize, cpu£ç)

	)

94 
	#CPU_EQUAL
(
˝u£ç1
, 
˝u£ç2
) \

95 
	`__CPU_EQUAL_S
 ( (
˝u_£t_t
), 
˝u£ç1
, 
˝u£ç2
)

	)

96 
	#CPU_EQUAL_S
(
£tsize
, 
˝u£ç1
, 
˝u£ç2
) \

97 
	`__CPU_EQUAL_S
 (
£tsize
, 
˝u£ç1
, 
˝u£ç2
)

	)

99 
	#CPU_AND
(
de°£t
, 
§c£t1
, 
§c£t2
) \

100 
	`__CPU_OP_S
 ( (
˝u_£t_t
), 
de°£t
, 
§c£t1
, 
§c£t2
, &)

	)

101 
	#CPU_OR
(
de°£t
, 
§c£t1
, 
§c£t2
) \

102 
	`__CPU_OP_S
 ( (
˝u_£t_t
), 
de°£t
, 
§c£t1
, 
§c£t2
, |)

	)

103 
	#CPU_XOR
(
de°£t
, 
§c£t1
, 
§c£t2
) \

104 
	`__CPU_OP_S
 ( (
˝u_£t_t
), 
de°£t
, 
§c£t1
, 
§c£t2
, ^)

	)

105 
	#CPU_AND_S
(
£tsize
, 
de°£t
, 
§c£t1
, 
§c£t2
) \

106 
	`__CPU_OP_S
 (
£tsize
, 
de°£t
, 
§c£t1
, 
§c£t2
, &)

	)

107 
	#CPU_OR_S
(
£tsize
, 
de°£t
, 
§c£t1
, 
§c£t2
) \

108 
	`__CPU_OP_S
 (
£tsize
, 
de°£t
, 
§c£t1
, 
§c£t2
, |)

	)

109 
	#CPU_XOR_S
(
£tsize
, 
de°£t
, 
§c£t1
, 
§c£t2
) \

110 
	`__CPU_OP_S
 (
£tsize
, 
de°£t
, 
§c£t1
, 
§c£t2
, ^)

	)

112 
	#CPU_ALLOC_SIZE
(
cou¡
Ë
	`__CPU_ALLOC_SIZE
 (cou¡)

	)

113 
	#CPU_ALLOC
(
cou¡
Ë
	`__CPU_ALLOC
 (cou¡)

	)

114 
	#CPU_FREE
(
˝u£t
Ë
	`__CPU_FREE
 (˝u£t)

	)

118 
	$sched_£èfföôy
 (
__pid_t
 
__pid
, 
size_t
 
__˝u£tsize
,

119 c⁄° 
˝u_£t_t
 *
__˝u£t
Ë
__THROW
;

122 
	$sched_gëafföôy
 (
__pid_t
 
__pid
, 
size_t
 
__˝u£tsize
,

123 
˝u_£t_t
 *
__˝u£t
Ë
__THROW
;

126 
__END_DECLS


	@/usr/include/xlocale.h

20 #i‚de‡
_XLOCALE_H


21 
	#_XLOCALE_H
 1

	)

27 
	s__loˇÀ_°ru˘


30 
__loˇÀ_d©a
 *
	m__loˇÀs
[13];

33 c⁄° *
	m__˘y≥_b
;

34 c⁄° *
	m__˘y≥_tﬁowî
;

35 c⁄° *
	m__˘y≥_touµî
;

38 c⁄° *
	m__«mes
[13];

39 } *
	t__loˇÀ_t
;

42 
__loˇÀ_t
 
	tloˇÀ_t
;

	@/usr/include/_G_config.h

4 #i‚de‡
_G_c⁄fig_h


5 
	#_G_c⁄fig_h
 1

	)

9 
	~<bôs/ty≥s.h
>

10 
	#__√ed_size_t


	)

11 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


12 
	#__√ed_wch¨_t


	)

14 
	#__√ed_NULL


	)

15 
	~<°ddef.h
>

16 
	#__√ed_mb°©e_t


	)

17 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


18 
	#__√ed_wöt_t


	)

20 
	~<wch¨.h
>

23 
__off_t
 
	m__pos
;

24 
__mb°©e_t
 
	m__°©e
;

25 } 
	t_G_Âos_t
;

28 
__off64_t
 
	m__pos
;

29 
__mb°©e_t
 
	m__°©e
;

30 } 
	t_G_Âos64_t
;

31 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


32 
	~<gc⁄v.h
>

35 
__gc⁄v_öfo
 
	m__cd
;

38 
__gc⁄v_öfo
 
	m__cd
;

39 
__gc⁄v_°ï_d©a
 
	m__d©a
;

40 } 
	m__comböed
;

41 } 
	t_G_ic⁄v_t
;

46 
	#_G_va_li°
 
__gnuc_va_li°


	)

48 
	#_G_HAVE_MMAP
 1

	)

49 
	#_G_HAVE_MREMAP
 1

	)

51 
	#_G_IO_IO_FILE_VERSION
 0x20001

	)

54 
	#_G_HAVE_ST_BLKSIZE
 
	`deföed
 (
_STATBUF_ST_BLKSIZE
)

	)

56 
	#_G_BUFSIZ
 8192

	)

	@/usr/include/stdc-predef.h

18 #i‚def 
_STDC_PREDEF_H


19 
	#_STDC_PREDEF_H
 1

	)

36 #ifde‡
__GCC_IEC_559


37 #i‡
__GCC_IEC_559
 > 0

38 
	#__STDC_IEC_559__
 1

	)

41 
	#__STDC_IEC_559__
 1

	)

44 #ifde‡
__GCC_IEC_559_COMPLEX


45 #i‡
__GCC_IEC_559_COMPLEX
 > 0

46 
	#__STDC_IEC_559_COMPLEX__
 1

	)

49 
	#__STDC_IEC_559_COMPLEX__
 1

	)

55 
	#__STDC_ISO_10646__
 201505L

	)

58 
	#__STDC_NO_THREADS__
 1

	)

	@/usr/include/gconv.h

22 #i‚de‡
_GCONV_H


23 
	#_GCONV_H
 1

	)

25 
	~<„©uªs.h
>

26 
	#__√ed_mb°©e_t


	)

27 
	#__√ed_wöt_t


	)

28 
	~<wch¨.h
>

29 
	#__√ed_size_t


	)

30 
	#__√ed_wch¨_t


	)

31 
	~<°ddef.h
>

34 
	#__UNKNOWN_10646_CHAR
 ((
wch¨_t
Ë0xfffd)

	)

39 
	m__GCONV_OK
 = 0,

40 
	m__GCONV_NOCONV
,

41 
	m__GCONV_NODB
,

42 
	m__GCONV_NOMEM
,

44 
	m__GCONV_EMPTY_INPUT
,

45 
	m__GCONV_FULL_OUTPUT
,

46 
	m__GCONV_ILLEGAL_INPUT
,

47 
	m__GCONV_INCOMPLETE_INPUT
,

49 
	m__GCONV_ILLEGAL_DESCRIPTOR
,

50 
	m__GCONV_INTERNAL_ERROR


57 
	m__GCONV_IS_LAST
 = 0x0001,

58 
	m__GCONV_IGNORE_ERRORS
 = 0x0002,

59 
	m__GCONV_SWAP
 = 0x0004,

60 
	m__GCONV_TRANSLIT
 = 0x0008

65 
	g__gc⁄v_°ï
;

66 
	g__gc⁄v_°ï_d©a
;

67 
	g__gc⁄v_lﬂded_obje˘
;

71 (*
	t__gc⁄v_f˘
Ë(
	t__gc⁄v_°ï
 *, 
	t__gc⁄v_°ï_d©a
 *,

73 **, 
	tsize_t
 *, , );

76 
	$wöt_t
 (*
	t__gc⁄v_btowc_f˘
Ë(
	t__gc⁄v_°ï
 *, );

79 (*
	t__gc⁄v_öô_f˘
Ë(
	t__gc⁄v_°ï
 *);

80 (*
	t__gc⁄v_íd_f˘
Ë(
	t__gc⁄v_°ï
 *);

84 
	s__gc⁄v_°ï


86 
__gc⁄v_lﬂded_obje˘
 *
__shlib_h™dÀ
;

87 c⁄° *
__mod«me
;

89 
__cou¡î
;

91 *
__‰om_«me
;

92 *
__to_«me
;

94 
__gc⁄v_f˘
 
__f˘
;

95 
__gc⁄v_btowc_f˘
 
__btowc_f˘
;

96 
__gc⁄v_öô_f˘
 
__öô_f˘
;

97 
__gc⁄v_íd_f˘
 
__íd_f˘
;

101 
__mö_√eded_‰om
;

102 
__max_√eded_‰om
;

103 
__mö_√eded_to
;

104 
__max_√eded_to
;

107 
__°©eful
;

109 *
__d©a
;

114 
	s__gc⁄v_°ï_d©a


116 *
__outbuf
;

117 *
__outbu„nd
;

121 
__Êags
;

125 
__övoˇti⁄_cou¡î
;

129 
__öã∫Æ_u£
;

131 
__mb°©e_t
 *
__°©ï
;

132 
__mb°©e_t
 
__°©e
;

138 
	s__gc⁄v_öfo


140 
size_t
 
__n°ïs
;

141 
__gc⁄v_°ï
 *
__°ïs
;

142 
__exãnsi⁄__
 
__gc⁄v_°ï_d©a
 
__d©a
 
__Êex¨r
;

143 } *
	t__gc⁄v_t
;

146 
	`__gc⁄v_å™¶ôî©e
 (
__gc⁄v_°ï
 *
°ï
,

147 
__gc⁄v_°ï_d©a
 *
°ï_d©a
,

148 c⁄° *
öbuf°¨t
,

149 c⁄° **
öbuÂ
,

150 c⁄° *
öbu„nd
,

151 **
outbuf°¨t
,

152 
size_t
 *
úªvîsibÀ
);

	@/usr/include/wchar.h

23 #i‚de‡
_WCHAR_H


25 #i‡!
deföed
 
__√ed_mb°©e_t
 && !deföed 
__√ed_wöt_t


26 
	#_WCHAR_H
 1

	)

27 
	~<„©uªs.h
>

30 #ifde‡
_WCHAR_H


32 
	#__√ed___FILE


	)

33 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


34 
	#__√ed_FILE


	)

36 
	~<°dio.h
>

38 
	#__√ed___va_li°


	)

39 
	~<°d¨g.h
>

41 
	~<bôs/wch¨.h
>

44 
	#__√ed_size_t


	)

45 
	#__√ed_wch¨_t


	)

46 
	#__√ed_NULL


	)

48 #i‡
deföed
 
_WCHAR_H
 || deföed 
__√ed_wöt_t
 || !deföed 
__WINT_TYPE__


49 #unde‡
__√ed_wöt_t


50 
	#__√ed_wöt_t


	)

51 
	~<°ddef.h
>

55 #i‚de‡
_WINT_T


60 
	#_WINT_T


	)

61 
	twöt_t
;

65 #i‡
deföed
 
__˝lu•lus
 && deföed 
_GLIBCPP_USE_NAMESPACES
 \

66 && 
deföed
 
__WINT_TYPE__


67 
__BEGIN_NAMESPACE_STD


68 
__WINT_TYPE__
 
	twöt_t
;

69 
	g__END_NAMESPACE_STD


74 #i‡
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (4, 4)

75 
	#__CORRECT_ISO_CPP_WCHAR_H_PROTO


	)

79 #i‡(
deföed
 
_WCHAR_H
 || deföed 
__√ed_mb°©e_t
Ë&& !deföed 
____mb°©e_t_deföed


80 
	#____mb°©e_t_deföed
 1

	)

84 
	m__cou¡
;

87 #ifde‡
__WINT_TYPE__


88 
__WINT_TYPE__
 
	m__wch
;

90 
wöt_t
 
	m__wch
;

92 
	m__wchb
[4];

93 } 
	m__vÆue
;

94 } 
	t__mb°©e_t
;

96 #unde‡
__√ed_mb°©e_t


101 #ifde‡
_WCHAR_H


103 #i‚de‡
__mb°©e_t_deföed


104 
__BEGIN_NAMESPACE_C99


106 
__mb°©e_t
 
	tmb°©e_t
;

107 
	g__END_NAMESPACE_C99


108 
	#__mb°©e_t_deföed
 1

	)

111 #ifde‡
__USE_GNU


112 
	$__USING_NAMESPACE_C99
(
mb°©e_t
)

115 #i‚de‡
WCHAR_MIN


117 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

118 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

121 #i‚de‡
WEOF


122 
	#WEOF
 (0xffffffffu)

	)

127 #i‡
deföed
 
__USE_XOPEN
 && !deföed 
__USE_UNIX98


128 
	~<w˘y≥.h
>

132 
__BEGIN_DECLS


134 
__BEGIN_NAMESPACE_STD


137 
tm
;

138 
__END_NAMESPACE_STD


142 
	$__USING_NAMESPACE_STD
(
tm
)

145 
__BEGIN_NAMESPACE_STD


147 
wch¨_t
 *
	$wcs˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

148 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
)

149 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

152 
wch¨_t
 *
	$wc¢˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

153 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

154 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

157 
wch¨_t
 *
	$wcsˇt
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

158 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
)

159 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

161 
wch¨_t
 *
	$wc¢ˇt
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

162 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

163 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

166 
	$wcscmp
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
)

167 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

169 
	$wc¢cmp
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
, 
size_t
 
__n
)

170 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

171 
__END_NAMESPACE_STD


173 #ifde‡
__USE_XOPEN2K8


175 
	$wcsˇ£cmp
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
Ë
__THROW
;

178 
	$wc¢ˇ£cmp
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
,

179 
size_t
 
__n
Ë
__THROW
;

183 
	~<xloˇÀ.h
>

185 
	$wcsˇ£cmp_l
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
,

186 
__loˇÀ_t
 
__loc
Ë
__THROW
;

188 
	$wc¢ˇ£cmp_l
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
,

189 
size_t
 
__n
, 
__loˇÀ_t
 
__loc
Ë
__THROW
;

192 
__BEGIN_NAMESPACE_STD


195 
	$wcscﬁl
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
Ë
__THROW
;

199 
size_t
 
	$wcsx‰m
 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

200 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
Ë
__THROW
;

201 
__END_NAMESPACE_STD


203 #ifde‡
__USE_XOPEN2K8


209 
	$wcscﬁl_l
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
,

210 
__loˇÀ_t
 
__loc
Ë
__THROW
;

215 
size_t
 
	$wcsx‰m_l
 (
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
,

216 
size_t
 
__n
, 
__loˇÀ_t
 
__loc
Ë
__THROW
;

219 
wch¨_t
 *
	$wcsdup
 (c⁄° 
wch¨_t
 *
__s
Ë
__THROW
 
__©åibuã_mÆloc__
;

222 
__BEGIN_NAMESPACE_STD


224 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


225 "C++" 
wch¨_t
 *
	$wcschr
 (
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

226 
__THROW
 
	`__asm
 ("wcschr"Ë
__©åibuã_puª__
;

227 "C++" c⁄° 
wch¨_t
 *
	$wcschr
 (c⁄° 
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

228 
__THROW
 
	`__asm
 ("wcschr"Ë
__©åibuã_puª__
;

230 
wch¨_t
 *
	$wcschr
 (c⁄° 
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

231 
__THROW
 
__©åibuã_puª__
;

234 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


235 "C++" 
wch¨_t
 *
	$wc§chr
 (
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

236 
__THROW
 
	`__asm
 ("wc§chr"Ë
__©åibuã_puª__
;

237 "C++" c⁄° 
wch¨_t
 *
	$wc§chr
 (c⁄° 
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

238 
__THROW
 
	`__asm
 ("wc§chr"Ë
__©åibuã_puª__
;

240 
wch¨_t
 *
	$wc§chr
 (c⁄° 
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

241 
__THROW
 
__©åibuã_puª__
;

243 
__END_NAMESPACE_STD


245 #ifde‡
__USE_GNU


248 
wch¨_t
 *
	$wcsch∫ul
 (c⁄° 
wch¨_t
 *
__s
, wch¨_à
__wc
)

249 
__THROW
 
__©åibuã_puª__
;

252 
__BEGIN_NAMESPACE_STD


255 
size_t
 
	$wcsc•n
 (c⁄° 
wch¨_t
 *
__wcs
, c⁄° wch¨_à*
__ªje˘
)

256 
__THROW
 
__©åibuã_puª__
;

259 
size_t
 
	$wcs•n
 (c⁄° 
wch¨_t
 *
__wcs
, c⁄° wch¨_à*
__ac˚±
)

260 
__THROW
 
__©åibuã_puª__
;

262 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


263 "C++" 
wch¨_t
 *
	$wc•brk
 (
wch¨_t
 *
__wcs
, c⁄° wch¨_à*
__ac˚±
)

264 
__THROW
 
	`__asm
 ("wc•brk"Ë
__©åibuã_puª__
;

265 "C++" c⁄° 
wch¨_t
 *
	$wc•brk
 (c⁄° 
wch¨_t
 *
__wcs
,

266 c⁄° 
wch¨_t
 *
__ac˚±
)

267 
__THROW
 
	`__asm
 ("wc•brk"Ë
__©åibuã_puª__
;

269 
wch¨_t
 *
	$wc•brk
 (c⁄° 
wch¨_t
 *
__wcs
, c⁄° wch¨_à*
__ac˚±
)

270 
__THROW
 
__©åibuã_puª__
;

273 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


274 "C++" 
wch¨_t
 *
	$wcs°r
 (
wch¨_t
 *
__hay°ack
, c⁄° wch¨_à*
__√edÀ
)

275 
__THROW
 
	`__asm
 ("wcs°r"Ë
__©åibuã_puª__
;

276 "C++" c⁄° 
wch¨_t
 *
	$wcs°r
 (c⁄° 
wch¨_t
 *
__hay°ack
,

277 c⁄° 
wch¨_t
 *
__√edÀ
)

278 
__THROW
 
	`__asm
 ("wcs°r"Ë
__©åibuã_puª__
;

280 
wch¨_t
 *
	$wcs°r
 (c⁄° 
wch¨_t
 *
__hay°ack
, c⁄° wch¨_à*
__√edÀ
)

281 
__THROW
 
__©åibuã_puª__
;

285 
wch¨_t
 *
	$wc°ok
 (
wch¨_t
 *
__ª°ri˘
 
__s
,

286 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__dñim
,

287 
wch¨_t
 **
__ª°ri˘
 
__±r
Ë
__THROW
;

290 
size_t
 
	$wc¶í
 (c⁄° 
wch¨_t
 *
__s
Ë
__THROW
 
__©åibuã_puª__
;

291 
__END_NAMESPACE_STD


293 #ifde‡
__USE_XOPEN


295 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


296 "C++" 
wch¨_t
 *
	$wcswcs
 (
wch¨_t
 *
__hay°ack
, c⁄° wch¨_à*
__√edÀ
)

297 
__THROW
 
	`__asm
 ("wcswcs"Ë
__©åibuã_puª__
;

298 "C++" c⁄° 
wch¨_t
 *
	$wcswcs
 (c⁄° 
wch¨_t
 *
__hay°ack
,

299 c⁄° 
wch¨_t
 *
__√edÀ
)

300 
__THROW
 
	`__asm
 ("wcswcs"Ë
__©åibuã_puª__
;

302 
wch¨_t
 *
	$wcswcs
 (c⁄° 
wch¨_t
 *
__hay°ack
, c⁄° wch¨_à*
__√edÀ
)

303 
__THROW
 
__©åibuã_puª__
;

307 #ifde‡
__USE_XOPEN2K8


309 
size_t
 
	$wc¢Àn
 (c⁄° 
wch¨_t
 *
__s
, 
size_t
 
__maxÀn
)

310 
__THROW
 
__©åibuã_puª__
;

314 
__BEGIN_NAMESPACE_STD


316 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


317 "C++" 
wch¨_t
 *
	$wmemchr
 (
wch¨_t
 *
__s
, wch¨_à
__c
, 
size_t
 
__n
)

318 
__THROW
 
	`__asm
 ("wmemchr"Ë
__©åibuã_puª__
;

319 "C++" c⁄° 
wch¨_t
 *
	$wmemchr
 (c⁄° 
wch¨_t
 *
__s
, wch¨_à
__c
,

320 
size_t
 
__n
)

321 
__THROW
 
	`__asm
 ("wmemchr"Ë
__©åibuã_puª__
;

323 
wch¨_t
 *
	$wmemchr
 (c⁄° 
wch¨_t
 *
__s
, wch¨_à
__c
, 
size_t
 
__n
)

324 
__THROW
 
__©åibuã_puª__
;

328 
	$wmemcmp
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
, 
size_t
 
__n
)

329 
__THROW
 
__©åibuã_puª__
;

332 
wch¨_t
 *
	$wmem˝y
 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

333 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
Ë
__THROW
;

337 
wch¨_t
 *
	$wmemmove
 (
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
, 
size_t
 
__n
)

338 
__THROW
;

341 
wch¨_t
 *
	$wmem£t
 (
wch¨_t
 *
__s
, wch¨_à
__c
, 
size_t
 
__n
Ë
__THROW
;

342 
__END_NAMESPACE_STD


344 #ifde‡
__USE_GNU


347 
wch¨_t
 *
	$wmemp˝y
 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

348 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
)

349 
__THROW
;

353 
__BEGIN_NAMESPACE_STD


356 
wöt_t
 
	$btowc
 (
__c
Ë
__THROW
;

360 
	$w˘ob
 (
wöt_t
 
__c
Ë
__THROW
;

364 
	$mbsöô
 (c⁄° 
mb°©e_t
 *
__ps
Ë
__THROW
 
__©åibuã_puª__
;

368 
size_t
 
	$mbπowc
 (
wch¨_t
 *
__ª°ri˘
 
__pwc
,

369 c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

370 
mb°©e_t
 *
__ª°ri˘
 
__p
Ë
__THROW
;

373 
size_t
 
	$w¸tomb
 (*
__ª°ri˘
 
__s
, 
wch¨_t
 
__wc
,

374 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

377 
size_t
 
	$__mbæí
 (c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

378 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

379 
size_t
 
	$mbæí
 (c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

380 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

381 
__END_NAMESPACE_STD


383 #ifde‡
__USE_EXTERN_INLINES


389 
wöt_t
 
	$__btowc_Æüs
 (
__c
Ë
	`__asm
 ("btowc");

390 
__exã∫_ölöe
 
wöt_t


391 
	`__NTH
 (
	$btowc
 (
__c
))

392 {  (
	`__buûtö_c⁄°™t_p
 (
__c
) && __c >= '\0' && __c <= '\x7f'

393 ? (
wöt_t
Ë
__c
 : 
	`__btowc_Æüs
 (__c)); 
	}
}

395 
	$__w˘ob_Æüs
 (
wöt_t
 
__c
Ë
	`__asm
 ("wctob");

396 
__exã∫_ölöe
 

397 
	`__NTH
 (
	$w˘ob
 (
wöt_t
 
__wc
))

398 {  (
	`__buûtö_c⁄°™t_p
 (
__wc
Ë&& __w¯>
L
'\0' && __wc <= L'\x7f'

399 ? (Ë
__wc
 : 
	`__w˘ob_Æüs
 (__wc)); 
	}
}

401 
__exã∫_ölöe
 
size_t


402 
__NTH
 (
	$mbæí
 (c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

403 
mb°©e_t
 *
__ª°ri˘
 
__ps
))

404 {  (
__ps
 !
NULL


405 ? 
	`mbπowc
 (
NULL
, 
__s
, 
__n
, 
__ps
Ë: 
	`__mbæí
 (__s, __n, NULL)); 
	}
}

408 
__BEGIN_NAMESPACE_STD


411 
size_t
 
	$mb§towcs
 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

412 c⁄° **
__ª°ri˘
 
__§c
, 
size_t
 
__Àn
,

413 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

417 
size_t
 
	$wc§tombs
 (*
__ª°ri˘
 
__d°
,

418 c⁄° 
wch¨_t
 **
__ª°ri˘
 
__§c
, 
size_t
 
__Àn
,

419 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

420 
__END_NAMESPACE_STD


423 #ifdef 
__USE_XOPEN2K8


426 
size_t
 
	$mb¢πowcs
 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

427 c⁄° **
__ª°ri˘
 
__§c
, 
size_t
 
__nmc
,

428 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

432 
size_t
 
	$wc¢πombs
 (*
__ª°ri˘
 
__d°
,

433 c⁄° 
wch¨_t
 **
__ª°ri˘
 
__§c
,

434 
size_t
 
__nwc
, size_à
__Àn
,

435 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

440 #ifde‡
__USE_XOPEN


442 
	$wcwidth
 (
wch¨_t
 
__c
Ë
__THROW
;

446 
	$wcswidth
 (c⁄° 
wch¨_t
 *
__s
, 
size_t
 
__n
Ë
__THROW
;

450 
__BEGIN_NAMESPACE_STD


453 
	$wc°od
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

454 
wch¨_t
 **
__ª°ri˘
 
__íd±r
Ë
__THROW
;

455 
__END_NAMESPACE_STD


457 #ifde‡
__USE_ISOC99


458 
__BEGIN_NAMESPACE_C99


460 
	$wc°of
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

461 
wch¨_t
 **
__ª°ri˘
 
__íd±r
Ë
__THROW
;

462 
	$wc°ﬁd
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

463 
wch¨_t
 **
__ª°ri˘
 
__íd±r
Ë
__THROW
;

464 
__END_NAMESPACE_C99


468 
__BEGIN_NAMESPACE_STD


471 
	$wc°ﬁ
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

472 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
Ë
__THROW
;

476 
	$wc°oul
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

477 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

478 
__THROW
;

479 
__END_NAMESPACE_STD


481 #ifde‡
__USE_ISOC99


482 
__BEGIN_NAMESPACE_C99


485 
__exãnsi⁄__


486 
	$wc°ﬁl
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

487 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

488 
__THROW
;

492 
__exãnsi⁄__


493 
	$wc°ouŒ
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

494 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

495 
__ba£
Ë
__THROW
;

496 
__END_NAMESPACE_C99


499 #ifde‡
__USE_GNU


502 
__exãnsi⁄__


503 
	$wc°oq
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

504 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

505 
__THROW
;

509 
__exãnsi⁄__


510 
	$wc°ouq
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

511 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

512 
__ba£
Ë
__THROW
;

515 #ifde‡
__USE_GNU


529 
	~<xloˇÀ.h
>

533 
	$wc°ﬁ_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

534 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
,

535 
__loˇÀ_t
 
__loc
Ë
__THROW
;

537 
	$wc°oul_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

538 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

539 
__ba£
, 
__loˇÀ_t
 
__loc
Ë
__THROW
;

541 
__exãnsi⁄__


542 
	$wc°ﬁl_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

543 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

544 
__ba£
, 
__loˇÀ_t
 
__loc
Ë
__THROW
;

546 
__exãnsi⁄__


547 
	$wc°ouŒ_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

548 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

549 
__ba£
, 
__loˇÀ_t
 
__loc
)

550 
__THROW
;

552 
	$wc°od_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

553 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__loˇÀ_t
 
__loc
)

554 
__THROW
;

556 
	$wc°of_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

557 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__loˇÀ_t
 
__loc
)

558 
__THROW
;

560 
	$wc°ﬁd_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

561 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

562 
__loˇÀ_t
 
__loc
Ë
__THROW
;

566 #ifde‡
__USE_XOPEN2K8


569 
wch¨_t
 *
	$w˝˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

570 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
Ë
__THROW
;

574 
wch¨_t
 *
	$w˝n˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

575 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

576 
__THROW
;

583 
__FILE
 *
	$›í_wmem°ªam
 (
wch¨_t
 **
__buÊoc
, 
size_t
 *
__sizñoc
Ë
__THROW
;

586 #i‡
deföed
 
__USE_ISOC95
 || deföed 
__USE_UNIX98


587 
__BEGIN_NAMESPACE_STD


590 
	$fwide
 (
__FILE
 *
__Â
, 
__mode
Ë
__THROW
;

597 
	`fw¥ötf
 (
__FILE
 *
__ª°ri˘
 
__°ªam
,

598 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

604 
	`w¥ötf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

607 
	$sw¥ötf
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

608 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

609 
__THROW
 ;

615 
	`vfw¥ötf
 (
__FILE
 *
__ª°ri˘
 
__s
,

616 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

617 
__gnuc_va_li°
 
__¨g
)

623 
	`vw¥ötf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

624 
__gnuc_va_li°
 
__¨g
)

628 
	$vsw¥ötf
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

629 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

630 
__gnuc_va_li°
 
__¨g
)

631 
__THROW
 ;

638 
	`fwsˇnf
 (
__FILE
 *
__ª°ri˘
 
__°ªam
,

639 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

645 
	`wsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

648 
	$swsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

649 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

650 
__THROW
 ;

652 #i‡
deföed
 
__USE_ISOC99
 && !deföed 
__USE_GNU
 \

653 && (!
deföed
 
__LDBL_COMPAT
 || !deföed 
__REDIRECT
) \

654 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

655 #ifde‡
__REDIRECT


659 
	`__REDIRECT
 (
fwsˇnf
, (
__FILE
 *
__ª°ri˘
 
__°ªam
,

660 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...),

661 
__isoc99_fwsˇnf
)

663 
	`__REDIRECT
 (
wsˇnf
, (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...),

664 
__isoc99_wsˇnf
)

666 
	`__REDIRECT_NTH
 (
swsˇnf
, (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

667 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

668 ...), 
__isoc99_swsˇnf
)

671 
	`__isoc99_fwsˇnf
 (
__FILE
 *
__ª°ri˘
 
__°ªam
,

672 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...);

673 
	`__isoc99_wsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...);

674 
	$__isoc99_swsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

675 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

676 
__THROW
;

677 
	#fwsˇnf
 
__isoc99_fwsˇnf


	)

678 
	#wsˇnf
 
__isoc99_wsˇnf


	)

679 
	#swsˇnf
 
__isoc99_swsˇnf


	)

683 
__END_NAMESPACE_STD


686 #ifde‡
__USE_ISOC99


687 
__BEGIN_NAMESPACE_C99


692 
	`vfwsˇnf
 (
__FILE
 *
__ª°ri˘
 
__s
,

693 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

694 
__gnuc_va_li°
 
__¨g
)

700 
	`vwsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

701 
__gnuc_va_li°
 
__¨g
)

704 
	$vswsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

705 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

706 
__gnuc_va_li°
 
__¨g
)

707 
__THROW
 ;

709 #i‡!
deföed
 
__USE_GNU
 \

710 && (!
deföed
 
__LDBL_COMPAT
 || !deföed 
__REDIRECT
) \

711 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

712 #ifde‡
__REDIRECT


713 
	`__REDIRECT
 (
vfwsˇnf
, (
__FILE
 *
__ª°ri˘
 
__s
,

714 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

715 
__gnuc_va_li°
 
__¨g
), 
__isoc99_vfwsˇnf
)

717 
	`__REDIRECT
 (
vwsˇnf
, (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

718 
__gnuc_va_li°
 
__¨g
), 
__isoc99_vwsˇnf
)

720 
	`__REDIRECT_NTH
 (
vswsˇnf
, (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

721 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

722 
__gnuc_va_li°
 
__¨g
), 
__isoc99_vswsˇnf
)

725 
	`__isoc99_vfwsˇnf
 (
__FILE
 *
__ª°ri˘
 
__s
,

726 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

727 
__gnuc_va_li°
 
__¨g
);

728 
	`__isoc99_vwsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

729 
__gnuc_va_li°
 
__¨g
);

730 
	$__isoc99_vswsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

731 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

732 
__gnuc_va_li°
 
__¨g
Ë
__THROW
;

733 
	#vfwsˇnf
 
__isoc99_vfwsˇnf


	)

734 
	#vwsˇnf
 
__isoc99_vwsˇnf


	)

735 
	#vswsˇnf
 
__isoc99_vswsˇnf


	)

739 
__END_NAMESPACE_C99


743 
__BEGIN_NAMESPACE_STD


748 
wöt_t
 
	`fgëwc
 (
__FILE
 *
__°ªam
);

749 
wöt_t
 
	`gëwc
 (
__FILE
 *
__°ªam
);

755 
wöt_t
 
	`gëwch¨
 ();

762 
wöt_t
 
	`Âutwc
 (
wch¨_t
 
__wc
, 
__FILE
 *
__°ªam
);

763 
wöt_t
 
	`putwc
 (
wch¨_t
 
__wc
, 
__FILE
 *
__°ªam
);

769 
wöt_t
 
	`putwch¨
 (
wch¨_t
 
__wc
);

777 
wch¨_t
 *
	`fgëws
 (wch¨_à*
__ª°ri˘
 
__ws
, 
__n
,

778 
__FILE
 *
__ª°ri˘
 
__°ªam
);

784 
	`Âutws
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__ws
,

785 
__FILE
 *
__ª°ri˘
 
__°ªam
);

792 
wöt_t
 
	`ungëwc
 (wöt_à
__wc
, 
__FILE
 *
__°ªam
);

793 
__END_NAMESPACE_STD


796 #ifde‡
__USE_GNU


804 
wöt_t
 
	`gëwc_u∆ocked
 (
__FILE
 *
__°ªam
);

805 
wöt_t
 
	`gëwch¨_u∆ocked
 ();

813 
wöt_t
 
	`fgëwc_u∆ocked
 (
__FILE
 *
__°ªam
);

821 
wöt_t
 
	`Âutwc_u∆ocked
 (
wch¨_t
 
__wc
, 
__FILE
 *
__°ªam
);

830 
wöt_t
 
	`putwc_u∆ocked
 (
wch¨_t
 
__wc
, 
__FILE
 *
__°ªam
);

831 
wöt_t
 
	`putwch¨_u∆ocked
 (
wch¨_t
 
__wc
);

840 
wch¨_t
 *
	`fgëws_u∆ocked
 (wch¨_à*
__ª°ri˘
 
__ws
, 
__n
,

841 
__FILE
 *
__ª°ri˘
 
__°ªam
);

849 
	`Âutws_u∆ocked
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__ws
,

850 
__FILE
 *
__ª°ri˘
 
__°ªam
);

854 
__BEGIN_NAMESPACE_C99


858 
size_t
 
	$wcs·ime
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

859 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

860 c⁄° 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

861 
__END_NAMESPACE_C99


863 #ifde‡
__USE_GNU


864 
	~<xloˇÀ.h
>

868 
size_t
 
	$wcs·ime_l
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

869 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

870 c⁄° 
tm
 *
__ª°ri˘
 
__ç
,

871 
__loˇÀ_t
 
__loc
Ë
__THROW
;

880 #i‡
deföed
 
__USE_UNIX98
 && !deföed 
__USE_GNU


881 
	#__√ed_iswxxx


	)

882 
	~<w˘y≥.h
>

886 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__f‹tify_fun˘i⁄


887 
	~<bôs/wch¨2.h
>

890 #ifde‡
__LDBL_COMPAT


891 
	~<bôs/wch¨-ldbl.h
>

894 
__END_DECLS


902 #unde‡
__√ed_mb°©e_t


903 #unde‡
__√ed_wöt_t


	@/usr/include/wctype.h

23 #i‚de‡
_WCTYPE_H


25 
	~<„©uªs.h
>

26 
	~<bôs/ty≥s.h
>

28 #i‚de‡
__√ed_iswxxx


29 
	#_WCTYPE_H
 1

	)

32 
	#__√ed_wöt_t


	)

33 
	~<wch¨.h
>

37 #i‚de‡
WEOF


38 
	#WEOF
 (0xffffffffu)

	)

41 #unde‡
__√ed_iswxxx


46 #i‚de‡
__iswxxx_deföed


47 
	#__iswxxx_deföed
 1

	)

49 
__BEGIN_NAMESPACE_C99


52 
	tw˘y≥_t
;

53 
	g__END_NAMESPACE_C99


55 #i‚de‡
_ISwbô


60 
	~<ídün.h
>

61 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


62 
	#_ISwbô
(
bô
Ë(1 << (bô))

	)

64 
	#_ISwbô
(
bô
) \

65 ((
bô
) < 8 ? () ((1UL << (bit)) << 24) \

66 : ((
bô
) < 16 ? () ((1UL << (bit)) << 8) \

67 : ((
bô
) < 24 ? () ((1UL << (bit)) >> 8) \

68 : (Ë((1UL << (
bô
)Ë>> 24))))

	)

73 
	m__ISwuµî
 = 0,

74 
	m__ISwlowî
 = 1,

75 
	m__ISwÆpha
 = 2,

76 
	m__ISwdigô
 = 3,

77 
	m__ISwxdigô
 = 4,

78 
	m__ISw•a˚
 = 5,

79 
	m__ISw¥öt
 = 6,

80 
	m__ISwgøph
 = 7,

81 
	m__ISwbœnk
 = 8,

82 
	m__ISw˙ål
 = 9,

83 
	m__ISwpun˘
 = 10,

84 
	m__ISwÆnum
 = 11,

86 
	m_ISwuµî
 = 
_ISwbô
 (
__ISwuµî
),

87 
	m_ISwlowî
 = 
_ISwbô
 (
__ISwlowî
),

88 
	m_ISwÆpha
 = 
_ISwbô
 (
__ISwÆpha
),

89 
	m_ISwdigô
 = 
_ISwbô
 (
__ISwdigô
),

90 
	m_ISwxdigô
 = 
_ISwbô
 (
__ISwxdigô
),

91 
	m_ISw•a˚
 = 
_ISwbô
 (
__ISw•a˚
),

92 
	m_ISw¥öt
 = 
_ISwbô
 (
__ISw¥öt
),

93 
	m_ISwgøph
 = 
_ISwbô
 (
__ISwgøph
),

94 
	m_ISwbœnk
 = 
_ISwbô
 (
__ISwbœnk
),

95 
	m_ISw˙ål
 = 
_ISwbô
 (
__ISw˙ål
),

96 
	m_ISwpun˘
 = 
_ISwbô
 (
__ISwpun˘
),

97 
	m_ISwÆnum
 = 
_ISwbô
 (
__ISwÆnum
)

102 
__BEGIN_DECLS


104 
__BEGIN_NAMESPACE_C99


111 
	$iswÆnum
 (
wöt_t
 
__wc
Ë
__THROW
;

117 
	$iswÆpha
 (
wöt_t
 
__wc
Ë
__THROW
;

120 
	$isw˙ål
 (
wöt_t
 
__wc
Ë
__THROW
;

124 
	$iswdigô
 (
wöt_t
 
__wc
Ë
__THROW
;

128 
	$iswgøph
 (
wöt_t
 
__wc
Ë
__THROW
;

133 
	$iswlowî
 (
wöt_t
 
__wc
Ë
__THROW
;

136 
	$isw¥öt
 (
wöt_t
 
__wc
Ë
__THROW
;

141 
	$iswpun˘
 (
wöt_t
 
__wc
Ë
__THROW
;

146 
	$isw•a˚
 (
wöt_t
 
__wc
Ë
__THROW
;

151 
	$iswuµî
 (
wöt_t
 
__wc
Ë
__THROW
;

156 
	$iswxdigô
 (
wöt_t
 
__wc
Ë
__THROW
;

161 #ifde‡
__USE_ISOC99


162 
	$iswbœnk
 (
wöt_t
 
__wc
Ë
__THROW
;

171 
w˘y≥_t
 
	$w˘y≥
 (c⁄° *
__¥›îty
Ë
__THROW
;

175 
	$isw˘y≥
 (
wöt_t
 
__wc
, 
w˘y≥_t
 
__desc
Ë
__THROW
;

176 
__END_NAMESPACE_C99


183 
__BEGIN_NAMESPACE_C99


186 c⁄° 
	t__öt32_t
 *
	tw˘øns_t
;

187 
__END_NAMESPACE_C99


188 #ifde‡
__USE_GNU


189 
	$__USING_NAMESPACE_C99
(
w˘øns_t
)

192 
__BEGIN_NAMESPACE_C99


194 
wöt_t
 
	$towlowî
 (
wöt_t
 
__wc
Ë
__THROW
;

197 
wöt_t
 
	$towuµî
 (
wöt_t
 
__wc
Ë
__THROW
;

198 
__END_NAMESPACE_C99


200 
__END_DECLS


207 #ifde‡
_WCTYPE_H


213 
__BEGIN_DECLS


215 
__BEGIN_NAMESPACE_C99


218 
w˘øns_t
 
	$w˘øns
 (c⁄° *
__¥›îty
Ë
__THROW
;

221 
wöt_t
 
	$tow˘øns
 (
wöt_t
 
__wc
, 
w˘øns_t
 
__desc
Ë
__THROW
;

222 
__END_NAMESPACE_C99


224 #ifde‡
__USE_XOPEN2K8


226 
	~<xloˇÀ.h
>

230 
	$iswÆnum_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

236 
	$iswÆpha_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

239 
	$isw˙ål_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

243 
	$iswdigô_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

247 
	$iswgøph_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

252 
	$iswlowî_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

255 
	$isw¥öt_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

260 
	$iswpun˘_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

265 
	$isw•a˚_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

270 
	$iswuµî_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

275 
	$iswxdigô_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

280 
	$iswbœnk_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

284 
w˘y≥_t
 
	$w˘y≥_l
 (c⁄° *
__¥›îty
, 
__loˇÀ_t
 
__loˇÀ
)

285 
__THROW
;

289 
	$isw˘y≥_l
 (
wöt_t
 
__wc
, 
w˘y≥_t
 
__desc
, 
__loˇÀ_t
 
__loˇÀ
)

290 
__THROW
;

298 
wöt_t
 
	$towlowî_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

301 
wöt_t
 
	$towuµî_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

305 
w˘øns_t
 
	$w˘øns_l
 (c⁄° *
__¥›îty
, 
__loˇÀ_t
 
__loˇÀ
)

306 
__THROW
;

309 
wöt_t
 
	$tow˘øns_l
 (
wöt_t
 
__wc
, 
w˘øns_t
 
__desc
,

310 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

314 
__END_DECLS


	@
1
.
1
/usr/include
306
19780
/var/www/html/debian/gateway/build/CMakeFiles/3.5.1/CompilerIdC/CMakeCCompilerId.c
/var/www/html/debian/gateway/build/CMakeFiles/feature_tests.c
/var/www/html/debian/gateway/build/kaa/kaa_keys/CMakeFiles/3.5.1/CompilerIdC/CMakeCCompilerId.c
/var/www/html/debian/gateway/build/kaa/kaa_keys/CMakeFiles/feature_tests.c
/var/www/html/debian/gateway/build/kaa/kaa_keys/kaa_keys_gen.h
/var/www/html/debian/gateway/include/MQTTAsync.h
/var/www/html/debian/gateway/include/MQTTClient.h
/var/www/html/debian/gateway/include/MQTTClientPersistence.h
/var/www/html/debian/gateway/include/MQTTProperties.h
/var/www/html/debian/gateway/include/MQTTReasonCodes.h
/var/www/html/debian/gateway/include/MQTTSubscribeOpts.h
/var/www/html/debian/gateway/include/curl/curl.h
/var/www/html/debian/gateway/include/curl/curlbuild.h
/var/www/html/debian/gateway/include/curl/curlrules.h
/var/www/html/debian/gateway/include/curl/curlver.h
/var/www/html/debian/gateway/include/curl/easy.h
/var/www/html/debian/gateway/include/curl/mprintf.h
/var/www/html/debian/gateway/include/curl/multi.h
/var/www/html/debian/gateway/include/curl/stdcheaders.h
/var/www/html/debian/gateway/include/curl/typecheck-gcc.h
/var/www/html/debian/gateway/include/json-c/arraylist.h
/var/www/html/debian/gateway/include/json-c/debug.h
/var/www/html/debian/gateway/include/json-c/json.h
/var/www/html/debian/gateway/include/json-c/json_c_version.h
/var/www/html/debian/gateway/include/json-c/json_config.h
/var/www/html/debian/gateway/include/json-c/json_inttypes.h
/var/www/html/debian/gateway/include/json-c/json_object.h
/var/www/html/debian/gateway/include/json-c/json_object_iterator.h
/var/www/html/debian/gateway/include/json-c/json_pointer.h
/var/www/html/debian/gateway/include/json-c/json_tokener.h
/var/www/html/debian/gateway/include/json-c/json_util.h
/var/www/html/debian/gateway/include/json-c/json_visit.h
/var/www/html/debian/gateway/include/json-c/linkhash.h
/var/www/html/debian/gateway/include/json-c/printbuf.h
/var/www/html/debian/gateway/kaa/src/extensions/bootstrap/kaa_bootstrap_manager.c
/var/www/html/debian/gateway/kaa/src/extensions/bootstrap/kaa_bootstrap_manager.h
/var/www/html/debian/gateway/kaa/src/extensions/bootstrap/test/test_kaa_bootstrap_manager.c
/var/www/html/debian/gateway/kaa/src/extensions/configuration/kaa_configuration_manager.c
/var/www/html/debian/gateway/kaa/src/extensions/configuration/kaa_configuration_manager.h
/var/www/html/debian/gateway/kaa/src/extensions/configuration/kaa_configuration_manager_private.h
/var/www/html/debian/gateway/kaa/src/extensions/configuration/test/test_kaa_configuration.c
/var/www/html/debian/gateway/kaa/src/extensions/event/kaa_event.c
/var/www/html/debian/gateway/kaa/src/extensions/event/kaa_event.h
/var/www/html/debian/gateway/kaa/src/extensions/event/kaa_event_private.h
/var/www/html/debian/gateway/kaa/src/extensions/event/test/test_kaa_event.c
/var/www/html/debian/gateway/kaa/src/extensions/logging/kaa_logging.c
/var/www/html/debian/gateway/kaa/src/extensions/logging/kaa_logging.h
/var/www/html/debian/gateway/kaa/src/extensions/logging/kaa_logging_private.h
/var/www/html/debian/gateway/kaa/src/extensions/logging/test/test_kaa_log.c
/var/www/html/debian/gateway/kaa/src/extensions/notification/kaa_notification_manager.c
/var/www/html/debian/gateway/kaa/src/extensions/notification/kaa_notification_manager.h
/var/www/html/debian/gateway/kaa/src/extensions/notification/test/test_kaa_notification.c
/var/www/html/debian/gateway/kaa/src/extensions/profile/kaa_profile.c
/var/www/html/debian/gateway/kaa/src/extensions/profile/kaa_profile.h
/var/www/html/debian/gateway/kaa/src/extensions/profile/kaa_profile_private.h
/var/www/html/debian/gateway/kaa/src/extensions/profile/test/test_kaa_profile.c
/var/www/html/debian/gateway/kaa/src/extensions/user/kaa_user.c
/var/www/html/debian/gateway/kaa/src/extensions/user/kaa_user.h
/var/www/html/debian/gateway/kaa/src/extensions/user/kaa_user_private.h
/var/www/html/debian/gateway/kaa/src/extensions/user/test/test_kaa_user.c
/var/www/html/debian/gateway/kaa/src/kaa/avro_src/avro/io.h
/var/www/html/debian/gateway/kaa/src/kaa/avro_src/avro/platform.h
/var/www/html/debian/gateway/kaa/src/kaa/avro_src/avro_private.h
/var/www/html/debian/gateway/kaa/src/kaa/avro_src/encoding.h
/var/www/html/debian/gateway/kaa/src/kaa/avro_src/encoding_binary.c
/var/www/html/debian/gateway/kaa/src/kaa/avro_src/io.c
/var/www/html/debian/gateway/kaa/src/kaa/collections/kaa_list.c
/var/www/html/debian/gateway/kaa/src/kaa/collections/kaa_list.h
/var/www/html/debian/gateway/kaa/src/kaa/gen/kaa_configuration_definitions.h
/var/www/html/debian/gateway/kaa/src/kaa/gen/kaa_configuration_gen.c
/var/www/html/debian/gateway/kaa/src/kaa/gen/kaa_configuration_gen.h
/var/www/html/debian/gateway/kaa/src/kaa/gen/kaa_event_fqn_definitions.h
/var/www/html/debian/gateway/kaa/src/kaa/gen/kaa_logging_definitions.h
/var/www/html/debian/gateway/kaa/src/kaa/gen/kaa_logging_gen.c
/var/www/html/debian/gateway/kaa/src/kaa/gen/kaa_logging_gen.h
/var/www/html/debian/gateway/kaa/src/kaa/gen/kaa_notification_definitions.h
/var/www/html/debian/gateway/kaa/src/kaa/gen/kaa_notification_gen.c
/var/www/html/debian/gateway/kaa/src/kaa/gen/kaa_notification_gen.h
/var/www/html/debian/gateway/kaa/src/kaa/gen/kaa_profile_definitions.h
/var/www/html/debian/gateway/kaa/src/kaa/gen/kaa_profile_gen.c
/var/www/html/debian/gateway/kaa/src/kaa/gen/kaa_profile_gen.h
/var/www/html/debian/gateway/kaa/src/kaa/kaa.c
/var/www/html/debian/gateway/kaa/src/kaa/kaa.h
/var/www/html/debian/gateway/kaa/src/kaa/kaa_channel_manager.c
/var/www/html/debian/gateway/kaa/src/kaa/kaa_channel_manager.h
/var/www/html/debian/gateway/kaa/src/kaa/kaa_common.h
/var/www/html/debian/gateway/kaa/src/kaa/kaa_common_schema.c
/var/www/html/debian/gateway/kaa/src/kaa/kaa_common_schema.h
/var/www/html/debian/gateway/kaa/src/kaa/kaa_context.h
/var/www/html/debian/gateway/kaa/src/kaa/kaa_defaults.h
/var/www/html/debian/gateway/kaa/src/kaa/kaa_error.h
/var/www/html/debian/gateway/kaa/src/kaa/kaa_extension.c
/var/www/html/debian/gateway/kaa/src/kaa/kaa_extension.h
/var/www/html/debian/gateway/kaa/src/kaa/kaa_extension_private.h
/var/www/html/debian/gateway/kaa/src/kaa/kaa_platform_common.h
/var/www/html/debian/gateway/kaa/src/kaa/kaa_platform_protocol.c
/var/www/html/debian/gateway/kaa/src/kaa/kaa_platform_protocol.h
/var/www/html/debian/gateway/kaa/src/kaa/kaa_platform_utils.c
/var/www/html/debian/gateway/kaa/src/kaa/kaa_platform_utils.h
/var/www/html/debian/gateway/kaa/src/kaa/kaa_private.h
/var/www/html/debian/gateway/kaa/src/kaa/kaa_protocols/kaa_tcp/kaatcp.h
/var/www/html/debian/gateway/kaa/src/kaa/kaa_protocols/kaa_tcp/kaatcp_common.h
/var/www/html/debian/gateway/kaa/src/kaa/kaa_protocols/kaa_tcp/kaatcp_parser.c
/var/www/html/debian/gateway/kaa/src/kaa/kaa_protocols/kaa_tcp/kaatcp_parser.h
/var/www/html/debian/gateway/kaa/src/kaa/kaa_protocols/kaa_tcp/kaatcp_request.c
/var/www/html/debian/gateway/kaa/src/kaa/kaa_protocols/kaa_tcp/kaatcp_request.h
/var/www/html/debian/gateway/kaa/src/kaa/kaa_status.c
/var/www/html/debian/gateway/kaa/src/kaa/kaa_status.h
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/Econais/EC19D/__ashldi3.c
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/Econais/EC19D/econais_ec19d_configuration_persistence.c
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/Econais/EC19D/econais_ec19d_defaults.h
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/Econais/EC19D/econais_ec19d_file_utils.c
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/Econais/EC19D/econais_ec19d_file_utils.h
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/Econais/EC19D/econais_ec19d_kaa_client.c
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/Econais/EC19D/econais_ec19d_kaa_client_properies.h
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/Econais/EC19D/econais_ec19d_mem.h
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/Econais/EC19D/econais_ec19d_platform.h
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/Econais/EC19D/econais_ec19d_sock.h
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/Econais/EC19D/econais_ec19d_stdio.h
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/Econais/EC19D/econais_ec19d_tcp_utils.c
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/Econais/EC19D/econais_ec19d_time.h
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/Econais/EC19D/logger.c
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/Econais/EC19D/sha.c
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/cc32xx/configuration_persistence.c
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/cc32xx/file_utils.c
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/cc32xx/logger.c
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/cc32xx/platform/defaults.h
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/cc32xx/platform/file_utils.h
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/cc32xx/platform/mem.h
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/cc32xx/platform/sock.h
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/cc32xx/platform/stdio.h
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/cc32xx/platform/time.h
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/cc32xx/reboot.c
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/cc32xx/status.c
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/cc32xx/tcp_utils.c
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/cc32xx/time.c
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/common/encryption_utils.c
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/common/ext_log_storage_memory.c
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/common/ext_log_upload_strategies.c
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/common/ext_log_upload_strategies.h
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/common/kaa_failover_strategy.c
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/common/kaa_htonll.c
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/common/kaa_htonll.h
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/common/kaa_tcp_channel.c
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/common/kaa_tcp_channel.h
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/common/key_utils.c
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/common/sha.c
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/esp8266/configuration_persistence.c
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/esp8266/exit.c
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/esp8266/kaa_client.c
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/esp8266/logger.c
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/esp8266/platform/defaults.h
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/esp8266/platform/mem.h
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/esp8266/platform/sock.h
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/esp8266/platform/stdio.h
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/esp8266/platform/time.h
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/esp8266/snprintf.c
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/esp8266/status.c
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/esp8266/tcp_utils.c
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/esp8266/time.c
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/ios/sha.c
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/posix/configuration_persistence.c
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/posix/file_utils.c
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/posix/kaa_client.c
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/posix/logger.c
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/posix/platform/defaults.h
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/posix/platform/file_utils.h
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/posix/platform/mem.h
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/posix/platform/sock.h
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/posix/platform/stdio.h
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/posix/platform/time.h
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/posix/posix_platform.h
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/posix/status.c
/var/www/html/debian/gateway/kaa/src/kaa/platform-impl/posix/tcp_utils.c
/var/www/html/debian/gateway/kaa/src/kaa/platform/ext_configuration_persistence.h
/var/www/html/debian/gateway/kaa/src/kaa/platform/ext_configuration_receiver.h
/var/www/html/debian/gateway/kaa/src/kaa/platform/ext_encryption_utils.h
/var/www/html/debian/gateway/kaa/src/kaa/platform/ext_event_listeners_callback.h
/var/www/html/debian/gateway/kaa/src/kaa/platform/ext_kaa_failover_strategy.h
/var/www/html/debian/gateway/kaa/src/kaa/platform/ext_key_utils.h
/var/www/html/debian/gateway/kaa/src/kaa/platform/ext_log_delivery_listener.h
/var/www/html/debian/gateway/kaa/src/kaa/platform/ext_log_storage.h
/var/www/html/debian/gateway/kaa/src/kaa/platform/ext_log_upload_strategy.h
/var/www/html/debian/gateway/kaa/src/kaa/platform/ext_notification_receiver.h
/var/www/html/debian/gateway/kaa/src/kaa/platform/ext_sha.h
/var/www/html/debian/gateway/kaa/src/kaa/platform/ext_status.h
/var/www/html/debian/gateway/kaa/src/kaa/platform/ext_system_logger.h
/var/www/html/debian/gateway/kaa/src/kaa/platform/ext_tcp_utils.h
/var/www/html/debian/gateway/kaa/src/kaa/platform/ext_transport_channel.h
/var/www/html/debian/gateway/kaa/src/kaa/platform/ext_user_callback.h
/var/www/html/debian/gateway/kaa/src/kaa/platform/kaa_client.h
/var/www/html/debian/gateway/kaa/src/kaa/platform/kaa_client_properties.h
/var/www/html/debian/gateway/kaa/src/kaa/platform/kaa_failover_strategy.h
/var/www/html/debian/gateway/kaa/src/kaa/utilities/kaa_aes_rsa.c
/var/www/html/debian/gateway/kaa/src/kaa/utilities/kaa_aes_rsa.h
/var/www/html/debian/gateway/kaa/src/kaa/utilities/kaa_base64.c
/var/www/html/debian/gateway/kaa/src/kaa/utilities/kaa_base64.h
/var/www/html/debian/gateway/kaa/src/kaa/utilities/kaa_buffer.c
/var/www/html/debian/gateway/kaa/src/kaa/utilities/kaa_buffer.h
/var/www/html/debian/gateway/kaa/src/kaa/utilities/kaa_log.c
/var/www/html/debian/gateway/kaa/src/kaa/utilities/kaa_log.h
/var/www/html/debian/gateway/kaa/src/kaa/utilities/kaa_mem.c
/var/www/html/debian/gateway/kaa/src/kaa/utilities/kaa_mem.h
/var/www/html/debian/gateway/kaa/test/collections/test_kaa_list.c
/var/www/html/debian/gateway/kaa/test/kaa_extension/kaa_extension_private.h
/var/www/html/debian/gateway/kaa/test/kaa_tcp_channel/test_kaa_tcp_channel_bootstrap.c
/var/www/html/debian/gateway/kaa/test/kaa_tcp_channel/test_kaa_tcp_channel_operation.c
/var/www/html/debian/gateway/kaa/test/kaa_test.h
/var/www/html/debian/gateway/kaa/test/kaa_test_external.c
/var/www/html/debian/gateway/kaa/test/kaatcp/kaatcp_parser_test.c
/var/www/html/debian/gateway/kaa/test/kaatcp/kaatcp_request_test.c
/var/www/html/debian/gateway/kaa/test/platform-impl/test_ext_log_storage_memory.c
/var/www/html/debian/gateway/kaa/test/platform-impl/test_ext_log_upload_strategies.c
/var/www/html/debian/gateway/kaa/test/test_kaa_channel_manager.c
/var/www/html/debian/gateway/kaa/test/test_kaa_common.c
/var/www/html/debian/gateway/kaa/test/test_kaa_common_schema.c
/var/www/html/debian/gateway/kaa/test/test_kaa_context.c
/var/www/html/debian/gateway/kaa/test/test_kaa_event.c
/var/www/html/debian/gateway/kaa/test/test_kaa_extension.c
/var/www/html/debian/gateway/kaa/test/test_kaa_extension_private.c
/var/www/html/debian/gateway/kaa/test/test_kaa_status.c
/var/www/html/debian/gateway/kaa/test/test_meta_extension.c
/var/www/html/debian/gateway/kaa/test/test_platform_protocol.c
/var/www/html/debian/gateway/kaa/test/test_platform_utils.c
/var/www/html/debian/gateway/kaa/test/utilities/test_kaa_reallocation.c
/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/aes.c
/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/aes_key.c
/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/asn1parse.c
/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/asn1write.c
/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/base64.c
/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/bignum.c
/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/ctr_drbg.c
/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/entropy.c
/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/entropy_poll.c
/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/mbedtls/aes.h
/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/mbedtls/asn1.h
/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/mbedtls/asn1write.h
/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/mbedtls/base64.h
/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/mbedtls/bignum.h
/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/mbedtls/bn_mul.h
/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/mbedtls/cipher.h
/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/mbedtls/config.h
/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/mbedtls/ctr_drbg.h
/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/mbedtls/des.h
/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/mbedtls/entropy.h
/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/mbedtls/entropy_poll.h
/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/mbedtls/md.h
/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/mbedtls/md5.h
/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/mbedtls/md_internal.h
/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/mbedtls/oid.h
/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/mbedtls/pem.h
/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/mbedtls/pk.h
/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/mbedtls/pk_internal.h
/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/mbedtls/rsa.h
/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/mbedtls/sha1.h
/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/mbedtls/sha256.h
/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/md.c
/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/md_wrap.c
/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/oid.c
/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/pem.c
/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/pk.c
/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/pk_wrap.c
/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/pkparse.c
/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/pkwrite.c
/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/rsa.c
/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/rsa_encrypt.c
/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/sha1.c
/var/www/html/debian/gateway/kaa/thirdparty/mbedtls/sha256.c
/var/www/html/debian/gateway/kaa/tools/kaa_encryption/kaa_rsa_key_gen_app.c
/var/www/html/debian/gateway/kaa/tools/kaa_encryption/rsa_key_gen/include/kaa_rsa_key_gen.h
/var/www/html/debian/gateway/kaa/tools/kaa_encryption/rsa_key_gen/kaa_rsa_key_gen.c
/var/www/html/debian/gateway/main.c
/var/www/html/debian/gateway/main.new.c
/var/www/html/debian/gateway/main.old.c
/usr/include/arpa/inet.h
/usr/include/assert.h
/usr/include/ctype.h
/usr/include/curl/curl.h
/usr/include/errno.h
/usr/include/fcntl.h
/usr/include/inttypes.h
/usr/include/limits.h
/usr/include/netdb.h
/usr/include/netinet/in.h
/usr/include/pthread.h
/usr/include/setjmp.h
/usr/include/signal.h
/usr/include/stdint.h
/usr/include/stdio.h
/usr/include/stdlib.h
/usr/include/string.h
/usr/include/time.h
/usr/include/unistd.h
/usr/include/alloca.h
/usr/include/endian.h
/usr/include/features.h
/usr/include/getopt.h
/usr/include/libio.h
/usr/include/rpc/netdb.h
/usr/include/sched.h
/usr/include/xlocale.h
/usr/include/_G_config.h
/usr/include/stdc-predef.h
/usr/include/gconv.h
/usr/include/wchar.h
/usr/include/wctype.h
